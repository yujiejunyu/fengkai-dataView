(window.webpackJsonp=window.webpackJsonp||[]).push([[33,18],{"8P/5":function(t,e,n){"use strict";n.r(e);var r=n("EBC7"),o=n("GAzf"),u=n("4zwu"),a=n("zT9C"),i=n.n(a),d=n("G59M");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function l(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=function(t){t=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var n;if(t)return"string"==typeof t?h(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var f=["flyTo","addToMap","highlight"],g={center:{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain"},noRepeat:{backgroundSize:"100% 100%",backgroundRepeat:"no-repeat"},repeatX:{backgroundRepeat:"repeat-x",backgroundSize:"auto 100%"},repeatY:{backgroundRepeat:"repeat-Y",backgroundSize:"100% auto"},repeatXY:{backgroundRepeat:"repeat",backgroundSize:"auto"}},a={mixins:[r.default,o.a],data:function(){return{eventList:[],swiperBtnStyle:{},activeIndex:0,prevContentLength:0}},computed:{nextProps:function(){var t=i()(this.renderProps);return this.dealWithProps(t),t},isEditor:function(){return"editor"===this.$store.getters.getAction},itemContent:function(){return function(t,e){return"custom"===t.fieldSourceType?"text"===t.contentType?t.content:"image"===t.contentType?t.src:void 0:this.getValueProps(t.field,e)}},triggerDatas:function(){return this.$store.getters.getActionsByComponentId(this.component.componentId)},exsistDatasource:function(){return!!this.getDatasetGeoJSON().length}},watch:{triggerDatas:{handler:function(){this.handleTriggers()},deep:!0},"nextProps.content":{handler:function(t,e){e&&t.length===e.length||(this.activeIndex=0)},deep:!0},"nextProps.activeIndex":{handler:function(t,e){e!==t&&this.nextProps.content.length===this.prevContentLength&&(this.activeIndex=t)}}},mounted:function(){this.instanceCmp&&this.$emit("instance-loaded",this.instanceCmp.swiper)},beforeDestroy:function(){this.instanceCmp&&this.instanceCmp.$off("childrenlistchange"),this.offTriggerEvent()},methods:{getDatasetGeoJSON:function(){var t=this.currentDataCache.data;return(null==(t=(u.a.$options.getData(t)||{}).features)?void 0:t.features)||[]},getValueProps:function(t,e){var n=this.getDatasetGeoJSON(),r=n.length;return e&&r<=e&&(e%=r),null==(r=n[e])?void 0:r.properties[t]},dealWithProps:function(t){if(this.exsistDatasource)for(var e=this.getDatasetGeoJSON().length,n=0;n<e-1;n++)t.content.push(i()({slideshowItem:p(t.content[0].slideshowItem)}));t.background="rgba(0, 0, 0, 0)",t.autoplay.delay=1e3*t.autoplay.delay,t.autoplay.enabled?delete t.autoplay.enabled:delete t.autoplay,t.pagination.el=".swiper-pagination",t.pagination.dynamicBullets=!0,t.pagination.enabled?delete t.pagination.enabled:delete t.pagination,t.navigation.enabled?(this.swiperBtnStyle=l({height:t.navigation.style.size,width:t.navigation.style.size},t.navigation.style),t.navigation={nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}):delete t.navigation,t.content.forEach(function(t){t.slideshowItem.forEach(function(t){"image"===t.contentType&&(t.style=l({height:"100%",width:t.imageStyle.width},g[t.imageStyle.repeat]),delete t.imageStyle.repeat,delete t.imageStyle.width,t.divStyle=l(l({},t.imageStyle),{},{width:"100%"}))})})},handleComponentMounted:function(){var t=this;this.instanceCmp=this.$refs.slideshow,this.instanceCmp.$on("childrenlistchange",function(){t.activeIndex=t.defaultParams.props.activeIndex,t.prevContentLength=t.nextProps.content.length}),this.handleTriggers(),setTimeout(function(){t.instanceCmp.$emit("change",{activeIndex:0,realIndex:0})},1e3)},handleComponentUpdated:function(){var t=this;this.$nextTick(function(){t.$emit("instance-loaded",t.instanceCmp.swiper)})},handleTriggers:function(){var o=this;if(this.offTriggerEvent(),this.eventList=[],this.triggerDatas)for(var t in this.triggerDatas)!function(n){var t=d.b[n].events||[],r=o.triggerDatas[n];t.forEach(function(t){var e="handleTrigger".concat(t.replace(t[0],t[0].toUpperCase()));o[e]=function(t){var e=o.getDatasetGeoJSON(),t=o.getTriggerDatas({eventParams:t,targetActions:r,triggerType:n,features:e}).datas;o.$store.dispatch("UPDATE_ACTION",{componentId:o.component.componentId,type:n,status:"active",datas:t})},o.instanceCmp.$on(t,o[e]),o.eventList.push({eventName:t,listenerName:e})})}(t);else Object.keys(d.b).forEach(function(t){t="".concat(o.component.componentId,"-").concat(t);u.a.$options.getData(t)&&u.a.$options.deleteData(t)})},getTriggerDatas:function(t){var r=t.eventParams,e=t.targetActions,o=t.triggerType,a=t.features,i=r.realIndex,s=[],c=a&&a[i],p="".concat(this.component.componentId,"-").concat(o);return e.forEach(function(t){var e,n=Object.assign({},r.target,{dataIndex:i,features:a}),n=d.b[o].callback(l({},n),t);-1!==f.indexOf(t.targetAction)&&(u.a.$options.updateFeature(c,p),e=p),s.push({actionId:t.actionId,data:n&&n.data,featureId:e})}),{datas:s}},offTriggerEvent:function(){var n=this;this.eventList&&this.instanceCmp&&this.eventList.forEach(function(t){var e=t.eventName,t=t.listenerName;n.instanceCmp.$off(e,n[t]),n[t]=null})}}},r=n("KHd+"),o=Object(r.a)(a,function(){var r=this,t=r.$createElement,o=r._self._c||t;return o("div",{staticClass:"sm-slideshow-render",style:r.background},[o(r.componentId,r._b({ref:"slideshow",tag:"component",style:r.defaultParams.style,attrs:{activeIndex:r.activeIndex,componentId:r.component.componentId},on:{"hook:mounted":r.handleComponentMounted,"hook:updated":r.handleComponentUpdated}},"component",r.nextProps,!1),[r._l(r.nextProps.content,function(t,n){return o("sm-slideshow-item",{key:n,class:[r.isEditor&&"swiper-no-swiping"]},[o("div",{staticClass:"sm-slideshow-item-content"},[r._l(t.slideshowItem,function(t,e){return["text"===t.contentType?o("p",{key:e,style:Object.assign({},{textColor:r.nextProps.textColor},t.textStyle,{wordWrap:"break-word"})},[r._v("\n            "+r._s(r.itemContent(t,n))+"\n          ")]):r._e(),r._v(" "),"image"===t.contentType?o("div",{key:e,style:t.divStyle},[o("div",{style:Object.assign({},t.style,{backgroundImage:"url("+r.itemContent(t,n)+")"})})]):r._e()]})],2)])}),r._v(" "),o("div",{staticClass:"swiper-button-prev",style:r.swiperBtnStyle,attrs:{slot:r.nextProps.navigation?"button-prev":""},slot:r.nextProps.navigation?"button-prev":""},[o("sm-icon",{attrs:{type:"left"}})],1),r._v(" "),o("div",{staticClass:"swiper-button-next",style:r.swiperBtnStyle,attrs:{slot:r.nextProps.navigation?"button-next":""},slot:r.nextProps.navigation?"button-next":""},[o("sm-icon",{attrs:{type:"right"}})],1)],2)],1)},[],!1,null,null,null);e.default=o.exports},EBC7:function(t,e,n){"use strict";n.r(e);var r=n("oCYn"),o=n("3Dh3"),a=n("zT9C"),i=n.n(a),a=n("XaGS"),s=n.n(a),c=n("GSdF"),p=n("FuRH"),a=n("6G66"),u=n("QCDS"),a={mixins:[a.a],props:{pageId:{type:String},component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,renderProps:null}},computed:{background:function(){return-1!==this.excludeComponentsBackground.indexOf(this.component.componentType)?{}:Object(c.a)(this.component.propDatas)},subComponentList:function(){var t=this.$store.getters.components;return Object.values(t.mapSubComponent).map(function(t){return t.type})},excludeComponentsBackground:function(){return this.subComponentList.concat("Container")},mapsOnScreen:function(){return this.$store.getters.mapsOnScreen[this.pageId]},firstMapTarget:function(){return(this.mapsOnScreen[0]||{}).value}},watch:{component:{handler:function(){var t=Object(o.d)(this.component.uri);this.componentId=r.default.component(t)?t:null},deep:!0,immediate:!0},"defaultParams.props":{handler:function(t,e){s()(t,e)||(this.renderProps=i()(this.defaultParams.props),-1===this.excludeComponentsBackground.indexOf(this.component.componentType)&&(this.renderProps.background=""),"Iframe"===this.component.componentType&&(this.renderProps.src=Object(u.c)(this.renderProps.src)),-1!==["LiquidFill","TimeRange"].indexOf(this.component.componentType)&&(this.renderProps.backgroundColor=this.renderProps.backgroundColorReplacer,delete this.renderProps.backgroundColorReplacer))},immediate:!0},mapsOnScreen:function(t,e){s()(t,e)||this.renderProps.mapTarget&&!p.a.$options.getMap(this.renderProps.mapTarget)&&(this.renderProps.mapTarget=this.firstMapTarget)}},created:function(){this.setDefaultMapTarget()},methods:{setDefaultMapTarget:function(){this.renderProps&&this.renderProps.hasOwnProperty("mapTarget")&&!this.renderProps.mapTarget&&(this.renderProps.mapTarget=this.getRelatedMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,t=t.activeComponentId,n=this.$store.getters.getGridLayoutByPageId(this.pageId,this.$store.getters.mode);return Object(o.i)(e,n.content||[],t)}}},n=n("KHd+"),n=Object(n.a)(a,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId}},"component",t.renderProps,!1)),t._v(" "),t._t("fullScreen")],2)},[],!1,null,null,null);e.default=n.exports},GAzf:function(t,e,n){"use strict";var r=n("4zwu"),o=n("FuRH"),a=n("3Dh3"),i=n("+NyJ");e.a={data:function(){return{listenMapLoad:!1}},computed:{dataIds:function(){return this.component.dataIds||[]},dataId:function(){return this.dataIds[0]},currentDataCache:function(){return this.$store.getters.getDataCache(this.dataId)},components:function(){return this.$store.getters.components},componentType:function(){return this.component.componentType},mapTarget:function(){return this.component.propDatas.mapTarget},currentProps:function(){var t,e;return"server"===(t=this.renderProps).dataType&&0<this.dataIds.length&&(e=this.getValueProps(t),Object.assign(t,e)),t},labelConfig:function(){return Object(i.f)(this.component.componentId,this.dataId)}},beforeCreate:function(){this.watcher=[]},mounted:function(){this.listenMapLoad&&o.a.$on("load-map",this.loadMapSucceed)},beforeDestroy:function(){this.listenMapLoad&&o.a.$off("load-map",this.loadMapSucceed)},methods:{cleanWatcher:function(){this.watcher.forEach(function(t){t()}),this.watcher=[]},loadMapSucceed:function(t,e){e===this.mapTarget&&this.loadMap(e)},loadMap:function(){},getValueProps:function(t){var e=this.getFeatureId(this.dataId),e=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")&&t.filterCategoryValue?r.a.$options.getDataByCategory(this.currentDataCache,[t.filterCategoryValue])||{}:r.a.$options.getData(e)||{};return this.updateDataPropsHandler(t,{features:e})},getValueByField:function(t,e){var n=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time"),t=t&&t.features&&t.features.features,n=n?t&&t.length-1:0,t=t&&0<=n&&t[n]&&t[n].properties[e];return t||0===t?t.toString():""},hasField:function(t,e){return t&&t.features&&t.features.features[0]&&t.features.features[0].properties.hasOwnProperty(e)},getFeatureId:function(t){return Object(a.g)(this.$store.getters.getDataCache,t)}}}}}]);