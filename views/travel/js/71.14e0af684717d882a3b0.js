(window.webpackJsonp=window.webpackJsonp||[]).push([[71,34],{"5yoo":function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===n(t)?t:String(t)}(o.key),o)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,"a",function(){return a});var a=i(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,n=t;if(!(o instanceof n))throw new TypeError("Cannot call a class as a function");this.layout={visibility:"visible"},this.paint={"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-translate-anchor":"map","circle-pitch-scale":"map","circle-pitch-alignment":"viewport","circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},Object.assign(this.paint,e),Object.assign(this.layout,r)})},CKgU:function(t,e,r){"use strict";var i=r("FuRH"),a=r("yIpb"),l=r("K79h"),o=r("oCYn"),r=r("YKMj");function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===f(t)?t:String(t)}(o.key),o)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=n(r),e=(t=o?(t=n(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var l=t.length-1;0<=l;l--)(n=t[l])&&(a=(i<3?n(a):3<i?n(e,r,a):n(e,r))||a);return 3<i&&a&&Object.defineProperty(e,r,a),a};function y(e,r){for(var t=arguments.length,o=new Array(2<t?t-2:0),n=2;n<t;n++)o[n-2]=arguments[n];var i=e.constructor.options;i.mixins&&i.mixins.forEach(function(t){t[r]&&(t=t[r]).call.apply(t,[e].concat(o))}),i[r]&&(i=i[r]).call.apply(i,[e].concat(o))}o=function(t){var e=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var r,o=s(n);function n(){var t=this,e=n;if(t instanceof e)return o.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"mapTargetChanged",value:function(t,e){var r;t&&e&&t!==e&&(e=e||this.firstDefaultTarget,(r=i.a.$options.getMap(e))&&this.removeMap(r,e),i.a.$options.getMap(t))&&this.loadMap(t)}},{key:"mounted",value:function(){var t=this.getTargetName();this.firstDefaultTarget=t,i.a.$options.getMap(t)&&this.loadMap(t),i.a.$on("load-map",this.loadMapSucceed),a.a.$on("delete-map",this.removeMapSucceed)}},{key:"beforeDestroy",value:function(){this.removeMap(),i.a.$off("load-map",this.loadMapSucceed),a.a.$off("delete-map",this.removeMapSucceed)}},{key:"getFirstTarget",value:function(){var t,e;for(e in i.a.$options.getAllMaps())if(e){t=e;break}return t}},{key:"getTargetName",value:function(){var t=this.$parent,t=t&&t.$options.name&&-1!==["smwebmap","smncpmap"].indexOf(t.$options.name.toLowerCase())&&t.target;return this.mapTarget||t||this.getFirstTarget()}},{key:"loadMap",value:function(t){var e=this;this.firstDefaultTarget||(this.firstDefaultTarget=t),this.map=i.a.$options.getMap(t),this.webmap=i.a.$options.getWebMap(t),this.viewModel&&"function"==typeof this.viewModel.setMap&&this.viewModel.setMap({map:this.map,webmap:this.webmap,mapTarget:t}),y(this,"loaded",this.map,t),this.$nextTick(function(){e.$emit("loaded")})}},{key:"removeMap",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.map,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getTargetName();t&&(this.viewModel&&this.viewModel.removed&&this.viewModel.removed(),y(this,"removed",t,e),this.map=null,this.webmap=null,this.firstDefaultTarget=null)}},{key:"loadMapSucceed",value:function(t,e){e===this.getTargetName()&&this.loadMap(e)}},{key:"removeMapSucceed",value:function(t){t===this.getTargetName()&&this.removeMap()}},{key:"mapNotLoadedTip",value:function(){return!this.map&&(l.a.destroy(),l.a.warning(this.$t("warning.unassociatedMap")),!0)}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}(o.default);p([Object(r.Prop)()],o.prototype,"mapTarget",void 0),p([Object(r.Watch)("mapTarget")],o.prototype,"mapTargetChanged",null),o=p([r.Component],o),e.a=o},K79h:function(t,e,r){"use strict";var o=r("Iv0b");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(e,t){var r,o=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)),o}function n(o){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var e,r;e=o,r=n[t=t],(t=function(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}var l="sm-component-message",c=o.default.config;c({prefixCls:l}),o.default.config=function(t){t.prefixCls&&t.prefixCls!==l&&o.default.destroy(),c(n(n({},t),{},{prefixCls:t.prefixCls||l}))},e.a=o.default},dbBt:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===n(t)?t:String(t)}(o.key),o)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,"a",function(){return a});var a=i(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,n=t;if(!(o instanceof n))throw new TypeError("Cannot call a class as a function");this.layout={visibility:"visible"},this.paint={"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3","fill-translate-anchor":"map"},Object.assign(this.paint,e),Object.assign(this.layout,r)})},oMcV:function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===n(t)?t:String(t)}(o.key),o)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,"a",function(){return a});var a=i(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=this,n=t;if(!(o instanceof n))throw new TypeError("Cannot call a class as a function");this.layout={visibility:"visible","line-cap":"butt","line-join":"miter"},this.paint={"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},Object.assign(this.paint,e),Object.assign(this.layout,r)})},oTir:function(t,e,r){"use strict";var o=r("oCYn"),n=r("YKMj"),l=r("yIpb"),i=r("qAG6"),a=r("5ZGa");function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===p(t)?t:String(t)}(o.key),o)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(r),e=(t=o?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var y,r=function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var l=t.length-1;0<=l;l--)(n=t[l])&&(a=(i<3?n(a):3<i?n(e,r,a):n(e,r))||a);return 3<i&&a&&Object.defineProperty(e,r,a),a},o=y=function(t){var e=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var r,o=s(n);function n(){var t=this,e=n;if(t instanceof e)return(t=o.apply(this,arguments)).backgroundData="",t.textColorsData="",t.collapseCardBackgroundData="",t.collapseCardHeaderBgData="",t.subComponentSpanBgData="",t.tablePopupBgData="",t.colorGroupsData=[],t.themeStyleName=[],t;throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"getBackgroundStyle",get:function(){return{background:this.backgroundData}}},{key:"collapseCardBackgroundStyle",get:function(){return{background:this.collapseCardBackgroundData}}},{key:"collapseCardBackgroundLightStyle",get:function(){return{background:Object(a.b)({colorGroup:[this.collapseCardBackgroundData]})[2]}}},{key:"collapseCardHeaderBgStyle",get:function(){return{background:this.collapseCardHeaderBgData}}},{key:"subComponentSpanBgStyle",get:function(){return{background:this.subComponentSpanBgData}}},{key:"tablePopupBgStyle",get:function(){return{background:this.tablePopupBgData}}},{key:"getTextColorStyle",get:function(){return{color:this.textColorsData}}},{key:"headingTextColorStyle",get:function(){return{color:Object(i.g)(this.textColorsData,.85)}}},{key:"secondaryTextColorStyle",get:function(){return{color:Object(i.g)(this.textColorsData,.45)}}},{key:"disabledTextColorStyle",get:function(){return{color:Object(i.g)(this.textColorsData,.25)}}},{key:"getBackground",get:function(){return this.backgroundData}},{key:"getTextColor",get:function(){return this.textColorsData}},{key:"getColorStyle",get:function(){return function(t){return{color:this.colorGroupsData[t]}}}},{key:"getColor",get:function(){return function(t){return this.colorGroupsData[t]}}},{key:"themeStyleChanged",value:function(t){return t}},{key:"created",value:function(){this.initThemeData(),this.registerPropListener()}},{key:"mounted",value:function(){l.a.$on("change-theme",this.changeThemeCallback)}},{key:"beforeDestroy",value:function(){l.a.$off("change-theme",this.changeThemeCallback)}},{key:"changeThemeCallback",value:function(t){this.setDataRelatedProps(t,!0),"background"in t&&this.setDataRelatedWithBackgound("",t),this.initNeedTheme(t)}},{key:"initThemeData",value:function(){this.setDataRelatedProps(),this.setDataRelatedWithBackgound(this.background)}},{key:"initNeedTheme",value:function(e){var r=this;this.themeStyleName.forEach(function(t){r[t]="primaryColor"===t?e.colorGroup&&e.colorGroup[0]:r.getRealColor(t,e)})}},{key:"registerPropListener",value:function(){var t=this,o=this;this.getSelfProps().forEach(function(r){t.$watch(r,function(t){var e=this.getDataNameOfProp(r);o[e]=t||this.getRealColor(r),"background"===r&&o.setDataRelatedWithBackgound(t)})})}},{key:"setDataRelatedProps",value:function(o,n){var i=this,a=o||l.a.$options.theme||{};this.getSelfProps().forEach(function(t){var e,r;t in a&&(e=i.getDataNameOfProp(t),r=n?"":i[t],i[e]=r||i.getRealColor(t,o))})}},{key:"setDataRelatedWithBackgound",value:function(t,e){this.collapseCardHeaderBgData=t||this.getRealColor("collapseCardHeaderBg",e),this.subComponentSpanBgData=t||this.getRealColor("subComponentSpanBg",e),this.collapseCardBackgroundData=t||this.getRealColor("collapseCardBackground",e),this.tablePopupBgData=t||this.getRealColor("messageBackground",e)}},{key:"getSelfProps",value:function(){return Object.keys(y.extendOptions.props)}},{key:"getRealColor",value:function(t,e){var r,o,e=e||l.a.$options.theme||{};return"colorGroup"!==t&&e[t]&&-1!==e[t].indexOf("var")?(r=Object(a.c)(e),r=window.getComputedStyle(document.querySelector(r)),o=e[t].replace(/var\((.+)\)/g,"$1"),r.getPropertyValue(o).trim()):e[t]}},{key:"getDataNameOfProp",value:function(t){switch(t){case"textColor":return"textColorsData";case"colorGroup":return"colorGroupsData";default:return"".concat(t,"Data")}}},{key:"render",value:function(t){return t("template",null)}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}(o.default);r([Object(n.Prop)()],o.prototype,"background",void 0),r([Object(n.Prop)()],o.prototype,"textColor",void 0),r([Object(n.Prop)()],o.prototype,"colorGroup",void 0),r([Object(n.Emit)()],o.prototype,"themeStyleChanged",null),o=y=r([Object(n.Component)({name:"Theme"})],o),e.a=o},ooFd:function(t,e,r){"use strict";r.r(e);var o=r("oTir"),n=r("CKgU"),i=r("hdLw"),a=r.n(i);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===l(t)?t:String(t)}(o.key),o)}}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(r),e=(t=o?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p="#01ffff",y={circle:["circle-radius","circle-stroke-width"],line:["line-width"],fill:["line-width"]},h=function(t){var e=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t);var r,o=s(n);function n(t,e){var r;if(this instanceof n)return(r=o.call(this)).map=t,r.layers=e.layers||[],r.layerStyle=e.layerStyle||{},r.popup=null,r;throw new TypeError("Cannot call a class as a function")}return e=n,(t=[{key:"addPopup",value:function(t,e){return e&&(e.style.display="block",this.popup=new a.a.Popup({maxWidth:"none",className:"sm-mapboxgl-identify-popup sm-mapboxgl-tabel-popup",closeButton:!1}).setLngLat(t).setDOMContent(e).addTo(this.map)),this.popup}},{key:"addOverlayToMap",value:function(t,e){var r,o={circle:{"circle-color":p,"circle-opacity":.6,"circle-stroke-color":p,"circle-stroke-opacity":1},line:{"line-color":p,"line-opacity":1},fill:{"fill-color":p,"fill-opacity":.6,"fill-outline-color":p},symbol:{layout:{"icon-size":5}}},n=t.type,i=t.id,a=t.paint,l=(-1!==i.indexOf("-strokeLine")&&"line"===n&&(n="fill",a={}),this._setDefaultPaintWidth(this.map,n,i,y[n],this.layerStyle));"circle"!==n&&"line"!==n&&"fill"!==n||(r=l[n],a=Object.assign({},t,{id:i+"-identify-SM-highlighted",type:n,paint:r&&r.paint||Object.assign({},a,o[n]),layout:r&&r.layout||{visibility:"visible"},filter:e}),this.map.addLayer(a)),"fill"===n&&(r=(o=l.strokeLine||l.stokeLine||{})&&o.paint||{"line-width":3,"line-color":p,"line-opacity":1},a=Object.assign({},t,{id:i+"-identify-SM-StrokeLine",type:"line",paint:r,layout:{visibility:"visible"},filter:e}),this.map.addLayer(a))}},{key:"removed",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.layers;this.removePopup(),this.removeOverlayer(t)}},{key:"removePopup",value:function(){this.popup&&this.popup.remove()&&(this.popup=null)}},{key:"removeOverlayer",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.layers;t&&t.forEach(function(t){e.map&&e.map.getLayer(t+"-identify-SM-highlighted")&&e.map.removeLayer(t+"-identify-SM-highlighted"),e.map&&e.map.getLayer(t+"-identify-SM-StrokeLine")&&e.map.removeLayer(t+"-identify-SM-StrokeLine")})}},{key:"_setDefaultPaintWidth",value:function(r,o,n,t,i){if(t)return t.forEach(function(t){var e;"fill"!==o?e=r.getLayer(n)&&r.getPaintProperty(n,t):o="stokeLine",i[o].paint[t]=i[o].paint[t]||e,void 0!==i[o].paint[t]&&""!==i[o].paint[t]||(i[o].paint[t]="circle-stroke-width"===t||"stokeLine"===o?2:8)}),i}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}(a.a.Evented),d=r("5yoo"),b=r("dbBt"),m=r("oMcV"),v=r("qAG6"),i={name:"SmIdentify",mixins:[n.a,o.a],props:{layers:{type:Array,default:function(){return[]}},fields:{type:Array,default:function(){return[]}},clickTolerance:{type:Number,default:5},layerStyle:{type:Object,default:function(){return{line:new m.a({"line-width":3,"line-color":"#409eff","line-opacity":1}),circle:new d.a({"circle-color":"#409eff","circle-opacity":.6,"circle-radius":8,"circle-stroke-width":2,"circle-stroke-color":"#409eff","circle-stroke-opacity":1}),fill:new b.a({"fill-color":"#409eff","fill-opacity":.6,"fill-outline-color":"#409eff"}),stokeLine:new m.a({"line-width":3,"line-color":"#409eff","line-opacity":1})}}},autoResize:{type:Boolean,default:!0},keyMaxWidth:{type:[Number,String],default:110},valueMaxWidth:{type:[Number,String],default:170},keyWidth:{type:[Number,String],default:110},valueWidth:{type:[Number,String],default:170}},data:function(){return{isHide:!0,popupProps:{}}},computed:{getWidthStyle:function(){var t={keyWidth:{},valueWidth:{}};return this.autoResize?(this.keyMaxWidth&&(t.keyWidth.maxWidth=this.keyMaxWidth+"px"),this.valueMaxWidth&&(t.valueWidth.maxWidth=this.valueMaxWidth+"px")):(this.keyWidth&&(t.keyWidth.width=this.keyWidth+"px"),this.valueWidth&&(t.valueWidth.width=this.valueWidth+"px")),t}},watch:{layers:{handler:function(t,e){this.viewModel&&this.viewModel.removed(e),this.removeCursorEvent(e),this.setViewModel()}},layerStyle:function(){this.setViewModel()}},loaded:function(){var t=this;this.isHide=!0,this.changeCursorGrab=function(){return t.changeCursor("grab",t.map)},this.setViewModel()},removed:function(){this.map&&(this.map.off("click",this.sourceMapClickFn),this.map.off("mousemove",this.changeCursorPointer),this.map.off("mouseleave",this.changeCursorGrab)),this.viewModel&&this.viewModel.removed()},beforeDestroy:function(){this.$options.removed.call(this)},methods:{setViewModel:function(){this.layers&&(this.viewModel=new h(this.map,{mapTarget:this.getTargetName(),layers:this.layers,layerStyle:this.layerStyle}),this.map&&this.bindMapClick(this.map),this.changeClickedLayersCursor(this.layers))},bindMapClick:function(t){t.on("click",this.sourceMapClickFn)},sourceMapClickFn:function(t){this.viewModel.removeOverlayer(this.layers);var e,r,o=this.bindQueryRenderedFeatures(t);o[0]&&(e=this.layers&&this.layers.indexOf(o[0].layer.id),this.fields instanceof Array?"string"==typeof(r=this.fields[e])&&(r=this.fields):this.fields instanceof Object&&0===e&&(r=this.fields),this.layersMapClickFn(t,r||[],o[0]))},bindQueryRenderedFeatures:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.layers,r=t.target,e=e.filter(function(t){return!!r.getLayer(t)}),t=[[t.point.x-this.clickTolerance,t.point.y-this.clickTolerance],[t.point.x+this.clickTolerance,t.point.y+this.clickTolerance]];return r.queryRenderedFeatures(t,{layers:e})},layersMapClickFn:function(t,e,r){var t=t.target,o=(this.addPopup(r,e),["all"]),n=["smx","smy","lon","lat","longitude","latitude","x","y","usestyle","featureinfo"];r._vectorTileFeature._keys.forEach(function(t){-1===n.indexOf(t.toLowerCase())&&void 0!==r.properties[t]&&o.push(["==",t,r.properties[t]])}),this.addOverlayToMap(r.layer,o),t.getLayer(r.layer.id+"-identify-SM-highlighted")&&t.setFilter(r.layer.id+"-identify-SM-highlighted",o)},addPopup:function(e,t){var r,o=this;this.popupProps={},e.properties&&(0<t.length?t.forEach(function(t){Object.prototype.hasOwnProperty.call(e.properties,t)&&(o.popupProps[t]=e.properties[t])}):this.popupProps=e.properties,r=Object(v.h)(e),this.$nextTick(function(){o.isHide=!1,o.viewModel.addPopup(r,o.$refs.Popup),Object(v.t)(o.tablePopupBgData)}))},addOverlayToMap:function(t,e){this.viewModel.addOverlayToMap(t,e)},changeClickedLayersCursor:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.map;t&&t.forEach(function(t){r.on("mousemove",t,e.changeCursorPointer),r.on("mouseleave",t,e.changeCursorGrab)})},changeCursor:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"grab",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.map;e&&e.getCanvas()&&(e.getCanvas().style.cursor=t)},changeCursorPointer:function(){this.changeCursor("pointer",this.map)},removeCursorEvent:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.layers;this.map&&(t=t.filter(function(t){return!!e.map.getLayer(t)}),this.map.off("click",this.sourceMapClickFn),t.forEach(function(t){e.map.off("mousemove",t,e.changeCursorPointer),e.map.off("mouseleave",t,e.changeCursorGrab),e.changeCursor("grab",e.map)}))}}},n=r("KHd+"),o=Object(n.a)(i,function(){var o=this,t=o.$createElement,n=o._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"Popup",staticClass:"sm-component-identify",style:[o.tablePopupBgStyle,o.getTextColorStyle]},[n("ul",{class:[o.autoResize?"sm-component-identify__auto":"sm-component-identify__custom","sm-component-identify__content"]},o._l(o.popupProps,function(t,e,r){return n("li",{key:r,staticClass:"content"},[n("div",{staticClass:"left ellipsis",style:o.getWidthStyle.keyWidth,attrs:{title:e}},[o._v(o._s(e))]),o._v(" "),n("div",{staticClass:"right ellipsis",style:o.getWidthStyle.valueWidth,attrs:{title:t}},[o._v(o._s(t))])])}),0)])},[],!1,null,null,null);e.default=o.exports}}]);