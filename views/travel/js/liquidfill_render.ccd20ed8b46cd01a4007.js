(window.webpackJsonp=window.webpackJsonp||[]).push([[28,18],{EBC7:function(t,e,n){"use strict";n.r(e);var r=n("oCYn"),a=n("3Dh3"),o=n("zT9C"),s=n.n(o),o=n("XaGS"),i=n.n(o),c=n("GSdF"),u=n("FuRH"),o=n("6G66"),p=n("QCDS"),o={mixins:[o.a],props:{pageId:{type:String},component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,renderProps:null}},computed:{background:function(){return-1!==this.excludeComponentsBackground.indexOf(this.component.componentType)?{}:Object(c.a)(this.component.propDatas)},subComponentList:function(){var t=this.$store.getters.components;return Object.values(t.mapSubComponent).map(function(t){return t.type})},excludeComponentsBackground:function(){return this.subComponentList.concat("Container")},mapsOnScreen:function(){return this.$store.getters.mapsOnScreen[this.pageId]},firstMapTarget:function(){return(this.mapsOnScreen[0]||{}).value}},watch:{component:{handler:function(){var t=Object(a.d)(this.component.uri);this.componentId=r.default.component(t)?t:null},deep:!0,immediate:!0},"defaultParams.props":{handler:function(t,e){i()(t,e)||(this.renderProps=s()(this.defaultParams.props),-1===this.excludeComponentsBackground.indexOf(this.component.componentType)&&(this.renderProps.background=""),"Iframe"===this.component.componentType&&(this.renderProps.src=Object(p.c)(this.renderProps.src)),-1!==["LiquidFill","TimeRange"].indexOf(this.component.componentType)&&(this.renderProps.backgroundColor=this.renderProps.backgroundColorReplacer,delete this.renderProps.backgroundColorReplacer))},immediate:!0},mapsOnScreen:function(t,e){i()(t,e)||this.renderProps.mapTarget&&!u.a.$options.getMap(this.renderProps.mapTarget)&&(this.renderProps.mapTarget=this.firstMapTarget)}},created:function(){this.setDefaultMapTarget()},methods:{setDefaultMapTarget:function(){this.renderProps&&this.renderProps.hasOwnProperty("mapTarget")&&!this.renderProps.mapTarget&&(this.renderProps.mapTarget=this.getRelatedMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,t=t.activeComponentId,n=this.$store.getters.getGridLayoutByPageId(this.pageId,this.$store.getters.mode);return Object(a.i)(e,n.content||[],t)}}},n=n("KHd+"),n=Object(n.a)(o,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId}},"component",t.renderProps,!1)),t._v(" "),t._t("fullScreen")],2)},[],!1,null,null,null);e.default=n.exports},GAzf:function(t,e,n){"use strict";var r=n("4zwu"),a=n("FuRH"),o=n("3Dh3"),s=n("+NyJ");e.a={data:function(){return{listenMapLoad:!1}},computed:{dataIds:function(){return this.component.dataIds||[]},dataId:function(){return this.dataIds[0]},currentDataCache:function(){return this.$store.getters.getDataCache(this.dataId)},components:function(){return this.$store.getters.components},componentType:function(){return this.component.componentType},mapTarget:function(){return this.component.propDatas.mapTarget},currentProps:function(){var t,e;return"server"===(t=this.renderProps).dataType&&0<this.dataIds.length&&(e=this.getValueProps(t),Object.assign(t,e)),t},labelConfig:function(){return Object(s.f)(this.component.componentId,this.dataId)}},beforeCreate:function(){this.watcher=[]},mounted:function(){this.listenMapLoad&&a.a.$on("load-map",this.loadMapSucceed)},beforeDestroy:function(){this.listenMapLoad&&a.a.$off("load-map",this.loadMapSucceed)},methods:{cleanWatcher:function(){this.watcher.forEach(function(t){t()}),this.watcher=[]},loadMapSucceed:function(t,e){e===this.mapTarget&&this.loadMap(e)},loadMap:function(){},getValueProps:function(t){var e=this.getFeatureId(this.dataId),e=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")&&t.filterCategoryValue?r.a.$options.getDataByCategory(this.currentDataCache,[t.filterCategoryValue])||{}:r.a.$options.getData(e)||{};return this.updateDataPropsHandler(t,{features:e})},getValueByField:function(t,e){var n=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time"),t=t&&t.features&&t.features.features,n=n?t&&t.length-1:0,t=t&&0<=n&&t[n]&&t[n].properties[e];return t||0===t?t.toString():""},hasField:function(t,e){return t&&t.features&&t.features.features[0]&&t.features.features[0].properties.hasOwnProperty(e)},getFeatureId:function(t){return Object(o.g)(this.$store.getters.getDataCache,t)}}}},ZOAo:function(t,e,n){"use strict";n.r(e);var r=n("EBC7"),a=n("GAzf"),u=n("KU5N"),o=n("4zwu"),s=n("XaGS"),p=n.n(s),d={switch:"value",switchDataSource:"value"},s={mixins:[r.default,a.a],data:function(){return{props:{value:void 0}}},computed:{nextProps:function(){var t=Object.assign({},this.currentProps);return void 0!==this.props.value&&(t.value=this.props.value),this.dealWithProps(t),t},listeners:function(){var t=this.component.componentId;return this.$store.getters.getListensByComponentId(t)}},watch:{"currentProps.value":function(t,e){t!==e&&(this.props.value=t)},listeners:function(t,i){var c=this;!t||p()(t,i)?t||this.props.value&&(this.props.value=void 0):t.forEach(function(t){var e,n=t.targetData,r=t.actionId,a=t.timestamp,o=t.blockEventLinkage,n=n&&n.dataId,s=i&&i.find(function(t){return t.actionId===r});s&&s.timestamp===a||o||(n&&(e=c.getFeatures(n)),s=u.b[t.type].callback(t,e,c),c.props[d[t.type]]=s)})}},methods:{strip:function(t){return+parseFloat(t.toPrecision(1<arguments.length&&void 0!==arguments[1]?arguments[1]:12))},handleComponentMounted:function(){var e=this;this.$nextTick(function(){var t=e.$refs.liquidfill;e.$emit("instance-loaded",t&&t.chart)})},updateDataPropsHandler:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return n.value=this.getValueByField(e.features,t.field),n},dealWithProps:function(e){var n=this;"percent"===e.percentType&&(e.value/=100),Object.prototype.hasOwnProperty.call(e,"decimals")&&(e.formatter=function(t){t=n.strip(100*t.value);return(-1===e.decimals?t:t.toFixed(e.decimals))+"%"}),e.background=""},getFeatures:function(t){var e=this.$store.getters.getDataCache(t),t=this.getFeatureId(t),e=e&&e.type&&-1!==e.type.indexOf("time")&&this.currentProps.filterCategoryValue?o.a.$options.getDataByCategory(e,[this.currentProps.filterCategoryValue])||{}:o.a.$options.getData(t)||{};return e.features.features}}},r=n("KHd+"),a=Object(r.a)(s,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({ref:"liquidfill",tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId},on:{"hook:mounted":t.handleComponentMounted}},"component",t.nextProps,!1))],1)},[],!1,null,null,null);e.default=a.exports}}]);