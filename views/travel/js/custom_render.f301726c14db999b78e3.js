(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Vgju:function(t,e,o){"use strict";o.r(e);var a=o("FuRH"),n=o("yIpb"),i=o("3Dh3"),r=o("6G66"),s=o("oCYn");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(e,t){var o,n=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)),n}function d(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach(function(t){var e,o;e=n,o=a[t=t],(t=function(t){t=function(t,e){if("object"!==p(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!==p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}r={mixins:[r.a],props:{component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null}},computed:{selfTarget:function(){return this.defaultParams.props.mapTarget}},watch:{component:{handler:function(){var t="custom-".concat(this.component.componentType.toLowerCase());this.componentId=s.default.component(t)?t:null},deep:!0,immediate:!0},selfTarget:function(t,e){t=a.a.$options.getMap(t),e=a.a.$options.getMap(e);e&&this.callChildRemovedHooks(!1,e),t?(this.map=t,this.callChildLoadedHooks()):(this.map=a.a.$options.getMap(this.getMapTarget()),this.map&&this.callChildLoadedHooks())}},created:function(){this.loadedMapFn=this.loadedMap.bind(this),this.removedMapFn=this.removedMap.bind(this)},mounted:function(){this.componentId&&(this.exsistLoadedHook=!!this.vertifyLoadedHook(),this.exsistLoadedHook)&&(this.init(),a.a.$on("load-map",this.loadedMapFn),n.a.$on("delete-map",this.removedMapFn))},beforeDestroy:function(){this.map&&this.callChildRemovedHooks()},destroyed:function(){this.exsistLoadedHook&&(a.a.$off("load-map",this.loadedMapFn),n.a.$off("delete-map",this.removedMapFn))},methods:{init:function(){this.selfTarget?(this.map=a.a.$options.getMap(this.getMapTarget()),this.map&&this.callChildLoadedHooks()):this.getMapTarget()&&this.updateMapTarget(this.getMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,o=t.gridLayout.content,t=t.activeComponentId;return Object(i.i)(e,o||[],t)},getMapTarget:function(){var t=this.getTopTwoMapTarget(),e=-1!==t.all.indexOf(this.selfTarget)&&this.selfTarget;return-1!==t.all.indexOf(this.prevBindTarget)&&this.prevBindTarget||e||this.getRelatedMapTarget()||t.first},updateMapTarget:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=((0,this.$store.getters.getComponentsByID)(this.component.componentId)||{}).propDatas;this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.component.componentId,propDatas:d(d({},e),{},{mapTarget:t})})},vertifyLoadedHook:function(){return((this.$children[0]||{}).$options||{}).loaded},callChildLoadedHooks:function(){var t=this.$children[0],e=this.vertifyLoadedHook();e&&e.call(t,this.map)},callChildRemovedHooks:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length?arguments[1]:void 0,o=this.$children[0],n=(o||{}).$options.removed,n=(n&&n.call(o,e||this.map),e||(this.map=null),this.getTopTwoMapTarget()),o=(this.prevBindTarget=this.selfTarget,this.selfTarget===n.second?n.first:n.second);t&&this.updateMapTarget(o)},loadedMap:function(t,e){this.getMapTarget()===e&&(this.map=t,this.selfTarget===e?this.callChildLoadedHooks():this.updateMapTarget(e))},removedMap:function(t){this.getMapTarget()===t&&this.callChildRemovedHooks(!0)},getTopTwoMapTarget:function(){var t,e,o,n=a.a.$options.getAllMaps();for(o in n)if(t){if(!e){e=o;break}}else t=o;return{first:t,second:e,all:Object.keys(n)}}}},o=o("KHd+"),o=Object(o.a)(r,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style},"component",t.defaultParams.props,!1))],1)},[],!1,null,null,null);e.default=o.exports}}]);