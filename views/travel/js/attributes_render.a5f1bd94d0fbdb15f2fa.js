(window.webpackJsonp=window.webpackJsonp||[]).push([[12,18],{EBC7:function(t,e,n){"use strict";n.r(e);var r=n("oCYn"),o=n("3Dh3"),a=n("zT9C"),i=n.n(a),a=n("XaGS"),s=n.n(a),c=n("GSdF"),u=n("FuRH"),a=n("6G66"),p=n("QCDS"),a={mixins:[a.a],props:{pageId:{type:String},component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,renderProps:null}},computed:{background:function(){return-1!==this.excludeComponentsBackground.indexOf(this.component.componentType)?{}:Object(c.a)(this.component.propDatas)},subComponentList:function(){var t=this.$store.getters.components;return Object.values(t.mapSubComponent).map(function(t){return t.type})},excludeComponentsBackground:function(){return this.subComponentList.concat("Container")},mapsOnScreen:function(){return this.$store.getters.mapsOnScreen[this.pageId]},firstMapTarget:function(){return(this.mapsOnScreen[0]||{}).value}},watch:{component:{handler:function(){var t=Object(o.d)(this.component.uri);this.componentId=r.default.component(t)?t:null},deep:!0,immediate:!0},"defaultParams.props":{handler:function(t,e){s()(t,e)||(this.renderProps=i()(this.defaultParams.props),-1===this.excludeComponentsBackground.indexOf(this.component.componentType)&&(this.renderProps.background=""),"Iframe"===this.component.componentType&&(this.renderProps.src=Object(p.c)(this.renderProps.src)),-1!==["LiquidFill","TimeRange"].indexOf(this.component.componentType)&&(this.renderProps.backgroundColor=this.renderProps.backgroundColorReplacer,delete this.renderProps.backgroundColorReplacer))},immediate:!0},mapsOnScreen:function(t,e){s()(t,e)||this.renderProps.mapTarget&&!u.a.$options.getMap(this.renderProps.mapTarget)&&(this.renderProps.mapTarget=this.firstMapTarget)}},created:function(){this.setDefaultMapTarget()},methods:{setDefaultMapTarget:function(){this.renderProps&&this.renderProps.hasOwnProperty("mapTarget")&&!this.renderProps.mapTarget&&(this.renderProps.mapTarget=this.getRelatedMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,t=t.activeComponentId,n=this.$store.getters.getGridLayoutByPageId(this.pageId,this.$store.getters.mode);return Object(o.i)(e,n.content||[],t)}}},n=n("KHd+"),n=Object(n.a)(a,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId}},"component",t.renderProps,!1)),t._v(" "),t._t("fullScreen")],2)},[],!1,null,null,null);e.default=n.exports},FAT6:function(t,e,n){"use strict";n.r(e);var r=n("EBC7"),o=n("GAzf"),a=n("l6bU"),i=n("vC+N"),s=n("4zwu");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function p(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=function(t){t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}r={mixins:[r.default,o.a,a.a],data:function(){return{}},computed:{currentProps:function(){var t=this.renderProps,e=Object.assign({},t.dataset,this.getDatasetProps(t));return t=Object.assign({},t,{dataset:e}),this.dealWithProps(t),t}},methods:{getDatasetProps:function(t){return this.dataId?this.updateDataPropsHandler(t):{}},updateDataPropsHandler:function(){var t=this.getDatasetFeatures();return Object(i.j)(t)},getDatasetFeatures:function(){var t;return this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")?s.a.$options.getDataByCategory(this.currentDataCache).features:(t=this.currentDataCache.data,(s.a.$options.getData(t)||{}).features||[])},dealWithProps:function(t){t.background||(t.background=this.background);var e={enabled:!1},n=(t.associateWithMap.enabled&&(e.enabled=!0,"centerToFeature"===(n=t.associateWithMap.mapOperation)&&(e=p(p({},e),{},{centerToFeature:!0})),"zoomToFeature"===n)&&(e=p(p({},e),{},{zoomToFeature:!0})),t.associateWithMap=e,t.toolbarOptions);n&&(-1===n.indexOf(this.$t("setting.attributes.refresh"))&&(t.toolbar.showRefresh=!1),-1===n.indexOf(this.$t("setting.attributes.zoomToFeatureOption"))&&(t.toolbar.showZoomToFeature=!1),-1===n.indexOf(this.$t("setting.attributes.clearSelected"))&&(t.toolbar.showClearSelected=!1),-1===n.indexOf(this.$t("setting.attributes.columnsControl")))&&(t.toolbar.showColumnsControl=!1),t.fieldConfigs.forEach(function(t){t.width=t.colWidth}),t.rowHeardStyle&&(t.customHeaderRow=function(){return{style:t.rowHeardStyle}}),t.rowStyle&&(t.customRow=function(){return{style:t.rowStyle}})}}},o=n("KHd+"),a=Object(o.a)(r,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId}},"component",t.currentProps,!1))],1)},[],!1,null,null,null);e.default=a.exports},GAzf:function(t,e,n){"use strict";var r=n("4zwu"),o=n("FuRH"),a=n("3Dh3"),i=n("+NyJ");e.a={data:function(){return{listenMapLoad:!1}},computed:{dataIds:function(){return this.component.dataIds||[]},dataId:function(){return this.dataIds[0]},currentDataCache:function(){return this.$store.getters.getDataCache(this.dataId)},components:function(){return this.$store.getters.components},componentType:function(){return this.component.componentType},mapTarget:function(){return this.component.propDatas.mapTarget},currentProps:function(){var t,e;return"server"===(t=this.renderProps).dataType&&0<this.dataIds.length&&(e=this.getValueProps(t),Object.assign(t,e)),t},labelConfig:function(){return Object(i.f)(this.component.componentId,this.dataId)}},beforeCreate:function(){this.watcher=[]},mounted:function(){this.listenMapLoad&&o.a.$on("load-map",this.loadMapSucceed)},beforeDestroy:function(){this.listenMapLoad&&o.a.$off("load-map",this.loadMapSucceed)},methods:{cleanWatcher:function(){this.watcher.forEach(function(t){t()}),this.watcher=[]},loadMapSucceed:function(t,e){e===this.mapTarget&&this.loadMap(e)},loadMap:function(){},getValueProps:function(t){var e=this.getFeatureId(this.dataId),e=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")&&t.filterCategoryValue?r.a.$options.getDataByCategory(this.currentDataCache,[t.filterCategoryValue])||{}:r.a.$options.getData(e)||{};return this.updateDataPropsHandler(t,{features:e})},getValueByField:function(t,e){var n=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time"),t=t&&t.features&&t.features.features,n=n?t&&t.length-1:0,t=t&&0<=n&&t[n]&&t[n].properties[e];return t||0===t?t.toString():""},hasField:function(t,e){return t&&t.features&&t.features.features[0]&&t.features.features[0].properties.hasOwnProperty(e)},getFeatureId:function(t){return Object(a.g)(this.$store.getters.getDataCache,t)}}}},Lb6U:function(t,e,n){"use strict";e.a={highlight:"featureSelection"}},l6bU:function(t,e,n){"use strict";var o=n("Lb6U"),m=n("4zwu"),r=n("zT9C"),g=n.n(r);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function b(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=function(t){t=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}r={data:function(){return{}},methods:{monitorEventLinkage:function(n,r,o,a,i){var s=this,t="linkage-".concat(r);this.$off("actionEventLinkage".concat(r),this[t]),this[t]=function(t){var e;r===t.triggerType&&(e=(t=s._getEventLinkageData(t,o,n,r,a,i)).datas,t=t.passingActionInfo,s.$store.dispatch("UPDATE_ACTION",{componentId:s.component.componentId,type:r,status:"active",datas:e,passingActionInfo:t}))},this.$on("actionEventLinkage".concat(r),this[t])},emitEventLinkage:function(t,e,n,r){t=o.a[t];!t||4<arguments.length&&void 0!==arguments[4]&&!arguments[4]||(e=this.$store.getters.getPassingActionInfoByActionId(e,t),this.$emit("actionEventLinkage".concat(t),{triggerType:t,dataId:n,data:r,from:e}))},getUpdateCondition:function(t,e,n){var r=this.$store.getters.getTargetIdBySourceId(this.component.componentId,e.actionId,t,e.targetAction);return!(n&&r&&n.find(function(t){return t.componentId===r}))},_getEventLinkageData:function(a,i,s,c,u,p){for(var d,f=this,t=this.$store.getters.getTriggerEventByComponentIdAndType(this.component.componentId,c)||{},l=(l=g()(t.datas)||[]).map(function(t){return t.blockEventLinkage=!0,t}),h=0;h<i.length;h++)!function(){var e=i[h];if(e.config.sourceData.dataId!==a.dataId)return;var t,n=s[c].callback({features:u,actionEventParams:a},e,f),r=m.a.$options.updateFeature(n.feature,"".concat(f.component.componentId,"-").concat(c)),o=f.getUpdateCondition(c,e,n.passingActionInfo);d=n.passingActionInfo,delete n.feature,delete n.passingActionInfo,delete n.highlightOptions,o&&(t=-1<(o=l.findIndex(function(t){return t.actionId===e.actionId}))?1:0,o=-1<o?o:0,n=b(b({actionId:e.actionId},n),{},{featureId:(!p||-1!==p.indexOf(e.targetAction))&&r}),l.splice(o,t,n))}();return{datas:l,passingActionInfo:d}}}},n=n("KHd+"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);e.a=n.exports}}]);