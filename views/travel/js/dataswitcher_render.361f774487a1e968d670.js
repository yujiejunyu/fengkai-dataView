(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{ITEj:function(t,e,n){"use strict";n.r(e);var r=n("3Dh3"),i=n("GSdF"),s=n("E3LD");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function a(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){var e,n;e=r,n=i[t=t],(t=function(t){t=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}var c={mixins:[n("6G66").a],props:{component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,currentUuid:"",eventList:[]}},computed:{background:function(){return Object(i.a)(this.component.propDatas)},nextProps:function(){var t={background:""};return Object.assign({},this.defaultParams.props,t)},dataIds:function(){return this.component.dataIds},options:function(){return this.nextProps.options},triggers:function(){return this.$store.getters.getActionsByComponentId(this.component.componentId)},uuid:function(){return this.options&&this.options[0]&&this.options[0].value}},watch:{component:{handler:function(){this.componentId=Object(r.d)(this.component.uri)},deep:!0,immediate:!0},options:{handler:function(t){var e=this;!t||this.currentUuid&&t.find(function(t){return t.value===e.currentUuid})||this.$emit("dataChange",t&&t[0]&&t[0].value||"")},deep:!0,immediate:!0},triggers:{handler:function(t,e){this.handleTriggers(t),this.$emit("dataChange",this.uuid)},deep:!0}},beforeDestroy:function(){this.offTriggerEvent()},methods:{handleChange:function(t){this.currentUuid=t,this.$emit("dataChange",t)},initTriggers:function(){var t=this;this.triggers&&this.handleTriggers(this.triggers),this.currentUuid=this.uuid,setTimeout(function(){return t.$emit("dataChange",t.uuid)},3e3)},handleTriggers:function(e){var u=this;if(this.offTriggerEvent(),this.eventList=[],e)for(var t in e)!function(i){var t=s.b[i].events||[],o=e[i];t.forEach(function(t){var e="handleTrigger".concat(t.replace(t[0],t[0].toUpperCase()));u[e]=function(n){var r=[];o.forEach(function(t){var e=s.b[i].callback({uuid:n},t,u);r.push(a({actionId:t.actionId},e))}),u.$store.dispatch("UPDATE_ACTION",{componentId:u.component.componentId,type:i,datas:r,status:"active"})},u.$on(t,u[e]),u.eventList.push({eventName:t,listenerName:e})})}(t)},offTriggerEvent:function(){var n=this;this.eventList&&this.eventList.forEach(function(t){var e=t.eventName,t=t.listenerName;n[t]&&(n.$off(e,n[t]),n[t]=null)})}}},n=n("KHd+"),n=Object(n.a)(c,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,on:{change:t.handleChange,"hook:mounted":t.initTriggers}},"component",t.nextProps,!1))],1)},[],!1,null,null,null);e.default=n.exports}}]);