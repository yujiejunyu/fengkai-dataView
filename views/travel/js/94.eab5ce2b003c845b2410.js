(window.webpackJsonp=window.webpackJsonp||[]).push([[94,38],{"QQE/":function(t,e,s){"use strict";s.r(e);var n=s("oTir"),i=s("CKgU"),o=s("rn6b"),a=s("hdLw"),r=s.n(a),c=s("ytCg"),l=s("VWg+"),u=s("dnTh"),h=s("kzZv");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e,s){(e=m(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s}function f(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function m(t){t=function(t,e){if("object"!==p(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0===s)return("string"===e?String:Number)(t);s=s.call(t,e||"default");if("object"!==p(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===p(t)?t:String(t)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(s){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(s),e=(t=n?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){var e=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t);var s,n=y(i);function i(t){var e;if(this instanceof i)return(e=n.call(this)).options=t||{},e.groupLineList={},e.data=t.data,e.searchResultPoints=c.h.searchResultPoints,e.searchResultLine=c.h.searchResultLine,e.searchResultPolygon=c.h.searchResultPolygon,e.searchResultPointsOfLine=c.h.searchResultPointsOfLine,e;throw new TypeError("Cannot call a class as a function")}return e=i,(t=[{key:"setMap",value:function(t){t=t.map;if(!t)return new Error("Cannot find map");this.map=t,this.registerEvents()}},{key:"registerEvents",value:function(){this.registerPointsEvent(),this.registerLinesEvent()}},{key:"registerPointsEvent",value:function(){var s=this;this.map.on("click",this.searchResultPoints,function(t){var e=t.features[0].properties;s.showPointPopup(t.lngLat,e)}),this.map.on("mouseenter",this.searchResultPoints,function(){s.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",this.searchResultPoints,function(){s.map.getCanvas().style.cursor=""})}},{key:"registerLinesEvent",value:function(){var s=this;this.map.on("click","".concat(this.searchResultPointsOfLine,"-stroke"),function(t){var e=t.features[0].properties;s.showPointPopup(t.lngLat,e,"LineString")}),this.map.on("mouseenter","".concat(this.searchResultPointsOfLine,"-stroke"),function(t){s.map.getCanvas().style.cursor="pointer",s.showLineHoverPopup(t)}),this.map.on("mouseleave","".concat(this.searchResultPointsOfLine,"-stroke"),function(){s.map.getCanvas().style.cursor="",s._removeHoverPopup()})}},{key:"showPointPopup",value:function(t,e){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Point",s=(this._removeResultPopup(),this._getPopupContent(s,e));this.resultPopup=new r.a.Popup({anchor:"bottom",offset:[0,-10],className:"tdt-search-popup"}).setLngLat(t).setDOMContent(s).addTo(this.map),this.map.easeTo({center:t})}},{key:"showLineHoverPopup",value:function(t){var e=t.features[0].geometry.coordinates.slice(),t=t.features[0].properties,t="\n    <div class='hover-popup'>\n      <div class='properties-name'>\n      ".concat(t.name,"\n      </div>\n    </div>");this.hoverPopup=new r.a.Popup({anchor:"bottom",closeButton:!1,offset:[0,-10],className:"tdt-search-line-hover-popup"}).setLngLat(e).setHTML(t).addTo(this.map)}},{key:"setData",value:function(t){this.data=Object.assign(this.data,t),this.style=0}},{key:"_getPopupContent",value:function(t,e){var s=this,n=document.createElement("div"),i=(n.className="popup-container",n.innerHTML='\n      <div class="title" title='.concat(e.name,'>\n        <div class="region">').concat(e.name,"</div>\n      </div>\n    "),document.createElement("div")),t=(i.className="content",i.innerHTML="\n      ".concat("Point"===t?'<div>\n          <div class="phone">'.concat(Object(h.a)().t("tdtSearch.phone"),"： ").concat(e.phone||Object(h.a)().t("tdtSearch.noData"),'</div>\n          <div class="address">').concat(Object(h.a)().t("tdtSearch.address"),"： ").concat(e.address||Object(h.a)().t("tdtSearch.noData"),"</div>\n        </div>"):"","\n      ").concat("LineString"===t?'<div>\n        <div class="address">'.concat(Object(h.a)().t("tdtSearch.transport"),"： ").concat(e.address||Object(h.a)().t("tdtSearch.noData"),"</div>\n      </div>"):"","\n    "),document.createElement("div")),o=(t.className="operate-group",document.createElement("div")),a=(o.className="start-item",o.onclick=function(){return s._setPosition("start",e)},o.innerHTML="<span>设为起点</span>",document.createElement("div"));return a.className="end-item",a.onclick=function(){return s._setPosition("end",e)},a.innerHTML="<span>设为终点</span>",t.appendChild(o),t.appendChild(a),n.appendChild(i),n}},{key:"_setPosition",value:function(t,e){var s=e.name,e=e.lonlat,n=(n=e.split(" ")).length<2?e.split(","):n;this._transformMsg(t,[+n[0],+n[1]],s)}},{key:"_transformMsg",value:function(t,e,s){e&&(s?this._resetPoint(t,s,e):this._getPointInfo(t,e))}},{key:"_getPointInfo",value:function(e,s){var n=this,t=c.c.GEOCODE_URL,i={lon:s[0],lat:s[1],ver:1},i={postStr:JSON.stringify(i),type:"geocode",tk:this.options.data.tk};Object(c.f)(t,i).then(function(t){t=t.result.addressComponent,t=n._convertName(void 0===t?{}:t);n._resetPoint(e,t,s)})}},{key:"_resetPoint",value:function(t,e,s){var n;d(n={},t,e),d(n,{start:"startLnglat",end:"endLnglat"}[t],s),this.fire("reset-position",{data:n})}},{key:"_convertName",value:function(t){var e=t.poi,s=t.poi_distance,n=t.road,t=t.road_distance;return e&&s?t<s?10<t?"".concat(n,"附近"):n:10<s?"".concat(e,"附近"):e:"未知地点"}},{key:"search",value:function(t,e){return this.keyWord=t,this._searchFromTianditu(e)}},{key:"_searchFromTianditu",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.options.data||{},s={keyWord:this.keyWord,queryType:"4",start:"0",count:"10",level:Math.round(this.map.getZoom())+1,mapBound:this._toBBoxString()};return Object(c.j)(e.searchUrl||"https://api.tianditu.gov.cn/search",{postStr:JSON.stringify(Object.assign({},s,t)),type:"query",tk:e.tk}).then(function(t){if(+t.count||!+t.count&&t.prompt)return t}).catch(function(t){t=t&&t.isCancel?null:t;return Promise.reject(t)})}},{key:"_toBBoxString",value:function(){return Object(c.l)(this.map)}},{key:"getFeatureInfo",value:function(t,e){var s=this,n=this.options.resultRender;return this.keyWord=t,this.groupLineList={},this.reset(),this._searchFromTianditu(e).then(function(t){if(s.fire("search-selected-info",{data:t}),!n)return s._showResultToMap(t)})}},{key:"_showResultToMap",value:function(t){var e,s,n,i,o=t.prompt&&t.prompt.find(function(t){return 4==+t.type});return t.pois&&t.pois.length?(s="Point",n=t.pois,e=this._generatePointsFeatures(n),this._addPoints(e)):t.lineData&&t.lineData.length?(s="LineString",n=t.lineData,i=t.lineData[0].uuid,this.showLineDetail(i)):t.area?(s="Polygon",n=t.area,e=this._generateAreaFeatures(t.area),this._addPolygon(e)):n=t.statistics?(s="Statistics",Object(c.e)(t.statistics)):t.prompt,{type:s,result:{count:+t.count,data:n,prompt:((o||{}).admins||[])[0]}}}},{key:"_generatePointsFeatures",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ";return Object(c.d)(t,e)}},{key:"_generateLinesFeatures",value:function(t){var e=[];return t.linepoint.split(";").forEach(function(t){t=t.split(",");t&&2===t.length&&e.push([+t[0],+t[1]])}),{type:"Feature",properties:t,geometry:{type:"LineString",coordinates:e}}}},{key:"_generateAreaFeatures",value:function(t){var e=t.points;return{type:"Feature",geometry:{type:"Polygon",coordinates:[(((void 0===e?[]:e)[0]||{}).region||"").split(",").map(function(t){t=t.split(" ");return t[0]=+t[0],t[1]=+t[1],t})]},properties:t}}},{key:"showLineDetail",value:function(e){var s=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e&&(this.groupLineList[e]?n&&this._addLines(this._generateLinesFeatures(this.groupLineList[e])):this._transitByUuid(e).then(function(t){t&&(s.groupLineList[e]=t,n&&s._addLines(s._generateLinesFeatures(t)),s.fire("get-transit-data-succeeded",{data:s.groupLineList}))}))}},{key:"_transitByUuid",value:function(t){var e=c.c.BUS_URL,t={postStr:JSON.stringify({uuid:t}),type:"busline",tk:this.options.data.tk};return Object(c.k)(e,t)}},{key:"_addPoints",value:function(t){Object(c.a)(this.map,this.searchResultPoints,t)}},{key:"_addPointsOfLine",value:function(t){var e;t&&this.map&&(t=t,(e=this.map.getSource(this.searchResultPointsOfLine))?e.setData(t):(this.map.addSource(this.searchResultPointsOfLine,{type:"geojson",data:t}),this.map.addLayer({id:"".concat(this.searchResultPointsOfLine,"-fill"),type:"circle",source:this.searchResultPointsOfLine,paint:{"circle-radius":6,"circle-color":"#3385ff"}}),this.map.addLayer({id:"".concat(this.searchResultPointsOfLine,"-stroke"),type:"circle",source:this.searchResultPointsOfLine,paint:{"circle-radius":4,"circle-color":"#fff"}})))}},{key:"_addLines",value:function(t){var e,s,n;t&&this.map&&(e=this.map.getSource(this.searchResultLine),s=t,n="".concat(this.searchResultPointsOfLine,"-fill"),this._addPointsOfLine(this._generatePointsFeatures(t.properties.station||[],",")),e?e.setData(s):(this.map.addSource(this.searchResultLine,{type:"geojson",data:s}),this.map.addLayer({id:this.searchResultLine,type:"line",source:this.searchResultLine,layout:{"line-cap":"round"},paint:{"line-width":8,"line-color":"rgb(92,155,239)","line-opacity":1}},n)),t=Object(l.a)(Object(u.a)(s,1.7)),this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]]))}},{key:"_addPolygon",value:function(t){var e,s,n;t&&this.map&&(e=this.map,t)&&e&&(n=t,(s=e.getSource(this.searchResultPolygon))?s.setData(n):(e.addSource(this.searchResultPolygon,{type:"geojson",data:n}),e.addLayer({id:"".concat(this.searchResultPolygon,"-stroke"),type:"line",source:this.searchResultPolygon,layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":3,"line-dasharray":[.6,1.2],"line-color":"#0027eb"}}),e.addLayer({id:this.searchResultPolygon,type:"fill",source:this.searchResultPolygon,layout:{},paint:{"fill-color":"rgb(0, 0, 255)","fill-opacity":.1}})),n=[[(s=t.properties.bound.split(","))[0],s[1]],[s[2],s[3]]],e.fitBounds(n))}},{key:"setHighlightIcon",value:function(t){Object(c.i)(this.map,this.searchResultPoints,t)}},{key:"_resetSearchSourceData",value:function(){Object(c.g)(this.map)}},{key:"_removeHoverPopup",value:function(){this.hoverPopup&&this.hoverPopup.remove(),this.hoverPopup=null}},{key:"_removeResultPopup",value:function(){this.resultPopup&&this.resultPopup.remove(),this.resultPopup=null}},{key:"reset",value:function(){this._removeResultPopup(),this._resetSearchSourceData()}},{key:"_clearSearchResultLayer",value:function(){Object(c.b)(this.map)}},{key:"removed",value:function(){this.groupLineList={},this.options.resultRender||(this._removeResultPopup(),this._clearSearchResultLayer())}}])&&f(e.prototype,t),s&&f(e,s),Object.defineProperty(e,"prototype",{writable:!1}),i}(r.a.Evented),a=s("jDRz"),P={name:"LinedataResult",mixins:[n.a],props:{keyWord:{type:String},count:{type:Number,default:0},data:{type:Array},busData:{type:Object,default:function(){return{}}},prompt:{type:Object}},data:function(){return{detailVisibles:[!0],popupUuid:null}},computed:{stationName:function(){return function(t){return t&&t.replace(/(.+)\(.+/,"$1")}},stationInfo:function(){return function(t){t=t&&t.replace(/.+\((.+)\)/,"$1"),t=t&&t.split("-");return t&&t.length?{start:t[0],dest:t[t.length-1]}:{}}}},watch:{busData:function(){var e=this;this.data.forEach(function(t){t.uuid&&!e.busData[t.uuid]&&e.$emit("show-line-detail",t.uuid,!1)})}},methods:{generatePopup:function(t){this.popupUuid=t.uuid;var e=t.lonlat.split(",");this.$emit("show-point-popup",{coordinates:[+e[0],+e[1]],data:t,from:"LineString"})},searchPointsResult:function(){var t={queryType:"7",queryTerminal:1e4,specifyAdminCode:this.prompt.adminCode};this.$emit("search-points-result",this.keyWord,t,!0)},showLineDetail:function(t,e){var s=new Array(this.data.length).fill(!1);s[e]=!this.detailVisibles[e],(this.detailVisibles=s)[e]?this.$emit("show-line-detail",t):this.$emit("reset-line-source")}}},b=s("KHd+"),P=Object(b.a)(P,function(){var n=this,t=n.$createElement,i=n._self._c||t;return n.data?i("div",{staticClass:"linedata-results-container sm-component-tdtLineResults"},[i("a",{staticClass:"link-to-points",on:{click:n.searchPointsResult}},[n._v("\n    "+n._s(n.$t("tdtResults.relateAdress",{keyWord:n.keyWord}))+"\n  ")]),n._v(" "),i("div",{staticClass:"title",style:n.secondaryTextColorStyle},[n._v("\n    "+n._s(n.$t("tdtResults.allFound"))+"\n    "),i("span",{staticClass:"total-num"},[n._v(n._s(n.count))]),n._v("\n    "+n._s(n.$t("tdtResults.piecesBusRoute"))+"\n  ")]),n._v(" "),n.data?i("div",{staticClass:"content"},[i("ul",{staticClass:"line-groups"},n._l(n.data,function(e,s){return i("li",{key:e.uuid,class:{"line-item":!0,"active-item":n.detailVisibles[s]}},[i("div",{staticClass:"cover-info",style:n.headingTextColorStyle},[i("div",{staticClass:"name",attrs:{title:n.stationName(e.name)}},[n._v(n._s(n.stationName(e.name)))]),n._v(" "),i("div",{staticClass:"line-info"},[i("div",{staticClass:"description-holder"},[i("i",{staticClass:"sm-components-icon-arrow-dowm-slim"}),n._v(" "),i("div",{staticClass:"description"},[i("div",[n._v(n._s(n.stationInfo(e.name).start))]),n._v(" "),i("div",[n._v(n._s(n.stationInfo(e.name).dest))])])]),n._v(" "),i("p",{staticClass:"time",style:n.secondaryTextColorStyle},[n._v("\n              "+n._s(n.$t("tdtResults.busEndTime"))+"：\n              "),i("span",[n._v(" "+n._s((n.busData[e.uuid]||{}).starttime)+" - "+n._s((n.busData[e.uuid]||{}).endtime)+" ")])])])]),n._v(" "),i("div",{staticClass:"detail-info"},[i("div",{staticClass:"detail-title"},[i("p",{staticClass:"show-details",on:{click:function(t){return n.showLineDetail(e.uuid,s)}}},[i("span",[n._v(n._s(n.$t("tdtResults.showDetail")))]),n._v(" "),i("i",{class:n.detailVisibles[s]?"sm-components-icon-solid-triangle-up":"sm-components-icon-solid-triangle-down"})]),n._v(" "),i("p",{staticClass:"count",style:n.secondaryTextColorStyle},[n._v("\n              "+n._s(n.$t("tdtResults.total"))+"\n              "),i("span",[n._v(n._s(e.stationNum))]),n._v("\n              "+n._s(n.$t("tdtResults.station"))+"\n            ")])]),n._v(" "),n.detailVisibles[s]&&n.busData[e.uuid]?i("ul",{staticClass:"lines"},n._l((n.busData[e.uuid]||{}).station||[],function(e,t){return i("li",{key:e.uuid,class:{"active-station":n.popupUuid===e.uuid},style:n.secondaryTextColorStyle,on:{click:function(t){return n.generatePopup(e)}}},[n._v("\n              "+n._s(t+1+"、"+e.name)+"\n            ")])}),0):n._e()])])}),0)]):n._e()]):n._e()},[],!1,null,null,null).exports,w={name:"AreaResult",props:{data:{type:Object}}},w=Object(b.a)(w,function(){var t=this,e=t.$createElement,e=t._self._c||e;return t.data?e("div",{staticClass:"area-results-container sm-component-tdtAreaResults"},[e("div",{staticClass:"title"},[e("i"),t._v("\n    "+t._s(t.$t("tdtResults.switchTo"))+"\n    "),e("span",{staticClass:"name"},[t._v(t._s(t.data.name))])])]):t._e()},[],!1,null,null,null).exports,R=s("wIJs"),S=s("CsJI"),L=s("SqLP"),C=s("QsSW"),k=s("K79h"),s={name:"SmTdtSearch",components:{PointsResult:a.a,LinesResult:P,AreaResult:w,StatisticsResult:R.a,NothingResult:S.a,SmIcon:L.default,SmInput:C.a},mixins:[o.a,i.a,n.a],props:{data:{type:Object,default:function(){return{searchUrl:"https://api.tianditu.gov.cn/search",tk:""}}},mode:{type:String,default:"control",validator:function(t){return-1!==["control","toolBar"].indexOf(t)}},resultRender:{type:Function},collapsed:{type:Boolean,default:!1},splitLine:{type:Boolean,default:!0}},data:function(){return{searchKey:null,searchResult:[],prefixType:"search",isHover:!1,showSearch:!0,showIcon:!1,isInputing:!1,isSuggestion:!1,hoverIndex:void 0,componentId:null,componentProps:{},componentListeners:{},openPurePoiSearch:!1}},computed:{resultSuggestions:function(){return!!this.isSuggestion&&0<this.searchResult.length},showAddress:function(){return function(t,e){return t&&e&&t.length<23&&t.length+e.length<23}}},watch:{data:function(){this.viewModel&&this.viewModel.setData(this.data)}},created:function(){var e=this;this.showSearch=!this.collapsed,this.showIcon=this.collapsed,this.viewModel=new _(this.$props),this.viewModel.on("get-transit-data-succeeded",function(t){t=t.data;e.$set(e.componentProps,"busData",Object.assign({},t))}),this.viewModel.on("search-selected-info",this.searchSelectedInfo)},removed:function(){this.clearResult(!0)},beforeDestroy:function(){k.a.destroy(),this.marker&&this.marker.remove()&&(this.marker=null),this.$options.removed.call(this)},methods:{search:function(t){var e=this;this.clearResult(),this.mapNotLoadedTip()||(this.searchKey?(this.prefixType="loading",this.viewModel.search(this.searchKey,t).then(function(t){t&&t.suggests?e.searchSucceeded(t.suggests):e.searchFailed()}).catch(function(t){t&&e.searchFailed(t)})):k.a.warning(this.$t("search.noKey")))},searchInput:function(){this.isInputing||(this.searchKey?(this.isSuggestion=!0,this.search(!1)):this.inputValueCleared(!1))},searchButtonClicked:function(){this.searchKey?this.getResultDetail(this.searchKey):k.a.warning(this.$t("search.noKey"))},clearResult:function(t){k.a.destroy(),t&&(this.searchKey=null),this.searchResult=[],this.prefixType="search",this.hoverIndex=void 0,this.componentId=null,this.componentProps={},this.componentListeners={}},inputValueCleared:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.clearResult(!0),this.viewModel&&this.viewModel.removed(),t&&this.$emit("clear-search-result")},searchResultListClicked:function(t){this.getResultDetail(t)},getResultDetail:function(t,e,s){var o=this,a=(this.isSuggestion=!1,e||{queryType:"1",queryTerminal:1e4}),r=(a.mapBound||(a.mapBound=this.viewModel._toBBoxString()),t||this.searchKey);t&&(this.searchKey=t),this.changeOpenPurePoiSearch(s),this.viewModel.getFeatureInfo(t||this.searchKey,a).then(function(t){if(t){var e=t.type,s=t.result,n={data:s.data,prompt:s.prompt,keyWord:r,count:s.count,mapBound:a.mapBound},i={};switch(e){case"Point":o.componentId="PointsResult",n.openPurePoiSearch=o.openPurePoiSearch,n.specifyAdminSearch=a&&!!a.specifyAdminCode,i["show-point-popup"]=o.generatePopup,i["set-highlight-icon"]=o.setHighlightIcon,i["change-pagination"]=o.getResultDetail;break;case"LineString":o.componentId="LinesResult",i["show-point-popup"]=o.generatePopup,i["search-points-result"]=o.getResultDetail,i["show-line-detail"]=o.showLineDetail,i["reset-line-source"]=o.resetSource;break;case"Polygon":o.componentId="AreaResult";break;case"Statistics":o.componentId="StatisticsResult",n.data=s.data.allAdmins,n.priorityCitys=s.data.priorityCitys,i["search-points-result"]=o.getResultDetail;break;default:o.componentId="NothingResult",i["search-points-result"]=o.getResultDetail}o.componentProps=n,o.componentListeners=i}})},searchSucceeded:function(t){k.a.destroy(),this.searchResult=t,this.prefixType="search",this.searchResult.length<1&&k.a.warning(this.$t("search.noResult")),this.$emit("search-succeeded",{searchResult:this.searchResult})},searchFailed:function(t){this.clearResult(),this.prefixType="search",k.a.warning(this.$t("search.noResult")),this.$emit("search-failed",t)},searchSelectedInfo:function(t){t=t.data;this.prefixType="search",this.resultRender&&this.resultRender(t),this.$emit("search-selected-info",t)},isNumber:function(t){return/\d/.test(t)},downChoose:function(){var t=this.searchResult.length,e=this.hoverIndex,t=(this.isNumber(e)&&e<t-1?this.hoverIndex=e+1:this.hoverIndex=0,this.searchResult[this.hoverIndex]);this.searchKey=t.name},upChoose:function(){var t=this.searchResult.length,e=this.hoverIndex,e=(this.isNumber(e)&&0<e?this.hoverIndex=e-1:this.hoverIndex=Math.max(t-1,0),this.searchResult[this.hoverIndex]);this.searchKey=e.name},changeResultHover:function(t){t=t.keyCode;this.isSuggestion&&(38===t?this.upChoose():40===t&&this.downChoose())},generatePopup:function(t){var e=t.coordinates,s=t.data,t=t.from;this.viewModel&&this.viewModel.showPointPopup(e,s,t)},setHighlightIcon:function(t){this.viewModel&&this.viewModel.setHighlightIcon(t)},showLineDetail:function(t,e){this.viewModel&&this.viewModel.showLineDetail(t,e)},resetSource:function(){this.viewModel&&this.viewModel.reset()},changeOpenPurePoiSearch:function(t){this.openPurePoiSearch=t}}},a=Object(b.a)(s,function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"sm-component-search sm-component-tdtSearch",style:s.headingTextColorStyle},[s.showIcon&&"control"===s.mode?n("div",{staticClass:"sm-component-search__toggle-icon",style:s.collapseCardHeaderBgStyle,on:{click:function(t){s.showSearch=!s.showSearch,s.showIcon=!s.showIcon}}},[n("i",{staticClass:"sm-component-tdtSearch__pointer sm-components-icon-search"})]):s._e(),s._v(" "),n("transition",{attrs:{name:"sm-component-zoom-in"},on:{"after-leave":function(t){s.showIcon=!s.showIcon}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:s.showSearch||"toolBar"===s.mode,expression:"showSearch || mode === 'toolBar'"}],staticClass:"sm-component-search__content sm-component-tdtSearch__content",style:[{"transform-origin":s.position.includes("left")?"top left":"top right"},s.collapseCardHeaderBgStyle]},[n("div",{class:{"sm-component-search__input":!0,"with-split-line":s.splitLine},style:s.collapseCardHeaderBgStyle,attrs:{"aria-orientation":s.position.includes("left")?"left":"right"}},["control"===s.mode?n("div",{staticClass:"sm-component-search__arrow-icon",on:{click:function(t){s.showSearch=!s.showSearch}}},[n("i",{class:s.position.includes("left")?"sm-components-icon-double-left":"sm-components-icon-double-right"})]):s._e(),s._v(" "),n("div",{staticClass:"sm-component-search__search-icon",on:{click:s.searchButtonClicked}},[n("sm-icon",{attrs:{type:s.prefixType}})],1),s._v(" "),n("sm-input",{class:["sm-component-search__a-input",{"toolBar-input":"toolBar"===s.mode}],attrs:{placeholder:s.$t("search.inputPlaceHolder"),allowClear:""},on:{input:s.searchInput,compositionstart:function(t){s.isInputing=!0},compositionend:function(t){s.isInputing=!1},pressEnter:s.searchButtonClicked,mouseenter:function(t){s.isHover=!s.isHover},mouseleave:function(t){s.isHover=!s.isHover},keyup:s.changeResultHover,change:function(t){return!t.target.value&&s.inputValueCleared()}},model:{value:s.searchKey,callback:function(t){s.searchKey=t},expression:"searchKey"}})],1),s._v(" "),n("div",{staticClass:"sm-component-search__result",style:s.collapseCardBackgroundStyle},[s.resultSuggestions?n("div",{style:s.getTextColorStyle},[n("ul",{staticClass:"sm-component-tdtSearch__suggestions",style:s.headingTextColorStyle},s._l(s.searchResult,function(e,t){return n("li",{key:t,class:{active:s.hoverIndex===t,"add-ellipsis":!0},attrs:{title:e.name},on:{click:function(t){return s.searchResultListClicked(e.name)}}},[n("span",{staticClass:"name"},[s._v(s._s(e.name))]),s._v(" "),s.showAddress(e.name,e.address)?n("span",{staticClass:"address",style:s.secondaryTextColorStyle},[s._v(s._s(e.address))]):s._e()])}),0)]):s.componentId?n(s.componentId,s._g(s._b({tag:"component",attrs:{"text-color":s.textColor}},"component",s.componentProps,!1),s.componentListeners)):s._e()],1)])])],1)},[],!1,null,null,null);e.default=a.exports},SqLP:function(t,e,s){"use strict";s.r(e),s.d(e,"iconTypes",function(){return c});var n=s("00x4"),i=s("oTir"),o=s("tmJK"),a=s("ghbr"),r=s("qAG6"),c={tabIndex:a.a.number,type:a.a.string.def("info"),component:a.a.any,viewBox:a.a.any,spin:a.a.bool.def(!1),rotate:a.a.number,theme:a.a.oneOf(["filled","outlined","twoTone"]).def("outlined"),twoToneColor:a.a.string,role:a.a.string,iconStyle:a.a.object,iconClass:a.a.string,autoPrefix:a.a.bool.def(!0)},a={name:"SmIcon",defaultComponent:n.default,mixins:[i.a,o.a],props:c,computed:{customIconClass:function(){return this.autoPrefix?"sm-components-icon-"+this.iconClass:this.iconClass},iconProps:function(){return Object(r.q)(this.componentProps,["iconStyle","iconClass","autoPrefix"])}},render:function(t){var e;return e=this.iconClass?t("i",{class:this.customIconClass}):t(this.getComponentInstance(),{props:this.iconProps,attrs:this.$attrs,on:this.componentListeners,scopedSlots:this.$scopedSlots},this.renderChildren()),t("div",{class:"sm-component-icon",style:this.iconStyle},[e])}},n=s("KHd+"),i=Object(n.a)(a,void 0,void 0,!1,null,null,null);e.default=i.exports}}]);