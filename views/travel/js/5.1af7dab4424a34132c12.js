(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/GqU":function(t,e,r){"use strict";var i=r("RK3t"),n=r("HYAF");t.exports=function(t){return i(n(t))}},"/OPJ":function(t,e,r){"use strict";var i=r("0Dky"),n=r("2oRo").RegExp;t.exports=i(function(){var t=n(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})},"/b8u":function(t,e,r){"use strict";r=r("BPiQ");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"/byt":function(t,e,r){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"0B/8":function(t,e,r){"use strict";r.d(e,"a",function(){return A});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function g(t,e){var r=t[0],t=t[1];return[r*Math.cos(e)-t*Math.sin(e),r*Math.sin(e)+t*Math.cos(e)]}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;r++)if("number"!=typeof t[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof t[r]+" == typeof "+t[r])}var p=Math.PI;function P(t,e,r){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var i=t.rX,n=t.rY,a=t.x,o=t.y,i=Math.abs(t.rX),n=Math.abs(t.rY),s=g([(e-a)/2,(r-o)/2],-t.xRot/180*p),c=s[0],s=s[1],u=Math.pow(c,2)/Math.pow(i,2)+Math.pow(s,2)/Math.pow(n,2),u=(1<u&&(i*=Math.sqrt(u),n*=Math.sqrt(u)),t.rX=i,t.rY=n,Math.pow(i,2)*Math.pow(s,2)+Math.pow(n,2)*Math.pow(c,2)),u=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-u)/u)),l=i*s/n*u,u=-n*c/i*u,h=g([l,u],t.xRot/180*p);t.cX=h[0]+(e+a)/2,t.cY=h[1]+(r+o)/2,t.phi1=Math.atan2((s-u)/n,(c-l)/i),t.phi2=Math.atan2((-s-u)/n,(-c-l)/i),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*p),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*p),t.phi1*=180/p,t.phi2*=180/p}function C(t,e,r){a(t,e,r);var i=t*t+e*e-r*r;return i<0?[]:0==i?[[t*r/(t*t+e*e),e*r/(t*t+e*e)]]:[[(t*r+e*(i=Math.sqrt(i)))/(t*t+e*e),(e*r-t*i)/(t*t+e*e)],[(t*r-e*i)/(t*t+e*e),(e*r+t*i)/(t*t+e*e)]]}var o,m=Math.PI/180;function v(t,e,r){return(1-r)*t+r*e}function M(t,e,r,i){return t+Math.cos(i/180*p)*e+Math.sin(i/180*p)*r}function L(t,e,r,i){var n=1e-6,t=e-t,e=r-e,i=3*t+3*(i-r)-6*e,r=6*(e-t),e=3*t;return Math.abs(i)<1e-6?[-e/r]:(t=1e-6,(e=(r=r/i)*r/4-e/i)<-(t=void 0===n?1e-6:n)?[]:e<=t?[-r/2]:[-r/2-(t=Math.sqrt(e)),-r/2+t])}function E(t,e,r,i,n){var a=1-n;return t*(a*a*a)+e*(3*a*a*n)+r*(3*a*n*n)+i*(n*n*n)}function s(){return x(function(t,e,r){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=r),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=r),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=r),t.relative=!1),t})}function c(){var i=NaN,n=NaN,a=NaN,o=NaN;return x(function(t,e,r){return t.type&A.SMOOTH_CURVE_TO&&(t.type=A.CURVE_TO,i=isNaN(i)?e:i,n=isNaN(n)?r:n,t.x1=t.relative?e-i:2*e-i,t.y1=t.relative?r-n:2*r-n),n=t.type&A.CURVE_TO?(i=t.relative?e+t.x2:t.x2,t.relative?r+t.y2:t.y2):i=NaN,t.type&A.SMOOTH_QUAD_TO&&(t.type=A.QUAD_TO,a=isNaN(a)?e:a,o=isNaN(o)?r:o,t.x1=t.relative?e-a:2*e-a,t.y1=t.relative?r-o:2*r-o),o=t.type&A.QUAD_TO?(a=t.relative?e+t.x1:t.x1,t.relative?r+t.y1:t.y1):a=NaN,t})}function u(){var a=NaN,o=NaN;return x(function(t,e,r){var i,n;return t.type&A.SMOOTH_QUAD_TO&&(t.type=A.QUAD_TO,a=isNaN(a)?e:a,o=isNaN(o)?r:o,t.x1=t.relative?e-a:2*e-a,t.y1=t.relative?r-o:2*r-o),t.type&A.QUAD_TO?(a=t.relative?e+t.x1:t.x1,o=t.relative?r+t.y1:t.y1,i=t.x1,n=t.y1,t.type=A.CURVE_TO,t.x1=((t.relative?0:e)+2*i)/3,t.y1=((t.relative?0:r)+2*n)/3,t.x2=(t.x+2*i)/3,t.y2=(t.y+2*n)/3):o=a=NaN,t})}function x(r){var i=0,n=0,a=NaN,o=NaN;return function(t){var e;if(!isNaN(a)||t.type&A.MOVE_TO)return e=r(t,i,n,a,o),t.type&A.CLOSE_PATH&&(i=a,n=o),void 0!==t.x&&(i=t.relative?i+t.x:t.x),void 0!==t.y&&(n=t.relative?n+t.y:t.y),t.type&A.MOVE_TO&&(a=i,o=n),e;throw new Error("path must start with moveto")}}function l(u,l,h,p,f,d){return a(u,l,h,p,f,d),x(function(t,e,r,i){var n=t.x1,a=t.x2,i=t.relative&&!isNaN(i),o=void 0!==t.x?t.x:i?0:e,s=void 0!==t.y?t.y:i?0:r;function c(t){return t*t}t.type&A.HORIZ_LINE_TO&&0!==l&&(t.type=A.LINE_TO,t.y=t.relative?0:r),t.type&A.VERT_LINE_TO&&0!==h&&(t.type=A.LINE_TO,t.x=t.relative?0:e),void 0!==t.x&&(t.x=t.x*u+s*h+(i?0:f)),void 0!==t.y&&(t.y=o*l+t.y*p+(i?0:d)),void 0!==t.x1&&(t.x1=t.x1*u+t.y1*h+(i?0:f)),void 0!==t.y1&&(t.y1=n*l+t.y1*p+(i?0:d)),void 0!==t.x2&&(t.x2=t.x2*u+t.y2*h+(i?0:f)),void 0!==t.y2&&(t.y2=a*l+t.y2*p+(i?0:d));r=u*p-l*h;return void 0===t.xRot||1===u&&0===l&&0===h&&1===p||(0==r?(delete t.rX,delete t.rY,delete t.xRot,delete t.lArcFlag,delete t.sweepFlag,t.type=A.LINE_TO):(e=t.xRot*Math.PI/180,s=Math.sin(e),o=Math.cos(e),n=1/c(t.rX),a=1/c(t.rY),i=c(o)*n+c(s)*a,e=c(s)*n+c(o)*a,o=i*p*p-(s=2*s*o*(n-a))*l*p+e*l*l,n=s*(u*p+l*h)-2*(i*h*p+e*u*l),a=i*h*h-s*u*h+e*u*u,i=(Math.atan2(n,o-a)+Math.PI)%Math.PI/2,s=Math.sin(i),e=Math.cos(i),t.rX=Math.abs(r)/Math.sqrt(o*c(e)+n*s*e+a*c(s)),t.rY=Math.abs(r)/Math.sqrt(o*c(s)-n*s*e+a*c(e)),t.xRot=180*i/Math.PI)),void 0!==t.sweepFlag&&r<0&&(t.sweepFlag=+!t.sweepFlag),t})}(r=o=o||{}).ROUND=function(e){function r(t){return Math.round(t*e)/e}return a(e=void 0===e?1e13:e),function(t){return void 0!==t.x1&&(t.x1=r(t.x1)),void 0!==t.y1&&(t.y1=r(t.y1)),void 0!==t.x2&&(t.x2=r(t.x2)),void 0!==t.y2&&(t.y2=r(t.y2)),void 0!==t.x&&(t.x=r(t.x)),void 0!==t.y&&(t.y=r(t.y)),void 0!==t.rX&&(t.rX=r(t.rX)),void 0!==t.rY&&(t.rY=r(t.rY)),t}},r.TO_ABS=s,r.TO_REL=function(){return x(function(t,e,r){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=r),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=r),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=r),t.relative=!0),t})},r.NORMALIZE_HVZ=function(a,o,s){return void 0===a&&(a=!0),void 0===o&&(o=!0),void 0===s&&(s=!0),x(function(t,e,r,i,n){if(!isNaN(i)||t.type&A.MOVE_TO)return o&&t.type&A.HORIZ_LINE_TO&&(t.type=A.LINE_TO,t.y=t.relative?0:r),s&&t.type&A.VERT_LINE_TO&&(t.type=A.LINE_TO,t.x=t.relative?0:e),a&&t.type&A.CLOSE_PATH&&(t.type=A.LINE_TO,t.x=t.relative?i-e:i,t.y=t.relative?n-r:n),t.type&A.ARC&&(0===t.rX||0===t.rY)&&(t.type=A.LINE_TO,delete t.rX,delete t.rY,delete t.xRot,delete t.lArcFlag,delete t.sweepFlag),t;throw new Error("path must start with moveto")})},r.NORMALIZE_ST=c,r.QT_TO_C=u,r.INFO=x,r.SANITIZE=function(f){a(f=void 0===f?0:f);var d=NaN,y=NaN,g=NaN,m=NaN;return x(function(t,e,r,i,n){var a,o,s,c,u=Math.abs,l=!1,h=0,p=0;return t.type&A.SMOOTH_CURVE_TO&&(h=isNaN(d)?0:e-d,p=isNaN(y)?0:r-y),y=t.type&(A.CURVE_TO|A.SMOOTH_CURVE_TO)?(d=t.relative?e+t.x2:t.x2,t.relative?r+t.y2:t.y2):d=NaN,m=t.type&A.SMOOTH_QUAD_TO?(g=isNaN(g)?e:2*e-g,isNaN(m)?r:2*r-m):t.type&A.QUAD_TO?(g=t.relative?e+t.x1:t.x1,t.relative?r+t.y1:t.y2):g=NaN,(t.type&A.LINE_COMMANDS||t.type&A.ARC&&(0===t.rX||0===t.rY||!t.lArcFlag)||t.type&A.CURVE_TO||t.type&A.SMOOTH_CURVE_TO||t.type&A.QUAD_TO||t.type&A.SMOOTH_QUAD_TO)&&(a=void 0===t.x?0:t.relative?t.x:t.x-e,o=void 0===t.y?0:t.relative?t.y:t.y-r,h=isNaN(g)?void 0===t.x1?h:t.relative?t.x:t.x1-e:g-e,p=isNaN(m)?void 0===t.y1?p:t.relative?t.y:t.y1-r:m-r,s=void 0===t.x2?0:t.relative?t.x:t.x2-e,c=void 0===t.y2?0:t.relative?t.y:t.y2-r,u(a)<=f)&&u(o)<=f&&u(h)<=f&&u(p)<=f&&u(s)<=f&&u(c)<=f&&(l=!0),(l=t.type&A.CLOSE_PATH&&u(e-i)<=f&&u(r-n)<=f?!0:l)?[]:t})},r.MATRIX=l,r.ROTATE=function(t,e,r){a(t,e=void 0===e?0:e,r=void 0===r?0:r);var i=Math.sin(t),t=Math.cos(t);return l(t,i,-i,t,e-e*t+r*i,r-e*i-r*t)},r.TRANSLATE=function(t,e){return a(t,e=void 0===e?0:e),l(1,0,0,1,t,e)},r.SCALE=function(t,e){return a(t,e=void 0===e?t:e),l(t,0,0,e,0,0)},r.SKEW_X=function(t){return a(t),l(1,0,Math.atan(t),1,0,0)},r.SKEW_Y=function(t){return a(t),l(1,Math.atan(t),0,1,0,0)},r.X_AXIS_SYMMETRY=function(t){return a(t=void 0===t?0:t),l(-1,0,0,1,t,0)},r.Y_AXIS_SYMMETRY=function(t){return a(t=void 0===t?0:t),l(1,0,0,-1,0,t)},r.A_TO_C=function(){return x(function(t,e,r){if(A.ARC!==t.type)return t;var i=t,e=t.relative?0:e,t=t.relative?0:r;i.cX||P(i,e,t);for(var r=Math.min(i.phi1,i.phi2),r=Math.max(i.phi1,i.phi2)-r,n=Math.ceil(r/90),a=new Array(n),o=e,s=t,c=0;c<n;c++){var u=v(i.phi1,i.phi2,c/n),l=v(i.phi1,i.phi2,(c+1)/n),h=4/3*Math.tan((l-u)*m/4),u=[Math.cos(u*m)-h*Math.sin(u*m),Math.sin(u*m)+h*Math.cos(u*m)],p=u[0],u=u[1],f=[Math.cos(l*m),Math.sin(l*m)],d=f[0],f=f[1],h=[d+h*Math.sin(l*m),f-h*Math.cos(l*m)],l=h[0],h=h[1],y=(a[c]={relative:i.relative,type:A.CURVE_TO},function(t,e){t=g([t*i.rX,e*i.rY],i.xRot),e=t[0],t=t[1];return[i.cX+e,i.cY+t]}),p=y(p,u);a[c].x1=p[0],a[c].y1=p[1],u=y(l,h),a[c].x2=u[0],a[c].y2=u[1],p=y(d,f),a[c].x=p[0],a[c].y=p[1],i.relative&&(a[c].x1-=o,a[c].y1-=s,a[c].x2-=o,a[c].y2-=s,a[c].x-=o,a[c].y-=s),o=(l=[a[c].x,a[c].y])[0],s=l[1]}return a})},r.ANNOTATE_ARCS=function(){return x(function(t,e,r){return t.relative&&(r=e=0),A.ARC===t.type&&P(t,e,r),t})},r.CLONE=function(){return function(t){var e,r={};for(e in t)r[e]=t[e];return r}},r.CALCULATE_BOUNDS=function(){var w=s(),_=u(),O=c(),T=x(function(t,e,r){var i=O(_(w(function(t){var e,r={};for(e in t)r[e]=t[e];return r}(t))));function n(t){t>T.maxX&&(T.maxX=t),t<T.minX&&(T.minX=t)}function a(t){t>T.maxY&&(T.maxY=t),t<T.minY&&(T.minY=t)}if(i.type&A.DRAWING_COMMANDS&&(n(e),a(r)),i.type&A.HORIZ_LINE_TO&&n(i.x),i.type&A.VERT_LINE_TO&&a(i.y),i.type&A.LINE_TO&&(n(i.x),a(i.y)),i.type&A.CURVE_TO){n(i.x),a(i.y);for(var o=0,s=L(e,i.x1,i.x2,i.x);o<s.length;o++)0<(x=s[o])&&x<1&&n(E(e,i.x1,i.x2,i.x,x));for(var c=0,u=L(r,i.y1,i.y2,i.y);c<u.length;c++)0<(x=u[c])&&x<1&&a(E(r,i.y1,i.y2,i.y,x))}if(i.type&A.ARC){n(i.x),a(i.y),P(i,e,r);for(var l=i.xRot/180*Math.PI,h=Math.cos(l)*i.rX,p=Math.sin(l)*i.rX,f=-Math.sin(l)*i.rY,d=Math.cos(l)*i.rY,l=i.phi1<i.phi2?[i.phi1,i.phi2]:i.phi2<-180?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],y=l[0],g=l[1],l=function(t){var e=t[0],t=t[1],t=180*Math.atan2(t,e)/Math.PI;return t<y?360+t:t},m=0,v=C(f,-h,0).map(l);m<v.length;m++)(x=v[m])>y&&x<g&&n(M(i.cX,h,f,x));for(var x,b=0,S=C(d,-p,0).map(l);b<S.length;b++)(x=S[b])>y&&x<g&&a(M(i.cY,p,d,x))}return t});return T.minX=1/0,T.maxX=-1/0,T.minY=1/0,T.maxY=-1/0,T};function h(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)}_.prototype.round=function(t){return this.transform(o.ROUND(t))},_.prototype.toAbs=function(){return this.transform(o.TO_ABS())},_.prototype.toRel=function(){return this.transform(o.TO_REL())},_.prototype.normalizeHVZ=function(t,e,r){return this.transform(o.NORMALIZE_HVZ(t,e,r))},_.prototype.normalizeST=function(){return this.transform(o.NORMALIZE_ST())},_.prototype.qtToC=function(){return this.transform(o.QT_TO_C())},_.prototype.aToC=function(){return this.transform(o.A_TO_C())},_.prototype.sanitize=function(t){return this.transform(o.SANITIZE(t))},_.prototype.translate=function(t,e){return this.transform(o.TRANSLATE(t,e))},_.prototype.scale=function(t,e){return this.transform(o.SCALE(t,e))},_.prototype.rotate=function(t,e,r){return this.transform(o.ROTATE(t,e,r))},_.prototype.matrix=function(t,e,r,i,n,a){return this.transform(o.MATRIX(t,e,r,i,n,a))},_.prototype.skewX=function(t){return this.transform(o.SKEW_X(t))},_.prototype.skewY=function(t){return this.transform(o.SKEW_Y(t))},_.prototype.xSymmetry=function(t){return this.transform(o.X_AXIS_SYMMETRY(t))},_.prototype.ySymmetry=function(t){return this.transform(o.Y_AXIS_SYMMETRY(t))},_.prototype.annotateArcs=function(){return this.transform(o.ANNOTATE_ARCS())};var f,d,e=_,y=(n(w,d=e),w.prototype.finish=function(t){if(this.parse(" ",t=void 0===t?[]:t),0===this.curArgs.length&&this.canParseCommandOrComma)return t;throw new SyntaxError("Unterminated command at the path end.")},w.prototype.parse=function(t,e){var r=this;void 0===e&&(e=[]);for(var i=function(t){e.push(t),r.curArgs.length=0,r.canParseCommandOrComma=!0},n=0;n<t.length;n++){var a=t[n],o=!(this.curCommandType!==A.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=h(a)&&("0"===this.curNumber&&"0"===a||o);if(!h(a)||s)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var o=Number(this.curNumber);if(isNaN(o))throw new SyntaxError("Invalid number ending at "+n);if(this.curCommandType===A.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(o<0)throw new SyntaxError('Expected positive number, got "'+o+'" at index "'+n+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+n+'"');this.curArgs.push(o),this.curArgs.length===b[this.curCommandType]&&(A.HORIZ_LINE_TO===this.curCommandType?i({type:A.HORIZ_LINE_TO,relative:this.curCommandRelative,x:o}):A.VERT_LINE_TO===this.curCommandType?i({type:A.VERT_LINE_TO,relative:this.curCommandRelative,y:o}):this.curCommandType===A.MOVE_TO||this.curCommandType===A.LINE_TO||this.curCommandType===A.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),A.MOVE_TO===this.curCommandType&&(this.curCommandType=A.LINE_TO)):this.curCommandType===A.CURVE_TO?i({type:A.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===A.SMOOTH_CURVE_TO?i({type:A.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===A.QUAD_TO?i({type:A.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===A.ARC&&i({type:A.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(" "!==(o=a)&&"\t"!==o&&"\r"!==o&&"\n"!==o)if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(s)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+n+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+n+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=A.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=A.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=A.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=A.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=A.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=A.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=A.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=A.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw new SyntaxError('Unexpected character "'+a+'" at index '+n+".");this.curCommandType=A.ARC,this.curCommandRelative="a"===a}else e.push({type:A.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return e},w.prototype.transform=function(a){return Object.create(this,{parse:{value:function(t,e){void 0===e&&(e=[]);for(var r=0,i=Object.getPrototypeOf(this).parse.call(this,t);r<i.length;r++){var n=i[r],n=a(n);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}}})},w),A=(n(S,f=e),S.prototype.encode=function(){return S.encode(this.commands)},S.prototype.getBounds=function(){var t=o.CALCULATE_BOUNDS();return this.transform(t),t},S.prototype.transform=function(t){for(var e=[],r=0,i=this.commands;r<i.length;r++){var n=t(i[r]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return this.commands=e,this},S.encode=function(t){var e=t,r="";Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++){var n=e[i];if(n.type===A.CLOSE_PATH)r+="z";else if(n.type===A.HORIZ_LINE_TO)r+=(n.relative?"h":"H")+n.x;else if(n.type===A.VERT_LINE_TO)r+=(n.relative?"v":"V")+n.y;else if(n.type===A.MOVE_TO)r+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===A.LINE_TO)r+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===A.CURVE_TO)r+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===A.SMOOTH_CURVE_TO)r+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===A.QUAD_TO)r+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===A.SMOOTH_QUAD_TO)r+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==A.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+i+".");r+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return r},S.parse=function(t){var e=new y,r=[];return e.parse(t,r),e.finish(r),r},S.CLOSE_PATH=1,S.MOVE_TO=2,S.HORIZ_LINE_TO=4,S.VERT_LINE_TO=8,S.LINE_TO=16,S.CURVE_TO=32,S.SMOOTH_CURVE_TO=64,S.QUAD_TO=128,S.SMOOTH_QUAD_TO=256,S.ARC=512,S.LINE_COMMANDS=S.LINE_TO|S.HORIZ_LINE_TO|S.VERT_LINE_TO,S.DRAWING_COMMANDS=S.HORIZ_LINE_TO|S.VERT_LINE_TO|S.LINE_TO|S.CURVE_TO|S.SMOOTH_CURVE_TO|S.QUAD_TO|S.SMOOTH_QUAD_TO|S.ARC,S),b=((r={})[A.MOVE_TO]=2,r[A.LINE_TO]=2,r[A.HORIZ_LINE_TO]=1,r[A.VERT_LINE_TO]=1,r[A.CLOSE_PATH]=0,r[A.QUAD_TO]=4,r[A.SMOOTH_QUAD_TO]=2,r[A.CURVE_TO]=6,r[A.SMOOTH_CURVE_TO]=4,r[A.ARC]=7,r);function S(t){var e=f.call(this)||this;return e.commands="string"==typeof t?S.parse(t):t,e}function w(){var t=d.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}function _(){}},"0BK2":function(t,e,r){"use strict";t.exports={}},"0Dky":function(t,e,r){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},"0GbY":function(t,e,r){"use strict";var i=r("2oRo"),n=r("Fib7");t.exports=function(t,e){return arguments.length<2?(r=i[t],n(r)?r:void 0):i[t]&&i[t][e];var r}},"0eef":function(t,e,r){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!i.call({1:2},1);e.f=a?function(t){t=n(this,t);return!!t&&t.enumerable}:i},"0lZ3":function(t,e,r){"use strict";r=r("2oRo");t.exports=r.Promise},"0rvr":function(t,e,r){"use strict";var n=r("coJu"),a=r("glrk"),o=r("O741");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,i=!1,t={};try{(r=n(Object.prototype,"__proto__","set"))(t,[]),i=t instanceof Array}catch(t){}return function(t,e){return a(t),o(e),i?r(t,e):t.__proto__=e,t}}():void 0)},"14Sl":function(t,e,r){"use strict";r("rB9j");var c=r("RiVN"),u=r("yy0I"),l=r("kmMV"),h=r("0Dky"),p=r("tiKp"),f=r("kRJp"),d=p("species"),y=RegExp.prototype;t.exports=function(r,t,e,i){var o,n=p(r),s=!h(function(){var t={};return t[n]=function(){return 7},7!==""[r](t)}),a=s&&!h(function(){var t=!1,e=/a/;return"split"===r&&((e={constructor:{}}).constructor[d]=function(){return e},e.flags="",e[n]=/./[n]),e.exec=function(){return t=!0,null},e[n](""),!t});s&&a&&!e||(o=c(/./[n]),a=t(n,""[r],function(t,e,r,i,n){var t=c(t),a=e.exec;return a===l||a===y.exec?s&&!n?{done:!0,value:o(e,r,i)}:{done:!0,value:t(r,e,i)}:{done:!1}}),u(String.prototype,r,a[0]),u(y,n,a[1])),i&&f(y[n],"sham",!0)}},"1E5z":function(t,e,r){"use strict";var i=r("m/L8").f,n=r("Gi26"),a=r("tiKp")("toStringTag");t.exports=function(t,e,r){(t=t&&!r?t.prototype:t)&&!n(t,a)&&i(t,a,{configurable:!0,value:e})}},"1MNl":function(t,e,r){"use strict";r=r("NC/Y");t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},"1Y/n":function(t,e,r){"use strict";function i(u){return function(t,e,r,i){l(e);var n=h(t),a=p(n),o=f(n),s=u?o-1:0,c=u?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=c;break}if(s+=c,u?s<0:o<=s)throw new d("Reduce of empty array with no initial value")}for(;u?0<=s:s<o;s+=c)s in a&&(i=e(i,a[s],s,n));return i}}var l=r("We1y"),h=r("ewvW"),p=r("RK3t"),f=r("B/qT"),d=TypeError;t.exports={left:i(!1),right:i(!0)}},"1tal":function(t,e,r){"use strict";var i=TypeError;t.exports=function(t,e){if(t<e)throw new i("Not enough arguments");return t}},"2bX/":function(t,e,r){"use strict";var i=r("0GbY"),n=r("Fib7"),a=r("OpvP"),r=r("/b8u"),o=Object;t.exports=r?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return n(e)&&a(e.prototype,o(t))}},"2oRo":function(r,t,e){"use strict";!function(t){function e(t){return t&&t.Math===Math&&t}r.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||function(){return this}()||this||Function("return this")()}.call(this,e("yLpj"))},"33Wh":function(t,e,r){"use strict";var i=r("yoRg"),n=r("eDl+");t.exports=Object.keys||function(t){return i(t,n)}},"3Eq5":function(t,e,r){"use strict";var i=r("We1y"),n=r("cjT7");t.exports=function(t,e){t=t[e];return n(t)?void 0:i(t)}},"3MOf":function(t,e,r){"use strict";function n(){return this}var a=r("rpNk").IteratorPrototype,o=r("fHMY"),s=r("XGwC"),c=r("1E5z"),u=r("P4y1");t.exports=function(t,e,r,i){e+=" Iterator";return t.prototype=o(a,{next:s(+!i,r)}),c(t,e,!1,!0),u[e]=n,t}},"3bBZ":function(t,e,r){"use strict";function i(e,t){if(e){if(e[l]!==p)try{u(e,l,p)}catch(t){e[l]=p}if(e[h]||u(e,h,t),o[t])for(var r in c)if(e[r]!==c[r])try{u(e,r,c[r])}catch(t){e[r]=c[r]}}}var n,a=r("2oRo"),o=r("/byt"),s=r("eFrH"),c=r("4mDm"),u=r("kRJp"),r=r("tiKp"),l=r("iterator"),h=r("toStringTag"),p=c.values;for(n in o)i(a[n]&&a[n].prototype,n);i(s,"DOMTokenList")},"3dUo":function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=function(t){return t.forEach(function(t){if("Polygon"===t.geometry.type){var e=t.geometry.coordinates;if(1<e.length){for(var r=[[e[0]]],i=1;i<e.length;i++){var n=function(t){for(var e,r,i=0,n=0,a=t.length,o=a-1;n<a;o=n++)e=t[n],r=t[o],i+=(r[0]-e[0])*(e[1]+r[1]);return i}(e[i]);0!==n&&(0<n?r[r.length-1].push(e[i]):r.push([e[i]]))}t.geometry.coordinates=r,t.geometry.type="MultiPolygon"}}}),t}},"4WOD":function(t,e,r){"use strict";var i=r("Gi26"),n=r("Fib7"),a=r("ewvW"),o=r("93I0"),r=r("4Xet"),s=o("IE_PROTO"),c=Object,u=c.prototype;t.exports=r?c.getPrototypeOf:function(t){var e,t=a(t);return i(t,s)?t[s]:(e=t.constructor,n(e)&&t instanceof e?e.prototype:t instanceof c?u:null)}},"4Xet":function(t,e,r){"use strict";r=r("0Dky");t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},"4mDm":function(t,e,r){"use strict";var i=r("/GqU"),n=r("RNIs"),a=r("P4y1"),o=r("afO8"),s=r("m/L8").f,c=r("xtKg"),u=r("R1RC"),l=r("xDBR"),r=r("g6v/"),h="Array Iterator",p=o.set,f=o.getterFor(h),o=(t.exports=c(Array,"Array",function(t,e){p(this,{type:h,target:i(t),index:0,kind:e})},function(){var t=f(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,u(void 0,!0);switch(t.kind){case"keys":return u(r,!1);case"values":return u(e[r],!1)}return u([r,e[r]],!1)},"values"),a.Arguments=a.Array);if(n("keys"),n("values"),n("entries"),!l&&r&&"values"!==o.name)try{s(o,"name",{value:"values"})}catch(t){}},"4zBA":function(t,e,r){"use strict";var r=r("QNWe"),i=Function.prototype,n=i.call,i=r&&i.bind.bind(n,n);t.exports=r?i:function(t){return function(){return n.apply(t,arguments)}}},"5mdu":function(t,e,r){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},"5s+n":function(t,e,r){"use strict";r("Xn6M"),r("FOUG"),r("zJiX"),r("NSnw"),r("8itv"),r("cUmr")},"6JNq":function(t,e,r){"use strict";var c=r("Gi26"),u=r("Vu81"),l=r("Bs8V"),h=r("m/L8");t.exports=function(t,e,r){for(var i=u(e),n=h.f,a=l.f,o=0;o<i.length;o++){var s=i[o];c(t,s)||r&&c(r,s)||n(t,s,a(e,s))}}},"6LWA":function(t,e,r){"use strict";var i=r("xrYK");t.exports=Array.isArray||function(t){return"Array"===i(t)}},"6VoE":function(t,e,r){"use strict";var i=r("tiKp"),n=r("P4y1"),a=i("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[a]===t)}},"7L49":function(N,t,e){"use strict";e.d(t,"a",function(){return K});var t=e("hdLw"),y=e.n(t),i=e("Ur4K"),l=e("3dUo"),t=(e("xKWM"),e("hhWd"),e("CYVn"),e("MT78")),n=e.n(t),t=e("y7ZN"),a=e.n(t),t=e("zT9C"),u=e.n(t),h=e("kzZv"),t=e("GjdS"),p=e("o2tc"),f=e("9WTN"),r=e("Z94/"),T=e.n(r),o=e("DXPr"),X=e("qAG6"),_=e("xRo1"),r=e("w1NJ"),R=e.n(r),r=e("rP+d"),j=e.n(r);function F(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){var r;if(t)return"string"==typeof t?s(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function M(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */M=function(){return o};var c,o={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(c){a=function(t,e,r){return t[e]=r}}function s(t,e,r,i){var n,a,o,s,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),i=new P(i||[]);return l(e,"_invoke",{value:(n=t,a=r,o=i,s=p,function(t,e){if(s===d)throw new Error("Generator is already running");if(s===y){if("throw"===t)throw e;return{value:c,done:!0}}for(o.method=t,o.arg=e;;){var r=o.delegate;if(r){r=function t(e,r){var i=r.method,n=e.iterator[i];if(n===c)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=c,t(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=h(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;n=i.arg;return n?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=c),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,o);if(r){if(r===g)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===p)throw s=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;r=h(n,a,o);if("normal"===r.type){if(s=o.done?y:f,r.arg===g)continue;return{value:r.arg,done:o.done}}"throw"===r.type&&(s=y,o.method="throw",o.arg=r.arg)}})}),e}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}o.wrap=s;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",g={};function m(){}function v(){}function x(){}var e={},b=(a(e,i,function(){return this}),Object.getPrototypeOf),b=b&&b(b(C([]))),S=(b&&b!==t&&u.call(b,i)&&(e=b),x.prototype=m.prototype=Object.create(e));function w(t){["next","throw","return"].forEach(function(e){a(t,e,function(t){return this._invoke(e,t)})})}function _(o,s){var e;l(this,"_invoke",{value:function(r,i){function t(){return new s(function(t,e){!function e(t,r,i,n){var a,t=h(o[t],o,r);if("throw"!==t.type)return(r=(a=t.arg).value)&&"object"==L(r)&&u.call(r,"__await")?s.resolve(r.__await).then(function(t){e("next",t,i,n)},function(t){e("throw",t,i,n)}):s.resolve(r).then(function(t){a.value=t,i(a)},function(t){return e("throw",t,i,n)});n(t.arg)}(r,i,t,e)})}return e=e?e.then(t,t):t()}})}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(e){if(e||""===e){var r,t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(L(e)+" is not iterable")}return l(S,"constructor",{value:v.prototype=x,configurable:!0}),l(x,"constructor",{value:v,configurable:!0}),v.displayName=a(x,n,"GeneratorFunction"),o.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,a(t,n,"GeneratorFunction")),t.prototype=Object.create(S),t},o.awrap=function(t){return{__await:t}},w(_.prototype),a(_.prototype,r,function(){return this}),o.AsyncIterator=_,o.async=function(t,e,r,i,n){void 0===n&&(n=Promise);var a=new _(s(t,e,r,i),n);return o.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(S),a(S,n,"Generator"),a(S,i,function(){return this}),a(S,"toString",function(){return"[object Generator]"}),o.keys=function(t){var e,r=Object(t),i=[];for(e in r)i.push(e);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function t(t,e){return a.type="throw",a.arg=r,i.next=t,e&&(i.method="next",i.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],a=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=u.call(n,"catchLoc"),s=u.call(n,"finallyLoc");if(o&&s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var a=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return a.type=t,a.arg=e,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,i,n=this.tryEntries[e];if(n.tryLoc===t)return"throw"===(r=n.completion).type&&(i=r.arg,T(n)),i}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=c),g}},o}function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==L(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===L(t)?t:String(t)}(i.key),i)}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function D(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(r),e=(t=i?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t,o,s,c){return new(s=s||Promise)(function(r,e){function i(t){try{a(c.next(t))}catch(t){e(t)}}function n(t){try{a(c.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,n)}a((c=c.apply(t,o||[])).next())})},V=["GoogleCRS84Quad","GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleCRS84Quad"],B=[559082264.0287178,279541132.0143589,139770566.00717944,69885283.00358972,34942641.50179486,17471320.75089743,8735660.375448715,4367830.1877243575,2183915.0938621787,1091957.5469310894,545978.7734655447,272989.38673277234,136494.69336638617,68247.34668319309,34123.67334159654,17061.83667079827,8530.918335399136,4265.459167699568,2132.729583849784,1066.364791924892,533.182395962446,266.591197981223,133.2955989906115],U=[559082264.0287176,279541132.0143588,139770566.0071794,69885283.0035897,34942641.50179485,17471320.750897426,8735660.375448713,4367830.187724357,2183915.0938621783,1091957.5469310891,545978.7734655446,272989.3867327723,136494.69336638614,68247.34668319307,34123.673341596535,17061.836670798268,8530.918335399134,4265.459167699567,2132.7295838497835,1066.3647919248917,533.1823959624459,266.59119798122293,133.29559899061147],z=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t);var r,n=D(a);function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,i=a;if(r instanceof i)return(r=n.call(this)).proxyOptions={data:"apps/viewer/getUrlResource.json?url=",image:"apps/viewer/getUrlResource.png?url="},"string"==typeof t||"number"==typeof t?r.mapId=t:null!==t&&"object"===L(t)&&(r.mapInfo=t),r.serverUrl=e.serverUrl||"https://www.supermapol.com",r.accessToken=e.accessToken,r.accessKey=e.accessKey,r.tiandituKey=e.tiandituKey||"",r.withCredentials=e.withCredentials||!1,r.excludePortalProxyUrl=e.excludePortalProxyUrl,r.iportalServiceProxyUrl=e.iportalServiceProxyUrlPrefix,r.proxy=e.proxy,r;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"setMapId",value:function(t){"string"==typeof t||"number"==typeof t?(this.mapId=t,this.mapInfo=null):null!==t&&"object"===L(t)&&(this.mapInfo=t,this.mapId="")}},{key:"setServerUrl",value:function(t){this.serverUrl=t}},{key:"setWithCredentials",value:function(t){this.withCredentials=t}},{key:"setProxy",value:function(t){this.proxy=t}},{key:"handleServerUrl",value:function(t){var e=t.split("");return"/"!==e[e.length-1]&&(t+="/"),this.serverUrl=t}},{key:"getMapInfo",value:function(){var e,n=this;return!this.mapId&&this.mapInfo?new Promise(function(t){t(n.mapInfo)}):(e=this._handleMapUrl(),new Promise(function(r,i){return m(n,void 0,void 0,M().mark(function t(){return M().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getiPortalServiceProxy();case 3:SuperMap.FetchRequest.get(e,null,{withCredentials:this.withCredentials}).then(function(t){return t.json()}).then(function(t){var e;t&&!1===t.succeed?(e={message:t&&t.error&&t.error.errorMsg},i(e)):(t.mapParams={title:t.title,description:t.description},r(t))}).catch(function(t){i(t)}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),i(t.t0);case 9:case"end":return t.stop()}},t,this,[[0,6]])}))}))}},{key:"getiPortalServiceProxy",value:function(){var i=this;return new Promise(function(e,r){SuperMap.FetchRequest.get("".concat(i.serverUrl,"web/config/portal.json"),{scope:["serviceProxy"]}).then(function(t){return t.json()}).then(function(t){t&&t.serviceProxy?((t=t.serviceProxy).enable&&(t.proxyServerRootUrl?i.iportalServiceProxyUrl=t.proxyServerRootUrl:t.port&&t.rootUrlPostfix&&(i.iportalServiceProxyUrl="".concat(t.port,"/").concat(t.rootUrlPostfix)),-1<i.serverUrl.indexOf(i.iportalServiceProxyUrl))&&(i.iportalServiceProxyUrl=""),e(t)):r("serviceProxyFailed")}).catch(function(t){r(t)})})}},{key:"getLayerFeatures",value:function(t,e,r){var i;switch(t){case"hosted":i=this._getFeaturesFromHosted(e,r);break;case"rest_data":i=this._getFeaturesFromRestData(e,r);break;case"rest_map":i=this._getFeaturesFromRestMap(e);break;case"dataflow":i=this._getFeaturesFromDataflow(e);break;case"user_data":i=this._getFeaturesFromUserData(e)}return i}},{key:"getWmsInfo",value:function(i){var n=this;return new Promise(function(r){var t=n.handleProxy(),e=SuperMap.Util.urlAppend(i.url,"REQUEST=GetCapabilities&SERVICE=WMS");SuperMap.FetchRequest.get(e,null,{withCredentials:n.handleWithCredentials(t,i.url,!1),withoutFormatSuffix:!0,proxy:t}).then(function(t){return t.text()}).then(function(t){var e=_||window.convert,e=JSON.parse(e.xml2json(t,{compact:!0,spaces:4})),t=e.WMT_MS_Capabilities||e.WMS_Capabilities;r({version:t._attributes.version})})})}},{key:"getMapBoxStyle",value:function(t){return new Promise(function(e,r){SuperMap.FetchRequest.get(t).then(function(t){return t.json()}).then(function(t){e(t)}).catch(function(t){r(t)})})}},{key:"getWmtsInfo",value:function(S,w){var i=this;return new Promise(function(f,e){var d,y=!1,g=22,m=0,v="",x="",b="",t=i.handleProxy(),r=SuperMap.Util.urlAppend(S.url,"REQUEST=GetCapabilities&SERVICE=WMTS&VERSION=1.0.0"),r=i.handleParentRes(r);SuperMap.FetchRequest.get(r,null,{withCredentials:i.handleWithCredentials(t,S.url,!1),withoutFormatSuffix:!0,proxy:t}).then(function(t){return t.text()}).then(function(t){for(var e=_||window.convert,e=JSON.parse(e.xml2json(t,{compact:!0,spaces:4,alwaysArray:["Layer","TileMatrixSet","ows:Operation","ows:Get","ResourceURL","Style"]})).Capabilities,t=e.Contents,e=e["ows:OperationsMetadata"],r=(e&&(e=e["ows:Operation"],e=(e=Array.isArray(e)?e:[e]).find(function(t){return"GetTile"===t._attributes.name}))&&(e=e["ows:DCP"]["ows:HTTP"]["ows:Get"],e=(e=Array.isArray(e)?e:[e]).find(function(t){return"KVP"===t["ows:Constraint"]["ows:AllowedValues"]["ows:Value"]._text}))&&(b=e._attributes["xlink:href"]),t.TileMatrixSet),i=0;i<r.length;i++)if(r[i]["ows:Identifier"]&&r[i]["ows:Identifier"]._text===S.tileMatrixSet){if(!r[i].WellKnownScaleSet||-1===V.indexOf(r[i].WellKnownScaleSet._text)){for(var n={},a="EPSG:3857"===w?B:U,o="EPSG:3857"===w?[-20037508.342789248,20037508.342789087]:[-180,90],s=0;s<r[i].TileMatrix.length;s++){var c=r[i].TileMatrix[s],u=c["ows:Identifier"]._text,c=F(c.TopLeftCorner._text.split(" "));if(!(Object(X.p)(c[0],o[0])&&Object(X.p)(c[1],o[1])||Object(X.p)(c[0],o[1])&&Object(X.p)(c[1],o[0])))break;c=a[+u];if(!c)break;var l=parseFloat(r[i].TileMatrix[s].ScaleDenominator._text);if(Object(X.p)(c,l))n[+u]=l;else if(0<Object.keys(n).length)break}var h=Object.keys(n).map(function(t){return+t});if(g=R()(h),m=j()(h),0===h.length)throw Error("TileMatrixSetNotSuppport")}y=!0;break}var p,e=t.Layer.find(function(t){return t["ows:Identifier"]._text===S.layer});e&&(t=e.Style,v=Array.isArray(e.Style)?t[0]["ows:Identifier"]?t[0]["ows:Identifier"]._text:"":t["ows:Identifier"]?t["ows:Identifier"]._text:"",e["ows:WGS84BoundingBox"]&&(t=e["ows:WGS84BoundingBox"]["ows:LowerCorner"]._text.split(" "),p=e["ows:WGS84BoundingBox"]["ows:UpperCorner"]._text.split(" "),d=[parseFloat(t[0]),parseFloat(t[1]),parseFloat(p[0]),parseFloat(p[1])]),t=e.ResourceURL,p=(t=Array.isArray(t)?t:[t]).find(function(t){return"tile"===t._attributes.resourceType}))&&(x=p._attributes.template),f({isMatched:y,matchMaxZoom:g,matchMinZoom:m,style:v,bounds:d,restResourceURL:x,kvpResourceUrl:b})}).catch(function(t){e(t)})})}},{key:"_getFeaturesFromHosted",value:function(t,e){var r=t.dataSource,i=t.layerType,n=(r||t).serverId;return n?"MARKER"===i||r&&(!r.accessType||"DIRECT"===r.accessType)?this._getDataFromIportal(n,t):this._getDataFromHosted({layer:t,serverId:n,baseProjection:e}):new Promise(function(t){t({type:"noServerId"})})}},{key:"_getFeaturesFromRestData",value:function(t,i){var n,a=this,o=t.dataSource;return new Promise(function(e,r){a._getFeatureBySQL(o.url,[o.dataSourceName||t.name],function(t){n=a.parseGeoJsonData2Feature({allDatas:{features:t.result.features.features}}),e({type:"feature",features:n})},function(t){r(t)},i)})}},{key:"_getFeaturesFromRestMap",value:function(s){var c=this;return new Promise(function(a,o){c._queryFeatureBySQL(s.dataSource.url,s.dataSource.layerName,function(t){var t=t&&t.result.recordsets,t=t&&t[0],e=t.fields;if(t&&e){var r,i=[];for(r in e){var n=e[r];0===n.indexOf("Sm")&&"SmID"!==n||i.push(n)}c._getFeatures(i,s,function(t){a({type:"feature",features:t})},function(t){o(t)})}},function(t){o(t)},"smid=1")})}},{key:"_getFeaturesFromUserData",value:function(t){var n=this,a=t.dataSource;return new Promise(function(e,r){var t=n.handleProxy(),i=n.handleParentRes(a.url);SuperMap.FetchRequest.get(i,null,{withCredentials:n.handleWithCredentials(t,i,n.withCredentials),proxy:t,withoutFormatSuffix:!0}).then(function(t){return t.json()}).then(function(t){t=t&&t instanceof Object&&"FeatureCollection"===t.type?t.features:t;t=n.parseGeoJsonData2Feature({allDatas:{features:t}}),e({type:"feature",features:t})}).catch(function(t){r(t)})})}},{key:"_queryFeatureBySQL",value:function(t,e,r,i,n,a,o,s,c,u){e=this._getQueryFeaturesParam(e,n,a,o,s,c,u),n=this.handleProxy(),a=this.handleParentRes(t);new SuperMap.QueryBySQLService(a,{proxy:n,withCredentials:this.handleWithCredentials(n,t,!1),eventListeners:{processCompleted:function(t){r&&r(t)},processFailed:function(t){i&&i(t)}}}).processAsync(e)}},{key:"_getFeatures",value:function(t,e,r,i){var n=this,e=e.dataSource;this._queryFeatureBySQL(e.url,e.layerName,function(t){t=t.result.recordsets[0].features.features,t=n.parseGeoJsonData2Feature({allDatas:{features:t}});r(t)},function(t){i(t)},null,t)}},{key:"_getQueryFeaturesParam",value:function(t,e,r,i,n,a,o){t=new SuperMap.FilterParameter({name:t,attributeFilter:e}),r&&(t.fields=r),e={queryParams:[t]};return o&&(e.queryOption=SuperMap.QueryOption.ATTRIBUTE),n&&(e.startRecord=n),a&&(e.expectCount=a),i&&(e.prjCoordSys={epsgCode:i}),new SuperMap.QueryBySQLParameters(e)}},{key:"_getFeaturesFromDataflow",value:function(r){var i=this;return new Promise(function(t,e){i._getDataflowInfo(r,function(){t({type:"dataflow"})},function(t){e(t)})})}},{key:"_getDataflowInfo",value:function(r,e,i){var t=r.url,t="".concat(t,".json"),n=(r.credential&&r.credential.token&&(n=r.credential.token,t+="?token=".concat(n)),this.handleProxy()),t=this.handleParentRes(t);SuperMap.FetchRequest.get(t,null,{proxy:n,withCredentials:this.handleWithCredentials(n,t,!1)}).then(function(t){return t.json()}).then(function(t){(t?(t.featureMetaData&&(r.featureType=t.featureMetaData.featureType.toUpperCase(),r.dataSource={dataTypes:{}},t.featureMetaData.fieldInfos)&&0<t.featureMetaData.fieldInfos.length&&t.featureMetaData.fieldInfos.forEach(function(t){var e=t.name.trim();"TEXT"===t.type?r.dataSource.dataTypes[e]="STRING":-1!==["DOUBLE","INT","FLOAT","LONG","SHORT"].indexOf(t.type)?r.dataSource.dataTypes[e]="NUMBER":r.dataSource.dataTypes[e]="UNKNOWN"}),r.wsUrl=t.urls[0].url,r.name=t.urls[0].url.split("iserver/services/")[1].split("/dataflow")[0],e):i)()}).catch(function(){i()})}},{key:"getDatasourceType",value:function(t){var e,r=t.dataSource,t=t.layerType;return r&&"SAMPLE_DATA"===r.type?r.type:(r&&r.serverId||"MARKER"===t||"HOSTED_TILE"===t?e="hosted":"SUPERMAP_REST"===t||"TILE"===t||"WMS"===t||"WMTS"===t||"MAPBOXSTYLE"===t?e="tile":r&&"REST_DATA"===r.type?e="rest_data":r&&"REST_MAP"===r.type&&r.url?e="rest_map":"DATAFLOW_POINT_TRACK"===t||"DATAFLOW_HEAT"===t?e="dataflow":r&&"USER_DATA"===r.type&&(e="user_data"),e)}},{key:"getFeatureProperties",value:function(t){var e=[];return t&&t.length&&t.forEach(function(t){t=t.properties;t&&e.push(t)}),e}},{key:"parseGeoJsonData2Feature",value:function(t){for(var e=t.allDatas.features,r=[],i=0,n=e.length;i<n;i++){var a=e[i],o=a.geometry.coordinates;"Point"===e[i].geometry.type&&e[i].properties&&(e[i].properties.lon=o[0],e[i].properties.lat=o[1]),a.properties.index=i+"",r.push(a)}return r}},{key:"_getDataFromIportal",value:function(t,o){var s,e=this,r="".concat(this.serverUrl,"web/datas/").concat(t,"/content.json?pageSize=9999999&currentPage=1");return this.accessToken&&(r="".concat(r,"&").concat(this.accessKey,"=").concat(this.accessToken)),new Promise(function(n,a){r=e.handleParentRes(r);var t=e.handleProxy();SuperMap.FetchRequest.get(r,null,{withCredentials:e.handleWithCredentials(t,r,e.withCredentials),proxy:t}).then(function(t){return t.json()}).then(function(i){return m(e,void 0,void 0,M().mark(function t(){var e,r;return M().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:!1===i.succeed&&a(i.error),i&&i.type?"JSON"!==i.type&&"GEOJSON"!==i.type?t.next=7:(i.content=JSON.parse(i.content.trim()),s=this._formatGeoJSON(i.content),t.next=21):t.next=22;break;case 7:if("EXCEL"!==i.type&&"CSV"!==i.type)t.next=20;else{if(o.dataSource&&o.dataSource.administrativeInfo)return i.content.rows.unshift(i.content.colTitles),e=o.dataSource.administrativeInfo,r=e.divisionType,e=e.divisionField,t.next=13,this._excelData2FeatureByDivision(i.content,r,e);t.next=17}break;case 13:r=t.sent,s=this._formatGeoJSON(r),t.next=18;break;case 17:s=this._excelData2Feature(i.content,o&&o.xyField||{});case 18:t.next=21;break;case 20:"SHP"===i.type&&(i.content=JSON.parse(i.content.trim()),s=this._formatGeoJSON(i.content.layers[0]));case 21:n({type:"feature",features:s});case 22:case"end":return t.stop()}},t,this)}))}).catch(function(t){a(t)})})}},{key:"_getDataFromHosted",value:function(t){var o=this,s=t.layer,e=t.serverId,c=t.baseProjection,u="HOSTED_TILE"===s.layerType;return new Promise(function(n,a){o._checkUploadToRelationship(e).then(function(t){var r,i;t&&0<t.length?(r=t[0].name,i=t[0].type.toUpperCase(),o._getDataService(e,r).then(function(t){var t=t.dataItemServices,e=(0===t.length&&a("noDataServices"),{layer:s,dataItemServices:t,datasetName:r,featureType:i,resolve:n,reject:a,baseProjection:c});u?(t=t.filter(function(t){return t&&"RESTDATA"===t.serviceType})[0],o._isMvt(t.address,r,c).then(function(t){o._getServiceInfoFromLayer(e,t)}).catch(function(){o._getServiceInfoFromLayer(e)})):o._getServiceInfoFromLayer(e)})):a("resultIsEmpty")}).catch(function(t){a(t)})})}},{key:"_isMvt",value:function(t,e,r){return this._getDatasetsInfo(t,e).then(function(e){return e.epsgCode==r.split("EPSG:")[1]?SuperMap.FetchRequest.get("".concat(e.url,"/tilefeature.mvt")).then(function(t){return t.json()}).then(function(t){return e.isMvt=t.error&&400===t.error.code,e}).catch(function(){return e}):e})}},{key:"_getServiceInfoFromLayer",value:function(t,r){var i=this,n=t.layer,e=t.dataItemServices,a=t.datasetName,o=t.featureType,s=t.resolve,c=t.reject,u=t.baseProjection,l=r?!r.isMvt:"HOSTED_TILE"===n.layerType,h=!1;e.forEach(function(e){h||(e&&l&&"RESTMAP"===e.serviceType?(h=!0,i._getTileLayerInfo(e.address,u).then(function(t){s({type:"restMap",restMaps:t})})):e&&!l&&"RESTDATA"===e.serviceType&&(r&&r.isMvt?s({type:"mvt",info:r,featureType:o}):(h=!0,i._getDatasources(e.address).then(function(t){n.dataSource.dataSourceName=t+":"+a,n.dataSource.url="".concat(e.address,"/data"),i._getFeatureBySQL(n.dataSource.url,[n.dataSource.dataSourceName||n.name],function(t){t=i.parseGeoJsonData2Feature({allDatas:{features:t.result.features.features}});s({type:"feature",features:t})},function(t){c(t)})},function(t){c(t)}))))},this),h||c("noService")}},{key:"_getDatasetsInfo",value:function(i,n){var a=this;return this._getDatasources(i).then(function(e){var r="".concat(i,"/data/datasources/").concat(e,"/datasets/").concat(n),t=a.handleProxy(),r=a.handleParentRes(r);return SuperMap.FetchRequest.get(r,null,{withCredentials:a.handleWithCredentials(t,r,!1),proxy:t}).then(function(t){return t.json()}).then(function(t){return{epsgCode:t.datasetInfo.prjCoordSys.epsgCode,bounds:t.datasetInfo.bounds,datasourceName:e,datasetName:n,url:r}})})}},{key:"_getDatasources",value:function(t){var e=this.handleProxy(),t="".concat(t,"/data/datasources.json"),t=this.handleParentRes(t);return SuperMap.FetchRequest.get(t,null,{withCredentials:this.handleWithCredentials(e,t,!1),proxy:e}).then(function(t){return t.json()}).then(function(t){if(401===t.code)throw Error(t.errorMsg);return t.datasourceNames[0]})}},{key:"_getDataService",value:function(e,r){var t=this.handleProxy(),i="".concat(this.serverUrl,"web/datas/").concat(e,".json"),i=this.handleParentRes(i);return SuperMap.FetchRequest.get(i,null,{withCredentials:this.handleWithCredentials(t,i,this.withCredentials),proxy:t}).then(function(t){return t.json()}).then(function(t){return t.fileId=e,t.datasetName=r,t})}},{key:"_checkUploadToRelationship",value:function(t){var e=this.handleProxy(),t="".concat(this.serverUrl,"web/datas/").concat(t,"/datasets.json"),t=this.handleParentRes(t);return SuperMap.FetchRequest.get(t,null,{withCredentials:this.handleWithCredentials(e,t,this.withCredentials),proxy:e}).then(function(t){return t.json()}).then(function(t){return t})}},{key:"_handleMapUrl",value:function(){var t,e=this.serverUrl+"web/maps/"+this.mapId+"/map",r=((this.accessToken||this.accessKey)&&(e+="token="+this.accessToken),"getUrlResource.json?url=");return e=-1===(e=this.excludePortalProxyUrl&&-1<this.serverUrl.indexOf(r)&&1<(t=this.serverUrl.split(r)).length?t[0]+r+this.serverUrl+"web/maps/"+this.mapId+"/map.json":e).indexOf(".json")?"".concat(e,".json"):e}},{key:"handleProxy",value:function(t){return this.proxy?(t=this.proxyOptions[t||"data"],t=this.serverUrl+t,"string"==typeof this.proxy?this.proxy:t):null}},{key:"handleWithCredentials",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.withCredentials;return!(!t||!t.startsWith(this.serverUrl)||e&&!e.startsWith(t))||!!(e&&this.iportalServiceProxyUrl&&0<=e.indexOf(this.iportalServiceProxyUrl))||r}},{key:"isIportalResourceUrl",value:function(t){return t.startsWith(this.serverUrl)||this.iportalServiceProxyUrl&&0<=t.indexOf(this.iportalServiceProxyUrl)}},{key:"handleParentRes",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.mapId,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"MAP";return this.isIportalResourceUrl(t)?Object(X.v)(t,"parentResType=".concat(r,"&parentResId=").concat(e)):t}},{key:"_formatGeoJSON",value:function(t){t=t.features;return t.forEach(function(t,e){t.properties.index=e}),t}},{key:"_excelData2Feature",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=t.colTitles,i=r.indexOf(e.xField),n=r.indexOf(e.yField);if(n<0||i<0)for(var a=0,o=r.length;a<o;a++)Object(X.n)(r[a])&&(i=a),Object(X.o)(r[a])&&(n=a);for(var s=[],c=0,u=t.rows.length;c<u;c++){for(var l=t.rows[c],h=Number(l[i]),l=Number(l[n]),p={},f=0;f<t.colTitles.length;f++)p[t.colTitles[f].trim()]=t.rows[c][f];p.index=c+"",s.push({type:"Feature",geometry:{type:"Point",coordinates:[h,l]},properties:p})}return s}},{key:"_excelData2FeatureByDivision",value:function(e,t,r){var i,n=this,a=-1!==["","City"].indexOf(t)?"MunicipalData":"ProvinceData";return window[a]&&window[a].features?new Promise(function(t){t(n._combineFeature(e,window[a],r))}):(t=-1!==["","City"].indexOf(t)?"MunicipalData.js":"ProvincialData.js",i=this.handleProxy(),t="".concat(this.serverUrl,"apps/dataviz/libs/administrative_data/").concat(t),SuperMap.FetchRequest.get(t,null,{withCredentials:!1,proxy:i,withoutFormatSuffix:!0}).then(function(t){return t.text()}).then(function(t){return new Function(t)(),n._combineFeature(e,window[a],r)}))}},{key:"_combineFeature",value:function(t,n,e){var a,o,s=this,c={type:"FeatureCollection",features:[]};return t.length<2||(a=t.colTitles,t=t.rows,o=a.findIndex(function(t){return t===e}),t.forEach(function(e){var t,r,i=n.features.find(function(t){return s._isMatchAdministrativeName(t.properties.Name,e[o])});i&&(t=i.properties.Province,r={properties:{},geometry:i.geometry,type:"Feature"},e.forEach(function(t,e){r.properties[a[e]]=t}),t&&(r.properties.Province=t),c.features.push(r))})),c}},{key:"_isMatchAdministrativeName",value:function(t,e){var r;return!(!t||"string"!=typeof e||e.constructor!==String||(""===(r=""===(r=t.trim().substr(0,2))?t.trim().substr(0,3):r)&&(r=t.trim().substr(0,3)),!e.match(new RegExp(r))))}},{key:"_getTileLayerInfo",value:function(t,e){var i=this,n=this.handleProxy(),a=e.split("EPSG:")[1],e="".concat(t,"/maps.json"),e=this.handleParentRes(e);return SuperMap.FetchRequest.get(e,null,{withCredentials:this.handleWithCredentials(n,e,this.withCredentials),proxy:n}).then(function(t){return t.json()}).then(function(t){var r=[];return t&&t.forEach(function(e){var t=SuperMap.FetchRequest.get("".concat(e.path,".json?prjCoordSys=").concat(JSON.stringify({epsgCode:a})),null,{withCredentials:i.withCredentials,proxy:n}).then(function(t){return t.json()}).then(function(t){return t.url=e.path,t});r.push(t)}),Promise.all(r).then(function(t){return t})})}},{key:"_getFeatureBySQL",value:function(t,e,r,i,n){var a=new SuperMap.FilterParameter({name:e.join().replace(":","@"),attributeFilter:null}),a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:a,datasetNames:e,fromIndex:0,toIndex:-1,maxFeatures:-1,returnContent:!0}),e=(n&&(a.targetEpsgCode="EPSG:3857"===n||"EPSG:-1000"===n?4326:+n.split(":")[1]),this.handleProxy()),n={proxy:e,withCredentials:this.handleWithCredentials(e,t,!1),eventListeners:{processCompleted:function(t){r&&r(t)},processFailed:function(t){i&&i(t)}}},e=this.handleParentRes(t);new SuperMap.GetFeaturesBySQLService(e,n).processAsync(a)}},{key:"getEpsgCodeInfo",value:function(r,i){return m(this,void 0,void 0,M().mark(function t(){var e;return M().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="/"===i.slice(-1)?i:"".concat(i,"/"),e="".concat(e,"epsgcodes/").concat(r,".json"),t.next=4,SuperMap.FetchRequest.get(e,null).then(function(t){return t.json()}).then(function(t){return t.wkt}).catch(function(t){console.error(t)});case 4:return e=t.sent,t.abrupt("return",e);case 6:case"end":return t.stop()}},t)}))}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(t.a),v=e("fr48"),G=e("Nwvx"),r=e("YY/H"),W=e.n(r);function E(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */E=function(){return o};var c,o={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,r){t[e]=r.value},e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",r=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(c){a=function(t,e,r){return t[e]=r}}function s(t,e,r,i){var n,a,o,s,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),i=new P(i||[]);return l(e,"_invoke",{value:(n=t,a=r,o=i,s=p,function(t,e){if(s===d)throw new Error("Generator is already running");if(s===y){if("throw"===t)throw e;return{value:c,done:!0}}for(o.method=t,o.arg=e;;){var r=o.delegate;if(r){r=function t(e,r){var i=r.method,n=e.iterator[i];if(n===c)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=c,t(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=h(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;n=i.arg;return n?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=c),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,o);if(r){if(r===g)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===p)throw s=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;r=h(n,a,o);if("normal"===r.type){if(s=o.done?y:f,r.arg===g)continue;return{value:r.arg,done:o.done}}"throw"===r.type&&(s=y,o.method="throw",o.arg=r.arg)}})}),e}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}o.wrap=s;var p="suspendedStart",f="suspendedYield",d="executing",y="completed",g={};function m(){}function v(){}function x(){}var e={},b=(a(e,i,function(){return this}),Object.getPrototypeOf),b=b&&b(b(C([]))),S=(b&&b!==t&&u.call(b,i)&&(e=b),x.prototype=m.prototype=Object.create(e));function w(t){["next","throw","return"].forEach(function(e){a(t,e,function(t){return this._invoke(e,t)})})}function _(o,s){var e;l(this,"_invoke",{value:function(r,i){function t(){return new s(function(t,e){!function e(t,r,i,n){var a,t=h(o[t],o,r);if("throw"!==t.type)return(r=(a=t.arg).value)&&"object"==A(r)&&u.call(r,"__await")?s.resolve(r.__await).then(function(t){e("next",t,i,n)},function(t){e("throw",t,i,n)}):s.resolve(r).then(function(t){a.value=t,i(a)},function(t){return e("throw",t,i,n)});n(t.arg)}(r,i,t,e)})}return e=e?e.then(t,t):t()}})}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(e){if(e||""===e){var r,t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return r=-1,(t=function t(){for(;++r<e.length;)if(u.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(A(e)+" is not iterable")}return l(S,"constructor",{value:v.prototype=x,configurable:!0}),l(x,"constructor",{value:v,configurable:!0}),v.displayName=a(x,n,"GeneratorFunction"),o.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,a(t,n,"GeneratorFunction")),t.prototype=Object.create(S),t},o.awrap=function(t){return{__await:t}},w(_.prototype),a(_.prototype,r,function(){return this}),o.AsyncIterator=_,o.async=function(t,e,r,i,n){void 0===n&&(n=Promise);var a=new _(s(t,e,r,i),n);return o.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},w(S),a(S,n,"Generator"),a(S,i,function(){return this}),a(S,"toString",function(){return"[object Generator]"}),o.keys=function(t){var e,r=Object(t),i=[];for(e in r)i.push(e);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in r)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function t(t,e){return a.type="throw",a.arg=r,i.next=t,e&&(i.method="next",i.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],a=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=u.call(n,"catchLoc"),s=u.call(n,"finallyLoc");if(o&&s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&u.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var a=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return a.type=t,a.arg=e,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r,i,n=this.tryEntries[e];if(n.tryLoc===t)return"throw"===(r=n.completion).type&&(i=r.arg,T(n)),i}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=c),g}},o}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===A(t)?t:String(t)}(i.key),i)}}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Y(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=S(r),e=(t=i?(t=S(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H=function(t,o,s,c){return new(s=s||Promise)(function(r,e){function i(t){try{a(c.next(t))}catch(t){e(t)}}function n(t){try{a(c.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?r(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(i,n)}a((c=c.apply(t,o||[])).next())})},Q=function(t){var e=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t);var r,n=Y(a);function a(t,e,r){var i;if(this instanceof a)return(i=n.call(this)).echartslayer=[],i._layers=[],i.canvgsV=[],i.serverUrl=e.serverUrl||"https://www.supermapol.com",i.accessToken=e.accessToken,i.accessKey=e.accessKey,i.tiandituKey=e.tiandituKey||"",i.googleMapsAPIKey=e.googleMapsAPIKey||"",i.googleMapsLanguage=e.googleMapsLanguage||"zh-CN",i.withCredentials=e.withCredentials||!1,i.proxy=e.proxy,i.target=e.target||"map",i.excludePortalProxyUrl=e.excludePortalProxyUrl,i.isSuperMapOnline=e.isSuperMapOnline,i.ignoreBaseProjection=e.ignoreBaseProjection,i.echartslayer=[],i.webMapService=new z(t,e),i.mapOptions=r,i.eventTypes=["getmapinfofailed","crsnotsupport","getlayerdatasourcefailed","addlayerssucceeded","notsupportmvt","notsupportbaidumap","projectionIsNotMatch","beforeremovemap","mapinitialized"],i.mapId=t,i;throw new TypeError("Cannot call a class as a function")}return e=a,(t=[{key:"echartsLayerResize",value:function(){this.echartslayer.forEach(function(t){t.chart.resize()})}},{key:"setMapId",value:function(t){var e=this;"string"==typeof t||"number"==typeof t?(this.mapId=t,this.webMapInfo=null):null!==t&&"object"===A(t)&&(this.webMapInfo=t),this.webMapService.setMapId(t),t&&setTimeout(function(){e._initWebMap()},0)}},{key:"setServerUrl",value:function(t){this.serverUrl=t,this.webMapService.setServerUrl(t)}},{key:"setWithCredentials",value:function(t){this.withCredentials=t,this.webMapService.setWithCredentials(t)}},{key:"setProxy",value:function(t){this.proxy=t,this.webMapService.setProxy(t)}},{key:"setZoom",value:function(t){!this.map||(this.mapOptions.zoom=t)===+this.map.getZoom().toFixed(2)||!t&&0!==t||this.map.setZoom(t,{from:"setZoom"})}},{key:"setMaxBounds",value:function(t){this.map&&(this.mapOptions.maxBounds=t)&&this.map.setMaxBounds(t)}},{key:"setMinZoom",value:function(t){!this.map||!(this.mapOptions.minZoom=t)&&0!==t||this.map.setMinZoom(t)}},{key:"setMaxZoom",value:function(t){!this.map||!(this.mapOptions.maxZoom=t)&&0!==t||this.map.setMaxZoom(t)}},{key:"initWebMap",value:function(){var t;this.cleanWebMap(),this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapInfo?((t=this.webMapInfo).mapParams={title:this.webMapInfo.title,description:this.webMapInfo.description},this.mapParams=t.mapParams,this._getMapInfo(t)):this.mapId&&this.serverUrl?(this._taskID=new Date,this.getMapInfo(this._taskID)):this._createMap()}},{key:"getMapInfo",value:function(e){var r=this;this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapService.getMapInfo().then(function(t){r._taskID===e&&(r.mapParams=t.mapParams,r._getMapInfo(t,e))},function(t){throw t}).catch(function(t){r.triggerEvent("getmapinfofailed",{error:t}),console.log(t)})}},{key:"getBaseLayerType",value:function(t){var e=t.layerType;switch(e=-1<e.indexOf("TIANDITU_VEC")||-1<e.indexOf("TIANDITU_IMG")||-1<e.indexOf("TIANDITU_TER")?"TIANDITU":e){case"TILE":case"SUPERMAP_REST":return"TILE";case"CLOUD":case"CLOUD_BLACK":return"CLOUD";case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":return"XYZ";default:return e}}},{key:"getMapurls",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{CLOUD:t.CLOUD||"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:t.CLOUD_BLACK||"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:t.OSM||"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i540264686!3m12!2s{googleMapsLanguage}!3sUS!5e18!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0&key={googleMapsAPIKey}",GOOGLE_CN:"https://mt{0-3}.google.com/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}}},{key:"getLayerFeatures",value:function(i,n,t){var e=this,t=this.webMapService.getLayerFeatures(t,i,this.baseProjection);t&&t.then(function(r){return H(e,void 0,void 0,E().mark(function t(){var e;return E().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mapId&&this._taskID!==n)return t.abrupt("return");t.next=2;break;case 2:if(!r||!i.projection){t.next=8;break}if(Object(v.a)(i.projection)){t.next=8;break}return t.next=6,this.webMapService.getEpsgCodeInfo(i.projection.split(":")[1],this.serverUrl);case 6:(e=t.sent)&&Object(v.b)(i.projection,e);case 8:this._getLayerFeaturesSucceeded(r,i);case 9:case"end":return t.stop()}},t,this)}))},function(t){throw new Error(t)}).catch(function(t){e._addLayerSucceeded(),e.triggerEvent("getlayerdatasourcefailed",{error:t,layer:i,map:e.map}),console.log(t)})}},{key:"setFeatureInfo",value:function(t){var e=t.dv_v5_markerInfo;if(!e||!e.dataViz_title)return e;var r,i=e,n=t.properties;for(r in i)n[r]&&(i[r]=n[r],delete n[r]);return i}},{key:"getRankStyleGroup",value:function(e,t,r){var i=[],n=[],a=r.style,o=r.themeSetting,s=o.segmentMethod,c=o.segmentCount,u=o.customSettings,l=r.themeSetting.minRadius,r=r.themeSetting.maxRadius,h=o.colors,p=a.fillColor;t.forEach(function(t){t=t.properties[e];null!=t&&""!==t&&T()(+t)&&i.push(Number(t))});try{n=SuperMap.ArrayStatistic.getArraySegments(i,s,c)}catch(t){console.log(t)}for(var f,d,y=0;y<c;y++)y in u&&(f=u[y].segment.start,d=u[y].segment.end,null!=f&&(n[y]=f),null!=d)&&(n[y+1]=d);var g=[];if(n&&n.length){for(var m,v,x=n.length,b=(r-l)/(x-1),S=Number(((r+l)/2).toFixed(2)),w="",_=h?SuperMap.ColorsPickerUtil.getGradientColors(h,x,"RANGE"):[],O=0;O<x-1;O++)S=(m=Number(n[O].toFixed(2)))===(v=Number(n[O+1].toFixed(2)))?S:l+Math.round(b*O),v=O===x-2?v+.01:v,S=u[O]&&u[O].radius?u[O].radius:S,a.radius=S,h&&0<h.length&&(w=u[O]&&u[O].color?u[O].color:_[O]||p,a.fillColor=w),g.push({radius:S,color:w,start:m,end:v,style:a});return g}return!1}},{key:"createRankStyleSource",value:function(t,e){var r=t.themeSetting.themeField,r=this.getRankStyleGroup(r,e,t);return!!r&&{parameters:t,styleGroups:r}}},{key:"isMatchAdministrativeName",value:function(t,e){var r;return"string"==typeof e&&e.constructor===String&&(""===(r=t.substr(0,2))&&(r=t.substr(0,3)),!!e.match(new RegExp(r)))}},{key:"getRestMapLayerInfo",value:function(t,e){var r=t.bounds,i=t.coordUnit,n=t.visibleScales,t=t.url;return e.layerType="TILE",e.orginEpsgCode=this.baseProjection,e.units=i&&i.toLowerCase(),e.extent=[r.left,r.bottom,r.right,r.top],e.visibleScales=n,e.url=t,e.sourceType="TILE",e}},{key:"handleLayerFeatures",value:function(t,e){var r=e.layerType,i=e.style,n=e.themeSetting,e=e.filterCondition;return t=(i||n)&&e&&"RANGE"!==r&&"UNIQUE"!==r&&"RANK_SYMBOL"!==r?this.getFilterFeatures(e,t):t}},{key:"mergeFeatures",value:function(t,e,r){var i,n;return e instanceof Array&&(e=e.map(function(t,e){return Object.prototype.hasOwnProperty.call(t.properties,"index")||(t.properties.index=e),t})).length&&(r||!e[0].geometry)&&((t=this.map.getSource(t))&&t._data.features||!e[0].geometry)?(i=t&&t._data&&t._data.features,n=[],!r&&i?i:(e.forEach(function(e){var t=i.find(function(t){return isNaN(+t.properties[r])&&isNaN(+e.properties[r])?JSON.stringify(t.properties[r]||"")===JSON.stringify(e.properties[r]||""):+t.properties[r]==+e.properties[r]});t?n.push(Object.assign(Object.assign({},t),e)):e.geometry&&n.push(e)}),n)):e}},{key:"getFilterFeatures",value:function(t,e){if(!t)return e;for(var r=this.replaceFilterCharacter(t),i=[],n=0;n<e.length;n++){var a=e[n],o=void 0,s=a.properties;try{var r=this.parseCondition(r,Object.keys(s)),c=this.parseConditionFeature(s),u="select * from json where ("+r+")",o=window.jsonsql.query(u,{attributes:c})}catch(t){continue}o&&0<o.length&&i.push(a)}return i}},{key:"replaceFilterCharacter",value:function(t){return t=t.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"getParseSpecialCharacter",value:function(){var r={};return["(",")","","",",",""].forEach(function(t,e){r[t]="$".concat(e)}),r}},{key:"parseSpecialCharacter",value:function(t){var e,r=this.getParseSpecialCharacter();for(e in r)for(var i=r[e],n=new RegExp("\\".concat(e),"g");n.test(t);)t=t.replace(n,i);return t}},{key:"parseCondition",value:function(t,i){var n=this,e=t.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(t){return t}),a=t;return e.forEach(function(e){var t,r=i.find(function(t){return t===e});n.startsWithNumber(e)&&r&&(a=a.replace(r,"$"+r)),r&&(t=n.parseSpecialCharacter(r),a=a.replace(r,t))}),a}},{key:"parseConditionFeature",value:function(t){var e,r={};for(e in t){var i=e;this.startsWithNumber(e)&&(i="$"+e),r[i=this.parseSpecialCharacter(i)]=t[e]}return r}},{key:"startsWithNumber",value:function(t){return/^\d/.test(t)}},{key:"getEchartsLayerOptions",value:function(t,e,r){var e=this.webMapService.getFeatureProperties(e),i=this._createLinesData(t,e),e=this._createPointsData(i,t,e);return this._createOptions(t,i,e,r)}},{key:"getDashStyle",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"array";if(!t)return"array"===r?[]:"";var i,n=e;switch(t){case"solid":i=[];break;case"dot":i=[1,4*n];break;case"dash":i=[4*n,4*n];break;case"dashrailway":i=[8*n,12*n];break;case"dashdot":i=[4*n,4*n,+n,4*n];break;case"longdash":i=[8*n,4*n];break;case"longdashdot":i=[8*n,4*n,1,4*n];break;default:SuperMap.Util.isArray(t)&&(i=t),i=(t=SuperMap.String.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(",")}return i="array"===r?i:i.join(",")}},{key:"getCanvasFromSVG",value:function(t,e,r){var i,n=this,a=document.createElement("canvas");a.id="dataviz-canvas-".concat((new Date).getTime()),a.style.display="none",e.appendChild(a),t?(e=null!=(e=window.canvg)&&e.default?window.canvg.default:o.a,i=a.getContext("2d"),e.from(i,t,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(t){t.start(),n.canvgsV.push(t),300<a.width||300<a.height||r(a)})):r(a)}},{key:"stopCanvg",value:function(){this.canvgsV.forEach(function(t){return t.stop()}),this.canvgsV=[]}},{key:"getRangeStyleGroup",value:function(t,e){var r,i=t.featureType,n=t.style,t=t.themeSetting,a=t.customSettings,o=t.themeField,s=t.segmentCount,c=t.segmentMethod,t=t.colors,u=[],l=(e.forEach(function(t){(r=t.properties)&&((t=r[o])||0===t)&&T()(+t)&&u.push(parseFloat(t))},this),u&&u.length&&SuperMap.ArrayStatistic.getArraySegments(u,c,s));if(l){var h=s;r&&l[0]===l[r.length-1]&&(h=1,l.length=2);for(var p=0;p<l.length;p++){var f=l[p],f=0===p?Math.floor(100*f)/100:Math.ceil(100*f)/100+.1;l[p]=Number(f.toFixed(2))}for(var d=SuperMap.ColorsPickerUtil.getGradientColors(t,h,"RANGE"),y=0;y<h;y++)y in a&&(a[y].segment.start&&(l[y]=a[y].segment.start),a[y].segment.end)&&(l[y+1]=a[y].segment.end);for(var g=[],m=0;m<h;m++){var v=d[m],x=(m in a&&a[m].color&&(v=a[m].color),"LINE"===i?n.strokeColor=v:n.fillColor=v,l[m]),b=l[m+1],S=JSON.parse(JSON.stringify(n));g.push({style:S,color:v,start:x,end:b})}return g}}},{key:"getCustomSettingColors",value:function(e,r){var t=Object.keys(e),i=[];return t.forEach(function(t){i.push("LINE"===r?e[t].strokeColor:e[t].fillColor)}),i}},{key:"getUniqueStyleGroup",value:function(t,e){var r,n=t.featureType,a=t.style,t=t.themeSetting,i=t.colors,o=t.customSettings,s=t.themeField,t=e&&e[0]&&e[0].properties||{},c=(Object.keys(t).forEach(function(t){t.toLocaleUpperCase()===s.toLocaleUpperCase()&&(s=t)}),[]);for(r in e){var u,l=e[r].properties[s],h=!1;for(u in c)if(c[u]===l){h=!0;break}h||c.push(l)}var p=SuperMap.ColorsPickerUtil.getGradientColors(i,c.length),t=this.getCustomSettingColors(o,n).map(function(t){return t&&t.toLowerCase()}),i=SuperMap.ColorsPickerUtil.getGradientColors(i,c.length+Object.keys(o).length).map(function(t){return t.toLowerCase()}),f=W()(i,t),d=[];return c.forEach(function(t,e){var e=p[e],r=Object.assign({},a),i=o[t];"object"===A(i)?r=Object.assign(r,i):("string"==typeof i&&(e=o[t]),i||(e=f.shift()),"LINE"===n?r.strokeColor=e:r.fillColor=e),d.push({color:e,style:r,value:t,themeField:s})},this),d}},{key:"transformFeatures",value:function(i){var n=this;return i&&i.forEach(function(t,e){var r=t.geometry&&t.geometry.coordinates;r&&0!==r.length&&(Object(G.a)(t,function(t){var e=n._unproject(t);t[0]=e[0],t[1]=e[1]}),i[e]=t)}),i}},{key:"_drawTextRectAndGetSize",value:function(t){var o=t.context,e=t.style,r=t.textArray,i=t.lineHeight,n=t.doublePadding,t=t.canvas,a=e.backgroundFill,s=e.maxWidth-n,c=0,u=0,l=[];r.forEach(function(t){var e="",r=!1;u++;for(var i=0;i<t.length;i++){var n=e+t[i],a=o.measureText(n).width;s<a&&0<i||"\n"===t[i]?(e=t[i],u++,r=!0):(e=n,c=a)}l.push(r?s:c)},this);for(var h=0;h<l.length;h++){var p=l[h];if(s<=p){c=s;break}c<p&&(c=p)}return c+=n,r=u*i+n-6,t.width=c,t.height=r,o.fillStyle=a,o.fillRect(0,0,c,r),o.lineWidth=e.borderWidth,o.strokeStyle=e.borderColor,o.strokeRect(0,0,c,r),{width:c,height:r}}},{key:"_drawTextWithCanvas",value:function(t){var h=t.context,e=t.canvas,p=t.style,f=Number(p.font.replace(/[^0-9]/gi,""))+3,t=p.text.split("\r\n"),d=(h.font=p.font,this._drawTextRectAndGetSize({context:h,style:p,textArray:t,lineHeight:f,doublePadding:16,canvas:e})),y=8;t.forEach(function(t,e){0!==e&&(y+=f),h.font=p.font;var r,i=p.textAlign,n=d.width-16;switch(i){case"center":r=n/2;break;case"right":r=n;break;default:r=8}for(var a=t.split(""),o="",s=p.fillColor,c=p.maxWidth-16,u=0;u<a.length;u++){var l=o+a[u];c<h.measureText(l).width&&0<u||"\n"===a[u]?(h.fillStyle=s,h.textAlign=i,h.textBaseline="top",h.fillText(o,r,y),o=a[u],y+=f):o=l}h.fillStyle=s,h.textAlign=i,h.textBaseline="top",h.fillText(o,r,y)},this)}},{key:"handleSvgColor",value:function(t,e){var r=t.fillColor,i=t.fillOpacity,n=t.strokeColor,a=t.strokeOpacity,o=t.strokeWidth,s=e.getContext("2d");t.text?this._drawTextWithCanvas({context:s,canvas:e,style:t}):(r&&(s.fillStyle=Object(X.c)(r,i),s.fill()),(n||o)&&(s.strokeStyle=Object(X.c)(n,a),s.lineWidth=o,s.stroke()))}},{key:"_createLinesData",value:function(t,e){var a,o,s,c,i,n=this,u=[];return e&&e.length&&(a=t.from,o=t.to,"XY_FIELD"===a.type&&a.xField&&a.yField&&o.xField&&o.yField?e.forEach(function(t){var e=t[a.xField],r=t[a.yField],i=t[o.xField],n=t[o.yField];e&&r&&i&&n&&(s=[t[a.xField],t[a.yField]],c=[t[o.xField],t[o.yField]],u.push({coords:[s,c]}))}):"PLACE_FIELD"===a.type&&a.field&&o.field&&(i=f.concat(p),e.forEach(function(t){var e=t[a.field],r=t[o.field];s=i.find(function(t){return n.isMatchAdministrativeName(t.name,e)}),c=i.find(function(t){return n.isMatchAdministrativeName(t.name,r)}),s&&c&&u.push({coords:[s.coord,c.coord]})}))),u}},{key:"_createPointsData",value:function(t,e,n){var a,o,r=[],s=e.labelSetting;return s.show&&t.length&&(a=[],o=[],t.forEach(function(t,e){var t=t.coords,r=t[0],i=t[1],t=n[e][s.from],e=n[e][s.to];a.find(function(t){return t.value[0]===r[0]&&t.value[1]===r[1]})||a.push({name:t,value:r}),o.find(function(t){return t.value[0]===i[0]&&t.value[1]===i[1]})||o.push({name:e,value:i})}),r=a.concat(o)),r}},{key:"_createOptions",value:function(t,e,r,i){e=this._createLineSeries(t,e,i);return{series:r&&r.length?(t=this._createPointSeries(t,r,i),e.concat(t)):e.slice()}}},{key:"_createPointSeries",value:function(t,e,r){var i=t.lineSetting,n=t.animationSetting,t=t.labelSetting,r=[{name:"point-series",coordinateSystem:r,zlevel:2,label:{normal:{show:t.show,position:"right",formatter:"{b}",color:t.color,fontFamily:t.fontFamily}},itemStyle:{normal:{color:i.color||t.color}},data:e}];return n.show?(r[0].type="effectScatter",r[0].rippleEffect={brushType:"stroke"}):r[0].type="scatter",r}},{key:"_createLineSeries",value:function(t,e,r){var i=t.lineSetting,t=t.animationSetting,r=[{name:"line-series",coordinateSystem:r,type:"lines",zlevel:1,effect:{show:t.show,constantSpeed:t.constantSpeed,trailLength:0,symbol:t.symbol,symbolSize:t.symbolSize},lineStyle:{normal:{color:i.color,type:i.type,width:i.width,opacity:i.opacity,curveness:i.curveness}},data:e}];return 1e3<=e.length&&(r[0].large=!0,r[0].largeThreshold=100,r[0].blendMode="lighter"),r}},{key:"_getLayerFeaturesSucceeded",value:function(t,e){switch(t.type){case"feature":this._initOverlayLayer(e,t.features);break;case"restMap":e.layerType="restMap",this._initOverlayLayer(e,t.restMaps);break;case"mvt":e.layerType="mvt",this._initOverlayLayer(e,t);break;case"dataflow":case"noServerId":this._initOverlayLayer(e)}}}])&&x(e.prototype,t),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(t.a),w=e("p5/s");function q(t,e,r){return(e=C(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,C(i.key),i)}}function C(t){t=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===O(t)?t:String(t)}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Z(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=I(r),e=(t=i?(t=I(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var K=function(){var t=c,e=Q;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e);var r,s=Z(c);function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{style:{version:8,sources:{},layers:[]}},i=3<arguments.length?arguments[3]:void 0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){return!0},a=this,o=c;if(a instanceof o)return(a=s.call(this,t,e,r))._cacheLayerId=[],a._layerTimerList=[],"string"==typeof t||"number"==typeof t?a.mapId=t:null!==t&&"object"===O(t)&&(a.webMapInfo=t),a.mapId||r.center||r.zoom||(r.center=[0,0],r.zoom=0),a.centerValid(r.center)&&(a.center=r.center),a.zoom=r.zoom,a.bounds=r.bounds,a.bearing=r.bearing,a.pitch=r.pitch,a.renderWorldCopies=r.renderWorldCopies,a.rasterTileSize=r.rasterTileSize||256,a.layerFilter=n,a.checkSameLayer=e.checkSameLayer,a._legendList={},i?(a.map=i,a._taskID=new Date,a.getMapInfo(a._taskID)):a._initWebMap(),a;throw new TypeError("Cannot call a class as a function")}return t=c,(e=[{key:"resize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=(this.map&&this.map.resize(),this.echartsLayerResize(),window.getComputedStyle(document.getElementById(this.target)));t&&this.map&&this.bounds&&e&&(t=this._getResizedZoom(this.bounds,e))!==this.map.getZoom()&&this.map&&this.map.setZoom(t)}},{key:"setCrs",value:function(t){this.map&&(this.mapOptions.crs=t,this.mapOptions.crs)&&(t.epsgCode?(this.mapOptions.crs=new y.a.CRS(this.mapOptions.crs.epsgCode,this.mapOptions.crs.WKT,this.mapOptions.crs.extent,this.mapOptions.crs.unit),this.map.setCRS(this.mapOptions.crs)):this.map.setCRS(y.a.CRS.get(t)))}},{key:"setCenter",value:function(t){var e,r;this.map&&this.centerValid(t)&&(this.mapOptions.center=t,e=(r=this.map.getCenter()).lng,r=r.lat,t[0]===+e.toFixed(4)&&t[1]===+r.toFixed(4)||this.map.setCenter(t,{from:"setCenter"}))}},{key:"setRenderWorldCopies",value:function(t){this.map&&(this.mapOptions.renderWorldCopies=t,this.map.setRenderWorldCopies(t))}},{key:"setBearing",value:function(t){!this.map||(this.mapOptions.bearing=t)===+this.map.getBearing().toFixed(2)||!t&&0!==t||this.map.setBearing(t)}},{key:"setPitch",value:function(t){!this.map||(this.mapOptions.pitch=t)===+this.map.getPitch().toFixed(2)||!t&&0!==t||this.map.setPitch(t)}},{key:"setStyle",value:function(t){this.map&&((this.mapOptions.style=t)&&this.map.setStyle(t),t)&&t.layers&&0<t.layers.length&&this.triggerEvent("addlayerssucceeded",{map:this.map,mapparams:{},layers:[]})}},{key:"setRasterTileSize",value:function(e){var r,i=this;!this.map||e<=0||(r=this.map.getStyle().sources,Object.keys(r).forEach(function(t){"raster"===r[t].type&&"iserver"===r[t].rasterSource&&i._updateRasterSource(t,{tileSize:e})}))}},{key:"cleanLayers",value:function(){var e=this;this._taskID=null,this._cacheLayerId.forEach(function(t){e.map&&e.map.getLayer(t)&&e.map.removeLayer(t)}),this._cacheLayerId.forEach(function(t){e.map&&e.map.getSource(t)&&e.map.removeSource(t)}),this._cacheLayerId=[]}},{key:"getSourceListModel",get:function(){return this._sourceListModel}},{key:"_initWebMap",value:function(){this.initWebMap()}},{key:"_loadLayers",value:function(t,e){var r=this;this.map?this.map.getCRS().epsgCode===this.baseProjection||this.ignoreBaseProjection?this._handleLayerInfo(t,e):this.triggerEvent("projectionIsNotMatch",{}):(this._createMap(t),this.map.on("load",function(){r._handleLayerInfo(t,e)}))}},{key:"_setCRS",value:function(t,e,r){t=new y.a.CRS(t,e,r,180<r[2]?"meter":"degree");y.a.CRS.set(t)}},{key:"_getMapInfo",value:function(e,r){var i,n,a=this,o=e.projection,t=(this.baseProjection=Object(v.c)(o),Object(v.a)(this.baseProjection));if(t&&(n=t),y.a.CRS.get(this.baseProjection))this._defineProj4(o),i=[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y],this._setCRS(this.baseProjection,n,i),this._loadLayers(e,r);else if(e.baseLayer&&"MAPBOXSTYLE"===e.baseLayer.layerType){t=e.baseLayer.dataSource.url;-1<t.indexOf("/restjsr/")&&!/\/style\.json$/.test(t)&&(t+="/style.json"),this.webMapService.getMapBoxStyle(t).then(function(t){i=t&&t.metadata&&t.metadata.indexbounds?t.metadata.indexbounds:[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y],a._defineProj4(o),a._setCRS(a.baseProjection,n,i),a._loadLayers(e,r)})}else{if(!e.baseLayer||"TILE"!==e.baseLayer.layerType)throw Error(Object(h.a)().t("webmap.crsNotSupport"));this.getEpsgCodeWKT("".concat(e.baseLayer.url,"/prjCoordSys.wkt"),{withoutFormatSuffix:!0,withCredentials:this.webMapService.handleWithCredentials("",e.baseLayer.url,!1)}).then(function(t){n=n||t,a.getBounds("".concat(e.baseLayer.url,".json"),{withoutFormatSuffix:!0,withCredentials:a.webMapService.handleWithCredentials("",e.baseLayer.url,!1)}).then(function(t){i=t&&t.bounds?[t.bounds.leftBottom.x,t.bounds.leftBottom.y,t.bounds.rightTop.x,t.bounds.rightTop.y]:[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y],a._defineProj4(n,o),a._setCRS(a.baseProjection,n,i),a._loadLayers(e,r)})})}}},{key:"_handleLayerInfo",value:function(t,e){var r=this,i=(t=this._setLayerID(t),this._layers=[],this.layerAdded=0,this.expectLayerLen=0,t),n=i.layers,i=i.grid;this._setExpectLayerLen(t),0===this.expectLayerLen&&this._sendMapToUser(0,0),this._shouldLoadBaseLayer(t,this.layerFilter)&&this._initBaseLayer(t,function(){r._addLayerSucceeded()}),n&&0!==n.length&&this._initOverlayLayers(this._layers,e),i&&i.graticule&&this._initGraticuleLayer(i.graticule)}},{key:"_setExpectLayerLen",value:function(t){this._shouldLoadBaseLayer(t,this.layerFilter)&&this.expectLayerLen++;t=t.layers;t&&0<t.length&&("function"==typeof this.layerFilter&&(t=t.filter(this.layerFilter)),this.expectLayerLen+=t.length,this._layers=t)}},{key:"_shouldLoadBaseLayer",value:function(t,e){t=t.baseLayer;return!!t&&("function"!=typeof e||e(t))}},{key:"_createMap",value:function(t){var e,r,i,n,a,o,s,c,u=this;t?(e=this._getLabelFontFamily(t),r=this._getMapCenter(t),i=t.level||0,n=(c=this.mapOptions).bounds,s=c.minZoom,c=c.maxZoom,a=this.mapOptions.interactive,isNaN(s)&&(s=t.minScale?this._transformScaleToZoom(t.minScale,y.a.CRS.get(this.baseProjection)):0),isNaN(c)&&(c=t.maxScale?this._transformScaleToZoom(t.maxScale,y.a.CRS.get(this.baseProjection)):22),t.visibleExtent&&4===t.visibleExtent.length&&!n&&(n=[this._unproject([t.visibleExtent[0],t.visibleExtent[1]]),this._unproject([t.visibleExtent[2],t.visibleExtent[3]])]),c<s&&(s=(o=[c,s])[0],c=o[1]),n||(i+=t.minScale&&t.maxScale?Math.min(this._transformScaleToZoom(t.minScale,y.a.CRS.get(this.baseProjection)),this._transformScaleToZoom(t.maxScale,y.a.CRS.get(this.baseProjection))):+Math.log2(this._getResolution(y.a.CRS.get(this.baseProjection).getExtent())/this._getResolution(t.extent)).toFixed(2)),this.map=new y.a.Map(Object.assign(Object.assign({},this.mapOptions),{container:this.target,center:this.center||r,zoom:this.zoom||i,minZoom:s,maxZoom:c,bearing:this.bearing||0,pitch:this.pitch||0,bounds:n,interactive:void 0===a||a,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:e||"",renderWorldCopies:this.renderWorldCopies||!1,transformRequest:function(t,e){return"Tile"===e?(u.isSuperMapOnline&&0===t.indexOf("http://")&&(t="https://www.supermapol.com/apps/viewer/getUrlResource.png?url=".concat(encodeURIComponent(t))),u.webMapService.isIportalResourceUrl(t)&&(t=u.webMapService.handleParentRes(t)),e=u.webMapService.handleProxy("image"),{url:t,credentials:u.webMapService.handleWithCredentials(e,t,!1)?"include":"omit"}):{url:t}},fadeDuration:0})),this.triggerEvent("mapinitialized",{map:this.map})):(this.mapOptions.container=this.target,this.mapOptions.crs&&this.mapOptions.crs.epsgCode&&(this.mapOptions.crs=new y.a.CRS(this.mapOptions.crs.epsgCode,this.mapOptions.crs.WKT,this.mapOptions.crs.extent,this.mapOptions.crs.unit)),this.mapOptions.transformRequest||(this.mapOptions.transformRequest=function(t,e){var r="";return{url:(r="string"==typeof u.proxy?u.webMapService.handleProxy("Tile"===e?"image":"data"):r)?"".concat(r).concat(encodeURIComponent(t)):t,credentials:u.webMapService.handleWithCredentials(r,t,u.withCredentials||!1)?"include":"omit"}}),setTimeout(function(){var t=0;Object.prototype.hasOwnProperty.call(u.mapOptions,"fadeDuration")&&(t=u.mapOptions.fadeDuration),u.map=new y.a.Map(Object.assign(Object.assign({},u.mapOptions),{fadeDuration:t})),u.map.on("load",function(){u.triggerEvent("addlayerssucceeded",{map:u.map,mapparams:{},layers:[]})})},0))}},{key:"_createMVTBaseLayer",value:function(t,e){var r=this,t=t.dataSource.url;-1<t.indexOf("/restjsr/")&&!/\/style\.json$/.test(t)&&(t+="/style.json"),this.webMapService.getMapBoxStyle(t).then(function(t){r.map.addStyle(t),e&&e()},function(t){throw e&&e(),new Error(t)}).catch(function(t){r.triggerEvent("getmapinfofailed",{error:t})})}},{key:"_initBaseLayer",value:function(t,e){var r,i=t.baseLayer||t,n=this.getBaseLayerType(i),a=this.getMapurls();switch(this.baseLayerProxy=this.webMapService.handleProxy("image"),n){case"TIANDITU":this.baseLayerProxy=null,this._createTiandituLayer(t,e);break;case"BING":this.baseLayerProxy=null,this._createBingLayer(i.layerID||i.name,i,e);break;case"WMS":this._createWMSLayer(i,e);break;case"WMTS":this._createWMTSLayer(i,e);break;case"TILE":this._createDynamicTiledLayer(i,e);break;case"CLOUD":case"XYZ":r=a[i.layerType].replace("{googleMapsLanguage}",this.googleMapsLanguage).replace("{googleMapsAPIKey}",this.googleMapsAPIKey),this._createXYZLayer(i,r,e);break;case"BAIDU":this.triggerEvent("notsupportbaidumap",{}),e&&e();break;case"MAPBOXSTYLE":this._createMVTBaseLayer(i,e)}}},{key:"_initOverlayLayers",value:function(t,n){var a=this;0<this.expectLayerLen&&t.forEach(function(t){var e,r,i=a.webMapService.getDatasourceType(t);"SAMPLE_DATA"===i?(a._addLayerSucceeded(),a.triggerEvent("getlayerdatasourcefailed",{error:"SAMPLE DATA is not supported",layer:t,map:a.map})):(t.visibleScale&&(e=(r=t.visibleScale).minScale,r=r.maxScale,t.minzoom=Math.max(a._transformScaleToZoom(e),0),t.maxzoom=Math.min(24,a._transformScaleToZoom(r)+1e-7)),"tile"===i?(a._initBaseLayer(t,function(){a._addLayerSucceeded()}),t.autoUpdateTime&&a._layerTimerList.push(setInterval(function(){a._initBaseLayer(t)},t.autoUpdateTime))):(a.getLayerFeatures(t,n,i),t.autoUpdateTime&&a._layerTimerList.push(setInterval(function(){a.getLayerFeatures(t,n,i)},t.autoUpdateTime))))},this)}},{key:"_initOverlayLayer",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0,i=t.layerID,n=t.layerType,a=t.visible,o=t.style,s=t.featureType,c=t.labelStyle,u=t.projection;t.visible=a?"visible":"none",e=this.mergeFeatures(i,e,r),"restMap"===n?this._createRestMapLayer(e,t):"mvt"===n?this._createMvtLayer(e.info,t,e.featureType):((e=e&&e[0]&&e[0].geometry&&"Polygon"===e[0].geometry.type?Object(l.a)(e):e)&&u&&(u!==this.baseProjection||"EPSG:3857"===u||"EPSG:-1000"===u)&&t.dataSource&&"REST_DATA"!==t.dataSource.type&&(this._unprojectProjection=this._defineProj4(u),e=this.transformFeatures(e)),e=this.handleLayerFeatures(e,t),"VECTOR"===n?"POINT"===s?"SYMBOL_POINT"===o.type?this._createSymbolLayer(t,e):this._createGraphicLayer(t,e):(this._createVectorLayer(t,e),this._addLayerSucceeded()):"UNIQUE"===n?this._createUniqueLayer(t,e):"RANGE"===n?this._createRangeLayer(t,e):"HEAT"===n?this._createHeatLayer(t,e):"MARKER"===n?this._createMarkerLayer(t,e):"MIGRATION"===n?this._createMigrationLayer(t,e):"RANK_SYMBOL"===n?this._createRankSymbolLayer(t,e):"DATAFLOW_POINT_TRACK"!==n&&"DATAFLOW_HEAT"!==n||this._createDataflowLayer(t),c&&c.labelField&&"DATAFLOW_POINT_TRACK"!==n&&this._addLabelLayer(t,e,!1))}},{key:"_initGraticuleLayer",value:function(t){var e=this._createGraticuleOptions(t),e=new y.a.supermap.GraticuleLayer(e);this.map.addLayer(e),this._setGraticuleDash(t.lineDash,e)}},{key:"_createGraticuleOptions",value:function(t){var e=t.extent,r=t.lonLabelStyle,i=t.latLabelStyle,n=t.strokeColor,a=t.lineDash,o=t.strokeWidth,t=t.interval,n={lineColor:n,lindDasharray:a,lineWidth:o},r={textFont:r.fontFamily.split(","),textSize:r.fontSize,textAnchor:i.textBaseline,textColor:r.fill,textHaloColor:r.outlineColor,textHaloWidth:r.outlineWidth},i={textFont:i.fontFamily.split(","),textSize:i.fontSize,textAnchor:i.textBaseline,textColor:i.fill,textHaloColor:i.outlineColor,textHaloWidth:i.outlineWidth},e=e||this.map.getCRS().extent;return{minZoom:1,strokeStyle:n,extent:[this._unproject([e[0],e[1]]),this._unproject([e[2],e[3]])],interval:t&&t[0],lngLabelStyle:r,latLabelStyle:i}}},{key:"_setGraticuleDash",value:function(t,e){var r=this;this.map.on("zoomend",function(){r.map.getZoom()<3?e.setStrokeStyle({lindDasharray:[.1,3]}):e.setStrokeStyle({lindDasharray:t})})}},{key:"_createTiandituLayer",value:function(t,e){var r=this._getTiandituUrl(t),t=t.baseLayer,i=t.labelLayerVisible,n=t.name,t=t.visible,i=Boolean(i),a=r.labelUrl,r=r.tiandituUrl;this._addBaselayer(r,n,t),i&&this._addBaselayer(a,"".concat(n,"-label"),t),e&&e()}},{key:"_createWMTSLayer",value:function(i,n){var a=this;this.webMapService.getWmtsInfo(i,this.map.getCRS().epsgCode).then(function(t){var e,r=i.layerID||i.name;t.isMatched&&(e=a._getWMTSUrl(Object.assign({},i,t)),a._addBaselayer([e],r,i.visible,t.matchMinZoom,t.matchMaxZoom,!1,t.bounds),n)&&n()},function(t){throw n&&n(),new Error(t)}).catch(function(t){a.triggerEvent("getmapinfofailed",{error:t})})}},{key:"_createBingLayer",value:function(t,e,r){this._addBaselayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],t,e.visible),r&&r()}},{key:"_createXYZLayer",value:function(t,e,r){var i=[];if("OSM"===t.layerType){for(var n=e.match(/\w\-\w/g)[0],a=n[0],n=n[2],o="",s=97;s<123;s++)o+=String.fromCharCode(s);for(var c=o.split(""),a=c.indexOf(a),n=c.indexOf(n),u=c.slice(a,n+1),l=0;l<u.length;l++){var h=e.replace(/{\w\-\w}/g,u[l]);i.push(h)}}else if("GOOGLE_CN"===t.layerType)for(var c=e.match(/\d\-\d/g)[0],a=parseInt(c[0]),p=parseInt(c[2]),f=a;f<=p;f++){var d=e.replace(/{\d\-\d}/g,f.toString());i.push(d)}else i=[e];n=t.layerID||t.name;this._addBaselayer(i,n,t.visible),r&&r()}},{key:"_createDynamicTiledLayer",value:function(t,e){var r=t.url,i=t.layerID||t.name,n=t.minzoom,a=t.maxzoom;this._addBaselayer([r],i,t.visible,n,a,!0),e&&e()}},{key:"_createWMSLayer",value:function(r,i){var n=this;this.webMapService.getWmsInfo(r).then(function(t){var e=r.layerID||r.name;t&&(t=n._getWMSUrl(r,t.version),n._addBaselayer([t],e,r.visible),i)&&i()},function(t){throw i&&i(),new Error(t)}).catch(function(t){n.triggerEvent("getmapinfofailed",{error:t})})}},{key:"_createVectorLayer",value:function(t,e){var r=this,i=t.featureType,n=t.layerID,a=t.minzoom,o=t.maxzoom,s=t.style,c=t.visible,t=this.map.getSource(n),e={type:"FeatureCollection",features:e},t=(t?t.setData(e):this.map.addSource(n,{type:"geojson",data:e}),Array.isArray(s)?s:[s]);2===t.length&&("solid"===t[0].lineDash&&"solid"===t[1].lineDash&&(t[0].strokeWidth=t[1].strokeWidth,t[1].strokeWidth=t[1].strokeWidth-2),"solid"===t[0].lineDash)&&"dash"===t[1].lineDash&&(t[0].strokeWidth=t[1].strokeWidth,t[1].strokeWidth=.5*t[1].strokeWidth,t[1].lineDash="dashrailway"),t.forEach(function(t,e){t={style:r._transformStyleToMapBoxGl(t,i),layout:{visibility:c}},e=0===e?n:"".concat(n,"-additional-").concat(e);r._addOverlayToMap(i,n,e,t,a,o)}),"POLYGON"===i&&s.strokeColor&&this._addStrokeLineForPoly(s,n,n+"-strokeLine",c,a,o)}},{key:"_getWMSUrl",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"1.1.1",r=t.url,t={service:"WMS",request:"GetMap",layers:null!==t.layers&&"object"===O(t.layers)?t.layers.join(","):t.layers||"0",styles:"",format:"image/png",transparent:"true",version:e,width:256,height:256};return"1.3.0"===e?(t.bbox="EPSG:4326"===this.baseProjection?"{bbox-wms-1.3.0}":"{bbox-epsg-3857}",t.crs=this.baseProjection):(t.bbox="{bbox-epsg-3857}",t.srs=this.baseProjection),SuperMap.Util.urlAppend(r,this._getParamString(t,r))}},{key:"_setLayerID",value:function(t){var n=this,a={},o=t.baseLayer,e=t.layers,e=void 0===e?[]:e,s=(this.checkSameLayer||(r=this._generateUniqueLayerId(o.name,0),o.name=r.newId),e.map(function(t){return t.name})),r=e.map(function(t,e){t.name in a||(a[t.name]=o.name===t.name?1:0);var r=s.indexOf(t.name),i=s.lastIndexOf(t.name),r=(r<e&&e<=i&&(a[t.name]=a[t.name]+1),a[t.name]?"".concat(t.name,"-").concat(a[t.name]):t.name);return n.checkSameLayer&&"raster"===t.layerType||(i=(e=n._generateUniqueLayerId(r,a[t.name])).newId,e=e.newIndex,a[t.name]=e,r=i),Object.assign(t,{layerID:r})});return t.layers=r,t.baseLayer=o,t}},{key:"_generateUniqueLayerId",value:function(t,e){return this.map.getLayer(t)?(e++,t=t.match(/-\d+&/gi)?t.replace(/\d+$/gi,e):"".concat(t,"-").concat(e),this._generateUniqueLayerId(t,e)):{newId:t,newIndex:e}}},{key:"_getResizedZoom",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:512,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:360,n=e.width,e=e.height,a=Math.abs(t.getEast()-t.getWest()),t=Math.abs(this._getBoundsRadian(t.getSouth())-this._getBoundsRadian(t.getNorth())),a=+Math.log2(i/(a/parseInt(n)*r)).toFixed(2),n=+Math.log2(i/(t/parseInt(e)*r)).toFixed(2);return a<=n?a:n}},{key:"_getBoundsRadian",value:function(t){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360))}},{key:"_createRestMapLayer",value:function(t,e){var r=this;t.forEach(function(t){e=r.getRestMapLayerInfo(t,e),r._initBaseLayer(e)}),this._addLayerSucceeded()}},{key:"_addLayerSucceeded",value:function(){this.layerAdded++,this._sendMapToUser(this.layerAdded,this.expectLayerLen)}},{key:"_createDataflowLayer",value:function(t){var e=new y.a.supermap.DataFlowService(t.wsUrl).initSubscribe();this._handleDataflowFeaturesCallback=this._handleDataflowFeatures.bind(this,t),this._initDataflowLayerCallback=this._initDataflowLayer.bind(this,t),e.on("subscribesucceeded",this._initDataflowLayerCallback),e.on("messageSucceeded",this._handleDataflowFeaturesCallback),this._dataflowService=e}},{key:"_initDataflowLayer",value:function(){this._addLayerSucceeded()}},{key:"_handleDataflowFeatures",value:function(t,e){var r,i,e=[JSON.parse(e.data)];this.triggerEvent("dataflowfeatureupdated",{features:e,identifyField:t.identifyField,layerID:t.layerID}),"EPSG:3857"===t.projection&&(e=this.transformFeatures(e)),(!t.filterCondition||(i=this.replaceFilterCharacter(t.filterCondition),r=e[0].properties||{},i=this.parseCondition(i,Object.keys(r)),r=this.parseConditionFeature(r),(i=window.jsonsql.query("select * from json where ("+i+")",{attributes:r}))&&0<i.length))&&this._addDataflowLayer(t,e[0])}},{key:"_getDataFlowRotateStyle",value:function(t,r,i){var n=["match",["get",i]];return t.forEach(function(t){var e=void 0!==r&&""!==r&&"None"!==r?t.properties[r]:0;if(360<e||e<0)return null;n.push(t.properties[i],parseInt(e))}),n.push(0),n}},{key:"_addDataflowLayer",value:function(t,e){var r,i,n=t.layerID;"DATAFLOW_HEAT"===t.layerType?this.map.getSource(n)?this._updateDataFlowFeature(n,e,t):this._createHeatLayer(t,[e],!1):(r=t.pointStyle,t.style=r,this.map.getSource(n)?this._updateDataFlowFeature(n,e,t,"point"):(i=this._getDataFlowRotateStyle([e],t.directionField,t.identifyField),-1!==["BASIC_POINT","SVG_POINT","IMAGE_POINT"].indexOf(r.type)?this._createGraphicLayer(t,[e],null,i,!1):this._createSymbolLayer(t,[e],null,i,!1)),t.labelStyle&&t.visible&&(this.map.getSource(n+"-label")?this._updateDataFlowFeature(n+"-label",e,t):this._addLabelLayer(t,[e],!0)),t.lineStyle&&t.visible&&(this.map.getSource(n+"-line")?this._updateDataFlowFeature(n+"-line",e,t,"line"):(r=e.geometry.coordinates,i={type:"Feature",properties:e.properties,geometry:{type:"LineString",coordinates:[r]}},this._createVectorLayer({style:t.lineStyle,featureType:"LINE",visible:"visible",layerID:n+"-line"},[i]))))}},{key:"_updateDataFlowFeature",value:function(t,r,e,i){var n=e.identifyField,a=e.maxPointCount,o=e.directionField,s=u()(this.map.getSource(t)._data.features),c=!1;s.map(function(t,e){t.properties[n]===r.properties[n]&&(c=!0,"line"===i?((t=t.geometry.coordinates).push(r.geometry.coordinates),a&&t.length>a&&t.splice(0,t.length-a),s[e].geometry.coordinates=t):s[e]=r)}),c||("line"===i?s.push({type:"Feature",properties:r.properties,geometry:{type:"LineString",coordinates:[r.geometry.coordinates]}}):s.push(r)),this.map.getSource(t).setData({type:"FeatureCollection",features:s}),"point"===i&&(e=e.pointStyle.type,o=this._getDataFlowRotateStyle(s,o,n),-1!==["SVG_POINT","IMAGE_POINT"].indexOf(e)?this.map.setLayoutProperty(t,"icon-rotate",o):"SYMBOL_POINT"===e&&this.map.setLayoutProperty(t,"text-rotate",o))}},{key:"_createMigrationLayer",value:function(t,e){window.echarts=n.a;t=this.getEchartsLayerOptions(t,e,"GLMap"),t.GLMap={roam:!0},e=new a.a(this.map);e.chart.setOption(t),this.echartslayer.push(e),this._addLayerSucceeded()}},{key:"_createRankSymbolLayer",value:function(t,e){for(var r,i=t.minzoom,n=t.maxzoom,a=t.themeSetting.themeField,o=t.themeSetting.colors,s=t.style,c=t.featureType,u=this.createRankStyleSource(t,e).styleGroups,l=(e=this.getFilterFeatures(t.filterCondition,e),["match",["get","index"]]),h=["match",["get","index"]],p=0;p<e.length;p++){var f=e[p],d=parseFloat(f.properties[a]);if(u)for(var y=0;y<u.length;y++)if(u[y].start<=d&&d<u[y].end){var g="SYMBOL_POINT"===s.type||"IMAGE_POINT"===s.type?"SYMBOL_POINT"===s.type?2*u[y].radius:2*Number.parseFloat((u[y].radius/s.imageInfo.size.h).toFixed(2)):u[y].radius;l.push(f.properties.index,g),h.push(f.properties.index,u[y].color);break}}l.push(1),h.push("rgba(0, 0, 0, 0)"),this._initLegendConfigInfo(t,u),o&&0<o.length&&(s.fillColor=h),"SYMBOL_POINT"===s.type?this._createSymbolLayer(t,e,l):-1!==["SVG_POINT","IMAGE_POINT"].indexOf(s.type)?this._createGraphicLayer(t,e,l):(o={type:"geojson",data:{type:"FeatureCollection",features:e}},(r={layout:{visibility:t.visible}}).style=this._transformStyleToMapBoxGl(t.style,c,l,"circle-radius"),t=t.layerID,this._addOverlayToMap(c,o,t,r,i,n),this._addLayerSucceeded())}},{key:"_addTextBackgroundImage",value:function(t){if(!t[3])return"";for(var e=new Uint8Array(1600),r=0;r<20;r++)for(var i=0;i<20;i++){var n=4*(20*i+r);e[0+n]=t[0],e[1+n]=t[1],e[2+n]=t[2],e[3+n]=255*t[3]}var a="text-background-".concat(t.join("-"));return this.map.hasImage(a)||this.map.addImage(a,{width:20,height:20,data:e},{stretchX:[[0,20]],stretchY:[[0,20]],content:[0,0,20,20]}),a}},{key:"_addLabelLayer",value:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=t.labelStyle,n=i.backgroundFill,a=i.fontFamily,o=t.minzoom,s=t.maxzoom,c=parseFloat(i.fontSize||14),u="",n=("line"!==i.placement&&(u=this._addTextBackgroundImage(n)),n="rgba(".concat(n.join(","),")"),"rgba(255,255,255,0)"),l=(i.outlineColor&&0<i.outlineWidth&&(n=i.outlineColor),(i.outlineWidth||0)/2),h=i.textAlign||"center",p=(i.textBaseline&&"middle"!==i.textBaseline&&(h="".concat(i.textBaseline).concat("center"===h?"":"-".concat(h))),"POINT"===t.featureType?[i.offsetX/c||0,i.offsetY/c||0]:[0,0]),c={"text-field":"{".concat(i.labelField,"}"),"text-size":c,"text-offset":p,"text-font":a?[a]:["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line"===i.placement?"POLYGON"===t.featureType?"line":"line-center":"point","text-max-angle":"POLYGON"===t.featureType?40:30,"symbol-spacing":"POLYGON"===t.featureType?200:50,"text-anchor":h,"text-line-height":1.2,visibility:t.visible};u&&Object.assign(c,{"icon-image":u,"icon-allow-overlap":!0,"icon-text-fit":"both","icon-text-fit-padding":[2,4,2,4]}),this._addLayer({id:"".concat(t.layerID,"-label"),type:"symbol",source:this.map.getSource(t.layerID)&&!r?t.layerID:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:{"text-color":i.fill,"text-halo-color":n,"text-halo-width":l},layout:c,minzoom:o||0,maxzoom:s||22})}},{key:"_createSymbolLayer",value:function(t,e,r,i){var n=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],a=5<arguments.length?arguments[5]:void 0,o=(document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map"),t.layerID),s=t.minzoom,c=t.maxzoom,u=t.style,l=u.unicode,l=String.fromCharCode(parseInt(l.replace(/^&#x/,""),16)),r=r||(Array.isArray(u.fontSize)?u.fontSize:u.fontSize&&parseFloat(u.fontSize)||12),h=Array.isArray(u.rotation)?u.rotation:180*(u.rotation||0)/Math.PI,l=(this.map.getSource(o)||this.map.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),{id:o,type:"symbol",source:o,paint:{"text-color":Array.isArray(u.fillColor)?u.fillColor:Object(X.c)(u.fillColor,u.fillOpacity),"text-halo-color":Array.isArray(u.strokeColor)?u.strokeColor:Object(X.c)(u.strokeColor||"rgba(0,0,0,0)",u.strokeOpacity),"text-halo-width":u.strokeWidth||0},layout:{"text-field":l,"text-size":r,"text-font":["supermapol-icons"],"text-rotate":i||h||0,"text-offset":Array.isArray(u.offsetX)?u.offsetX:[u.offsetX/2||0,u.offsetY/2||0],"text-allow-overlap":!0,visibility:t.visible},minzoom:s||0,maxzoom:c||22});a&&(l.filter=a),this._addLayer(l),this.map.getSource(o).setData({type:"FeatureCollection",features:e}),n&&this._addLayerSucceeded()}},{key:"_createGraphicLayer",value:function(i,t,n,a){var o,s=this,c=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],u=5<arguments.length?arguments[5]:void 0,l=i.layerID,h=i.minzoom,p=i.maxzoom,f=i.style,t={type:"geojson",data:{type:"FeatureCollection",features:t}},r=(this.map.getSource(l)||this.map.addSource(l,t),"imageIcon-".concat(l));"IMAGE_POINT"===f.type?(t=f.imageInfo,this.map.loadImage(t.url,function(t,e){t?console.error(t):(t=2*Number.parseFloat((f.radius/e.width).toFixed(2)),s.map.hasImage(r)||s.map.addImage(r,e),t={id:l,type:"symbol",source:l,layout:{"icon-image":r,"icon-anchor":"bottom-right","icon-size":n||t,"icon-allow-overlap":!0,visibility:i.visible,"icon-offset":[f.offsetX*e.width||0,f.offsetY*e.height||0],"icon-rotate":a||180*(i.style.rotation||0)/Math.PI},minzoom:h||0,maxzoom:p||22},u&&(t.filter=u),s._addLayer(t),c&&s._addLayerSucceeded())})):"SVG_POINT"===f.type?(o=f.url,this._svgDiv||(this._svgDiv=document.createElement("div"),document.body.appendChild(this._svgDiv)),this.getCanvasFromSVG(o,this._svgDiv,function(r){var t=r.toDataURL("img/png");t&&s.map.loadImage(t,function(t,e){t&&console.log(t);t=2*Number.parseFloat((f.radius/r.width).toFixed(2)),n&&Array.isArray(n)&&(n=n.map(function(t,e){return"number"==typeof t&&e%2==1?t/r.width*2:t})),s.map.hasImage(o)||s.map.addImage(o,e,{sdf:!0}),e={id:l,type:"symbol",source:l,layout:{"icon-image":o,"icon-size":n||t,"icon-anchor":"bottom-right",visibility:i.visible,"icon-offset":[f.offsetX*r.width||0,f.offsetY*r.height||0],"icon-allow-overlap":!0,"icon-rotate":a||180*(i.style.rotation||0)/Math.PI},paint:{"icon-color":f.fillColor},minzoom:h||0,maxzoom:p||22};u&&(e.filter=u),s._addLayer(e),c&&s._addLayerSucceeded()})})):(t={style:this._transformStyleToMapBoxGl(f,i.featureType),layout:{visibility:i.visible}},this._addOverlayToMap("POINT",l,l,t,h,p),c&&this._addLayerSucceeded())}},{key:"_createUniqueLayer",value:function(f,t){var e,r,i,d=this,a={unicode:function(t){t=t.unicode;return String.fromCharCode(parseInt(t.replace(/^&#x/,""),16))},fontSize:function(t){t=t.fontSize;return t?parseFloat(t):12},rotation:function(t){return 180*(t.rotation||0)/Math.PI},fillColor:function(t){var e=t.fillColor,t=t.fillOpacity;return Object(X.c)(e,t)},strokeColor:function(t){var e=t.strokeColor,t=t.strokeOpacity;return Object(X.c)(e||"rgba(0,0,0,0)",t)},strokeWidth:function(t){return t.strokeWidth||0},offsetX:function(t){return[t.offsetX/2||0,t.offsetY/2||0]}},j={unicode:"",fontSize:12,rotation:0,strokeColor:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",strokeWidth:0,offsetX:[0,0]},n=this.getUniqueStyleGroup(f,t),y=(t=this.getFilterFeatures(f.filterCondition,t),f.layerID),g=f.minzoom,m=f.maxzoom,o=f.style,F=n[0].themeField,s=f.featureType,c=f.style,v={},u={};for(e in n.forEach(function(t){u[t.value]=t}),t.forEach(function(t){var e=t.properties,t=u[e[F]];if(t){var r,i,n=t.style;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i=n[r])!==c[r]&&(v[r]||(v[r]=["match",["get","index"]]),v[r].push(e.index,a[r]?a[r](n):i))}}),v)Object.prototype.hasOwnProperty.call(v,e)&&(r=c[e]||j[e],i=a[e],v[e].push(void 0===r?null:i&&i(q({},e,r))||r));this._initLegendConfigInfo(f,n);function l(t,e,r,i,n,a,o){i={style:d._transformStyleToMapBoxGl(Object.assign({},i),t),layout:{visibility:h}},d._addOverlayToMap(t,e,r,i,n,a,o)}var n={type:"geojson",data:{type:"FeatureCollection",features:t}},x=y,h=(this.map.getSource(x)?this.map.getSource(x).setData(n.data):this.map.addSource(x,n),f.visible);if(-1!==["POLYGON","LINE"].indexOf(s)){var p=v.lineDash,b=["all"],n=!1,S="";if(p&&1<p.length){delete v.lineDash;for(var D=p[1],V="POLYGON"===s?y+"-strokeLine":y,w=2;w<p.length-1;w+=2){var B=["==",D,p[w]],U=(b.push(["!=",D,p[w]]),"".concat(V,"-additional-linedasharray-").concat(w/2)),S=S||U;l("LINE",x,U,Object.assign(Object.assign(Object.assign({},o),v),{lineDash:p[w+1]}),g,m,B)}1<b.length&&l("LINE",x,V,Object.assign(Object.assign(Object.assign({},o),v),{lineDash:p[p.length]}),g,m,b),n=!0}"LINE"!==s||n||l("LINE",x,y,Object.assign(Object.assign({},o),v),g,m,b),"POLYGON"===s&&(l("POLYGON",x,y,Object.assign(Object.assign({},o),v),g,m),S&&this.map.moveLayer(y,S),n||(l("LINE",x,y+"-strokeLine",Object.assign(Object.assign({},o),v),g,m,b),S&&this.map.moveLayer(y+"-strokeLine",S)))}else{var _=["all"],s=v.unicode;if(s){for(var O=v.className||[],n=(delete v.unicode,delete v.classname,"".concat(y,"-additional-symbol")),T=["any"],P=2;P<O.length-1;P+=2)_.push(["!=",O[1],O[P]]),T.push(["==",O[1],O[P]]);document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var C=Object.assign(Object.assign({},o),v),n={id:n,type:"symbol",source:x,paint:{"text-color":C.fillColor,"text-halo-color":C.strokeColor,"text-halo-width":C.strokeWidth},layout:{"text-field":s,"text-size":"string"==typeof C.fontSize?parseInt(C.fontSize):C.fontSize||12,"text-font":["supermapol-icons"],"text-rotate":C.rotation||0,"text-offset":Array.isArray(C.offsetX)?C.offsetX:[C.offsetX/2||0,C.offsetY/2||0],"text-allow-overlap":!0,visibility:h},minzoom:g||0,maxzoom:m||22};1<T.length&&(n.filter=T),this._addLayer(n)}var M=v.imageInfo||[],L=v.url||[];if(0<M.length||0<L.length){delete v.imageInfo,delete v.url;for(var E=[],A=0<M.length?[M[0],M[1]]:[],k=0<L.length?[L[0],L[1]]:[],z=["any"],G=["any"],I=2;I<M.length-1;I+=2){var W=M[I+1];E.push(W.url),A.push(M[I]),A.push(W.url),_.push(["!=",M[1],M[I]]),z.push(["==",M[1],M[I]])}for(var N=2;N<L.length-1;N+=2){var Y=L[N+1];E.push(Y),k.push(L[N]),k.push(Y),_.push(["!=",L[1],L[N]]),G.push(["==",L[1],L[N]])}A.push(""),k.push("");var H=[],R=(E.forEach(function(t){var i;H.push((i=t,new Promise(function(r){i.indexOf("svg")<0?d.map.loadImage(i,function(t,e){t?(console.log(t),r(t)):(d.map.hasImage(i)||d.map.addImage(i,e),r({src:i,image:e}))}):(d._svgDiv||(d._svgDiv=document.createElement("div"),document.body.appendChild(d._svgDiv)),d.getCanvasFromSVG(i,d._svgDiv,function(t){d.handleSvgColor(c,t),d.map.loadImage(t.toDataURL("img/png"),function(t,e){t?(console.log(t),r(t)):(d.map.hasImage(i)||d.map.addImage(i,e,{sdf:!0}),r({src:i,image:e}))})}))})))}),Object.assign(Object.assign({},o),v));Promise.all(H).then(function(t){for(var e={},r={},i=v.radius||[],n=2;n<i.length-1;n+=2)r[i[n]]=i[n+1];if(t.forEach(function(t){t&&t.src&&(e[t.src]=t.image.width)}),1<A.length){for(var a=["match",["get","index"]],o=2;o<A.length-1;o+=2){var s=A[o],c=A[o+1],c=2*Number.parseFloat(((r[s]||8)/e[c]).toFixed(2));a.push(s),a.push(c)}a.push(1),d._addLayer({id:"".concat(y,"-additional-image"),type:"symbol",source:x,layout:{"icon-image":A,"icon-anchor":"bottom-right","icon-size":a,"icon-allow-overlap":!0,visibility:f.visible,"icon-offset":R.offsetX||[0,0],"icon-rotate":R.rotation||0},minzoom:g||0,maxzoom:m||22,filter:z})}if(1<k.length){for(var u=["match",["get","index"]],l=2;l<k.length-1;l+=2){var h=k[l],p=k[l+1],p=2*Number.parseFloat(((r[h]||8)/e[p]).toFixed(2));u.push(h),u.push(p)}u.push(1),d._addLayer({id:"".concat(y,"-additional-svg"),type:"symbol",source:x,layout:{"icon-image":k,"icon-anchor":"bottom-right","icon-size":1,"icon-allow-overlap":!0,visibility:f.visible,"icon-offset":R.offsetX||[0,0],"icon-rotate":R.rotation||0},paint:{"icon-color":R.fillColor},minzoom:g||0,maxzoom:m||22,filter:G})}})}"SYMBOL_POINT"===o.type?((s=Object.assign({},f)).style=Object.assign(Object.assign(Object.assign({},o),v),{type:o.type}),this._createSymbolLayer(s,t,"","",!1,1<_.length?_:void 0)):"IMAGE_POINT"===o.type||"SVG_POINT"===o.type?((C=Object.assign({},f)).style=Object.assign(Object.assign(Object.assign({},o),v),{type:o.type}),this._createGraphicLayer(C,t,"","",!1,1<_.length?_:void 0)):l("POINT",x,y,Object.assign(Object.assign({},o),v),g,m,1<_.length?_:void 0)}this._addLayerSucceeded()}},{key:"_getWMTSUrl",value:function(t){var e;return"REST"===t.requestEncoding&&t.restResourceURL?t.restResourceURL.replace("{Style}",t.style||"").replace("{TileMatrixSet}",t.tileMatrixSet).replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{TileMatrix}","{z}"):(e={service:"WMTS",request:"GetTile",version:"1.0.0",style:t.style||"",layer:t.layer,tilematrixSet:t.tileMatrixSet,format:"image/png",tilematrix:"{z}",tilerow:"{y}",tilecol:"{x}"},SuperMap.Util.urlAppend(t.kvpResourceUrl,this._getParamString(e,t.kvpResourceUrl)))}},{key:"_createMarkerLayer",value:function(c,u){var t,l=this,h=c.minzoom,p=c.maxzoom,f=c.layerID,i={},e=((u=u||[]).forEach(function(t,e){var r=t.dv_v5_markerStyle,t=t.geometry.type.toUpperCase(),e=("POINT"===t&&r.text&&(t="TEXT"),0===e?f:f+"-"+t+"-"+e);"POINT"===t&&r.src&&-1===r.src.indexOf("http://")&&-1===r.src.indexOf("https://")&&(r.src=l.serverUrl+r.src),i[e]||(i[e]={src:r.src,defaultStyle:r})}),[]);for(t in i)e.push(function(n,t){var a=t.src,e=t.defaultStyle;return new Promise(function(i){a?a.indexOf("svg")<0&&(a.startsWith("http://")||a.startsWith("https://"))?l.map.loadImage(a,function(t,e){t?(console.log(t),i(t)):(l.map.hasImage(a)||l.map.addImage(a,e),i(q({},n,a)))}):(l._svgDiv||(l._svgDiv=document.createElement("div"),document.body.appendChild(l._svgDiv)),l.getCanvasFromSVG(a,l._svgDiv,function(t){l.handleSvgColor(e,t);var r=t.toDataURL("img/png");l.map.loadImage(r,function(t,e){t?(console.log(t),i(t)):(l.map.hasImage(t=a||r)||l.map.addImage(t,e),i(q({},n,t)))})})):i(q({},n,void 0))})}(t,i[t]));Promise.all(e).then(function(t){for(var e=0;e<u.length;e++){var r,i=u[e],n=i.dv_v5_markerStyle,a=i.geometry.type.toUpperCase(),o=("POINT"===a&&n.text&&(a="TEXT"),l.setFeatureInfo(i)),o=(i.properties.useStyle=n,i.properties.featureInfo=o,{type:"geojson",data:i}),i=0===e?f:f+"-"+a+"-"+e,s=t[e][i];"POINT"===a||"TEXT"===a?s?l._addLayer({id:i,type:"symbol",source:o,layout:{"icon-image":s,"icon-allow-overlap":!0,"icon-size":n.scale||1,visibility:c.visible},minzoom:h||0,maxzoom:p||22}):l._addLayer({id:i,type:"circle",source:o,paint:l._transformStyleToMapBoxGl(n,a),layout:{},minzoom:h||0,maxzoom:p||22}):(s={layout:{}},"LINESTRING"===a&&n.lineCap&&(a="LINE",s.layout={"line-cap":n.lineCap}),r=c.visible,s.layout.visibility=r,s.style=l._transformStyleToMapBoxGl(n,a),l._addOverlayToMap(a,o,i,s,h,p),"POLYGON"===a&&n.strokeColor&&l._addStrokeLineForPoly(n,i,i+"-strokeLine",r,h,p))}l._addLayerSucceeded()})}},{key:"_createHeatLayer",value:function(t,e){var r,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=t.minzoom,a=t.maxzoom,o=t.themeSetting,s={gradient:o.colors.slice(),radius:parseInt(o.radius)},c=o.customSettings;for(r in c)s.gradient[r]=c[r];var u,l,h,p=["interpolate",["linear"],["heatmap-density"]],f=[.1,.3,.5,.7,1],d=(s.gradient.forEach(function(t,e){p.push(f[e]),0===e&&(t=y.a.supermap.Util.hexToRgba(t,0)),1===e&&(t=y.a.supermap.Util.hexToRgba(t,.5)),p.push(t)}),this._initLegendConfigInfo(t,s.gradient),{"heatmap-color":p,"heatmap-radius":3*o.radius,"heatmap-intensity":2.8});o.weight&&4<=e.length&&(u=[],e.forEach(function(t){t.properties[o.weight]=+t.properties[o.weight],u.push(t.properties[o.weight])}),l=SuperMap.ArrayStatistic.getMax(u),h=SuperMap.ArrayStatistic.getMin(u),d["heatmap-weight"]=["interpolate",["linear"],["get",o.weight],h,0,l,1]),this._addLayer({id:t.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:d,layout:{visibility:t.visible},minzoom:n||0,maxzoom:a||22}),i&&this._addLayerSucceeded()}},{key:"_createRangeLayer",value:function(t,e){var i=t.themeSetting.themeField,r=t.featureType,n=t.minzoom,a=t.maxzoom,o=t.style,s=this.getRangeStyleGroup(t,e),c=(e=this.getFilterFeatures(t.filterCondition,e),["match",["get","index"]]),e=e.filter(function(t){var e=parseFloat(t.properties[i]);if(!e&&0!==e)return!1;if(s)for(var r=0;r<s.length;r++)if(s[r].start<=e&&e<s[r].end){c.push(t.properties.index,s[r].color);break}return!0},this),e=(c.push("rgba(0, 0, 0, 0)"),{type:"geojson",data:{type:"FeatureCollection",features:e}}),u=(this._initLegendConfigInfo(t,s),{layout:{}}),l=("LINE"===r&&o.lineCap&&(u.layout={"line-cap":o.lineCap}),t.visible),t=(u.layout.visibility=l,u.style=this._transformStyleToMapBoxGl(o,r,c),t.layerID);this._addOverlayToMap(r,e,t,u,n,a),"POLYGON"===r&&o.strokeColor&&this._addStrokeLineForPoly(o,t,t+"-strokeLine",l,n,a),this._addLayerSucceeded()}},{key:"_sendMapToUser",value:function(t,e){if(t===e){for(var r in this._sourceListModel=new i.a({map:this.map}),this._legendList)this._sourceListModel.addSourceStyle(r,this._legendList[r]);this._rectifyLayersOrder(),this.triggerEvent("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this._layers})}}},{key:"_moveLayer",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return!!this.map.getLayer(t)&&(this.map.moveLayer(t,e),!0)}},{key:"_rectifyLayersOrder",value:function(){for(var a=this,o=this._layers.filter(function(t){return!!a.map.getLayer(t.layerID)}),s=this.map.getStyle().layers,c=o.length-1;-1<c;c--)!function(){var e=o[c].layerID,t=o[c+1]?o[c+1].layerID:void 0;a._moveLayer(e,t),a._moveLayer("".concat(e,"-strokeLine"),t);for(var r=1;r<a.expectLayerLen+1&&a._moveLayer("".concat(e,"-additional-").concat(r),t);r++);if(s&&0<s.length)for(var i=s.map(function(t){return-1!==t.id.indexOf(e)}),n=1;n<i.length&&(a._moveLayer("".concat(e,"-POINT-").concat(n),t)||a._moveLayer("".concat(e,"-TEXT-").concat(n),t));n++);a._moveLayer("".concat(e,"-label"))}()}},{key:"_getParamString",value:function(t,e){var r,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=[];for(r in t)n.push((i?r.toUpperCase():r)+"="+t[r]);return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}},{key:"_transformStyleToMapBoxGl",value:function(t,e,r,i){var n,a={},o=("POINT"!==t.type&&"BASIC_POINT"!==t.type&&"POINT"!==e||"LINE"===e?-1!==["LINE","LINESTRING","MULTILINESTRING"].indexOf(e)?a={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:-1!==["REGION","POLYGON","MULTIPOLYGON"].indexOf(e)&&(a={fillColor:"fill-color",fillOpacity:"fill-opacity"}):a={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"},{});for(n in t)a[n]&&(o[a[n]]=t[n]);return r&&(i?o[i]=r:o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),t.lineDash&&!o["line-dasharray"]&&(Array.isArray(t.lineDash)?o["line-dasharray"]=t.lineDash:"solid"!==t.lineDash&&"LINE"===e&&(o["line-dasharray"]=this.getDashStyle(t.lineDash))),t.lineDash&&!o["circle-translate"]&&(Array.isArray(t.circleTranslate)?o["circle-translate"]=t.circleTranslate:"POINT"!==t.type&&"BASIC_POINT"!==t.type&&"POINT"!==e||(i=t.offsetX||0,r=t.offsetY||0,o["circle-translate"]=[i*t.radius,r*t.radius])),o}},{key:"_addOverlayToMap",value:function(t,e,r,i,n,a,o){t={POINT:"circle",LINE:"line",POLYGON:"fill"}[t];"circle"!==t&&"line"!==t&&"fill"!==t||(r={id:r,type:t,source:e,paint:i.style,layout:i.layout||{},minzoom:n||0,maxzoom:a||22},o&&(r.filter=o),this._addLayer(r))}},{key:"_addBaselayer",value:function(t,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:22,a=5<arguments.length&&void 0!==arguments[5]&&arguments[5],o=6<arguments.length?arguments[6]:void 0,a={type:"raster",tiles:t,minzoom:i||0,maxzoom:n||22,tileSize:a?this.rasterTileSize:256,rasterSource:a?"iserver":"",prjCoordSys:a&&!this.isOnlineBaseLayer(t[0],this.baseProjection)&&0<+this.baseProjection.split(":")[1]?{epsgCode:this.baseProjection.split(":")[1]}:"",proxy:this.baseLayerProxy};o&&(a.bounds=o),this._addLayer({id:e,type:"raster",source:a,minzoom:i||0,maxzoom:n||22,layout:{visibility:r?"visible":"none"}}),this.baseLayerProxy=null}},{key:"_addStrokeLineForPoly",value:function(t,e,r,i,n,a){t={style:this._transformStyleToMapBoxGl(t,"LINE"),layout:{visibility:i}};this._addOverlayToMap("LINE",e,r,t,n,a)}},{key:"_initLegendConfigInfo",value:function(t,e){this._legendList[t.layerID]||(this._legendList[t.layerID]={layerType:t.layerType,featureType:t.featureType,layerId:t.layerID,themeField:"HEAT"===t.layerType?t.themeSetting.weight:t.themeSetting.themeField,styleGroup:e})}},{key:"_createMvtLayer",value:function(t,e,r){var i=this._getDataVectorTileStyle(r),r=this._transformStyleToMapBoxGl(i,r),n=t.url+"/tileFeature.mvt",a=y.a.CRS.get(this.baseProjection).getOrigin(),o=e.minzoom,s=e.maxzoom;n+="?&returnAttributes=true&width=512&height=512&x={x}&y={y}&scale={scale}&origin={x:".concat(a[0],",y:").concat(a[1],"}"),this._addLayer({id:e.layerID,type:i.mbglType,source:{type:"vector",tiles:[n],proxy:this.webMapService.handleProxy("image")},"source-layer":"".concat(t.datasetName,"@").concat(t.datasourceName),paint:r,layout:{visibility:e.visible?"visible":"none"},minzoom:o||0,maxzoom:s||22}),this._addLayerSucceeded()}},{key:"_getDataVectorTileStyle",value:function(t){var e={radius:8,fillColor:"#EE4D5A",fillOpacity:.9,strokeColor:"#ffffff",strokeWidth:1,strokeOpacity:1,lineDash:"solid",type:"BASIC_POINT",mbglType:"circle"};return-1!==["LINE","LINESTRING","MULTILINESTRING"].indexOf(t)?(e.strokeColor="#4CC8A3",e.strokeWidth=2,e.mbglType="line"):-1!==["REGION","POLYGON","MULTIPOLYGON"].indexOf(t)&&(e.fillColor="#826DBA",e.mbglType="fill"),e}},{key:"_unproject",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this._unprojectProjection||this.baseProjection;return"EPSG:4326"===r||(t=Object(w.a)(r,"EPSG:4326",t),r=w.a.defs(r),e&&r.axis&&0===r.axis.indexOf("ne")&&t.reverse()),t}},{key:"_getMapCenter",value:function(t){t=t.center&&[t.center.x,t.center.y];return t=this._unproject(t=t||[0,0],!1),t=new y.a.LngLat(t[0],t[1])}},{key:"_getLabelFontFamily",value:function(t){var e=[],t=t.layers;return t&&0<t.length&&t.forEach(function(t){t.labelStyle&&e.push(t.labelStyle.fontFamily)},this),e.push("supermapol-icons"),e.join(",")}},{key:"_getTiandituUrl",value:function(t){for(var e=/t0/gi,r={tiandituUrl:[],labelUrl:[]},i=t.baseLayer.layerType.split("_")[1].toLowerCase(),n=Boolean(t.baseLayer.labelLayerVisible),t=this.tiandituKey||t.baseLayer.tk,t="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?tk=".concat(t),a=t,o="EPSG:4326"===this.baseProjection?"c":"w",s={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:i,tilematrixSet:o,format:"tiles",width:256,height:256},c=(t+=this._getParamString(s,t)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",i).replace("{proj}",o),u=[],l=0;l<8;l++)u.push(c.replace(e,"t".concat(l)));if(r.tiandituUrl=u,n){for(var t={vec:"cva",ter:"cta",img:"cia"}[i],h=(s.layer=t,a=(a+=this._getParamString(s,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",t).replace("{proj}",o),[]),p=0;p<8;p++)h.push(a.replace(e,"t".concat(p)));r.labelUrl=h}return r}},{key:"_defineProj4",value:function(t,e){var r,i=t,e=(t.split(":")[1]||(i=e&&e.split(":")[1]?e:Object(v.c)(t),r=t),Object(v.a)(i)),t=r||e;return t?(w.a.defs(i)||w.a.defs(i,t),e||Object(v.b)(i,t)):console.error("".concat(i," not define")),i}},{key:"FetchRequet",value:function(t,e,r){return SuperMap.FetchRequest.get(t,null,r).then(function(t){return t[e]()}).then(function(t){return t}).catch(function(t){console.log(t)})}},{key:"getEpsgCodeWKT",value:function(t,e){if(t)return this.FetchRequet(t,"text",e)}},{key:"getBounds",value:function(t,e){if(t)return this.FetchRequet(t,"json",e)}},{key:"_addLayer",value:function(t){var e=t.id;if(this._cacheLayerId.push(e),t=Object.assign(t,{id:e}),this.map.getLayer(e))return this.checkSameLayer&&this._isSameRasterLayer(e,t)?void 0:void this._updateLayer(t);this.map.addLayer(t)}},{key:"_isSameRasterLayer",value:function(t,e){var e=e.source,r=e.type,e=e.tiles;if("raster"===r){t=this.map.getSource(t);if(r===t.type&&e&&t.tiles&&e[0]===t.tiles[0])return!0}return!1}},{key:"setLayersVisible",value:function(t,e){var r=this,i=t?"visible":"none";this._cacheLayerId.length&&this._cacheLayerId.forEach(function(t){(e&&-1===e.indexOf(t)||!e)&&r.map.setLayoutProperty(t,"visibility",i)})}},{key:"cleanWebMap",value:function(){this.map&&(this.triggerEvent("beforeremovemap",{}),this.stopCanvg(),this.map.remove(),this.map=null,this._legendList={},this._sourceListModel=null,this.center=null,this.zoom=null,this._layers=[],this._dataflowService&&this._dataflowService.off("messageSucceeded",this._handleDataflowFeaturesCallback)&&this._dataflowService.off("subscribesucceeded",this._initDataflowLayerCallback),this._unprojectProjection=null),this._layerTimerList.length&&(this._layerTimerList.forEach(function(t){clearInterval(t)}),this._layerTimerList=[])}},{key:"centerValid",value:function(t){return!(!t||!(0<t.length||O(t)===y.a.LngLat||t.lng))}},{key:"_getResolution",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:512;return t.leftBottom&&t.rightTop?Math.max(t.rightTop.x-t.leftBottom.x,t.rightTop.y-t.leftBottom.y)/e:Math.max(t[2]-t[0],t[3]-t[1])/e}},{key:"_transformScaleToZoom",value:function(t,e){var r=(e||this.map.getCRS()).getExtent(),e=(e||this.map.getCRS()).unit,r=1/SuperMap.Util.getScaleFromResolutionDpi((r[2]-r[0])/512,96,e),e=t.split(":")[1];return Math.min(24,+Math.log2(r/+e).toFixed(2))}},{key:"_updateLayer",value:function(t){var e=this,r=t.id,i=t.paint,t=t.source,n=t.type,a=t.tiles,o=t.data,t=t.proxy,s=this.map.getSource(r);s&&("geojson"===n||"geojson"===s.type?(Object.keys(i).forEach(function(t){e.map.setPaintProperty(r,t,i[t])}),o&&s.setData(o)):"raster"===n&&this._updateRasterSource(r,{proxy:t,tiles:a}))}},{key:"_updateRasterSource",value:function(t,e){var r;t&&(r=this.map.getSource(t),Object.assign(r,e),this.map.style.sourceCaches[t].clearTiles(),this.map.style.sourceCaches[t].update(this.map.transform),this.map.triggerRepaint())}},{key:"updateOverlayLayer",value:function(t,e,r){e?this._initOverlayLayer(t,e,r):(e=this.webMapService.getDatasourceType(t),this.getLayerFeatures(t,this._taskID,e))}},{key:"isOnlineBaseLayer",value:function(t,e){return t.startsWith("https://maptiles.supermapol.com/iserver/services/map_China/rest/maps/China_Dark")&&"EPSG:3857"===e}}])&&P(t.prototype,e),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}()},"7dAM":function(t,e,r){"use strict";var i=r("E9LY"),n=r("m/L8");t.exports=function(t,e,r){return r.get&&i(r.get,e,{getter:!0}),r.set&&i(r.set,e,{setter:!0}),n.f(t,e,r)}},"82ph":function(t,e,r){"use strict";r=r("4zBA");t.exports=r([].slice)},"8GlL":function(t,e,r){"use strict";function i(t){var r,i;this.promise=new t(function(t,e){if(void 0!==r||void 0!==i)throw new a("Bad Promise constructor");r=t,i=e}),this.resolve=n(r),this.reject=n(i)}var n=r("We1y"),a=TypeError;t.exports.f=function(t){return new i(t)}},"8itv":function(t,e,r){"use strict";var i=r("I+eb"),n=r("xluM"),a=r("8GlL");i({target:"Promise",stat:!0,forced:r("Rzhe").CONSTRUCTOR},{reject:function(t){var e=a.f(this);return n(e.reject,void 0,t),e.promise}})},"93I0":function(t,e,r){"use strict";var i=r("VpIT"),n=r("kOOl"),a=i("keys");t.exports=function(t){return a[t]||(a[t]=n(t))}},"9WTN":function(t){t.exports=JSON.parse('[{"name":"","coord":[127.64559817675396,48.48668098449708]},{"name":"","coord":[118.34519572208615,45.370218276977525]},{"name":"","coord":[87.13479065593184,41.75497055053711]},{"name":"","coord":[126.12985278813787,43.57983207702637]},{"name":"","coord":[124.02494773936439,41.105743408203125]},{"name":"","coord":[102.87785725633012,37.69582366943361]},{"name":"","coord":[115.66327227481898,39.33383178710938]},{"name":"","coord":[116.62199343603638,40.25053787231445]},{"name":"","coord":[112.45180235808988,37.666561126708984]},{"name":"","coord":[117.35711842642581,39.406789779663086]},{"name":"","coord":[109.56294003056632,35.64754199981689]},{"name":"","coord":[105.96110877640074,37.3081169128418]},{"name":"","coord":[96.07301048277901,35.44417190551758]},{"name":"","coord":[118.03833752951093,36.29800605773925]},{"name":"","coord":[87.47361520439412,31.6703872680664]},{"name":"","coord":[113.07832397097275,33.87751102447509]},{"name":"","coord":[119.93926538201052,32.945452690124505]},{"name":"","coord":[117.15146765881019,32.024482727050774]},{"name":"","coord":[102.28998890142759,30.182161331176758]},{"name":"","coord":[112.87798261431585,31.157071113586426]},{"name":"","coord":[107.870126637831,30.188085556030266]},{"name":"","coord":[121.42561166015514,31.276043891906745]},{"name":"","coord":[119.75337092707514,29.175934791564945]},{"name":"","coord":[111.52770282777405,27.38110256195069]},{"name":"","coord":[115.51091280655628,27.283511161804206]},{"name":"","coord":[101.27053825991308,25.19783210754396]},{"name":"","coord":[106.49672346773299,26.92267990112305]},{"name":"","coord":[117.9976766946587,25.939599990844727]},{"name":"","coord":[108.98706831086302,23.891559600830078]},{"name":"","coord":[120.82468432537434,23.602651596069336]},{"name":"","coord":[114.21036850371561,22.374858856201172]},{"name":"","coord":[109.62792940960824,19.163116455078125]},{"name":"","coord":[113.32127888266032,22.873867034912106]},{"name":"","coord":[113.56819996291901,22.160347992976]}]')},"9d/t":function(t,e,r){"use strict";var i=r("AO7/"),n=r("Fib7"),a=r("xrYK"),o=r("tiKp")("toStringTag"),s=Object,c="Arguments"===a(function(){return arguments}());t.exports=i?a:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,e){try{return t[e]}catch(t){}}(t=s(t),o))?e:c?a(t):"Object"===(e=a(t))&&n(t.callee)?"Arguments":e}},A2ZE:function(t,e,r){"use strict";var i=r("RiVN"),n=r("We1y"),a=r("QNWe"),o=i(i.bind);t.exports=function(t,e){return n(t),void 0===e?t:a?o(t,e):function(){return t.apply(e,arguments)}}},"AO7/":function(t,e,r){"use strict";var i={};i[r("tiKp")("toStringTag")]="z",t.exports="[object z]"===String(i)},AbTg:function(t,e,r){"use strict";function i(){this.head=null,this.tail=null}i.prototype={add:function(t){var t={item:t,next:null},e=this.tail;e?e.next=t:this.head=t,this.tail=t},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=i},"B/qT":function(t,e,r){"use strict";var i=r("UMSQ");t.exports=function(t){return i(t.length)}},BPiQ:function(t,e,r){"use strict";var i=r("LQDL"),n=r("0Dky"),a=r("2oRo").String;t.exports=!!Object.getOwnPropertySymbols&&!n(function(){var t=Symbol("symbol detection");return!a(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41})},Bs8V:function(t,e,r){"use strict";var i=r("g6v/"),n=r("xluM"),a=r("0eef"),o=r("XGwC"),s=r("/GqU"),c=r("oEtG"),u=r("Gi26"),l=r("DPsx"),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=s(t),e=c(e),l)try{return h(t,e)}catch(t){}if(u(t,e))return o(!n(a.f,t,e),t[e])}},DLK6:function(t,e,r){"use strict";var i=r("4zBA"),n=r("ewvW"),p=Math.floor,f=i("".charAt),d=i("".replace),y=i("".slice),g=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,m=/\$([$&'`]|\d{1,2})/g;t.exports=function(a,o,s,c,u,t){var l=s+a.length,h=c.length,e=m;return void 0!==u&&(u=n(u),e=g),d(t,e,function(t,e){var r;switch(f(e,0)){case"$":return"$";case"&":return a;case"`":return y(o,0,s);case"'":return y(o,l);case"<":r=u[y(e,1,-1)];break;default:var i,n=+e;if(0==n)return t;if(h<n)return 0!==(i=p(n/10))&&i<=h?void 0===c[i-1]?f(e,1):c[i-1]+f(e,1):t;r=c[n-1]}return void 0===r?"":r})}},DPsx:function(t,e,r){"use strict";var i=r("g6v/"),n=r("0Dky"),a=r("zBJ4");t.exports=!i&&!n(function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},DVFp:function(t,e,r){"use strict";var i=String;t.exports=function(t){try{return i(t)}catch(t){return"Object"}}},DXPr:function(t,Zt,Kt){"use strict";!function(j){Kt.d(Zt,"a",function(){return R});Kt("5s+n");var t=Kt("yXPU"),a=Kt.n(t),t=(Kt("Rm1S"),Kt("UxlC"),Kt("LKBx"),Kt("4mDm"),Kt("3bBZ"),Kt("lSNA")),i=Kt.n(t),t=(Kt("E9XD"),Kt("inlA"),Kt("EnZy"),Kt("xEkU")),v=Kt.n(t),t=(Kt("SYor"),Kt("WOGj")),o=Kt.n(t),n=(Kt("yXV3"),Kt("JTJg"),Kt("Junv"),Kt("0B/8")),F=(Kt("JfAA"),Kt("Xp4B"));function x(t){return t.replace(/(?!\u3000)\s+/gm," ")}function y(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var D=/^[A-Z-]+$/;function V(t){t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t)||[];return t[2]||t[3]||t[4]}var B=/(\[[^\]]+\])/g,U=/(#[^\s+>~.[:]+)/g,z=/(\.[^\s+>~.[:]+)/g,G=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,W=/(:[\w-]+\([^)]*\))/gi,Y=/(:[^\s+>~.[:]+)/g,H=/([^\s+>~.[:]+)/g;function c(t,e){var r=e.exec(t);return r?[t.replace(e," "),r.length]:[t,0]}var p=1e-8;function X(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function l(t,e){return(t[0]*e[0]+t[1]*e[1])/(X(t)*X(e))}function q(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(l(t,e))}function Q(t){return t*t*t}function Z(t){return 3*t*t*(1-t)}function K(t){return 3*t*(1-t)*(1-t)}function J(t){return(1-t)*(1-t)*(1-t)}function $(t){return t*t}function tt(t){return 2*t*(1-t)}function et(t){return(1-t)*(1-t)}class b{constructor(t,e,r){this.document=t,this.name=e,this.value=r,this.isNormalizedColor=!1}static empty(t){return new b(t,"EMPTY","")}split(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:" ",{document:e,name:r}=this;return x(this.getString()).trim().split(t).map(t=>new b(e,r,t))}hasValue(t){var e=this["value"];return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}isString(t){var e=this["value"],r="string"==typeof e;return r&&t?t.test(e):r}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return void 0===t||this.hasValue()?this.value:t}getNumber(t){var e;return this.hasValue()?(e=this["value"],e=parseFloat(e),this.isString(/%$/)&&(e/=100),e):void 0===t?0:parseFloat(t)}getString(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}getColor(t){var e,r,t=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=(e=t).startsWith("rgb")?(r=3,e.replace(/\d+(\.\d+)?/g,(t,e)=>r--&&e?String(Math.round(parseFloat(t))):t)):e,this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var[r,t]="boolean"==typeof t?[void 0,t]:[t],i=this.document.screen["viewPort"];switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&t:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(r);default:var n=this.getNumber();return e&&n<1?n*i.computeSize(r):n}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var t=this.getString(),e=(e=/#([^)'"]+)/.exec(t))&&e[1];return this.document.definitions[e=e||t]}getFillStyleDefinition(t,e){var r,i=this.getDefinition();return i?"function"==typeof i.createGradient?i.createGradient(this.document.ctx,t,e):"function"==typeof i.createPattern?(i.getHrefAttribute().hasValue()&&(r=i.getAttribute("patternTransform"),i=i.getHrefAttribute().getDefinition(),r.hasValue())&&i.getAttribute("patternTransform",!0).setValue(r.value),i.createPattern(this.document.ctx,t,e)):null:null}getTextBaseline(){return this.hasValue()?b.textBaselineMapping[this.getString()]:null}addOpacity(t){for(var e,r=this.getColor(),i=r.length,n=0,a=0;a<i&&(","===r[a]&&n++,3!==n);a++);return t.hasValue()&&this.isString()&&3!==n&&(e=new o.a(r)).ok&&(e.alpha=t.getNumber(),r=e.toRGBA()),new b(this.document,this.name,r)}}b.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class rt{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var t=this["viewPorts"];return t[t.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class d{constructor(t,e){this.x=t,this.y=e}static parse(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,[t=e,e=e]=y(t);return new d(t,e)}static parseScale(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,[t=e,e=t]=y(t);return new d(t,e)}static parsePath(t){for(var e=y(t),r=e.length,i=[],n=0;n<r;n+=2)i.push(new d(e[n],e[n+1]));return i}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){var{x:e,y:r}=this,i=e*t[0]+r*t[2]+t[4],e=e*t[1]+r*t[3]+t[5];this.x=i,this.y=e}}class it{constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){var t,e,r;this.working||({screen:r,onClick:t,onMouseMove:e}=this,(r=r.ctx.canvas).onclick=t,r.onmousemove=e,this.working=!0)}stop(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}hasEvents(){return this.working&&0<this.events.length}runEvents(){var t,n,e;this.working&&({screen:e,events:t,eventElements:n}=this,e=e.ctx.canvas["style"],e&&(e.cursor=""),t.forEach((t,e)=>{for(var r=t["run"],i=n[e];i;)r(i),i=i.parent}),this.events=[],this.eventElements=[])}checkPath(i,n){var t,a;this.working&&n&&({events:t,eventElements:a}=this,t.forEach((t,e)=>{var{x:t,y:r}=t;!a[e]&&n.isPointInPath&&n.isPointInPath(t,r)&&(a[e]=i)}))}checkBoundingBox(i,n){var t,a;this.working&&n&&({events:t,eventElements:a}=this,t.forEach((t,e)=>{var{x:t,y:r}=t;!a[e]&&n.isPointInBox(t,r)&&(a[e]=i)}))}mapXY(t,e){for(var{window:r,ctx:i}=this.screen,n=new d(t,e),a=i.canvas;a;)n.x-=a.offsetLeft,n.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(n.x+=r.scrollX),r.scrollY&&(n.y+=r.scrollY),n}onClick(t){var{x:t,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:t,y:e,run(t){t.onClick&&t.onClick()}})}onMouseMove(t){var{x:t,y:e}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:t,y:e,run(t){t.onMouseMove&&t.onMouseMove()}})}}var nt="undefined"!=typeof window?window:null,at="undefined"!=typeof fetch?fetch.bind(void 0):null;class s{constructor(t){var{fetch:e=at,window:r=nt}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new rt,this.mouse=new it(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,this.fetch=e}wait(t){this.waits.push(t)}ready(){return this.readyPromise||Promise.resolve()}isReady(){var t;return!!this.isReadyLock||((t=this.waits.every(t=>t()))&&(this.waits=[],this.resolveReady)&&this.resolveReady(),this.isReadyLock=t)}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){var{document:t,ctx:e,aspectRatio:r,width:i,desiredWidth:n,height:a,desiredHeight:o,minX:s=0,minY:c=0,refX:u,refY:l,clip:h=!1,clipX:p=0,clipY:f=0}=t,[r,d]=x(r).replace(/^defer\s/,"").split(" "),r=r||"xMidYMid",d=d||"meet",y=i/n,g=a/o,m=Math.min(y,g),v=Math.max(y,g),u=("meet"===d&&(n*=m,o*=m),"slice"===d&&(n*=v,o*=v),new b(t,"refX",u)),t=new b(t,"refY",l),l=u.hasValue()&&t.hasValue();switch(l&&e.translate(-m*u.getPixels("x"),-m*t.getPixels("y")),h&&(u=m*p,t=m*f,e.beginPath(),e.moveTo(u,t),e.lineTo(i,t),e.lineTo(i,a),e.lineTo(u,a),e.closePath(),e.clip()),l||(h="meet"===d&&m===g,p="slice"===d&&v===g,f="meet"===d&&m===y,t="slice"===d&&v===y,r.startsWith("xMid")&&(h||p)&&e.translate(i/2-n/2,0),r.endsWith("YMid")&&(f||t)&&e.translate(0,a/2-o/2),r.startsWith("xMax")&&(h||p)&&e.translate(i-n,0),r.endsWith("YMax")&&(f||t)&&e.translate(0,a-o)),!0){case"none"===r:e.scale(y,g);break;case"meet"===d:e.scale(m,m);break;case"slice"===d:e.scale(v,v)}e.translate(-s,-c)}start(t){var e,r,i,n,{enableRedraw:a=!1,ignoreMouse:o=!1,ignoreAnimation:s=!1,ignoreDimensions:c=!1,ignoreClear:u=!1,forceRedraw:l,scaleWidth:h,scaleHeight:p,offsetX:f,offsetY:d}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{FRAMERATE:y,mouse:g}=this,m=1e3/y;this.frameDuration=m,this.readyPromise=new Promise(t=>{this.resolveReady=t}),this.isReady()&&this.render(t,c,u,h,p,f,d),a&&(e=Date.now(),r=e,i=0,n=()=>{e=Date.now(),m<=(i=e-r)&&(r=e-i%m,this.shouldUpdate(s,l))&&(this.render(t,c,u,h,p,f,d),g.runEvents()),this.intervalId=v()(n)},o||g.start(),this.intervalId=v()(n))}stop(){this.intervalId&&(v.a.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){var r=this["frameDuration"];if(this.animations.reduce((t,e)=>e.update(r)||t,!1))return!0}return!("function"!=typeof e||!e())||!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents()}render(t,e,r,i,n,a,o){var{CLIENT_WIDTH:s,CLIENT_HEIGHT:c,viewPort:u,ctx:l,isFirstRender:h}=this,p=l.canvas,s=(u.clear(),p.width&&p.height?u.setCurrent(p.width,p.height):u.setCurrent(s,c),t.getStyle("width")),c=t.getStyle("height"),f=(!e&&(h||"number"!=typeof i&&"number"!=typeof n)&&(s.hasValue()&&(p.width=s.getPixels("x"),p.style)&&(p.style.width="".concat(p.width,"px")),c.hasValue())&&(p.height=c.getPixels("y"),p.style)&&(p.style.height="".concat(p.height,"px")),p.clientWidth||p.width),p=p.clientHeight||p.height;e&&s.hasValue()&&c.hasValue()&&(f=s.getPixels("x"),p=c.getPixels("y")),u.setCurrent(f,p),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof i&&"number"!=typeof n||(e=y(t.getAttribute("viewBox").getString()),c=s=0,"number"==typeof i&&((u=t.getStyle("width")).hasValue()?s=u.getPixels("x")/i:isNaN(e[2])||(s=e[2]/i)),"number"==typeof n&&((a=t.getStyle("height")).hasValue()?c=a.getPixels("y")/n:isNaN(e[3])||(c=e[3]/n)),s=s||c,c=c||s,t.getAttribute("width",!0).setValue(i),t.getAttribute("height",!0).setValue(n),(o=t.getStyle("transform",!0,!0)).setValue("".concat(o.getString()," scale(").concat(1/s,", ").concat(1/c,")"))),r||l.clearRect(0,0,f,p),t.render(l),h&&(this.isFirstRender=!1)}}s.defaultWindow=nt,s.defaultFetch=at;var ot=s["defaultFetch"],st="undefined"!=typeof DOMParser?DOMParser:null;class u{constructor(){var{fetch:t=ot,DOMParser:e=st}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.fetch=t,this.DOMParser=e}parse(t){var e=this;return a()(function*(){return t.startsWith("<")?e.parseFromString(t):e.load(t)})()}parseFromString(e){var r=new this.DOMParser;try{return this.checkDocument(r.parseFromString(e,"image/svg+xml"))}catch(t){return this.checkDocument(r.parseFromString(e,"text/xml"))}}checkDocument(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}load(e){var r=this;return a()(function*(){var t=yield(yield r.fetch(e)).text();return r.parseFromString(t)})()}}class ct{constructor(t,e,r){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=y(e),this.originX=r[0],this.originY=r[1]}apply(t){var{originX:e,originY:r,matrix:i}=this,e=e.getPixels("x"),r=r.getPixels("y");t.translate(e,r),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t.translate(-e,-r)}unapply(t){var{originX:e,originY:r,matrix:i}=this,n=i[0],a=i[2],o=i[4],s=i[1],c=i[3],i=i[5],u=1/(n*(+c-0*i)-a*(+s-0*i)+o*(0*s-0*c)),e=e.getPixels("x"),r=r.getPixels("y");t.translate(e,r),t.transform(u*(+c-0*i),u*(0*i-+s),u*(0*o-+a),u*(+n-0*o),u*(a*i-o*c),u*(o*s-n*i)),t.translate(-e,-r)}applyToPoint(t){t.applyTransform(this.matrix)}}class ut extends ct{constructor(t,e,r){super(t,e,r),this.type="skew",this.angle=null,this.angle=new b(t,"angle",e)}}class h{constructor(t,e,r){this.document=t,this.transforms=[],x(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).forEach(t=>{var e;"none"!==t&&([t,e]=function(t){var[t,e]=t.split("(");return[t.trim(),e.trim().replace(")","")]}(t),void 0!==(t=h.transformTypes[t]))&&this.transforms.push(new t(this.document,e,r))})}static fromElement(t,e){var r=e.getStyle("transform",!1,!0),[e,i=e]=e.getStyle("transform-origin",!1,!0).split(),e=[e,i];return r.hasValue()?new h(t,r.getString(),e):null}apply(t){for(var e=this["transforms"],r=e.length,i=0;i<r;i++)e[i].apply(t)}unapply(t){for(var e=this["transforms"],r=e.length-1;0<=r;r--)e[r].unapply(t)}applyToPoint(t){for(var e=this["transforms"],r=e.length,i=0;i<r;i++)e[i].applyToPoint(t)}}h.transformTypes={translate:class{constructor(t,e){this.type="translate",this.point=null,this.point=d.parse(e)}apply(t){var{x:e,y:r}=this.point;t.translate(e||0,r||0)}unapply(t){var{x:e,y:r}=this.point;t.translate(-1*e||0,-1*r||0)}applyToPoint(t){var{x:e,y:r}=this.point;t.applyTransform([1,0,0,1,e||0,r||0])}},rotate:class{constructor(t,e,r){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;e=y(e);this.angle=new b(t,"angle",e[0]),this.originX=r[0],this.originY=r[1],this.cx=e[1]||0,this.cy=e[2]||0}apply(t){var{cx:e,cy:r,originX:i,originY:n,angle:a}=this,e=e+i.getPixels("x"),i=r+n.getPixels("y");t.translate(e,i),t.rotate(a.getRadians()),t.translate(-e,-i)}unapply(t){var{cx:e,cy:r,originX:i,originY:n,angle:a}=this,e=e+i.getPixels("x"),i=r+n.getPixels("y");t.translate(e,i),t.rotate(-1*a.getRadians()),t.translate(-e,-i)}applyToPoint(t){var{cx:e,cy:r,angle:i}=this,i=i.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}},scale:class{constructor(t,e,r){this.type="scale",this.scale=null,this.originX=null,this.originY=null;e=d.parseScale(e);0!==e.x&&0!==e.y||(e.x=p,e.y=p),this.scale=e,this.originX=r[0],this.originY=r[1]}apply(t){var{scale:{x:e,y:r},originX:i,originY:n}=this,i=i.getPixels("x"),n=n.getPixels("y");t.translate(i,n),t.scale(e,r||e),t.translate(-i,-n)}unapply(t){var{scale:{x:e,y:r},originX:i,originY:n}=this,i=i.getPixels("x"),n=n.getPixels("y");t.translate(i,n),t.scale(1/e,1/r||e),t.translate(-i,-n)}applyToPoint(t){var{x:e,y:r}=this.scale;t.applyTransform([e||0,0,0,r||0,0,0])}},matrix:ct,skewX:class extends ut{constructor(t,e,r){super(t,e,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},skewY:class extends ut{constructor(t,e,r){super(t,e,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}};class e{constructor(r,t){var e,i,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.document=r,this.node=t,this.captureTextNodes=n,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(e=(Array.from(t.attributes).forEach(t=>{e=t.nodeName;var e=D.test(e)?e.toLowerCase():e;this.attributes[e]=new b(r,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(t=>t.trim()).forEach(t=>{var e;t&&([t,e]=t.split(":").map(t=>t.trim()),this.styles[t]=new b(r,t,e))}),r)["definitions"],(i=this.getAttribute("id")).hasValue()&&!e[i.getString()]&&(e[i.getString()]=this),Array.from(t.childNodes).forEach(t=>{1===t.nodeType?this.addChild(t):!n||3!==t.nodeType&&4!==t.nodeType||0<(t=r.createTextNode(t)).getText().length&&this.addChild(t)}))}getAttribute(t){var e,r=this.attributes[t];return!r&&(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?(e=new b(this.document,t,""),this.attributes[t]=e):r||b.empty(this.document)}getHrefAttribute(){for(var t in this.attributes)if("href"===t||t.endsWith(":href"))return this.attributes[t];return b.empty(this.document)}getStyle(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=this.styles[t];if(i)return i;var n=this.getAttribute(t);if(null!=n&&n.hasValue())return this.styles[t]=n;if(!r){var n=this["parent"];if(n){r=n.getStyle(t);if(null!=r&&r.hasValue())return r}}return e?(n=new b(this.document,t,""),this.styles[t]=n):i||b.empty(this.document)}render(t){var e;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&(this.applyEffects(t),e.apply(t,this)):"none"!==this.getStyle("filter").getValue("none")?(e=this.getStyle("filter").getDefinition())&&(this.applyEffects(t),e.apply(t,this)):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}setContext(t){}applyEffects(t){var e=h.fromElement(this.document,this),e=(e&&e.apply(t),this.getStyle("clip-path",!1,!0));e.hasValue()&&(e=e.getDefinition())&&e.apply(t)}clearContext(t){}renderChildren(e){this.children.forEach(t=>{t.render(e)})}addChild(t){t=t instanceof e?t:this.document.createElement(t);t.parent=this,e.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t,r=this["node"];return"function"==typeof r.matches?r.matches(e):!(!(t=null==(t=r.getAttribute)?void 0:t.call(r,"class"))||""===t)&&t.split(" ").some(t=>".".concat(t)===e)}addStylesFromStyleDefinition(){var t,{styles:e,stylesSpecificity:r}=this.document;for(t in e)if(!t.startsWith("@")&&this.matchesSelector(t)){var i=e[t],n=r[t];if(i)for(var a in i){var o=this.stylesSpecificity[a];(o=void 0===o?"000":o)<=n&&(this.styles[a]=i[a],this.stylesSpecificity[a]=n)}}}removeStyles(n,t){return t.reduce((t,e)=>{var r,i=n.getStyle(e);return i.hasValue()?(r=i.getString(),i.setValue(""),[...t,[e,r]]):t},[])}restoreStyles(r,t){t.forEach(t=>{var[t,e]=t;r.getStyle(t,!0).setValue(e)})}isFirstChild(){var t;return 0===(null==(t=this.parent)?void 0:t.children.indexOf(this))}}e.ignoreChildTypes=["title"];class lt extends e{constructor(t,e,r){super(t,e,r)}}function ht(t){t=t.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}class g{constructor(t,e,r,i,n,a){a=a?"string"==typeof a?g.parse(a):a:{};this.fontFamily=n||a.fontFamily,this.fontSize=i||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=r||a.fontWeight,this.fontVariant=e||a.fontVariant}static parse(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length?arguments[1]:void 0,r="",i="",n="",a="",o="",t=x(t).trim().split(" "),s={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return t.forEach(t=>{switch(!0){case!s.fontStyle&&g.styles.includes(t):"inherit"!==t&&(r=t),s.fontStyle=!0;break;case!s.fontVariant&&g.variants.includes(t):"inherit"!==t&&(i=t),s.fontStyle=!0,s.fontVariant=!0;break;case!s.fontWeight&&g.weights.includes(t):"inherit"!==t&&(n=t),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0;break;case!s.fontSize:"inherit"!==t&&([a]=t.split("/")),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0,s.fontSize=!0;break;default:"inherit"!==t&&(o+=t)}}),new g(r,i,n,a,o,e)}toString(){return[function(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}(this.fontStyle),this.fontVariant,function(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}(this.fontWeight),this.fontSize,(t=this.fontFamily,void 0===j?t:t.trim().split(",").map(ht).join(","))].join(" ").trim();var t}}g.styles="normal|italic|oblique|inherit",g.variants="normal|small-caps|inherit",g.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class f{constructor(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Number.NaN,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.NaN,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Number.NaN,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=t,this.y1=e,this.x2=r,this.y2=i,this.addPoint(t,e),this.addPoint(r,i)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2)&&(this.x2=t),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2)&&(this.y2=e)}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){var e,r,i;t&&({x1:t,y1:e,x2:r,y2:i}=t,this.addPoint(t,e),this.addPoint(r,i))}sumCubic(t,e,r,i,n){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*i+Math.pow(t,3)*n}bezierCurveAdd(t,e,r,i,n){var a=6*e-12*r+6*i,o=-3*e+9*r-9*i+3*n,s=3*r-3*e;if(0==o)return 0==a?void 0:void(0<(c=-s/a)&&c<1&&(t?this.addX(this.sumCubic(c,e,r,i,n)):this.addY(this.sumCubic(c,e,r,i,n))));var c=Math.pow(a,2)-4*s*o;c<0||(0<(s=(-a+Math.sqrt(c))/(2*o))&&s<1&&(t?this.addX(this.sumCubic(s,e,r,i,n)):this.addY(this.sumCubic(s,e,r,i,n))),0<(s=(-a-Math.sqrt(c))/(2*o))&&s<1&&(t?this.addX(this.sumCubic(s,e,r,i,n)):this.addY(this.sumCubic(s,e,r,i,n))))}addBezierCurve(t,e,r,i,n,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,r,n,o),this.bezierCurveAdd(!1,e,i,a,s)}addQuadraticCurve(t,e,r,i,n,a){r=t+2/3*(r-t),i=e+2/3*(i-e);this.addBezierCurve(t,e,r,r+1/3*(n-t),i,i+1/3*(a-e),n,a)}isPointInBox(t,e){var{x1:r,y1:i,x2:n,y2:a}=this;return r<=t&&t<=n&&i<=e&&e<=a}}class m extends n.a{constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new d(0,0),this.control=new d(0,0),this.current=new d(0,0),this.points=[],this.angles=[]}isEnd(){var{i:t,commands:e}=this;return t>=e.length-1}next(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t}getPoint(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"x",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"y",t=new d(this.command[t],this.command[e]);return this.makeAbsolute(t)}getAsControlPoint(t,e){t=this.getPoint(t,e);return this.control=t}getAsCurrentPoint(t,e){t=this.getPoint(t,e);return this.current=t}getReflectedControlPoint(){var t,e,r,i=this.previousCommand.type;return i!==n.a.CURVE_TO&&i!==n.a.SMOOTH_CURVE_TO&&i!==n.a.QUAD_TO&&i!==n.a.SMOOTH_QUAD_TO?this.current:({current:{x:i,y:t},control:{x:e,y:r}}=this,new d(2*i-e,2*t-r))}makeAbsolute(t){var e,r;return this.command.relative&&({x:e,y:r}=this.current,t.x+=e,t.y+=r),t}addMarker(t,e,r){var{points:i,angles:n}=this;r&&0<n.length&&!n[n.length-1]&&(n[n.length-1]=i[i.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var t=this["angles"],e=t.length,r=0;r<e;r++)if(!t[r])for(var i=r+1;i<e;i++)if(t[i]){t[r]=t[i];break}return t}}class r extends e{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var t=1,e=this;e;){var r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}setContext(t){var e,r,i,n,a,o,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];s||(o=this.getStyle("fill"),r=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),n=this.getStyle("stroke-opacity"),o.isUrlDefinition()?(e=o.getFillStyleDefinition(this,r))&&(t.fillStyle=e):o.hasValue()&&("currentColor"===o.getString()&&o.setValue(this.getStyle("color").getColor()),"inherit"!==(e=o.getColor()))&&(t.fillStyle="none"===e?"rgba(0,0,0,0)":e),r.hasValue()&&(o=new b(this.document,"fill",t.fillStyle).addOpacity(r).getColor(),t.fillStyle=o),i.isUrlDefinition()?(e=i.getFillStyleDefinition(this,n))&&(t.strokeStyle=e):i.hasValue()&&("currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor()),"inherit"!==(r=i.getString()))&&(t.strokeStyle="none"===r?"rgba(0,0,0,0)":r),n.hasValue()&&(o=new b(this.document,"stroke",t.strokeStyle).addOpacity(n).getString(),t.strokeStyle=o),(e=this.getStyle("stroke-width")).hasValue()&&(i=e.getPixels(),t.lineWidth=i||p),r=this.getStyle("stroke-linecap"),n=this.getStyle("stroke-linejoin"),o=this.getStyle("stroke-miterlimit"),e=this.getStyle("stroke-dasharray"),i=this.getStyle("stroke-dashoffset"),r.hasValue()&&(t.lineCap=r.getString()),n.hasValue()&&(t.lineJoin=n.getString()),o.hasValue()&&(t.miterLimit=o.getNumber()),e.hasValue()&&"none"!==e.getString()&&(r=y(e.getString()),void 0!==t.setLineDash?t.setLineDash(r):void 0!==t.webkitLineDash?t.webkitLineDash=r:void 0===t.mozDash||1===r.length&&0===r[0]||(t.mozDash=r),n=i.getPixels(),void 0!==t.lineDashOffset?t.lineDashOffset=n:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=n:void 0!==t.mozDashOffset&&(t.mozDashOffset=n))),this.modifiedEmSizeStack=!1,void 0!==t.font&&(o=this.getStyle("font"),e=this.getStyle("font-style"),r=this.getStyle("font-variant"),i=this.getStyle("font-weight"),n=this.getStyle("font-size"),a=this.getStyle("font-family"),o=new g(e.getString(),r.getString(),i.getString(),n.hasValue()?"".concat(n.getPixels(!0),"px"):"",a.getString(),g.parse(o.getString(),t.font)),e.setValue(o.fontStyle),r.setValue(o.fontVariant),i.setValue(o.fontWeight),n.setValue(o.fontSize),a.setValue(o.fontFamily),t.font=o.toString(),n.isPixels())&&(this.document.emSize=n.getPixels(),this.modifiedEmSizeStack=!0),s||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}}class S extends r{constructor(t,e,r){super(t,e,r),this.type="path",this.pathParser=null,this.pathParser=new m(this.getAttribute("d").getString())}path(t){var e=this["pathParser"],r=new f;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case m.MOVE_TO:this.pathM(t,r);break;case m.LINE_TO:this.pathL(t,r);break;case m.HORIZ_LINE_TO:this.pathH(t,r);break;case m.VERT_LINE_TO:this.pathV(t,r);break;case m.CURVE_TO:this.pathC(t,r);break;case m.SMOOTH_CURVE_TO:this.pathS(t,r);break;case m.QUAD_TO:this.pathQ(t,r);break;case m.SMOOTH_QUAD_TO:this.pathT(t,r);break;case m.ARC:this.pathA(t,r);break;case m.CLOSE_PATH:this.pathZ(t,r)}return r}getBoundingBox(t){return this.path()}getMarkers(){var t=this["pathParser"],e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map((t,e)=>[t,r[e]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule"),r=(""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke()),this.getMarkers());if(r){var i,n,a=r.length-1,e=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),s=this.getStyle("marker-end");if(e.isUrlDefinition()&&(e=e.getDefinition(),[i,n]=r[0],e.render(t,i,n)),o.isUrlDefinition())for(var c=o.getDefinition(),u=1;u<a;u++){var[l,h]=r[u];c.render(t,l,h)}s.isUrlDefinition()&&(e=s.getDefinition(),[i,n]=r[a],e.render(t,i,n))}}static pathM(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){var r=this["pathParser"],i=S.pathM(r)["point"],{x:n,y:a}=i;r.addMarker(i),e.addPoint(n,a),t&&t.moveTo(n,a)}static pathL(t){var e=t["current"];return{current:e,point:t.getAsCurrentPoint()}}pathL(t,e){var r=this["pathParser"],{current:i,point:n}=S.pathL(r),{x:a,y:o}=n;r.addMarker(n,i),e.addPoint(a,o),t&&t.lineTo(a,o)}static pathH(t){var{current:e,command:r}=t,r=new d((r.relative?e.x:0)+r.x,e.y);return{current:e,point:t.current=r}}pathH(t,e){var r=this["pathParser"],{current:i,point:n}=S.pathH(r),{x:a,y:o}=n;r.addMarker(n,i),e.addPoint(a,o),t&&t.lineTo(a,o)}static pathV(t){var{current:e,command:r}=t,r=new d(e.x,(r.relative?e.y:0)+r.y);return{current:e,point:t.current=r}}pathV(t,e){var r=this["pathParser"],{current:i,point:n}=S.pathV(r),{x:a,y:o}=n;r.addMarker(n,i),e.addPoint(a,o),t&&t.lineTo(a,o)}static pathC(t){var e=t["current"];return{current:e,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathC(t,e){var r=this["pathParser"],{current:i,point:n,controlPoint:a,currentPoint:o}=S.pathC(r);r.addMarker(o,a,n),e.addBezierCurve(i.x,i.y,n.x,n.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(n.x,n.y,a.x,a.y,o.x,o.y)}static pathS(t){var e=t["current"];return{current:e,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}pathS(t,e){var r=this["pathParser"],{current:i,point:n,controlPoint:a,currentPoint:o}=S.pathS(r);r.addMarker(o,a,n),e.addBezierCurve(i.x,i.y,n.x,n.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(n.x,n.y,a.x,a.y,o.x,o.y)}static pathQ(t){var e=t["current"];return{current:e,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}pathQ(t,e){var r=this["pathParser"],{current:i,controlPoint:n,currentPoint:a}=S.pathQ(r);r.addMarker(a,n,n),e.addQuadraticCurve(i.x,i.y,n.x,n.y,a.x,a.y),t&&t.quadraticCurveTo(n.x,n.y,a.x,a.y)}static pathT(t){var e=t.current,r=t.getReflectedControlPoint();return{current:e,controlPoint:t.control=r,currentPoint:t.getAsCurrentPoint()}}pathT(t,e){var r=this["pathParser"],{current:i,controlPoint:n,currentPoint:a}=S.pathT(r);r.addMarker(a,n,n),e.addQuadraticCurve(i.x,i.y,n.x,n.y,a.x,a.y),t&&t.quadraticCurveTo(n.x,n.y,a.x,a.y)}static pathA(t){var{current:e,command:r}=t,{rX:r,rY:i,xRot:n,lArcFlag:a,sweepFlag:o}=r,n=n*(Math.PI/180),t=t.getAsCurrentPoint(),s=new d(Math.cos(n)*(e.x-t.x)/2+Math.sin(n)*(e.y-t.y)/2,-Math.sin(n)*(e.x-t.x)/2+Math.cos(n)*(e.y-t.y)/2),c=Math.pow(s.x,2)/Math.pow(r,2)+Math.pow(s.y,2)/Math.pow(i,2),c=(1<c&&(r*=Math.sqrt(c),i*=Math.sqrt(c)),(a===o?-1:1)*Math.sqrt((Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(s.y,2)-Math.pow(i,2)*Math.pow(s.x,2))/(Math.pow(r,2)*Math.pow(s.y,2)+Math.pow(i,2)*Math.pow(s.x,2)))),a=(isNaN(c)&&(c=0),new d(c*r*s.y/i,c*-i*s.x/r)),c=new d((e.x+t.x)/2+Math.cos(n)*a.x-Math.sin(n)*a.y,(e.y+t.y)/2+Math.sin(n)*a.x+Math.cos(n)*a.y),e=q([1,0],[(s.x-a.x)/r,(s.y-a.y)/i]),u=[(s.x-a.x)/r,(s.y-a.y)/i],s=[(-s.x-a.x)/r,(-s.y-a.y)/i],a=q(u,s);return l(u,s)<=-1&&(a=Math.PI),{currentPoint:t,rX:r,rY:i,sweepFlag:o,xAxisRotation:n,centp:c,a1:e,ad:a=1<=l(u,s)?0:a}}pathA(t,e){var r=this["pathParser"],{currentPoint:i,rX:n,rY:a,sweepFlag:o,xAxisRotation:s,centp:c,a1:u,ad:l}=S.pathA(r),h=1-o?1:-1,p=u+l/2*h,f=new d(c.x+n*Math.cos(p),c.y+a*Math.sin(p));r.addMarkerAngle(f,p-h*Math.PI/2),r.addMarkerAngle(i,p-h*Math.PI),e.addPoint(i.x,i.y),!t||isNaN(u)||isNaN(l)||(f=a<n?n:a,r=a<n?1:n/a,p=a<n?a/n:1,t.translate(c.x,c.y),t.rotate(s),t.scale(r,p),t.arc(0,0,f,u,u+l,Boolean(1-o)),t.scale(1/r,1/p),t.rotate(-s),t.translate(-c.x,-c.y))}static pathZ(t){t.current=t.start}pathZ(t,e){S.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}}class pt extends S{constructor(t,e,r){super(t,e,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class w extends r{constructor(t,e,r){super(t,e,new.target===w||r),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(t){super.setContext(t,1<arguments.length&&void 0!==arguments[1]&&arguments[1]);var e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(r){if("text"!==this.type)return this.getTElementBoundingBox(r);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(r);var i=null;return this.children.forEach((t,e)=>{e=this.getChildBoundingBox(r,this,this,e);i?i.addBoundingBox(e):i=e}),i}getFontSize(){var{document:t,parent:e}=this,t=g.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(t)}getTElementBoundingBox(t){var e=this.getFontSize();return new f(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,r){var i,n,a=e[r],o=null;return t.isArabic?(i=e.length,n=e[r-1],e=e[r+1],n=0<r&&" "!==n&&(r===i-1||" "===e)?"initial":0<r&&" "!==n&&r<i-1&&" "!==e?"medial":(0===r||" "===n)&&r<i-1&&" "!==e?"terminal":"isolated",void 0!==t.glyphs[a]&&(o=(r=t.glyphs[a])instanceof pt?r:r[n])):o=t.glyphs[a],o=o||t.missingGlyph}getText(){return""}getTextFromNode(t){var t=t||this.node,e=Array.from(t.parentNode.childNodes),r=e.indexOf(t),e=e.length-1,t=x(t.textContent||"");return 0===r&&(t=t.replace(/^[\n \t]+/,"")),t=r===e?t.replace(/[\n \t]+$/,""):t}renderChildren(r){var t;"text"!==this.type?this.renderTElementChildren(r):(this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(r),this.children.forEach((t,e)=>{this.renderChild(r,this,this,e)}),t=this.document.screen.mouse,t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(r)))}renderTElementChildren(t){var{document:e,parent:r}=this,i=this.getText(),n=r.getStyle("font-family").getDefinition();if(n)for(var a=n.fontFace["unitsPerEm"],e=g.parse(e.ctx.font),o=r.getStyle("font-size").getNumber(e.fontSize),s=r.getStyle("font-style").getString(e.fontStyle),c=o/a,u=n.isRTL?i.split("").reverse().join(""):i,l=y(r.getAttribute("dx").getString()),h=u.length,p=0;p<h;p++){var f=this.getGlyph(n,u,p),d=(t.translate(this.x,this.y),t.scale(c,-c),t.lineWidth);t.lineWidth=t.lineWidth*a/o,"italic"===s&&t.transform(1,0,.4,1,0,0),f.render(t),"italic"===s&&t.transform(1,0,-.4,1,0,0),t.lineWidth=d,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=o*(f.horizAdvX||n.horizAdvX)/a,void 0===l[p]||isNaN(l[p])||(this.x+=l[p])}else{var{x:e,y:r}=this;t.fillStyle&&t.fillText(i,e,r),t.strokeStyle&&t.strokeText(i,e,r)}}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){for(var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=0,r="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2,i=this.textChunkStart;i<this.leafTexts.length;i++)this.leafTexts[i].x+=r;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(r){this.children.forEach((t,e)=>{this.adjustChildCoordinatesRecursiveCore(r,this,this,e)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(r,i,t,e){var n=t.children[e];0<n.children.length?n.children.forEach((t,e)=>{i.adjustChildCoordinatesRecursiveCore(r,i,n,e)}):this.adjustChildCoordinates(r,i,t,e)}adjustChildCoordinates(t,e,r,i){var n,a,o,s,c,r=r.children[i];return"function"==typeof r.measureText&&(t.save(),r.setContext(t,!0),n=r.getAttribute("x"),a=r.getAttribute("y"),o=r.getAttribute("dx"),s=r.getAttribute("dy"),c=r.getStyle("font-family").getDefinition(),c=Boolean(c)&&c.isRTL,0===i&&(n.hasValue()||n.setValue(r.getInheritedAttribute("x")),a.hasValue()||a.setValue(r.getInheritedAttribute("y")),o.hasValue()||o.setValue(r.getInheritedAttribute("dx")),s.hasValue()||s.setValue(r.getInheritedAttribute("dy"))),i=r.measureText(t),c&&(e.x-=i),n.hasValue()?(e.applyAnchoring(),r.x=n.getPixels("x"),o.hasValue()&&(r.x+=o.getPixels("x"))):(o.hasValue()&&(e.x+=o.getPixels("x")),r.x=e.x),e.x=r.x,c||(e.x+=i),a.hasValue()?(r.y=a.getPixels("y"),s.hasValue()&&(r.y+=s.getPixels("y"))):(s.hasValue()&&(e.y+=s.getPixels("y")),r.y=e.y),e.y=r.y,e.leafTexts.push(r),e.minX=Math.min(e.minX,r.x,r.x+i),e.maxX=Math.max(e.maxX,r.x,r.x+i),r.clearContext(t),t.restore()),r}getChildBoundingBox(r,i,t,e){var n,a=t.children[e];return"function"==typeof a.getBoundingBox&&(n=a.getBoundingBox(r))?(a.children.forEach((t,e)=>{e=i.getChildBoundingBox(r,i,a,e);n.addBoundingBox(e)}),n):null}renderChild(r,i,t,e){var n=t.children[e];n.render(r),n.children.forEach((t,e)=>{i.renderChild(r,i,n,e)})}measureText(t){var e=this["measureCache"];return~e?e:(e=this.getText(),t=this.measureTargetText(t,e),this.measureCache=t)}measureTargetText(t,e){if(!e.length)return 0;var r=this["parent"],i=r.getStyle("font-family").getDefinition();if(i){for(var n=this.getFontSize(),a=i.isRTL?e.split("").reverse().join(""):e,o=y(r.getAttribute("dx").getString()),s=a.length,c=0,u=0;u<s;u++)c+=(this.getGlyph(i,a,u).horizAdvX||i.horizAdvX)*n/i.fontFace.unitsPerEm,void 0===o[u]||isNaN(o[u])||(c+=o[u]);return c}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);r=t.measureText(e).width;return this.clearContext(t),t.restore(),r}getInheritedAttribute(t){for(var e=this;e instanceof w&&e.isFirstChild();){var r=e.parent.getAttribute(t);if(r.hasValue(!0))return r.getValue("0");e=e.parent}return null}}class _ extends w{constructor(t,e,r){super(t,e,new.target===_||r),this.type="tspan",this.text=0<this.children.length?"":this.getTextFromNode()}getText(){return this.text}}class ft extends _{constructor(){super(...arguments),this.type="textNode"}}class O extends r{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(t){var e,r=this["document"],{screen:i,window:n}=r,a=t.canvas,{width:a,height:n}=(i.setDefaults(t),a.style&&void 0!==t.font&&n&&void 0!==n.getComputedStyle&&(t.font=n.getComputedStyle(a).getPropertyValue("font"),(n=new b(r,"fontSize",g.parse(t.font).fontSize)).hasValue())&&(r.rootEmSize=n.getPixels("y"),r.emSize=r.rootEmSize),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),i.viewPort),o=(this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black"),this.getAttribute("refX")),s=this.getAttribute("refY"),c=this.getAttribute("viewBox"),c=c.hasValue()?y(c.getString()):null,u=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),l=0,h=0,p=0,f=0;c&&(l=c[0],h=c[1]),this.root||(a=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y"),"marker"===this.type&&(p=l,f=h,h=l=0)),i.viewPort.setCurrent(a,n),!this.node||this.parent&&"foreignObject"!==(null==(e=this.node.parentNode)?void 0:e.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),c&&(a=c[2],n=c[3]),r.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:a,height:i.viewPort.height,desiredHeight:n,minX:l,minY:h,refX:o.getValue(),refY:s.getValue(),clip:u,clipX:p,clipY:f}),c&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(a,n))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=this.getAttribute("width",!0),n=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=i.getNumber(0),c=n.getNumber(0);r&&("string"==typeof r?this.getAttribute("preserveAspectRatio",!0).setValue(r):(r=this.getAttribute("preserveAspectRatio")).hasValue()&&r.setValue(r.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),i.setValue(t),n.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(s||t," ").concat(c||e)),o.hasValue()&&(r=this.getStyle("width"),i=this.getStyle("height"),r.hasValue()&&r.setValue("".concat(t,"px")),i.hasValue())&&i.setValue("".concat(e,"px"))}}class dt extends S{constructor(){super(...arguments),this.type="rect"}path(t){var e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getStyle("width",!1,!0).getPixels("x"),n=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),c=o.getPixels("y");return a.hasValue()&&!o.hasValue()&&(c=s),o.hasValue()&&!a.hasValue()&&(s=c),s=Math.min(s,i/2),c=Math.min(c,n/2),t&&(o=(Math.sqrt(2)-1)/3*4,t.beginPath(),0<n)&&0<i&&(t.moveTo(e+s,r),t.lineTo(e+i-s,r),t.bezierCurveTo(e+i-s+o*s,r,e+i,r+c-o*c,e+i,r+c),t.lineTo(e+i,r+n-c),t.bezierCurveTo(e+i,r+n-c+o*c,e+i-s+o*s,r+n,e+i-s,r+n),t.lineTo(e+s,r+n),t.bezierCurveTo(e+s-o*s,r+n,e,r+n-c+o*c,e,r+n-c),t.lineTo(e,r+c),t.bezierCurveTo(e,r+c-o*c,e+s-o*s,r,e+s,r),t.closePath()),new f(e,r,e+i,r+n)}getMarkers(){return null}}class yt extends S{constructor(){super(...arguments),this.type="circle"}path(t){var e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),i=this.getAttribute("r").getPixels();return t&&0<i&&(t.beginPath(),t.arc(e,r,i,0,2*Math.PI,!1),t.closePath()),new f(e-i,r-i,e+i,r+i)}getMarkers(){return null}}class gt extends S{constructor(){super(...arguments),this.type="ellipse"}path(t){var e=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),i=this.getAttribute("ry").getPixels("y"),n=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&0<r&&0<i&&(t.beginPath(),t.moveTo(n+r,a),t.bezierCurveTo(n+r,a+e*i,n+e*r,a+i,n,a+i),t.bezierCurveTo(n-e*r,a+i,n-r,a+e*i,n-r,a),t.bezierCurveTo(n-r,a-e*i,n-e*r,a-i,n,a-i),t.bezierCurveTo(n+e*r,a-i,n+r,a-e*i,n+r,a),t.closePath()),new f(n-r,a-i,n+r,a+i)}getMarkers(){return null}}class mt extends S{constructor(){super(...arguments),this.type="line"}getPoints(){return[new d(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new d(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){var[{x:e,y:r},{x:i,y:n}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,r),t.lineTo(i,n)),new f(e,r,i,n)}getMarkers(){var[t,e]=this.getPoints(),r=t.angleTo(e);return[[t,r],[e,r]]}}class vt extends S{constructor(t,e,r){super(t,e,r),this.type="polyline",this.points=[],this.points=d.parsePath(this.getAttribute("points").getString())}path(r){var t=this["points"],[{x:e,y:i}]=t,n=new f(e,i);return r&&(r.beginPath(),r.moveTo(e,i)),t.forEach(t=>{var{x:t,y:e}=t;n.addPoint(t,e),r&&r.lineTo(t,e)}),n}getMarkers(){var r=this["points"],i=r.length-1,n=[];return r.forEach((t,e)=>{e!==i&&n.push([t,t.angleTo(r[e+1])])}),0<n.length&&n.push([r[r.length-1],n[n.length-1][1]]),n}}class xt extends e{constructor(){super(...arguments),this.type="pattern"}createPattern(t,e,r){var i=this.getStyle("width").getPixels("x",!0),n=this.getStyle("height").getPixels("y",!0),a=new O(this.document,null),o=(a.attributes.viewBox=new b(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new b(this.document,"width","".concat(i,"px")),a.attributes.height=new b(this.document,"height","".concat(n,"px")),a.attributes.transform=new b(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children,this.document.createCanvas(i,n)),s=o.getContext("2d"),i=this.getAttribute("x"),n=this.getAttribute("y");i.hasValue()&&n.hasValue()&&s.translate(i.getPixels("x",!0),n.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var u=-1;u<=1;u++)s.save(),a.attributes.x=new b(this.document,"x",c*o.width),a.attributes.y=new b(this.document,"y",u*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}class bt extends e{constructor(){super(...arguments),this.type="marker"}render(t,e,r){var i,n,a,o;e&&({x:e,y:i}=e,n=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth"),t.translate(e,i),"auto"===n&&t.rotate(r),"strokeWidth"===a&&t.scale(t.lineWidth,t.lineWidth),t.save(),(o=new O(this.document,null)).type=this.type,o.attributes.viewBox=new b(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.refX=new b(this.document,"refX",this.getAttribute("refX").getValue()),o.attributes.refY=new b(this.document,"refY",this.getAttribute("refY").getValue()),o.attributes.width=new b(this.document,"width",this.getAttribute("markerWidth").getValue()),o.attributes.height=new b(this.document,"height",this.getAttribute("markerHeight").getValue()),o.attributes.overflow=new b(this.document,"overflow",this.getAttribute("overflow").getValue()),o.attributes.fill=new b(this.document,"fill",this.getAttribute("fill").getColor("black")),o.attributes.stroke=new b(this.document,"stroke",this.getAttribute("stroke").getValue("none")),o.children=this.children,o.render(t),t.restore(),"strokeWidth"===a&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===n&&t.rotate(-r),t.translate(-e,-i))}}class St extends e{constructor(){super(...arguments),this.type="defs"}render(){}}class T extends r{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var r=new f;return this.children.forEach(t=>{r.addBoundingBox(t.getBoundingBox(e))}),r}}class wt extends e{constructor(t,e,r){super(t,e,r),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:i,children:t}=this;t.forEach(t=>{"stop"===t.type&&i.push(t)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,r){var i,n,a=this,a=(this.getHrefAttribute().hasValue()&&(a=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(a)),a)["stops"],o=this.getGradient(t,e);return o?(a.forEach(t=>{o.addColorStop(t.offset,this.addParentOpacity(r,t.color))}),this.getAttribute("gradientTransform").hasValue()?(t=this["document"],{MAX_VIRTUAL_PIXELS:e,viewPort:i}=t.screen,[i]=i.viewPorts,(n=new dt(t,null)).attributes.x=new b(t,"x",-e/3),n.attributes.y=new b(t,"y",-e/3),n.attributes.width=new b(t,"width",e),n.attributes.height=new b(t,"height",e),(e=new T(t,null)).attributes.transform=new b(t,"transform",this.getAttribute("gradientTransform").getValue()),e.children=[n],(n=new O(t,null)).attributes.x=new b(t,"x",0),n.attributes.y=new b(t,"y",0),n.attributes.width=new b(t,"width",i.width),n.attributes.height=new b(t,"height",i.height),n.children=[e],(t=(e=t.createCanvas(i.width,i.height)).getContext("2d")).fillStyle=o,n.render(t),t.createPattern(e,"no-repeat")):o):this.addParentOpacity(r,a[a.length-1].color)}inheritStopContainer(e){this.attributesToInherit.forEach(t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}addParentOpacity(t,e){return t.hasValue()?new b(this.document,"color",e).addOpacity(t).getColor():e}}class _t extends e{constructor(t,e,r){super(t,e,r),this.type="stop";t=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),e=this.getStyle("stop-opacity"),r=this.getStyle("stop-color",!0);""===r.getString()&&r.setValue("#000"),e.hasValue()&&(r=r.addOpacity(e)),this.offset=t,this.color=r.getColor()}}class P extends e{constructor(t,e,r){super(t,e,r),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new b(t,"values",null);e=this.getAttribute("values");e.hasValue()&&this.values.setValue(e.getString().split(";"))}getProperty(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){var t=this["initialUnits"],{progress:e,from:r,to:i}=this.getProgress(),i=r.getNumber()+(i.getNumber()-r.getNumber())*e;return"%"===t&&(i*=100),"".concat(i).concat(t)}update(t){var e=this["parent"],r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var i=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==i||this.frozen){if("remove"===i&&!this.removed)return this.removed=!0,r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=r.getString();return!1}this.duration+=t;i=!1;return this.begin<this.duration&&(e=this.calcValue(),(t=this.getAttribute("type")).hasValue()&&(t=t.getString(),e="".concat(t,"(").concat(e,")")),r.setValue(e),i=!0),i}getProgress(){var t,e,r,{document:i,values:n}=this,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return n.hasValue()?(t=a.progress*(n.getValue().length-1),e=Math.floor(t),r=Math.ceil(t),a.from=new b(i,"from",parseFloat(n.getValue()[e])),a.to=new b(i,"to",parseFloat(n.getValue()[r])),a.progress=(t-e)/(r-e)):(a.from=this.from,a.to=this.to),a}}class Ot extends e{constructor(t,e,r){super(t,e,r),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var i,n=t["definitions"],e=this["children"];for(i of e)switch(i.type){case"font-face":var a=(this.fontFace=i).getStyle("font-family");a.hasValue()&&(n[a.getString()]=this);break;case"missing-glyph":this.missingGlyph=i;break;case"glyph":a=i;a.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[a.unicode]&&(this.glyphs[a.unicode]={}),this.glyphs[a.unicode][a.arabicForm]=a):this.glyphs[a.unicode]=a}}render(){}}class Tt extends e{constructor(t,e,r){super(t,e,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class Pt extends S{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class Ct extends w{constructor(){super(...arguments),this.type="tref"}getText(){var t=this.getHrefAttribute().getDefinition();if(t){t=t.children[0];if(t)return t.getText()}return""}}class Mt extends w{constructor(t,e,r){super(t,e,r),this.type="a";t=e.childNodes,r=t[0],e=0<t.length&&Array.from(t).every(t=>3===t.nodeType);this.hasText=e,this.text=e?this.getTextFromNode(r):""}getText(){return this.text}renderChildren(t){var e,r,i,n;this.hasText?(super.renderChildren(t),{document:i,x:e,y:r}=this,n=i.screen["mouse"],i=new b(i,"fontSize",g.parse(i.ctx.font).fontSize),n.isWorking()&&n.checkBoundingBox(this,new f(e,r-i.getPixels("y"),e+this.measureText(t),r))):0<this.children.length&&((n=new T(this.document,null)).children=this.children,n.parent=this,n.render(t))}onClick(){var t=this.document["window"];t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}}function Lt(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach(function(t){i()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class Et extends w{constructor(t,e,r){super(t,e,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);t=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(t)}getText(){return this.text}path(p){var t=this["dataArray"];p&&p.beginPath(),t.forEach(t=>{var{type:t,points:e}=t;switch(t){case m.LINE_TO:p&&p.lineTo(e[0],e[1]);break;case m.MOVE_TO:p&&p.moveTo(e[0],e[1]);break;case m.CURVE_TO:p&&p.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case m.QUAD_TO:p&&p.quadraticCurveTo(e[0],e[1],e[2],e[3]);break;case m.ARC:var[r,i,n,a,o,s,c,u]=e,l=a<n?n:a,h=a<n?1:n/a,a=a<n?a/n:1;p&&(p.translate(r,i),p.rotate(c),p.scale(h,a),p.arc(0,0,l,o,o+s,Boolean(1-u)),p.scale(1/h,1/a),p.rotate(-c),p.translate(-r,-i));break;case m.CLOSE_PATH:p&&p.closePath()}})}renderChildren(a){this.setTextData(a),a.save();var o=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),t=this["glyphInfo"],e=a.fillStyle;"underline"===o&&a.beginPath(),t.forEach((t,e)=>{var{p0:t,p1:r,rotation:i,text:n}=t;a.save(),a.translate(t.x,t.y),a.rotate(i),a.fillStyle&&a.fillText(n,0,0),a.strokeStyle&&a.strokeText(n,0,0),a.restore(),"underline"===o&&(0===e&&a.moveTo(t.x,t.y+s/8),a.lineTo(r.x,r.y+s/5))}),"underline"===o&&(a.lineWidth=s/20,a.strokeStyle=e,a.stroke(),a.closePath()),a.restore()}getLetterSpacingAt(){return this.letterSpacingCache[0<arguments.length&&void 0!==arguments[0]?arguments[0]:0]||0}findSegmentToFitChar(t,e,r,i,n,a,o,s,c){var t=this.measureText(t,s),s=(" "===s&&"justify"===e&&r<i&&(t+=(i-r)/n),-1<c&&(a+=this.getLetterSpacingAt(c)),this.textHeight/20),e=this.getEquidistantPointOnPath(a,s,0),i=this.getEquidistantPointOnPath(a+t,s,0),r={p0:e,p1:i},n=e&&i?Math.atan2(i.y-e.y,i.x-e.x):0;return o&&(c=Math.cos(Math.PI/2+n)*o,s=Math.cos(-n)*o,r.p0=C(C({},e),{},{x:e.x+c,y:e.y+s}),r.p1=C(C({},i),{},{x:i.x+c,y:i.y+s})),{offset:a+=t,segment:r,rotation:n}}measureText(t,e){var r=this["measuresCache"],e=e||this.getText();return r.has(e)?r.get(e):(t=this.measureTargetText(t,e),r.set(e,t),t)}setTextData(n){if(!this.glyphInfo){var t=this.getText(),a=t.split(""),o=t.split(" ").length-1,e=this.parent.getAttribute("dx").split().map(t=>t.getPixels("x")),s=this.parent.getAttribute("dy").getPixels("y"),c=this.parent.getStyle("text-anchor").getString("start"),r=this.getStyle("letter-spacing"),i=this.parent.getStyle("letter-spacing"),u=0,l=(r.hasValue()&&"inherit"!==r.getValue()?r.hasValue()&&"initial"!==r.getValue()&&"unset"!==r.getValue()&&(u=r.getPixels()):u=i.getPixels(),[]),h=t.length;this.letterSpacingCache=l;for(var p=0;p<h;p++)l.push(void 0!==e[p]?e[p]:u);var r=l.reduce((t,e,r)=>0!==r&&t+e||0,0),i=this.measureText(n),f=Math.max(i+r,0),d=(this.textWidth=i,this.textHeight=this.getFontSize(),this.glyphInfo=[],this.getPathLength()),t=this.getStyle("startOffset").getNumber(0)*d,y="end"!==c&&"right"!==c?"middle"!==c&&"center"!==c?0:-f/2:-f;y+=t,a.forEach((t,e)=>{var{offset:t,segment:r,rotation:i}=this.findSegmentToFitChar(n,c,f,d,o,y,s,t,e);y=t,r.p0&&r.p1&&this.glyphInfo.push({text:a[e],p0:r.p0,p1:r.p1,rotation:i})})}}parsePathData(t){if(this.pathLength=-1,!t)return[];var e=[],r=t["pathParser"];for(r.reset();!r.isEnd();){var i=r["current"],n=i?i.x:0,i=i?i.y:0,a=r.next(),o=a.type,s=[];switch(a.type){case m.MOVE_TO:this.pathM(r,s);break;case m.LINE_TO:o=this.pathL(r,s);break;case m.HORIZ_LINE_TO:o=this.pathH(r,s);break;case m.VERT_LINE_TO:o=this.pathV(r,s);break;case m.CURVE_TO:this.pathC(r,s);break;case m.SMOOTH_CURVE_TO:o=this.pathS(r,s);break;case m.QUAD_TO:this.pathQ(r,s);break;case m.SMOOTH_QUAD_TO:o=this.pathT(r,s);break;case m.ARC:s=this.pathA(r);break;case m.CLOSE_PATH:S.pathZ(r)}a.type!==m.CLOSE_PATH?e.push({type:o,points:s,start:{x:n,y:i},pathLength:this.calcLength(n,i,o,s)}):e.push({type:m.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){var{x:t,y:r}=S.pathM(t).point;e.push(t,r)}pathL(t,e){var{x:t,y:r}=S.pathL(t).point;return e.push(t,r),m.LINE_TO}pathH(t,e){var{x:t,y:r}=S.pathH(t).point;return e.push(t,r),m.LINE_TO}pathV(t,e){var{x:t,y:r}=S.pathV(t).point;return e.push(t,r),m.LINE_TO}pathC(t,e){var{point:t,controlPoint:r,currentPoint:i}=S.pathC(t);e.push(t.x,t.y,r.x,r.y,i.x,i.y)}pathS(t,e){var{point:t,controlPoint:r,currentPoint:i}=S.pathS(t);return e.push(t.x,t.y,r.x,r.y,i.x,i.y),m.CURVE_TO}pathQ(t,e){var{controlPoint:t,currentPoint:r}=S.pathQ(t);e.push(t.x,t.y,r.x,r.y)}pathT(t,e){var{controlPoint:t,currentPoint:r}=S.pathT(t);return e.push(t.x,t.y,r.x,r.y),m.QUAD_TO}pathA(t){var{rX:t,rY:e,sweepFlag:r,xAxisRotation:i,centp:n,a1:a,ad:o}=S.pathA(t);return 0===r&&0<o&&(o-=2*Math.PI),1===r&&o<0&&(o+=2*Math.PI),[n.x,n.y,t,e,a,o,i,r]}calcLength(t,e,r,i){var n=0,a=null,o=null,s=0;switch(r){case m.LINE_TO:return this.getLineLength(t,e,i[0],i[1]);case m.CURVE_TO:for(a=this.getPointOnCubicBezier(n=0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),s=.01;s<=1;s+=.01)o=this.getPointOnCubicBezier(s,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return n;case m.QUAD_TO:for(a=this.getPointOnQuadraticBezier(n=0,t,e,i[0],i[1],i[2],i[3]),s=.01;s<=1;s+=.01)o=this.getPointOnQuadraticBezier(s,t,e,i[0],i[1],i[2],i[3]),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return n;case m.ARC:var n=0,c=i[4],u=i[5],l=i[4]+u,h=Math.PI/180;if(Math.abs(c-l)<h&&(h=Math.abs(c-l)),a=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),u<0)for(s=c-h;l<s;s-=h)o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=c+h;s<l;s+=h)o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],s,0),n+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),n+=this.getLineLength(a.x,a.y,o.x,o.y)}return 0}getPointOnLine(t,e,r,i,n){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:r,s=(n-r)/(i-e+p),c=Math.sqrt(t*t/(1+s*s)),u=(i<e&&(c*=-1),s*c),l=null;if(i===e)l={x:a,y:o+u};else if((o-r)/(a-e+p)==s)l={x:a+c,y:o+u};else{u=this.getLineLength(e,r,i,n);if(u<p)return null;var h=(a-e)*(i-e)+(o-r)*(n-r),u=this.getLineLength(a,o,a=e+(h/=u*u)*(i-e),o=r+h*(n-r)),h=Math.sqrt(t*t-u*u),c=Math.sqrt(h*h/(1+s*s));i<e&&(c*=-1),l={x:a+c,y:o+s*c}}return l}getPointOnPath(t){var e=this.getPathLength(),r=0,i=null;if(!(t<-5e-5||e<t-5e-5)){var n,e=this["dataArray"];for(n of e){if(!n||!(n.pathLength<5e-5||r+n.pathLength+5e-5<t)){var a=t-r,o=0;switch(n.type){case m.LINE_TO:i=this.getPointOnLine(a,n.start.x,n.start.y,n.points[0],n.points[1],n.start.x,n.start.y);break;case m.ARC:var s=n.points[4],c=n.points[5],u=n.points[4]+c,o=s+a/n.pathLength*c;c<0&&o<u||0<=c&&u<o||(i=this.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],o,n.points[6]));break;case m.CURVE_TO:1<(o=a/n.pathLength)&&(o=1),i=this.getPointOnCubicBezier(o,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]);break;case m.QUAD_TO:1<(o=a/n.pathLength)&&(o=1),i=this.getPointOnQuadraticBezier(o,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3])}if(i)return i;break}r+=n.pathLength}}return null}getLineLength(t,e,r,i){return Math.sqrt((r-t)*(r-t)+(i-e)*(i-e))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce((t,e)=>0<e.pathLength?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,r,i,n,a,o,s,c){return{x:s*Q(t)+a*Z(t)+i*K(t)+e*J(t),y:c*Q(t)+o*Z(t)+n*K(t)+r*J(t)}}getPointOnQuadraticBezier(t,e,r,i,n,a,o){return{x:a*$(t)+i*tt(t)+e*et(t),y:o*$(t)+n*tt(t)+r*et(t)}}getPointOnEllipticalArc(t,e,r,i,n,a){var o=Math.cos(a),a=Math.sin(a),r=r*Math.cos(n),i=i*Math.sin(n);return{x:t+(r*o-i*a),y:e+(r*a+i*o)}}buildEquidistantCache(t,e){var r=this.getPathLength(),i=e||.25,n=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==i){this.equidistantCache={step:n,precision:i,points:[]};for(var a=0,o=0;o<=r;o+=i){var s=this.getPointOnPath(o),c=this.getPointOnPath(o+i);s&&c&&n<=(a+=this.getLineLength(s.x,s.y,c.x,c.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=n)}}}getEquidistantPointOnPath(t,e,r){return this.buildEquidistantCache(e,r),!(t<0||5e-5<t-this.getPathLength())&&(e=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1)),this.equidistantCache.points[e])||null}}var At=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class kt extends r{constructor(t,e,r){super(t,e,r),this.type="image",this.loaded=!1;e=this.getHrefAttribute().getString();e&&(r=e.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(e),t.images.push(this),r?this.loadSvg(e):this.loadImage(e),this.isSvg=r)}loadImage(e){var r=this;return a()(function*(){try{var t=yield r.document.createImage(e);r.image=t}catch(t){console.error('Error while loading image "'.concat(e,'":'),t)}r.loaded=!0})()}loadSvg(i){var n=this;return a()(function*(){var t=At.exec(i);if(t){var e=t[5];"base64"===t[4]?n.image=atob(e):n.image=decodeURIComponent(e)}else try{var r=yield(yield n.document.fetch(i)).text();n.image=r}catch(t){console.error('Error while loading image "'.concat(i,'":'),t)}n.loaded=!0})()}renderChildren(t){var{document:e,image:r,loaded:i}=this,n=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");i&&r&&o&&s&&(t.save(),t.translate(n,a),this.isSvg?((i=e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:s})).document.documentElement.parent=this,i.render()):(r=this.image,e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:r.width,height:s,desiredHeight:r.height}),this.loaded&&(void 0===r.complete||r.complete)&&t.drawImage(r,0,0)),t.restore())}getBoundingBox(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");return new f(t,e,t+r,e+i)}}class It extends r{constructor(){super(...arguments),this.type="symbol"}render(t){}}class Nt{constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}load(r,i){var n=this;return a()(function*(){try{var e=n["document"],t=(yield e.canvg.parser.load(i)).getElementsByTagName("font");Array.from(t).forEach(t=>{t=e.createElement(t);e.definitions[r]=t})}catch(t){console.error('Error while loading font "'.concat(i,'":'),t)}n.loaded=!0})()}}class Rt extends e{constructor(s,t,e){super(s,t,e),this.type="style",x(Array.from(t.childNodes).map(t=>t.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(t=>{var e,o,t=t.trim();t&&(e=(t=t.split("{"))[0].split(","),o=t[1].split(";"),e.forEach(t=>{var i,e,r,n,a,t=t.trim();t&&(i=s.styles[t]||{},o.forEach(t=>{var e=t.indexOf(":"),r=t.substr(0,e).trim(),t=t.substr(e+1,t.length-e).trim();r&&t&&(i[r]=new b(s,r,t))}),s.styles[t]=i,s.stylesSpecificity[t]=(r=[0,0,0],e=(e=t).replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),n=0,[e,n]=c(e,B),r[1]+=n,[e,n]=c(e,U),r[0]+=n,[e,n]=c(e,z),r[1]+=n,[e,n]=c(e,G),r[2]+=n,[e,n]=c(e,W),r[1]+=n,[e,n]=c(e,Y),r[1]+=n,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,n]=c(e,H),r[2]+=n,r.join("")),"@font-face"===t)&&(a=i["font-family"].getString().replace(/"|'/g,""),i.src.getString().split(",").forEach(t=>{0<t.indexOf('format("svg")')&&(t=V(t))&&new Nt(s).load(a,t)}))}))})}}Rt.parseExternalUrl=V;class jt extends r{constructor(){super(...arguments),this.type="use"}setContext(t){super.setContext(t);var e=this.getAttribute("x"),r=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),r.hasValue()&&t.translate(0,r.getPixels("y"))}path(t){var e=this["element"];e&&e.path(t)}renderChildren(t){var e,r,{document:i,element:n}=this;n&&("symbol"===(e=n).type&&((e=new O(i,null)).attributes.viewBox=new b(i,"viewBox",n.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new b(i,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new b(i,"overflow",n.getAttribute("overflow").getString()),e.children=n.children,n.styles.opacity=new b(i,"opacity",this.calculateOpacity())),"svg"===e.type&&(n=this.getStyle("width",!1,!0),r=this.getStyle("height",!1,!0),n.hasValue()&&(e.attributes.width=new b(i,"width",n.getString())),r.hasValue())&&(e.attributes.height=new b(i,"height",r.getString())),n=e.parent,e.parent=this,e.render(t),e.parent=n)}getBoundingBox(t){var e=this["element"];return e?e.getBoundingBox(t):null}elementTransform(){var{document:t,element:e}=this;return h.fromElement(t,e)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function M(t,e,r,i,n,a){return t[r*i*4+4*e+a]}function L(t,e,r,i,n,a,o){t[r*i*4+4*e+a]=o}function E(t,e,r){return t[e]*r}function A(t,e,r,i){return e+Math.cos(t)*r+Math.sin(t)*i}class Ft extends e{constructor(t,e,r){super(t,e,r),this.type="feColorMatrix";var i=y(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":var n=i[0],i=[.213+.787*n,.715-.715*n,.072-.072*n,0,0,.213-.213*n,.715+.285*n,.072-.072*n,0,0,.213-.213*n,.715-.715*n,.072+.928*n,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":n=i[0]*Math.PI/180;i=[A(n,.213,.787,-.213),A(n,.715,-.715,-.715),A(n,.072,-.072,.928),0,0,A(n,.213,-.213,.143),A(n,.715,.285,.14),A(n,.072,-.072,-.283),0,0,A(n,.213,-.213,-.787),A(n,.715,-.715,.715),A(n,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=i,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(t,e,r,i,n){for(var{includeOpacity:a,matrix:o}=this,s=t.getImageData(0,0,i,n),c=0;c<n;c++)for(var u=0;u<i;u++){var l=M(s.data,u,c,i,0,0),h=M(s.data,u,c,i,0,1),p=M(s.data,u,c,i,0,2),f=M(s.data,u,c,i,0,3),d=E(o,0,l)+E(o,1,h)+E(o,2,p)+E(o,3,f)+E(o,4,1),y=E(o,5,l)+E(o,6,h)+E(o,7,p)+E(o,8,f)+E(o,9,1),g=E(o,10,l)+E(o,11,h)+E(o,12,p)+E(o,13,f)+E(o,14,1),l=E(o,15,l)+E(o,16,h)+E(o,17,p)+E(o,18,f)+E(o,19,1);a&&(g=y=d=0,l*=f/255),L(s.data,u,c,i,0,0,d),L(s.data,u,c,i,0,1,y),L(s.data,u,c,i,0,2,g),L(s.data,u,c,i,0,3,l)}t.clearRect(0,0,i,n),t.putImageData(s,0,0)}}class k extends e{constructor(){super(...arguments),this.type="mask"}apply(e,t){var r,i=this["document"],n=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y"),c=(o||s||(r=new f,this.children.forEach(t=>{r.addBoundingBox(t.getBoundingBox(e))}),n=Math.floor(r.x1),a=Math.floor(r.y1),o=Math.floor(r.width),s=Math.floor(r.height)),this.removeStyles(t,k.ignoreStyles)),u=i.createCanvas(n+o,a+s),l=u.getContext("2d"),h=(i.screen.setDefaults(l),this.renderChildren(l),new Ft(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(l,0,0,n+o,a+s),i.createCanvas(n+o,a+s)),p=h.getContext("2d");i.screen.setDefaults(p),t.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=l.createPattern(u,"no-repeat"),p.fillRect(0,0,n+o,a+s),e.fillStyle=p.createPattern(h,"no-repeat"),e.fillRect(0,0,n+o,a+s),this.restoreStyles(t,c)}render(t){}}k.ignoreStyles=["mask","transform","clip-path"];var Dt=()=>{};class Vt extends e{constructor(){super(...arguments),this.type="clipPath"}apply(r){var i=this["document"],n=Reflect.getPrototypeOf(r),{beginPath:t,closePath:a}=r;n&&(n.beginPath=Dt,n.closePath=Dt),Reflect.apply(t,r,[]),this.children.forEach(t=>{var e;void 0!==t.path&&((e=(e=void 0!==t.elementTransform?t.elementTransform():null)||h.fromElement(i,t))&&e.apply(r),t.path(r),n&&(n.closePath=a),e)&&e.unapply(r)}),Reflect.apply(a,r,[]),r.clip(),n&&(n.beginPath=t,n.closePath=a)}render(t){}}class Bt extends e{constructor(){super(...arguments),this.type="filter"}apply(t,e){var r,i,n,a,o,s,c,u,{document:l,children:h}=this,p=e.getBoundingBox(t);p&&(i=r=0,h.forEach(t=>{t=t.extraFilterDistance||0;r=Math.max(r,t),i=Math.max(i,t)}),s=Math.floor(p.width),o=Math.floor(p.height),a=o+2*i,(n=s+2*r)<1||a<1||(o=Math.floor(p.x),s=Math.floor(p.y),p=this.removeStyles(e,Bt.ignoreStyles),c=l.createCanvas(n,a),u=c.getContext("2d"),l.screen.setDefaults(u),u.translate(-o+r,-s+i),e.render(u),h.forEach(t=>{"function"==typeof t.apply&&t.apply(u,0,0,n,a)}),t.drawImage(c,0,0,n,a,o-r,s-i,n,a),this.restoreStyles(e,p)))}render(t){}}Bt.ignoreStyles=["filter","transform","clip-path"];class Ut extends e{constructor(t,e,r){super(t,e,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(t,e,r,i,n){}}class zt extends e{constructor(){super(...arguments),this.type="feMorphology"}apply(t,e,r,i,n){}}class Gt extends e{constructor(){super(...arguments),this.type="feComposite"}apply(t,e,r,i,n){}}class Wt extends e{constructor(t,e,r){super(t,e,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(t,e,r,i,n){var{document:a,blurRadius:o}=this,s=a.window?a.window.document.body:null,t=t.canvas;t.id=a.getUniqueId(),s&&(t.style.display="none",s.appendChild(t)),Object(F.a)(t,e,r,i,n,o),s&&s.removeChild(t)}}class Yt extends e{constructor(){super(...arguments),this.type="title"}}class Ht extends e{constructor(){super(...arguments),this.type="desc"}}t={svg:O,rect:dt,circle:yt,ellipse:gt,line:mt,polyline:vt,polygon:class extends vt{constructor(){super(...arguments),this.type="polygon"}path(t){var e=super.path(t),[{x:r,y:i}]=this.points;return t&&(t.lineTo(r,i),t.closePath()),e}},path:S,pattern:xt,marker:bt,defs:St,linearGradient:class extends wt{constructor(t,e,r){super(t,e,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(t,e){var r="objectBoundingBox"===this.getGradientUnits(),e=r?e.getBoundingBox(t):null;if(r&&!e)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=r?e.x+e.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),n=r?e.y+e.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=r?e.x+e.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),r=r?e.y+e.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===a&&n===r?null:t.createLinearGradient(i,n,a,r)}},radialGradient:class extends wt{constructor(t,e,r){super(t,e,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(t,e){var r="objectBoundingBox"===this.getGradientUnits(),e=e.getBoundingBox(t);if(r&&!e)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=r?e.x+e.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),n=r?e.y+e.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=i,o=n,r=(this.getAttribute("fx").hasValue()&&(a=r?e.x+e.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(o=r?e.y+e.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y")),r?(e.width+e.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels()),e=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,o,e,i,n,r)}},stop:_t,animate:P,animateColor:class extends P{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var t,e,{progress:r,from:i,to:n}=this.getProgress(),i=new o.a(i.getColor()),n=new o.a(n.getColor());return i.ok&&n.ok?(t=i.r+(n.r-i.r)*r,e=i.g+(n.g-i.g)*r,n=i.b+(n.b-i.b)*r,"rgb(".concat(Math.floor(t),", ").concat(Math.floor(e),", ").concat(Math.floor(n),")")):this.getAttribute("from").getColor()}},animateTransform:class extends P{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:r,from:t,to:e}=this.getProgress(),t=y(t.getString()),i=y(e.getString());return t.map((t,e)=>{return t+(i[e]-t)*r}).join(" ")}},font:Ot,"font-face":Tt,"missing-glyph":Pt,glyph:pt,text:w,tspan:_,tref:Ct,a:Mt,textPath:Et,image:kt,g:T,symbol:It,style:Rt,use:jt,mask:k,clipPath:Vt,filter:Bt,feDropShadow:Ut,feMorphology:zt,feComposite:Gt,feColorMatrix:Ft,feGaussianBlur:Wt,title:Yt,desc:Ht};function Xt(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function qt(){return(qt=a()(function*(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=document.createElement("img");return t&&(r.crossOrigin="Anonymous"),new Promise((t,a)=>{r.onload=()=>{t(r)},r.onerror=(t,e,r,i,n)=>{a(n)},r.src=e})})).apply(this,arguments)}class I{constructor(t){var{rootEmSize:e=12,emSize:r=12,createCanvas:i=I.createCanvas,createImage:n=I.createImage,anonymousCrossOrigin:a}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=r,this.createCanvas=i,this.createImage=this.bindCreateImage(n,a),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(r,i){return"boolean"==typeof i?(t,e)=>r(t,"boolean"==typeof e?e:i):r}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var t=this["emSizeStack"];return t[t.length-1]}set emSize(t){var e=this["emSizeStack"];e.push(t)}popEmSize(){var t=this["emSizeStack"];t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){t=this.createElement(t.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t}createElement(t){var e=t.nodeName.replace(/^[^:]+:/,""),e=I.elementTypes[e];return new(void 0!==e?e:lt)(this,t)}createTextNode(t){return new ft(this,t)}setViewBox(t){this.screen.setViewBox(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach(function(t){i()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({document:this},t))}}function Qt(e,t){var r,i=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)),i}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach(function(t){i()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}I.createCanvas=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},I.createImage=function(t){return qt.apply(this,arguments)},I.elementTypes=t;class R{constructor(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=(this.parser=new u(r),this.screen=new s(t,r),this.options=r,new I(this,r)),r=t.createDocumentElement(e);this.document=t,this.documentElement=r}static from(r,i){var n=arguments;return a()(function*(){var t=2<n.length&&void 0!==n[2]?n[2]:{},e=yield new u(t).parse(i);return new R(r,e,t)})()}static fromString(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=new u(r).parseFromString(e);return new R(t,e,r)}fork(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return R.from(t,e,N(N({},this.options),r))}forkString(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return R.fromString(t,e,N(N({},this.options),r))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var t=arguments,e=this;return a()(function*(){e.start(N({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},0<t.length&&void 0!==t[0]?t[0]:{})),yield e.ready(),e.stop()})()}start(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},{documentElement:e,screen:r,options:i}=this;r.start(e,N(N({enableRedraw:!0},i),t))}stop(){this.screen.stop()}resize(t){this.documentElement.resize(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,2<arguments.length&&void 0!==arguments[2]&&arguments[2])}}}.call(this,Kt("8oxB"))},E9LY:function(t,e,r){"use strict";var i=r("4zBA"),n=r("0Dky"),a=r("Fib7"),o=r("Gi26"),s=r("g6v/"),c=r("Xnc8").CONFIGURABLE,u=r("iSVu"),r=r("afO8"),l=r.enforce,h=r.get,p=String,f=Object.defineProperty,d=i("".slice),y=i("".replace),g=i([].join),m=s&&!n(function(){return 8!==f(function(){},"length",{value:8}).length}),v=String(String).split("String"),r=t.exports=function(t,e,r){"Symbol("===d(p(e),0,7)&&(e="["+y(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(s?f(t,"name",{value:e,configurable:!0}):t.name=e),m&&r&&o(r,"arity")&&t.length!==r.arity&&f(t,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?s&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}r=l(t);return o(r,"source")||(r.source=g(v,"string"==typeof e?e:"")),t};Function.prototype.toString=r(function(){return a(this)&&h(this).source||u(this)},"toString")},E9XD:function(t,e,r){"use strict";var i=r("I+eb"),n=r("1Y/n").left,a=r("pkCn"),o=r("LQDL");i({target:"Array",proto:!0,forced:!r("YF1G")&&79<o&&o<83||!a("reduce")},{reduce:function(t){var e=arguments.length;return n(this,t,e,1<e?arguments[1]:void 0)}})},EHx7:function(t,e,r){"use strict";var i=r("0Dky"),n=r("2oRo").RegExp;t.exports=i(function(){var t=n("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},EnZy:function(t,e,r){"use strict";var l=r("K6Rb"),h=r("xluM"),i=r("4zBA"),n=r("14Sl"),m=r("glrk"),a=r("cjT7"),p=r("ROdP"),f=r("HYAF"),v=r("SEBh"),x=r("iqWW"),b=r("UMSQ"),S=r("V37c"),o=r("3Eq5"),w=r("Ta7t"),_=r("FMNM"),O=r("kmMV"),s=r("n3/R"),r=r("0Dky"),T=s.UNSUPPORTED_Y,P=Math.min,C=[].push,M=i(/./.exec),L=i(C),E=i("".slice);n("split",function(n,d,y){var g="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var r=S(f(this)),i=void 0===e?4294967295:e>>>0;if(0==i)return[];if(void 0===t)return[r];if(!p(t))return h(d,r,t,i);for(var n,a,o,s=[],e=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,u=new RegExp(t.source,e+"g");(n=h(O,u,r))&&!(c<(a=u.lastIndex)&&(L(s,E(r,c,n.index)),1<n.length&&n.index<r.length&&l(C,s,w(n,1)),o=n[0].length,c=a,i<=s.length));)u.lastIndex===n.index&&u.lastIndex++;return c===r.length?!o&&M(u,"")||L(s,""):L(s,E(r,c)),i<s.length?w(s,0,i):s}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:h(d,this,t,e)}:d;return[function(t,e){var r=f(this),i=a(t)?void 0:o(t,n);return i?h(i,t,r,e):h(g,S(r),t,e)},function(t,e){var r=m(this),i=S(t),t=y(g,r,i,e,g!==d);if(t.done)return t.value;var t=v(r,RegExp),n=r.unicode,a=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(T?"g":"y"),o=new t(T?"^(?:"+r.source+")":r,a),s=void 0===e?4294967295:e>>>0;if(0==s)return[];if(0===i.length)return null===_(o,i)?[i]:[];for(var c=0,u=0,l=[];u<i.length;){o.lastIndex=T?0:u;var h,p=_(o,T?E(i,u):i);if(null===p||(h=P(b(o.lastIndex+(T?u:0)),i.length))===c)u=x(i,u,n);else{if(L(l,E(i,c,u)),l.length===s)return l;for(var f=1;f<=p.length-1;f++)if(L(l,p[f]),l.length===s)return l;u=c=h}}return L(l,E(i,c)),l}]},!!r(function(){var t=/(?:)/,e=t.exec,t=(t.exec=function(){return e.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),T)},FMNM:function(t,e,r){"use strict";var i=r("xluM"),n=r("glrk"),a=r("Fib7"),o=r("xrYK"),s=r("kmMV"),c=TypeError;t.exports=function(t,e){var r=t.exec;if(a(r))return null!==(r=i(r,t,e))&&n(r),r;if("RegExp"===o(t))return i(s,t,e);throw new c("RegExp#exec called on incompatible receiver")}},FOUG:function(t,e,r){"use strict";var i=r("I+eb"),l=r("xluM"),h=r("We1y"),n=r("8GlL"),a=r("5mdu"),p=r("ImZN");i({target:"Promise",stat:!0,forced:r("Xu1c")},{all:function(t){var s=this,e=n.f(s),c=e.resolve,u=e.reject,r=a(function(){var i=h(s.resolve),n=[],a=0,o=1;p(t,function(t){var e=a++,r=!1;o++,l(i,s,t).then(function(t){r||(r=!0,n[e]=t,--o)||c(n)},u)}),--o||c(n)});return r.error&&u(r.value),e.promise}})},Fib7:function(t,e,r){"use strict";var r=r("jqES"),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},"G+Rx":function(t,e,r){"use strict";r=r("0GbY");t.exports=r("document","documentElement")},GarU:function(t,e,r){"use strict";var i=r("OpvP"),n=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new n("Incorrect invocation")}},Gi26:function(t,e,r){"use strict";var i=r("4zBA"),n=r("ewvW"),a=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return a(n(t),e)}},HH4o:function(t,e,r){"use strict";var n=r("tiKp")("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[n]=function(){return this},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){try{if(!e&&!a)return!1}catch(t){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},HNyW:function(t,e,r){"use strict";r=r("NC/Y");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},HYAF:function(t,e,r){"use strict";var i=r("cjT7"),n=TypeError;t.exports=function(t){if(i(t))throw new n("Can't call method on "+t);return t}},"I+eb":function(t,e,r){"use strict";var u=r("2oRo"),l=r("Bs8V").f,h=r("kRJp"),p=r("yy0I"),f=r("Y3Q8"),d=r("6JNq"),y=r("lMq5");t.exports=function(t,e){var r,i,n,a=t.target,o=t.global,s=t.stat,c=o?u:s?u[a]||f(a,{}):(u[a]||{}).prototype;if(c)for(r in e){if(i=e[r],n=t.dontCallGetSet?(n=l(c,r))&&n.value:c[r],!y(o?r:a+(s?".":"#")+r,t.forced)&&void 0!==n){if(typeof i==typeof n)continue;d(i,n)}(t.sham||n&&n.sham)&&h(i,"sham",!0),p(c,r,i,t)}}},I8vh:function(t,e,r){"use strict";var i=r("WSbT"),n=Math.max,a=Math.min;t.exports=function(t,e){t=i(t);return t<0?n(t+e,0):a(t,e)}},ImZN:function(t,e,r){"use strict";function m(t,e){this.stopped=t,this.result=e}var v=r("A2ZE"),x=r("xluM"),b=r("glrk"),S=r("DVFp"),w=r("6VoE"),_=r("B/qT"),O=r("OpvP"),T=r("mh/w"),P=r("NaFW"),C=r("KmKo"),M=TypeError,L=m.prototype;t.exports=function(t,e,r){function i(t){return a&&C(a,"normal",t),new m(!0,t)}function n(t){return p?(b(t),y?g(t[0],t[1],i):g(t[0],t[1])):y?g(t,i):g(t)}var a,o,s,c,u,l,h=r&&r.that,p=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),y=!(!r||!r.INTERRUPTED),g=v(e,h);if(f)a=t.iterator;else if(d)a=t;else{if(!(r=P(t)))throw new M(S(t)+" is not iterable");if(w(r)){for(o=0,s=_(t);o<s;o++)if((c=n(t[o]))&&O(L,c))return c;return new m(!1)}a=T(t,r)}for(u=(f?t:a).next;!(l=x(u,a)).done;){try{c=n(l.value)}catch(t){C(a,"throw",t)}if("object"==typeof c&&c&&O(L,c))return c}return new m(!1)}},JBy8:function(t,e,r){"use strict";var i=r("yoRg"),n=r("eDl+").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},JTJg:function(t,e,r){"use strict";var i=r("I+eb"),n=r("4zBA"),a=r("WjRb"),o=r("HYAF"),s=r("V37c"),r=r("qxPZ"),c=n("".indexOf);i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~c(s(o(this)),s(a(t)),1<arguments.length?arguments[1]:void 0)}})},JfAA:function(t,e,r){"use strict";var i=r("Xnc8").PROPER,n=r("yy0I"),a=r("glrk"),o=r("V37c"),s=r("0Dky"),c=r("kNi0"),r="toString",u=RegExp.prototype[r],s=s(function(){return"/a/b"!==u.call({source:"a",flags:"b"})}),i=i&&u.name!==r;(s||i)&&n(RegExp.prototype,r,function(){var t=a(this);return"/"+o(t.source)+"/"+o(c(t))},{unsafe:!0})},JiZb:function(t,e,r){"use strict";var i=r("0GbY"),n=r("7dAM"),a=r("tiKp"),o=r("g6v/"),s=a("species");t.exports=function(t){t=i(t);o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},Junv:function(t,e,r){"use strict";var i=r("I+eb"),n=r("4zBA"),a=r("6LWA"),o=n([].reverse),r=[1,2];i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),o(this)}})},K6Rb:function(t,e,r){"use strict";var r=r("QNWe"),i=Function.prototype,n=i.apply,a=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(n):function(){return a.apply(n,arguments)})},KmKo:function(t,e,r){"use strict";var a=r("xluM"),o=r("glrk"),s=r("3Eq5");t.exports=function(t,e,r){var i,n;o(t);try{if(!(i=s(t,"return"))){if("throw"===e)throw r;return r}i=a(i,t)}catch(t){n=!0,i=t}if("throw"===e)throw r;if(n)throw i;return o(i),r}},LKBx:function(t,e,r){"use strict";var i=r("I+eb"),n=r("RiVN"),a=r("Bs8V").f,o=r("UMSQ"),s=r("V37c"),c=r("WjRb"),u=r("HYAF"),l=r("qxPZ"),r=r("xDBR"),h=n("".startsWith),p=n("".slice),f=Math.min,n=l("startsWith");i({target:"String",proto:!0,forced:!!(r||n||!(l=a(String.prototype,"startsWith"))||l.writable)&&!n},{startsWith:function(t){var e=s(u(this)),r=(c(t),o(f(1<arguments.length?arguments[1]:void 0,e.length))),t=s(t);return h?h(e,t,r):p(e,r,r+t.length)===t}})},LPSS:function(t,e,r){"use strict";function i(t){return function(){L(t)}}function n(t){L(t.data)}function a(t){c.postMessage(T(t),o.protocol+"//"+o.host)}var o,s,c=r("2oRo"),u=r("K6Rb"),l=r("A2ZE"),h=r("Fib7"),p=r("Gi26"),f=r("0Dky"),d=r("G+Rx"),y=r("82ph"),g=r("zBJ4"),m=r("1tal"),v=r("HNyW"),r=r("YF1G"),x=c.setImmediate,b=c.clearImmediate,S=c.process,w=c.Dispatch,_=c.Function,O=c.MessageChannel,T=c.String,P=0,C={},M="onreadystatechange",L=(f(function(){o=c.location}),function(t){var e;p(C,t)&&(e=C[t],delete C[t],e())});x&&b||(x=function(t){m(arguments.length,1);var e=h(t)?t:_(t),r=y(arguments,1);return C[++P]=function(){u(e,void 0,r)},s(P),P},b=function(t){delete C[t]},r?s=function(t){S.nextTick(i(t))}:w&&w.now?s=function(t){w.now(i(t))}:O&&!v?(v=(r=new O).port2,r.port1.onmessage=n,s=l(v.postMessage,v)):c.addEventListener&&h(c.postMessage)&&!c.importScripts&&o&&"file:"!==o.protocol&&!f(a)?(s=a,c.addEventListener("message",n,!1)):s=M in g("script")?function(t){d.appendChild(g("script"))[M]=function(){d.removeChild(this),L(t)}}:function(t){setTimeout(i(t),0)}),t.exports={set:x,clear:b}},LQDL:function(t,e,r){"use strict";var i,n,a=r("2oRo"),r=r("NC/Y"),o=a.process,a=a.Deno,o=o&&o.versions||a&&a.version,a=o&&o.v8;!(n=a?0<(i=a.split("."))[0]&&i[0]<4?1:+(i[0]+i[1]):n)&&r&&(!(i=r.match(/Edge\/(\d+)/))||74<=i[1])&&(i=r.match(/Chrome\/(\d+)/))&&(n=+i[1]),t.exports=n},"N+g0":function(t,e,r){"use strict";var i=r("g6v/"),n=r("rtlb"),s=r("m/L8"),c=r("glrk"),u=r("/GqU"),l=r("33Wh");e.f=i&&!n?Object.defineProperties:function(t,e){c(t);for(var r,i=u(e),n=l(e),a=n.length,o=0;o<a;)s.f(t,r=n[o++],i[r]);return t}},"NC/Y":function(t,e,r){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},NSnw:function(t,e,r){"use strict";var i=r("I+eb"),a=r("xluM"),o=r("We1y"),s=r("8GlL"),c=r("5mdu"),u=r("ImZN");i({target:"Promise",stat:!0,forced:r("Xu1c")},{race:function(t){var r=this,i=s.f(r),n=i.reject,e=c(function(){var e=o(r.resolve);u(t,function(t){a(e,r,t).then(i.resolve,n)})});return e.error&&n(e.value),i.promise}})},NaFW:function(t,e,r){"use strict";var i=r("9d/t"),n=r("3Eq5"),a=r("cjT7"),o=r("P4y1"),s=r("tiKp")("iterator");t.exports=function(t){if(!a(t))return n(t,s)||n(t,"@@iterator")||o[i(t)]}},O741:function(t,e,r){"use strict";var i=r("Fib7"),n=String,a=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw new a("Can't set "+n(t)+" as a prototype")}},OpvP:function(t,e,r){"use strict";r=r("4zBA");t.exports=r({}.isPrototypeOf)},P4y1:function(t,e,r){"use strict";t.exports={}},QNWe:function(t,e,r){"use strict";r=r("0Dky");t.exports=!r(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},R1RC:function(t,e,r){"use strict";t.exports=function(t,e){return{value:t,done:e}}},RK3t:function(t,e,r){"use strict";var i=r("4zBA"),n=r("0Dky"),a=r("xrYK"),o=Object,s=i("".split);t.exports=n(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===a(t)?s(t,""):o(t)}:o},RN6c:function(t,e,r){"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},RNIs:function(t,e,r){"use strict";var i=r("tiKp"),n=r("fHMY"),r=r("m/L8").f,a=i("unscopables"),o=Array.prototype;void 0===o[a]&&r(o,a,{configurable:!0,value:n(null)}),t.exports=function(t){o[a][t]=!0}},ROdP:function(t,e,r){"use strict";var i=r("hh1v"),n=r("xrYK"),a=r("tiKp")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"===n(t))}},RiVN:function(t,e,r){"use strict";var i=r("xrYK"),n=r("4zBA");t.exports=function(t){if("Function"===i(t))return n(t)}},Rm1S:function(t,e,r){"use strict";var n=r("xluM"),i=r("14Sl"),u=r("glrk"),a=r("cjT7"),l=r("UMSQ"),h=r("V37c"),o=r("HYAF"),p=r("3Eq5"),f=r("iqWW"),d=r("FMNM");i("match",function(i,s,c){return[function(t){var e=o(this),r=a(t)?void 0:p(t,i);return r?n(r,t,e):new RegExp(t)[i](h(e))},function(t){var e=u(this),r=h(t),t=c(s,e,r);if(t.done)return t.value;if(!e.global)return d(e,r);for(var i=e.unicode,n=[],a=e.lastIndex=0;null!==(o=d(e,r));){var o=h(o[0]);""===(n[a]=o)&&(e.lastIndex=f(r,l(e.lastIndex),i)),a++}return 0===a?null:n}]})},Rzhe:function(t,e,r){"use strict";var i=r("2oRo"),n=r("0lZ3"),a=r("Fib7"),o=r("lMq5"),s=r("iSVu"),c=r("tiKp"),u=r("YGnB"),l=r("bFkh"),h=r("xDBR"),p=r("LQDL"),f=n&&n.prototype,d=c("species"),y=!1,g=a(i.PromiseRejectionEvent),r=o("Promise",function(){var t=s(n),e=t!==String(n);if(!e&&66===p)return!0;if(h&&(!f.catch||!f.finally))return!0;if(!p||p<51||!/native code/.test(t)){var t=new n(function(t){t(1)}),r=function(t){t(function(){},function(){})};if((t.constructor={})[d]=r,!(y=t.then(function(){})instanceof r))return!0}return!e&&(u||l)&&!g});t.exports={CONSTRUCTOR:r,REJECTION_EVENT:g,SUBCLASSING:y}},SEBh:function(t,e,r){"use strict";var i=r("glrk"),n=r("UIe5"),a=r("cjT7"),o=r("tiKp")("species");t.exports=function(t,e){var t=i(t).constructor;return void 0===t||a(t=i(t)[o])?e:n(t)}},SFrS:function(t,e,r){"use strict";var n=r("xluM"),a=r("Fib7"),o=r("hh1v"),s=TypeError;t.exports=function(t,e){var r,i;if("string"===e&&a(r=t.toString)&&!o(i=n(r,t)))return i;if(a(r=t.valueOf)&&!o(i=n(r,t)))return i;if("string"!==e&&a(r=t.toString)&&!o(i=n(r,t)))return i;throw new s("Can't convert object to primitive value")}},SYor:function(t,e,r){"use strict";var i=r("I+eb"),n=r("WKiH").trim;i({target:"String",proto:!0,forced:r("yNLB")("trim")},{trim:function(){return n(this)}})},TWQb:function(t,e,r){"use strict";function i(s){return function(t,e,r){var i,n=c(t),a=l(n),o=u(r,a);if(s&&e!=e){for(;o<a;)if((i=n[o++])!=i)return!0}else for(;o<a;o++)if((s||o in n)&&n[o]===e)return s||o||0;return!s&&-1}}var c=r("/GqU"),u=r("I8vh"),l=r("B/qT");t.exports={includes:i(!0),indexOf:i(!1)}},Ta7t:function(t,e,r){"use strict";var c=r("I8vh"),u=r("B/qT"),l=r("hBjN"),h=Array,p=Math.max;t.exports=function(t,e,r){for(var i=u(t),n=c(e,i),a=c(void 0===r?i:r,i),o=h(p(a-n,0)),s=0;n<a;n++,s++)l(o,s,t[n]);return o.length=s,o}},UIe5:function(t,e,r){"use strict";var i=r("aO6C"),n=r("DVFp"),a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(n(t)+" is not a constructor")}},UMSQ:function(t,e,r){"use strict";var i=r("WSbT"),n=Math.min;t.exports=function(t){return 0<t?n(i(t),9007199254740991):0}},UxlC:function(t,e,r){"use strict";var w=r("K6Rb"),n=r("xluM"),i=r("4zBA"),a=r("14Sl"),o=r("0Dky"),_=r("glrk"),O=r("Fib7"),s=r("cjT7"),T=r("WSbT"),P=r("UMSQ"),C=r("V37c"),c=r("HYAF"),M=r("iqWW"),u=r("3Eq5"),L=r("DLK6"),E=r("FMNM"),l=r("tiKp")("replace"),A=Math.max,k=Math.min,I=i([].concat),N=i([].push),R=i("".indexOf),j=i("".slice),r="$0"==="a".replace(/./,"$0"),h=!!/./[l]&&""===/./[l]("a","$0");a("replace",function(t,x,b){var S=h?"$":"$0";return[function(t,e){var r=c(this),i=s(t)?void 0:u(t,l);return i?n(i,t,r,e):n(x,C(r),t,e)},function(t,e){var r=_(this),i=C(t);if("string"==typeof e&&-1===R(e,S)&&-1===R(e,"$<")){t=b(x,r,i,e);if(t.done)return t.value}for(var n,a=O(e),o=(a||(e=C(e)),r.global),s=(o&&(n=r.unicode,r.lastIndex=0),[]);null!==(p=E(r,i))&&(N(s,p),o);)""===C(p[0])&&(r.lastIndex=M(i,P(r.lastIndex),n));for(var c,u="",l=0,h=0;h<s.length;h++){for(var p,f=C((p=s[h])[0]),d=A(k(T(p.index),i.length),0),y=[],g=1;g<p.length;g++)N(y,void 0===(c=p[g])?c:String(c));var m=p.groups,v=a?(v=I([f],y,d,i),void 0!==m&&N(v,m),C(w(e,void 0,v))):L(f,i,d,y,m,e);l<=d&&(u+=j(i,l,d)+v,l=d+f.length)}return u+j(i,l)}]},!!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!r||h)},V37c:function(t,e,r){"use strict";var i=r("9d/t"),n=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return n(t)}},VpIT:function(t,e,r){"use strict";var i=r("xDBR"),n=r("xs3f");(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.1",mode:i?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.1/LICENSE",source:"https://github.com/zloirock/core-js"})},Vu81:function(t,e,r){"use strict";var i=r("0GbY"),n=r("4zBA"),a=r("JBy8"),o=r("dBg+"),s=r("glrk"),c=n([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=a.f(s(t)),r=o.f;return r?c(e,r(t)):e}},WJkJ:function(t,e,r){"use strict";t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},WKiH:function(t,e,r){"use strict";function i(e){return function(t){t=o(a(t));return 1&e&&(t=s(t,c,"")),t=2&e?s(t,u,"$1"):t}}var n=r("4zBA"),a=r("HYAF"),o=r("V37c"),r=r("WJkJ"),s=n("".replace),c=RegExp("^["+r+"]+"),u=RegExp("(^|[^"+r+"])["+r+"]+$");t.exports={start:i(1),end:i(2),trim:i(3)}},WOGj:function(t,e){t.exports=function(t){this.ok=!1,this.alpha=1,t=(t=(t="#"==t.charAt(0)?t.substr(1,6):t).replace(/ /g,"")).toLowerCase();for(var l={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},h=(t=l[t]||t,[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}]),e=0;e<h.length;e++){var r=h[e].re,i=h[e].process,r=r.exec(t);r&&(i=i(r),this.r=i[0],this.g=i[1],this.b=i[2],3<i.length&&(this.alpha=i[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return"#"+(t=1==t.length?"0"+t:t)+(e=1==e.length?"0"+e:e)+(r=1==r.length?"0"+r:r)},this.getHelpXML=function(){for(var t,e=new Array,r=0;r<h.length;r++)for(var i=h[r].example,n=0;n<i.length;n++)e[e.length]=i[n];for(t in l)e[e.length]=t;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(r=0;r<e.length;r++)try{var o=document.createElement("li"),s=new RGBColor(e[r]),c=document.createElement("div"),u=(c.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),c.appendChild(document.createTextNode("test")),document.createTextNode(" "+e[r]+" -> "+s.toRGB()+" -> "+s.toHex()));o.appendChild(c),o.appendChild(u),a.appendChild(o)}catch(t){}return a}}},WSbT:function(t,e,r){"use strict";var i=r("tC4l");t.exports=function(t){t=+t;return t!=t||0==t?0:i(t)}},We1y:function(t,e,r){"use strict";var i=r("Fib7"),n=r("DVFp"),a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(n(t)+" is not a function")}},WjRb:function(t,e,r){"use strict";var i=r("ROdP"),n=TypeError;t.exports=function(t){if(i(t))throw new n("The method doesn't accept regular expressions");return t}},XGwC:function(t,e,r){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},Xn6M:function(j,F,t){"use strict";function a(t,e){var r,i,n,a,o=e.value,s=e.state===P,c=s?t.ok:t.fail,u=t.resolve,l=t.reject,h=t.domain;try{c?(s||(e.rejection===M&&(a=e,d(y,f,function(){var t=a.facade;p?_.emit("rejectionHandled",t):A($,t,a.value)})),e.rejection=C),!0===c?r=o:(h&&h.enter(),r=c(o),h&&(h.exit(),n=!0)),r===t.promise?l(new S("Promise-chain cycle")):(i=L(r))?d(i,r,u,l):u(r)):l(o)}catch(t){h&&!n&&h.exit(),l(t)}}var r,e,i,D=t("I+eb"),V=t("xDBR"),p=t("YF1G"),f=t("2oRo"),d=t("xluM"),n=t("yy0I"),o=t("0rvr"),B=t("1E5z"),U=t("JiZb"),z=t("We1y"),s=t("Fib7"),G=t("hh1v"),W=t("GarU"),Y=t("SEBh"),y=t("LPSS").set,c=t("tXUg"),H=t("RN6c"),X=t("5mdu"),q=t("AbTg"),u=t("afO8"),l=t("0lZ3"),h=t("Rzhe"),t=t("8GlL"),g="Promise",m=h.CONSTRUCTOR,Q=h.REJECTION_EVENT,h=h.SUBCLASSING,v=u.getterFor(g),Z=u.set,u=l&&l.prototype,x=l,b=u,S=f.TypeError,w=f.document,_=f.process,O=t.f,K=O,J=!!(w&&w.createEvent&&f.dispatchEvent),T="unhandledrejection",$="rejectionhandled",P=1,tt=2,C=1,M=2,L=function(t){var e;return!(!G(t)||!s(e=t.then))&&e},E=function(r,n){r.notified||(r.notified=!0,c(function(){for(var t,i,e=r.reactions;t=e.get();)a(t,r);r.notified=!1,n&&!r.rejection&&(i=r,d(y,f,function(){var t=i.facade,e=i.value,r=k(i);if(r&&(r=X(function(){p?_.emit("unhandledRejection",e,t):A(T,t,e)}),i.rejection=p||k(i)?M:C,r.error))throw r.value}))}))},A=function(t,e,r){var i;J?((i=w.createEvent("Event")).promise=e,i.reason=r,i.initEvent(t,!1,!0),f.dispatchEvent(i)):i={promise:e,reason:r},!Q&&(e=f["on"+t])?e(i):t===T&&H("Unhandled promise rejection",r)},k=function(t){return t.rejection!==C&&!t.parent},I=function(e,r,i){return function(t){e(r,t,i)}},N=function(t,e,r){t.done||(t.done=!0,(t=r?r:t).value=e,t.state=tt,E(t,!0))},R=function(r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(r.facade===t)throw new S("Promise can't be resolved itself");var i=L(t);i?c(function(){var e={done:!1};try{d(i,t,I(R,e,r),I(N,e,r))}catch(t){N(e,t,r)}}):(r.value=t,r.state=P,E(r,!1))}catch(t){N({done:!1},t,r)}}};if(m&&(b=(x=function(t){W(this,b),z(t),d(r,this);var e=v(this);try{t(I(R,e),I(N,e))}catch(t){N(e,t)}}).prototype,(r=function(t){Z(this,{type:g,done:!1,notified:!1,parent:!1,reactions:new q,rejection:!1,state:0,value:void 0})}).prototype=n(b,"then",function(t,e){var r=v(this),i=O(Y(this,x));return r.parent=!0,i.ok=!s(t)||t,i.fail=s(e)&&e,i.domain=p?_.domain:void 0,0===r.state?r.reactions.add(i):c(function(){a(i,r)}),i.promise}),e=function(){var t=new r,e=v(t);this.promise=t,this.resolve=I(R,e),this.reject=I(N,e)},t.f=O=function(t){return t===x||void 0===t?new e:K(t)},!V)&&s(l)&&u!==Object.prototype){i=u.then,h||n(u,"then",function(t,e){var r=this;return new x(function(t,e){d(i,r,t,e)}).then(t,e)},{unsafe:!0});try{delete u.constructor}catch(t){}o&&o(u,b)}D({global:!0,constructor:!0,wrap:!0,forced:m},{Promise:x}),B(x,g,!1,!0),U(g)},Xnc8:function(t,e,r){"use strict";var i=r("g6v/"),r=r("Gi26"),n=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,r=r(n,"name"),o=r&&"something"===function(){}.name,i=r&&(!i||a(n,"name").configurable);t.exports={EXISTS:r,PROPER:o,CONFIGURABLE:i}},Xp4B:function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(e,"a",function(){return i});var vt=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],xt=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(t,e,r,i,n){if(!((t="string"==typeof t?document.getElementById(t):t)&&"object"===a(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");t=t.getContext("2d");try{return t.getImageData(e,r,i,n)}catch(t){throw new Error("unable to access image data: "+t)}}function i(t,e,r,i,n,a){var o;isNaN(a)||a<1||(a|=0,o=function(j,t,F,e){for(var D,r=j.data,V=2*e+1,i=t-1,B=F-1,n=e+1,a=n*(n+1)/2,o=new bt,s=o,U=1;U<V;U++)s=s.next=new bt,U===n&&(D=s);s.next=o;for(var c=null,u=null,z=0,l=0,h=vt[e],p=xt[e],G=0;G<F;G++){s=o;for(var W=r[l],Y=r[l+1],H=r[l+2],X=r[l+3],q=0;q<n;q++)s.r=W,s.g=Y,s.b=H,s.a=X,s=s.next;for(var f=0,d=0,y=0,g=0,Q=n*W,Z=n*Y,K=n*H,J=n*X,m=a*W,v=a*Y,x=a*H,b=a*X,S=1;S<n;S++){var w=l+((i<S?i:S)<<2),$=r[w],tt=r[w+1],et=r[w+2],w=r[w+3],_=n-S;m+=(s.r=$)*_,v+=(s.g=tt)*_,x+=(s.b=et)*_,b+=(s.a=w)*_,f+=$,d+=tt,y+=et,g+=w,s=s.next}c=o,u=D;for(var rt=0;rt<t;rt++){var O=b*h>>p,O=(0!=(r[l+3]=O)?(O=255/O,r[l]=(m*h>>p)*O,r[l+1]=(v*h>>p)*O,r[l+2]=(x*h>>p)*O):r[l]=r[l+1]=r[l+2]=0,m-=Q,v-=Z,x-=K,b-=J,Q-=c.r,Z-=c.g,K-=c.b,J-=c.a,rt+e+1);O=z+(O<i?O:i)<<2,f+=c.r=r[O],d+=c.g=r[1+O],y+=c.b=r[2+O],g+=c.a=r[3+O],m+=f,v+=d,x+=y,b+=g,c=c.next;var O=u.r,it=u.g,nt=u.b,at=u.a;Q+=O,Z+=it,K+=nt,J+=at,f-=O,d-=it,y-=nt,g-=at,u=u.next,l+=4}z+=t}for(var T=0;T<t;T++){var P=r[l=T<<2],C=r[l+1],M=r[l+2],L=r[l+3],ot=n*P,st=n*C,ct=n*M,ut=n*L,E=a*P,A=a*C,k=a*M,I=a*L;s=o;for(var lt=0;lt<n;lt++)s.r=P,s.g=C,s.b=M,s.a=L,s=s.next;for(var ht=t,pt=0,ft=0,dt=0,yt=0,N=1;N<=e;N++){l=ht+T<<2;var gt=n-N;E+=(s.r=P=r[l])*gt,A+=(s.g=C=r[l+1])*gt,k+=(s.b=M=r[l+2])*gt,I+=(s.a=L=r[l+3])*gt,yt+=P,pt+=C,ft+=M,dt+=L,s=s.next,N<B&&(ht+=t)}l=T,c=o,u=D;for(var mt=0;mt<F;mt++){var R=l<<2;r[3+R]=L=I*h>>p,0<L?(L=255/L,r[R]=(E*h>>p)*L,r[1+R]=(A*h>>p)*L,r[2+R]=(k*h>>p)*L):r[R]=r[1+R]=r[2+R]=0,E-=ot,A-=st,k-=ct,I-=ut,ot-=c.r,st-=c.g,ct-=c.b,ut-=c.a,R=T+((R=mt+n)<B?R:B)*t<<2,E+=yt+=c.r=r[R],A+=pt+=c.g=r[1+R],k+=ft+=c.b=r[2+R],I+=dt+=c.a=r[3+R],c=c.next,ot+=P=u.r,st+=C=u.g,ct+=M=u.b,ut+=L=u.a,yt-=P,pt-=C,ft-=M,dt-=L,u=u.next,l+=t}}return j}(o=s(t,e,r,i,n),i,n,a),t.getContext("2d").putImageData(o,e,r))}var bt=function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},Xu1c:function(t,e,r){"use strict";var i=r("0lZ3"),n=r("HH4o"),r=r("Rzhe").CONSTRUCTOR;t.exports=r||!n(function(t){i.all(t).then(void 0,function(){})})},Y3Q8:function(t,e,r){"use strict";var i=r("2oRo"),n=Object.defineProperty;t.exports=function(e,r){try{n(i,e,{value:r,configurable:!0,writable:!0})}catch(t){i[e]=r}return r}},YF1G:function(t,e,r){"use strict";var i=r("2oRo"),r=r("xrYK");t.exports="process"===r(i.process)},YGnB:function(t,e,r){"use strict";var i=r("bFkh"),r=r("YF1G");t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},"YY/H":function(W,t,e){!function(t){var i="__lodash_hash_undefined__",r=9007199254740991,n="[object Arguments]",e="[object Function]",a="[object GeneratorFunction]",o=/^\[object .+?Constructor\]$/,t="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,t=t||s||Function("return this")();function d(t,e){return!!(t?t.length:0)&&-1<function(t,e,r){if(e!=e)return function(t,e,r,i){var n=t.length,a=r+(i?1:-1);for(;i?a--:++a<n;)if(e(t[a],a,t))return a;return-1}(t,c,r);var i=r-1,n=t.length;for(;++i<n;)if(t[i]===e)return i;return-1}(t,e,0)}function y(t,e,r){for(var i=-1,n=t?t.length:0;++i<n;)if(r(e,t[i]))return!0;return!1}function c(t){return t!=t}function g(t,e){return t.has(e)}var s=Array.prototype,u=Function.prototype,l=Object.prototype,h=t["__core-js_shared__"],p=(h=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",f=u.toString,m=l.hasOwnProperty,v=l.toString,x=RegExp("^"+f.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=t.Symbol,b=l.propertyIsEnumerable,j=s.splice,S=h?h.isConcatSpreadable:void 0,w=Math.max,F=E(t,"Map"),_=E(Object,"create");function O(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function T(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function P(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function C(t){var e=-1,r=t?t.length:0;for(this.__data__=new P;++e<r;)this.add(t[e])}function M(t,e){for(var r,i,n=t.length;n--;)if((r=t[n][0])===(i=e)||r!=r&&i!=i)return n;return-1}function D(t,e,r,i){var n,a=-1,o=d,s=!0,c=t.length,u=[],l=e.length;if(c){r&&(e=function(t,e){for(var r=-1,i=t?t.length:0,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}(e,(n=r,function(t){return n(t)}))),i?(o=y,s=!1):200<=e.length&&(o=g,s=!1,e=new C(e));t:for(;++a<c;){var h=t[a],p=r?r(h):h,h=i||0!==h?h:0;if(s&&p==p){for(var f=l;f--;)if(e[f]===p)continue t;u.push(h)}else o(e,p,i)||u.push(h)}}return u}function V(t){var e;return R(t)&&(e=t,!(p&&p in e))&&(N(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?x:o).test(function(t){if(null!=t){try{return f.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function L(t,e){var r,i,t=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function E(t,e){e=e;t=null==(t=t)?void 0:t[e];return V(t)?t:void 0}function B(t){return z(t)||I(e=t)&&m.call(e,"callee")&&(!b.call(e,"callee")||v.call(e)==n)||!!(S&&t&&t[S]);var e}O.prototype.clear=function(){this.__data__=_?_(null):{}},O.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},O.prototype.get=function(t){var e,r=this.__data__;return _?(e=r[t])===i?void 0:e:m.call(r,t)?r[t]:void 0},O.prototype.has=function(t){var e=this.__data__;return _?void 0!==e[t]:m.call(e,t)},O.prototype.set=function(t,e){return this.__data__[t]=_&&void 0===e?i:e,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(t){var e=this.__data__;return!((t=M(e,t))<0||(t==e.length-1?e.pop():j.call(e,t,1),0))},T.prototype.get=function(t){var e=this.__data__;return(t=M(e,t))<0?void 0:e[t][1]},T.prototype.has=function(t){return-1<M(this.__data__,t)},T.prototype.set=function(t,e){var r=this.__data__,i=M(r,t);return i<0?r.push([t,e]):r[i][1]=e,this},P.prototype.clear=function(){this.__data__={hash:new O,map:new(F||T),string:new O}},P.prototype.delete=function(t){return L(this,t).delete(t)},P.prototype.get=function(t){return L(this,t).get(t)},P.prototype.has=function(t){return L(this,t).has(t)},P.prototype.set=function(t,e){return L(this,t).set(t,e),this},C.prototype.add=C.prototype.push=function(t){return this.__data__.set(t,i),this},C.prototype.has=function(t){return this.__data__.has(t)};function U(){for(var t=arguments,e=-1,r=w(t.length-k,0),i=Array(r);++e<r;)i[e]=t[k+e];for(var e=-1,n=Array(k+1);++e<k;)n[e]=t[e];n[k]=i;var a=A,o=this,s=n;switch(s.length){case 0:return a.call(o);case 1:return a.call(o,s[0]);case 2:return a.call(o,s[0],s[1]);case 3:return a.call(o,s[0],s[1],s[2])}return a.apply(o,s)}var A,k;A=function(t,e){return I(t)?D(t,function t(e,r,i,n,a){var o=-1,s=e.length;for(i=i||B,a=a||[];++o<s;){var c=e[o];if(0<r&&i(c))if(1<r)t(c,r-1,i,n,a);else{f=p=h=l=u=void 0;for(var u=a,l=c,h=-1,p=l.length,f=u.length;++h<p;)u[f+h]=l[h]}else n||(a[a.length]=c)}return a}(e,1,I,!0)):[]},k=w(void 0===k?A.length-1:k,0);var z=Array.isArray;function G(t){return null!=t&&"number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=r&&!N(t);var e}function I(t){return!!(e=t)&&"object"==typeof e&&G(t);var e}function N(t){t=R(t)?v.call(t):"";return t==e||t==a}function R(t){var e=typeof t;return t&&("object"==e||"function"==e)}W.exports=U}.call(this,e("yLpj"))},"Z94/":function(t,e){var r=Object.prototype.toString;t.exports=function(t){return"number"==typeof t||!!(e=t)&&"object"==typeof e&&"[object Number]"==r.call(t);var e}},ZUd8:function(t,e,r){"use strict";function i(n){return function(t,e){var r,t=o(s(t)),e=a(e),i=t.length;return e<0||i<=e?n?"":void 0:(r=u(t,e))<55296||56319<r||e+1===i||(i=u(t,e+1))<56320||57343<i?n?c(t,e):r:n?l(t,e,e+2):i-56320+(r-55296<<10)+65536}}var n=r("4zBA"),a=r("WSbT"),o=r("V37c"),s=r("HYAF"),c=n("".charAt),u=n("".charCodeAt),l=n("".slice);t.exports={codeAt:i(!1),charAt:i(!0)}},aO6C:function(t,e,r){"use strict";function i(){}function n(t){if(!c(t))return!1;try{return f(i,p,t),!0}catch(t){return!1}}function a(t){if(!c(t))return!1;switch(u(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!y(d,h(t))}catch(t){return!0}}var o=r("4zBA"),s=r("0Dky"),c=r("Fib7"),u=r("9d/t"),l=r("0GbY"),h=r("iSVu"),p=[],f=l("Reflect","construct"),d=/^\s*(?:class|function)\b/,y=o(d.exec),g=!d.test(i);a.sham=!0,t.exports=!f||s(function(){var t;return n(n.call)||!n(Object)||!n(function(){t=!0})||t})?a:n},afO8:function(t,e,r){"use strict";var i,n,a,o,s=r("zc4i"),c=r("2oRo"),u=r("hh1v"),l=r("kRJp"),h=r("Gi26"),p=r("xs3f"),f=r("93I0"),r=r("0BK2"),d="Object already initialized",y=c.TypeError,c=c.WeakMap,g=s||p.state?((a=p.state||(p.state=new c)).get=a.get,a.has=a.has,a.set=a.set,i=function(t,e){if(a.has(t))throw new y(d);return e.facade=t,a.set(t,e),e},n=function(t){return a.get(t)||{}},function(t){return a.has(t)}):(r[o=f("state")]=!0,i=function(t,e){if(h(t,o))throw new y(d);return e.facade=t,l(t,o,e),e},n=function(t){return h(t,o)?t[o]:{}},function(t){return h(t,o)});t.exports={set:i,get:n,has:g,enforce:function(t){return g(t)?n(t):i(t,{})},getterFor:function(e){return function(t){if(u(t)&&(t=n(t)).type===e)return t;throw new y("Incompatible receiver, "+e+" required")}}}},bFkh:function(t,e,r){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},cUmr:function(t,e,r){"use strict";var i=r("I+eb"),n=r("0GbY"),a=r("xDBR"),o=r("0lZ3"),s=r("Rzhe").CONSTRUCTOR,c=r("zfnd"),u=n("Promise"),l=a&&!s;i({target:"Promise",stat:!0,forced:a||s},{resolve:function(t){return c(l&&this===u?o:this,t)}})},cjT7:function(t,e,r){"use strict";t.exports=function(t){return null==t}},coJu:function(t,e,r){"use strict";var i=r("4zBA"),n=r("We1y");t.exports=function(t,e,r){try{return i(n(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},"dBg+":function(t,e,r){"use strict";e.f=Object.getOwnPropertySymbols},"eDl+":function(t,e,r){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},eFrH:function(t,e,r){"use strict";r=r("zBJ4")("span").classList,r=r&&r.constructor&&r.constructor.prototype;t.exports=r===Object.prototype?void 0:r},ewvW:function(t,e,r){"use strict";var i=r("HYAF"),n=Object;t.exports=function(t){return n(i(t))}},fHMY:function(t,e,r){"use strict";function i(){}function n(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e}var a,o=r("glrk"),s=r("N+g0"),c=r("eDl+"),u=r("0BK2"),l=r("G+Rx"),h=r("zBJ4"),r=r("93I0"),p="prototype",f="script",d=r("IE_PROTO"),y=function(t){return"<"+f+">"+t+"</"+f+">"},g=function(){try{a=new ActiveXObject("htmlfile")}catch(t){}g="undefined"==typeof document||document.domain&&a?n(a):(t=h("iframe"),e="java"+f+":",t.style.display="none",l.appendChild(t),t.src=String(e),(e=t.contentWindow.document).open(),e.write(y("document.F=Object")),e.close(),e.F);for(var t,e,r=c.length;r--;)delete g[p][c[r]];return g()};u[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(i[p]=o(t),r=new i,i[p]=null,r[d]=t):r=g(),void 0===e?r:s.f(r,e)}},"g6v/":function(t,e,r){"use strict";r=r("0Dky");t.exports=!r(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},glrk:function(t,e,r){"use strict";var i=r("hh1v"),n=String,a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(n(t)+" is not an object")}},hBjN:function(t,e,r){"use strict";var i=r("oEtG"),n=r("m/L8"),a=r("XGwC");t.exports=function(t,e,r){e=i(e);e in t?n.f(t,e,a(0,r)):t[e]=r}},hh1v:function(t,e,r){"use strict";var i=r("Fib7"),r=r("jqES"),n=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===n}:function(t){return"object"==typeof t?null!==t:i(t)}},hhWd:function(e,r,n){e.exports=function(){var y=function(t){return typeof t==="number"&&parseFloat(t)==parseInt(t,10)&&!isNaN(t)},N=function(t){return t},n=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(t,e){if(this===undefined||this===null)throw new TypeError('"this" is null or not defined');var r=this.length>>>0;e=+e||0;if(Math.abs(e)===Infinity)e=0;if(e<0){e+=r;if(e<0)e=0}for(;e<r;e++)if(this[e]===t)return e;return-1};var e=function(e){this.objectID="";this.separator=" - ";this.legendSeparator=this.separator;this.method="";this.precision=0;this.precisionflag="auto";this.roundlength=2;this.is_uniqueValues=false;this.debug=false;this.silent=false;this.bounds=Array();this.ranges=Array();this.inner_ranges=null;this.colors=Array();this.counter=Array();this.stat_sorted=null;this.stat_mean=null;this.stat_median=null;this.stat_sum=null;this.stat_max=null;this.stat_min=null;this.stat_pop=null;this.stat_variance=null;this.stat_stddev=null;this.stat_cov=null;this.log=function(t,e){if(this.debug==true||e!=null)console.log(this.objectID+"(object id) :: "+t)};this.setBounds=function(t){this.log("Setting bounds ("+t.length+") : "+t.join());this.bounds=Array();this.bounds=t};this.setSerie=function(t){this.log("Setting serie ("+t.length+") : "+t.join());this.serie=Array();this.serie=t;this.resetStatistics();this.setPrecision()};this.setColors=function(t){this.log("Setting color ramp ("+t.length+") : "+t.join());this.colors=t};this.doCount=function(){if(this._nodata())return;var t=this.sorted();this.counter=new Array;for(i=0;i<this.bounds.length-1;i++)this.counter[i]=0;for(j=0;j<t.length;j++){var e=this.getClass(t[j]);this.counter[e]++}};this.setPrecision=function(t){if(typeof t!=="undefined"){this.precisionflag="manual";this.precision=t}if(this.precisionflag=="auto")for(var e=0;e<this.serie.length;e++){if(!isNaN(this.serie[e]+"")&&(this.serie[e]+"").toString().indexOf(".")!=-1)var r=(this.serie[e]+"").split(".")[1].length;else var r=0;if(r>this.precision)this.precision=r}if(this.precision>20){this.log("this.precision value ("+this.precision+') is greater than max value. Automatic set-up to 20 to prevent "Uncaught RangeError: toFixed()" when calling decimalFormat() method.');this.precision=20}this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision);this.serie=this.decimalFormat(this.serie)};this.decimalFormat=function(t){var e=new Array;for(var r=0;r<t.length;r++)if(n(t[r]))e[r]=parseFloat(parseFloat(t[r]).toFixed(this.precision));else e[r]=t[r];return e};this.setRanges=function(){this.ranges=Array();for(i=0;i<this.bounds.length-1;i++)this.ranges[i]=this.bounds[i]+this.separator+this.bounds[i+1]};this.min=function(){if(this._nodata())return;this.stat_min=this.serie[0];for(i=0;i<this.pop();i++)if(this.serie[i]<this.stat_min)this.stat_min=this.serie[i];return this.stat_min};this.max=function(){if(this._nodata())return;this.stat_max=this.serie[0];for(i=0;i<this.pop();i++)if(this.serie[i]>this.stat_max)this.stat_max=this.serie[i];return this.stat_max};this.sum=function(){if(this._nodata())return;if(this.stat_sum==null){this.stat_sum=0;for(i=0;i<this.pop();i++)this.stat_sum+=parseFloat(this.serie[i])}return this.stat_sum};this.pop=function(){if(this._nodata())return;if(this.stat_pop==null)this.stat_pop=this.serie.length;return this.stat_pop};this.mean=function(){if(this._nodata())return;if(this.stat_mean==null)this.stat_mean=parseFloat(this.sum()/this.pop());return this.stat_mean};this.median=function(){if(this._nodata())return;if(this.stat_median==null){this.stat_median=0;var t=this.sorted();if(t.length%2)this.stat_median=parseFloat(t[Math.ceil(t.length/2)-1]);else this.stat_median=(parseFloat(t[t.length/2-1])+parseFloat(t[t.length/2]))/2}return this.stat_median};this.variance=function(){round=typeof round==="undefined"?true:false;if(this._nodata())return;if(this.stat_variance==null){var t=0,e=this.mean();for(var r=0;r<this.pop();r++)t+=Math.pow(this.serie[r]-e,2);this.stat_variance=t/this.pop();if(round==true)this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength)}return this.stat_variance};this.stddev=function(t){t=typeof t==="undefined"?true:false;if(this._nodata())return;if(this.stat_stddev==null){this.stat_stddev=Math.sqrt(this.variance());if(t==true)this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength)}return this.stat_stddev};this.cov=function(t){t=typeof t==="undefined"?true:false;if(this._nodata())return;if(this.stat_cov==null){this.stat_cov=this.stddev()/this.mean();if(t==true)this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength)}return this.stat_cov};this.resetStatistics=function(){this.stat_sorted=null;this.stat_mean=null;this.stat_median=null;this.stat_sum=null;this.stat_max=null;this.stat_min=null;this.stat_pop=null;this.stat_variance=null;this.stat_stddev=null;this.stat_cov=null};this._nodata=function(){if(this.serie.length==0){if(this.silent)this.log("[silent mode] Error. You should first enter a serie!",true);else throw new TypeError("Error. You should first enter a serie!");return 1}else return 0};this._hasNegativeValue=function(){for(i=0;i<this.serie.length;i++)if(this.serie[i]<0)return true;return false};this._hasZeroValue=function(){for(i=0;i<this.serie.length;i++)if(parseFloat(this.serie[i])===0)return true;return false};this.sorted=function(){if(this.stat_sorted==null)if(this.is_uniqueValues==false)this.stat_sorted=this.serie.sort(function(t,e){return t-e});else this.stat_sorted=this.serie.sort(function(t,e){var r=t.toString().toLowerCase(),i=e.toString().toLowerCase();if(r<i)return-1;if(r>i)return 1;return 0});return this.stat_sorted};this.info=function(){if(this._nodata())return;var t="";t+=N("Population")+" : "+this.pop()+" - ["+N("Min")+" : "+this.min()+" | "+N("Max")+" : "+this.max()+"]"+"\n";t+=N("Mean")+" : "+this.mean()+" - "+N("Median")+" : "+this.median()+"\n";t+=N("Variance")+" : "+this.variance()+" - "+N("Standard deviation")+" : "+this.stddev()+" - "+N("Coefficient of variation")+" : "+this.cov()+"\n";return t};this.setClassManually=function(e){if(this._nodata())return;if(e[0]!==this.min()||e[e.length-1]!==this.max()){if(this.silent)this.log("[silent mode] "+t("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()),true);else throw new TypeError(N("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()));return}this.setBounds(e);this.setRanges();this.method=N("manual classification")+" ("+(e.length-1)+" "+N("classes")+")";return this.bounds};this.getClassEqInterval=function(t,e,r){if(this._nodata())return;var n=typeof e==="undefined"?this.min():e;var a=typeof r==="undefined"?this.max():r;var o=Array();var s=n;var c=(a-n)/t;for(i=0;i<=t;i++){o[i]=s;s+=c}o[t]=a;this.setBounds(o);this.setRanges();this.method=N("eq. intervals")+" ("+t+" "+N("classes")+")";return this.bounds};this.getQuantiles=function(t){var e=this.sorted();var r=[];var i=this.pop()/t;for(var n=1;n<t;n++){var a=Math.round(n*i+.49);r.push(e[a-1])}return r};this.getClassQuantile=function(t){if(this._nodata())return;var e=this.sorted();var r=this.getQuantiles(t);r.unshift(e[0]);if(r[e.length-1]!==e[e.length-1])r.push(e[e.length-1]);this.setBounds(r);this.setRanges();this.method=N("quantile")+" ("+t+" "+N("classes")+")";return this.bounds};this.getClassStdDeviation=function(t,e){if(this._nodata())return;var r=this.max();var n=this.min();var a=Array();if(t%2==1){var o=Math.floor(t/2);var s=o+1;a[o]=this.mean()-this.stddev()/2;a[s]=this.mean()+this.stddev()/2;for(i=o-1;i>0;i--){var c=a[i+1]-this.stddev();a[i]=c}for(i=s+1;i<t;i++){var c=a[i-1]+this.stddev();a[i]=c}}else{var u=t/2;a[u]=this.mean();for(i=u-1;i>0;i--){var c=a[i+1]-this.stddev();a[i]=c}for(i=u+1;i<t;i++){var c=a[i-1]+this.stddev();a[i]=c}}a[0]=typeof e==="undefined"?a[1]-this.stddev():this.min();a[t]=typeof e==="undefined"?a[t-1]+this.stddev():this.max();this.setBounds(a);this.setRanges();this.method=N("std deviation")+" ("+t+" "+N("classes")+")";return this.bounds};this.getClassGeometricProgression=function(t){if(this._nodata())return;if(this._hasNegativeValue()||this._hasZeroValue()){if(this.silent)this.log("[silent mode] "+N("geometric progression can't be applied with a serie containing negative or zero values."),true);else throw new TypeError(N("geometric progression can't be applied with a serie containing negative or zero values."));return}var e=Array();var r=this.min();var n=this.max();var a=Math.log(n)/Math.LN10;var o=Math.log(r)/Math.LN10;var s=(a-o)/t;for(i=0;i<t;i++)if(i==0)e[i]=o;else e[i]=e[i-1]+s;e=e.map(function(t){return Math.pow(10,t)});e.push(this.max());this.setBounds(e);this.setRanges();this.method=N("geometric progression")+" ("+t+" "+N("classes")+")";return this.bounds};this.getClassArithmeticProgression=function(t){if(this._nodata())return;var e=0;for(i=1;i<=t;i++)e+=i;var r=Array();var n=this.min();var a=this.max();var o=(a-n)/e;for(i=0;i<=t;i++)if(i==0)r[i]=n;else r[i]=r[i-1]+i*o;this.setBounds(r);this.setRanges();this.method=N("arithmetic progression")+" ("+t+" "+N("classes")+")";return this.bounds};this.getClassJenks=function(t){if(this._nodata())return;dataList=this.sorted();var e=[];for(var r=0,i=dataList.length+1;r<i;r++){var n=[];for(var a=0,o=t+1;a<o;a++)n.push(0);e.push(n)}var s=[];for(var c=0,u=dataList.length+1;c<u;c++){var l=[];for(var h=0,p=t+1;h<p;h++)l.push(0);s.push(l)}for(var f=1,d=t+1;f<d;f++){e[0][f]=1;s[0][f]=0;for(var y=1,g=dataList.length+1;y<g;y++)s[y][f]=Infinity;var m=0}for(var v=2,x=dataList.length+1;v<x;v++){var b=0;var S=0;var w=0;for(var _=1,O=v+1;_<O;_++){var T=v-_+1;var P=parseFloat(dataList[T-1]);S+=P*P;b+=P;w+=1;m=S-b*b/w;var C=T-1;if(C!=0)for(var M=2,L=t+1;M<L;M++)if(s[v][M]>=m+s[C][M-1]){e[v][M]=T;s[v][M]=m+s[C][M-1]}}e[v][1]=1;s[v][1]=m}var E=dataList.length;var A=[];for(c=0;c<=t;c++)A.push(0);A[t]=parseFloat(dataList[dataList.length-1]);A[0]=parseFloat(dataList[0]);var k=t;while(k>=2){var I=parseInt(e[E][k]-2);A[k-1]=dataList[I];E=parseInt(e[E][k]-1);k-=1}if(A[0]==A[1])A[0]=0;this.setBounds(A);this.setRanges();this.method=N("Jenks")+" ("+t+" "+N("classes")+")";return this.bounds};this.getClassUniqueValues=function(){if(this._nodata())return;this.is_uniqueValues=true;var t=this.sorted();var e=Array();for(i=0;i<this.pop();i++)if(e.indexOf(t[i])===-1)e.push(t[i]);this.bounds=e;this.method=N("unique values");return e};this.getClass=function(t){for(i=0;i<this.bounds.length;i++)if(this.is_uniqueValues==true){if(t==this.bounds[i])return i}else if(parseFloat(t)<=this.bounds[i+1])return i;return N("Unable to get value's class.")};this.getRanges=function(){return this.ranges};this.getRangeNum=function(t){var e,r;for(r=0;r<this.ranges.length;r++){e=this.ranges[r].split(/ - /);if(t<=parseFloat(e[1]))return r}};this.getInnerRanges=function(){if(this.inner_ranges!=null)return this.inner_ranges;var t=new Array;var e=this.sorted();var r=1;for(i=0;i<e.length;i++){if(i==0)var n=e[i];if(parseFloat(e[i])>parseFloat(this.bounds[r])){t[r-1]=""+n+this.separator+e[i-1];var n=e[i];r++}if(r==this.bounds.length-1){t[r-1]=""+n+this.separator+e[e.length-1];this.inner_ranges=t;return this.inner_ranges}}};this.getSortedlist=function(){return this.sorted().join(", ")};this.getHtmlLegend=function(t,e,r,n,a,o){var s="";var c=new Array;this.doCount();if(t!=null)ccolors=t;else ccolors=this.colors;if(e!=null)lg=e;else lg="Legend";if(r!=null)getcounter=true;else getcounter=false;if(n!=null)fn=n;else fn=function(t){return t};if(a==null)a="default";if(a=="discontinuous"){this.getInnerRanges();if(this.counter.indexOf(0)!==-1){if(this.silent)this.log("[silent mode] "+N("Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!"),true);else throw new TypeError(N("Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!"));return}}if(o!=="DESC")o="ASC";if(ccolors.length<this.ranges.length){if(this.silent)this.log("[silent mode] "+N("The number of colors should fit the number of ranges. Exit!"),true);else throw new TypeError(N("The number of colors should fit the number of ranges. Exit!"));return}if(this.is_uniqueValues==false)for(i=0;i<this.ranges.length;i++){if(getcounter===true)s=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>";var u=this.ranges[i].split(this.separator);var l=parseFloat(u[0]).toFixed(this.precision);var h=parseFloat(u[1]).toFixed(this.precision);if(a=="distinct"&&i!=0)if(y(l)){l=parseInt(l)+1;if(this.precisionflag=="manual"&&this.precision!=0)l=parseFloat(l).toFixed(this.precision)}else{l=parseFloat(l)+1/Math.pow(10,this.precision);l=parseFloat(l).toFixed(this.precision)}if(a=="discontinuous"){var u=this.inner_ranges[i].split(this.separator);var l=parseFloat(u[0]).toFixed(this.precision);var h=parseFloat(u[1]).toFixed(this.precision)}var p=fn(l)+this.legendSeparator+fn(h);var f='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+p+s+"</div>";c.push(f)}else for(i=0;i<this.bounds.length;i++){if(getcounter===true)s=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>";var p=fn(this.bounds[i]);var f='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+p+s+"</div>";c.push(f)}if(o==="DESC")c.reverse();var d='<div class="geostats-legend"><div class="geostats-legend-title">'+N(lg)+"</div>";for(i=0;i<c.length;i++)d+=c[i];d+="</div>";return d};this.objectID=(new Date).getUTCMilliseconds();this.log("Creating new geostats object");if(typeof e!=="undefined"&&e.length>0){this.serie=e;this.setPrecision();this.log("Setting serie ("+e.length+") : "+e.join())}else this.serie=Array();this.getJenks=this.getClassJenks;this.getGeometricProgression=this.getClassGeometricProgression;this.getEqInterval=this.getClassEqInterval;this.getQuantile=this.getClassQuantile;this.getStdDeviation=this.getClassStdDeviation;this.getUniqueValues=this.getClassUniqueValues;this.getArithmeticProgression=this.getClassArithmeticProgression};return window.geostats=e}()},iSVu:function(t,e,r){"use strict";var i=r("4zBA"),n=r("Fib7"),r=r("xs3f"),a=i(Function.toString);n(r.inspectSource)||(r.inspectSource=function(t){return a(t)}),t.exports=r.inspectSource},inlA:function(t,e,r){"use strict";var i=r("I+eb"),n=r("RiVN"),a=r("Bs8V").f,o=r("UMSQ"),s=r("V37c"),c=r("WjRb"),u=r("HYAF"),l=r("qxPZ"),r=r("xDBR"),h=n("".endsWith),p=n("".slice),f=Math.min,n=l("endsWith");i({target:"String",proto:!0,forced:!!(r||n||!(l=a(String.prototype,"endsWith"))||l.writable)&&!n},{endsWith:function(t){var e=s(u(this)),r=(c(t),1<arguments.length?arguments[1]:void 0),i=e.length,r=void 0===r?i:f(o(r),i),i=s(t);return h?h(e,i,r):p(e,r-i.length,r)===i}})},iqWW:function(t,e,r){"use strict";var i=r("ZUd8").charAt;t.exports=function(t,e,r){return e+(r?i(t,e).length:1)}},jqES:function(t,e,r){"use strict";var i="object"==typeof document&&document.all;t.exports={all:i,IS_HTMLDDA:void 0===i&&void 0!==i}},kNi0:function(t,e,r){"use strict";var i=r("xluM"),n=r("Gi26"),a=r("OpvP"),o=r("rW0t"),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||n(t,"flags")||!a(s,t)?e:i(o,t)}},kOOl:function(t,e,r){"use strict";var r=r("4zBA"),i=0,n=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+n,36)}},kRJp:function(t,e,r){"use strict";var i=r("g6v/"),n=r("m/L8"),a=r("XGwC");t.exports=i?function(t,e,r){return n.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},kmMV:function(t,e,r){"use strict";var d=r("xluM"),i=r("4zBA"),y=r("V37c"),g=r("rW0t"),n=r("n3/R"),a=r("VpIT"),m=r("fHMY"),v=r("afO8").get,o=r("/OPJ"),r=r("EHx7"),x=a("native-string-replace",String.prototype.replace),b=RegExp.prototype.exec,S=b,w=i("".charAt),_=i("".indexOf),O=i("".replace),T=i("".slice),P=(a=/b*/g,d(b,i=/a/,"a"),d(b,a,"a"),0!==i.lastIndex||0!==a.lastIndex),C=n.BROKEN_CARET,M=void 0!==/()??/.exec("")[1];(P||M||C||o||r)&&(S=function(t){var e,r,i,n,a,o,s=this,c=v(s),t=y(t),u=c.raw;if(u)return u.lastIndex=s.lastIndex,h=d(S,u,t),s.lastIndex=u.lastIndex,h;var l=c.groups,u=C&&s.sticky,h=d(g,s),c=s.source,p=0,f=t;if(u&&(h=O(h,"y",""),-1===_(h,"g")&&(h+="g"),f=T(t,s.lastIndex),0<s.lastIndex&&(!s.multiline||s.multiline&&"\n"!==w(t,s.lastIndex-1))&&(c="(?: "+c+")",f=" "+f,p++),e=new RegExp("^(?:"+c+")",h)),M&&(e=new RegExp("^"+c+"$(?!\\s)",h)),P&&(r=s.lastIndex),i=d(b,u?e:s,f),u?i?(i.input=T(i.input,p),i[0]=T(i[0],p),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:P&&i&&(s.lastIndex=s.global?i.index+i[0].length:r),M&&i&&1<i.length&&d(x,i[0],e,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(i[n]=void 0)}),i&&l)for(i.groups=a=m(null),n=0;n<l.length;n++)a[(o=l[n])[0]]=i[o[1]];return i}),t.exports=S},lMq5:function(t,e,r){"use strict";function i(t,e){return(t=c[s(t)])===l||t!==u&&(a(e)?n(e):!!e)}var n=r("0Dky"),a=r("Fib7"),o=/#|\.prototype\./,s=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",l=i.POLYFILL="P";t.exports=i},lSNA:function(t,e,r){var i=r("o5UB");t.exports=function(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},"m/L8":function(t,e,r){"use strict";var i=r("g6v/"),n=r("DPsx"),a=r("rtlb"),o=r("glrk"),s=r("oEtG"),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";e.f=i?a?function(t,e,r){var i;return o(t),e=s(e),o(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]&&(i=l(t,e))&&i[f]&&(t[e]=r.value,r={configurable:(p in r?r:i)[p],enumerable:(h in r?r:i)[h],writable:!1}),u(t,e,r)}:u:function(t,e,r){if(o(t),e=s(e),o(r),n)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},"mh/w":function(t,e,r){"use strict";var i=r("xluM"),n=r("We1y"),a=r("glrk"),o=r("DVFp"),s=r("NaFW"),c=TypeError;t.exports=function(t,e){e=arguments.length<2?s(t):e;if(n(e))return a(i(e,t));throw new c(o(t)+" is not iterable")}},"n3/R":function(t,e,r){"use strict";var i=r("0Dky"),n=r("2oRo").RegExp,r=i(function(){var t=n("a","y");return t.lastIndex=2,null!==t.exec("abcd")}),a=r||i(function(){return!n("a","y").sticky}),i=r||i(function(){var t=n("^r","gy");return t.lastIndex=2,null!==t.exec("str")});t.exports={BROKEN_CARET:i,MISSED_STICKY:a,UNSUPPORTED_Y:r}},o2tc:function(t){t.exports=JSON.parse('[{"name":"","coord":[85.01486759299489,45.406422237230046]},{"name":"","coord":[88.7154624754753,44.26991024636568]},{"name":"","coord":[86.0208600035924,44.239045558096805]},{"name":"","coord":[114.73479243733115,44.16058374713977]},{"name":"","coord":[124.64357865201586,41.177197783134275]},{"name":"","coord":[98.16891560537093,39.76279786284264]},{"name":"","coord":[117.65723565456207,36.27916499211527]},{"name":"","coord":[110.48296222218153,31.581260143666697]},{"name":"","coord":[113.00615321481195,30.64105781887143]},{"name":"","coord":[114.94764081970385,30.325634953844585]},{"name":"","coord":[112.70703817700621,30.349210666019893]},{"name":"","coord":[113.34688900729822,30.315951161935402]},{"name":"","coord":[113.88072263074415,27.47193090553213]},{"name":"","coord":[120.14338943402045,23.596002465926095]},{"name":"","coord":[113.89443658529342,22.897826158636448]},{"name":"","coord":[113.37118387764659,22.501478858616522]},{"name":"","coord":[113.21799258934986,22.23782602992192]},{"name":"","coord":[109.18248083043899,21.695773689750148]},{"name":"","coord":[114.20689279508653,22.36016760139811]},{"name":"","coord":[122.22514712841459,30.338633120695956]},{"name":"","coord":[74.62910472637343,39.59886016069875]},{"name":"","coord":[77.19899922143753,37.85462871211595]},{"name":"","coord":[81.43930290016381,41.067304799230456]},{"name":"","coord":[80.69780509160952,36.95287032287055]},{"name":"","coord":[82.536487505389,32.69566569631762]},{"name":"","coord":[86.5996831353606,29.54861754814263]},{"name":"","coord":[88.32523292667608,33.20600450932715]},{"name":"","coord":[95.2107128446203,33.90320387919257]},{"name":"","coord":[99.42465312188943,28.052797714348895]},{"name":"","coord":[98.85737910439825,26.98345757528851]},{"name":"","coord":[99.93934374816013,25.684737357453045]},{"name":"","coord":[98.13830877778075,24.593421919561205]},{"name":"","coord":[99.19031013453166,24.979380341662]},{"name":"","coord":[99.62483778975081,24.058807858948214]},{"name":"","coord":[100.94440267992684,23.44121660743221]},{"name":"","coord":[100.86105801845994,21.882475641324206]},{"name":"","coord":[91.3684790613129,30.14176592960237]},{"name":"","coord":[92.11665242621062,28.33000201578789]},{"name":"","coord":[94.9307847458166,29.125110156601963]},{"name":"","coord":[97.33912235873476,30.48520825551814]},{"name":"","coord":[100.65713436205135,26.96190318191959]},{"name":"","coord":[101.73355913301131,26.714486678752795]},{"name":"","coord":[102.08678551422615,27.683020519860396]},{"name":"","coord":[101.68264761198458,25.369603845264024]},{"name":"","coord":[102.95101719613119,23.624860095239875]},{"name":"","coord":[104.8708359910614,23.579587266862504]},{"name":"","coord":[106.69546907589859,23.98220841166522]},{"name":"","coord":[107.3277087317123,22.49769755349952]},{"name":"","coord":[107.88939931155171,21.94550204069006]},{"name":"","coord":[108.67078983716917,23.12207641861882]},{"name":"","coord":[108.8532307305186,22.157690108421384]},{"name":"","coord":[110.26918466489103,22.391823643610415]},{"name":"","coord":[109.93033457863683,21.086751055633457]},{"name":"","coord":[110.80336192333934,22.069184739040775]},{"name":"","coord":[111.70471342186183,22.108751366417575]},{"name":"","coord":[112.53715618649149,22.297368082806777]},{"name":"","coord":[113.4949302208309,23.28359314707863]},{"name":"","coord":[113.10957368131268,24.334444053233856]},{"name":"","coord":[112.11117530204233,23.60241158796112]},{"name":"","coord":[111.01709510772797,23.518132876753846]},{"name":"","coord":[111.50423061842756,24.4095096817199]},{"name":"","coord":[110.44046163393094,25.353966673735407]},{"name":"","coord":[109.34854449214147,24.972408051485047]},{"name":"","coord":[107.81191841865586,24.649291651298164]},{"name":"","coord":[108.39952601614591,26.429286420465576]},{"name":"","coord":[106.59784062851153,26.797907456479816]},{"name":"","coord":[105.76161265300635,25.988644902171018]},{"name":"","coord":[105.5954078788574,25.404850939549405]},{"name":"","coord":[103.9164335632742,25.697243690315265]},{"name":"","coord":[104.77723228072432,26.15402255629164]},{"name":"","coord":[105.03867422931839,27.077913968069666]},{"name":"","coord":[104.29730513046874,27.62418247971078]},{"name":"","coord":[104.76748901448207,28.553501804266475]},{"name":"","coord":[103.56027669102787,29.160754519210577]},{"name":"","coord":[104.63272827056402,29.273152614922402]},{"name":"","coord":[104.82644562304716,29.61272653799929]},{"name":"","coord":[106.82413636302059,28.191847588570702]},{"name":"","coord":[107.59704170009518,31.32138258839703]},{"name":"","coord":[105.48979445433736,30.677687821242678]},{"name":"","coord":[106.56708164098042,30.43500706741521]},{"name":"","coord":[105.42591761727707,28.50277238478137]},{"name":"","coord":[104.97995126874034,30.154251886139654]},{"name":"","coord":[102.69931299964517,29.892630706195035]},{"name":"","coord":[104.07052881858888,29.894202166560405]},{"name":"","coord":[100.50721042614238,30.975216556269658]},{"name":"","coord":[99.30775565051923,34.03539865224808]},{"name":"","coord":[100.39969108016373,35.90048272566899]},{"name":"","coord":[101.5360706381689,35.10286360841902]},{"name":"","coord":[102.97083885806067,34.326752803339026]},{"name":"","coord":[105.24780098912132,33.57031117443431]},{"name":"","coord":[105.53503634660417,34.62320421368087]},{"name":"","coord":[104.58787768541339,35.08900966621695]},{"name":"","coord":[103.2612870434902,35.591577124455235]},{"name":"","coord":[101.57680657999033,36.84800271717157]},{"name":"","coord":[102.30909850729282,36.287400615025646]},{"name":"","coord":[100.27122484450717,37.892557516083826]},{"name":"","coord":[102.02244049169511,38.497330414886164]},{"name":"","coord":[95.94486678270127,40.56891536586272]},{"name":"","coord":[94.67143298050689,36.022725148503724]},{"name":"","coord":[88.18116214759745,39.556478810319916]},{"name":"","coord":[93.84302392518026,42.95015211178875]},{"name":"","coord":[89.82035217277885,42.399368632283505]},{"name":"","coord":[88.00048109561487,43.549986370786]},{"name":"","coord":[88.11213933257655,47.05593413019629]},{"name":"","coord":[82.26402238163408,44.671135542630864]},{"name":"","coord":[82.80778717477179,43.53783381365267]},{"name":"","coord":[103.29923966842289,40.10955801781495]},{"name":"","coord":[102.73362058791429,37.94211141321436]},{"name":"","coord":[103.73793563506032,36.27379827886003]},{"name":"","coord":[105.6943786030716,37.20654236148948]},{"name":"","coord":[106.20022174140034,38.52103167597483]},{"name":"","coord":[106.41544011793628,38.84054137571417]},{"name":"","coord":[106.8984175998405,39.54616572239788]},{"name":"","coord":[108.43285571424619,39.24036799350715]},{"name":"","coord":[107.45840392808307,41.30159860424196]},{"name":"","coord":[110.46472193224272,41.48017783644221]},{"name":"","coord":[111.48365173603975,40.498363056149884]},{"name":"","coord":[112.61568977597707,41.75789561273154]},{"name":"","coord":[113.7107192749083,39.898956799744184]},{"name":"","coord":[112.65428748167508,39.681772914701924]},{"name":"","coord":[112.36127575589583,38.88990233614568]},{"name":"","coord":[109.68473112169593,38.19921027134876]},{"name":"","coord":[109.52425222161318,36.406522726136814]},{"name":"","coord":[107.73052193155061,36.183821532624464]},{"name":"","coord":[106.20191575442442,36.11634909496382]},{"name":"","coord":[104.68634478137065,36.51582865625868]},{"name":"","coord":[107.33534779230747,34.3387216485855]},{"name":"","coord":[107.03534754266246,33.00142998064871]},{"name":"","coord":[105.92928137563939,32.21872447205537]},{"name":"","coord":[107.03422410306194,31.99874720836291]},{"name":"","coord":[106.32964805032347,31.156657700184095]},{"name":"","coord":[104.58949560201106,31.88628780630976]},{"name":"","coord":[104.41542984932845,31.110558133718676]},{"name":"","coord":[103.8852290010473,30.777258040348634]},{"name":"","coord":[102.26209319552814,32.45725845387284]},{"name":"","coord":[109.14236501848015,32.77467694678074]},{"name":"","coord":[110.39934083416314,32.376209039347906]},{"name":"","coord":[111.97539147094662,31.93399822417465]},{"name":"","coord":[111.22204852395754,30.772457669035354]},{"name":"","coord":[109.42158366502872,30.260366574390105]},{"name":"","coord":[110.59760006538717,29.330107409240718]},{"name":"","coord":[109.72176899848378,28.681903937242495]},{"name":"","coord":[108.54247523485463,28.11736237519646]},{"name":"","coord":[107.86007108564992,30.186253395053196]},{"name":"","coord":[109.94325166787243,27.43919084801186]},{"name":"","coord":[112.43060358108062,28.75127294553697]},{"name":"","coord":[111.41891416951897,27.696312460064604]},{"name":"","coord":[111.72571610131646,29.27189463838195]},{"name":"","coord":[112.65896596965268,30.05161542755362]},{"name":"","coord":[112.6586855902184,31.01267124474617]},{"name":"","coord":[113.2595036144316,29.106247116930163]},{"name":"","coord":[113.15415586456598,28.222934680488425]},{"name":"","coord":[112.51092596317824,27.69881544105668]},{"name":"","coord":[113.49665538546823,27.03993794610501]},{"name":"","coord":[112.48849636578527,26.783613569970782]},{"name":"","coord":[110.6723832117475,26.81652287086792]},{"name":"","coord":[111.8565364154186,25.768488267811968]},{"name":"","coord":[113.53420325850979,24.69848878771937]},{"name":"","coord":[114.32029589634925,23.25504544231892]},{"name":"","coord":[112.95925897403649,23.10116677189257]},{"name":"","coord":[111.78042514904234,22.840400494105687]},{"name":"","coord":[114.13138648919008,22.649563063468342]},{"name":"","coord":[115.57412892884373,23.06989642104901]},{"name":"","coord":[114.89746229844398,23.97971937124767]},{"name":"","coord":[116.04290004239446,23.304802704715357]},{"name":"","coord":[116.7008461897183,23.35898625947344]},{"name":"","coord":[116.75405548481658,23.854381508863064]},{"name":"","coord":[116.13719397345734,24.15633544812716]},{"name":"","coord":[117.38279760543345,24.41111215459575]},{"name":"","coord":[118.04275971554665,24.675908246507944]},{"name":"","coord":[116.69341144552507,25.20284542644492]},{"name":"","coord":[118.12035864630246,25.22984144365049]},{"name":"","coord":[118.82439690138142,25.439653480972687]},{"name":"","coord":[119.1608285845262,25.99117532466728]},{"name":"","coord":[117.51188176216434,26.318292906961602]},{"name":"","coord":[118.16153136678187,27.306303151805437]},{"name":"","coord":[116.3455359885574,27.487043655935366]},{"name":"","coord":[117.01082360702333,28.241253742969946]},{"name":"","coord":[114.91377151807418,26.957486660664525]},{"name":"","coord":[115.046455717572,25.81565075681663]},{"name":"","coord":[113.1544526703492,25.871927095452524]},{"name":"","coord":[114.94161795877827,27.79044654578371]},{"name":"","coord":[115.04574494880995,28.306428044943356]},{"name":"","coord":[115.9963824234495,28.664803351584705]},{"name":"","coord":[115.53225905704193,29.362905920276297]},{"name":"","coord":[117.8595355766598,28.765755150094634]},{"name":"","coord":[117.25387030721845,29.33426823662448]},{"name":"","coord":[117.85476357809696,29.969632034273722]},{"name":"","coord":[117.34517113140791,30.208089337922335]},{"name":"","coord":[117.93160431300694,30.926442655001676]},{"name":"","coord":[116.54307680610799,30.524265461641296]},{"name":"","coord":[115.02354597728443,29.924060229331015]},{"name":"","coord":[114.26967602231792,29.652174021136048]},{"name":"","coord":[115.2859016705373,30.65856897065683]},{"name":"","coord":[114.34552076948799,30.68836237966767]},{"name":"","coord":[113.3850627838818,31.87891659924412]},{"name":"","coord":[114.81374730587638,32.0309685135914]},{"name":"","coord":[114.07756451509235,32.896720987266114]},{"name":"","coord":[109.82044421310393,33.77403373563189]},{"name":"","coord":[109.11839808451401,34.225257215515896]},{"name":"","coord":[109.75732444226935,35.025913644359306]},{"name":"","coord":[108.98695328111377,35.19235092947735]},{"name":"","coord":[108.36398776446165,34.84311348287181]},{"name":"","coord":[110.80049688104964,34.31818709571671]},{"name":"","coord":[111.1736679525165,35.19010372283576]},{"name":"","coord":[111.87577573098216,34.33379926109848]},{"name":"","coord":[112.80931281928427,33.759895800153096]},{"name":"","coord":[113.83505724178012,33.70034266174508]},{"name":"","coord":[113.78762484088509,34.051835688452435]},{"name":"","coord":[113.49619951867594,34.61181797865449]},{"name":"","coord":[113.13404280173008,35.134167097471625]},{"name":"","coord":[112.7495732073233,35.63186423091449]},{"name":"","coord":[112.85900842873183,36.45872910742828]},{"name":"","coord":[111.49379787924448,36.22810800777857]},{"name":"","coord":[112.15628804033796,37.91704444063036]},{"name":"","coord":[111.31901105774872,37.712740463356496]},{"name":"","coord":[113.08199599739676,37.36532613794343]},{"name":"","coord":[114.41824047234618,36.530119932543315]},{"name":"","coord":[113.88883283163116,35.7797611183252]},{"name":"","coord":[114.3654094911545,35.75770487428472]},{"name":"","coord":[113.9184107718167,35.348471214026716]},{"name":"","coord":[114.52801677500626,34.61371216679872]},{"name":"","coord":[114.88509782391864,33.69999759722657]},{"name":"","coord":[115.44595951398213,32.98060371610532]},{"name":"","coord":[116.68941991880993,32.79972275772595]},{"name":"","coord":[117.38594715783302,33.106729536033896]},{"name":"","coord":[116.69651711889378,33.69527529383458]},{"name":"","coord":[117.30175405886838,33.943330421260015]},{"name":"","coord":[116.12410804185097,33.46769392946132]},{"name":"","coord":[115.59575176872548,34.28339840831147]},{"name":"","coord":[115.53631974831816,35.197319393220624]},{"name":"","coord":[115.3070485514902,35.775883510964334]},{"name":"","coord":[115.8870069012884,36.40529594548765]},{"name":"","coord":[114.74259008644859,37.251396750084155]},{"name":"","coord":[114.56923838363613,38.13141710980106]},{"name":"","coord":[113.39216149668508,38.09075470547468]},{"name":"","coord":[115.261524468934,39.09118520781398]},{"name":"","coord":[115.8182936677897,37.715661598187154]},{"name":"","coord":[116.4582273790399,37.19372347888644]},{"name":"","coord":[116.76192710911863,38.20240042039232]},{"name":"","coord":[116.50410772133856,39.27896741763884]},{"name":"","coord":[117.31988934444873,39.37154482470619]},{"name":"","coord":[116.59734730757869,40.237112944270976]},{"name":"","coord":[115.1823606483226,40.83732566607167]},{"name":"","coord":[117.8693184261954,39.71862889477249]},{"name":"","coord":[119.30467355367742,39.990574652162564]},{"name":"","coord":[117.16275671911026,41.36623845548547]},{"name":"","coord":[119.9342336210531,40.5628822626519]},{"name":"","coord":[120.11853493535794,41.471852354885755]},{"name":"","coord":[118.50943546234379,43.25452976059767]},{"name":"","coord":[121.5167549323861,41.45933087433065]},{"name":"","coord":[122.58571915054674,40.42093503997384]},{"name":"","coord":[124.33549382902183,40.46369290272115]},{"name":"","coord":[123.34064798039414,41.152331397771356]},{"name":"","coord":[122.06718005354679,41.05573599862555]},{"name":"","coord":[121.93889757908204,42.27641773244204]},{"name":"","coord":[122.78904432242356,40.77781183142038]},{"name":"","coord":[122.99508899709724,42.1162195010079]},{"name":"","coord":[124.23100515588399,42.72666083611828]},{"name":"","coord":[124.46027188217573,41.82955407638859]},{"name":"","coord":[122.0729370657937,43.90889130864869]},{"name":"","coord":[120.79456431092532,45.92003249442161]},{"name":"","coord":[123.10619907715235,45.25475749267784]},{"name":"","coord":[124.5462214659102,47.55395009317394]},{"name":"","coord":[124.50992855161529,52.18438447846694]},{"name":"","coord":[127.14721400335922,49.25080134026901]},{"name":"","coord":[124.40329830095243,46.401048760966745]},{"name":"","coord":[126.5214484055605,46.76992452194825]},{"name":"","coord":[124.21244334807682,44.75779381338502]},{"name":"","coord":[124.27839350328821,43.52139065090318]},{"name":"","coord":[125.67392830706305,41.91771808663852]},{"name":"","coord":[125.33529527643432,42.758340204944986]},{"name":"","coord":[126.83350281902375,43.60730120049175]},{"name":"","coord":[125.53597875970374,44.24624314701737]},{"name":"","coord":[127.16780160322108,42.093893880305075]},{"name":"","coord":[127.39125008786029,45.36200668820575]},{"name":"","coord":[130.4703811258197,47.66520688940109]},{"name":"","coord":[128.91240831703635,47.93833794565277]},{"name":"","coord":[131.2677920224311,45.945099776108584]},{"name":"","coord":[132.38059153660274,45.722934218318535]},{"name":"","coord":[132.3184817002743,46.65813679030265]},{"name":"","coord":[132.26174446608726,47.17569713691394]},{"name":"","coord":[122.3210739998419,50.18176996070858]},{"name":"","coord":[113.83749892135485,31.11757234692128]},{"name":"","coord":[110.07354588052804,23.380735604767374]},{"name":"","coord":[107.30931767543106,26.2976919432269]},{"name":"","coord":[119.52482556634342,27.013151692716413]},{"name":"","coord":[120.30037042732202,27.8699145504001]},{"name":"","coord":[120.88886782713843,28.670799172772313]},{"name":"","coord":[119.56796851966463,28.170268394477755]},{"name":"","coord":[118.79479802644406,28.865874397158763]},{"name":"","coord":[119.99381920686633,29.093455548185744]},{"name":"","coord":[120.46546691682343,29.69382513836818]},{"name":"","coord":[121.42142987830871,29.70001162878972]},{"name":"","coord":[119.4405685790891,29.87218307296989]},{"name":"","coord":[118.68748382914703,30.628143499626418]},{"name":"","coord":[119.98261306633574,30.7945175862809]},{"name":"","coord":[120.83889215988998,30.67538495499343]},{"name":"","coord":[121.37534147322967,31.25628247908459]},{"name":"","coord":[120.6906182622391,31.381280695137775]},{"name":"","coord":[120.32182300914366,31.54113306724517]},{"name":"","coord":[119.61953292830165,31.611878565375576]},{"name":"","coord":[118.71890548838064,31.910863187910323]},{"name":"","coord":[119.42349332902813,31.97942313430778]},{"name":"","coord":[117.30651975617157,31.79407863049138]},{"name":"","coord":[116.24668220575353,31.820846193819513]},{"name":"","coord":[117.88422385307969,32.51792621904418]},{"name":"","coord":[120.03124303305091,32.56503102346783]},{"name":"","coord":[120.85599446760912,32.18496706099728]},{"name":"","coord":[120.01812490612667,33.54219948734023]},{"name":"","coord":[119.0749424205415,33.39203631772854]},{"name":"","coord":[118.45404943216346,33.666258719120265]},{"name":"","coord":[117.77482249295966,34.30847766157078]},{"name":"","coord":[116.74147276546373,35.27488504351119]},{"name":"","coord":[117.43359942491492,34.884162021736]},{"name":"","coord":[119.01553213785074,34.54316517587849]},{"name":"","coord":[118.31478835349617,35.28173079028279]},{"name":"","coord":[119.14265350444272,35.54479073199592]},{"name":"","coord":[120.27779044405756,36.3464117375903]},{"name":"","coord":[122.12963327195605,37.13879077904251]},{"name":"","coord":[120.7689567423966,37.19772002195597]},{"name":"","coord":[119.02178548592039,36.49292234053931]},{"name":"","coord":[117.92936024367185,36.60871347163638]},{"name":"","coord":[116.93810893944303,36.0423330118612]},{"name":"","coord":[117.34560282551296,36.769574973846304]},{"name":"","coord":[118.4915054457184,37.52194690335787]},{"name":"","coord":[117.67610299757533,37.4439597758601]},{"name":"","coord":[102.93100245594789,25.481300763922075]},{"name":"","coord":[102.23080854291823,24.156168324611663]},{"name":"","coord":[83.60908162840168,45.3721852373893]},{"name":"","coord":[100.47710030600572,38.704239320458385]},{"name":"","coord":[112.1400670951149,33.03033276715801]},{"name":"","coord":[119.48949608990988,32.80956776339646]},{"name":"","coord":[129.3577692895626,43.24968794080283]},{"name":"","coord":[129.87240796405672,44.7073040108322]},{"name":"","coord":[113.56289691515346,22.14602596262204]},{"name":"","coord":[106.76894508116403,37.72566765880316]},{"name":"","coord":[109.25592217010114,23.86346274681084]},{"name":"","coord":[107.0708132782897,35.30329631658711]},{"name":"","coord":[118.27245878467022,31.657727937739004]},{"name":"","coord":[118.32992684415504,31.081688223101658]},{"name":"","coord":[110.04198076060266,19.694955078668105]},{"name":"","coord":[109.6055304964257,18.6101488675304]},{"name":"","coord":[109.04051999525574,18.643137437909203]},{"name":"","coord":[109.3431358337404,19.550974957403195]},{"name":"","coord":[110.38744429685676,19.47557074114284]},{"name":"","coord":[110.00574767630334,19.367175093044388]},{"name":"","coord":[109.36860737761768,19.214416393082217]},{"name":"","coord":[109.86691465937548,19.073671135862682]},{"name":"","coord":[108.86903802405428,19.017352815445214]},{"name":"","coord":[108.9686431884767,19.182594167127824]},{"name":"","coord":[110.420654296875,19.806565564640795]},{"name":"","coord":[112.38051465474433,35.07958362422394]},{"name":"","coord":[109.53595187364496,18.832908264613966]},{"name":"","coord":[121.96662235866603,39.444150542439914]},{"name":"","coord":[110.81828537536748,19.756501444162936]},{"name":"","coord":[109.38424600793707,18.39186315877128]},{"name":"","coord":[110.28485046979574,18.860240588635115]},{"name":"","coord":[109.95577603229562,18.594712684620465]},{"name":"","coord":[109.71915395436967,19.79420403032508]},{"name":"","coord":[110.41650700703043,19.22315873149372]}]')},oEtG:function(t,e,r){"use strict";var i=r("wE6v"),n=r("2bX/");t.exports=function(t){t=i(t,"string");return n(t)?t:t+""}},pLQz:function(t,e,r){"use strict";r=r("NC/Y");t.exports=/web0s(?!.*chrome)/i.test(r)},pkCn:function(t,e,r){"use strict";var i=r("0Dky");t.exports=function(t,e){var r=[][t];return!!r&&i(function(){r.call(null,e||function(){return 1},1)})}},qxPZ:function(t,e,r){"use strict";var i=r("tiKp")("match");t.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[i]=!1,"/./"[e](r)}catch(t){}}return!1}},rB9j:function(t,e,r){"use strict";var i=r("I+eb"),r=r("kmMV");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},"rP+d":function(t,e){var l="[object Symbol]",h=Object.prototype.toString;function r(t,e,r){for(var i,n=-1,a=t.length;++n<a;){var o,s,c=t[n],u=e(c);null==u||(void 0===o?u!=u||"symbol"==typeof(i=u)||function(t){return t&&"object"==typeof t}(i)&&h.call(i)==l:!r(u,o))||(o=u,s=c)}return s}function i(t,e){return t<e}function n(t){return t}t.exports=function(t){return t&&t.length?r(t,n,i):void 0}},rW0t:function(t,e,r){"use strict";var i=r("glrk");t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},rpNk:function(t,e,r){"use strict";var i,n,a=r("0Dky"),o=r("Fib7"),s=r("hh1v"),c=r("fHMY"),u=r("4WOD"),l=r("yy0I"),h=r("tiKp"),r=r("xDBR"),p=h("iterator"),h=!1;[].keys&&("next"in(n=[].keys())?(u=u(u(n)))!==Object.prototype&&(i=u):h=!0),!s(i)||a(function(){var t={};return i[p].call(t)!==t})?i={}:r&&(i=c(i)),o(i[p])||l(i,p,function(){return this}),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:h}},rtlb:function(t,e,r){"use strict";var i=r("g6v/"),r=r("0Dky");t.exports=i&&r(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},tC4l:function(t,e,r){"use strict";var i=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){t=+t;return(0<t?n:i)(t)}},tXUg:function(t,e,r){"use strict";var i,n,a,o,s,c,u=r("2oRo"),l=r("A2ZE"),h=r("Bs8V").f,p=r("LPSS").set,f=r("AbTg"),d=r("HNyW"),y=r("1MNl"),g=r("pLQz"),m=r("YF1G"),r=u.MutationObserver||u.WebKitMutationObserver,v=u.document,x=u.process,b=u.Promise,h=h(u,"queueMicrotask"),h=h&&h.value;h||(o=new f,s=function(){var t,e;for(m&&(t=x.domain)&&t.exit();e=o.get();)try{e()}catch(t){throw o.head&&c(),t}t&&t.enter()},c=d||m||g||!r||!v?!y&&b&&b.resolve?((f=b.resolve(void 0)).constructor=b,a=l(f.then,f),function(){a(s)}):m?function(){x.nextTick(s)}:(p=l(p,u),function(){p(s)}):(i=!0,n=v.createTextNode(""),new r(s).observe(n,{characterData:!0}),function(){n.data=i=!i}),h=function(t){o.head||c(),o.add(t)}),t.exports=h},tiKp:function(t,e,r){"use strict";var i=r("2oRo"),n=r("VpIT"),a=r("Gi26"),o=r("kOOl"),s=r("BPiQ"),r=r("/b8u"),c=i.Symbol,u=n("wks"),l=r?c.for||c:c&&c.withoutSetter||o;t.exports=function(t){return a(u,t)||(u[t]=s&&a(c,t)?c[t]:l("Symbol."+t)),u[t]}},wE6v:function(t,e,r){"use strict";var i=r("xluM"),n=r("hh1v"),a=r("2bX/"),o=r("3Eq5"),s=r("SFrS"),r=r("tiKp"),c=TypeError,u=r("toPrimitive");t.exports=function(t,e){if(!n(t)||a(t))return t;var r=o(t,u);if(r){if(r=i(r,t,e=void 0===e?"default":e),!n(r)||a(r))return r;throw new c("Can't convert object to primitive value")}return s(t,e=void 0===e?"number":e)}},xDBR:function(t,e,r){"use strict";t.exports=!1},xluM:function(t,e,r){"use strict";var r=r("QNWe"),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},xrYK:function(t,e,r){"use strict";var r=r("4zBA"),i=r({}.toString),n=r("".slice);t.exports=function(t){return n(i(t),8,-1)}},xs3f:function(t,e,r){"use strict";var i=r("2oRo"),r=r("Y3Q8"),n="__core-js_shared__",i=i[n]||r(n,{});t.exports=i},xtKg:function(t,e,r){"use strict";function y(){return this}var g=r("I+eb"),m=r("xluM"),v=r("xDBR"),i=r("Xnc8"),x=r("Fib7"),b=r("3MOf"),S=r("4WOD"),w=r("0rvr"),_=r("1E5z"),O=r("kRJp"),T=r("yy0I"),n=r("tiKp"),P=r("P4y1"),r=r("rpNk"),C=i.PROPER,M=i.CONFIGURABLE,L=r.IteratorPrototype,E=r.BUGGY_SAFARI_ITERATORS,A=n("iterator"),k="values";t.exports=function(t,e,r,i,n,a,o){b(r,e,i);function s(t){if(t===n&&f)return f;if(!E&&t&&t in h)return h[t];switch(t){case"keys":case k:case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}}var c,u,i=e+" Iterator",l=!1,h=t.prototype,p=h[A]||h["@@iterator"]||n&&h[n],f=!E&&p||s(n),d="Array"===e&&h.entries||p;if(d&&(d=S(d.call(new t)))!==Object.prototype&&d.next&&(v||S(d)===L||(w?w(d,L):x(d[A])||T(d,A,y)),_(d,i,!0,!0),v)&&(P[i]=y),C&&n===k&&p&&p.name!==k&&(!v&&M?O(h,"name",k):(l=!0,f=function(){return m(p,this)})),n)if(c={values:s(k),keys:a?f:s("keys"),entries:s("entries")},o)for(u in c)!E&&!l&&u in h||T(h,u,c[u]);else g({target:e,proto:!0,forced:E||l},c);return v&&!o||h[A]===f||T(h,A,f,{name:n}),P[e]=f,c}},y7ZN:function(t,i,n){!function(t){var e,r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window,
/*!
 *     Copyright (c) 2016 @thinkinggis
 *     Copyright 2000-2017 SuperMap Software Co. Ltdnpm
 *     echartsLayer.
 *     github: https://github.com/SuperMap/echartsLayer
 *     license: MIT
 */
r=function(r){return i=[function(t,e){t.exports=r},function(t,e,r){r(2);r=r(6);t.exports=r},function(t,e,r){e=function(t){return r(0).registerCoordinateSystem("GLMap",r(3)),r(4),r(5),r(0).registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},function(t,e){}),{version:"1.0.0"}}.call(e,r,e,t);void 0!==e&&(t.exports=e)},function(t,e,r){e=function(t){var n=r(0);function a(t,e){this._GLMap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e}return a.prototype.dimensions=["lng","lat"],a.prototype.setMapOffset=function(t){this._mapOffset=t},a.prototype.getBMap=function(){return this._GLMap},a.prototype.fixLat=function(t){return 90<=t?89.99999999999999:t<=-90?-89.99999999999999:t},a.prototype.dataToPoint=function(t){t[1]=this.fixLat(t[1]);var t=this._GLMap.project(t),e=this._mapOffset;return[t.x-e[0],t.y-e[1]]},a.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.project([t[0]+e[0],t[1]+e[1]])).lng,t.lat]},a.prototype.getViewRect=function(){var t=this._api;return new n.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},a.prototype.getRoamTransform=function(){return n.matrix.create()},a.prototype.prepareCustoms=function(t){var e=n.util,r=this.getViewRect();return{coordSys:{type:"GLMap",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(a,o){return o=o||[0,0],e.map([0,1],function(t){var e=o[t],r=a[t]/2,i=[],n=[];return i[t]=e-r,n[t]=e+r,i[1-t]=n[1-t]=o[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(n)[t])},this)},this)}}},a.dimensions=a.prototype.dimensions,a.create=function(t,r){var i;t.eachComponent("GLMap",function(t){r.getZr().painter.getViewportRoot();var e=n.glMap;(i=new a(e,r)).setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=i}),t.eachSeries(function(t){"GLMap"===t.get("coordinateSystem")&&(t.coordinateSystem=i)})},a}.call(e,r,e,t);void 0!==e&&(t.exports=e)},function(t,e,r){e=function(t){return r(0).extendComponentModel({type:"GLMap",getBMap:function(){return this.__GLMap},defaultOption:{roam:!1}})}.call(e,r,e,t);void 0!==e&&(t.exports=e)},function(t,e,u){e=function(t){return u(0).extendComponentView({type:"GLMap",render:function(i,t,n){function e(t,e){var r;a||(r=document.getElementsByClassName("mapboxgl-map")[0],r=[-parseInt(r.style.left,10)||0,-parseInt(r.style.top,10)||0],o.style.left=r[0]+"px",o.style.top=r[1]+"px",s.setMapOffset(r),i.__mapOffset=r,n.dispatchAction({type:"GLMapRoam"}))}var a=!0,r=u(0).glMap,o=n.getZr().painter.getViewportRoot(),s=i.coordinateSystem;function c(){a||n.dispatchAction({type:"GLMapRoam"})}r.off("move",this._oldMoveHandler),r.off("zoomend",this._oldZoomEndHandler),r.on("move",e),r.on("zoomend",c),this._oldMoveHandler=e,this._oldZoomEndHandler=c;i.get("roam");a=!1}})}.call(e,u,e,t);void 0!==e&&(t.exports=e)},function(t,e,i){function r(t){var e=i(0),r=t.getCanvasContainer();this._container=document.createElement("div"),this._container.style.width=t.getCanvas().style.width,this._container.style.height=t.getCanvas().style.height,this._container.setAttribute("id","echarts"),this._container.setAttribute("class","echartMap"),this._map=t,r.appendChild(this._container),this.chart=e.init(this._container),e.glMap=t,this.resize()}r.prototype.remove=function(){var e=this;this._map._listeners.move.forEach(function(t){"moveHandler"===t.name&&e._map.off("move",t)}),this._map._listeners.move.forEach(function(t){"zoomEndHandler"===t.name&&e._map.off("zoomend",t)}),this.chart.clear(),this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._map=void 0},r.prototype.resize=function(){var t=this;window.onresize=function(){t._container.style.width=t._map.getCanvas().style.width,t._container.style.height=t._map.getCanvas().style.height,t.chart.resize()}},t.exports=r}],a={},n.m=i,n.c=a,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===o(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1);function n(t){var e;return(a[t]||(e=a[t]={i:t,l:!1,exports:{}},i[t].call(e.exports,e,e.exports,n),e.l=!0,e)).exports}var i,a},"object"===o(i)&&"object"===o(t)?t.exports=r(n("MT78")):(e=[n("MT78")],void 0!==(e="function"==typeof(r=r)?r.apply(i,e):r)&&(t.exports=e))}.call(this,n("YuTi")(t))},yNLB:function(t,e,r){"use strict";var i=r("Xnc8").PROPER,n=r("0Dky"),a=r("WJkJ");t.exports=function(t){return n(function(){return!!a[t]()||""!==""[t]()||i&&a[t].name!==t})}},yXPU:function(t,e){function c(t,e,r,i,n,a,o){try{var s=t[a](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(i,n)}t.exports=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,r){var i=s.apply(t,o);function n(t){c(i,e,r,n,a,"next",t)}function a(t){c(i,e,r,n,a,"throw",t)}n(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},yXV3:function(t,e,r){"use strict";var i=r("I+eb"),n=r("RiVN"),a=r("TWQb").indexOf,r=r("pkCn"),o=n([].indexOf),s=!!o&&1/o([1],1,-0)<0;i({target:"Array",proto:!0,forced:s||!r("indexOf")},{indexOf:function(t){var e=1<arguments.length?arguments[1]:void 0;return s?o(this,t,e)||0:a(this,t,e)}})},yoRg:function(t,e,r){"use strict";var i=r("4zBA"),o=r("Gi26"),s=r("/GqU"),c=r("TWQb").indexOf,u=r("0BK2"),l=i([].push);t.exports=function(t,e){var r,i=s(t),n=0,a=[];for(r in i)!o(u,r)&&o(i,r)&&l(a,r);for(;e.length>n;)!o(i,r=e[n++])||~c(a,r)||l(a,r);return a}},yy0I:function(t,e,r){"use strict";var o=r("Fib7"),s=r("m/L8"),c=r("E9LY"),u=r("Y3Q8");t.exports=function(t,e,r,i){var n=(i=i||{}).enumerable,a=void 0!==i.name?i.name:e;if(o(r)&&c(r,a,i),i.global)n?t[e]=r:u(e,r);else{try{i.unsafe?t[e]&&(n=!0):delete t[e]}catch(t){}n?t[e]=r:s.f(t,e,{value:r,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return t}},zBJ4:function(t,e,r){"use strict";var i=r("2oRo"),r=r("hh1v"),n=i.document,a=r(n)&&r(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},zJiX:function(t,e,r){"use strict";var i=r("I+eb"),n=r("xDBR"),a=r("Rzhe").CONSTRUCTOR,o=r("0lZ3"),s=r("0GbY"),c=r("Fib7"),r=r("yy0I"),u=o&&o.prototype;i({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(t){return this.then(void 0,t)}}),!n&&c(o)&&(i=s("Promise").prototype.catch,u.catch!==i)&&r(u,"catch",i,{unsafe:!0})},zc4i:function(t,e,r){"use strict";var i=r("2oRo"),r=r("Fib7"),i=i.WeakMap;t.exports=r(i)&&/native code/.test(String(i))},zfnd:function(t,e,r){"use strict";var i=r("glrk"),n=r("hh1v"),a=r("8GlL");t.exports=function(t,e){return i(t),n(e)&&e.constructor===t?e:((0,(t=a.f(t)).resolve)(e),t.promise)}}}]);