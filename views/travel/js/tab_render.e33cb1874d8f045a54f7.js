(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"9X7j":function(t,e,n){"use strict";n.r(e);var i=n("3Dh3"),a={name:"TabSubContainer",components:{DragContainer:n("9PB5").a},props:{gridLayout:{type:Array,default:function(){return[]}},pageId:{type:String},targetName:{type:String,default:""},activeComponents:{type:Array,default:function(){return[]}},noSwipingClass:{type:String,default:""},openAllDrag:{type:Boolean,default:!0}},data:function(){return{asyncLoaded:!0}}},o=n("KHd+"),a=Object(o.a)(a,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("drag-container",{attrs:{pageId:t.pageId,layoutContent:t.gridLayout,targetName:t.targetName,asyncLoaded:t.asyncLoaded,openAllDrag:t.openAllDrag,noSwipingClass:t.noSwipingClass}},[e("template",{slot:"tabPage"},[t._t("tabPage")],2)],2)},[],!1,null,null,null).exports,r=n("bTu8"),s=n("g0Ox"),c=n("Xchd"),p=n("0Xqd"),d=n("tC+P"),u=n("h2/A"),l=n("Ap4+"),h=n("daxC"),f=n("1VCM"),b=n("mK+M"),g=n("+wOk"),g=n.n(g),m=n("QG5D"),y=n("zT9C"),w=n.n(y),y=n("9/5/"),S=n.n(y),y=n("XaGS"),v=n.n(y),I=n("DwEk"),y=n("6G66");n("4l1m");function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function T(i){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach(function(t){var e,n;e=i,n=a[t=t],(t=function(t){t=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===C(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(a,t))})}return i}r.a.use([s.a,c.a,p.a,d.a,u.a,l.a,h.a,f.a,b.a]);s=g()(r.a),c={components:{TabSubContainer:a,Swiper:s.Swiper,SwiperSlide:s.SwiperSlide},mixins:[y.a],props:{openAllDrag:{type:Boolean,default:!0},gridLayout:{type:Array,default:function(){return[]}},targetName:{type:String},component:{type:Object,required:!0},defaultParams:{type:Object},autoResize:{type:Boolean,default:!0},pageId:{type:String}},data:function(){return{componentName:null,activeTabIndex:"0",delayFrameRender:!1,isHandleSlideChange:!1}},computed:{swiperOptions:function(){return{initialSlide:0,noSwiping:!0,observer:!0,observeParents:!0,observeSlideChildren:!0,noSwipingClass:this.noSwipingClass,direction:this.direction,grabCursor:!0,navigation:{nextEl:"#".concat(this.componentId,"-next"),prevEl:"#".concat(this.componentId,"-prev")}}},tabHeaderId:function(){return(this.tabHeaderLayouts[0]||{}).componentId},tabHeaderCom:function(){return this.$store.getters.getComponentsByID(this.tabHeaderId)||{}},tabHeaderProps:function(){return this.tabHeaderCom.propDatas||{}},dataConfig:function(){return this.defaultParams.props.dataConfig||[]},tabs:function(){return Object.keys(this.dataConfig)},subLayout:function(){return this.tabPageLayouts.concat(this.tabHeaderLayouts)},tabContentLayouts:function(){return this.getTabContentLayoutsByTabs(this.tabs)},tabHeaderLayouts:function(){var t;return this.findGridLayout(this.gridLayout,"TabHeader",t=[]),t},tabPageLayouts:function(){var t;return this.findGridLayout(this.gridLayout,"TabPage",t=[]),t},tabPageTargetName:function(){return this.tabPageLayouts[0].name},componentId:function(){return this.component.componentId},showSwiperButton:function(){return this.defaultParams.props.showSwiperButton},noSwiping:function(){return this.defaultParams.props.noSwiping},direction:function(){return this.defaultParams.props.direction||"horizontal"},swiperBtnStyle:function(){return this.defaultParams.props.swiperBtnStyle},noSwipingClass:function(){return"stop-swiping-".concat(this.componentId)},swiperSetting:function(){return{noSwiping:this.noSwiping,showSwiperButton:this.showSwiperButton,swiperBtnStyle:T({color:"#e3e3e3",fontSize:"18px",height:"50px",width:"50px"},this.swiperBtnStyle)}},tabSubContainerVisible:function(){var e=this;return function(t){return"".concat(e.component.componentId,"_").concat(e.activeTabIndex)===t?"visible":e.openAllDrag?"hidden":"not-visible"}},activeComponentId:function(){return this.$store.getters.activeComponentId},currentTabComponentIds:function(){return this.dataConfig[this.activeTabIndex].componentIds}},watch:{component:{handler:function(){this.componentName=Object(i.d)(this.component.uri)},deep:!0,immediate:!0},direction:function(){this.changeDirection(this.direction)},autoResize:function(){this.autoResizeHandler()},tabs:function(t,e){var n,i,a,o,r,s=this,c=w()(this.tabHeaderProps);c&&(n=c.tabs.map(function(t){return t.key}),i=c.tabs.map(function(t){return t.title}),a=Object.values(this.dataConfig).map(function(t){return t.title}),o=this.getActiveIndex(),v()(i,a)&&(v()(t,e)||v()(t,n))||(v()(t[o],e&&e[o])||(this.activeTabIndex=this.tabs&&this.tabs[o]||"0"),r=[],t.forEach(function(t){r.push({key:t,title:s.dataConfig[t].title})}),c.tabs=r,this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.tabHeaderId,propDatas:c})))},dataConfig:function(t,e){var t=Object.keys(t||[]),n=Object.keys(e||[]);this.delLayout(t,n,e)},swiperSetting:function(t,e){v()(t,e)||v()(t,this.tabHeaderProps.swiperSetting)||this.setTabHeaderSwiperSetting(t)},"tabHeaderProps.tabs":{handler:function(t,e){var n,i;v()(t,e)||(e=Object.values(this.dataConfig).map(function(t){return{key:t.key,title:t.title}}),v()(t,e))||(n=w()(this.defaultParams.props),i={},t.forEach(function(t){i[t.key]=T(T({componentIds:[]},n.dataConfig[t.key]),t)}),n.dataConfig=i,this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.componentId,propDatas:n}))},deep:!0},"tabHeaderProps.swiperSetting":{handler:function(t,e){var n,i;this.tabHeaderProps.swiperSetting&&(i=w()(this.tabHeaderProps.swiperSetting),v()(T({noSwiping:void 0},i),this.swiperSetting)||(n=T(T({},n=n||w()(this.defaultParams.props)),i),this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.componentId,propDatas:n})))},deep:!0},currentTabComponentIds:function(){var n=this;this.currentTabComponentIds.forEach(function(t){var e;-1!==t.indexOf("Compare")&&(e=n.$store.getters.getComponentsByID(t),n.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:t,propDatas:T(T({},e.propDatas),{},{isRefresh:!0})}))})}},created:function(){this.tabHeaderProps&&!this.tabHeaderProps.swiperSetting&&this.setTabHeaderSwiperSetting(this.swiperSetting)},mounted:function(){var t=this;this.autoResizeHandler(),this.$nextTick(function(){I.a.$on("".concat(t.tabHeaderId,"-active"),function(e){var t=this.tabs.findIndex(function(t){return t===e});-1<t&&t!==this.getActiveIndex()&&(this.swiper&&this.swiper.slideTo(t,1e3,!1),this.activeTabIndex=e,this.isHandleSlideChange=!0)}.bind(t)),t.delayFrameRender=!0})},beforeDestroy:function(){this.__resizeHandler&&Object(m.b)(this.$el,this.__resizeHandler),I.a.$off("".concat(this.tabHeaderId,"-active"))},methods:{initSwiper:function(){this.swiper=this.$refs.mySwiper&&this.$refs.mySwiper.$swiper},slideChange:function(){this.activeTabIndex=this.tabs&&this.tabs[this.getActiveIndex()]||"0",I.a.$emit("".concat(this.tabHeaderId,"-slide"),this.activeTabIndex)},getActiveIndex:function(){return this.swiper&&this.swiper.activeIndex||0},changeDirection:function(t){this.swiper&&this.swiper.changeDirection(t)},autoResizeHandler:function(){var t=this;this.autoResize&&(this.__resizeHandler=S()(function(){t.resize()},100,{leading:!0}),Object(m.a)(this.$el,this.__resizeHandler))},resize:function(){var t=this;setTimeout(function(){t.swiper&&t.swiper.update(!0)},0)},toggleTransitionChange:function(t){this.openAllDrag&&(this.$refs.mySwiper.$el.style.overflow=t?"hidden":"visible")},delLayout:function(i,t,a){var o=this;t.forEach(function(e){var t,n=!0;i.forEach(function(t){e===t&&(n=!1)}),n&&((t=o.getTabContentLayoutsByTabs([e],a))&&t["".concat(o.componentId,"_").concat(e)]||[]).forEach(function(t,e){o.$store.dispatch("DELETE_GRID_LAYOUT",{name:t.name,componentId:o.activeComponentId})})})},getTabContentLayoutsByTabs:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.dataConfig,i={};return t.forEach(function(t){i["".concat(e.componentId,"_").concat(t)]=[],e.findGridLayout(e.gridLayout,t,i["".concat(e.componentId,"_").concat(t)],n)}),i},findGridLayout:function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.dataConfig,a=i[e]&&i[e].componentIds,o=0;o<t.length;o++){var r=t[o].componentId;(-1!==e.indexOf("TabHeader")&&-1!==r.indexOf("TabHeader")||-1!==e.indexOf("TabPage")&&-1!==r.indexOf("TabPage")||-1===r.indexOf("TabHeader")&&a&&-1!==a.indexOf(r))&&n.push(t[o])}},setTabHeaderSwiperSetting:function(t){var e=w()(this.tabHeaderProps);e.swiperSetting=T(T({},e.swiperSetting),w()(t)),this.$store.dispatch("CHANGE_COMPONENT_PROPS_SETTING",{componentId:this.tabHeaderId,propDatas:e})}}},n("yZNS"),p=Object(o.a)(c,function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("div",{class:{"sm-tabRender":!0,"sm-tabRender-editor":n.openAllDrag}},[i(n.componentName,n._b({tag:"component",style:n.defaultParams.style,attrs:{componentId:n.componentId,activeTabIndex:n.activeTabIndex}},"component",n.defaultParams.props,!1),[i("tab-sub-container",{attrs:{gridLayout:n.subLayout,targetName:n.targetName,pageId:n.pageId,openAllDrag:n.openAllDrag}},[i("template",{slot:"tabPage"},[n.delayFrameRender?i("swiper",{ref:"mySwiper",attrs:{options:n.swiperOptions},on:{slideChange:n.slideChange,resize:n.resize,transitionStart:function(t){return n.toggleTransitionChange(!0)},transitionEnd:n.toggleTransitionChange,"hook:mounted":n.initSwiper}},n._l(n.tabContentLayouts,function(t,e){return i("swiper-slide",{key:e,class:[(n.openAllDrag||n.noSwiping)&&n.noSwipingClass]},[i("tab-sub-container",{key:e,class:["sm-component-tab",""+n.activeTabIndex,n.componentId,n.tabSubContainerVisible(e)],attrs:{gridLayout:t,pageId:n.pageId,targetName:n.tabPageTargetName,openAllDrag:n.openAllDrag,noSwipingClass:n.noSwipingClass}})],1)}),1):n._e()],1)],2),n._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:n.showSwiperButton,expression:"showSwiperButton"}],class:["swiper-button-prev"],style:n.swiperBtnStyle,attrs:{id:n.componentId+"-prev"}},[i("sm-icon",{attrs:{type:"left"}})],1),n._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:n.showSwiperButton,expression:"showSwiperButton"}],class:["swiper-button-next"],style:n.swiperBtnStyle,attrs:{id:n.componentId+"-next"}},[i("sm-icon",{attrs:{type:"right"}})],1)],1)],1)},[],!1,null,null,null);e.default=p.exports},SGRJ:function(t,e,n){},yZNS:function(t,e,n){"use strict";n("SGRJ")}}]);