(window.webpackJsonp=window.webpackJsonp||[]).push([[53,18],{"5Poc":function(t,e,n){"use strict";n.r(e);var r=n("EBC7"),o=n("GAzf"),u=n("wRVd"),i=n("GSdF"),s=n("4zwu"),a=n("YQ51"),c=n("qjgS"),p=n("XaGS"),h=n.n(p),d=n("QCDS"),l={switch:"title",switchDataSource:"title",jumpUrl:"href",changeStatus:"status"},p={mixins:[r.default,o.a,a.a,c.a],data:function(){return{props:{title:void 0,href:void 0,status:"deactive"}}},computed:{nextProps:function(){var t={};return void 0!==this.props.title&&(t.title=this.props.title),void 0!==this.props.href&&(t.href=Object(d.c)(this.props.href)),(t="active"===this.props.status?Object.assign({},t,this.currentProps.highlightOptions):t).background="",Object.assign({},this.currentProps,t)},nextStyle:function(){var t={};return"active"===this.props.status&&(t=Object.assign({},t,Object(i.a)(this.currentProps.highlightOptions))),Object.assign({},this.style,t)}},watch:{"currentProps.title":function(t,e){t!==e&&(this.props.title=t)},"currentProps.href":{handler:function(t,e){t!==e&&(this.props.href=t)},immediate:!0},listeners:{handler:function(t,e){this.listenersHandler(t,e)}}},created:function(){this.triggersConfig=u.c,this.initListeners()},methods:{updateDataPropsHandler:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return n.title=this.getValueByField(e.features,t.field),n},getFeatures:function(t){var e=this.$store.getters.getDataCache(t),t=this.getFeatureId(t),e=e&&e.type&&-1!==e.type.indexOf("time")&&this.currentProps.filterCategoryValue?s.a.$options.getDataByCategory(e,[this.currentProps.filterCategoryValue])||{}:s.a.$options.getData(t)||{};return e.features.features},listenersHandler:function(t,a){var c=this;!t||h()(t,a)?t||(this.props.title&&(this.props.title=void 0),this.props.href&&(this.props.href=void 0)):t.forEach(function(t){var e,n=t.targetData,r=t.actionId,o=t.timestamp,i=t.blockEventLinkage,n=n&&n.dataId,s=a&&a.find(function(t){return t.actionId===r});s&&s.timestamp===o||i||(n&&(e=c.getFeatures(n)),s=u.b[t.type].callback(t,e,c),c.props[l[t.type]]=s)})}}},r=n("KHd+"),o=Object(r.a)(p,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{class:["sm-component-text-wrapper"],style:e.nextStyle,on:{click:function(t){return t.stopPropagation(),e.handleClick.apply(null,arguments)}}},[t(e.componentId,e._b({tag:"component",style:e.defaultParams.style,attrs:{componentId:e.component.componentId},on:{"hook:mounted":e.handleComponentMounted,"hook:updated":e.handleComponentUpdated}},"component",e.nextProps,!1))],1)},[],!1,null,null,null);e.default=o.exports},EBC7:function(t,e,n){"use strict";n.r(e);var r=n("oCYn"),o=n("3Dh3"),i=n("zT9C"),s=n.n(i),i=n("XaGS"),a=n.n(i),c=n("GSdF"),u=n("FuRH"),i=n("6G66"),p=n("QCDS"),i={mixins:[i.a],props:{pageId:{type:String},component:{type:Object,required:!0},defaultParams:{type:Object}},data:function(){return{componentId:null,renderProps:null}},computed:{background:function(){return-1!==this.excludeComponentsBackground.indexOf(this.component.componentType)?{}:Object(c.a)(this.component.propDatas)},subComponentList:function(){var t=this.$store.getters.components;return Object.values(t.mapSubComponent).map(function(t){return t.type})},excludeComponentsBackground:function(){return this.subComponentList.concat("Container")},mapsOnScreen:function(){return this.$store.getters.mapsOnScreen[this.pageId]},firstMapTarget:function(){return(this.mapsOnScreen[0]||{}).value}},watch:{component:{handler:function(){var t=Object(o.d)(this.component.uri);this.componentId=r.default.component(t)?t:null},deep:!0,immediate:!0},"defaultParams.props":{handler:function(t,e){a()(t,e)||(this.renderProps=s()(this.defaultParams.props),-1===this.excludeComponentsBackground.indexOf(this.component.componentType)&&(this.renderProps.background=""),"Iframe"===this.component.componentType&&(this.renderProps.src=Object(p.c)(this.renderProps.src)),-1!==["LiquidFill","TimeRange"].indexOf(this.component.componentType)&&(this.renderProps.backgroundColor=this.renderProps.backgroundColorReplacer,delete this.renderProps.backgroundColorReplacer))},immediate:!0},mapsOnScreen:function(t,e){a()(t,e)||this.renderProps.mapTarget&&!u.a.$options.getMap(this.renderProps.mapTarget)&&(this.renderProps.mapTarget=this.firstMapTarget)}},created:function(){this.setDefaultMapTarget()},methods:{setDefaultMapTarget:function(){this.renderProps&&this.renderProps.hasOwnProperty("mapTarget")&&!this.renderProps.mapTarget&&(this.renderProps.mapTarget=this.getRelatedMapTarget())},getRelatedMapTarget:function(){var t=this.$store.getters,e=t.componentsOnScreen,t=t.activeComponentId,n=this.$store.getters.getGridLayoutByPageId(this.pageId,this.$store.getters.mode);return Object(o.i)(e,n.content||[],t)}}},n=n("KHd+"),n=Object(n.a)(i,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{style:t.background},[e(t.componentId,t._b({tag:"component",style:t.defaultParams.style,attrs:{componentId:t.component.componentId}},"component",t.renderProps,!1)),t._v(" "),t._t("fullScreen")],2)},[],!1,null,null,null);e.default=n.exports},GAzf:function(t,e,n){"use strict";var r=n("4zwu"),o=n("FuRH"),i=n("3Dh3"),s=n("+NyJ");e.a={data:function(){return{listenMapLoad:!1}},computed:{dataIds:function(){return this.component.dataIds||[]},dataId:function(){return this.dataIds[0]},currentDataCache:function(){return this.$store.getters.getDataCache(this.dataId)},components:function(){return this.$store.getters.components},componentType:function(){return this.component.componentType},mapTarget:function(){return this.component.propDatas.mapTarget},currentProps:function(){var t,e;return"server"===(t=this.renderProps).dataType&&0<this.dataIds.length&&(e=this.getValueProps(t),Object.assign(t,e)),t},labelConfig:function(){return Object(s.f)(this.component.componentId,this.dataId)}},beforeCreate:function(){this.watcher=[]},mounted:function(){this.listenMapLoad&&o.a.$on("load-map",this.loadMapSucceed)},beforeDestroy:function(){this.listenMapLoad&&o.a.$off("load-map",this.loadMapSucceed)},methods:{cleanWatcher:function(){this.watcher.forEach(function(t){t()}),this.watcher=[]},loadMapSucceed:function(t,e){e===this.mapTarget&&this.loadMap(e)},loadMap:function(){},getValueProps:function(t){var e=this.getFeatureId(this.dataId),e=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time")&&t.filterCategoryValue?r.a.$options.getDataByCategory(this.currentDataCache,[t.filterCategoryValue])||{}:r.a.$options.getData(e)||{};return this.updateDataPropsHandler(t,{features:e})},getValueByField:function(t,e){var n=this.currentDataCache&&this.currentDataCache.type&&-1!==this.currentDataCache.type.indexOf("time"),t=t&&t.features&&t.features.features,n=n?t&&t.length-1:0,t=t&&0<=n&&t[n]&&t[n].properties[e];return t||0===t?t.toString():""},hasField:function(t,e){return t&&t.features&&t.features.features[0]&&t.features.features[0].properties.hasOwnProperty(e)},getFeatureId:function(t){return Object(i.g)(this.$store.getters.getDataCache,t)}}}},YQ51:function(t,e,n){"use strict";var i=n("GbHz"),r={data:function(){return{eventList:[]}},computed:{listeners:function(){var t=this.component.componentId;return this.$store.getters.getListensByComponentId(t)},triggers:function(){return this.$store.getters.getActionsByComponentId(this.component.componentId)}},methods:{initListeners:function(){this.listenersHandler&&this.listenersHandler(this.listeners,[])},handleResetTriggers:function(t,e){if(e)for(var n in e){var r,o=null==(o=i.c[n])?void 0:o.resetHandlerName;o&&(r=e[n],n=t&&t[n]||[],0<r.length)&&0===n.length&&this[o]()}}}},n=n("KHd+"),n=Object(n.a)(r,void 0,void 0,!1,null,null,null);e.a=n.exports},qjgS:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function r(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],(t=function(t){t=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}var o={data:function(){return{eventList:[],isClickTrigger:!1}},computed:{triggers:function(){return this.$store.getters.getActionsByComponentId(this.component.componentId)},triggerStyle:function(){return this.isClickTrigger?{cursor:"pointer"}:{}},style:function(){return r(r({},this.background||{}),this.triggerStyle)}},watch:{triggers:{handler:function(t,e){this.handleTriggers(t)},deep:!0}},methods:{handleClick:function(){this.$emit("click")},handleComponentMounted:function(){this.initTriggers()},handleComponentUpdated:function(){this.initTriggers()},initTriggers:function(){this.triggers&&this.handleTriggers(this.triggers)},handleTriggers:function(e){var o=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.triggersConfig,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this;if(this.hasClickTrigger(this.triggers),this.eventList.length&&this.eventList.forEach(function(t){var e=t.eventName,t=t.listenerName;s.$off(e,o[t]),o[t]=null}),this.triggerEvent=[],this.eventList=[],e&&s)for(var t in e)!function(n){var t=i[n].events||[],r=e[n];o.triggerEvent.push(n),t.forEach(function(t){var e="handleTrigger".concat(t.replace(t[0],t[0].toUpperCase()));o[e]=function(t){t=o.getTriggerDatas(t,r,n,i).datas;o.$store.dispatch("UPDATE_ACTION",{componentId:o.component.componentId,type:n,status:"active",datas:t})},s.$on(t,o[e]),o.eventList.push({eventName:t,listenerName:e})})}(t)},getTriggerDatas:function(t,e,n){var r=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.triggersConfig,i=[];return e.forEach(function(t){var e=o[n].callback(t,r);i.push({actionId:t.actionId,data:e&&e.data})}),{datas:i}},hasClickTrigger:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.triggersConfig;for(e in t)if(-1!==(n[e].events||[]).indexOf("click"))return void(this.isClickTrigger=!0);this.isClickTrigger=!1}},render:function(){}},n=n("KHd+"),n=Object(n.a)(o,void 0,void 0,!1,null,null,null);e.a=n.exports}}]);