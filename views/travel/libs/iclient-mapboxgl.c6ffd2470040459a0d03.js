(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{xKWM:function(e,t,n){!function(g){function r(e){var t=o[e];return void 0!==t||(t=o[e]={id:e,loaded:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.loaded=!0),t.exports}var n,o;n={17549:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=(n=n(65064))&&"object"===r(n)&&"default"in n?n.default:n,o=2,i=.16,a=.05,s=.05,l=.15,c=5,f=4,h=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function p(e,t,n){return(n=60<=Math.round(e.h)&&Math.round(e.h)<=240?n?Math.round(e.h)-o*t:Math.round(e.h)+o*t:n?Math.round(e.h)+o*t:Math.round(e.h)-o*t)<0?n+=360:360<=n&&(n-=360),n}function d(e,t,n){return 0===e.h&&0===e.s?e.s:(1<(e=n?e.s-i*t:t===f?e.s+i:e.s+a*t)&&(e=1),(e=n&&t===c&&.1<e?.1:e)<.06&&(e=.06),Number(e.toFixed(2)))}function y(e,t,n){return 1<(n=n?e.v+s*t:e.v-l*t)&&(n=1),Number(n.toFixed(2))}function g(e){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=[],t=u(e),o=c;0<o;--o){var i=t.toHsv(),i=u({h:p(i,o,!0),s:d(i,o,!0),v:y(i,o,!0)}).toHexString();r.push(i)}r.push(t.toHexString());for(var a=1;a<=f;a+=1){var s=t.toHsv(),s=u({h:p(s,a),s:d(s,a),v:y(s,a)}).toHexString();r.push(s)}return"dark"===n.theme?h.map(function(e){var t=e.index,e=e.opacity;return u.mix(n.backgroundColor||"#141414",r[t],100*e).toHexString()}):r}var v={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},m={},b={},n=(Object.keys(v).forEach(function(e){m[e]=g(v[e]),m[e].primary=m[e][5],b[e]=g(v[e],{theme:"dark",backgroundColor:"#141414"}),b[e].primary=b[e][5]}),m.red),w=m.volcano,_=m.gold,x=m.orange,S=m.yellow,O=m.lime,P=m.green,E=m.cyan,k=m.geekblue,M=m.purple,j=m.magenta,C=m.grey;t.blue=m.blue,t.cyan=E,t.geekblue=k,t.generate=g,t.gold=_,t.green=P,t.grey=C,t.lime=O,t.magenta=j,t.orange=x,t.presetDarkPalettes=b,t.presetPalettes=m,t.presetPrimaryColors=v,t.purple=M,t.red=n,t.volcano=w,t.yellow=S},57238:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,n){var t=e.nodes,e=e.edges,r=[],o={};if(t)return t&&t.forEach(function(e,t){o[e.id]=t,r.push([])}),e&&e.forEach(function(e){var t=e.source,e=e.target,t=o[t],e=o[e];!t&&0!==t||!e&&0!==e||(r[t][e]=1,n)||(r[e][t]=1)}),r;throw new Error("invalid nodes data!")}},26765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n(54613),n=r.detectCycleAsync,n=(t.detectDirectedCycleAsync=n,{getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:n,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync});t.default=n},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,u=(r=n(93247))&&r.__esModule?r:{default:r},l=n(28182);t.default=function(e,t,n,r){void 0===r&&(r=!0);var o=function(e){function t(){}var n,r=e=void 0===e?{}:e;n={};return r.allowTraversal=e.allowTraversal||function(e){e=e.next;return!n[e]&&(n[e]=!0)},r.enter=e.enter||t,r.leave=e.leave||t,r}(n),i=new u.default,n=e.edges,a=void 0===n?[]:n;i.enqueue(t);for(var s="";!i.isEmpty();)!function(){var t=i.dequeue();o.enter({current:t,previous:s}),(0,l.getNeighbors)(t,a,r?"target":void 0).forEach(function(e){o.allowTraversal({previous:s,current:t,next:e})&&i.enqueue(e)}),o.leave({current:t,previous:s}),s=t}()}},16616:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(t?o:r)(e)},t.detectStrongConnectComponents=t.detectConnectedComponents=void 0;var d=n(28182),r=function(e){for(var t=e.nodes,o=void 0===t?[]:t,t=e.edges,i=void 0===t?[]:t,n=[],a={},s=[],r=function n(e){s.push(e),a[e.id]=!0;for(var r=(0,d.getNeighbors)(e.id,i),t=0;t<r.length;++t)!function(e){var t=r[e];a[t]||0<(e=o.filter(function(e){return e.id===t})).length&&n(e[0])}(t)},u=0;u<o.length;u++){var l=o[u];if(!a[l.id]){r(l);for(var c=[];0<s.length;)c.push(s.pop());n.push(c)}}return n},o=(t.detectConnectedComponents=r,function(e){for(var t=e.nodes,a=void 0===t?[]:t,t=e.edges,s=void 0===t?[]:t,u=[],l={},c={},f={},h=[],p=0,n=function n(r){c[r.id]=p,f[r.id]=p,p+=1,u.push(r),l[r.id]=!0;for(var o=(0,d.getNeighbors)(r.id,s,"target").filter(function(e){return-1<a.map(function(e){return e.id}).indexOf(e)}),e=0;e<o.length;e++)!function(e){var t=o[e];c[t]||0===c[t]?l[t]&&(f[r.id]=Math.min(f[r.id],c[t])):(0<(e=a.filter(function(e){return e.id===t})).length&&n(e[0]),f[r.id]=Math.min(f[r.id],f[t]))}(e);if(f[r.id]===c[r.id]){for(var t=[];0<u.length;){var i=u.pop();if(l[i.id]=!1,t.push(i),i===r)break}0<t.length&&h.push(t)}},r=0,o=a;r<o.length;r++){var i=o[r];c[i.id]||0===c[i.id]||n(i)}return h});t.detectStrongConnectComponents=o},79023:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secondReg=t.dateReg=void 0,t.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,t.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},16075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=n(43532))&&n.__esModule?n:{default:n};t.default=function(e,t){var t=new o.default(t),n=t.norm2(),e=new o.default(e),r=e.norm2(),t=t.dot(e),e=n*r;return e?t/e:0}},63597:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOutDegree=t.getInDegree=t.default=void 0;function n(e){var t={},n=void 0===(n=e.nodes)?[]:n,e=void 0===(e=e.edges)?[]:e;return n.forEach(function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}}),e.forEach(function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++}),t}t.default=n,t.getInDegree=function(e,t){return n(e)[t]?n(e)[t].inDegree:0},t.getOutDegree=function(e,t){return n(e)[t]?n(e)[t].outDegree:0}},12465:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.detectAllUndirectedCycle=t.detectAllDirectedCycle=t.detectAllCycles=t.default=void 0;var r,l=(r=n(81940))&&r.__esModule?r:{default:r},_=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(16616)),x=n(28182);function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function o(s,u,l){var e;void 0===l&&(l=!0);for(var c=[],t=0,n=(0,_.default)(s,!1);t<n.length;t++){var r=n[t];if(r.length)for(var r=r[0],o=r.id,f=[r],h=((e={})[o]=r,e),p=((r={})[o]=new Set,r);0<f.length;)for(var d=f.pop(),y=d.id,g=(0,x.getNeighbors)(y,s.edges),i=0;i<g.length;i+=1)!function(e){var t=g[e],e=s.nodes.find(function(e){return e.id===t});if(t===y)c.push(((n={})[t]=d,n));else if(t in p){if(!p[y].has(e)){for(var n=!0,r=[e,d],o=h[y];p[t].size&&!p[t].has(o)&&(r.push(o),o!==h[o.id]);)o=h[o.id];if(r.push(o),u&&l?(n=!1,-1<r.findIndex(function(e){return-1<u.indexOf(e.id)})&&(n=!0)):u&&!l&&-1<r.findIndex(function(e){return-1<u.indexOf(e.id)})&&(n=!1),n){for(var i={},a=1;a<r.length;a+=1)i[r[a-1].id]=r[a];r.length&&(i[r[r.length-1].id]=r[0]),c.push(i)}p[t].add(d)}}else h[t]=d,f.push(e),p[t]=new Set([d])}(i)}return c}function i(p,d,y){void 0===y&&(y=!0);for(var h=[],g=new Set,v=[],m=[],b={},w={},e=function e(t,n,r){var o=!1;if(!(d&&!1===y&&-1<d.indexOf(t.id))){h.push(t),g.add(t);for(var i=r[t.id],a=0;a<i.length;a+=1)if((f=b[i[a]])===n){for(var s={},u=1;u<h.length;u+=1)s[h[u-1].id]=h[u];h.length&&(s[h[h.length-1].id]=h[0]),m.push(s),o=!0}else g.has(f)||e(f,n,r)&&(o=!0);if(o)for(var l=[t];0<l.length;){var c=l.pop();g.has(c)&&(g.delete(c),v[c.id].forEach(function(e){l.push(e)}),v[c.id].clear())}else for(a=0;a<i.length;a+=1){var f=b[i[a]];v[f.id].has(t)||v[f.id].add(t)}h.pop()}return o},t=p.nodes,n=void 0===t?[]:t,r=0;r<n.length;r+=1){var o=n[r],i=o.id;b[w[i]=r]=o}if(d&&y)for(r=0;r<d.length;r++)!function(e){var t=d[e];w[n[e].id]=w[t],b[w[t]=0]=n.find(function(e){return e.id===t}),b[w[n[e].id]]=n[e]}(r);for(var a=0;a<n.length;){var s=n.filter(function(e){return w[e.id]>=a}),s=(0,_.detectStrongConnectComponents)({nodes:s,edges:p.edges}).filter(function(e){return 1<e.length});if(0===s.length)break;var s=function(e){for(var t,n=1/0,r=0;r<e.length;r+=1)for(var o=e[r],i=0;i<o.length;i++){var a=w[o[i].id];a<n&&(n=a,t=r)}for(var s=e[t],u=[],r=0;r<s.length;r+=1){var l=s[r];u[l.id]=[];for(var c=0,f=(0,x.getNeighbors)(l.id,p.edges,"target").filter(function(e){return-1<s.map(function(e){return e.id}).indexOf(e)});c<f.length;c++){var h=f[c];h!==l.id||!1===y&&-1<d.indexOf(l.id)?u[l.id].push(w[h]):m.push(((h={})[l.id]=l,h))}}return{component:s,adjList:u,minIdx:n}}(s),u=s.minIdx,l=s.adjList,s=s.component;if(!(1<s.length))break;s.forEach(function(e){v[e.id]=new Set});s=b[u];if(d&&y&&-1===d.indexOf(s.id))return m;e(s,s,l),a=u+1}return m}t.detectAllUndirectedCycle=o,t.detectAllDirectedCycle=i,t.detectAllCycles=function(e,t,n,r){return(t?i:o)(e,n,r=void 0===r?!0:r)};t.default=function(e){var o=null,t=e.nodes,i={},a={},s={},n={};(void 0===t?[]:t).forEach(function(e){a[e.id]=e});for(var r={enter:function(e){var t=e.current,e=e.previous;if(s[t]){o={};for(var n=t,r=e;r!==t;)o[n]=r,r=i[n=r];o[n]=r}else delete a[s[t]=t],i[t]=e},leave:function(e){e=e.current;delete s[n[e]=e]},allowTraversal:function(e){e=e.next;return!o&&!n[e]}};Object.keys(a).length;){var u=Object.keys(a)[0];(0,l.default)(e,u,r)}return o}},81940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){void 0===r&&(r=!0),function t(n,r,o,i,a){void 0===a&&(a=!0),i.enter({current:r,previous:o});var e=n.edges;(0,s.getNeighbors)(r,void 0===e?[]:e,a?"target":void 0).forEach(function(e){i.allowTraversal({previous:o,current:r,next:e})&&t(n,e,r,i,a)}),i.leave({current:r,previous:o})}(e,t,"",function(e){function t(){}var n,r=e=void 0===e?{}:e;n={};return r.allowTraversal=e.allowTraversal||function(e){e=e.next;return!n[e]&&(n[e]=!0)},r.enter=e.enter||t,r.leave=e.leave||t,r}(n),r)};var s=n(28182)},47618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var g=n(97582),v=n(31834),m=n(28182);t.default=function(e,n,t,i){var r=e.nodes,a=void 0===r?[]:r,r=e.edges,s=void 0===r?[]:r,o=[],u={},l={},c={};a.forEach(function(e,t){e=e.id;o.push(e),l[e]=1/0,e===n&&(l[e]=0)});for(var f=a.length,h=0;h<f;h++)!function(){var r=function(e,t,n){for(var r,o=1/0,i=0;i<t.length;i++){var a=t[i].id;!n[a]&&e[a]<=o&&(o=e[a],r=t[i])}return r}(l,a,u),o=r.id;if(u[o]=!0,l[o]===1/0)return;(t?(0,m.getOutEdgesNodeId):(0,m.getEdgesByNodeId))(o,s).forEach(function(e){var t=e.target,n=e.source,n=t===o?n:t,t=i&&e[i]?e[i]:1;l[n]>l[r.id]+t?(l[n]=l[r.id]+t,c[n]=[r.id]):l[n]===l[r.id]+t&&c[n].push(r.id)})}();c[n]=[n];var p={};for(d in l)l[d]!==1/0&&function e(t,n,r,o){if(t===n)return[t];if(o[n])return o[n];for(var i=[],a=0,s=r[n];a<s.length;a++){var u=e(t,s[a],r,o);if(!u)return;for(var l=0,c=u;l<c.length;l++){var f=c[l];(0,v.isArray)(f)?i.push((0,g.__spreadArray)((0,g.__spreadArray)([],f,!0),[n],!1)):i.push([f,n])}}return o[n]=i,o[n]}(n,d,c,p);var d,y={};for(d in p)y[d]=p[d][0];return{length:l,path:y,allPath:p}}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findShortestPath=t.findAllPath=void 0;var r,i=(r=n(47618))&&r.__esModule?r:{default:r},h=n(28182);t.findShortestPath=function(e,t,n,r,o){e=(0,i.default)(e,t,r,o),t=e.length,r=e.path,o=e.allPath;return{length:t[n],path:r[n],allPath:o[n]}},t.findAllPath=function(e,t,n,r){if(t===n)return[[t]];var e=e.edges,o=void 0===e?[]:e,i=[t],a=((e={})[t]=!0,e),s=[],u=[],l=r?(0,h.getNeighbors)(t,o,"target"):(0,h.getNeighbors)(t,o);for(s.push(l);0<i.length&&0<s.length;){var c,f=s[s.length-1];f.length?((f=f.shift())&&(i.push(f),a[f]=!0,l=r?(0,h.getNeighbors)(f,o,"target"):(0,h.getNeighbors)(f,o),s.push(l.filter(function(e){return!a[e]}))),i[i.length-1]===n&&(f=i.map(function(e){return e}),u.push(f),c=i.pop(),a[c]=!1,s.pop())):(c=i.pop(),a[c]=!1,s.pop())}return u}},51613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=(n=n(57238))&&n.__esModule?n:{default:n};t.default=function(e,t){for(var n=(0,u.default)(e,t),r=[],o=n.length,i=0;i<o;i+=1){r[i]=[];for(var a=0;a<o;a+=1)i===a?r[i][a]=0:0!==n[i][a]&&n[i][a]?r[i][a]=n[i][a]:r[i][a]=1/0}for(var s=0;s<o;s+=1)for(i=0;i<o;i+=1)for(a=0;a<o;a+=1)r[i][a]>r[i][s]+r[s][a]&&(r[i][a]=r[i][s]+r[s][a]);return r}},55654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31834),_=n(1821),x=(u.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},u.prototype.notEqualTo=function(e){return!this.equalTo(e)},u),s=(a.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},a.prototype.notEqualTo=function(e){return!this.equalTo(e)},a.prototype.pushBack=function(e,t,n,r,o){return this.dfsEdgeList.push(new x(e,t,n,r,o)),this.dfsEdgeList},a.prototype.toGraph=function(e,t){void 0===e&&(e=_.VACANT_GRAPH_ID);var i=new _.Graph(e,!0,t=void 0===t?!1:t);return this.dfsEdgeList.forEach(function(e){var t=e.fromNode,n=e.toNode,e=e.nodeEdgeNodeLabel,r=e.nodeLabel1,o=e.edgeLabel,e=e.nodeLabel2;r!==_.VACANT_NODE_LABEL&&i.addNode(t,r),e!==_.VACANT_NODE_LABEL&&i.addNode(n,e),r!==_.VACANT_NODE_LABEL&&e!==r&&i.addEdge(void 0,t,n,o)}),i},a.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;0<=t;t--){var n=this.dfsEdgeList[t],r=n.fromNode,n=n.toNode;r<n&&(void 0===e||n===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},a.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},a),S=(i.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},i.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},i),v=(o.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],o=e.nodeMap;return t.edges.forEach(function(e){(n.directed||t.label<=o[e.to].label)&&r.push(e)}),r},o.prototype.findBackwardEdge=function(e,t,n,r){if(this.directed||t!==n)for(var o=e.nodeMap,i=o[n.to].edges,a=i.length,s=0;s<a;s++){var u=i[s];if(!r.hasEdge(u)&&u.to===t.from)if(this.directed){if(o[t.from].label<o[n.to].label||o[t.from].label===o[n.to].label&&t.label<=u.label)return u}else if(t.label<u.label||t.label===u.label&&o[t.to].label<=o[n.to].label)return u}return null},o.prototype.findForwardPureEdges=function(e,t,n,r){for(var o=[],t=t.to,i=e.nodeMap[t].edges,a=i.length,s=0;s<a;s++){var u=i[s],l=e.nodeMap[u.to];n<=l.label&&!r.hasNode(l)&&o.push(u)}return o},o.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var o=[],i=e.nodeMap,a=i[t.to].label,s=i[t.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],f=i[c.to].label;t.to===c.to||f<n||r.hasNode(i[c.to])||(t.label<c.label||t.label===c.label&&a<=f)&&o.push(c)}return o},o.prototype.getSupport=function(e){var t={};return e.forEach(function(e){t[e.graphId]||(t[e.graphId]=!0)}),Object.keys(t).length},o.prototype.findMinLabel=function(r){var o=void 0;return Object.keys(r).forEach(function(e){var e=r[e],t=e.nodeLabel1,n=e.edgeLabel,e=e.nodeLabel2;(!o||t<o.nodeLabel1||t===o.nodeLabel1&&n<o.edgeLabel||t===o.nodeLabel1&&n===o.edgeLabel&&e<o.nodeLabel2)&&(o={nodeLabel1:t,edgeLabel:n,nodeLabel2:e})}),o},o.prototype.isMin=function(){var y,g,v,m,o,e,b=this,w=this.dfsCode;return this.verbose&&console.log("isMin checking",w),1===w.dfsEdgeList.length||(y=this.directed,g=w.toGraph(_.VACANT_GRAPH_ID,y),v=g.nodeMap,m=new s,o={},g.nodes.forEach(function(r){b.findForwardRootEdges(g,r).forEach(function(e){var t=v[e.to],n="".concat(r.label,"-").concat(e.label,"-").concat(t.label),t=(o[n]||(o[n]={projected:[],nodeLabel1:r.label,edgeLabel:e.label,nodeLabel2:t.label}),{graphId:g.id,edge:e,preNode:null});o[n].projected.push(t)})}),(e=this.findMinLabel(o))?(m.dfsEdgeList.push(new x(0,1,e.nodeLabel1,e.edgeLabel,e.nodeLabel2)),e="".concat(e.nodeLabel1,"-").concat(e.edgeLabel,"-").concat(e.nodeLabel2),function e(r){for(var o=m.buildRmpath(),i=m.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,t=m.dfsEdgeList[o[0]].toNode,a={},s=!1,u=0,n=y?-1:0,l=o.length-1;n<l&&"break"!==function(n){if(s)return"break";r.forEach(function(e){var t=new S(e),t=b.findBackwardEdge(g,t.edges[o[n]],t.edges[o[0]],t);t&&(a[t.label]||(a[t.label]={projected:[],edgeLabel:t.label}),a[t.label].projected.push({graphId:g.id,edge:a,preNode:e}),u=m.dfsEdgeList[o[n]].fromNode,s=!0)})}(l);l--);if(s)return f=b.findMinLabel(a),m.dfsEdgeList.push(new x(t,u,_.VACANT_NODE_LABEL,f.edgeLabel,_.VACANT_NODE_LABEL)),c=m.dfsEdgeList.length-1,b.dfsCode.dfsEdgeList[c]===m.dfsEdgeList[c]&&e(a[f.edgeLabel].projected);for(var c,f,h={},s=!1,p=0,d=(r.forEach(function(n){var e=new S(n),e=b.findForwardPureEdges(g,e.edges[o[0]],i,e);0<e.length&&(s=!0,p=t,e.forEach(function(e){var t="".concat(e.label,"-").concat(v[e.to].label);h[t]||(h[t]={projected:[],edgeLabel:e.label,nodeLabel2:v[e.to].label}),h[t].projected.push({graphId:g.id,edge:e,preNode:n})}))}),o.length),l=0;l<d&&"break"!==function(e){if(s)return"break";var t=o[e];r.forEach(function(n){var e=new S(n),e=b.findForwardRmpathEdges(g,e.edges[t],i,e);0<e.length&&(s=!0,p=m.dfsEdgeList[t].fromNode,e.forEach(function(e){var t="".concat(e.label,"-").concat(v[e.to].label);h[t]||(h[t]={projected:[],edgeLabel:e.label,nodeLabel2:v[e.to].label}),h[t].projected.push({graphId:g.id,edge:e,preNode:n})}))})}(l);l++);return!s||(c=b.findMinLabel(h),m.dfsEdgeList.push(new x(p,t+1,_.VACANT_NODE_LABEL,c.edgeLabel,c.nodeLabel2)),f=m.dfsEdgeList.length-1,w.dfsEdgeList[f]===m.dfsEdgeList[f]&&e(h["".concat(c.edgeLabel,"-").concat(c.nodeLabel2)].projected))}(o[e].projected)):void 0)},o.prototype.report=function(){var e;this.dfsCode.getNodeNum()<this.minNodeNum||(this.counter++,e=this.dfsCode.toGraph(this.counter,this.directed),this.frequentSubgraphs.push((0,r.clone)(e)))},o.prototype.subGraphMining=function(e){var s,u,l,c,f,h,p=this;this.getSupport(e)<this.minSupport||!this.isMin()||(this.report(),s=this.dfsCode.getNodeNum(),u=this.dfsCode.buildRmpath(),l=this.dfsCode.dfsEdgeList[u[0]].toNode,c=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,f={},h={},e.forEach(function(r){for(var e=p.graphs[r.graphId],o=e.nodeMap,t=new S(r),n=u.length-1;0<=n;n--){var i,a=p.findBackwardEdge(e,t.edges[u[n]],t.edges[u[0]],t);a&&(i="".concat(p.dfsCode.dfsEdgeList[u[n]].fromNode,"-").concat(a.label),h[i]||(h[i]={projected:[],toNodeId:p.dfsCode.dfsEdgeList[u[n]].fromNode,edgeLabel:a.label}),h[i].projected.push({graphId:r.graphId,edge:a,preNode:r}))}if(!(s>=p.maxNodeNum)){p.findForwardPureEdges(e,t.edges[u[0]],c,t).forEach(function(e){var t="".concat(l,"-").concat(e.label,"-").concat(o[e.to].label);f[t]||(f[t]={projected:[],fromNodeId:l,edgeLabel:e.label,nodeLabel2:o[e.to].label}),f[t].projected.push({graphId:r.graphId,edge:e,preNode:r})});for(n=0;n<u.length;n++)!function(n){p.findForwardRmpathEdges(e,t.edges[u[n]],c,t).forEach(function(e){var t="".concat(p.dfsCode.dfsEdgeList[u[n]].fromNode,"-").concat(e.label,"-").concat(o[e.to].label);f[t]||(f[t]={projected:[],fromNodeId:p.dfsCode.dfsEdgeList[u[n]].fromNode,edgeLabel:e.label,nodeLabel2:o[e.to].label}),f[t].projected.push({graphId:r.graphId,edge:e,preNode:r})})}(n)}}),Object.keys(h).forEach(function(e){var t=h[e],n=t.toNodeId,t=t.edgeLabel;p.dfsCode.dfsEdgeList.push(new x(l,n,"-1",t,"-1")),p.subGraphMining(h[e].projected),p.dfsCode.dfsEdgeList.pop()}),Object.keys(f).forEach(function(e){var t=f[e],n=t.fromNodeId,r=t.edgeLabel,t=t.nodeLabel2;p.dfsCode.dfsEdgeList.push(new x(n,l+1,_.VACANT_NODE_LABEL,r,t)),p.subGraphMining(f[e].projected),p.dfsCode.dfsEdgeList.pop()}))},o.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,l=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,o={},c={},i={};return Object.keys(t).forEach(function(s){var e=t[s],u=e.nodeMap;e.nodes.forEach(function(e,t){var n,a=e.label,r="".concat(s,"-").concat(a);i[r]||(n=o[a]||0,o[a]=++n),i[r]={graphKey:s,label:a},e.edges.forEach(function(e){var t,n=a,r=u[e.to].label,o=(!l&&r<n&&(o=r,r=n,n=o),e.label),e="".concat(s,"-").concat(n,"-").concat(o,"-").concat(r),i="".concat(n,"-").concat(o,"-").concat(r);c[i]||(t=c[i]||0,c[i]=++t),e,0})})}),Object.keys(o).forEach(function(e){var t;o[e]<n||((t={nodes:[],edges:[]}).nodes.push({id:"0",label:e}),r.push(t))}),r},o.prototype.run=function(){var t,a,s=this;this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),this.maxNodeNum<2||(t=this.graphs,this.directed,a={},Object.keys(t).forEach(function(o){var e=t[o],i=e.nodeMap;e.nodes.forEach(function(r){s.findForwardRootEdges(e,r).forEach(function(e){var t=i[e.to],n="".concat(r.label,"-").concat(e.label,"-").concat(t.label),t=(a[n]||(a[n]={projected:[],nodeLabel1:r.label,edgeLabel:e.label,nodeLabel2:t.label}),{graphId:o,edge:e,preNode:null});a[n].projected.push(t)})})}),Object.keys(a).forEach(function(e){var e=a[e],t=e.projected,n=e.nodeLabel1,r=e.edgeLabel,e=e.nodeLabel2;s.dfsCode.dfsEdgeList.push(new x(0,1,n,r,e)),s.subGraphMining(t),s.dfsCode.dfsEdgeList.pop()}))},o);function o(e){var t=e.graphs,n=e.minSupport,n=void 0===n?2:n,r=e.minNodeNum,r=void 0===r?1:r,o=e.maxNodeNum,o=void 0===o?4:o,i=e.top,i=void 0===i?10:i,a=e.directed,a=void 0!==a&&a,e=e.verbose,e=void 0!==e&&e;this.graphs=t,this.dfsCode=new s,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=i,this.directed=a,this.counter=0,this.maxNodeNum=o,this.minNodeNum=r,this.verbose=e,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}function a(){this.rmpath=[],this.dfsEdgeList=[]}function u(e,t,n,r,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||_.VACANT_NODE_LABEL,edgeLabel:r||_.VACANT_EDGE_LABEL,nodeLabel2:o||_.VACANT_NODE_LABEL}}t.default=function(e){var n,r,a,s,u,o,i,t,l=e.graphs,c=e.directed,c=void 0!==c&&c,f=e.nodeLabelProp,f=void 0===f?"cluster":f,h=e.edgeLabelProp,h=void 0===h?"cluster":h,l=(n=l,r=c,a=f,s=h,u={},Object.keys(n).forEach(function(e,t){var e=n[e],o=new _.Graph(t,!0,r),i={};e.nodes.forEach(function(e,t){o.addNode(t,e[a]),i[e.id]=t}),e.edges.forEach(function(e,t){var n=i[e.source],r=i[e.target];o.addEdge(-1,n,r,e[s])}),o&&o.getNodeNum()&&(u[o.id]=o)}),u),p=e.minSupport,d=e.maxNodeNum,y=e.minNodeNum,g=e.verbose,e=e.top,l=new v({graphs:l,minSupport:p,maxNodeNum:d,minNodeNum:y,top:e,verbose:g,directed:c});return l.run(),p=l.frequentSubgraphs,o=f,i=h,t=[],p.forEach(function(e){var n={nodes:[],edges:[]};e.nodes.forEach(function(e){var t;n.nodes.push(((t={id:"".concat(e.id)})[o]=e.label,t))}),e.edges.forEach(function(e){var t;n.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[i]=e.label,t))}),t.push(n)}),t}},1821:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VACANT_NODE_LABEL=t.VACANT_NODE_ID=t.VACANT_GRAPH_ID=t.VACANT_EDGE_LABEL=t.VACANT_EDGE_ID=t.Node=t.Graph=t.Edge=t.AUTO_EDGE_ID=void 0;t.VACANT_EDGE_ID=-1,t.VACANT_NODE_ID=-1,t.VACANT_EDGE_LABEL="-1";t.VACANT_NODE_LABEL="-1",t.VACANT_GRAPH_ID=-1,t.AUTO_EDGE_ID="-1";var i=function(e,t,n,r){void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e=void 0===e?-1:e,this.from=t,this.to=n,this.label=r},r=(t.Edge=i,n.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},n);function n(e,t){void 0===t&&(t="-1"),this.id=e=void 0===e?-1:e,this.label=t,this.edges=[],this.edgeMap={}}function o(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e=void 0===e?-1:e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}t.Node=r,o.prototype.getNodeNum=function(){return this.nodes.length},o.prototype.addNode=function(e,t){var n;this.nodeMap[e]||(n=new r(e,t),this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e))},o.prototype.addEdge=function(e,t,n,r){var o;!this.edgeIdAutoIncrease&&void 0!==e||(e=this.counter++),this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e]||(o=new i(e,t,n,r),this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),this.directed)||(o=new i(e,n,t,r),this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o))},t.Graph=o},29317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var X=n(97582),q=r(n(51613)),J=r(n(55654)),Z=r(n(47618)),a=n(28182);function r(e){return e&&e.__esModule?e:{default:e}}function K(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var o=[],i=e.nodes;return t.forEach(function(e,t){o.push(ne(i,e,t,n,r))}),o}function Q(e,n){var r={},o={};return e.forEach(function(e,t){r[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};t=e[n];o[t]||(o[t]=[]),o[t].push(e)}),{nodeMap:r,nodeLabelMap:o}}function $(e,n,r){var o={},i={};return e.forEach(function(e,t){o["".concat(a.uniqueId)]={idx:t,edge:e};t=e[n],i[t]||(i[t]=[]),i[t].push(e),t=r[e.source],t&&(t.degree++,t.outDegree++),t=r[e.target];t&&(t.degree++,t.inDegree++)}),{edgeMap:o,edgeLabelMap:i}}function ee(a,e,s){var u=e.length,l={};return e.forEach(function(e,t){for(var n,r,o=a[t].id,i=s?0:t+1;i<u;i++)t!==i&&(n=a[i].id,r=e[i],l["".concat(o,"-").concat(n)]=r,s||(l["".concat(n,"-").concat(o)]=r))}),l}function te(e,t,n,r){var o,i=null==(o=e[t])?void 0:o.degree,a=null==(o=e[t])?void 0:o.inDegree,s=null==(o=e[t])?void 0:o.outDegree;return void 0===e[t]&&(s=a=i=1/0,r[t].forEach(function(e){var t=n[e.id].degree,t=(t<i&&(i=t),n[e.id].inDegree),t=(t<a&&(a=t),n[e.id].outDegree);t<s&&(s=t)}),e[t]={degree:i,inDegree:a,outDegree:s}),{minPatternNodeLabelDegree:i,minPatternNodeLabelInDegree:a,minPatternNodeLabelOutDegree:s}}var ne=function(n,e,r,o,i){var a=[r],s=[],u={};return e.forEach(function(e,t){e<=i&&r!==t&&(a.push(t),s.push(n[t]),t=n[t][o],u[t]?(u[t].count++,u[t].dists.push(e)):u[t]={count:1,dists:[e]})}),Object.keys(u).forEach(function(e){u[e].dists=u[e].dists.sort(function(e,t){return e-t})}),{nodeIdx:r,nodeId:n[r].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:u}},re=function(l,c,f,h){var p=f.nodes;return h=h||{},Object.keys(l).forEach(function(t){if(!h||!h[t]){h[t]={nodes:[],edges:[]};var e=l[t],n=null==(n=c[e.start])?void 0:n.nodeIdxs,e=null==(e=c[e.end])?void 0:e.nodeIdxs;if(n&&e){var r=new Set(e),o=n.filter(function(e){return r.has(e)});if(o&&o.length){for(var i={},a=o.length,s=0;s<a;s++){var u=p[o[s]];h[t].nodes.push(u),i[u.id]=!0}f.edges.forEach(function(e){i[e.source]&&i[e.target]&&h[t].edges.push(e)})}}}}),h},oe=function(e,a,s,u){var t,l={},c=(e.nodes.forEach(function(e){l[e.id]=e}),0);return null==(t=null==a?void 0:a.edges)||!t.length||(null==(t=null==a?void 0:a.nodes)?void 0:t.length)<2?0:(e.edges.forEach(function(e){var t=l[e.source][s],n=l[e.target][s],r=null==a?void 0:a.nodes[0][s],o=null==a?void 0:a.nodes[1][s],i=null==a?void 0:a.edges[0][u];e[u]===i&&(t===r&&n===o||t===o&&n===r)&&c++}),c)};t.default=function(k,M,j,e,b,C,T){var u,l,d,c,f,y;if(void 0===j&&(j=!1),void 0===C&&(C="cluster"),void 0===T&&(T="cluster"),k&&k.nodes){var t=k.nodes.length;if(t){var w=(0,q.default)(k,j),n=(0,q.default)(M,j),_=ee(k.nodes,w,j),g=ee(M.nodes,n,j),r=Q(k.nodes,C),A=r.nodeMap,v=r.nodeLabelMap,r=Q(M.nodes,C),I=r.nodeMap,R=r.nodeLabelMap,L=($(k.edges,T,A),$(M.edges,T,I).edgeLabelMap),o=[],x=(null!=n&&n.forEach(function(e){o=o.concat(e)}),b=b||Math.max.apply(Math,(0,X.__spreadArray)((0,X.__spreadArray)([],o,!1),[2],!1)),K(k,w,C,e=e||b)),m=K(M,n,C,e);u=t,l=Math.min(100,t*(t-1)/2),r=x,d=w,c=Math.ceil(l/u),f={},y=0,r.forEach(function(e,t){for(var n=0,r=0,o=e.nodeIdxs,i=e.neighborNum-1;n<c;){for(var a=o[1+Math.floor(Math.random()*i)],s=0;(f["".concat(t,"-").concat(a)]||f["".concat(a,"-").concat(t)])&&(a=Math.floor(Math.random()*u),!(++s>2*u)););if(s<2*u&&(f["".concat(t,"-").concat(a)]={start:t,end:a,distance:d[t][a]},n++,++y>=l))return f;if(++r>2*u)break}n<c&&(c=(c+(c-n))/(u-t-1))});var S=re(f,x,k),n={graphs:S,nodeLabelProp:C,edgeLabelProp:T,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:j},e=(0,J.default)(n).slice(0,10),t=e.length,i=[],r=(e.forEach(function(n,r){i[r]={},Object.keys(S).forEach(function(e){var t=S[e],t=oe(t,n,C,T);i[r][e]=t})}),function(s,e,t){for(var u=1/0,l=0,n=0;n<e;n++)!function(e){var i=s[e],n=[],r=(Object.keys(i).sort(function(e,t){return i[e]-i[t]}).forEach(function(e,t){n[t%10]||(n[t%10]={graphs:[],totalCount:0,aveCount:0}),n[t%10].graphs.push(e),n[t%10].totalCount+=i[e]}),0),a=[],o=(n.forEach(function(t){var e=t.totalCount/t.graphs.length,o=(t.aveCount=e,a.push(e),0),e=t.length;t.graphs.forEach(function(e,n){var r=i[e];t.graphs.forEach(function(e,t){n!==t&&(o+=Math.abs(r-i[e]))})}),r+=o/=e*(e-1)/2}),r/=n.length,0),t=(a.forEach(function(n,r){a.forEach(function(e,t){r!==t&&(o+=Math.abs(n-e))}),o/=a.length*(a.length-1)/2}),o-r);u<t&&(u=t,l=e)}(n);return{structure:t[l],structureCountMap:s[l]}}(i,t,e)),O=r.structure,P=r.structureCountMap,N=M.nodes[0],h=[],z=null==(n=M.nodes[0])?void 0:n[C],U=-1/0,V=(M.nodes.forEach(function(e){var t=e[C],n=v[t];(null==n?void 0:n.length)>U&&(U=n.length,h=n,z=t,N=e)}),{}),a={},s={},E={},D={},B={},F=(Object.keys(R).forEach(function(c,e){D[c]=[],j&&(B[c]=[]);var n=-1/0,r={},f=(R[c].forEach(function(e){var t=g["".concat(N.id,"-").concat(e.id)];t&&D[c].push(t),n<t&&(n=t),r["".concat(N.id,"-").concat(e.id)]={start:0,end:I[e.id].idx,distance:t},j&&(t=g["".concat(e.id,"-").concat(N.id)])&&B[c].push(t)}),D[c]=D[c].sort(function(e,t){return e-t}),j&&(B[c]=B[c].sort(function(e,t){return e-t})),a=re(r,m,M,a),[]);if(Object.keys(r).forEach(function(e){var t;s[e]||(t=a[e],s[e]=oe(t,O,C,T)),f.push(s[e])}),f=f.sort(function(e,t){return t-e}),E["".concat(N.id,"-").concat(c)]=f,c!==z)for(var t=((null==h?void 0:h.length)||0)-1;0<=t;t--)!function(e){var n=h[e],t=x[A[n.id].idx],r=t.nodeLabelCountMap[c],o=R[c].length;if(!r||r.count<o)return h.splice(e,1);for(var i=!1,a=0;a<o;a++)if(r.dists[a]>D[c][a]){i=!0;break}if(i)return h.splice(e,1);for(var s={},u=(t.neighbors.forEach(function(e){var t=_["".concat(n.id,"-").concat(e.id)];s["".concat(n.id,"-").concat(e.id)]={start:A[n.id].idx,end:A[e.id].idx,distance:t}}),S=re(s,x,k,S),[]),l=(Object.keys(s).forEach(function(e){var t;P[e]||(t=S[e],P[e]=oe(t,O,C,T)),u.push(P[e])}),u=u.sort(function(e,t){return t-e}),!1),a=0;a<o;a++)if(u[a]<f[a]){l=!0;break}l&&h.splice(e,1)}(t)}),[]),W=(null!=h&&h.forEach(function(e){for(var t,n,r,o,i,a,s,u,l=A[e.id].idx,c=ne(k.nodes,w[l],l,C,b).neighbors,l=!1,f=c.length-1;0<=f;f--){if(c.length+1<M.nodes.length)return;var h=c[f],p=h[C];if(R[p]&&R[p].length)if(D[p]&&D[p].length){var d="".concat(e.id,"-").concat(h.id),y=_[d],g=D[p].length-1;if(y>D[p][g])c.splice(f,1);else{if(j){var v="".concat(h.id,"-").concat(e.id),v=_[v],g=B[p].length-1;if(v>B[p][g]){c.splice(f,1);continue}}var m=P[d]||(v=k,g=h,d=A,y=y,t=x,n=O,r=C,o=T,i=P,a=S,u=s=void 0,u="".concat((m=e).id,"-").concat(g.id),i&&i[u]?i[u]:((i=a?a[u]:void 0)||((s={})[u]={start:d[m.id].idx,end:d[g.id].idx,distance:y},i=(a=re(s,t,v,a))[u]),oe(i,n,r,o))),d="".concat(N.id,"-").concat(p);(m<E[d][E[d].length-1]||(y=(g=te(V,p,I,R)).minPatternNodeLabelDegree,g.minPatternNodeLabelInDegree,g.minPatternNodeLabelOutDegree,A[h.id].degree<y))&&c.splice(f,1)}}else c.splice(f,1);else c.splice(f,1)}l||F.push({nodes:[e].concat(c)})}),(0,Z.default)(M,N.id,!1).length),G={};j?(Object.keys(W).forEach(function(e){var t=I[e].node[C];G[t]?G[t].push(W[e]):G[t]=[W[e]]}),Object.keys(G).forEach(function(e){G[e].sort(function(e,t){return e-t})})):G=D;for(var Y=function(e){var o=F[e],t=o.nodes[0],i={},s={},u=(o.nodes.forEach(function(e,t){s[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};t=e[C];i[t]?i[t]++:i[t]=1}),[]),l={};k.edges.forEach(function(e){s[e.source]&&s[e.target]&&(u.push(e),l[e[T]]?l[e[T]]++:l[e[T]]=1,s[e.source].degree++,s[e.target].degree++,s[e.source].outDegree++,s[e.target].inDegree++)});for(var n=Object.keys(L).length,r=!1,a=0;a<n;a++){var c=Object.keys(L)[a];if(!l[c]||l[c]<L[c].length){r=!0;break}}if(r)return F.splice(e,1),"continue";var f=u.length;if(f<M.edges.length)return F.splice(e,1),"break";for(var h=!1,a=f-1;0<=a&&"break"!==function(e){var n,r,o,t=u[e],i=t[T],a=L[i];return a&&a.length&&(n=s[t.source].node[C],r=s[t.target].node[C],o=!1,a.forEach(function(e){var t=I[e.source].node,e=I[e.target].node;t[C]===n&&e[C]===r&&(o=!0),j||t[C]!==r||e[C]!==n||(o=!0)}),o)?void 0:(l[i]--,a&&l[i]<a.length?(h=!0,"break"):(u.splice(e,1),s[t.source].degree--,s[t.target].degree--,s[t.source].outDegree--,s[t.target].inDegree--,"continue"))}(a);a--);if(h)return F.splice(e,1),"continue";o.edges=u;var p=(0,Z.default)(o,o.nodes[0].id,!1).length;if(Object.keys(p).reverse().forEach(function(e){if(e!==o.nodes[0].id&&!h){var t,n;if(p[e]===1/0)return t=s[e].node[C],i[t]--,i[t]<R[t].length?void(h=!0):(n=o.nodes.indexOf(s[e].node),o.nodes.splice(n,1),void(s[e]=void 0));var r=A[e].node[C];G[r]&&G[r].length&&!(p[e]>G[r][G[r].length-1])||(t=s[e].node[C],i[t]--,i[t]<R[t].length?h=!0:(n=o.nodes.indexOf(s[e].node),o.nodes.splice(n,1),s[e]=void 0))}}),h)return F.splice(e,1),"continue";for(var d=!0,y=0;d&&!h;){if(d=!1,j?s[t.id].degree<I[N.id].degree||s[t.id].inDegree<I[N.id].inDegree||s[t.id].outDegree<I[N.id].outDegree:s[t.id].degree<I[N.id].degree){h=!0;break}if(i[t[C]]<R[t[C]].length){h=!0;break}for(var g=o.nodes.length-1;0<=g;g--){var v=o.nodes[g],m=s[v.id].degree,b=s[v.id].inDegree,w=s[v.id].outDegree,_=v[C],_=te(V,_,I,R),x=_.minPatternNodeLabelDegree,S=_.minPatternNodeLabelInDegree,_=_.minPatternNodeLabelOutDegree;if(j?m<x||b<S||w<_:m<x){if(i[v[C]]--,i[v[C]]<R[v[C]].length){h=!0;break}o.nodes.splice(g,1),d=!(s[v.id]=void 0)}}if(h||!d&&0!==y)break;for(var O=u.length-1;0<=O;O--){var P=u[O];if(!s[P.source]||!s[P.target]){u.splice(O,1);var E=P[T];if(l[E]--,s[P.source]&&(s[P.source].degree--,s[P.source].outDegree--),s[P.target]&&(s[P.target].degree--,s[P.target].inDegree--),L[E]&&l[E]<L[E].length){h=!0;break}d=!0}}y++}return h||o.nodes.length<M.nodes.length||u.length<M.edges.length?(F.splice(e,1),"continue"):void 0},p=F.length-1;0<=p&&"break"!==Y(p);p--);for(var H=F.length,p=0;p<=H-1;p++)!function(e){var r={};F[e].edges.forEach(function(e){e="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[e]?r[e]++:r[e]=1});for(var t=H-1;e<t;t--)!function(e){var t={},n=(F[e].edges.forEach(function(e){e="".concat(e.source,"-").concat(e.target,"-").concat(e.label);t[e]?t[e]++:t[e]=1}),!0);Object.keys(t).length!==Object.keys(r).length?n=!1:Object.keys(r).forEach(function(e){t[e]!==r[e]&&(n=!1)}),n&&F.splice(e,1)}(t);H=F.length}(p);return F}}}},22124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=(n=n(2006))&&n.__esModule?n:{default:n};t.default=function(e,t,n,r,o,i,a,s){return(0,u.default)(e,t=void 0===t?!1:t,n=void 0===n?"weight":n,r=void 0===r?1e-4:r,!0,o=void 0===o?void 0:o,i=void 0===i?[]:i,a=void 0===a?["id"]:a,s=void 0===s?1:s)}},81366:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"Stack",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"cosineSimilarity",{enumerable:!0,get:function(){return m.default}}),t.default=void 0,Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectAllCycles",{enumerable:!0,get:function(){return u.detectAllCycles}}),Object.defineProperty(t,"detectAllDirectedCycle",{enumerable:!0,get:function(){return u.detectAllDirectedCycle}}),Object.defineProperty(t,"detectAllUndirectedCycle",{enumerable:!0,get:function(){return u.detectAllUndirectedCycle}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return u.default}}),t.detectDirectedCycle=void 0,Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return O.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(t,"iLouvain",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"kCore",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"kMeans",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"nodesCosineSimilarity",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return _.default}});var r=k(n(57238)),o=k(n(1264)),i=k(n(16616)),s=E(n(63597)),u=E(n(12465)),l=k(n(81940)),c=k(n(47618)),f=n(56),h=k(n(51613)),p=k(n(73760)),d=k(n(2006)),y=k(n(22124)),g=k(n(32141)),v=k(n(32339)),m=k(n(16075)),b=k(n(36649)),w=k(n(60015)),_=k(n(16155)),x=k(n(29317)),S=k(n(51602)),O=n(28182);function P(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(P=function(e){return e?n:t})(e))}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=P(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function k(e){return e&&e.__esModule?e:{default:e}}n=u.default,t.detectDirectedCycle=n,n={getAdjMatrix:r.default,breadthFirstSearch:o.default,connectedComponent:i.default,getDegree:s.default,getInDegree:s.getInDegree,getOutDegree:s.getOutDegree,detectCycle:u.default,detectDirectedCycle:n,detectAllCycles:u.detectAllCycles,detectAllDirectedCycle:u.detectAllDirectedCycle,detectAllUndirectedCycle:u.detectAllUndirectedCycle,depthFirstSearch:l.default,dijkstra:c.default,findAllPath:f.findAllPath,findShortestPath:f.findShortestPath,floydWarshall:h.default,labelPropagation:p.default,louvain:d.default,iLouvain:y.default,kCore:g.default,kMeans:v.default,cosineSimilarity:m.default,nodesCosineSimilarity:b.default,minimumSpanningTree:w.default,pageRank:_.default,getNeighbors:O.getNeighbors,Stack:S.default,GADDI:x.default};t.default=n},32141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(31834),u=(n=n(63597))&&n.__esModule?n:{default:n};t.default=function(e,r){var o;void 0===r&&(r=1);for(var e=(0,s.clone)(e),t=e.nodes,i=void 0===t?[]:t,t=e.edges,a=void 0===t?[]:t;"break"!==function(){var n=(0,u.default)({nodes:i,edges:a}),e=Object.keys(n),t=(e.sort(function(e,t){return(null==(e=n[e])?void 0:e.degree)-(null==(e=n[t])?void 0:e.degree)}),e[0]);if(!i.length||(null==(o=n[t])?void 0:o.degree)>=r)return"break";e=i.findIndex(function(e){return e.id===t});i.splice(e,1),a=a.filter(function(e){return!(e.source===t||e.target===t)})}(););return{nodes:i,edges:a}}},32339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function T(e,t,n){return e===N.DistanceType.EuclideanDistance?t[n]:[]}var r,A=n(31834),I=n(12594),R=n(2821),L=(r=n(43532))&&r.__esModule?r:{default:r},N=n(49332);t.default=function(e,t,n,r,o,i){void 0===t&&(t=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=["id"]),void 0===i&&(i=N.DistanceType.EuclideanDistance);var a=e.nodes,s=void 0===a?[]:a,a=e.edges,e=void 0===a?[]:a,a={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(i===N.DistanceType.EuclideanDistance&&!s.every(function(e){return e.hasOwnProperty(n)}))return a;var u=[];if(i===N.DistanceType.EuclideanDistance&&(l=(0,I.getAllProperties)(s,n),u=(0,R.oneHot)(l,r,o)),!u.length)return a;for(var l=(0,A.uniq)(u.map(function(e){return e.join("")})),c=Math.min(t,s.length,l.length),f=0;f<s.length;f++)s[f].originIndex=f;var h=[],p=[],d=[];for(f=0;f<c;f++)if(0===f){var y=Math.floor(Math.random()*s.length);i===N.DistanceType.EuclideanDistance?h[f]=u[y]:h[f]=[],p.push(y),d[f]=[s[y]],s[y].clusterId=String(f)}else{for(var g=-1/0,v=0,m=0;m<s.length;m++)!function(t){if(!p.includes(t)){for(var e=0,n=0;n<h.length;n++){var r=0;e+=r=i===N.DistanceType.EuclideanDistance?(0,R.getDistance)(u[s[t].originIndex],h[n],i):r}var o=e/h.length;g<o&&!h.find(function(e){return(0,A.isEqual)(e,T(i,u,s[t].originIndex))})&&(g=o,v=t)}}(m);h[f]=T(i,u,v),p.push(v),d[f]=[s[v]],s[v].clusterId=String(f)}for(var b=0;;){for(f=0;f<s.length;f++){var w=0,_=1/0;if(0!==b||!p.includes(f)){for(var x=0;x<h.length;x++){var S=0;(S=i===N.DistanceType.EuclideanDistance?(0,R.getDistance)(u[f],h[x],i):S)<_&&(_=S,w=x)}if(void 0!==s[f].clusterId)for(var O=d[Number(s[f].clusterId)].length-1;0<=O;O--)d[Number(s[f].clusterId)][O].id===s[f].id&&d[Number(s[f].clusterId)].splice(O,1);s[f].clusterId=String(w),d[w].push(s[f])}}for(var P=!1,f=0;f<d.length;f++){for(var E=d[f],k=new L.default([]),x=0;x<E.length;x++)k=k.add(new L.default(u[E[x].originIndex]));var M=k.avg(E.length);M.equal(new L.default(h[f]))||(P=!0,h[f]=M.getArr())}if(b++,s.every(function(e){return void 0!==e.clusterId})&&P||1e3<=b)break}var j=[],C={};return e.forEach(function(e){var t=e.source,n=e.target,e=null==(e=s.find(function(e){return e.id===t}))?void 0:e.clusterId,r=null==(r=s.find(function(e){return e.id===n}))?void 0:r.clusterId,o="".concat(e,"---").concat(r);C[o]?C[o].count++:j.push(C[o]={source:e,target:r,count:1})}),{clusters:d,clusterEdges:j}}},73760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,d=(r=n(57238))&&r.__esModule?r:{default:r},y=n(28182);t.default=function(e,t,o,n){void 0===t&&(t=!1),void 0===o&&(o="weight"),void 0===n&&(n=1e3);var r=e.nodes,i=void 0===r?[]:r,r=e.edges,r=void 0===r?[]:r,s={},u={},a=(i.forEach(function(e,t){var n=(0,y.uniqueId)();e.clusterId=n,s[n]={id:n,nodes:[e]},u[e.id]={node:e,idx:t}}),[]),l={};(0,d.default)(e,t).forEach(function(e,t){var n=0,r=i[t].id;l[r]={},e.forEach(function(e,t){e&&(n+=e,t=i[t].id,l[r][t]=e)}),a.push(n)});for(var c=0;c<n&&"break"!==function(){var a=!1;if(i.forEach(function(n){var e,t,r={},o=(Object.keys(l[n.id]).forEach(function(e){var t=l[n.id][e],e=u[e].node.clusterId;r[e]||(r[e]=0),r[e]+=t}),-1/0),i=[];Object.keys(r).forEach(function(e){o<r[e]?(o=r[e],i=[e]):o===r[e]&&i.push(e)}),1===i.length&&i[0]===n.clusterId||(0<=(e=i.indexOf(n.clusterId))&&i.splice(e,1),i&&i.length&&(a=!0,t=(e=s[n.clusterId]).nodes.indexOf(n),e.nodes.splice(t,1),e=Math.floor(Math.random()*i.length),(t=s[i[e]]).nodes.push(n),n.clusterId=t.id))}),!a)return"break";c++}(););Object.keys(s).forEach(function(e){var t=s[e];t.nodes&&t.nodes.length||delete s[e]});var f=[],h={},p=(r.forEach(function(e){var t=e.source,n=e.target,e=e[o]||1,t=u[t].node.clusterId,n=u[n].node.clusterId,r="".concat(t,"---").concat(n);h[r]?(h[r].weight+=e,h[r].count++):f.push(h[r]={source:t,target:n,weight:e,count:1})}),[]);return Object.keys(s).forEach(function(e){p.push(s[e])}),{clusters:p,clusterEdges:f}}},2006:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var A=n(31834),I=r(n(57238)),y=r(n(43532)),R=n(12594),L=n(2821);function r(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r){for(var o=t.length,i=2*r,a=0,s=0;s<o;s++)for(var u=e[s].clusterId,l=0;l<o;l++)u===e[l].clusterId&&(a+=(t[s][l]||0)-(n[s]||0)*(n[l]||0)/i);return a*(1/i)}function D(e,t){for(var n=(e=void 0===e?[]:e).length,r=new y.default([]),o=0;o<n;o++)r=r.add(new y.default(t[o]));for(var i=r.avg(n),a=(i.normalize(),0),o=0;o<n;o++)a+=(l=new y.default(t[o])).squareEuclideanDistance(i);var s=[];for(e.forEach(function(){s.push([])}),o=0;o<n;o++)for(var u,l=new y.default(t[o]),c=e[o].clusterInertial=0;c<n;c++)o!==c?(u=new y.default(t[c]),s[o][c]=l.squareEuclideanDistance(u),e[o].clusterInertial+=s[o][c]):s[o][c]=0;var f=0,h=2*n*a;for(o=0;o<n;o++)for(var p=e[o].clusterId,c=0;c<n;c++){var d=e[c].clusterId;o!==c&&p===d&&(f+=e[o].clusterInertial*e[c].clusterInertial/Math.pow(h,2)-s[o][c]/h)}return Number(f.toFixed(4))}t.default=function(e,t,p,n,d,r,o,i,y){void 0===t&&(t=!1),void 0===p&&(p="weight"),void 0===n&&(n=1e-4),void 0===d&&(d=!1),void 0===r&&(r=void 0),void 0===o&&(o=[]),void 0===i&&(i=["id"]),void 0===y&&(y=1);var a,s=e.nodes,u=void 0===s?[]:s,s=e.edges,g=void 0===s?[]:s,v=[],l=(d&&(u.forEach(function(e,t){e.properties=e.properties||{},e.originIndex=t}),a=[],u.every(function(e){return e.hasOwnProperty("nodeType")})&&(a=Array.from(new Set(u.map(function(e){return e.nodeType}))),u.forEach(function(t){t.properties.nodeType=a.findIndex(function(e){return e===t.nodeType})})),s=(0,R.getAllProperties)(u,r),v=(0,L.oneHot)(s,o,i)),1),m={},b={},w=(u.forEach(function(e,t){var n=String(l++);e.clusterId=n,m[n]={id:n,nodes:[e]},b[e.id]={node:e,idx:t}}),(0,I.default)(e,t)),_=[],x={},S=0;w.forEach(function(e,t){var n=0,r=u[t].id;x[r]={},e.forEach(function(e,t){e&&(n+=e,t=u[t].id,x[r][t]=e,S+=e)}),_.push(n)}),S/=2;for(var c,f=1/0,h=0,O=[],P={};;){c=d&&u.every(function(e){return e.hasOwnProperty("properties")})?N(u,w,_,S)+D(u,v)*y:N(u,w,_,S),0===h&&(f=c,O=u,P=m);var E=0<c&&f<c&&c-f<n;if(f<c&&(O=u.map(function(e){return{node:e,clusterId:e.clusterId}}),P=(0,A.clone)(m),f=c),E||100<h)break;h++,Object.keys(m).forEach(function(r){var o=0;g.forEach(function(e){var t=e.source,n=e.target,t=b[t].node.clusterId,n=b[n].node.clusterId;(t===r&&n!==r||n===r&&t!==r)&&(o+=e[p]||1)}),m[r].sumTot=o}),u.forEach(function(o,i){var a,r,s,u,e=m[o.clusterId],l=0,c=_[i]/(2*S),t=0,n=e.nodes,f=(n.forEach(function(e){e=b[e.id].idx;t+=w[i][e]||0}),t-e.sumTot*c),n=n.filter(function(e){return e.id!==o.id}),h=(n.forEach(function(e,t){t,v[e.originIndex]}),D(n,v)*y),n=x[o.id];Object.keys(n).forEach(function(e){var t,n,r,e=b[e].node.clusterId;e!==o.clusterId&&(r=(e=m[e]).nodes)&&r.length&&(t=0,r.forEach(function(e){e=b[e.id].idx;t+=w[i][e]||0}),n=t-e.sumTot*c,r=r.concat([o]),r.forEach(function(e,t){t,v[e.originIndex]}),r=D(r,v)*y,l<(r=d?n+r-(f+h):n-f))&&(l=r,a=e)}),0<l&&(a.nodes.push(o),r=o.clusterId,o.clusterId=a.id,n=e.nodes.indexOf(o),e.nodes.splice(n,1),u=s=0,g.forEach(function(e){var t=e.source,n=e.target,t=b[t].node.clusterId,n=b[n].node.clusterId;(t===a.id&&n!==a.id||n===a.id&&t!==a.id)&&(s+=e[p]||1),(t===r&&n!==r||n===r&&t!==r)&&(u+=e[p]||1)}),a.sumTot=s,e.sumTot=u)})}var k={},M=0,j=(Object.keys(P).forEach(function(e){var t,n=P[e];n.nodes&&n.nodes.length?(t=String(M+1))!==e&&(n.id=t,n.nodes=n.nodes.map(function(e){return{id:e.id,clusterId:t}}),P[t]=n,k[e]=t,delete P[e],M++):delete P[e]}),O.forEach(function(e){var t=e.node,e=e.clusterId;t&&(t.clusterId=e,t.clusterId)&&k[t.clusterId]&&(t.clusterId=k[t.clusterId])}),[]),C={},T=(g.forEach(function(e){var t,n=e.source,r=e.target,e=e[p]||1,n=b[n].node.clusterId,r=b[r].node.clusterId;n&&r&&(t="".concat(n,"---").concat(r),C[t]?(C[t].weight+=e,C[t].count++):j.push(C[t]={source:n,target:r,weight:e,count:1}))}),[]);return Object.keys(P).forEach(function(e){T.push(P[e])}),{clusters:T,clusterEdges:j}}},60015:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(89511)),c=r(n(67605)),f=n(28182);function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){var n=[],r=e.nodes,r=void 0===r?[]:r,e=e.edges,e=void 0===e?[]:e;if(0!==r.length){var o=e.map(function(e){return e});t&&o.sort(function(e,t){return e.weight-t.weight});for(var i=new l.default(r.map(function(e){return e.id}));0<o.length;){var a=o.shift(),s=a.source,u=a.target;i.connected(s,u)||(n.push(a),i.union(s,u))}}return n};t.default=function(e,t,n){return n?{prim:function(e,n){var t=[],r=e.nodes,r=void 0===r?[]:r,e=e.edges,o=void 0===e?[]:e;if(0!==r.length){var e=r[0],i=new Set,a=(i.add(e),new c.default(function(e,t){return n?e.weight-t.weight:0}));for((0,f.getEdgesByNodeId)(e.id,o).forEach(function(e){a.insert(e)});!a.isEmpty();){var s=a.delMin(),u=s.source,l=s.target;i.has(u)&&i.has(l)||(t.push(s),i.has(u)||(i.add(u),(0,f.getEdgesByNodeId)(u,o).forEach(function(e){a.insert(e)})),i.has(l))||(i.add(l),(0,f.getEdgesByNodeId)(l,o).forEach(function(e){a.insert(e)}))}}return t},kruskal:o}[n](e,t):o(e,t)}},36649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(31834),f=n(12594),h=n(2821),p=(n=n(16075))&&n.__esModule?n:{default:n};t.default=function(e,n,t,r,o){void 0===t&&(t=void 0),void 0===r&&(r=[]),void 0===o&&(o=[]);var i=(0,c.clone)((e=void 0===e?[]:e).filter(function(e){return e.id!==n.id})),a=e.findIndex(function(e){return e.id===n.id}),e=(0,f.getAllProperties)(e,t),s=(0,h.oneHot)(e,r,o),u=s[a],l=[];return i.forEach(function(e,t){e.id!==n.id&&(t=s[t],t=(0,p.default)(t,u),l.push(t),e.cosineSimilarity=t)}),i.sort(function(e,t){return t.cosineSimilarity-e.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:i}}},16155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,_=(r=n(63597))&&r.__esModule?r:{default:r},x=n(28182);t.default=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r=1,o=0,i=1e3,a=e.nodes,s=void 0===a?[]:a,a=e.edges,u=void 0===a?[]:a,l=s.length,c={},f={},h=0;h<l;++h)c[y=(p=s[h]).id]=1/l,f[y]=1/l;for(var p,d=(0,_.default)(e);0<i&&t<r;){for(h=o=0;h<l;++h){var y=(p=s[h]).id,g=0;if(0===d[p.id].inDegree)c[y]=0;else{for(var v=(0,x.getNeighbors)(y,u,"source"),m=0;m<v.length;++m){var b=v[m],w=d[b].outDegree;0<w&&(g+=f[b]/w)}c[y]=n*g,o+=c[y]}}for(o=(1-o)/l,h=r=0;h<l;++h)g=c[y=(p=s[h]).id]+o,r+=Math.abs(g-f[y]),f[y]=g;--i}return f}},67605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function n(e,t){return e-t}function r(e){this.compareFn=e=void 0===e?n:e,this.list=[]}r.prototype.getLeft=function(e){return 2*e+1},r.prototype.getRight=function(e){return 2*e+2},r.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},r.prototype.isEmpty=function(){return this.list.length<=0},r.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},r.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return 0<this.list.length&&(this.list[0]=t,this.moveDown(0)),e},r.prototype.insert=function(e){return null!==e&&(this.list.push(e),e=this.list.length-1,this.moveUp(e),!0)},r.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&0<e&&0<this.compareFn(this.list[t],this.list[e]);){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},r.prototype.moveDown=function(e){var t=e,n=this.getLeft(e),r=this.getRight(e),o=this.list.length;null!==n&&n<o&&0<this.compareFn(this.list[t],this.list[n])?t=n:null!==r&&r<o&&0<this.compareFn(this.list[t],this.list[r])&&(t=r),e!==t&&(n=[this.list[t],this.list[e]],this.list[e]=n[0],this.list[t]=n[1],this.moveDown(t))},t.default=r},90800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkedListNode=void 0;function n(e,t){return e===t}o.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)};var r=o;function o(e,t){void 0===t&&(t=null),this.value=e,this.next=t}function i(e){void 0===e&&(e=n),this.head=null,this.tail=null,this.compare=e}t.LinkedListNode=r,i.prototype.prepend=function(e){e=new r(e,this.head);return this.head=e,this.tail||(this.tail=e),this},i.prototype.append=function(e){e=new r(e);return this.head?this.tail.next=e:this.head=e,this.tail=e,this},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},i.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,t=e.callback,r=void 0===t?void 0:t;if(this.head)for(var o=this.head;o;){if(r&&r(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)this.head=null,this.tail=null;else{for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;this.tail=t}return e},i.prototype.deleteHead=function(){var e;return this.head?(e=this.head,this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e):null},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(e){return t.append(e)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e,t=this.head,n=null;t;)e=t.next,t.next=n,n=t,t=e;this.tail=this.head,this.head=n},i.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},t.default=i},93247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=n(90800))&&n.__esModule?n:{default:n};function o(){this.linkedList=new r.default}o.prototype.isEmpty=function(){return!this.linkedList.head},o.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},o.prototype.enqueue=function(e){this.linkedList.append(e)},o.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},o.prototype.toString=function(e){return this.linkedList.toString(e)},t.default=o},51602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(n=n(90800))&&n.__esModule?n:{default:n};function o(e){void 0===e&&(e=10),this.linkedList=new r.default,this.maxStep=e}Object.defineProperty(o.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),o.prototype.isEmpty=function(){return!this.linkedList.head},o.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},o.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},o.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},o.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},o.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},o.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t.default=o},89511:function(e,t){"use strict";function n(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},n.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},n.prototype.connected=function(e,t){return this.find(e)===this.find(t)},t.default=n},49332:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DistanceType=void 0,t.DistanceType=void 0,(t.DistanceType={}).EuclideanDistance="euclideanDistance"},28182:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.getOutEdgesNodeId=t.getNeighbors=t.getEdgesByNodeId=void 0,t.getNeighbors=function(t,e,n){e=(e=void 0===e?[]:e).filter(function(e){return e.source===t||e.target===t});return"target"===n?e.filter(function(e){return e.source===t}).map(function(e){return e.target}):"source"===n?e.filter(function(e){return e.target===t}).map(function(e){return e.source}):e.map(function(e){return e.source===t?e.target:e.source})},t.getOutEdgesNodeId=function(t,e){return e.filter(function(e){return e.source===t})},t.getEdgesByNodeId=function(t,e){return e.filter(function(e){return e.source===t||e.target===t})},t.uniqueId=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)}},2821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneHot=t.getDistance=t.getAllKeyValueMap=t.default=void 0;function o(e,t,r){var n=[],n=null!=t&&t.length?t:(e.forEach(function(e){n=n.concat(Object.keys(e))}),(0,a.uniq)(n)),o={};return n.forEach(function(t){var n=[];e.forEach(function(e){void 0!==e[t]&&""!==e[t]&&n.push(e[t])}),!n.length||null!=r&&r.includes(t)||(o[t]=(0,a.uniq)(n))}),o}function r(e,t,n){var u,l=o(e,t,n),r=[];return Object.keys(l).length&&(u=Object.values(l).every(function(e){return e.every(function(e){return"number"==typeof e})}),e.forEach(function(a,e){var s=[];Object.keys(l).forEach(function(e){var t=a[e],n=l[e],r=n.findIndex(function(e){return t===e}),o=[];if(u)o.push(t);else for(var i=0;i<n.length;i++)o.push(i===r?1:0);s=s.concat(o)}),r[e]=s})),r}function i(e,t,n,r){var o=0;return o=(n=void 0===n?s.DistanceType.EuclideanDistance:n)===s.DistanceType.EuclideanDistance?new u.default(e).euclideanDistance(new u.default(t)):o}var a=n(31834),s=n(49332),u=(n=n(43532))&&n.__esModule?n:{default:n},n=(t.getAllKeyValueMap=o,t.oneHot=r,t.getDistance=i,{getAllKeyValueMap:o,oneHot:r,getDistance:i});t.default=n},12594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyWeight=t.getAllSortProperties=t.getAllProperties=t.default=void 0;function o(e,t){void 0===t&&(t=100);var n={};return(e=void 0===e?[]:e).forEach(function(t){t.properties&&Object.keys(t.properties).forEach(function(e){"id"===e||!"".concat(t.properties[e]).match(a.secondReg)&&!"".concat(t.properties[e]).match(a.dateReg)&&isNaN(Number(t.properties[e]))?n.hasOwnProperty(e)&&delete n[e]:n.hasOwnProperty(e)?n[e]+=1:n[e]=1})}),(e=Object.keys(n).sort(function(e,t){return n[t]-n[e]})).length<t?e:e.slice(0,t)}function r(e){for(var t=o(e),n=[],r=0;r<e.length;r++)n[r]=function(t,e){return e.map(function(e){return t.hasOwnProperty(e)?t[e]:0})}(e[r].properties,t);return n}function i(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach(function(e){void 0===t&&n.push(e),void 0!==e[t]&&n.push(e[t])}),n}var a=n(79023),n=(t.getAllSortProperties=o,t.getPropertyWeight=r,t.getAllProperties=i,{getAllSortProperties:o,getPropertyWeight:r,getAllProperties:i});t.default=n},43532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(31834);function a(e){this.arr=e}a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(e){var t=e.arr;if(null==(e=this.arr)||!e.length)return new a(t);if(null==t||!t.length)return new a(this.arr);if(this.arr.length===t.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]+t[n];return new a(r)}},a.prototype.subtract=function(e){var t=e.arr;if(null==(e=this.arr)||!e.length)return new a(t);if(null==t||!t.length)return new a(this.arr);if(this.arr.length===t.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]-t[n];return new a(r)}},a.prototype.avg=function(e){var t=[];if(0!==e)for(var n in this.arr)t[n]=this.arr[n]/e;return new a(t)},a.prototype.negate=function(){var e,t=[];for(e in this.arr)t[e]=-this.arr[e];return new a(t)},a.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(null==(t=this.arr)||!t.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-e.arr[r],2);return o}},a.prototype.euclideanDistance=function(e){var t,n=e.arr;if(null==(t=this.arr)||!t.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-e.arr[r],2);return Math.sqrt(o)}console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var e,t=[],n=(0,i.clone)(this.arr),r=(n.sort(function(e,t){return e-t}),n[n.length-1]),o=n[0];for(e in this.arr)t[e]=(this.arr[e]-o)/(r-o);return new a(t)},a.prototype.norm2=function(){var e;if(null==(e=this.arr)||!e.length)return 0;var t,n=0;for(t in this.arr)n+=Math.pow(this.arr[t],2);return Math.sqrt(n)},a.prototype.dot=function(e){var t,n=e.arr;if(null==(t=this.arr)||!t.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=this.arr[r]*e.arr[r];return o}console.error("The two vectors are unequal in length.")},a.prototype.equal=function(e){var t,n=e.arr;if((null==(e=this.arr)?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(t in this.arr)if(this.arr[t]!==n[t])return!1;return!0},t.default=a},36490:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return g.default}});var r=w(n(57238)),o=w(n(1264)),i=w(n(16616)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=b(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(63597)),u=w(n(12465)),l=w(n(81940)),c=w(n(47618)),f=n(56),h=w(n(51613)),p=w(n(73760)),d=w(n(2006)),y=w(n(60015)),g=w(n(16155)),v=w(n(29317)),m=n(28182);function b(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(b=function(e){return e?n:t})(e))}function w(e){return e&&e.__esModule?e:{default:e}}},18983:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE=t.ALGORITHM=void 0,t.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},t.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},47414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(18983),s=(n=n(17477))&&n.__esModule?n:{default:n};t.default=function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Promise(function(n,r){var o=new s.default;o.postMessage({_algorithmType:i,data:e}),o.onmessage=function(e){var e=e.data,t=e.data,e=e._algorithmType;a.MESSAGE.SUCCESS===e?n(t):r(),o.terminate()}})}}},54613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageRankAsync=t.minimumSpanningTreeAsync=t.louvainAsync=t.labelPropagationAsync=t.getOutDegreeAsync=t.getNeighborsAsync=t.getInDegreeAsync=t.getDegreeAsync=t.getAdjMatrixAsync=t.floydWarshallAsync=t.findShortestPathAsync=t.findAllPathAsync=t.dijkstraAsync=t.detectCycleAsync=t.detectAllUndirectedCycleAsync=t.detectAllDirectedCycleAsync=t.detectAllCyclesAsync=t.connectedComponentAsync=t.GADDIAsync=void 0;var r,s=(r=n(47414))&&r.__esModule?r:{default:r},u=n(18983);t.getAdjMatrixAsync=function(e,t){return(0,s.default)(u.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])},t.connectedComponentAsync=function(e,t){return(0,s.default)(u.ALGORITHM.connectedComponent).apply(void 0,[e,t])},t.getDegreeAsync=function(e){return(0,s.default)(u.ALGORITHM.getDegree)(e)},t.getInDegreeAsync=function(e,t){return(0,s.default)(u.ALGORITHM.getInDegree)(e,t)},t.getOutDegreeAsync=function(e,t){return(0,s.default)(u.ALGORITHM.getOutDegree)(e,t)},t.detectCycleAsync=function(e){return(0,s.default)(u.ALGORITHM.detectCycle)(e)},t.detectAllCyclesAsync=function(e){return(0,s.default)(u.ALGORITHM.detectAllCycles)(e)},t.detectAllDirectedCycleAsync=function(e){return(0,s.default)(u.ALGORITHM.detectAllDirectedCycle)(e)},t.detectAllUndirectedCycleAsync=function(e){return(0,s.default)(u.ALGORITHM.detectAllUndirectedCycle)(e)},t.dijkstraAsync=function(e,t,n,r){return(0,s.default)(u.ALGORITHM.dijkstra).apply(void 0,[e,t,n,r])},t.findAllPathAsync=function(e,t,n,r){return(0,s.default)(u.ALGORITHM.findAllPath).apply(void 0,[e,t,n,r])},t.findShortestPathAsync=function(e,t,n,r,o){return(0,s.default)(u.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,r,o])},t.floydWarshallAsync=function(e,t){return(0,s.default)(u.ALGORITHM.floydWarshall).apply(void 0,[e,t])},t.labelPropagationAsync=function(e,t,n,r){return void 0===r&&(r=1e3),(0,s.default)(u.ALGORITHM.labelPropagation)(e,t,n,r)},t.louvainAsync=function(e,t,n,r){return(0,s.default)(u.ALGORITHM.louvain)(e,t,n,r)},t.minimumSpanningTreeAsync=function(e,t,n){return(0,s.default)(u.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])},t.pageRankAsync=function(e,t,n){return(0,s.default)(u.ALGORITHM.pageRank).apply(void 0,[e,t,n])},t.getNeighborsAsync=function(e,t,n){return(0,s.default)(u.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])},t.GADDIAsync=function(e,t,n,r,o,i,a){return void 0===n&&(n=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),(0,s.default)(u.ALGORITHM.GADDI).apply(void 0,[e,t,n,r,o,i,a])}},17477:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(36490)),o=n(18983);function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}var i="undefined"!=typeof self?self:{};i.onmessage=function(e){var e=e.data,t=e._algorithmType,e=e.data;t&&("function"!=typeof r[t]?i.postMessage({_algorithmType:o.MESSAGE.FAILURE}):(t=r[t].apply(r,e),i.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:t})))},t.default=null},60053:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e)return"function"==typeof e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):"function"==typeof e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0}},72797:function(e,t){"use strict";var n,r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){n||(n=document.createElement("table"),o=document.createElement("tr"),r=/^\s*<(\w+|!)[^>]*>/,o={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:o,th:o,"*":document.createElement("div")});var t=r.test(e)&&RegExp.$1,t=(t&&t in o||(t="*"),o[t]),e=(e="string"==typeof e?e.replace(/(^\s*)|(\s*$)/g,""):e,t.innerHTML=""+e,t.childNodes[0]);return e&&t.contains(e)&&t.removeChild(e),e}},1662:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41599);t.default=function(e,t){t=(0,r.default)(e,"height",t);return"auto"===t&&(t=e.offsetHeight),parseFloat(t)}},59297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(41599),a=n(1662);t.default=function(e,t){var t=(0,a.default)(e,t),n=parseFloat((0,i.default)(e,"borderTopWidth"))||0,r=parseFloat((0,i.default)(e,"paddingTop"))||0,o=parseFloat((0,i.default)(e,"paddingBottom"))||0;return t+n+(parseFloat((0,i.default)(e,"borderBottomWidth"))||0)+r+o+(parseFloat((0,i.default)(e,"marginTop"))||0)+(parseFloat((0,i.default)(e,"marginBottom"))||0)}},42836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(41599),u=n(22471);t.default=function(e,t){var t=(0,u.default)(e,t),n=parseFloat((0,s.default)(e,"borderLeftWidth"))||0,r=parseFloat((0,s.default)(e,"paddingLeft"))||0,o=parseFloat((0,s.default)(e,"paddingRight"))||0,i=parseFloat((0,s.default)(e,"borderRightWidth"))||0,a=parseFloat((0,s.default)(e,"marginRight"))||0;return t+n+i+r+o+(parseFloat((0,s.default)(e,"marginLeft"))||0)+a}},16875:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.devicePixelRatio||2}},41599:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r;try{r=(window.getComputedStyle?window.getComputedStyle(e,null):e.style)[t]}catch(e){}finally{r=void 0===r?n:r}return r}},22471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41599);t.default=function(e,t){t=(0,r.default)(e,"width",t);return"auto"===t&&(t=e.offsetWidth),parseFloat(t)}},39269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyCSS=t.getWidth=t.getStyle=t.getRatio=t.getOuterWidth=t.getOuterHeight=t.getHeight=t.createDom=t.addEventListener=void 0;var r=n(60053),o=(Object.defineProperty(t,"addEventListener",{enumerable:!0,get:function(){return r.default}}),n(72797)),i=(Object.defineProperty(t,"createDom",{enumerable:!0,get:function(){return o.default}}),n(1662)),a=(Object.defineProperty(t,"getHeight",{enumerable:!0,get:function(){return i.default}}),n(59297)),s=(Object.defineProperty(t,"getOuterHeight",{enumerable:!0,get:function(){return a.default}}),n(42836)),u=(Object.defineProperty(t,"getOuterWidth",{enumerable:!0,get:function(){return s.default}}),n(16875)),l=(Object.defineProperty(t,"getRatio",{enumerable:!0,get:function(){return u.default}}),n(41599)),c=(Object.defineProperty(t,"getStyle",{enumerable:!0,get:function(){return l.default}}),n(22471)),f=(Object.defineProperty(t,"getWidth",{enumerable:!0,get:function(){return c.default}}),n(80777));Object.defineProperty(t,"modifyCSS",{enumerable:!0,get:function(){return f.default}})},80777:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}},73118:function(e,t){"use strict";function n(){this._events={}}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},n.prototype.once=function(e,t){return this.on(e,t,!0)},n.prototype.emit=function(i){for(var a=this,s=[],e=1;e<arguments.length;e++)s[e-1]=arguments[e];function t(e){for(var t,n,r=e.length,o=0;o<r;o++)e[o]&&(n=(t=e[o]).callback,t.once&&(e.splice(o,1),0===e.length&&delete a._events[i],r--,o--),n.apply(a,s))}var n=this._events[i]||[],r=this._events["*"]||[];t(n),t(r)},n.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,o=0;o<r;o++)n[o].callback===t&&(n.splice(o,1),r--,o--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},n.prototype.getEvents=function(){return this._events},t.default=n},40647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(73118),a=n(7693),n=(r=i.default,o.__extends(s,r),s.prototype.getDefaultCfg=function(){return{}},s.prototype.get=function(e){return this.cfg[e]},s.prototype.set=function(e,t){this.cfg[e]=t},s.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},s);function s(e){var t=r.call(this)||this,n=(t.destroyed=!1,t.getDefaultCfg());return t.cfg=a.mix(n,e),t}t.default=n},15741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(81758),a=n(28377),s=n(7693),u=n(49812),l=n(9246),n=i.detect(),c=n&&"firefox"===n.name,i=(r=a.default,o.__extends(f,r),f.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},f.prototype.initContainer=function(){var e=this.get("container");s.isString(e)&&(e=document.getElementById(e),this.set("container",e))},f.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},f.prototype.initEvents=function(){var e=new l.default({canvas:this});e.init(),this.set("eventController",e)},f.prototype.initTimeline=function(){var e=new u.default(this);this.set("timeline",e)},f.prototype.setDOMSize=function(e,t){var n=this.get("el");s.isBrowser&&(n.style.width=e+"px",n.style.height=t+"px")},f.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},f.prototype.getRenderer=function(){return this.get("renderer")},f.prototype.getCursor=function(){return this.get("cursor")},f.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");s.isBrowser&&t&&(t.style.cursor=e)},f.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(c&&!s.isNil(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!s.isNil(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var e=this.getClientByEvent(e),t=e.x,e=e.y;return this.getPointByClient(t,e)},f.prototype.getClientByEvent=function(e){var t=e;return{x:(t=e.touches?("touchend"===e.type?e.changedTouches:e.touches)[0]:t).clientX,y:t.clientY}},f.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},f.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},f.prototype.draw=function(){},f.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},f.prototype.clearEvents=function(){this.get("eventController").destroy()},f.prototype.isCanvas=function(){return!0},f.prototype.getParent=function(){return null},f.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),r.prototype.destroy.call(this))},f);function f(e){e=r.call(this,e)||this;return e.initContainer(),e.initDom(),e.initEvents(),e.initTimeline(),e}t.default=i},28377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(87822),u=n(7693),a={},s="_INDEX",n=(r=i.default,o.__extends(l,r),l.prototype.isCanvas=function(){return!1},l.prototype.getBBox=function(){var o=1/0,i=-1/0,a=1/0,s=-1/0,e=this.getChildren().filter(function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&0<e.getChildren().length)});return 0<e.length?u.each(e,function(e){var e=e.getBBox(),t=e.minX,n=e.maxX,r=e.minY,e=e.maxY;t<o&&(o=t),i<n&&(i=n),r<a&&(a=r),s<e&&(s=e)}):s=a=i=o=0,{x:o,y:a,minX:o,minY:a,maxX:i,maxY:s,width:i-o,height:s-a}},l.prototype.getCanvasBBox=function(){var o=1/0,i=-1/0,a=1/0,s=-1/0,e=this.getChildren().filter(function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&0<e.getChildren().length)});return 0<e.length?u.each(e,function(e){var e=e.getCanvasBBox(),t=e.minX,n=e.maxX,r=e.minY,e=e.maxY;t<o&&(o=t),i<n&&(i=n),r<a&&(a=r),s<e&&(s=e)}):s=a=i=o=0,{x:o,y:a,minX:o,minY:a,maxX:i,maxY:s,width:i-o,height:s-a}},l.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return e.children=[],e},l.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),"matrix"===e&&(t=this.getTotalMatrix(),this._applyChildrenMarix(t))},l.prototype.applyMatrix=function(e){var t=this.getTotalMatrix(),e=(r.prototype.applyMatrix.call(this,e),this.getTotalMatrix());e!==t&&this._applyChildrenMarix(e)},l.prototype._applyChildrenMarix=function(t){var e=this.getChildren();u.each(e,function(e){e.applyMatrix(t)})},l.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1],n=(u.isObject(n)?r=n:r.type=n,a[r.type]),n=(n||(n=u.upperFirst(r.type),a[r.type]=n),new(this.getShapeBase()[n])(r));return this.add(n),n},l.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];return n=u.isFunction(n)?new n(r||{parent:this}):(r=n||{},new(this.getGroupBase())(r)),this.add(n),n},l.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},l.prototype.getShape=function(e,t,n){var r,o;return u.isAllowCapture(this)?(o=this.getChildren(),this.isCanvas()?r=this._findShape(o,e,t,n):(e=this.invertFromMatrix(e=[e,t,1]),this.isClipped(e[0],e[1])||(r=this._findShape(o,e[0],e[1],n))),r):null},l.prototype._findShape=function(e,t,n,r){for(var o=null,i=e.length-1;0<=i;i--){var a=e[i];if(u.isAllowCapture(a)&&(a.isGroup()?o=a.getShape(t,n,r):a.isHit(t,n)&&(o=a)),o)break}return o},l.prototype.add=function(e){var t,n,r=this.getCanvas(),o=this.getChildren(),i=this.get("timeline"),a=e.getParent();a&&(a=a,t=e,(n=void 0===(n=!1)?!0:n)?t.destroy():(t.set("parent",null),t.set("canvas",null)),u.removeFromArray(a.getChildren(),t)),e.set("parent",this),r&&function t(e,n){e.set("canvas",n),e.isGroup()&&(e=e.get("children")).length&&e.forEach(function(e){t(e,n)})}(e,r),i&&function t(e,n){e.set("timeline",n),e.isGroup()&&(e=e.get("children")).length&&e.forEach(function(e){t(e,n)})}(e,i),o.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},l.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},l.prototype.getChildren=function(){return this.get("children")},l.prototype.sort=function(){var r,e=this.getChildren();u.each(e,function(e,t){return e[s]=t,e}),e.sort((r=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(e,t){var n=r(e,t);return 0===n?e[s]-t[s]:n})),this.onCanvasChange("sort")},l.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;0<=t;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},l.prototype.destroy=function(){this.get("destroyed")||(this.clear(),r.prototype.destroy.call(this))},l.prototype.getFirst=function(){return this.getChildByIndex(0)},l.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},l.prototype.getChildByIndex=function(e){return this.getChildren()[e]},l.prototype.getCount=function(){return this.getChildren().length},l.prototype.contain=function(e){return-1<this.getChildren().indexOf(e)},l.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},l.prototype.findAll=function(t){var n=[],e=this.getChildren();return u.each(e,function(e){t(e)&&n.push(e),e.isGroup()&&(n=n.concat(e.findAll(t)))}),n},l.prototype.find=function(t){var n=null,e=this.getChildren();return u.each(e,function(e){if(t(e)?n=e:e.isGroup()&&(n=e.find(t)),n)return!1}),n},l.prototype.findById=function(t){return this.find(function(e){return e.get("id")===t})},l.prototype.findByClassName=function(t){return this.find(function(e){return e.get("className")===t})},l.prototype.findAllByName=function(t){return this.findAll(function(e){return e.get("name")===t})},l);function l(){return null!==r&&r.apply(this,arguments)||this}t.default=n},87822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),_=n(31834),i=n(43708),s=n(7693),a=n(94561),n=n(40647),u=i.ext.transform,l=["zIndex","capture","visible","type"],x=["repeat"],i=(r=n.default,o.__extends(c,r),c.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},c.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},c.prototype.onCanvasChange=function(e){},c.prototype.initAttrs=function(e){},c.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},c.prototype.isGroup=function(){return!1},c.prototype.getParent=function(){return this.get("parent")},c.prototype.getCanvas=function(){return this.get("canvas")},c.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t[1];if(!r)return this.attrs;if(_.isObject(r)){for(var i in r)this.setAttr(i,r[i]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,o),this.afterAttrsChange(((e={})[r]=o,e)),this):this.attrs[r]},c.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},c.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},c.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},c.prototype.afterAttrsChange=function(e){var t;this.cfg.isClipShape?(t=this.cfg.applyTo)&&t.onCanvasChange("clip"):this.onCanvasChange("attr")},c.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},c.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},c.prototype.setZIndex=function(e){this.set("zIndex",e);e=this.getParent();return e&&e.sort(),this},c.prototype.toFront=function(){var e,t=this.getParent();t&&(t=t.getChildren(),this.get("el"),e=t.indexOf(this),t.splice(e,1),t.push(this),this.onCanvasChange("zIndex"))},c.prototype.toBack=function(){var e,t=this.getParent();t&&(t=t.getChildren(),this.get("el"),e=t.indexOf(this),t.splice(e,1),t.unshift(this),this.onCanvasChange("zIndex"))},c.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t&&(s.removeFromArray(t.getChildren(),this),t.get("clearing"))||this.onCanvasChange("remove"),e&&this.destroy()},c.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},c.prototype.getMatrix=function(){return this.attr("matrix")},c.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},c.prototype.getTotalMatrix=function(){var e,t,n=this.cfg.totalMatrix;return n||(e=this.attr("matrix"),n=(t=this.cfg.parentMatrix)&&e?a.multiplyMatrix(t,e):e||t,this.set("totalMatrix",n)),n},c.prototype.applyMatrix=function(e){var t=this.attr("matrix"),t=e&&t?a.multiplyMatrix(e,t):t||e;this.set("totalMatrix",t),this.set("parentMatrix",e)},c.prototype.getDefaultMatrix=function(){return null},c.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?a.multiplyVec2(t,e):e},c.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){t=a.invert(t);if(t)return a.multiplyVec2(t,e)}return e},c.prototype.setClip=function(e){var t,n=this.getCanvas(),r=null;return e&&(t=this.getShapeBase()[_.upperFirst(e.type)])&&(r=new t({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:n})),this.set("clipShape",r),this.onCanvasChange("clip"),r},c.prototype.getClip=function(){return this.cfg.clipShape||null},c.prototype.clone=function(){var t=this,n=this.attrs,r={},o=(_.each(n,function(e,t){_.isArray(n[t])?r[t]=function(e){for(var t=[],n=0;n<e.length;n++)_.isArray(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(n[t]):r[t]=n[t]}),new this.constructor({attrs:r}));return _.each(l,function(e){o.set(e,t.get(e))}),o},c.prototype.destroy=function(){this.destroyed||(this.attrs={},r.prototype.destroy.call(this))},c.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},c.prototype.animate=function(){for(var e,t,n,r,o,i,a,s,u,l,c,f,h,p,d,y,g,v,m,b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];(this.get("timeline")||this.get("canvas"))&&(this.set("animating",!0),(e=this.get("timeline"))||(e=this.get("canvas").get("timeline"),this.set("timeline",e)),t=this.get("animations")||[],e.timer||e.initTimer(),c=b[1],a=void 0===(a=b[2])?"easeLinear":a,s=void 0===(s=b[3])?_.noop:s,u=void 0===(u=b[4])?0:u,_.isFunction(g=b[0])?(n=g,g={}):_.isObject(g)&&g.onFrame&&(n=g.onFrame,r=g.repeat),_.isObject(c)?(c=(i=c).duration,a=i.easing||"easeLinear",u=i.delay||0,r=i.repeat||r||!1,s=i.callback||_.noop,o=i.pauseCallback||_.noop,i=i.resumeCallback||_.noop):(_.isNumber(s)&&(u=s,s=null),a=_.isFunction(a)?(s=a,"easeLinear"):a||"easeLinear"),g=g,v={},m=this.attr(),_.each(g,function(e,t){-1!==x.indexOf(t)||_.isEqual(m[t],e)||(v[t]=e)}),l=v,g={fromAttrs:function(e){var t,n={},r=e.attrs;for(t in l)n[t]=r[t];return n}(this),toAttrs:l,duration:c,easing:a,repeat:r,callback:s,pauseCallback:o,resumeCallback:i,delay:u,startTime:e.getTime(),id:_.uniqueId(),onFrame:n,pathFormatted:!1},0<t.length?(c=t,(f=g).onFrame||(h=f.startTime,p=f.delay,d=f.duration,y=Object.prototype.hasOwnProperty,_.each(c,function(n){h+p<n.startTime+n.delay+n.duration&&d>n.delay&&_.each(f.toAttrs,function(e,t){y.call(n.toAttrs,t)&&(delete n.toAttrs[t],delete n.fromAttrs[t])})})),t=c):e.addAnimator(this),t.push(g),this.set("animations",t),this.set("_pause",{isPaused:!1}))},c.prototype.stopAnimate=function(t){var n=this,e=(void 0===t&&(t=!0),this.get("animations"));_.each(e,function(e){t&&(e.onFrame?n.attr(e.onFrame(1)):n.attr(e.toAttrs)),e.callback&&e.callback()}),this.set("animating",!1),this.set("animations",[])},c.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return _.each(t,function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},c.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return _.each(e,function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},c.prototype.emitDelegation=function(e,n){var r,o=this,i=n.propagationPath;this.getEvents(),"mouseenter"===e?r=n.fromShape:"mouseleave"===e&&(r=n.toShape);for(var a=this,t=0;t<i.length&&"break"!==function(e){var t=i[e],e=t.get("name");if(e){if((t.isGroup()||t.isCanvas&&t.isCanvas())&&r&&s.isParent(t,r))return"break";_.isArray(e)?_.each(e,function(e){o.emitDelegateEvent(t,e,n)}):a.emitDelegateEvent(t,e,n)}}(t);t++);},c.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),t=t+":"+n.type;(r[t]||r["*"])&&(n.name=t,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(t,n))},c.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),n=u(n,[["t",e,t]]);return this.setMatrix(n),this},c.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},c.prototype.moveTo=function(e,t){return this.move(e,t)},c.prototype.scale=function(e,t){var n=this.getMatrix(),n=u(n,[["s",e,t||e]]);return this.setMatrix(n),this},c.prototype.rotate=function(e){var t=this.getMatrix(),t=u(t,[["r",e]]);return this.setMatrix(t),this},c.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,t=t.y,r=this.getMatrix(),r=u(r,[["t",-n,-t],["r",e],["t",n,t]]);return this.setMatrix(r),this},c.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),r=u(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(r),this},c);function c(e){var t=r.call(this,e)||this,n=(t.attrs={},t.getDefaultAttrs());return _.mix(n,e.attrs),t.attrs=n,t.initAttrs(n),t.initAnimate(),t}t.default=i},33652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(97582),n=(o=n(28377).default,r.__extends(i,o),i.prototype.isGroup=function(){return!0},i.prototype.isEntityGroup=function(){return!1},i.prototype.clone=function(){for(var e=o.prototype.clone.call(this),t=this.getChildren(),n=0;n<t.length;n++){var r=t[n];e.add(r.clone())}return e},i);function i(){return null!==o&&o.apply(this,arguments)||this}t.default=n},10996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(87822),l=n(94561),n=(r=i.default,o.__extends(a,r),a.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},a.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},a.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},a.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},a.prototype.applyMatrix=function(e){r.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},a.prototype.calculateCanvasBBox=function(){var e,t,n,r=this.getBBox(),o=this.getTotalMatrix(),i=r.minX,a=r.minY,s=r.maxX,u=r.maxY,r=(o&&(t=l.multiplyVec2(o,[r.minX,r.minY]),e=l.multiplyVec2(o,[r.maxX,r.minY]),n=l.multiplyVec2(o,[r.minX,r.maxY]),o=l.multiplyVec2(o,[r.maxX,r.maxY]),i=Math.min(t[0],e[0],n[0],o[0]),s=Math.max(t[0],e[0],n[0],o[0]),a=Math.min(t[1],e[1],n[1],o[1]),u=Math.max(t[1],e[1],n[1],o[1])),this.attrs);return r.shadowColor&&(t=s+(e=void 0===(t=r.shadowBlur)?0:t)+(o=void 0===(n=r.shadowOffsetX)?0:n),n=a-e+(r=void 0===(n=r.shadowOffsetY)?0:n),r=u+e+r,i=Math.min(i,i-e+o),s=Math.max(s,t),a=Math.min(a,n),u=Math.max(u,r)),{x:i,y:a,minX:i,minY:a,maxX:s,maxY:u,width:s-i,height:u-a}},a.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},a.prototype.isClipShape=function(){return this.get("isClipShape")},a.prototype.isInShape=function(e,t){return!1},a.prototype.isOnlyHitBox=function(){return!1},a.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),t=(e=this.invertFromMatrix([e,t,1]))[0],e=e[1],o=this._isInBBox(t,e);if(this.isOnlyHitBox())return o;if(o&&!this.isClipped(t,e)){if(this.isInShape(t,e))return!0;if(n&&n.isHit(t,e))return!0;if(r&&r.isHit(t,e))return!0}return!1},a);function a(e){return r.call(this,e)||this}t.default=n},44254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerEasing=t.getEasing=void 0;var r=n(3301),o={};t.getEasing=function(e){return o[e.toLowerCase()]||r[e]},t.registerEasing=function(e,t){o[e.toLowerCase()]=t}},49812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x=n(31834),s=n(42433),S=n(4644),O=n(44254),P=n(74583),E=n(86642),k=[1,0,0,0,1,0,0,0,1];function r(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}r.prototype.initTimer=function(){var r,o,i,a=this;this.timer=s.timer(function(e){if(a.current=e,0<a.animators.length){for(var t=a.animators.length-1;0<=t;t--)if((r=a.animators[t]).destroyed)a.removeAnimator(t);else{if(!r.isAnimatePaused())for(var n=(o=r.get("animations")).length-1;0<=n;n--)i=o[n],function(e,t,n){var r,o=t.startTime;if(!(n<o+t.delay||t._paused)){var i=t.duration,a=t.easing,a=O.getEasing(a);if(n=n-o-t.delay,t.repeat)r=a(r=n%i/i);else{if(!((r=n/i)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),1;r=a(r)}if(t.onFrame)o=t.onFrame(r),e.attr(o);else{var s,u,l,n=e,c=t,f=r,h={},p=c.fromAttrs,d=c.toAttrs;if(!n.destroyed){for(u in d)if(!x.isEqual(p[u],d[u]))if("path"===u){var y=d[u],g=p[u];y.length>g.length?(y=P.parsePathString(d[u]),g=P.parsePathString(p[u]),g=P.fillPathByDiff(g,y),g=P.formatPath(g,y),c.fromAttrs.path=g,c.toAttrs.path=y):c.pathFormatted||(y=P.parsePathString(d[u]),g=P.parsePathString(p[u]),g=P.formatPath(g,y),c.fromAttrs.path=g,c.toAttrs.path=y,c.pathFormatted=!0),h[u]=[];for(var v=0;v<y.length;v++){for(var m=y[v],b=g[v],w=[],_=0;_<m.length;_++)x.isNumber(m[_])&&b&&x.isNumber(b[_])?(s=S.interpolate(b[_],m[_]),w.push(s(f))):w.push(m[_]);h[u].push(w)}}else"matrix"===u?(l=S.interpolateArray(p[u]||k,d[u]||k)(f),h[u]=l):E.isColorProp(u)&&E.isGradientColor(d[u])?h[u]=d[u]:x.isFunction(d[u])||(s=S.interpolate(p[u],d[u]),h[u]=s(f));n.attr(h)}}}}(r,i,e)&&(o.splice(n,1),i.callback)&&i.callback();0===o.length&&a.removeAnimator(t)}a.canvas.get("autoDraw")||a.canvas.draw()}})},r.prototype.addAnimator=function(e){this.animators.push(e)},r.prototype.removeAnimator=function(e){this.animators.splice(e,1)},r.prototype.isAnimating=function(){return!!this.animators.length},r.prototype.stop=function(){this.timer&&this.timer.stop()},r.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},r.prototype.getTime=function(){return this.current},t.default=r},84840:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var e=e.attr(),t=e.x,n=e.y,e=e.r;return{x:t-e,y:n-e,width:2*e,height:2*e}}},27823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var e=e.attr(),t=e.x,n=e.y,r=e.rx,e=e.ry;return{x:t-r,y:n-e,width:2*r,height:2*e}}},68246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBBox=t.getBBoxMethod=void 0;var r=n(37197),t=(Object.defineProperty(t,"registerBBox",{enumerable:!0,get:function(){return r.register}}),Object.defineProperty(t,"getBBoxMethod",{enumerable:!0,get:function(){return r.getMethod}}),n(36491)),o=n(84840),i=n(96812),a=n(43825),s=n(33117),u=n(14465),l=n(85195),n=n(27823);r.register("rect",t.default),r.register("image",t.default),r.register("circle",o.default),r.register("marker",o.default),r.register("polyline",i.default),r.register("polygon",a.default),r.register("text",s.default),r.register("path",u.default),r.register("line",l.default),r.register("ellipse",n.default)},85195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(91815);t.default=function(e){var t=e.attr(),n=t.x1,r=t.y1,o=t.x2,t=t.y2,n={minX:Math.min(n,o),maxX:Math.max(n,o),minY:Math.min(r,t),maxY:Math.max(r,t)};return{x:(n=i.mergeArrowBBox(e,n)).minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY}}},14465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=n(28524),o=n(73920),v=n(31834),i=n(91815);function m(e,t){var n=e.prePoint,r=e.currentPoint,e=e.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),i=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2),n=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),n=Math.acos((o+i-n)/(2*Math.sqrt(o)*Math.sqrt(i)));return!n||0===Math.sin(n)||v.isNumberEqual(n,0)?{xExtra:0,yExtra:0}:(o=Math.abs(Math.atan2(e[1]-r[1],e[0]-r[0])),i=Math.abs(Math.atan2(e[0]-r[0],e[1]-r[1])),o=o>Math.PI/2?Math.PI-o:o,i=i>Math.PI/2?Math.PI-i:i,{xExtra:Math.cos(n/2-o)*(t/2*(1/Math.sin(n/2)))-t/2||0,yExtra:Math.cos(i-n/2)*(t/2*(1/Math.sin(n/2)))-t/2||0})}t.default=function(e){var t=e.attr(),n=t.path,t=t.stroke?t.lineWidth:0,n=function(e,t){for(var n=[],r=[],o=[],i=0;i<e.length;i++){var a=(f=e[i]).currentPoint,s=f.params,u=f.prePoint,l=void 0;switch(f.command){case"Q":l=g.Quad.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":l=g.Cubic.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=f.arcParams,l=g.Arc.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}l&&(f.box=l,n.push(l.x,l.x+l.width),r.push(l.y,l.y+l.height)),t&&("L"===f.command||"M"===f.command)&&f.prePoint&&f.nextPoint&&o.push(f)}var f,n=n.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}),r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}),h=v.min(n),p=v.min(r),d=v.max(n),y=v.max(r);if(0!==o.length)for(i=0;i<o.length;i++)(a=(f=o[i]).currentPoint)[0]===h?h-=m(f,t).xExtra:a[0]===d&&(d+=m(f,t).xExtra),a[1]===p?p-=m(f,t).yExtra:a[1]===y&&(y+=m(f,t).yExtra);return{x:h,y:p,width:d-h,height:y-p}}(e.get("segments")||o.path2Segments(n),t),t=n.x,r=n.y,t={minX:t,minY:r,maxX:t+n.width,maxY:r+n.height};return{x:(t=i.mergeArrowBBox(e,t)).minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}}},43825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(28524);t.default=function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}return a.Util.getBBoxByArray(n,r)}},96812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(28524),c=n(91815);t.default=function(e){for(var t=e.attr().points,n=[],r=[],o=0;o<t.length;o++){var i=t[o];n.push(i[0]),r.push(i[1])}var a=l.Util.getBBoxByArray(n,r),s=a.x,u=a.y,s={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(s=c.mergeArrowBBox(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}},36491:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}},37197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMethod=t.register=void 0;var n=new Map;t.register=function(e,t){n.set(e,t)},t.getMethod=function(e){return n.get(e)}},33117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(10409);t.default=function(e){var t,e=e.attr(),n=e.x,r=e.y,o=e.text,i=e.fontSize,a=e.lineHeight,s=(s=e.font)||u.assembleFont(e),s=u.getTextWidth(o,s),a=s?(t=e.textAlign,e=e.textBaseline,i={x:n,y:r-(o=u.getTextHeight(o,i,a))},t&&("end"===t||"right"===t?i.x-=s:"center"===t&&(i.x-=s/2)),e&&("top"===e?i.y+=o:"middle"===e&&(i.y+=o/2)),{x:i.x,y:i.y,width:s,height:o}):{x:n,y:r,width:0,height:0};return a}},91815:function(e,t){"use strict";function r(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeArrowBBox=t.mergeBBox=void 0,t.mergeBBox=r,t.mergeArrowBBox=function(e,t){var n=e.get("startArrowShape"),e=e.get("endArrowShape");return n&&(t=r(t,n.getCanvasBBox())),t=e?r(t,e.getCanvasBBox()):t}},9246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(31899),p=n(7693),r=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function d(e,t,n){n.name=t,n.target=e,n.currentTarget=e,(n.delegateTarget=e).emit(t,n)}function o(e){var n=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var t=e.type;n._triggerEvent(t,e)},this._onDocumentMove=function(e){var t;n.canvas.get("el")!==e.target&&(n.dragging||n.currentShape)&&(t=n._getPointInfo(e),n.dragging)&&n._emitEvent("drag",e,t,n.draggingShape)},this._onDocumentMouseUp=function(e){var t;n.canvas.get("el")!==e.target&&n.dragging&&(t=n._getPointInfo(e),n.draggingShape&&n._emitEvent("drop",e,t,null),n._emitEvent("dragend",e,t,n.draggingShape),n._afterDrag(n.draggingShape,t,e))},this.canvas=e.canvas}o.prototype.init=function(){this._bindEvents()},o.prototype._bindEvents=function(){var t=this,n=this.canvas.get("el");p.each(r,function(e){n.addEventListener(e,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},o.prototype._clearEvents=function(){var t=this,n=this.canvas.get("el");p.each(r,function(e){n.removeEventListener(e,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},o.prototype._getEventObj=function(e,t,n,r,o,i){e=new a.default(e,t);return e.fromShape=o,e.toShape=i,e.x=n.x,e.y=n.y,e.clientX=n.clientX,e.clientY=n.clientY,e.propagationPath.push(r),e},o.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},o.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),t=t.getPointByEvent(e);return{x:t.x,y:t.y,clientX:n.x,clientY:n.y}},o.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),o=this["_on"+e],i=!1;o?o.call(this,n,r,t):(o=this.currentShape,"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(i=!0,o&&this._emitEvent(e,t,n,o,o,null),this._emitEvent(e,t,n,null,o,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)),i||(this.currentShape=r),r&&!r.get("destroyed")&&((o=this.canvas).get("el").style.cursor=r.attr("cursor")||o.get("cursor"))},o.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},o.prototype._emitMouseoverEvents=function(e,t,n,r){var o=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),r)&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r))},o.prototype._emitDragoverEvents=function(e,t,n,r,o){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),o||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),o&&this._emitEvent("dragover",e,t,r)},o.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},o.prototype._onmouseup=function(e,t,n){var r;0===n.button&&(r=this.draggingShape,this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null))},o.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},o.prototype._onmousemove=function(e,t,n){var r,o,i,a,s=this.canvas,u=this.currentShape,l=this.draggingShape;this.dragging?(l&&this._emitDragoverEvents(n,e,u,t,!1),this._emitEvent("drag",n,e,l)):(a=this.mousedownPoint)&&(r=this.mousedownShape,o=n.timeStamp-this.mousedownTimeStamp,i=a.clientX-e.clientX,a=a.clientY-e.clientY,120<o||40<i*i+a*a)?r&&r.get("draggable")?((l=this.mousedownShape).set("capture",!1),this.draggingShape=l,this.dragging=!0,this._emitEvent("dragstart",n,e,l),this.mousedownShape=null,this.mousedownPoint=null):!r&&s.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,u,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,u,t),this._emitEvent("mousemove",n,e,t))},o.prototype._emitEvent=function(e,t,n,r,o,i){var a=this._getEventObj(e,t,n,r,o,i);if(r){d(a.shape=r,e,a);for(var s=r.getParent();s;){s.emitDelegation(e,a);if(!a.propagationStopped){u=void 0;l=void 0;c=void 0;f=void 0;h=void 0;var u=s;var l=e;var c=a;if(c.bubbles){var f=void 0,h=!1;if("mouseenter"===l?(f=c.fromShape,h=!0):"mouseleave"===l&&(h=!0,f=c.toShape),!u.isCanvas()||!h)f&&p.isParent(u,f)?c.bubbles=!1:(c.name=l,c.currentTarget=u,(c.delegateTarget=u).emit(l,c))}}a.propagationPath.push(s),s=s.getParent()}}else d(this.canvas,e,a)},o.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t.default=o},31899:function(e,t){"use strict";function n(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n.prototype.toString=function(){return"[Event (type="+this.type+")]"},n.prototype.save=function(){},n.prototype.restore=function(){},t.default=n},6992:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.PathUtil=void 0;var r=n(97582),o=n(74583),i=(t.PathUtil=o,r.__exportStar(n(9257),t),r.__exportStar(n(9111),t),n(31899)),a=(Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.default}}),n(40647)),s=(Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return a.default}}),n(15741)),u=(Object.defineProperty(t,"AbstractCanvas",{enumerable:!0,get:function(){return s.default}}),n(33652)),l=(Object.defineProperty(t,"AbstractGroup",{enumerable:!0,get:function(){return u.default}}),n(10996)),c=(Object.defineProperty(t,"AbstractShape",{enumerable:!0,get:function(){return l.default}}),n(68246)),f=(Object.defineProperty(t,"getBBoxMethod",{enumerable:!0,get:function(){return c.getBBoxMethod}}),Object.defineProperty(t,"registerBBox",{enumerable:!0,get:function(){return c.registerBBox}}),n(10409)),h=(Object.defineProperty(t,"getTextHeight",{enumerable:!0,get:function(){return f.getTextHeight}}),Object.defineProperty(t,"assembleFont",{enumerable:!0,get:function(){return f.assembleFont}}),n(7693)),p=(Object.defineProperty(t,"isAllowCapture",{enumerable:!0,get:function(){return h.isAllowCapture}}),n(94561)),d=(Object.defineProperty(t,"multiplyVec2",{enumerable:!0,get:function(){return p.multiplyVec2}}),Object.defineProperty(t,"invert",{enumerable:!0,get:function(){return p.invert}}),n(73495)),y=(Object.defineProperty(t,"getOffScreenContext",{enumerable:!0,get:function(){return d.getOffScreenContext}}),n(44254));Object.defineProperty(t,"registerEasing",{enumerable:!0,get:function(){return y.registerEasing}}),t.version="0.5.11"},9111:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9257:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},86642:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGradientColor=t.isColorProp=void 0,t.isColorProp=function(e){return["fill","stroke","fillStyle","strokeStyle"].includes(e)},t.isGradientColor=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)}},94561:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invert=t.multiplyVec2=t.multiplyMatrix=void 0,t.multiplyMatrix=function(e,t){var n=[],r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],e=e[8],f=t[0],h=t[1],p=t[2],d=t[3],y=t[4],g=t[5],v=t[6],m=t[7],t=t[8];return n[0]=f*r+h*a+p*l,n[1]=f*o+h*s+p*c,n[2]=f*i+h*u+p*e,n[3]=d*r+y*a+g*l,n[4]=d*o+y*s+g*c,n[5]=d*i+y*u+g*e,n[6]=v*r+m*a+t*l,n[7]=v*o+m*s+t*c,n[8]=v*i+m*u+t*e,n},t.multiplyVec2=function(e,t){var n=[],r=t[0],t=t[1];return n[0]=e[0]*r+e[3]*t+e[6],n[1]=e[1]*r+e[4]*t+e[7],n},t.invert=function(e){var t=[],n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],e=e[8],c=e*a-s*l,f=-e*i+s*u,h=l*i-a*u,p=n*c+r*f+o*h;return p?(t[0]=c*(p=1/p),t[1]=(-e*r+o*l)*p,t[2]=(s*r-o*a)*p,t[3]=f*p,t[4]=(e*n-o*u)*p,t[5]=(-s*n+o*i)*p,t[6]=h*p,t[7]=(-l*n+r*u)*p,t[8]=(a*n-r*i)*p,t):null}},73495:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOffScreenContext=void 0;var n=null;t.getOffScreenContext=function(){var e;return n||((e=document.createElement("canvas")).width=1,e.height=1,n=e.getContext("2d")),n}},74583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectPath=t.pathToCurve=t.pathToAbsolute=t.parsePathString=t.parsePathArray=t.intersection=t.formatPath=t.fillPathByDiff=t.fillPath=t.catmullRomToBezier=void 0;function m(i){var a,s;return i?h.isArray(i)?i:(a={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[],String(i).replace(r,function(e,t,n){var r=[],o=t.toLowerCase();if(n.replace(u,function(e,t){t&&r.push(+t)}),"m"===o&&2<r.length&&(s.push([t].concat(r.splice(0,2))),o="l",t="m"===t?"l":"L"),"o"===o&&1===r.length&&s.push([t,r[0]]),"r"===o)s.push([t].concat(r));else for(;a[o]<=r.length&&(s.push([t].concat(r.splice(0,a[o]))),a[o]););return i}),s):null}function b(e,t){for(var n=[],r=0,o=e.length;r<o-2*!t;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?o-4===r?i[3]={x:+e[0],y:+e[1]}:o-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}function w(e,t,n,r,o){var i,a,s;return null===o&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==o?(i=Math.PI/180,a=e+n*Math.cos(-r*i),s=e+n*Math.cos(-o*i),[["M",a,t+n*Math.sin(-r*i)],["A",n,n,0,+(180<o-r),0,s,t+n*Math.sin(-o*i)]]):[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]}function _(e){if(!(e=m(e))||!e.length)return[["M",0,0]];var t,n,r=[],o=0,i=0,a=0,s=0,u=0;"M"===e[0][0]&&(a=o=+e[0][1],s=i=+e[0][2],u++,r[0]=["M",o,i]);for(var l=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),c=void 0,f=void 0,h=u,p=e.length;h<p;h++){if(r.push(c=[]),(t=(f=e[h])[0])!==t.toUpperCase())switch(c[0]=t.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+o,c[7]=+f[7]+i;break;case"V":c[1]=+f[1]+i;break;case"H":c[1]=+f[1]+o;break;case"R":for(var d=2,y=(n=[o,i].concat(f.slice(1))).length;d<y;d++)n[d]=+n[d]+o,n[++d]=+n[d]+i;r.pop(),r=r.concat(b(n,l));break;case"O":r.pop(),(n=w(o,i,f[1],f[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(w(o,i,f[1],f[2],f[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+f[1]+o,s=+f[2]+i;break;default:for(d=1,y=f.length;d<y;d++)c[d]=+f[d]+(d%2?o:i)}else if("R"===t)n=[o,i].concat(f.slice(1)),r.pop(),r=r.concat(b(n,l)),c=["R"].concat(f.slice(-2));else if("O"===t)r.pop(),(n=w(o,i,f[1],f[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(w(o,i,f[1],f[2],f[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=f.length;g<v;g++)c[g]=f[g];if("O"!==(t=t.toUpperCase()))switch(c[0]){case"Z":o=+a,i=+s;break;case"H":o=c[1];break;case"V":i=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:o=c[c.length-2],i=c[c.length-1]}}return r}function x(e,t,n,r){return[e,t,n,r,n,r]}function S(e,t,n,r,o,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*o+2/3*n,1/3*i+2/3*r,o,i]}function P(e,t){for(var i=_(e),a=t&&_(t),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",l="",c=function(e,t,n){var r,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,n,r,o,i,a,s,u,l,c){r===o&&(r+=1);function f(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var h=120*Math.PI/180,p=Math.PI/180*(+i||0),d=[],y=(c?(_=c[0],x=c[1],b=c[2],w=c[3]):(t=(g=f(t,n,-p)).x,n=g.y,u=(g=f(u,l,-p)).x,l=g.y,t===u&&n===l&&(u+=1,l+=1),1<(y=(g=(t-u)/2)*g/(r*r)+(v=(n-l)/2)*v/(o*o))&&(r*=y=Math.sqrt(y),o*=y),y=r*r,m=o*o,b=(a=(a===s?-1:1)*Math.sqrt(Math.abs((y*m-y*v*v-m*g*g)/(y*v*v+m*g*g))))*r*v/o+(t+u)/2,w=a*-o*g/r+(n+l)/2,_=Math.asin(((n-w)/o).toFixed(9)),x=Math.asin(((l-w)/o).toFixed(9)),_=t<b?Math.PI-_:_,x=u<b?Math.PI-x:x,_<0&&(_=2*Math.PI+_),x<0&&(x=2*Math.PI+x),s&&x<_&&(_-=2*Math.PI),!s&&_<x&&(x-=2*Math.PI)),x-_),g=(Math.abs(y)>h&&(m=x,v=u,a=l,x=_+h*(s&&_<x?1:-1),d=e(u=b+r*Math.cos(x),l=w+o*Math.sin(x),r,o,i,0,s,v,a,[x,m,b,w])),y=x-_,Math.cos(_)),h=Math.sin(_),i=Math.cos(x),s=Math.sin(x),v=Math.tan(y/4),a=4/3*r*v,m=4/3*o*v,b=[t,n],w=[t+a*h,n-m*g],_=[u+a*s,l-m*i],x=[u,l];if(w[0]=2*b[0]-w[0],w[1]=2*b[1]-w[1],c)return[w,_,x].concat(d);for(var S=[],O=0,P=(d=[w,_,x].concat(d).join().split(",")).length;O<P;O++)S[O]=O%2?f(d[O-1],d[O],p).y:f(d[O],d[O+1],p).x;return S}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":o="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,o].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(S(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(S(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(x(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(x(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(x(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(x(t.x,t.y,t.X,t.Y))}return e},f=function(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)o[t]="A",a&&(s[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),p=Math.max(i.length,a&&a.length||0)}},h=function(e,t,n,r,o){e&&t&&"M"===e[o][0]&&"M"!==t[o][0]&&(t.splice(o,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],p=Math.max(i.length,a&&a.length||0))},p=Math.max(i.length,a&&a.length||0),d=0;d<p;d++){"C"!==(u=i[d]?i[d][0]:u)&&(o[d]=u,d)&&(l=o[d-1]),i[d]=c(i[d],n,l),"A"!==o[d]&&"C"===u&&(o[d]="C"),f(i,d),a&&("C"!==(u=a[d]?a[d][0]:u)&&(s[d]=u,d)&&(l=s[d-1]),a[d]=c(a[d],r,l),"A"!==s[d]&&"C"===u&&(s[d]="C"),f(a,d)),h(i,a,n,r,d),h(a,i,r,n,d);var y=i[d],g=a&&a[d],v=y.length,m=a&&g.length;n.x=y[v-2],n.y=y[v-1],n.bx=parseFloat(y[v-4])||n.x,n.by=parseFloat(y[v-3])||n.y,r.bx=a&&(parseFloat(g[m-4])||r.x),r.by=a&&(parseFloat(g[m-3])||r.y),r.x=a&&g[m-2],r.y=a&&g[m-1]}return a?[i,a]:i}function i(e){return e.join(",").replace(o,"$1")}function O(e,t,n,r,o,i,a,s,u){for(var l=(u=1<(u=null===u?1:u)?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=l*c[p]+l,y=g(d,e,n,o,a),d=g(d,t,r,i,s);h+=f[p]*Math.sqrt(y*y+d*d)}return l*h}function E(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function k(e,t,n,r,o,i,a,s){return h.isArray(e)||(e=[e,t,n,r,o,i,a,s]),t=function(e,t,n,r,o,i,a,s){for(var u,l,c,f=[],h=[[],[]],p=0;p<2;++p)if(d=0===p?(l=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*a,3*n-3*e):(l=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*s,3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;0<(c=-d/l)&&c<1&&f.push(c)}else{var d=l*l-4*d*u,y=Math.sqrt(d);d<0||(0<(d=(-l+y)/(2*u))&&d<1&&f.push(d),0<(d=(-l-y)/(2*u))&&d<1&&f.push(d))}for(var g,v=f.length,m=v;v--;)g=1-(c=f[v]),h[0][v]=g*g*g*e+3*g*g*c*n+3*g*c*c*o+c*c*c*a,h[1][v]=g*g*g*t+3*g*g*c*r+3*g*c*c*i+c*c*c*s;return h[0][m]=e,h[1][m]=t,h[0][m+1]=a,h[1][m+1]=s,h[0].length=h[1].length=m+2,{min:{x:Math.min.apply(0,h[0]),y:Math.min.apply(0,h[1])},max:{x:Math.max.apply(0,h[0]),y:Math.max.apply(0,h[1])}}}.apply(null,e),C(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y)}function M(e,t,n,r,o,i,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,p=h*u,d=e+2*u*(n-e)+h*(o-2*n+e),y=t+2*u*(r-t)+h*(i-2*r+t),g=n+2*u*(o-n)+h*(a-2*o+n);return{x:c*e+3*f*u*n+3*l*u*u*o+p*a,y:c*t+3*f*u*r+3*l*u*u*i+p*s,m:{x:d,y:y},n:{x:g,y:h=r+2*u*(i-r)+h*(s-2*i+r)},start:{x:l*e+u*n,y:l*t+u*r},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*Math.atan2(d-g,y-h)/Math.PI}}function j(e,t,n){if(r=k(e),o=k(t),r=C(r),o=C(o),!(E(o,r.x,r.y)||E(o,r.x2,r.y)||E(o,r.x,r.y2)||E(o,r.x2,r.y2)||E(r,o.x,o.y)||E(r,o.x2,o.y)||E(r,o.x,o.y2)||E(r,o.x2,o.y2)||(r.x<o.x2&&r.x>o.x||o.x<r.x2&&o.x>r.x)&&(r.y<o.y2&&r.y>o.y||o.y<r.y2&&o.y>r.y)))return n?0:[];for(var r,o,i=~~(O.apply(0,e)/8),a=~~(O.apply(0,t)/8),s=[],u=[],l={},c=n?0:[],f=0;f<1+i;f++){var h=M.apply(0,e.concat(f/i));s.push({x:h.x,y:h.y,t:f/i})}for(f=0;f<1+a;f++)h=M.apply(0,t.concat(f/a)),u.push({x:h.x,y:h.y,t:f/a});for(f=0;f<i;f++)for(var p=0;p<a;p++){var d=s[f],y=s[f+1],g=u[p],v=u[p+1],m=Math.abs(y.x-d.x)<.001?"y":"x",b=Math.abs(v.x-g.x)<.001?"y":"x",w=function(e,t,n,r,o,i,a,s){if(!(Math.max(e,n)<Math.min(o,a)||Math.min(e,n)>Math.max(o,a)||Math.max(t,r)<Math.min(i,s)||Math.min(t,r)>Math.max(i,s))){var u=(e-n)*(i-s)-(t-r)*(o-a);if(u){var l=((e*r-t*n)*(o-a)-(e-n)*(o*s-i*a))/u,u=((e*r-t*n)*(i-s)-(t-r)*(o*s-i*a))/u,c=+l.toFixed(2),f=+u.toFixed(2);if(!(c<+Math.min(e,n).toFixed(2)||c>+Math.max(e,n).toFixed(2)||c<+Math.min(o,a).toFixed(2)||c>+Math.max(o,a).toFixed(2)||f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(i,s).toFixed(2)||f>+Math.max(i,s).toFixed(2)))return{x:l,y:u}}}}(d.x,d.y,y.x,y.y,g.x,g.y,v.x,v.y);w&&l[w.x.toFixed(4)]!==w.y.toFixed(4)&&(l[w.x.toFixed(4)]=w.y.toFixed(4),m=d.t+Math.abs((w[m]-d[m])/(y[m]-d[m]))*(y.t-d.t),y=g.t+Math.abs((w[b]-g[b])/(v[b]-g[b]))*(v.t-g.t),0<=m)&&m<=1&&0<=y&&y<=1&&(n?c+=1:c.push({x:w.x,y:w.y,t1:m,t2:y}))}return c}var h=n(31834),n="\t\n\v\f\r \u2028\u2029",r=new RegExp("([a-z])["+n+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+n+"]*,?["+n+"]*)+)","ig"),u=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+n+"]*,?["+n+"]*","ig"),o=(t.parsePathString=m,t.catmullRomToBezier=b,t.pathToAbsolute=_,t.pathToCurve=P,/,?([a-z]),?/gi),g=(t.parsePathArray=i,function(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n}),a=function(e,t,n,r,o){return o?[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]]:((o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]).parsePathArray=i,o)},C=(t.rectPath=a,function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:a(e,t,n,r),vb:[e,t,n,r].join(" ")}});t.intersection=function(e,t){var n,r,o,i,a,s,u,l,c=0,f=t,h=void 0;c=P(e),f=P(f);for(var p=[],d=0,y=c.length;d<y;d++){var g=c[d];if("M"===g[0])n=o=g[1],v=i=g[2];else for(var v="C"===g[0]?(n=(u=[n,v].concat(g.slice(1)))[6],u[7]):(u=[n,v,n,v,o,i,o,i],n=o,i),m=0,b=f.length;m<b;m++){var w=f[m];if("M"===w[0])r=a=w[1],_=s=w[2];else{for(var _="C"===w[0]?(r=(l=[r,_].concat(w.slice(1)))[6],l[7]):(l=[r,_,r,_,a,s,a,s],r=a,s),x=j(u,l,h),S=0,O=x.length;S<O;S++)x[S].segment1=d,x[S].segment2=m,x[S].bez1=u,x[S].bez2=l;p=p.concat(x)}}}return p};function l(u,e,l){if(1===l)return[[].concat(u)];var t=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])t=t.concat(function(e,t){var n=[[u[1],u[2]]],r=(t=l||2,[]);"A"===e[0]?(n.push(e[6]),n.push(e[7])):"C"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var o=n,i=1/t,a=0;a<t-1;a++){var s=function(e,t){var i=[],a=[];return e.length&&function e(t,n){if(1===t.length)i.push(t[0]),a.push(t[0]);else{for(var r=[],o=0;o<t.length-1;o++)0===o&&i.push(t[0]),o===t.length-2&&a.push(t[o+1]),r[o]=[(1-n)*t[o][0]+n*t[o+1][0],(1-n)*t[o][1]+n*t[o+1][1]];e(r,n)}}(e,t),{left:i,right:a.reverse()}}(o,i/(1-i*a));r.push(s.left),o=s.right}return r.push(o),r.map(function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),3<=e.length&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])})}(e));else{var n=[].concat(u);"M"===n[0]&&(n[0]="L");for(var r=0;r<=l-1;r++)t.push(n)}return t}t.fillPath=function(r,e){if(1===r.length)return r;var o=r.length-1,t=e.length-1,n=o/t,i=[];if(1===r.length&&"M"===r[0][0]){for(var a=0;a<t-o;a++)r.push(r[0]);return r}for(a=0;a<t;a++){var s=Math.floor(n*a);i[s]=(i[s]||0)+1}var u=i.reduce(function(e,t,n){return n===o?e.concat(r[o]):e.concat(l(r[n],r[n+1],t))},[]);return u.unshift(r[0]),"Z"!==e[t]&&"z"!==e[t]||u.push("Z"),u};function s(e,t,n){for(var r,o=[].concat(e),i=1/(n+1),a=c(t)[0],s=1;s<=n;s++)i*=s,0===(r=Math.floor(e.length*i))?o.unshift([a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]):o.splice(r,0,[a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]);return o}function c(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}t.fillPathByDiff=function(e,t){var n=function(e,t){var n,r=e.length,o=t.length;if(0===r||0===o)return null;for(var i=[],a=0;a<=r;a++)i[a]=[],i[a][0]={min:a};for(var s,u=0;u<=o;u++)i[0][u]={min:u};for(a=1;a<=r;a++)for(n=e[a-1],u=1;u<=o;u++){var l=function(e,n){var r;return e.length===n.length&&(r=!0,h.each(e,function(e,t){if(e!==n[t])return r=!1}),r)}(n,t[u-1])?0:1,c=i[a-1][u].min+1,f=i[a][u-1].min+1,l=i[a-1][u-1].min+l;i[a][u]=(void 0,s=null,(f=f)<(l=l)&&(l=f,s="add"),(f=c)<l&&(l=f,s="del"),{type:s,min:l})}return i}(e,t),r=e.length,o=t.length,i=[],a=1,s=1;if(n[r][o].min!==r){for(var u=1;u<=r;u++){for(var l=n[u][u].min,s=u,c=a;c<=o;c++)n[u][c].min<l&&(l=n[u][c].min,s=c);a=s,n[u][a].type&&i.push({index:u-1,type:n[u][a].type})}for(u=i.length-1;0<=u;u--)a=i[u].index,"add"===i[u].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var f=o-(r=e.length);if(r<o)for(u=0;u<f;u++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e},t.formatPath=function(e,t){if(!(e.length<=1))for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=c(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(0<r)){e[r]=t[r];break}n=s(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(0<r)){e[r]=t[r];break}n=s(n,e[r-1],2)}e[r]=["C"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case"S":if(n.length<2){if(!(0<r)){e[r]=t[r];break}n=s(n,e[r-1],1)}e[r]=["S"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;default:e[r]=t[r]}return e}},10409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assembleFont=t.getTextWidth=t.getLineSpaceing=t.getTextHeight=void 0;var o=n(7693),i=n(73495);function a(e,t){return t?t-e:.14*e}t.getTextHeight=function(e,t,n){var r=1;return 1<(r=o.isString(e)?e.split("\n").length:r)?t*r+a(t,n)*(r-1):t},t.getLineSpaceing=a,t.getTextWidth=function(e,t){var n=i.getOffScreenContext(),r=0;return o.isNil(e)||""===e||(n.save(),n.font=t,o.isString(e)&&e.includes("\n")?(t=e.split("\n"),o.each(t,function(e){e=n.measureText(e).width;r<e&&(r=e)})):r=n.measureText(e).width,n.restore()),r},t.assembleFont=function(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}},7693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowCapture=t.isParent=t.isBrowser=t.removeFromArray=void 0,t.removeFromArray=function(e,t){t=e.indexOf(t);-1!==t&&e.splice(t,1)},t.isBrowser="undefined"!=typeof window&&void 0!==window.document;var r=n(31834);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return r.isNil}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return r.isFunction}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return r.isString}}),Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return r.isObject}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return r.isArray}}),Object.defineProperty(t,"mix",{enumerable:!0,get:function(){return r.mix}}),Object.defineProperty(t,"each",{enumerable:!0,get:function(){return r.each}}),Object.defineProperty(t,"upperFirst",{enumerable:!0,get:function(){return r.upperFirst}}),t.isParent=function(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r},t.isAllowCapture=function(e){return e.cfg.visible&&e.cfg.capture}},99740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(97582),o=n(6992),a=n(97193),s=n(83901),u=n(19204),l=n(96342),c=n(61615),n=(i=o.AbstractCanvas,r.__extends(f,i),f.prototype.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},f.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},f.prototype.getShapeBase=function(){return s},f.prototype.getGroupBase=function(){return u.default},f.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||l.getPixelRatio();return 1<=e?Math.ceil(e):1},f.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},f.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},f.prototype.setDOMSize=function(e,t){i.prototype.setDOMSize.call(this,e,t);var n=this.get("context"),r=this.get("el"),o=this.getPixelRatio();r.width=o*e,r.height=o*t,1<o&&n.scale(o,o)},f.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),t=this.get("el");e.clearRect(0,0,t.width,t.height)},f.prototype.getShape=function(e,t){return this.get("quickHit")?a.getShape(this,e,t):i.prototype.getShape.call(this,e,t,null)},f.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();return t.length&&t[0]===this?e=n:(e=c.getMergedRegion(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView"))&&(e=c.mergeView(e,n)),e},f.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},f.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(l.clearAnimationFrame(e),this.set("drawFrame",null),this.set("refreshElements",[]))},f.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},f.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),c.applyAttrsToContext(e,this),c.drawChildren(e,n),this.set("refreshElements",[])},f.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),c.applyAttrsToContext(e,this),c.checkRefresh(this,n,r),c.drawChildren(e,n,r),e.restore()):t.length&&c.clearChanged(t),l.each(t,function(e){e.get("hasChanged")&&e.set("hasChanged",!1)}),this.set("refreshElements",[])},f.prototype._startDraw=function(){var e,t=this;this.get("drawFrame")||(e=l.requestAnimationFrame(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},f.prototype.skipDraw=function(){},f.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},f);function f(){return null!==i&&i.apply(this,arguments)||this}t.default=n},19204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(6992),a=n(83901),s=n(61615),u=n(31834),l=n(96342),n=(r=i.AbstractGroup,o.__extends(c,r),c.prototype.onCanvasChange=function(e){s.refreshElement(this,e)},c.prototype.getShapeBase=function(){return a},c.prototype.getGroupBase=function(){return c},c.prototype._applyClip=function(e,t){t&&(e.save(),s.applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},c.prototype.cacheCanvasBBox=function(){var e,t,n,r,o=this.cfg.children,i=[],a=[],o=(u.each(o,function(e){var t=e.cfg.cacheCanvasBBox;t&&e.cfg.isInView&&(i.push(t.minX,t.maxX),a.push(t.minY,t.maxY))}),null);i.length?(r=u.min(i),n=u.max(i),o={minX:r,minY:e=u.min(a),x:r,y:e,maxX:n,maxY:t=u.max(a),width:n-r,height:t-e},(n=this.cfg.canvas)&&(r=n.getViewRange(),this.set("isInView",l.intersectRect(o,r)))):this.set("isInView",!1),this.set("cacheCanvasBBox",o)},c.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),s.applyAttrsToContext(e,this),this._applyClip(e,this.getClip()),s.drawChildren(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},c.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},c);function c(){return null!==r&&r.apply(this,arguments)||this}t.default=n},15873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.Shape=void 0;var r=n(97582),o=n(83901),i=(t.Shape=o,r.__exportStar(n(6992),t),n(99740)),a=(Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return i.default}}),n(19204)),s=(Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.default}}),n(16518));Object.defineProperty(t,"getArcParams",{enumerable:!0,get:function(){return s.default}}),t.version="0.5.12"},33839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(6992),a=n(96342),s=n(61615),u=n(6992),l=n(83901),c=n(19204),n=(r=i.AbstractShape,o.__extends(f,r),f.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},f.prototype.getShapeBase=function(){return l},f.prototype.getGroupBase=function(){return c.default},f.prototype.onCanvasChange=function(e){s.refreshElement(this,e)},f.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),e=u.getBBoxMethod(e)(this),n=t/2,r=e.x-n,o=e.y-n,i=e.x+e.width+n,n=e.y+e.height+n;return{x:r,minX:r,y:o,minY:o,width:e.width+t,height:e.height+t,maxX:i,maxY:n}},f.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},f.prototype.isStroke=function(){return!!this.attrs.stroke},f.prototype._applyClip=function(e,t){t&&(e.save(),s.applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},f.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);var r=this.getCanvasBBox();if(!a.intersectRect(t,r))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),s.applyAttrsToContext(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},f.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},f.prototype.cacheCanvasBBox=function(){var e,t=this.getCanvasViewBox();t&&(e=this.getCanvasBBox(),t=a.intersectRect(e,t),this.set("isInView",t),t?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null))},f.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},f.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},f.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},f.prototype.fill=function(e){e.fill()},f.prototype.stroke=function(e){e.stroke()},f.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,t=t.fillOpacity;this.isFill()&&(a.isNil(t)||1===t?this.fill(e):(e.globalAlpha=t,this.fill(e),e.globalAlpha=r)),this.isStroke()&&0<n&&(a.isNil(o)||1===o||(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},f.prototype.createPath=function(e){},f.prototype.afterDrawPath=function(e){},f.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,o)},f.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!1},f.prototype.getHitLineWidth=function(){var e;return this.isStroke()?(e=this.attrs).lineWidth+e.lineAppendWidth:0},f);function f(){return null!==r&&r.apply(this,arguments)||this}t.default=n},79725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(33839),u=n(96342),n=(r=i.default,o.__extends(a,r),a.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,r:0})},a.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),a=i.x,s=i.y,i=i.r,o=o/2,a=u.distance(a,s,e,t);return r&&n?a<=i+o:r?a<=i:!!n&&i-o<=a&&a<=i+o},a.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,t=t.r;e.beginPath(),e.arc(n,r,t,0,2*Math.PI,!1),e.closePath()},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.default=n},39961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582);function l(e,t,n,r){return e/(n*n)+t/(r*r)}o=n(33839).default,r.__extends(i,o),i.prototype.getDefaultAttrs=function(){var e=o.prototype.getDefaultAttrs.call(this);return r.__assign(r.__assign({},e),{x:0,y:0,rx:0,ry:0})},i.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr(),o=o/2,a=i.x,s=i.y,u=i.rx,i=i.ry,e=(e-a)*(e-a),a=(t-s)*(t-s);return r&&n?l(e,a,u+o,i+o)<=1:r?l(e,a,u,i)<=1:!!n&&1<=l(e,a,u-o,i-o)&&l(e,a,u+o,i+o)<=1},i.prototype.createPath=function(e){var t,n,r=this.attr(),o=r.x,i=r.y,a=r.rx,r=r.ry;e.beginPath(),e.ellipse?e.ellipse(o,i,a,r,0,0,2*Math.PI,!1):(t=r<a?a:r,n=r<a?1:a/r,r=r<a?r/a:1,e.save(),e.translate(o,i),e.scale(n,r),e.arc(0,0,t,0,2*Math.PI),e.restore(),e.closePath())};var o,n=i;function i(){return null!==o&&o.apply(this,arguments)||this}t.default=n},19267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=n(33839),c=n(96342);function f(e){return e instanceof HTMLElement&&c.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}i=o.default,r.__extends(a,i),a.prototype.getDefaultAttrs=function(){var e=i.prototype.getDefaultAttrs.call(this);return r.__assign(r.__assign({},e),{x:0,y:0,width:0,height:0})},a.prototype.initAttrs=function(e){this._setImage(e.img)},a.prototype.isStroke=function(){return!1},a.prototype.isOnlyHitBox=function(){return!0},a.prototype._afterLoading=function(){var e;!0===this.get("toDraw")&&((e=this.get("canvas"))?e.draw():this.createPath(this.get("context")))},a.prototype._setImage=function(e){var t,n=this,r=this.attrs;c.isString(e)?((t=new Image).onload=function(){if(n.destroyed)return!1;n.attr("img",t),n.set("loading",!1),n._afterLoading();var e=n.get("callback");e&&e.call(n)},t.crossOrigin="Anonymous",t.src=e,this.set("loading",!0)):e instanceof Image?(r.width||(r.width=e.width),r.height||(r.height=e.height)):f(e)&&(r.width||(r.width=Number(e.getAttribute("width"))),r.height||(r.height,Number(e.getAttribute("height"))))},a.prototype.onAttrChange=function(e,t,n){i.prototype.onAttrChange.call(this,e,t,n),"img"===e&&this._setImage(t)},a.prototype.createPath=function(e){var t,n,r,o,i,a,s,u,l;this.get("loading")?(this.set("toDraw",!0),this.set("context",e)):(t=(l=this.attr()).x,n=l.y,r=l.width,o=l.height,i=l.sx,a=l.sy,s=l.swidth,u=l.sheight,((l=l.img)instanceof Image||f(l))&&(c.isNil(i)||c.isNil(a)||c.isNil(s)||c.isNil(u)?e.drawImage(l,t,n,r,o):e.drawImage(l,i,a,s,u,t,n,r,o)))};var i,n=a;function a(){return null!==i&&i.apply(this,arguments)||this}t.default=n},83901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33839),o=(Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return r.default}}),n(79725)),i=(Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return o.default}}),n(39961)),a=(Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return i.default}}),n(19267)),s=(Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return a.default}}),n(30763)),u=(Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return s.default}}),n(20904)),l=(Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return u.default}}),n(93091)),c=(Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return l.default}}),n(9356)),f=(Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return c.default}}),n(28854)),h=(Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return f.default}}),n(33665)),p=(Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return h.default}}),n(78901));Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return p.default}})},30763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(28524),a=n(33839),u=n(20187),c=n(57134),n=(r=a.default,o.__extends(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},s.prototype.initAttrs=function(e){this.setArrow()},s.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),this.setArrow()},s.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,o=e.y2,i=e.startArrow,a=e.endArrow;i&&c.addStartArrow(this,e,r,o,t,n),a&&c.addEndArrow(this,e,t,n,r,o)},s.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i,a,s;return!(!n||!o)&&(i=(n=this.attr()).x1,a=n.y1,s=n.x2,n=n.y2,u.default(i,a,s,n,o,e,t))},s.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.startArrow,s=t.endArrow,u={dx:0,dy:0},l={dx:0,dy:0};a&&a.d&&(u=c.getShortenOffset(n,r,o,i,t.startArrow.d)),s&&s.d&&(l=c.getShortenOffset(n,r,o,i,t.endArrow.d)),e.beginPath(),e.moveTo(n+u.dx,r+u.dy),e.lineTo(o-l.dx,i-l.dy)},s.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},s.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,e=e.y2;return i.Line.length(t,n,r,e)},s.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,t=t.y2;return i.Line.pointAt(n,r,o,t,e)},s);function s(){return null!==r&&r.apply(this,arguments)||this}t.default=n},20904:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(73920),s=n(33839),u=n(96342),l=n(61615),n={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},s=(r=s.default,o.__extends(c,r),c.prototype.initAttrs=function(e){this._resetParamsCache()},c.prototype._resetParamsCache=function(){this.set("paramsCache",{})},c.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},c.prototype.isOnlyHitBox=function(){return!0},c.prototype._getR=function(e){return i.isNil(e.r)?e.radius:e.r},c.prototype._getPath=function(){var e,t,n=this.attr(),r=n.x,o=n.y,i=n.symbol||"circle",n=this._getR(n);if(u.isFunction(i))t=(e=i)(r,o,n),t=a.path2Absolute(t);else{if(!(e=c.Symbols[i]))return console.warn(i+" marker is not supported."),null;t=e(r,o,n)}return t},c.prototype.createPath=function(e){var t=this._getPath(),n=this.get("paramsCache");l.drawPath(this,e,{path:t},n)},c.Symbols=n,c);function c(){return null!==r&&r.apply(this,arguments)||this}t.default=s},93091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),c=n(28524),f=n(31834),o=n(33839),i=n(73920),a=n(61615),u=n(95474),s=n(96021),l=n(28064),h=n(57134);function p(e,t,n){for(var r=!1,o=0;o<e.length;o++){var i=e[o];if(r=s.default(i,t,n))break}return r}d=o.default,r.__extends(y,d),y.prototype.getDefaultAttrs=function(){var e=d.prototype.getDefaultAttrs.call(this);return r.__assign(r.__assign({},e),{startArrow:!1,endArrow:!1})},y.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},y.prototype.onAttrChange=function(e,t,n){d.prototype.onAttrChange.call(this,e,t,n),"path"===e&&this._setPathArr(t),this.setArrow()},y.prototype._setPathArr=function(e){this.attrs.path=i.path2Absolute(e);e=l.default.hasArc(e);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},y.prototype.getSegments=function(){var e=this.get("segements");return e||(e=i.path2Segments(this.attr("path")),this.set("segments",e)),e},y.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&(e=this.getStartTangent(),h.addStartArrow(this,t,e[0][0],e[0][1],e[1][0],e[1][1])),r&&(e=this.getEndTangent(),h.addEndArrow(this,t,e[0][0],e[0][1],e[1][0],e[1][1]))},y.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.getSegments(),a=this.get("hasArc"),s=!1;return n&&(n=this.getTotalLength(),s=l.default.isPointInStroke(i,o,e,t,n)),s=!s&&r?a?u.default(this,e,t):(i=this.attr("path"),p((o=l.default.extractPolygons(i)).polygons,e,t)||p(o.polylines,e,t)):s},y.prototype.createPath=function(e){var t=this.attr(),n=this.get("paramsCache");a.drawPath(this,e,t,n)},y.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},y.prototype.getTotalLength=function(){var e=this.get("totalLength");return f.isNil(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},y.prototype.getPoint=function(n){var r,o,e=this.get("tCache"),t=(e||(this._calculateCurve(),this._setTcache(),e=this.get("tCache")),this.get("curve"));if(!e||0===e.length)return t?{x:t[0][1],y:t[0][2]}:null;f.each(e,function(e,t){n>=e[0]&&n<=e[1]&&(r=(n-e[0])/(e[1]-e[0]),o=t)});var i,e=t[o];return f.isNil(e)||f.isNil(o)?null:(i=e.length,t=t[o+1],c.Cubic.pointAt(e[i-2],e[i-1],t[1],t[2],t[3],t[4],t[5],t[6],r))},y.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",l.default.pathToCurve(e))},y.prototype._setTcache=function(){var n,r,o,i,a=0,s=0,u=[],l=this.get("curve");l&&(f.each(l,function(e,t){o=l[t+1],i=e.length,o&&(a+=c.Cubic.length(e[i-2],e[i-1],o[1],o[2],o[3],o[4],o[5],o[6])||0)}),this.set("totalLength",a),0!==a?(f.each(l,function(e,t){o=l[t+1],i=e.length,o&&((n=[])[0]=s/a,r=c.Cubic.length(e[i-2],e[i-1],o[1],o[2],o[3],o[4],o[5],o[6]),s+=r||0,n[1]=s/a,u.push(n))}),this.set("tCache",u)):this.set("tCache",[]))},y.prototype.getStartTangent=function(){var e,t,n,r=this.getSegments();return 1<r.length&&(e=r[0].currentPoint,t=r[1].currentPoint,n=[],(r=r[1].startTangent)?n.push([e[0]-r[0],e[1]-r[1]]):n.push([t[0],t[1]]),n.push([e[0],e[1]])),n},y.prototype.getEndTangent=function(){var e,t,n,r=this.getSegments(),o=r.length;return 1<o&&(e=r[o-2].currentPoint,t=r[o-1].currentPoint,n=[],(r=r[o-1].endTangent)?n.push([t[0]-r[0],t[1]-r[1]]):n.push([e[0],e[1]]),n.push([t[0],t[1]])),n};var d,n=y;function y(){return null!==d&&d.apply(this,arguments)||this}t.default=n},9356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(33839),s=n(99534),u=n(96021),n=(r=i.default,o.__extends(a,r),a.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i=this.attr().points,a=!1;return a=!(a=n?s.default(i,o,e,t,!0):a)&&r?u.default(i,e,t):a},a.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.default=n},28854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),u=n(28524),i=n(28524),l=n(31834),a=n(33839),s=n(99534),h=n(57134),n=(r=a.default,o.__extends(c,r),c.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{startArrow:!1,endArrow:!1})},c.prototype.initAttrs=function(e){this.setArrow()},c.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},c.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},c.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,t=t.endArrow,o=n.length,i=n[0][0],a=n[0][1],s=n[o-1][0],u=n[o-1][1];r&&h.addStartArrow(this,e,n[1][0],n[1][1],i,a),t&&h.addEndArrow(this,e,n[o-2][0],n[o-2][1],s,u)},c.prototype.isFill=function(){return!1},c.prototype.isInStrokeOrPath=function(e,t,n,r,o){return!(!n||!o)&&(n=this.attr().points,s.default(n,o,e,t,!1))},c.prototype.isStroke=function(){return!0},c.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,t=t.endArrow,o=n.length;if(!(n.length<2)){var i,a=n[0][0],s=n[0][1],u=n[o-1][0],l=n[o-1][1];r&&r.d&&(a+=(i=h.getShortenOffset(a,s,n[1][0],n[1][1],r.d)).dx,s+=i.dy),t&&t.d&&(u-=(i=h.getShortenOffset(n[o-2][0],n[o-2][1],u,l,t.d)).dx,l-=i.dy),e.beginPath(),e.moveTo(a,s);for(var c=0;c<o-1;c++){var f=n[c];e.lineTo(f[0],f[1])}e.lineTo(u,l)}},c.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},c.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return l.isNil(t)?(this.set("totalLength",i.Polyline.length(e)),this.get("totalLength")):t},c.prototype.getPoint=function(n){var r,o,e=this.attr().points,t=this.get("tCache");return t||(this._setTcache(),t=this.get("tCache")),l.each(t,function(e,t){n>=e[0]&&n<=e[1]&&(r=(n-e[0])/(e[1]-e[0]),o=t)}),u.Line.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],r)},c.prototype._setTcache=function(){var n,r,o,i,a,s=this.attr().points;!s||0===s.length||(n=this.getTotalLength())<=0||(i=0,a=[],l.each(s,function(e,t){s[t+1]&&((r=[])[0]=i/n,o=u.Line.length(e[0],e[1],s[t+1][0],s[t+1][1]),i+=o,r[1]=i/n,a.push(r))}),this.set("tCache",a))},c.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},c.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},c);function c(){return null!==r&&r.apply(this,arguments)||this}t.default=n},33665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(33839),l=n(23645),f=n(96342),h=n(56270),p=n(73742),d=n(95474),n=(r=i.default,o.__extends(a,r),a.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,width:0,height:0,radius:0})},a.prototype.isInStrokeOrPath=function(e,t,n,r,o){var i,a=this.attr(),s=a.x,u=a.y,l=a.width,c=a.height,a=a.radius;return a?(i=!1,!(i=n?p.default(s,u,l,c,a,o,e,t):i)&&r?d.default(this,e,t):i):(a=o/2,r&&n?f.inBox(s-a,u-a,l+a,c+a,e,t):r?f.inBox(s,u,l,c,e,t):n?h.default(s,u,l,c,o,e,t):void 0)},a.prototype.createPath=function(e){var t,n,r,o=this.attr(),i=o.x,a=o.y,s=o.width,u=o.height,o=o.radius;e.beginPath(),0===o?e.rect(i,a,s,u):(t=(o=l.parseRadius(o))[0],n=o[1],r=o[2],o=o[3],e.moveTo(i+t,a),e.lineTo(i+s-n,a),0!==n&&e.arc(i+s-n,a+n,n,-Math.PI/2,0),e.lineTo(i+s,a+u-r),0!==r&&e.arc(i+s-r,a+u-r,r,0,Math.PI/2),e.lineTo(i+o,a+u),0!==o&&e.arc(i+o,a+u-o,o,Math.PI/2,Math.PI),e.lineTo(i,a+t),0!==t&&e.arc(i+t,a+t,t,Math.PI,1.5*Math.PI),e.closePath())},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.default=n},78901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(33839),f=n(96342),h=n(6992),n=(r=i.default,o.__extends(a,r),a.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},a.prototype.isOnlyHitBox=function(){return!0},a.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},a.prototype._assembleFont=function(){var e=this.attrs;e.font=h.assembleFont(e)},a.prototype._setText=function(e){var t=null;f.isString(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},a.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(t)},a.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,e=+e.fontSize;return t?t-e:.14*e},a.prototype._drawTextArr=function(n,e,r){var o,t=this.attrs,i=t.textBaseline,a=t.x,s=t.y,u=+t.fontSize,l=this._getSpaceingY(),c=h.getTextHeight(t.text,t.fontSize,t.lineHeight);f.each(e,function(e,t){o=s+t*(l+u)-c+u,"middle"===i&&(o+=c-u-(c-u)/2),"top"===i&&(o+=c-u),f.isNil(e)||(r?n.fillText(e,a,o):n.strokeText(e,a,o))})},a.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,o=n.y,i=this.get("textArr");i?this._drawTextArr(e,i,t):(i=n.text,f.isNil(i)||(t?e.fillText(i,r,o):e.strokeText(i,r,o)))},a.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,o=t.strokeOpacity,t=t.fillOpacity;this.isStroke()&&0<n&&(f.isNil(o)||1===o||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(f.isNil(t)||1===t?this.fill(e):(e.globalAlpha=t,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},a.prototype.fill=function(e){this._drawText(e,!0)},a.prototype.stroke=function(e){this._drawText(e,!1)},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.default=n},16518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=n(96342);function r(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function g(e,t){return r(e)*r(t)?(e[0]*t[0]+e[1]*t[1])/(r(e)*r(t)):1}function v(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(g(e,t))}t.default=function(e,t){var n=t[1],r=t[2],o=y.mod(y.toRadian(t[3]),2*Math.PI),i=t[4],a=t[5],s=e[0],u=e[1],l=t[6],t=t[7],c=Math.cos(o)*(s-l)/2+Math.sin(o)*(u-t)/2,f=-1*Math.sin(o)*(s-l)/2+Math.cos(o)*(u-t)/2,h=c*c/(n*n)+f*f/(r*r),h=(1<h&&(n*=Math.sqrt(h),r*=Math.sqrt(h)),n*n*(f*f)+r*r*(c*c)),h=h?Math.sqrt((n*n*(r*r)-h)/h):1,p=(i===a&&(h*=-1),isNaN(h)&&(h=0),r?h*n*f/r:0),h=n?h*-r*c/n:0,s=(s+l)/2+Math.cos(o)*p-Math.sin(o)*h,u=(u+t)/2+Math.sin(o)*p+Math.cos(o)*h,d=[(c-p)/n,(f-h)/r],c=[(-1*c-p)/n,(-1*f-h)/r],p=v([1,0],d),f=v(d,c);return g(d,c)<=-1&&(f=Math.PI),1<=g(d,c)&&(f=0),0===a&&0<f&&(f-=2*Math.PI),1===a&&f<0&&(f+=2*Math.PI),{cx:s,cy:u,rx:y.isSamePoint(e,[l,t])?0:n,ry:y.isSamePoint(e,[l,t])?0:r,startAngle:p,endAngle:p+f,xRotation:o,arcFlag:i,sweepFlag:a}}},57134:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addEndArrow=t.addStartArrow=t.getShortenOffset=void 0;var p=n(97582),d=n(83901),y=Math.sin,g=Math.cos,v=Math.atan2,u=Math.PI;function s(e,t,n,r,o,i,a){var s=t.stroke,t=t.lineWidth,r=v(r-i,n-o),n=new d.Path({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*g(u/6)+","+10*y(u/6)+" L0,0 L"+10*g(u/6)+",-"+10*y(u/6),stroke:s,lineWidth:t}});n.translate(o,i),n.rotateAtPoint(o,i,r),e.set(a?"startArrowShape":"endArrowShape",n)}function l(e,t,n,r,o,i,a){var s=t.startArrow,u=t.endArrow,l=t.stroke,t=t.lineWidth,s=a?s:u,u=s.d,c=s.fill,f=s.stroke,h=s.lineWidth,s=p.__rest(s,["d","fill","stroke","lineWidth"]),r=v(r-i,n-o),n=(u&&(o-=g(r)*u,i-=y(r)*u),new d.Path({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:p.__assign(p.__assign({},s),{stroke:f||l,lineWidth:h||t,fill:c})}));n.translate(o,i),n.rotateAtPoint(o,i,r),e.set(a?"startArrowShape":"endArrowShape",n)}t.getShortenOffset=function(e,t,n,r,o){r=v(r-t,n-e);return{dx:g(r)*o,dy:y(r)*o}},t.addStartArrow=function(e,t,n,r,o,i){"object"===a(t.startArrow)?l(e,t,n,r,o,i,!0):t.startArrow?s(e,t,n,r,o,i,!0):e.set("startArrowShape",null)},t.addEndArrow=function(e,t,n,r,o,i){"object"===a(t.endArrow)?l(e,t,n,r,o,i,!1):t.endArrow?s(e,t,n,r,o,i,!1):e.set("startArrowShape",null)}},61615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeView=t.getMergedRegion=t.getRefreshRegion=t.refreshElement=t.drawPath=t.clearChanged=t.checkChildrenRefresh=t.checkRefresh=t.drawChildren=t.applyAttrsToContext=void 0;var a=n(31834),s=n(23645),E=n(16518),u=n(96342),k=n(57134),l={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function c(e,t){for(var n,r=0;r<e.length;r++){var o,i=e[r];i.cfg.visible&&(i.cfg.hasChanged?(i.cfg.refresh=!0,i.isGroup()&&f(i.cfg.children,t)):i.cfg.refresh?i.isGroup()&&c(i.cfg.children,t):(n=t,o=void 0,o=i.cfg.cacheCanvasBBox,o=i.cfg.isInView&&o&&u.intersectRect(o,n),(i.cfg.refresh=o)&&i.isGroup()&&c(i.cfg.children,t)))}}function f(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup())&&f(r.get("children"),t)}}function i(e){var t,n,r,o;return e.destroyed?t=e._cacheCanvasBBox:(r=(n=e.get("cacheCanvasBBox"))&&!(!n.width||!n.height),o=(e=e.getCanvasBBox())&&!(!e.width||!e.height),r&&o?t=u.mergeRegion(n,e):r?t=n:o&&(t=e)),t}t.applyAttrsToContext=function(e,t){var n,r=t.attr();for(n in r){var o=r[n],i=l[n]||n;"matrix"===i&&o?e.transform(o[0],o[1],o[3],o[4],o[6],o[7]):"lineDash"===i&&e.setLineDash?a.isArray(o)&&e.setLineDash(o):("strokeStyle"===i||"fillStyle"===i?o=s.parseStyle(e,t,o):"globalAlpha"===i&&(o*=e.globalAlpha),e[i]=o)}},t.drawChildren=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];o.cfg.visible?o.draw(e,n):o.skipDraw()}},t.checkRefresh=function(n,e,t){var r=n.get("refreshElements");a.each(r,function(e){if(e!==n)for(var t=e.cfg.parent;t&&t!==n&&!t.cfg.refresh;)t.cfg.refresh=!0,t=t.cfg.parent}),(r[0]===n?f:c)(e,t)},t.checkChildrenRefresh=c,t.clearChanged=function e(t){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.hasChanged=!1,r.isGroup()&&!r.destroyed&&e(r.cfg.children)}},t.drawPath=function(e,t,n,r){var o=n.path,i=n.startArrow,a=n.endArrow;if(o){var s=[0,0],u=[0,0],l={dx:0,dy:0};t.beginPath();for(var c=0;c<o.length;c++){var f,h=o[c],p=h[0],d=(0===c&&i&&i.d?(f=e.getStartTangent(),l=k.getShortenOffset(f[0][0],f[0][1],f[1][0],f[1][1],i.d)):c===o.length-2&&"Z"===o[c+1][0]&&a&&a.d?"Z"===o[c+1][0]&&(f=e.getEndTangent(),l=k.getShortenOffset(f[0][0],f[0][1],f[1][0],f[1][1],a.d)):c===o.length-1&&a&&a.d&&"Z"!==o[0]&&(f=e.getEndTangent(),l=k.getShortenOffset(f[0][0],f[0][1],f[1][0],f[1][1],a.d)),l.dx),y=l.dy;switch(p){case"M":t.moveTo(h[1]-d,h[2]-y),u=[h[1],h[2]];break;case"L":t.lineTo(h[1]-d,h[2]-y);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-d,h[4]-y);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-d,h[6]-y);break;case"A":var g,v,m=void 0,b=(r?(m=r[c])||(m=E.default(s,h),r[c]=m):m=E.default(s,h),m.cx),w=m.cy,_=m.rx,x=m.ry,S=m.startAngle,O=m.endAngle,P=m.xRotation,m=m.sweepFlag;t.ellipse?t.ellipse(b,w,_,x,P,S,O,1-m):(g=x<_?_:x,v=x<_?1:_/x,x=x<_?x/_:1,t.translate(b,w),t.rotate(P),t.scale(v,x),t.arc(0,0,g,S,O,1-m),t.scale(1/v,1/x),t.rotate(-P),t.translate(-b,-w));break;case"Z":t.closePath()}s="Z"===p?u:[h[(p=h.length)-2],h[p-1]]}}},t.refreshElement=function(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged"))||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw()))},t.getRefreshRegion=i,t.getMergedRegion=function(e){var t,n,r,o;return e.length?(t=[],n=[],r=[],o=[],a.each(e,function(e){e=i(e);e&&(t.push(e.minX),n.push(e.minY),r.push(e.maxX),o.push(e.maxY))}),{minX:a.min(t),minY:a.min(n),maxX:a.max(r),maxY:a.max(o)}):null},t.mergeView=function(e,t){return e&&t&&u.intersectRect(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}},97193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShape=void 0;var i=n(6992);function f(e,t,n){var r,e=e.getTotalMatrix();return e?(r=[t,n,1],[(e=e?(e=i.invert(e),i.multiplyVec2(e,r)):r)[0],e[1]]):[t,n]}function h(e,t,n){if(e.isCanvas&&e.isCanvas())return 1;if(i.isAllowCapture(e)&&!1!==e.cfg.isInView){if(e.cfg.clipShape){var r=f(e,t,n),o=r[0],r=r[1];if(e.isClipped(o,r))return}o=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=o.minX&&t<=o.maxX&&n>=o.minY&&n<=o.maxY}}t.getShape=function e(t,n,r){if(!h(t,n,r))return null;for(var o=null,i=t.getChildren(),a=i.length-1;0<=a;a--){var s,u,l,c=i[a];if(c.isGroup()?o=e(c,n,r):h(c,n,r)&&(u=(l=f(s=c,n,r))[0],l=l[1],s.isInShape(u,l))&&(o=c),o)break}return o}},95474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6992);t.default=function(e,t,n){var r=o.getOffScreenContext();return e.createPath(r),r.isPointInPath(t,n)}},96021:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function f(e){return Math.abs(e)<1e-6?0:e<0?-1:1}t.default=function(e,t,n){var r=!1,o=e.length;if(o<=2)return!1;for(var i,a,s,u=0;u<o;u++){var l=e[u],c=e[(u+1)%o];if(a=c,((s=[t,n])[0]-(i=l)[0])*(a[1]-i[1])==(a[0]-i[0])*(s[1]-i[1])&&Math.min(i[0],a[0])<=s[0]&&s[0]<=Math.max(i[0],a[0])&&Math.min(i[1],a[1])<=s[1]&&s[1]<=Math.max(i[1],a[1]))return!0;0<f(l[1]-n)!=0<f(c[1]-n)&&f(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}},30859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(96342);t.default=function(e,t,n,r,o,i,a,s){var u=(Math.atan2(s-t,a-e)+2*Math.PI)%(2*Math.PI);return!(u<r||o<u)&&(r={x:e+n*Math.cos(u),y:t+n*Math.sin(u)},l.distance(r.x,r.y,a,s)<=i/2)}},20187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=n(28524);t.default=function(e,t,n,r,o,i,a){var s=Math.min(e,n),u=Math.max(e,n),l=Math.min(t,r),c=Math.max(t,r),f=o/2;return s-f<=i&&i<=u+f&&l-f<=a&&a<=c+f&&h.Line.pointToLine(e,t,n,r,i,a)<=o/2}},99534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=n(20187);t.default=function(e,t,n,r,o){var i=e.length;if(!(i<2)){for(var a=0;a<i-1;a++){var s=e[a][0],u=e[a][1],l=e[a+1][0],c=e[a+1][1];if(h.default(s,u,l,c,t,n,r))return!0}if(o){var o=e[0],f=e[i-1];if(h.default(o[0],o[1],f[0],f[1],t,n,r))return!0}}return!1}},73742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(20187),l=n(30859);t.default=function(e,t,n,r,o,i,a,s){return u.default(e+o,t,e+n-o,t,i,a,s)||u.default(e+n,t+o,e+n,t+r-o,i,a,s)||u.default(e+n-o,t+r,e+o,t+r,i,a,s)||u.default(e,t+r-o,e,t+o,i,a,s)||l.default(e+n-o,t+o,o,1.5*Math.PI,2*Math.PI,i,a,s)||l.default(e+n-o,t+r-o,o,0,.5*Math.PI,i,a,s)||l.default(e+o,t+r-o,o,.5*Math.PI,Math.PI,i,a,s)||l.default(e+o,t+o,o,Math.PI,1.5*Math.PI,i,a,s)}},56270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(96342);t.default=function(e,t,n,r,o,i,a){var s=o/2;return u.inBox(e-s,t-s,n,o,i,a)||u.inBox(e+n-s,t-s,o,r,i,a)||u.inBox(e+s,t+r-s,n,o,i,a)||u.inBox(e-s,t+s,o,r,i,a)}},23645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRadius=t.parseStyle=t.parsePattern=t.parseRadialGradient=t.parseLineGradient=void 0;var i=n(96342),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,l=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function f(e,t){e=e.match(c);i.each(e,function(e){e=e.split(":");t.addColorStop(e[0],e[1])})}function o(e,t,n){var r,n=s.exec(n),o=parseFloat(n[1])%360*(Math.PI/180),n=n[2],t=t.getBBox(),t=0<=o&&o<.5*Math.PI?(r={x:t.minX,y:t.minY},{x:t.maxX,y:t.maxY}):.5*Math.PI<=o&&o<Math.PI?(r={x:t.maxX,y:t.minY},{x:t.minX,y:t.maxY}):Math.PI<=o&&o<1.5*Math.PI?(r={x:t.maxX,y:t.maxY},{x:t.minX,y:t.minY}):(r={x:t.minX,y:t.maxY},{x:t.maxX,y:t.minY}),o=Math.tan(o),i=o*o,a=(t.x-r.x+o*(t.y-r.y))/(1+i)+r.x,o=o*(t.x-r.x+o*(t.y-r.y))/(1+i)+r.y,t=e.createLinearGradient(r.x,r.y,a,o);return f(n,t),t}function a(e,t,n){var r,o,i,n=l.exec(n),a=parseFloat(n[1]),s=parseFloat(n[2]),u=parseFloat(n[3]),n=n[4];return 0===u?(r=n.match(c))[r.length-1].split(":")[1]:(t=(r=t.getBBox()).maxX-r.minX,o=r.maxY-r.minY,i=Math.sqrt(t*t+o*o)/2,f(n,n=e.createRadialGradient(r.minX+t*a,r.minY+o*s,0,r.minX+t/2,r.minY+o/2,u*i)),n)}function h(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,o,i=u.exec(n),a=i[1],i=i[2];function s(){r=e.createPattern(o,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return o=new Image,i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?s():(o.onload=s,o.src=o.src),r}t.parseLineGradient=o,t.parseRadialGradient=a,t.parsePattern=h,t.parseStyle=function(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(i.isString(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return o(e,t,n);if("r"===n[0])return a(e,t,n);if("p"===n[0])return h(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0},t.parseRadius=function(e){var t=0,n=0,r=0,o=0;return i.isArray(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,[t,n,r,o]}},28064:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=n(6992),x=n(28524),S=n(28524),i=n(43708),O=n(7157),P=n(96342),E=n(20187),k=n(30859),M=i.ext.transform;t.default=r.__assign({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var o=e[r][0];if("C"===o||"A"===o||"Q"===o){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],o=[],i=0;i<t;i++){var a=e[i],s=a[0];"M"===s?(o.length&&(r.push(o),o=[]),o.push([a[1],a[2]])):"Z"===s?o.length&&(n.push(o),o=[]):o.push([a[1],a[2]])}return 0<o.length&&r.push(o),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,o){for(var i=!1,a=t/2,s=0;s<e.length;s++){var u=e[s],l=u.currentPoint,c=u.params,f=u.prePoint,h=u.box;if(!h||P.inBox(h.x-a,h.y-a,h.width+t,h.height+t,n,r)){switch(u.command){case"L":case"Z":i=E.default(f[0],f[1],l[0],l[1],t,n,r);break;case"Q":i=x.Quad.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],n,r)<=t/2;break;case"C":i=S.Cubic.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,o)<=t/2;break;case"A":var p=u.arcParams,d=p.cx,y=p.cy,g=p.rx,v=p.ry,m=p.startAngle,b=p.endAngle,p=p.xRotation,w=[n,r,1],_=v<g?g:v,d=M(null,[["t",-d,-y],["r",-p],["s",1/(v<g?1:g/v),1/(v<g?v/g:1)]]);O.transformMat3(w,w,d),i=k.default(0,0,_,m,b,t,w[0],w[1])}if(i)break}}return i}},o.PathUtil)},96342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePoint=t.mergeRegion=t.intersectRect=t.inBox=t.distance=t.getPixelRatio=void 0,t.getPixelRatio=function(){return window?window.devicePixelRatio:1},t.distance=function(e,t,n,r){e-=n,n=t-r;return Math.sqrt(e*e+n*n)},t.inBox=function(e,t,n,r,o,i){return e<=o&&o<=e+n&&t<=i&&i<=t+r},t.intersectRect=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},t.mergeRegion=function(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t},t.isSamePoint=function(e,t){return e[0]===t[0]&&e[1]===t[1]};var r=n(31834);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return r.isNil}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return r.isString}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return r.isFunction}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return r.isArray}}),Object.defineProperty(t,"each",{enumerable:!0,get:function(){return r.each}}),Object.defineProperty(t,"toRadian",{enumerable:!0,get:function(){return r.toRadian}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return r.mod}}),Object.defineProperty(t,"isNumberEqual",{enumerable:!0,get:function(){return r.isNumberEqual}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return r.requestAnimationFrame}}),Object.defineProperty(t,"clearAnimationFrame",{enumerable:!0,get:function(){return r.clearAnimationFrame}})},92535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(32996),c=n(86408);function w(e,t,n,r,o,i){return n*Math.cos(o)*Math.cos(i)-r*Math.sin(o)*Math.sin(i)+e}function _(e,t,n,r,o,i){return n*Math.sin(o)*Math.cos(i)+r*Math.cos(o)*Math.sin(i)+t}function f(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function h(e,t,n){var r=Math.cos(n),n=Math.sin(n);return[e*r-t*n,e*n+t*r]}t.default={box:function(e,t,n,r,o,i,a){for(var s=Math.atan(-r/n*Math.tan(o)),u=1/0,l=-1/0,c=[i,a],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var h=s+f;i<a?i<h&&h<a&&c.push(h):a<h&&h<i&&c.push(h)}for(f=0;f<c.length;f++){var p=w(e,0,n,r,o,c[f]);p<u&&(u=p),l<p&&(l=p)}for(var d=Math.atan(r/(n*Math.tan(o))),y=1/0,g=-1/0,v=[i,a],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var m=d+f;i<a?i<m&&m<a&&v.push(m):a<m&&m<i&&v.push(m)}for(f=0;f<v.length;f++){var b=_(0,t,n,r,o,v[f]);b<y&&(y=b),g<b&&(g=b)}return{x:u,y:y,width:l-u,height:g-y}},length:function(e,t,n,r,o,i,a){},nearestPoint:function(e,t,n,r,o,i,a,s,u){var s=h(s-e,u-t,-o),u=s[0],s=s[1],u=c.default.nearestPoint(0,0,n,r,u,s),l=(s=u.x,l=u.y,(Math.atan2(l*n,s*r)+2*Math.PI)%(2*Math.PI)),s=(l<i?u=f(n,r,i):a<l&&(u=f(n,r,a)),h(u.x,u.y,o));return{x:s[0]+e,y:s[1]+t}},pointDistance:function(e,t,n,r,o,i,a,s,u){e=this.nearestPoint(e,t,n,r,s,u);return l.distance(e.x,e.y,s,u)},pointAt:function(e,t,n,r,o,i,a,s){a=(a-i)*s+i;return{x:w(e,0,n,r,o,a),y:_(0,t,n,r,o,a)}},tangentAngle:function(e,t,n,r,o,i,a,s){var u,a=(a-i)*s+i,s=(s=r,i=o,u=a,-1*n*Math.cos(i)*Math.sin(u)-s*Math.sin(i)*Math.cos(u)),o=(i=r,u=o,r=a,-1*n*Math.sin(u)*Math.sin(r)+i*Math.cos(u)*Math.cos(r));return l.piMod(Math.atan2(o,s))}}},23919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snapLength=t.nearestPoint=void 0;var m=n(32996);t.nearestPoint=function(e,t,n,r,o,i){for(var a,s=1/0,u=[n,r],l=20,c=1/(l=i&&200<i?i/10:l),f=c/10,h=0;h<=l;h++){var p=h*c,d=[o.apply(null,e.concat([p])),o.apply(null,t.concat([p]))];(v=m.distance(u[0],u[1],d[0],d[1]))<s&&(a=p,s=v)}if(0===a)return{x:e[0],y:t[0]};if(1===a)return{x:e[(n=e.length)-1],y:t[n-1]};for(s=1/0,h=0;h<32&&!(f<1e-4);h++){var y=a-f,g=a+f,v=(d=[o.apply(null,e.concat([y])),o.apply(null,t.concat([y]))],m.distance(u[0],u[1],d[0],d[1]));0<=y&&v<s?(a=y,s=v):(y=[o.apply(null,e.concat([g])),o.apply(null,t.concat([g]))],y=m.distance(u[0],u[1],y[0],y[1]),g<=1&&y<s?(a=g,s=y):f*=.5)}return{x:o.apply(null,e.concat([a])),y:o.apply(null,t.concat([a]))}},t.snapLength=function(e,t){for(var n=0,r=e.length,o=0;o<r;o++){var i=e[o],a=t[o],s=e[(o+1)%r],u=t[(o+1)%r];n+=m.distance(i,a,s,u)}return n/2}},84206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=n(32996),h=n(27989),f=n(23919);function d(e,t,n,r,o){var i=1-o;return i*i*i*e+3*t*o*i*i+3*n*o*o*i+r*o*o*o}function l(e,t,n,r,o){var i=1-o;return 3*(i*i*(t-e)+2*i*o*(n-t)+o*o*(r-n))}function y(e,t,n,r){var o,i,r=-3*e+9*t-9*n+3*r,n=6*e-12*t+6*n,t=3*t-3*e,e=[];return p.isNumberEqual(r,0)?p.isNumberEqual(n,0)||0<=(o=-t/n)&&o<=1&&e.push(o):p.isNumberEqual(t=n*n-4*r*t,0)?e.push(-n/(2*r)):0<t&&(i=(-n-(t=Math.sqrt(t)))/(2*r),0<=(o=(-n+t)/(2*r))&&o<=1&&e.push(o),0<=i)&&i<=1&&e.push(i),e}function c(e,t,n,r,o,i,a,s,u){var l=d(e,n,o,a,u),c=d(t,r,i,s,u),f=h.default.pointAt(e,t,n,r,u),n=h.default.pointAt(n,r,o,i,u),r=h.default.pointAt(o,i,a,s,u),o=h.default.pointAt(f.x,f.y,n.x,n.y,u),i=h.default.pointAt(n.x,n.y,r.x,r.y,u);return[[e,t,f.x,f.y,o.x,o.y,l,c],[l,c,i.x,i.y,r.x,r.y,a,s]]}t.default={extrema:y,box:function(e,t,n,r,o,i,a,s){for(var u=[e,a],l=[t,s],c=y(e,n,o,a),f=y(t,r,i,s),h=0;h<c.length;h++)u.push(d(e,n,o,a,c[h]));for(h=0;h<f.length;h++)l.push(d(t,r,i,s,f[h]));return p.getBBoxByArray(u,l)},length:function(e,t,n,r,o,i,a,s){return function e(t,n,r,o,i,a,s,u,l){return 0===l?f.snapLength([t,r,i,s],[n,o,a,u]):(n=(t=c(t,n,r,o,i,a,s,u,.5))[0],r=t[1],n.push(l-1),r.push(l-1),e.apply(null,n)+e.apply(null,r))}(e,t,n,r,o,i,a,s,3)},nearestPoint:function(e,t,n,r,o,i,a,s,u,l,c){return f.nearestPoint([e,n,o,a],[t,r,i,s],u,l,d,c)},pointDistance:function(e,t,n,r,o,i,a,s,u,l,c){e=this.nearestPoint(e,t,n,r,o,i,a,s,u,l,c);return p.distance(e.x,e.y,u,l)},interpolationAt:d,pointAt:function(e,t,n,r,o,i,a,s,u){return{x:d(e,n,o,a,u),y:d(t,r,i,s,u)}},divide:c,tangentAngle:function(e,t,n,r,o,i,a,s,u){e=l(e,n,o,a,u),n=l(t,r,i,s,u);return p.piMod(Math.atan2(n,e))}}},86408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(32996);function x(e,t){e=Math.abs(e);return 0<t?e:-1*e}t.default={box:function(e,t,n,r){return{x:e-n,y:t-r,width:2*n,height:2*r}},length:function(e,t,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(e,t,n,r,o,i){var a=n,s=r;if(0===a||0===s)return{x:e,y:t};for(var n=o-e,r=i-t,u=Math.abs(n),l=Math.abs(r),c=a*a,f=s*s,h=Math.PI/4,p=0;p<4;p++){var d=a*Math.cos(h),y=s*Math.sin(h),g=(c-f)*Math.pow(Math.cos(h),3)/a,v=(f-c)*Math.pow(Math.sin(h),3)/s,m=d-g,b=y-v,g=u-g,v=l-v,w=Math.hypot(b,m),_=Math.hypot(v,g);h+=w*Math.asin((m*v-b*g)/(w*_))/Math.sqrt(c+f-d*d-y*y),h=Math.min(Math.PI/2,Math.max(0,h))}return{x:e+x(d,n),y:t+x(y,r)}},pointDistance:function(e,t,n,r,o,i){e=this.nearestPoint(e,t,n,r,o,i);return a.distance(e.x,e.y,o,i)},pointAt:function(e,t,n,r,o){o=2*Math.PI*o;return{x:e+n*Math.cos(o),y:t+r*Math.sin(o)}},tangentAngle:function(e,t,n,r,o){o=2*Math.PI*o,r=Math.atan2(r*Math.cos(o),-n*Math.sin(o));return a.piMod(r)}}},28524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Polyline=t.Polygon=t.Line=t.Arc=t.Cubic=t.Quad=void 0;var r=n(21870),r=(t.Quad=r.default,n(84206)),r=(t.Cubic=r.default,n(92535)),r=(t.Arc=r.default,n(27989)),r=(t.Line=r.default,n(51871)),r=(t.Polygon=r.default,n(84881)),r=(t.Polyline=r.default,n(32996));t.Util=r},27989:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(32996),a=n(49679);t.default={box:function(e,t,n,r){return s.getBBoxByArray([e,n],[t,r])},length:function(e,t,n,r){return s.distance(e,t,n,r)},pointAt:function(e,t,n,r,o){return{x:(1-o)*e+o*n,y:(1-o)*t+o*r}},pointDistance:function(e,t,n,r,o,i){var a=(n-e)*(o-e)+(r-t)*(i-t);return a<0?s.distance(e,t,o,i):(n-e)*(n-e)+(r-t)*(r-t)<a?s.distance(n,r,o,i):this.pointToLine(e,t,n,r,o,i)},pointToLine:function(e,t,n,r,o,i){n=[n-e,r-t];return a.exactEquals(n,[0,0])?Math.sqrt((o-e)*(o-e)+(i-t)*(i-t)):(a.normalize(r=[-n[1],n[0]],r),Math.abs(a.dot([o-e,i-t],r)))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}}},51871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50118),o=n(84881);function i(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}t.default={box:function(e){return o.default.box(e)},length:function(e){return r.lengthOfSegment(i(e))},pointAt:function(e,t){return r.pointAtSegments(i(e),t)},pointDistance:function(e,t,n){return r.distanceAtSegment(i(e),t,n)},tangentAngle:function(e,t){return r.angleAtSegments(i(e),t)}}},84881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(50118),i=n(32996);t.default={box:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r];t.push(o[0]),n.push(o[1])}return i.getBBoxByArray(t,n)},length:function(e){return r.lengthOfSegment(e)},pointAt:function(e,t){return r.pointAtSegments(e,t)},pointDistance:function(e,t,n){return r.distanceAtSegment(e,t,n)},tangentAngle:function(e,t){return r.angleAtSegments(e,t)}}},21870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(27989),f=n(32996),u=n(23919);function h(e,t,n,r){var o=1-r;return o*o*e+2*r*o*t+r*r*n}function p(e,t,n){n=e+n-2*t;return f.isNumberEqual(n,0)?[.5]:(e=(e-t)/n)<=1&&0<=e?[e]:[]}function s(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function l(e,t,n,r,o,i,a){var s=h(e,n,o,a),u=h(t,r,i,a),l=c.default.pointAt(e,t,n,r,a),n=c.default.pointAt(n,r,o,i,a);return[[e,t,l.x,l.y,s,u],[s,u,n.x,n.y,o,i]]}t.default={box:function(e,t,n,r,o,i){var a=p(e,n,o)[0],s=p(t,r,i)[0],u=[e,o],l=[t,i];return void 0!==a&&u.push(h(e,n,o,a)),void 0!==s&&l.push(h(t,r,i,s)),f.getBBoxByArray(u,l)},length:function(e,t,n,r,o,i){return function e(t,n,r,o,i,a,s){return 0===s?(f.distance(t,n,r,o)+f.distance(r,o,i,a)+f.distance(t,n,i,a))/2:(n=(t=l(t,n,r,o,i,a,.5))[0],r=t[1],n.push(s-1),r.push(s-1),e.apply(null,n)+e.apply(null,r))}(e,t,n,r,o,i,3)},nearestPoint:function(e,t,n,r,o,i,a,s){return u.nearestPoint([e,n,o],[t,r,i],a,s,h)},pointDistance:function(e,t,n,r,o,i,a,s){e=this.nearestPoint(e,t,n,r,o,i,a,s);return f.distance(e.x,e.y,a,s)},interpolationAt:h,pointAt:function(e,t,n,r,o,i,a){return{x:h(e,n,o,a),y:h(t,r,i,a)}},divide:l,tangentAngle:function(e,t,n,r,o,i,a){e=s(e,n,o,a),n=s(t,r,i,a),o=Math.atan2(n,e);return f.piMod(o)}}},50118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distanceAtSegment=t.angleAtSegments=t.pointAtSegments=t.lengthOfSegment=void 0;var f=n(27989),s=n(32996);function h(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var o=e[r],i=e[r+1],a=s.distance(o[0],o[1],i[0],i[1]);n.push({from:o,to:i,length:a}),t+=a}return{segments:n,totalLength:t}}t.lengthOfSegment=function(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];t+=s.distance(r[0],r[1],o[0],o[1])}return t},t.pointAtSegments=function(e,t){if(1<t||t<0||e.length<2)return null;var n=h(e),r=n.segments,o=n.totalLength;if(0===o)return{x:e[0][0],y:e[0][1]};for(var i=0,a=null,s=0;s<r.length;s++){var u=r[s],l=u.from,c=u.to,u=u.length/o;if(i<=t&&t<=i+u){a=f.default.pointAt(l[0],l[1],c[0],c[1],(t-i)/u);break}i+=u}return a},t.angleAtSegments=function(e,t){if(1<t||t<0||e.length<2)return 0;for(var e=h(e),n=e.segments,r=e.totalLength,o=0,i=0,a=0;a<n.length;a++){var s=n[a],u=s.from,l=s.to,s=s.length/r;if(o<=t&&t<=o+s){i=Math.atan2(l[1]-u[1],l[0]-u[0]);break}o+=s}return i},t.distanceAtSegment=function(e,t,n){for(var r=1/0,o=0;o<e.length-1;o++){var i=e[o],a=e[o+1],i=f.default.pointDistance(i[0],i[1],a[0],a[1],t,n);i<r&&(r=i)}return r}},32996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.piMod=t.getBBoxRange=t.getBBoxByArray=t.isNumberEqual=t.distance=void 0;var o=n(31834);t.distance=function(e,t,n,r){e-=n,n=t-r;return Math.sqrt(e*e+n*n)},t.isNumberEqual=function(e,t){return Math.abs(e-t)<.001},t.getBBoxByArray=function(e,t){var n=o.min(e),r=o.min(t);return{x:n,y:r,width:o.max(e)-n,height:o.max(t)-r}},t.getBBoxRange=function(e,t,n,r){return{minX:o.min([e,n]),maxX:o.max([e,n]),minY:o.min([t,r]),maxY:o.max([t,r])}},t.piMod=function(e){return(e+2*Math.PI)%(2*Math.PI)}},60415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(6992),a=n(7883),s=n(2480),u=n(41289),l=n(113),c=n(89338),f=n(58281),h=n(95259),n=(r=i.AbstractCanvas,o.__extends(p,r),p.prototype.getShapeBase=function(){return c},p.prototype.getGroupBase=function(){return f.default},p.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!a.SHAPE_TO_TAGS[r.tagName]){for(var o=r.parentNode;o&&!a.SHAPE_TO_TAGS[o.tagName];)o=o.parentNode;r=o}return this.find(function(e){return e.get("el")===r})},p.prototype.createDom=function(){var e=l.createSVGElement("svg"),t=new h.default(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},p.prototype.onCanvasChange=function(e){var n,t,r=this.get("context"),o=this.get("el");"sort"===e?(n=this.get("children"))&&n.length&&l.sortDom(this,function(e,t){return n.indexOf(e)-n.indexOf(t)?1:0}):"clear"===e?o&&(o.innerHTML="",(t=r.el).innerHTML="",o.appendChild(t)):"matrix"===e?u.setTransform(this):"clip"===e?u.setClip(this,r):"changeSize"===e&&(o.setAttribute("width",""+this.get("width")),o.setAttribute("height",""+this.get("height")))},p.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();u.setClip(this,e),t.length&&s.drawChildren(e,t)},p);function p(e){return r.call(this,o.__assign(o.__assign({},e),{autoDraw:!0,renderer:"svg"}))||this}t.default=n},7883:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=t.SVG_ATTR_MAP=t.SHAPE_TO_TAGS=void 0,t.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},t.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},t.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},88603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(31834),a=n(113);function r(e,t){this.cfg={};var n=a.createSVGElement("marker"),r=i.uniqueId("marker_"),o=(n.setAttribute("id",r),a.createSVGElement("path")),n=(o.setAttribute("stroke",e.stroke||"none"),o.setAttribute("fill",e.fill||"none"),n.appendChild(o),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=o,this.id=r,e["marker-start"===t?"startArrow":"endArrow"]);return this.stroke=e.stroke||"#000",!0===n?this._setDefaultPath(t,o):(this.cfg=n,this._setMarker(e.lineWidth,o)),this}r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},r.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,o=this.cfg.d;i.isArray(r)&&(r=r.map(function(e){return e.join(" ")}).join("")),t.setAttribute("d",r),n.appendChild(t),o&&n.setAttribute("refX",""+o/e)},r.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},t.default=r},34326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31834),o=n(113);function i(e){this.type="clip",this.cfg={};var t=o.createSVGElement("clipPath"),n=(this.el=t,this.id=r.uniqueId("clip_"),t.id=this.id,e.cfg.el);return t.appendChild(n),this.cfg=e,this}i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},t.default=i},52473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(31834),f=n(113),h=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,p=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,r=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function d(e){var t,e=e.match(r);return e?(t="",e.sort(function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])}),c.each(e,function(e){e=e.split(":"),t+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'}),t):""}function o(e){this.cfg={};var t,n,r,o,i,a,s,u=null,l=c.uniqueId("gradient_");return"l"===e.toLowerCase()[0]?(t=e,n=u=f.createSVGElement("linearGradient"),t=h.exec(t),o=c.mod(c.toRadian(parseFloat(t[1])),2*Math.PI),t=t[2],i=0<=o&&o<.5*Math.PI?(r={x:0,y:0},{x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(r={x:1,y:0},{x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(r={x:1,y:1},{x:0,y:0}):(r={x:0,y:1},{x:1,y:0}),o=Math.tan(o),a=o*o,s=(i.x-r.x+o*(i.y-r.y))/(1+a)+r.x,o=o*(i.x-r.x+o*(i.y-r.y))/(1+a)+r.y,n.setAttribute("x1",r.x),n.setAttribute("y1",r.y),n.setAttribute("x2",s),n.setAttribute("y2",o),n.innerHTML=d(t)):(i=u=f.createSVGElement("radialGradient"),a=p.exec(e),r=parseFloat(a[1]),s=parseFloat(a[2]),o=parseFloat(a[3]),n=a[4],i.setAttribute("cx",r),i.setAttribute("cy",s),i.setAttribute("r",o),i.innerHTML=d(n)),u.setAttribute("id",l),this.el=u,this.id=l,this.cfg=e,this}o.prototype.match=function(e,t){return this.cfg===t},t.default=o},95259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31834),o=n(52473),i=n(91526),a=n(88603),s=n(34326),u=n(55909),l=n(113);function c(e){var t=l.createSVGElement("defs"),n=r.uniqueId("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}c.prototype.find=function(e,t){for(var n=this.children,r=null,o=0;o<n.length;o++)if(n[o].match(e,t)){r=n[o].id;break}return r},c.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},c.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},c.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;return(this.defaultArrow[n]||(e=new a.default(e,t),this.defaultArrow[n]=e,this.el.appendChild(e.el),this.add(e),e)).id},c.prototype.addGradient=function(e){e=new o.default(e);return this.el.appendChild(e.el),this.add(e),e.id},c.prototype.addArrow=function(e,t){e=new a.default(e,t);return this.el.appendChild(e.el),this.add(e),e.id},c.prototype.addShadow=function(e){e=new i.default(e);return this.el.appendChild(e.el),this.add(e),e.id},c.prototype.addPattern=function(e){e=new u.default(e);return this.el.appendChild(e.el),this.add(e),e.id},c.prototype.addClip=function(e){e=new s.default(e);return this.el.appendChild(e.el),this.add(e),e.id},t.default=c},55909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(31834),s=n(113),u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;function r(e){this.cfg={};var t=s.createSVGElement("pattern"),n=(t.setAttribute("patternUnits","userSpaceOnUse"),s.createSVGElement("image")),r=(t.appendChild(n),a.uniqueId("pattern_")),r=(t.id=r,this.el=t,this.id=r,this.cfg=e,u.exec(e)[2]),o=(n.setAttribute("href",r),new Image);function i(){t.setAttribute("width",""+o.width),t.setAttribute("height",""+o.height)}return r.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=r,o.complete?i():(o.onload=i,o.src=o.src),this}r.prototype.match=function(e,t){return this.cfg===t},t.default=r},91526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31834),r=n(113),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"};function s(e){this.type="filter",this.cfg={},this.type="filter";var n=r.createSVGElement("filter");return o.each(a,function(e,t){n.setAttribute(t,e)}),this.el=n,this.id=o.uniqueId("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,n),this}s.prototype.match=function(e,t){var n,r;return this.type===e&&(n=!0,r=this.cfg,o.each(Object.keys(r),function(e){if(r[e]!==t[e])return n=!1}),n)},s.prototype.update=function(e,t){var n=this.cfg;return n[i[e]]=t,this._parseShadow(n,this.el),this},s.prototype._parseShadow=function(e,t){e='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color||"#000")+'"\n      flood-opacity="'+(e.opacity||1)+'"\n      />';t.innerHTML=e},t.default=s},58281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(6992),a=n(31834),s=n(89338),u=n(2480),l=n(41289),c=n(7883),f=n(113),n=(r=i.AbstractGroup,o.__extends(h,r),h.prototype.isEntityGroup=function(){return!0},h.prototype.createDom=function(){var e,t=f.createSVGElement("g"),n=(this.set("el",t),this.getParent());return n&&((e=n.get("el"))||(e=n.createDom(),n.set("el",e)),e.appendChild(t)),t},h.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var t=this.get("canvas");t&&t.get("autoDraw")&&(t=t.get("context"),this.createPath(t,e))},h.prototype.onCanvasChange=function(e){u.refreshElement(this,e)},h.prototype.getShapeBase=function(){return s},h.prototype.getGroupBase=function(){return h},h.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),l.setClip(this,e),this.createPath(e),t.length&&u.drawChildren(e,t))},h.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");a.each(t||n,function(e,t){c.SVG_ATTR_MAP[t]&&r.setAttribute(c.SVG_ATTR_MAP[t],e)}),l.setTransform(this)},h);function h(){return null!==r&&r.apply(this,arguments)||this}t.default=n},32227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.Shape=void 0;var r=n(97582),o=n(89338),i=(t.Shape=o,r.__exportStar(n(6992),t),n(60415)),a=(Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return i.default}}),n(58281));Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.default}}),t.version="0.5.6"},55595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(6992),a=n(41289),s=n(113),u=n(2480),f=n(7883),l=n(89338),c=n(58281),h=n(6992),n=(r=i.AbstractShape,o.__extends(p,r),p.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},p.prototype.afterAttrsChange=function(e){r.prototype.afterAttrsChange.call(this,e);var t=this.get("canvas");t&&t.get("autoDraw")&&(t=t.get("context"),this.draw(t,e))},p.prototype.getShapeBase=function(){return l},p.prototype.getGroupBase=function(){return c.default},p.prototype.onCanvasChange=function(e){u.refreshElement(this,e)},p.prototype.calculateBBox=function(){var e,t,n,r,o,i,a=this.get("el"),s=null;return a?s=a.getBBox():(a=h.getBBoxMethod(this.get("type")))&&(s=a(this)),s?(a=s.x,e=s.y,t=s.width,s=s.height,{x:o=a-(r=(n=this.getHitLineWidth())/2),y:i=e-r,minX:o,minY:i,maxX:a+t+r,maxY:e+s+r,width:t+n,height:s+n}):{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},p.prototype.isFill=function(){var e=this.attr(),t=e.fill,e=e.fillStyle;return(t||e||this.isClipShape())&&this.canFill},p.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,e=e.strokeStyle;return(t||e)&&this.canStroke},p.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||s.createDom(this),a.setClip(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},p.prototype.createPath=function(e,t){},p.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,o=n.fillStyle,i=n.stroke,a=n.strokeStyle,s=n.fillOpacity,u=n.strokeOpacity,l=n.lineWidth,c=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",o):this._setColor(e,"fill",r||o),s)&&c.setAttribute(f.SVG_ATTR_MAP.fillOpacity,s),this.canStroke&&0<l&&(t?"stroke"in n?this._setColor(e,"stroke",i):"strokeStyle"in n&&this._setColor(e,"stroke",a):this._setColor(e,"stroke",i||a),u&&c.setAttribute(f.SVG_ATTR_MAP.strokeOpacity,u),l)&&c.setAttribute(f.SVG_ATTR_MAP.lineWidth,l)},p.prototype._setColor=function(e,t,n){var r,o=this.get("el");n?(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)?(r=(r=e.find("gradient",n))||e.addGradient(n),o.setAttribute(f.SVG_ATTR_MAP[t],"url(#"+r+")")):/^[p,P]{1}[\s]*\(/.test(n)?(r=(r=e.find("pattern",n))||e.addPattern(n),o.setAttribute(f.SVG_ATTR_MAP[t],"url(#"+r+")")):o.setAttribute(f.SVG_ATTR_MAP[t],n)):o.setAttribute(f.SVG_ATTR_MAP[t],"none")},p.prototype.shadow=function(e,t){var n=this.attr(),t=t||n,n=t.shadowOffsetX,r=t.shadowOffsetY,o=t.shadowBlur,t=t.shadowColor;(n||r||o||t)&&a.setShadow(this,e)},p.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&a.setTransform(this)},p.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},p.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),e=e+r.left,t=t+r.top,r=document.elementFromPoint(e,t);return!(!r||!r.isEqualNode(n))},p.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,e=e.lineAppendWidth;return this.isStroke()?t+e:0},p);function p(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}t.default=n},29519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(7883),n=(r=n(55595).default,o.__extends(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,r:0})},s.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");i.each(t||n,function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):a.SVG_ATTR_MAP[t]&&r.setAttribute(a.SVG_ATTR_MAP[t],e)})},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}t.default=n},56823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),a=n(31834),s=n(7883),n=(r=n(55595).default,o.__extends(i,r),i.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(a.each(t||n,function(e,t){s.SVG_ATTR_MAP[t]&&r.setAttribute(s.SVG_ATTR_MAP[t],e)}),"function"==typeof n.html){t=n.html.call(this,n);if(t instanceof Element||t instanceof HTMLDocument){for(var o=r.childNodes,i=o.length-1;0<=i;i--)r.removeChild(o[i]);r.appendChild(t)}else r.innerHTML=t}else r.innerHTML=n.html},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}t.default=n},48768:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(7883),n=(r=n(55595).default,o.__extends(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,rx:0,ry:0})},s.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");i.each(t||n,function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):a.SVG_ATTR_MAP[t]&&r.setAttribute(a.SVG_ATTR_MAP[t],e)})},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}t.default=n},80237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(7883),n=(r=n(55595).default,o.__extends(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,width:0,height:0})},s.prototype.createPath=function(e,t){var n=this,r=this.attr(),o=this.get("el");i.each(t||r,function(e,t){"img"===t?n._setImage(r.img):a.SVG_ATTR_MAP[t]&&o.setAttribute(a.SVG_ATTR_MAP[t],e)})},s.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},s.prototype._setImage=function(e){var t,n=this.attr(),r=this.get("el");i.isString(e)?r.setAttribute("href",e):e instanceof window.Image?(n.width||(r.setAttribute("width",e.width),this.attr("width",e.width)),n.height||(r.setAttribute("height",e.height),this.attr("height",e.height)),r.setAttribute("href",e.src)):e instanceof HTMLElement&&i.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()?r.setAttribute("href",e.toDataURL()):e instanceof ImageData&&((t=document.createElement("canvas")).setAttribute("width",""+e.width),t.setAttribute("height",""+e.height),t.getContext("2d").putImageData(e,0,0),n.width||(r.setAttribute("width",""+e.width),this.attr("width",e.width)),n.height||(r.setAttribute("height",""+e.height),this.attr("height",e.height)),r.setAttribute("href",t.toDataURL()))},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}t.default=n},89338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55595),o=(Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return r.default}}),n(29519)),i=(Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return o.default}}),n(56823)),a=(Object.defineProperty(t,"Dom",{enumerable:!0,get:function(){return i.default}}),n(48768)),s=(Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return a.default}}),n(80237)),u=(Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return s.default}}),n(10280)),l=(Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return u.default}}),n(71224)),c=(Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return l.default}}),n(23591)),f=(Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return c.default}}),n(89847)),h=(Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return f.default}}),n(5784)),p=(Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return h.default}}),n(31295)),d=(Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return p.default}}),n(11034));Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return d.default}})},10280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(28524),a=n(31834),s=n(7883),n=(r=n(55595).default,o.__extends(u,r),u.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},u.prototype.createPath=function(r,e){var o=this.attr(),i=this.get("el");a.each(e||o,function(e,t){var n;"startArrow"===t||"endArrow"===t?e?(n=a.isObject(e)?r.addArrow(o,s.SVG_ATTR_MAP[t]):r.getDefaultArrow(o,s.SVG_ATTR_MAP[t]),i.setAttribute(s.SVG_ATTR_MAP[t],"url(#"+n+")")):i.removeAttribute(s.SVG_ATTR_MAP[t]):s.SVG_ATTR_MAP[t]&&i.setAttribute(s.SVG_ATTR_MAP[t],e)})},u.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,e=e.y2;return i.Line.length(t,n,r,e)},u.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,o=t.x2,t=t.y2;return i.Line.pointAt(n,r,o,t,e)},u);function u(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}t.default=n},71224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(55595),s=n(96840),n=(r=a.default,o.__extends(u,r),u.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},u.prototype._assembleMarker=function(){var e=this._getPath();return i.isArray(e)?e.map(function(e){return e.join(" ")}).join(""):e},u.prototype._getPath=function(){var e=this.attr(),t=e.x,n=e.y,r=e.r||e.radius,e=e.symbol||"circle";return(e=i.isFunction(e)?e:s.default.get(e))?e(t,n,r):(console.warn(e+" symbol is not exist."),null)},u.symbolsFactory=s.default,u);function u(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}t.default=n},96840:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}};t.default={get:function(e){return n[e]},register:function(e,t){n[e]=t},remove:function(e){delete n[e]},getAll:function(){return n}}},23591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),s=n(31834),u=n(7883),n=(r=n(55595).default,o.__extends(i,r),i.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{startArrow:!1,endArrow:!1})},i.prototype.createPath=function(r,e){var o=this,i=this.attr(),a=this.get("el");s.each(e||i,function(e,t){var n;"path"===t&&s.isArray(e)?a.setAttribute("d",o._formatPath(e)):"startArrow"===t||"endArrow"===t?e?(n=s.isObject(e)?r.addArrow(i,u.SVG_ATTR_MAP[t]):r.getDefaultArrow(i,u.SVG_ATTR_MAP[t]),a.setAttribute(u.SVG_ATTR_MAP[t],"url(#"+n+")")):a.removeAttribute(u.SVG_ATTR_MAP[t]):u.SVG_ATTR_MAP[t]&&a.setAttribute(u.SVG_ATTR_MAP[t],e)})},i.prototype._formatPath=function(e){e=e.map(function(e){return e.join(" ")}).join("");return~e.indexOf("NaN")?"":e},i.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},i.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();return 0!==n&&(t=t?t.getPointAtLength(e*n):null)?{x:t.x,y:t.y}:null},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}t.default=n},89847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(7883),n=(r=n(55595).default,o.__extends(s,r),s.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");i.each(t||n,function(e,t){"points"===t&&i.isArray(e)&&2<=e.length?r.setAttribute("points",e.map(function(e){return e[0]+","+e[1]}).join(" ")):a.SVG_ATTR_MAP[t]&&r.setAttribute(a.SVG_ATTR_MAP[t],e)})},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}t.default=n},5784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(28524),u=n(28524),l=n(31834),a=n(7883),n=(r=n(55595).default,o.__extends(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{startArrow:!1,endArrow:!1})},s.prototype.onAttrChange=function(e,t,n){r.prototype.onAttrChange.call(this,e,t,n),-1!==["points"].indexOf(e)&&this._resetCache()},s.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},s.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");l.each(t||n,function(e,t){"points"===t&&l.isArray(e)&&2<=e.length?r.setAttribute("points",e.map(function(e){return e[0]+","+e[1]}).join(" ")):a.SVG_ATTR_MAP[t]&&r.setAttribute(a.SVG_ATTR_MAP[t],e)})},s.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return l.isNil(t)?(this.set("totalLength",i.Polyline.length(e)),this.get("totalLength")):t},s.prototype.getPoint=function(n){var r,o,e=this.attr().points,t=this.get("tCache");return t||(this._setTcache(),t=this.get("tCache")),l.each(t,function(e,t){n>=e[0]&&n<=e[1]&&(r=(n-e[0])/(e[1]-e[0]),o=t)}),u.Line.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],r)},s.prototype._setTcache=function(){var n,r,o,i,a,s=this.attr().points;!s||0===s.length||(n=this.getTotalLength())<=0||(i=0,a=[],l.each(s,function(e,t){s[t+1]&&((r=[])[0]=i/n,o=u.Line.length(e[0],e[1],s[t+1][0],s[t+1][1]),i+=o,r[1]=i/n,a.push(r))}),this.set("tCache",a))},s.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},s.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}t.default=n},31295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),s=n(31834),i=n(55595),u=n(7883),a=n(57876),n=(r=i.default,o.__extends(l,r),l.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,width:0,height:0,radius:0})},l.prototype.createPath=function(e,t){var n=this,r=this.attr(),o=this.get("el"),i=!1,a=["x","y","width","height","radius"];s.each(t||r,function(e,t){-1===a.indexOf(t)||i?-1===a.indexOf(t)&&u.SVG_ATTR_MAP[t]&&o.setAttribute(u.SVG_ATTR_MAP[t],e):(o.setAttribute("d",n._assembleRect(r)),i=!0)})},l.prototype._assembleRect=function(e){var t,n=e.x,r=e.y,o=e.width,i=e.height,e=e.radius;return e?(t=a.parseRadius(e),s.isArray(e)?1===e.length?t.r1=t.r2=t.r3=t.r4=e[0]:2===e.length?(t.r1=t.r3=e[0],t.r2=t.r4=e[1]):3===e.length?(t.r1=e[0],t.r2=t.r4=e[1],t.r3=e[2]):(t.r1=e[0],t.r2=e[1],t.r3=e[2],t.r4=e[3]):t.r1=t.r2=t.r3=t.r4=e,[["M "+(n+t.r1)+","+r],["l "+(o-t.r1-t.r2)+",0"],["a "+t.r2+","+t.r2+",0,0,1,"+t.r2+","+t.r2],["l 0,"+(i-t.r2-t.r3)],["a "+t.r3+","+t.r3+",0,0,1,"+-t.r3+","+t.r3],["l "+(t.r3+t.r4-o)+",0"],["a "+t.r4+","+t.r4+",0,0,1,"+-t.r4+","+-t.r4],["l 0,"+(t.r4+t.r1-i)],["a "+t.r1+","+t.r1+",0,0,1,"+t.r1+","+-t.r1],["z"]].join(" ")):"M "+n+","+r+" l "+o+",0 l 0,"+i+" l"+-o+" 0 z"},l);function l(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}t.default=n},11034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),s=n(31834),i=n(81758),a=n(41289),u=n(7883),l={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},c={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},f={left:"left",start:"left",center:"middle",right:"end",end:"end"},n=(r=n(55595).default,o.__extends(h,r),h.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return o.__assign(o.__assign({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},h.prototype.createPath=function(e,t){var n=this,r=this.attr(),o=this.get("el");this._setFont(),s.each(t||r,function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?a.setTransform(n):u.SVG_ATTR_MAP[t]&&o.setAttribute(u.SVG_ATTR_MAP[t],e)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},h.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,t=t.textAlign,r=i.detect();r&&"firefox"===r.name?e.setAttribute("dominant-baseline",c[n]||"alphabetic"):e.setAttribute("alignment-baseline",l[n]||"baseline"),e.setAttribute("text-anchor",f[t]||"left")},h.prototype._setText=function(e){var n,r,t=this.get("el"),o=this.attr(),i=o.x,o=o.textBaseline,a=void 0===o?"bottom":o;e?~e.indexOf("\n")?(o=e.split("\n"),n=o.length-1,r="",s.each(o,function(e,t){0===t?"alphabetic"===a?r+='<tspan x="'+i+'" dy="'+-n+'em">'+e+"</tspan>":"top"===a?r+='<tspan x="'+i+'" dy="0.9em">'+e+"</tspan>":"middle"===a?r+='<tspan x="'+i+'" dy="'+-(n-1)/2+'em">'+e+"</tspan>":"bottom"===a?r+='<tspan x="'+i+'" dy="-'+(.3+n)+'em">'+e+"</tspan>":"hanging"===a&&(r+='<tspan x="'+i+'" dy="'+(-(n-1)-.3)+'em">'+e+"</tspan>"):r+='<tspan x="'+i+'" dy="1em">'+e+"</tspan>"}),t.innerHTML=r):t.innerHTML=e:t.innerHTML=""},h);function h(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}t.default=n},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveTo=t.sortDom=t.createDom=t.createSVGElement=void 0;var r=n(31834),o=n(7883);function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}t.createSVGElement=i,t.createDom=function(e){var t,n=o.SHAPE_TO_TAGS[e.type],r=e.getParent();if(n)return n=i(n),e.get("id")&&(n.id=e.get("id")),e.set("el",n),e.set("attrs",{}),r&&((t=r.get("el"))||(t=r.createDom(),r.set("el",t)),t.appendChild(n)),n;throw new Error("the type "+e.type+" is not supported by svg")},t.sortDom=function(e,t){var e=e.get("el"),t=r.toArray(e.children).sort(t),n=document.createDocumentFragment();t.forEach(function(e){n.appendChild(e)}),e.appendChild(n)},t.moveTo=function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter(function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()}),o=r[t],i=r.indexOf(e);o?t<i?n.insertBefore(e,o):i<t&&((o=r[t+1])?n.insertBefore(e,o):n.appendChild(e)):n.appendChild(e)}},2480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshElement=t.drawChildren=void 0;var u=n(41289),l=n(113);t.drawChildren=function(t,e){e.forEach(function(e){e.draw(t)})},t.refreshElement=function(e,t){var n,r,o,i,a,s=e.get("canvas");s&&s.get("autoDraw")&&(n=s.get("context"),r=(r=e.getParent())?r.getChildren():[s],s=e.get("el"),"remove"===t?e.get("isClipShape")?(i=(o=s&&s.parentNode)&&o.parentNode,o&&i&&i.removeChild(o)):s&&s.parentNode&&s.parentNode.removeChild(s):"show"===t?s.setAttribute("visibility","visible"):"hide"===t?s.setAttribute("visibility","hidden"):"zIndex"===t?l.moveTo(s,r.indexOf(e)):"sort"===t?(a=e.get("children"))&&a.length&&l.sortDom(e,function(e,t){return a.indexOf(e)-a.indexOf(t)?1:0}):"clear"===t?s&&(s.innerHTML=""):"matrix"===t?u.setTransform(e):"clip"===t?u.setClip(e,n):"attr"!==t&&"add"===t&&e.draw(n))}},57876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePath=t.parseRadius=void 0;var i=n(31834),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s,]+/gi;t.parseRadius=function(e){var t=0,n=0,r=0,o=0;return i.isArray(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,{r1:t,r2:n,r3:r,r4:o}},t.parsePath=function(r){return r=r||[],i.isArray(r)?r:i.isString(r)?(r=r.match(o),i.each(r,function(n,e){var t;1<(n=n.match(a))[0].length&&(t=n[0].charAt(0),n.splice(1,0,n[0].substr(1)),n[0]=t),i.each(n,function(e,t){isNaN(e)||(n[t]=+e)}),r[e]=n}),r):void 0}},41289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setClip=t.setTransform=t.setShadow=void 0;var r=n(113);t.setShadow=function(e,t){var n,r=e.cfg.el,e=e.attr(),e={dx:e.shadowOffsetX,dy:e.shadowOffsetY,blur:e.shadowBlur,color:e.shadowColor};e.dx||e.dy||e.blur||e.color?(n=(n=t.find("filter",e))||t.addShadow(e),r.setAttribute("filter","url(#"+n+")")):r.removeAttribute("filter")},t.setTransform=function(e){var t=e.attr().matrix;if(t){for(var e=e.cfg.el,n=[],r=0;r<9;r+=3)n.push(t[r]+","+t[r+1]);-1===(n=n.join(",")).indexOf("NaN")?e.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",t)}},t.setClip=function(e,t){var n=e.getClip(),e=e.get("el");n?e.hasAttribute("clip-path")||(r.createDom(n),n.createPath(t),t=t.addClip(n),e.setAttribute("clip-path","url(#"+t+")")):e.removeAttribute("clip-path")}},52386:function(e,t,n){"use strict";var r,o=n(28860),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentManager=t.Component=void 0,o(n(31364))),i=o(n(81121)),s=o(n(43083)),u=o(n(46834)),l=n(70147),o=(0,s.default)(function e(t){(0,u.default)(this,e)}),n=(t.Component=o,(0,s.default)(c,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return-1<this.lookup[e]}},{key:"create",value:function(e,t){this.lookup[e]=this.components.length;t=new this.clazz(t||{});return this.components.push(t),this.entities.push(e),t}},{key:"remove",value:function(e){var t=this.lookup[e];-1<t&&t<this.components.length-1&&(this.components[t]=this.components[this.components.length-1],this.entities[t]=this.entities[this.entities.length-1],this.lookup[this.entities[t]]=t),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){e=this.lookup[e];if(-1<e){var t=this.entities[e];if(e<this.components.length-1){for(var n=e+1;n<this.components.length;++n)this.components[n-1]=this.components[n];for(var r=e+1;r<this.entities.length;++r)this.entities[r-1]=this.entities[r],this.lookup[this.entities[r-1]]=r-1}this.components.pop(),this.entities.pop(),delete this.lookup[t]}}},{key:"moveItem",value:function(e,t){if(e!==t){for(var n=this.components[e],r=this.entities[e],o=e<t?1:-1,i=e;i!==t;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[t]=n,this.entities[t]=r,this.lookup[r]=t}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){e=this.lookup[e];return-1<e?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],r=Number(r);if(this.lookup[r]===e)return r}return l.EMPTY}},{key:"find",value:function(e){for(var t=0;t<this.getCount();t++){var n=this.getComponent(t);if(e(n,t))return n}return null}},{key:"findIndex",value:function(e){for(var t=0;t<this.getCount();t++)if(e(this.getComponent(t),t))return t;return-1}},{key:"forEach",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],r=Number(r),o=this.lookup[r];e(r,this.getComponent(o))}}},{key:"forEachAsync",value:(r=(0,i.default)(a.default.mark(function e(t){var n,r,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(n<r.length)return o=r[n],o=Number(o),i=this.lookup[o],e.next=7,t(o,this.getComponent(i));e.next=10;break;case 7:n++,e.next=1;break;case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"map",value:function(e){for(var t=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],o=Number(o),i=this.lookup[o];t.push(e(o,this.getComponent(i)))}return t}}]),c);function c(e){(0,u.default)(this,c),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}t.ComponentManager=n},70147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY=void 0,t.createEntity=function(){return n++},t.EMPTY=-1;var n=1},76501:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gl=void 0,t.gl=void 0,(t=t.gl={DEPTH_BUFFER_BIT:256,256:"DEPTH_BUFFER_BIT",STENCIL_BUFFER_BIT:1024,1024:"STENCIL_BUFFER_BIT",COLOR_BUFFER_BIT:16384,16384:"COLOR_BUFFER_BIT",POINTS:0,0:"POINTS",LINES:1,1:"LINES",LINE_LOOP:2,2:"LINE_LOOP",LINE_STRIP:3,3:"LINE_STRIP",TRIANGLES:4,4:"TRIANGLES",TRIANGLE_STRIP:5,5:"TRIANGLE_STRIP",TRIANGLE_FAN:6,6:"TRIANGLE_FAN",ZERO:0})[0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"},78574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AST_TOKEN_TYPES=t.AST_NODE_TYPES=void 0,Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return r.Component}}),Object.defineProperty(t,"ComponentManager",{enumerable:!0,get:function(){return r.ComponentManager}}),Object.defineProperty(t,"ConfigService",{enumerable:!0,get:function(){return a.ConfigService}}),t.Target=t.STORAGE_CLASS=t.DefineValuePlaceholder=void 0,Object.defineProperty(t,"createEntity",{enumerable:!0,get:function(){return i.createEntity}}),Object.defineProperty(t,"gl",{enumerable:!0,get:function(){return o.gl}}),Object.defineProperty(t,"isSafari",{enumerable:!0,get:function(){return s.isSafari}});var r=n(52386),o=n(76501),i=n(70147),a=n(94081),s=n(65392);t.AST_TOKEN_TYPES=void 0,t.AST_TOKEN_TYPES={Void:"Void",Boolean:"Boolean",Float:"Float",Uint32:"Uint32",Int32:"Int32",Vector:"Vector",Vector2Float:"vec2<f32>",Vector3Float:"vec3<f32>",Vector4Float:"vec4<f32>",Vector2Boolean:"vec2<bool>",Vector3Boolean:"vec3<bool>",Vector4Boolean:"vec4<bool>",Vector2Uint:"vec2<u32>",Vector3Uint:"vec3<u32>",Vector4Uint:"vec4<u32>",Vector2Int:"vec2<i32>",Vector3Int:"vec3<i32>",Vector4Int:"vec4<i32>",Matrix:"Matrix",Matrix3x3Float:"mat3x3<f32>",Matrix4x4Float:"mat4x4<i32>",Struct:"Struct",FloatArray:"Float[]",Vector4FloatArray:"vec4<f32>[]"},t.AST_NODE_TYPES=void 0,t.AST_NODE_TYPES={Program:"Program",Identifier:"Identifier",VariableDeclaration:"VariableDeclaration",BlockStatement:"BlockStatement",ReturnStatement:"ReturnStatement",FunctionDeclaration:"FunctionDeclaration",VariableDeclarator:"VariableDeclarator",AssignmentExpression:"AssignmentExpression",LogicalExpression:"LogicalExpression",BinaryExpression:"BinaryExpression",ArrayExpression:"ArrayExpression",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",FunctionExpression:"FunctionExpression",MemberExpression:"MemberExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",CallExpression:"CallExpression",NumThreadStatement:"NumThreadStatement",StorageStatement:"StorageStatement",DoWhileStatement:"DoWhileStatement",WhileStatement:"WhileStatement",ForStatement:"ForStatement",BreakStatement:"BreakStatement",ContinueStatement:"ContinueStatement",IfStatement:"IfStatement",ImportedFunctionStatement:"ImportedFunctionStatement"},t.STORAGE_CLASS=void 0,t.STORAGE_CLASS={Input:"Input",Output:"Output",Uniform:"Uniform",Workgroup:"Workgroup",UniformConstant:"UniformConstant",Image:"Image",StorageBuffer:"StorageBuffer",Private:"Private",Function:"Function"},t.Target=void 0,t.Target={GLSL100:"GLSL100",GLSL450:"GLSL450",WGSL:"WGSL"},t.DefineValuePlaceholder="__DefineValuePlaceholder__"},94081:function(e,t,n){"use strict";var r=n(28860),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigService=void 0,r(n(46834)));function i(){(0,o.default)(this,i),this.config=void 0}(0,r(n(43083)).default)(i,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),t.ConfigService=i},65392:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=void 0;var n="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);t.isSafari=n},50837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WebGLEngine",{enumerable:!0,get:function(){return r.WebGLEngine}});var r=n(94145)},23963:function(e,t,n){"use strict";var r=n(28860),s=(Object.defineProperty(t,"__esModule",{value:!0}),t.extractUniforms=function(t){var n={};return Object.keys(t).forEach(function(e){!function r(o,t,i,a){null===t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&"number"==typeof t[0]||(0,s.default)(t)||""===t||void 0!==t.resize?i["".concat(a&&a+".").concat(o)]=t:((0,u.default)(t)&&Object.keys(t).forEach(function(e){r(e,t[e],i,"".concat(a&&a+".").concat(o))}),Array.isArray(t)&&t.forEach(function(t,n){Object.keys(t).forEach(function(e){r(e,t[e],i,"".concat(a&&a+".").concat(o,"[").concat(n,"]"))})}))}(e,t[e],n,"")}),n},r(n(34587))),u=r(n(4361))},68061:function(e,t,n){"use strict";var r=n(28860),s=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(46834)));function u(e,t){(0,s.default)(this,u),this.attribute=void 0,this.buffer=void 0;var n=t.buffer,r=t.offset,o=t.stride,i=t.normalized,a=t.size,t=t.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:r||0,stride:o||0,normalized:i||!1,divisor:t||0},a&&(this.attribute.size=a)}(0,r(n(43083)).default)(u,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t.default=u},80573:function(e,t,n){"use strict";var r=n(28860),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(46834))),r=r(n(43083)),i=n(78574),a=n(32557);function s(e,t){(0,o.default)(this,s),this.buffer=void 0;var n=t.data,r=t.usage,t=t.type;this.buffer=e.buffer({data:n,usage:a.usageMap[r||i.gl.STATIC_DRAW],type:a.dataTypeMap[t||i.gl.UNSIGNED_BYTE]})}(0,r.default)(s,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var t=e.data,e=e.offset;this.buffer.subdata(t,e)}}]),t.default=s},57489:function(e,t,n){"use strict";var r=n(28860),u=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(31364))),l=r(n(7637)),o=r(n(75650)),i=r(n(81121)),a=r(n(46834)),s=r(n(43083)),c=r(n(34587)),f=n(78574);function h(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){(0,o.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var d,y=0,r=((0,s.default)(g,[{key:"run",value:function(){var e=this;1<this.context.maxIteration&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()})}},{key:"readData",value:(d=(0,i.default)(u.default.mark(function e(){var t,n,r,o,i,a,s=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=s.reGl.read()}),!t){e.next=6;break}if(o=this.getOuputDataTexture(),n=o.originalDataLength,r=o.elementsPerTexel,o=o.typedArrayConstructor,o=void 0===o?Float32Array:o,i=[],4!==r)for(a=0;a<t.length;a+=4)1===r?i.push(t[a]):2===r?i.push(t[a],t[a+1]):i.push(t[a],t[a+1],t[a+2]);else i=t;return e.abrupt("return",new o(i.slice(0,n)));case 6:return e.abrupt("return",new Float32Array);case 7:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"confirmInput",value:function(e,t){e=this.entity===e.entity?(this.dynamicPingpong=!0,this):e;this.textureCache[t].id=e.getOuputDataTexture().id,this.textureCache[t].texture=e.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find(function(e){return e.name===t});n&&(e=(n=this.calcDataTexture(t,n.type,e)).texture,n=n.data,this.textureCache[t].data=n,this.textureCache[t].texture=e)}},{key:"destroy",value:function(){}},{key:"swap",value:function(){this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong&&(e=this.context.output.name,this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture);var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var t=e.data,n=e.textureWidth;return p(p({},e),{},{id:y++,texture:this.reGl.texture({width:n,height:n,data:t,type:"float"})})}},{key:"calcDataTexture",value:function(e,t,n){var r=1;t===f.AST_TOKEN_TYPES.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var t=n.length,a=Math.ceil(t/r),s=Math.ceil(Math.sqrt(a)),u=s*s,u=(a<u&&o.push.apply(o,(0,l.default)(new Array(4*(u-a)).fill(0))),this.reGl.texture({width:s,height:s,data:o,type:"float"}));return{id:y++,data:o,originalDataLength:t,typedArrayConstructor:(0,c.default)(n)?n.constructor:void 0,textureWidth:s,texture:u,texelCount:a,elementsPerTexel:r,isOutput:e===this.context.output.name}}}]),g);function g(e,t){var s=this,u=((0,a.default)(this,g),this.reGl=e,this.context=t,this.entity=(0,f.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0,{}),e=(this.context.uniforms.forEach(function(e){var t,n=e.name,r=e.type,o=e.data,i=e.isReferer,a=e.storageClass;if(a===f.STORAGE_CLASS.StorageBuffer)i?(s.textureCache[n]={data:void 0},u["".concat(n,"Size")]=function(){return o.compiledBundle.context.output.textureSize}):(s.textureCache[n]=s.calcDataTexture(n,r,o),t=(i=s.textureCache[n]).textureWidth,i=i.isOutput,u["".concat(n,"Size")]=[t,t],i&&(s.outputTextureName=n,s.context.needPingpong)&&(s.outputTextureName="".concat(n,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(n,r,o))),u[n]=function(){return s.textureCache[n].texture};else if(a===f.STORAGE_CLASS.Uniform){if(o&&(Array.isArray(o)||(0,c.default)(o))&&16<o.length)throw new Error("invalid data type ".concat(r));u[n]=function(){return e.data}}}),this.getOuputDataTexture()),t=e.textureWidth,e=e.texelCount,e=(u.u_OutputTextureSize=[t,t],u.u_OutputTexelCount=e,this.context.output.textureSize=[t,t],{attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:u,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4});this.computeCommand=this.reGl(e)}t.default=r},29653:function(e,t,n){"use strict";var r=n(28860),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(46834))),r=r(n(43083)),a=n(78574),s=n(32557),n=((0,r.default)(u,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){e=e.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),u);function u(e,t){(0,i.default)(this,u),this.elements=void 0;var n=t.data,r=t.usage,o=t.type,t=t.count;this.elements=e.elements({data:n,usage:s.usageMap[r||a.gl.STATIC_DRAW],type:s.dataTypeMap[o||a.gl.UNSIGNED_BYTE],count:t})}t.default=n},73095:function(e,t,n){"use strict";var r=n(28860),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(46834)));function s(e,t){(0,a.default)(this,s),this.framebuffer=void 0;var n=t.width,r=t.height,o=t.color,i=t.colors,t=(t.depth,t.stencil,{width:n,height:r});Array.isArray(i)&&(t.colors=i.map(function(e){return e.get()})),o&&"boolean"!=typeof o&&(t.color=o.get()),this.framebuffer=e.framebuffer(t)}(0,r(n(43083)).default)(s,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,e=e.height;this.framebuffer.resize(t,e)}}]),t.default=s},97144:function(e,t,n){"use strict";var r=n(28860),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(60549))),i=r(n(75650)),m=r(n(46834)),r=r(n(43083)),b=n(78574),w=n(23963),_=n(32557);function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){(0,i.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,r.default)(x,[{key:"addUniforms",value:function(e){this.uniforms=s(s({},this.uniforms),(0,w.extractUniforms)(e))}},{key:"draw",value:function(e){var n=s(s({},this.uniforms),(0,w.extractUniforms)(e.uniforms||{})),r={};Object.keys(n).forEach(function(e){var t=(0,o.default)(n[e]);"boolean"===t||"number"===t||Array.isArray(n[e])||n[e].BYTES_PER_ELEMENT?r[e]=n[e]:"string"!==t&&(r[e]=n[e].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){e=e.depth;e&&(t.depth={enable:void 0===e.enable||!!e.enable,mask:void 0===e.mask||!!e.mask,func:_.depthFuncMap[e.func||b.gl.LESS],range:e.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var n,r,o,e=e.blend;e&&(n=e.enable,r=e.func,o=e.equation,e=e.color,t.blend={enable:!!n,func:{srcRGB:_.blendFuncMap[r&&r.srcRGB||b.gl.SRC_ALPHA],srcAlpha:_.blendFuncMap[r&&r.srcAlpha||b.gl.SRC_ALPHA],dstRGB:_.blendFuncMap[r&&r.dstRGB||b.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:_.blendFuncMap[r&&r.dstAlpha||b.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:_.blendEquationMap[o&&o.rgb||b.gl.FUNC_ADD],alpha:_.blendEquationMap[o&&o.alpha||b.gl.FUNC_ADD]},color:void 0===e?[0,0,0,0]:e})}},{key:"initStencilDrawParams",value:function(e,t){var n,r,o,i,e=e.stencil;e&&(n=e.enable,r=e.mask,o=void 0===(o=e.func)?{cmp:b.gl.ALWAYS,ref:0,mask:-1}:o,i=void 0===(i=e.opFront)?{fail:b.gl.KEEP,zfail:b.gl.KEEP,zpass:b.gl.KEEP}:i,e=void 0===(e=e.opBack)?{fail:b.gl.KEEP,zfail:b.gl.KEEP,zpass:b.gl.KEEP}:e,t.stencil={enable:!!n,mask:void 0===r?-1:r,func:s(s({},o),{},{cmp:_.stencilFuncMap[o.cmp]}),opFront:{fail:_.stencilOpMap[i.fail],zfail:_.stencilOpMap[i.zfail],zpass:_.stencilOpMap[i.zpass]},opBack:{fail:_.stencilOpMap[e.fail],zfail:_.stencilOpMap[e.zfail],zpass:_.stencilOpMap[e.zpass]}})}},{key:"initCullDrawParams",value:function(e,t){var n,e=e.cull;e&&(n=e.enable,e=void 0===(e=e.face)?b.gl.BACK:e,t.cull={enable:!!n,face:_.cullFaceMap[e]})}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(e){return"#define ".concat(e," ").concat(Number(t[e]))}).join("\n")}}]);n=x;function x(t,e){(0,m.default)(this,x),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var n=e.vs,r=e.fs,o=e.defines,i=e.attributes,a=e.uniforms,s=e.primitive,u=e.count,l=e.elements,c=e.depth,f=e.blend,h=e.stencil,p=e.cull,d=e.instances,y=e.scissor,e=e.viewport,g={},v=(a&&(this.uniforms=(0,w.extractUniforms)(a),Object.keys(a).forEach(function(e){g[e]=t.prop(e)})),{}),a=(Object.keys(i).forEach(function(e){v[e]=i[e].get()}),o&&this.generateDefines(o)||""),o={attributes:v,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(a,"\n").concat(r),uniforms:g,vert:"\n".concat(a,"\n").concat(n),primitive:_.primitiveMap[void 0===s?b.gl.TRIANGLES:s]};d&&(o.instances=d),u&&(o.count=u),l&&(o.elements=l.get()),y&&(o.scissor=y),e&&(o.viewport=e),this.initDepthDrawParams({depth:c},o),this.initBlendDrawParams({blend:f},o),this.initStencilDrawParams({stencil:h},o),this.initCullDrawParams({cull:p},o),this.drawCommand=t(o)}t.default=n},79191:function(e,t,n){"use strict";var r=n(28860),g=(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(n(46834))),r=r(n(43083)),v=n(78574),m=n(32557);function b(e,t){(0,g.default)(this,b),this.texture=void 0,this.width=void 0,this.height=void 0;var n=t.data,r=t.type,r=void 0===r?v.gl.UNSIGNED_BYTE:r,o=t.width,i=t.height,a=t.flipY,a=void 0!==a&&a,s=t.format,s=void 0===s?v.gl.RGBA:s,u=t.mipmap,u=void 0!==u&&u,l=t.wrapS,l=void 0===l?v.gl.CLAMP_TO_EDGE:l,c=t.wrapT,c=void 0===c?v.gl.CLAMP_TO_EDGE:c,f=t.aniso,f=void 0===f?0:f,h=t.alignment,h=void 0===h?1:h,p=t.premultiplyAlpha,p=void 0!==p&&p,d=t.mag,d=void 0===d?v.gl.NEAREST:d,y=t.min,y=void 0===y?v.gl.NEAREST:y,t=t.colorSpace,t=void 0===t?v.gl.BROWSER_DEFAULT_WEBGL:t,o={width:this.width=o,height:this.height=i,type:m.dataTypeMap[r],format:m.formatMap[s],wrapS:m.wrapModeMap[l],wrapT:m.wrapModeMap[c],mag:m.filterMap[d],min:m.filterMap[y],alignment:h,flipY:a,colorSpace:m.colorSpaceMap[t],premultiplyAlpha:p,aniso:f};n&&(o.data=n),"number"==typeof u?o.mipmap=m.mipmapMap[u]:"boolean"==typeof u&&(o.mipmap=u),this.texture=e.texture(o)}(0,r.default)(b,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,e=e.height;this.texture.resize(t,e),this.width=t,this.height=e}},{key:"destroy",value:function(){this.texture.destroy()}}]),t.default=b},32557:function(e,t,n){"use strict";var r=n(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.wrapModeMap=t.usageMap=t.stencilOpMap=t.stencilFuncMap=t.primitiveMap=t.mipmapMap=t.formatMap=t.filterMap=t.depthFuncMap=t.dataTypeMap=t.cullFaceMap=t.colorSpaceMap=t.blendFuncMap=t.blendEquationMap=void 0;r=r(n(75650)),n=n(78574);(0,r.default)(o={},n.gl.POINTS,"points"),(0,r.default)(o,n.gl.LINES,"lines"),(0,r.default)(o,n.gl.LINE_LOOP,"line loop"),(0,r.default)(o,n.gl.LINE_STRIP,"line strip"),(0,r.default)(o,n.gl.TRIANGLES,"triangles"),(0,r.default)(o,n.gl.TRIANGLE_FAN,"triangle fan"),(0,r.default)(o,n.gl.TRIANGLE_STRIP,"triangle strip");t.primitiveMap=o,(0,r.default)(o={},n.gl.STATIC_DRAW,"static"),(0,r.default)(o,n.gl.DYNAMIC_DRAW,"dynamic"),(0,r.default)(o,n.gl.STREAM_DRAW,"stream");t.usageMap=o,(0,r.default)(o={},n.gl.BYTE,"int8"),(0,r.default)(o,n.gl.UNSIGNED_INT,"int16"),(0,r.default)(o,n.gl.INT,"int32"),(0,r.default)(o,n.gl.UNSIGNED_BYTE,"uint8"),(0,r.default)(o,n.gl.UNSIGNED_SHORT,"uint16"),(0,r.default)(o,n.gl.UNSIGNED_INT,"uint32"),(0,r.default)(o,n.gl.FLOAT,"float"),t.dataTypeMap=o,(0,r.default)(o={},n.gl.ALPHA,"alpha"),(0,r.default)(o,n.gl.LUMINANCE,"luminance"),(0,r.default)(o,n.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,r.default)(o,n.gl.RGB,"rgb"),(0,r.default)(o,n.gl.RGBA,"rgba"),(0,r.default)(o,n.gl.RGBA4,"rgba4"),(0,r.default)(o,n.gl.RGB5_A1,"rgb5 a1"),(0,r.default)(o,n.gl.RGB565,"rgb565"),(0,r.default)(o,n.gl.DEPTH_COMPONENT,"depth"),(0,r.default)(o,n.gl.DEPTH_STENCIL,"depth stencil"),t.formatMap=o,(0,r.default)(o={},n.gl.DONT_CARE,"dont care"),(0,r.default)(o,n.gl.NICEST,"nice"),(0,r.default)(o,n.gl.FASTEST,"fast"),t.mipmapMap=o,(0,r.default)(o={},n.gl.NEAREST,"nearest"),(0,r.default)(o,n.gl.LINEAR,"linear"),(0,r.default)(o,n.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,r.default)(o,n.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,r.default)(o,n.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,r.default)(o,n.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),t.filterMap=o,(0,r.default)(o={},n.gl.REPEAT,"repeat"),(0,r.default)(o,n.gl.CLAMP_TO_EDGE,"clamp"),(0,r.default)(o,n.gl.MIRRORED_REPEAT,"mirror"),t.wrapModeMap=o,(0,r.default)(o={},n.gl.NONE,"none"),(0,r.default)(o,n.gl.BROWSER_DEFAULT_WEBGL,"browser"),t.colorSpaceMap=o,(0,r.default)(o={},n.gl.NEVER,"never"),(0,r.default)(o,n.gl.ALWAYS,"always"),(0,r.default)(o,n.gl.LESS,"less"),(0,r.default)(o,n.gl.LEQUAL,"lequal"),(0,r.default)(o,n.gl.GREATER,"greater"),(0,r.default)(o,n.gl.GEQUAL,"gequal"),(0,r.default)(o,n.gl.EQUAL,"equal"),(0,r.default)(o,n.gl.NOTEQUAL,"notequal"),t.depthFuncMap=o,(0,r.default)(o={},n.gl.FUNC_ADD,"add"),(0,r.default)(o,n.gl.MIN_EXT,"min"),(0,r.default)(o,n.gl.MAX_EXT,"max"),(0,r.default)(o,n.gl.FUNC_SUBTRACT,"subtract"),(0,r.default)(o,n.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),t.blendEquationMap=o,(0,r.default)(o={},n.gl.ZERO,"zero"),(0,r.default)(o,n.gl.ONE,"one"),(0,r.default)(o,n.gl.SRC_COLOR,"src color"),(0,r.default)(o,n.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,r.default)(o,n.gl.SRC_ALPHA,"src alpha"),(0,r.default)(o,n.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,r.default)(o,n.gl.DST_COLOR,"dst color"),(0,r.default)(o,n.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,r.default)(o,n.gl.DST_ALPHA,"dst alpha"),(0,r.default)(o,n.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,r.default)(o,n.gl.CONSTANT_COLOR,"constant color"),(0,r.default)(o,n.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,r.default)(o,n.gl.CONSTANT_ALPHA,"constant alpha"),(0,r.default)(o,n.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,r.default)(o,n.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),t.blendFuncMap=o,(0,r.default)(o={},n.gl.NEVER,"never"),(0,r.default)(o,n.gl.ALWAYS,"always"),(0,r.default)(o,n.gl.LESS,"less"),(0,r.default)(o,n.gl.LEQUAL,"lequal"),(0,r.default)(o,n.gl.GREATER,"greater"),(0,r.default)(o,n.gl.GEQUAL,"gequal"),(0,r.default)(o,n.gl.EQUAL,"equal"),(0,r.default)(o,n.gl.NOTEQUAL,"notequal"),t.stencilFuncMap=o,(0,r.default)(o={},n.gl.ZERO,"zero"),(0,r.default)(o,n.gl.KEEP,"keep"),(0,r.default)(o,n.gl.REPLACE,"replace"),(0,r.default)(o,n.gl.INVERT,"invert"),(0,r.default)(o,n.gl.INCR,"increment"),(0,r.default)(o,n.gl.DECR,"decrement"),(0,r.default)(o,n.gl.INCR_WRAP,"increment wrap"),(0,r.default)(o,n.gl.DECR_WRAP,"decrement wrap");t.stencilOpMap=o,(0,r.default)(o={},n.gl.FRONT,"front"),(0,r.default)(o,n.gl.BACK,"back");var o,r=o;t.cullFaceMap=r},94145:function(e,t,n){"use strict";var r,o=n(28860),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLEngine=void 0,o(n(31364))),a=o(n(81121)),s=o(n(46834)),u=o(n(43083)),l=n(78574),c=o(n(44934)),f=o(n(68061)),h=o(n(80573)),p=o(n(57489)),d=o(n(29653)),y=o(n(73095)),g=o(n(97144)),v=o(n(79191)),o=((0,u.default)(m,[{key:"init",value:(r=(0,a.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inited)return e.abrupt("return");e.next=2;break;case 2:return this.$canvas=t.canvas,e.next=5,new Promise(function(n,r){(0,c.default)({canvas:t.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,t){!e&&t||r(e),n(t)}})});case 5:this.gl=e.sent,this.inited=!0;case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),m);function m(){var t,n,o=this;(0,s.default)(this,m),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=(n=(0,a.default)(i.default.mark(function e(r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.uniforms)return e.next=3,Promise.all(Object.keys(r.uniforms).map(function(){var t=(0,a.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.uniforms[t]&&void 0!==r.uniforms[t].load)return e.next=3,r.uniforms[t].load();e.next=5;break;case 3:n=e.sent,r.uniforms[t]=n;case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));e.next=3;break;case 3:return e.abrupt("return",new g.default(o.gl,r));case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),this.createAttribute=function(e){return new f.default(o.gl,e)},this.createBuffer=function(e){return new h.default(o.gl,e)},this.createElements=function(e){return new d.default(o.gl,e)},this.createTexture2D=function(e){return new v.default(o.gl,e)},this.createFramebuffer=function(e){return new y.default(o.gl,e)},this.useFramebuffer=function(e,t){o.gl({framebuffer:e?e.get():null})(t)},this.createComputeModel=(t=(0,a.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new p.default(o.gl,t));case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),this.clear=function(e){var t=e.color,n=e.depth,r=e.stencil,e=e.framebuffer,e=void 0===e?null:e,t={color:t,depth:n,stencil:r};t.framebuffer=null===e?e:e.get(),o.gl.clear(t)},this.setScissor=function(e){o.gl&&o.gl._gl&&(e.enable&&e.box?(o.gl._gl.enable(l.gl.SCISSOR_TEST),o.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):o.gl._gl.disable(l.gl.SCISSOR_TEST),o.gl._refresh())},this.viewport=function(e){var t=e.x,n=e.y,r=e.width,e=e.height;o.gl&&o.gl._gl&&(o.gl._gl.viewport(t,n,r,e),o.gl._refresh())},this.readPixels=function(e){var t=e.framebuffer,e={x:e.x,y:e.y,width:e.width,height:e.height};return t&&(e.framebuffer=t.get()),o.gl.read(e)},this.getCanvas=function(){return o.$canvas},this.getGLContext=function(){return o.gl._gl},this.destroy=function(){o.gl&&(o.gl.destroy(),o.inited=!1)}}t.WebGLEngine=o},655:function(e,t,n){"use strict";var r=n(28860),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.Kernel=void 0,r(n(31364))),o=r(n(81121)),a=r(n(75650)),s=r(n(46834)),u=r(n(43083)),l=r(n(34587)),c=r(n(39505)),f=r(n(43936)),h=n(78574),p=n(94499);function d(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){(0,a.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,u.default)(b,[{key:"init",value:function(){var e=this.configService.get(),t=e.canvas,e=e.engineOptions;this.initPromise=this.engine.init(y({canvas:t||(0,p.createCanvas)(),antialiasing:!1},e))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=(0,c.default)(e)||(0,l.default)(e)||(0,f.default)(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(e){return e.name===t});if(o)return o.value=e,this;o=this.compiledBundle.context.uniforms.find(function(e){return e.name===t});o&&(r?(o.data=e,o.isReferer=!1,o.storageClass===h.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach(function(e){n.setBinding(e,t[e])});return this}},{key:"execute",value:(m=(0,o.default)(i.default.mark(function e(){var t,n,r=this,o=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<o.length&&void 0!==o[0]?o[0]:1,this.dirty)return this.compiledBundle.context&&(1<t?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),e.next=5,this.compile();e.next=6;break;case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(e){return e.isReferer}).forEach(function(e){var t=e.data,e=e.name;r.model.confirmInput(t.model,e)}),n=0;n<t;n++)this.model.run();return this.engine.endFrame(),e.abrupt("return",this);case 12:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"getOutput",value:(v=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.readData());case 1:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"compile",value:(g=(0,o.default)(i.default.mark(function e(){var n,t,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:return n=y({},this.compiledBundle.context),t=this.engine.supportWebGPU?this.engine.useWGSL?h.Target.WGSL:h.Target.GLSL450:h.Target.GLSL100,r=this.compiledBundle.shaders[t],n.defines.filter(function(e){return e.runtime}).forEach(function(e){var t="".concat(h.DefineValuePlaceholder).concat(e.name);r=r.replace(t,"".concat(e.value))}),n.shader=r,n.uniforms.forEach(function(e){var t;e.data||e.storageClass!==h.STORAGE_CLASS.StorageBuffer||(t=1,e.type===h.AST_TOKEN_TYPES.FloatArray?t=1:e.type===h.AST_TOKEN_TYPES.Vector4FloatArray&&(t=4),e.data=new Float32Array(n.output.length*t).fill(0))}),this.compiledBundle.context=n,e.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=e.sent;case 12:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})}]);var g,v,m,r=b;function b(e,t){(0,s.default)(this,b),this.engine=e,this.configService=t,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}t.Kernel=r},43439:function(e,t,n){"use strict";var r=n(28860),o=(Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0,r(n(46834))),r=r(n(43083)),i=n(78574),a=n(50837),s=n(655),n=((0,r.default)(u,[{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setEngine",value:function(e){this.engine=e}},{key:"createEntity",value:function(){return(0,i.createEntity)()}},{key:"createKernel",value:function(e){var t=new s.Kernel(this.engine,this.configService);return"string"==typeof e?t.setBundle(JSON.parse(e)):t.setBundle(e),t.init(),t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new u;return t.setConfig(e),t.setEngine(new a.WebGLEngine),t}}]),u);function u(){(0,o.default)(this,u),this.engine=void 0,this.configService=new i.ConfigService}t.World=n},66887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Kernel",{enumerable:!0,get:function(){return r.Kernel}}),Object.defineProperty(t,"World",{enumerable:!0,get:function(){return o.World}});var r=n(655),o=n(43439)},94499:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCanvas=function(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}},58279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(31834),i=(n=n(90625))&&n.__esModule?n:{default:n};function a(){}a.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));function n(e){var n=this,e=(Object.assign(this,this.getDefaultCfg(),e),this.getEvents()),r=(this.events=null,{});e&&((0,o.each)(e,function(e,t){r[t]=(0,o.wrapBehavior)(n,e)}),this.events=r)}var r=(0,o.clone)(i.default);Object.assign(r,t);n.prototype=r,a.types[e]=n},a.hasBehavior=function(e){return!!a.types[e]},a.getBehavior=function(e){return a.types[e]},a.types={},t.default=a},90625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31834);t.default={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(n){var e=this,t=this.events;this.graph=n,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||n.get("canvas").set("draggable",!0),(0,r.each)(t,function(e,t){n.on(t,e)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(n){var e=this.events,t=n.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||n.get("canvas").set("draggable",!1),(0,r.each)(e,function(e,t){n.off(t,e)}),n.get("canvas").set("draggable",t)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}}},2235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n=((n=n(58279))&&n.__esModule?n:{default:n}).default;t.default=n},22245:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={triangle:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=15);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z")},vee:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=20);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,"\n        L ").concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z")},circle:function(e,t){return void 0===e&&(e=5),"M ".concat(2*(t=void 0===t?0:t),", 0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*e,",0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")},rect:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=10);n=2*(n=void 0===n?0:n);return"M ".concat(n,",").concat(-e/2," \n        L ").concat(n+t,",").concat(-e/2," \n        L ").concat(n+t,",").concat(e/2," \n        L ").concat(n,",").concat(e/2," Z")},diamond:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=15);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 \n        L ").concat(n+t/2,",").concat(-e/2," \n        L ").concat(n+t,",0 \n        L ").concat(n+t/2,",").concat(e/2," Z")},triangleRect:function(e,t,n,r,o,i){void 0===e&&(e=15),void 0===n&&(n=15),void 0===r&&(r=3);i=2*(i=void 0===i?0:i),o=i+(t=void 0===t?15:t)+(o=void 0===o?5:o);return"M ".concat(i,",0 L ").concat(i+t,",-").concat(e/2," L ").concat(i+t,",").concat(e/2," Z\n            M ").concat(o,", -").concat(n/2,"\n            L ").concat(o+r," -").concat(n/2,"\n            L ").concat(o+r," ").concat(n/2,"\n            L ").concat(o," ").concat(n/2,"\n            Z")}}},48485:function(e,t,n){"use strict";var c=n(97582),l=n(31834),r=i(n(36605)),o=i(n(27144)),n=n(15692);function i(e){return e&&e.__esModule?e:{default:e}}var a={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:r.default.comboLabel.refX,refY:r.default.comboLabel.refY,options:{style:{stroke:r.default.defaultCombo.style.stroke,fill:r.default.defaultCombo.style.fill,lineWidth:r.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:r.default.comboLabel.style.fill,fontSize:r.default.comboLabel.style.fontSize,fontFamily:r.default.windowFontFamily}},stateStyles:(0,c.__assign)({},r.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){e=(0,l.clone)(e.size||this.options.size||r.default.defaultCombo.size);return(0,l.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),e=(0,l.isArray)(e)?e:[e,e]},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,o=e.padding||this.options.padding,i=((0,l.isArray)(o)&&(o=Math.max.apply(Math,o)),t.refX),a=t.refY;(0,l.isNil)(i)&&(i=this.refX),(0,l.isNil)(a)&&(a=this.refY);var s,t=this.getSize(e),u=(Math.max(r.r,t[0]/2)||t[0]/2)+o;switch(n){case"top":s={x:0,y:-u-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-u+i,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:u+i,y:0,textAlign:"right"}}return s.text=e.label,s},drawShape:function(e,t){var n=this.shapeType,e=this.getShapeStyle(e);return t.addShape(n,{attrs:e,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,t,n){var r=e.collapsed,e=e.collapsedSubstituteIcon,e=Object.assign({},this.options.collapsedSubstituteIcon,void 0===e?{}:e),o=e.show,i=e.img,a=e.width,e=e.height,s=t.getContainer(),u=s.find(function(e){return"combo-collapsed-substitute-icon"===e.get("name")}),l=u&&!u.destroyed,t=t.get("keyShape");r&&o?(l?u.show():(r={width:a||2*n.r||n.width,height:e||2*n.r||n.height},u=s.addShape("image",{attrs:(0,c.__assign)({img:i,x:-r.width/2,y:-r.height/2},r),name:"combo-collapsed-substitute-icon",draggable:!0})),t.hide()):l&&(u.hide(),t.show())},updateShape:function(e,t,n){var r=this,o=t.get("keyShape");t.get("animate")&&(void 0===e.animate?this.options:e).animate&&o.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),o.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&r.updateCollapsedIcon(e,t,n)}})):(o.attr((0,c.__assign)({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},n=(0,c.__assign)((0,c.__assign)({},n.shapeBase),a);o.default.registerCombo("single-combo",n)},42560:function(e,t,n){"use strict";var o=n(97582),i=s(n(36605)),r=s(n(27144)),a=n(31834);function s(e){return e&&e.__esModule?e:{default:e}}r.default.registerCombo("circle",{options:{size:[i.default.defaultCombo.size[0],i.default.defaultCombo.size[0]],padding:Math.max.apply(Math,i.default.defaultCombo.padding),animate:!0,style:{stroke:i.default.defaultCombo.style.stroke,fill:i.default.defaultCombo.style.fill,lineWidth:i.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:i.default.comboLabel.style.fill,fontSize:i.default.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,o.__assign)({},i.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){e=this.getShapeStyle(e);return delete e.height,delete e.width,t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,a.isArray)(n)&&(n=Math.max.apply(Math,n));var r={stroke:e.color},t=(0,a.mix)({},t,r,e.style),r=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,n=(r=r?(0,a.isNumber)(r)?r/2:r[0]/2:(r=this.getSize(e),!(0,a.isNumber)(t.r)||isNaN(t.r)?r[0]/2||i.default.defaultCombo.style.r:Math.max(t.r,r[0]/2)||r[0]/2),t.r=r+n,(0,o.__assign)({x:0,y:0},t));return e.style?e.style.r=r:e.style={r:r},n},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;(0,a.isArray)(r)&&(r=Math.max.apply(Math,r));var o=(0,a.clone)(e.style),i=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,i=i?(0,a.isNumber)(i)?i/2:i[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,n=(o.r=i+r,t.get("sizeCache")),r=(n&&(n.r=o.r),{stroke:e.color}),n=t.get("keyShape"),n=(0,a.mix)({},n.attr(),r,o);e.style?e.style.r=i:e.style={r:i},this.updateShape(e,t,n,!0)}},"single-combo")},88651:function(e,t,n){"use strict";n(42560),n(43949)},43949:function(e,t,n){"use strict";var s=n(97582),h=n(31834),u=r(n(36605));function r(e){return e&&e.__esModule?e:{default:e}}r(n(27144)).default.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:u.default.defaultCombo.style.stroke,fill:u.default.defaultCombo.style.fill,lineWidth:u.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:u.default.comboLabel.style.fill,fontSize:u.default.comboLabel.style.fontSize,fontFamily:u.default.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,s.__assign)({},u.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){e=this.getShapeStyle(e);return t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,o=e.padding||this.options.padding,i=((0,h.isNumber)(o)&&(o=[o,o,o,o]),t.refX),a=t.refY;(0,h.isNil)(i)&&(i=this.refX),(0,h.isNil)(a)&&(a=this.refY);var s,u=-r.width/2-o[3],l=r.width/2+o[1],c=-r.height/2-o[0],f=r.height/2+o[2];switch(n){case"top":s={x:u+i,y:c+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:f+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":s={x:0,y:c+a,textBaseline:"top",textAlign:"center"};break;default:s={x:l+i,y:0,textAlign:"right"}}return s.text=e.label,s},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,h.isNumber)(n)&&(n=[n,n,n,n]);var r,o={stroke:e.color},t=(0,h.mix)({},t,o,e.style),o=this.getSize(e),i=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,i=i?(0,h.isNumber)(i)?r=i:(r=i[0],i[1]):(r=!(0,h.isNumber)(t.width)||isNaN(t.width)?o[0]||u.default.defaultCombo.style.width:Math.max(t.width,o[0])||o[0],!(0,h.isNumber)(t.height)||isNaN(t.height)?o[1]||u.default.defaultCombo.style.height:Math.max(t.height,o[1])||o[1]),o=-r/2-n[3],a=-i/2-n[0],n=(t.width=r+n[1]+n[3],t.height=i+n[0]+n[2],(0,s.__assign)({x:o,y:a},t));return e.style?(e.style.width=r,e.style.height=i):e.style={width:r,height:i},n},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;(0,h.isNumber)(r)&&(r=[r,r,r,r]);var o,i=(0,h.clone)(e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,a=a?(0,h.isNumber)(a)?o=a:(o=a[0],a[1]):(o=Math.max(i.width,n[0])||n[0],Math.max(i.height,n[1])||n[1]),n=(i.width=o+r[1]+r[3],i.height=a+r[0]+r[2],t.get("sizeCache")),n=(n&&(n.width=i.width,n.height=i.height),i.x=-o/2-r[3],i.y=-a/2-r[0],{stroke:e.color}),r=t.get("keyShape"),r=(0,h.mix)({},r.attr(),n,i);e.style?(e.style.width=o,e.style.height=a):e.style={width:o,height:a},this.updateShape(e,t,r,!1)}},"single-combo")},14996:function(e,t,n){"use strict";var f=n(97582),h=n(31834),u=n(61592),l=n(39520),o=n(28362),i=s(n(36605)),r=s(n(27144)),a=n(15692);function s(e){return e&&e.__esModule?e:{default:e}}n={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:i.default.defaultEdge.size,style:{x:0,y:0,stroke:i.default.defaultEdge.style.stroke,lineAppendWidth:i.default.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:i.default.edgeLabel.style.fill,fontSize:i.default.edgeLabel.style.fontSize,fontFamily:i.default.windowFontFamily}},stateStyles:(0,f.__assign)({},i.default.edgeStateStyles)},getPath:function(e){var n=[];return(0,h.each)(e,function(e,t){n.push(0===t?["M",e.x,e.y]:["L",e.x,e.y])}),n},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},t=(0,h.mix)({},t,n,e.style),n=e.size||i.default.defaultEdge.size,r=(e=this.getPathPoints(e)).startPoint,o=e.endPoint,e=this.getControlPoints(e),r=[r],e=((r=e?r.concat(e):r).push(o),this.getPath(r));return(0,h.mix)({},i.default.defaultEdge.style,{stroke:i.default.defaultEdge.color,lineWidth:n,path:e},t)},updateShapeStyle:function(e,t,n){var r=t.getContainer(),o=(null==(o=t.getKeyShape)?void 0:o.call(t))||r.shapeMap["edge-shape"],t=e.size,r=(e=this.getPathPoints(e)).startPoint,i=e.endPoint,a=this.getControlPoints(e),r=[r],i=((r=a?r.concat(a):r).push(i),o.attr()),s=e.style||{},u=(void 0===s.stroke&&(s.stroke=e.color),e.sourceNode),l=e.targetNode,c={radius:s.radius},a=(a||(c={source:u,target:l,offset:s.offset,radius:s.radius}),this.getPath(r,c)),u={};"move"===n?u={path:a}:(i.endArrow&&!1===s.endArrow&&(e.style.endArrow={path:""}),i.startArrow&&!1===s.startArrow&&(e.style.startArrow={path:""}),void 0===(u=(0,f.__assign)({},e.style)).lineWidth&&(u.lineWdith=((0,h.isNumber)(t)?t:null==t?void 0:t[0])||i.lineWidth),void 0===u.path&&(u.path=a),void 0===u.stroke&&(u.stroke=i.stroke||e.color)),o&&o.attr(u)},getLabelStyleByPosition:function(e,t,n){var r=t.position||this.labelPosition,o={},n=null==n?void 0:n.shapeMap["edge-shape"],i="start"===r?0:"end"===r?1:.5,a=t.refX||this.refX,s=t.refY||this.refY;return e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y?(o.x=e.startPoint.x+a,o.y=e.startPoint.y+s,o.text=e.label):(t=(0,h.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate,n=(0,u.getLabelPosition)(n,i,a,s,t),o.x=n.x,o.y=n.y,o.rotate=n.rotate,o.textAlign=this._getTextAlign(r,n.angle),o.text=e.label),o},getLabelBgStyleByPosition:function(e,t){var n,r,o,i,a;return e&&(n=e.getBBox(),a=t.style&&t.style.background)?(r=a.padding,o=n.width+r[1]+r[3],i=n.height+r[0]+r[2],a=(0,f.__assign)((0,f.__assign)({},a),{width:o,height:i,x:n.minX-r[3],y:n.minY-r[0],matrix:[1,0,0,0,1,0,0,0,1]}),((0,h.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate)&&(a.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),a):{}},_getTextAlign:function(e,t){var n="center";return t?(t%=2*Math.PI,n="center"!==e?0<=t&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?e:("start"===(t=e)?t="end":"end"===e&&(t="start"),t):n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){e=this.getShapeStyle(e),e=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return t.shapeMap["edge-shape"]=e},drawLabel:function(e,t){var n=this.options.labelCfg,n=(0,h.deepMix)({},n,e.labelCfg),n=this.getLabelStyle(e,n,t),r=n.rotate,o=(delete n.rotate,t.addShape("text",{attrs:n,name:"text-shape",labelRelated:!0,draggable:!0}));return t.shapeMap["text-shape"]=o,isNaN(r)||""===r||o.rotateAtStart(r),n.background&&(e=this.drawLabelBg(e,t,o,n,r),n=this.itemType+a.CLS_LABEL_BG_SUFFIX,e.set("classname",n),t.shapeMap[n]=e,o.toFront()),o},drawLabelBg:function(e,t,n,r,o){var i=this.options.labelCfg,i=(0,h.deepMix)({},i,e.labelCfg),e=this.getLabelBgStyleByPosition(n,i),n=t.addShape("rect",{name:"text-bg-shape",attrs:e,labelRelated:!0});return t.shapeMap["text-bg-shape"]=n}},n=(0,f.__assign)((0,f.__assign)({},a.shapeBase),n);r.default.registerEdge("single-edge",n),r.default.registerEdge("line",{getControlPoints:function(){}},"single-edge"),r.default.registerEdge("spline",{getPath:function(e){return(0,o.getSpline)(e)}},"single-edge"),r.default.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,r=(t.x+n.x)/2,o=(t.y+n.y)/2;if(void 0!==e.controlPoints){if(a=e.controlPoints[0],s=(0,l.getCircleCenterByPoints)(t,a,n),t.x<=n.x&&t.y>n.y?this.clockwise=s.x>a.x?0:1:t.x<=n.x&&t.y<n.y?this.clockwise=s.x>a.x?1:0:t.x>n.x&&t.y<=n.y?this.clockwise=s.y<a.y?0:1:this.clockwise=s.y<a.y?1:0,(a.x-t.x)/(a.y-t.y)==(n.x-t.x)/(n.y-t.y))return[]}else{void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var i={x:n.x-t.x,y:n.y-t.y},i=Math.atan2(i.y,i.x),a={x:e.curveOffset*Math.cos(-Math.PI/2+i)+r,y:e.curveOffset*Math.sin(-Math.PI/2+i)+o},s=(0,l.getCircleCenterByPoints)(t,a,n)}r=(0,l.distance)(t,s);return[{x:r,y:r}]},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),2===e.length?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),r.default.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t,n,r=e.controlPoints;return r&&r.length||(t=e.startPoint,n=e.endPoint,void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,h.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]),r=[(0,o.getControlPoint)(t,n,e.curvePosition,e.curveOffset)]),r},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),r.default.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var t,n,r=e.controlPoints;return void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),r&&r.length&&!(r.length<2)||(t=e.startPoint,n=e.endPoint,r=[(0,o.getControlPoint)(t,n,e.curvePosition[0],e.curveOffset[0]),(0,o.getControlPoint)(t,n,e.curvePosition[1],e.curveOffset[1])]),r},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),r.default.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,r=(void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),n.y-t.y),o=[0,0];return e.curveOffset?o=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(o=e.minCurveOffset),[{x:t.x,y:t.y+r*this.curvePosition[0]+o[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+o[1]}]}},"cubic"),r.default.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint,r=(void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),n.x-t.x),o=[0,0];return e.curveOffset?o=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(o=e.minCurveOffset),[{x:t.x+r*this.curvePosition[0]+o[0],y:t.y},{x:n.x-r*this.curvePosition[1]+o[1],y:n.y}]}},"cubic"),r.default.registerEdge("loop",{getPathPoints:function(e){return(0,u.getLoopCfgs)(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic")},40861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genBubbleSet=void 0;var m=n(39520),b={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function w(u,l,r){function o(e,t){return l.cells[e+t*l.width]}function c(e,t){var n=0;return o(e-1,t-1)>=r&&(n+=1),o(e,t-1)>r&&(n+=2),o(e-1,t)>r&&(n+=4),o(e,t)>r&&(n+=8),n}var n=!1;this.march=function(){for(var e=0;e<l.width&&!n;e+=1)for(var t=0;t<l.height&&!n;t+=1)o(e,t)>r&&15!==c(e,t)&&(n=function(e,t){for(var n,r,o=e,i=t,a=0;a<l.width*l.height;a++){if(n=o,r=i,-1<u.findIndex(function(e){return e.x===o&&e.y===i})){if(u[0].x===o&&u[0].y===i)return!0}else u.push({x:o,y:i});var s=c(o,i);switch(s){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:o++;break;case 12:case 14:case 4:o--;break;case 6:0===n&&(-1===r?--o:o+=1);break;case 1:case 13:case 5:i--;break;case 9:1===n&&(0===r?--i:i+=1);break;case 10:case 8:case 11:i++;break;default:return console.warn("Marching squares invalid state: ".concat(s)),!0}}}(e,t));return n}}function _(e,n){var r=Number.POSITIVE_INFINITY,o=null;return e.forEach(function(e){var t=(0,m.fractionToLine)(e,n);0<=t&&t<r&&(o=e,r=t)}),o}function x(e,t,n,f,h,p){function r(e,t){e=Math.floor((e-t)/p.pixelGroupSize);return e<0?0:e}function d(e,t){return e*p.pixelGroupSize+t}function y(e,t){return[Math.min(r(e.minX,t+f.minX),h.width),Math.min(r(e.minY,t+f.minY),h.height),Math.min(r(e.maxX,-t+f.minX),h.width),Math.min(r(e.maxY,-t+f.minY),h.height)]}function o(e,t){for(var n,r,o=e.getBBox(),i=(e=y(o,p.nodeR1))[0],a=e[1],s=e[2],u=e[3],l=a;l<u;l+=1)for(var c=i;c<s;c+=1)t<0&&h[c+l*h.width]<=0||(n=d(c,f.minX),r=d(l,f.minY),(n=(0,m.pointRectSquareDist)({x:n,y:r},{x:o.minX,y:o.minY,width:o.width,height:o.height}))<Math.pow(p.nodeR1,2)&&(r=Math.sqrt(n)-p.nodeR1,h.cells[c+l*h.width]+=t*r*r))}var i=(p.nodeR0-p.nodeR1)*(p.nodeR0-p.nodeR1),g=(p.edgeR0-p.edgeR1)*(p.edgeR0-p.edgeR1);p.nodeInfluenceFactor&&e.forEach(function(e){o(e,p.nodeInfluenceFactor/i)}),p.edgeInfluenceFactor&&n.forEach(function(e){for(var t,n,r=e,o=p.edgeInfluenceFactor/g,e=r.getBBox(),i=(e=y(e,p.edgeR1))[0],a=e[1],s=e[2],u=e[3],l=a;l<u;l+=1)for(var c=i;c<s;c+=1)o<0&&h.cells[c+l*h.width]<=0||(t=d(c,f.minX),n=d(l,f.minY),(t=(0,m.pointLineSquareDist)({x:t,y:n},r))<Math.pow(p.edgeR1,2)&&(n=Math.sqrt(t)-p.edgeR1,h.cells[c+l*h.width]+=o*n*n))}),p.negativeNodeInfluenceFactor&&t.forEach(function(e){o(e,p.negativeNodeInfluenceFactor/i)})}function S(e,t,n,r){var o=e.getBBox(),e=n[0],i=n[1],a=n[2],n=n[3],s={x:o.minX-t,y:o.minY-t},u={x:o.maxX+t,y:o.minY-t},l={x:o.minX-t,y:o.maxY+t},t={x:o.maxX+t,y:o.maxY+t},c=o.height*o.width;function f(e,t){return o.width*(.5*(e.y-o.minY+(t.y-o.minY)))}if(i)return e?r?s:t:a?r?l:u:f(i,n)<.5*c?i.y>n.y?r?s:t:r?u:l:i.y<n.y?r?l:u:r?t:s;if(n){if(e)return r?u:l;if(a)return r?t:s}return f(e,a)<.5*c?e.x>a.x?r?s:t:r?l:u:e.x<a.x?r?u:l:r?t:s}t.genBubbleSet=function(o,t,e){var n=Object.assign(b,e),r=(0,m.getPointsCenter)(o.map(function(e){return{x:e.getModel().x,y:e.getModel().y}})),i=[],a=[];(o=o.sort(function(e,t){return(0,m.squareDist)({x:e.getModel().x,y:e.getModel().y},r)-(0,m.squareDist)({x:t.getModel().x,y:t.getModel().y},r)})).forEach(function(e){(function(e,t,n,r,o){i=e,a=t,s=null,u=Number.POSITIVE_INFINITY,n.forEach(function(e){var t={x:i.getModel().x,y:i.getModel().y},n={x:e.getModel().x,y:e.getModel().y},r=(0,m.squareDist)(t,n),o=new m.Line(t.x,t.y,n.x,n.y),t=a.reduce(function(e,t){return 0<(0,m.fractionToLine)(t,o)?e+1:e},0);r*Math.pow(t+1,2)<u&&(s=e,u=r*Math.pow(t+1,2))});var i,a,s,u,n=s;if(null===n)return[];for(var l=function(e,u,t,l){var c=[],f=[];f.push(e);for(var h=!0,n=0,p=function(t,e){var n=!1;return e.forEach(function(e){n||((0,m.isPointsOverlap)(t,{x:e.x1,y:e.y1})||(0,m.isPointsOverlap)(t,{x:e.x2,y:e.y2}))&&(n=!0)}),n},d=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n].getBBox(),o=[[o.x,o.y],[o.x+o.width,o.y],[o.x,o.y+o.height],[o.x+o.width,o.y+o.height]];if((0,m.isPointInPolygon)(o,e.x,e.y))return!0}return!1};h&&n<t;)for(h=!1;!h&&f.length;)!function(){var i,e,a=f.pop(),s=_(u,a);s&&(e=(0,m.itemIntersectByLine)(s,a),i=e[0],2===e[1])&&((e=function(e){for(var t=l,n=S(s,t,i,e),r=p(n,f)||p(n,c),o=d(n,u);!r&&o&&1<=t;)n=S(s,t/=1.5,i,e),r=p(n,f)||p(n,c),o=d(n,u);!n||r||e&&o||(f.push(new m.Line(a.x1,a.y1,n.x,n.y)),f.push(new m.Line(n.x,n.y,a.x2,a.y2)),h=!0)})(!0),h||e(!1)),h||c.push(a),n+=1}();for(;f.length;)c.push(f.pop());return c}(new m.Line(e.getModel().x,e.getModel().y,n.getModel().x,n.getModel().y),t,r,o),c=[];0<l.length;){var f=l.pop();if(0===l.length){c.push(f);break}var h=l.pop(),p=new m.Line(f.x1,f.y1,h.x2,h.y2);_(t,p)?(c.push(f),l.push(h)):l.push(p)}return c})(e,t,i,n.maxRoutingIterations,n.morphBuffer).forEach(function(e){a.push(e)}),i.push(e)});for(var s,u,l=function(e,t,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},o=[];e.forEach(function(e){o.push(e.getBBox())}),t.forEach(function(e){o.push(e.getBBox())});for(var i=0,a=o;i<a.length;i++){var s=a[i];r.minX=(s.minX<r.minX?s:r).minX-n,r.minY=(s.minY<r.minY?s:r).minY-n,r.maxX=(s.maxX>r.maxX?s:r).maxX+n,r.maxY=(s.maxY>r.maxY?s:r).maxY+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(o,a,n.nodeR0),c=(e=l.width,u=l.height,s=n.pixelGroupSize,e=Math.ceil(e/s),u=Math.ceil(u/s),{cells:new Float32Array(Math.max(0,e*u)).fill(0),width:e,height:u}),f=[],h=[],p=0;p<n.maxMarchingIterations;p++)if(x(o,t,a,l,c,n),h=[],new w(f=[],c,n.threshold).march()){var d=f.map(function(e){return{x:Math.round(e.x*n.pixelGroupSize+l.minX),y:Math.round(e.y*n.pixelGroupSize+l.minY)}});if(d){var y=d.length;if(1<n.skip)for(y=Math.floor(d.length/n.skip);y<3&&1<n.skip;)--n.skip,y=Math.floor(d.length/n.skip);for(var g=0,v=0;v<y;v+=1,g+=n.skip)h.push({x:d[g].x,y:d[g].y})}if(h&&function(){for(var e=0,t=o;e<t.length;e++){var n=t[e],r=h.map(function(e){return[e.x,e.y]});if(!(0,m.isPointInPolygon)(r,n.getBBox().centerX,n.getBBox().centerY))return}return 1}())return h;if(n.threshold*=.9,p<=.5*n.maxMarchingIterations)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else{if(!(0!==n.nonMemberInfluenceFactor&&0<t.length))break;n.nonMemberInfluenceFactor*=.8}}return h}},25560:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genConvexHull=t.cross=void 0;function u(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)}t.cross=u,t.genConvexHull=function(e){var t=e.map(function(e){return{x:e.getModel().x,y:e.getModel().y}});t.sort(function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x});for(var n={},r=t.length-1;0<=r;r--){var o=t[r],i=o.x,o=o.y;n["".concat(i,"-").concat(o)]&&t.splice(r,1),n["".concat(i,"-").concat(o)]=!0}if(1===t.length)return t;for(var a=[],r=0;r<t.length;r++){for(;2<=a.length&&u(a[a.length-2],a[a.length-1],t[r])<=0;)a.pop();a.push(t[r])}var s=[];for(r=t.length-1;0<=r;r--){for(;2<=s.length&&u(s[s.length-2],s[s.length-1],t[r])<=0;)s.pop();s.push(t[r])}return s.pop(),a.pop(),a.concat(s)}},92100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return i.default}}),t.default=void 0;var r=a(n(27144)),o=(n(95702),n(14996),n(48485),n(88651),n(80180),a(n(22245))),i=a(n(82255));function a(e){return e&&e.__esModule?e:{default:e}}n=r.default;t.default=n},82255:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",e-r,t+o],["L",e+r,t+o],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",e-r,t-o],["L",e+r,t-o],["L",e,t+n],["Z"]]}}},95702:function(e,t,n){"use strict";var y=n(97582),g=n(31834),i=n(30271),r=u(n(36605)),o=u(n(27144)),a=n(15692),s=n(61592);function u(e){return e&&e.__esModule?e:{default:e}}n={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:r.default.nodeLabel.offset,getSize:function(e){var t=(null==(t=this.mergeStyle)?void 0:t.size)||e.size||this.getOptions({}).size||r.default.defaultNode.size;return(0,g.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),t=(0,g.isArray)(t)?t:[t,t]},getLabelStyleByPosition:function(e,t){var n=t.maxLength,r=e.label,n=(n&&(r=(0,s.truncateLabelByLength)(r,n)),t.position||this.labelPosition);if("center"===n)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,g.isNil)(o)&&(o=this.offset);var i,a=this.getSize(e);switch(n){case"top":i={x:0,y:-a[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":i={x:0,y:a[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":i={x:-a[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:i={x:a[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return i.text=r,i},getLabelBgStyleByPosition:function(e,t){var n,r,o;return e&&(t=null==(t=t.style)?void 0:t.background)?(e=e.getBBox(),n=(0,i.formatPadding)(t.padding),r=e.width+n[1]+n[3],o=e.height+n[0]+n[2],(0,y.__assign)((0,y.__assign)({x:e.minX-n[3],y:e.minY-n[0]},t),{width:r,height:o})):{}},drawShape:function(e,t){var n=this.shapeType,e=this.getShapeStyle(e),n=t.addShape(n,{attrs:e,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=n},updateLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),o=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),i=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),a=t.shapeMap["link-point-bottom"]||t.find(function(e){return"link-point-bottom"===e.get("className")}),n=(r&&(s=r.attr()),o&&!s&&(s=o.attr()),i&&!s&&(s=i.attr()),a&&!s&&(s=a.attr()),(0,g.mix)({},s=s||n,e.linkPoints)),s=n.fill,u=n.stroke,l=n.lineWidth,c=(c=n.size/2)||n.r,n=e.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},f=n.left,h=n.right,p=n.top,n=n.bottom,e=this.getSize(e),d=e[0],e=e[1],c={r:c,fill:s,stroke:u,lineWidth:l};r?f||void 0===f?r.attr((0,y.__assign)((0,y.__assign)({},c),{x:-d/2,y:0})):(r.remove(),delete t.shapeMap["link-point-left"]):f&&(t.shapeMap[s="link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d/2,y:0}),className:s,name:s,isAnchorPoint:!0})),o?(h||void 0===h||(o.remove(),delete t.shapeMap["link-point-right"]),o.attr((0,y.__assign)((0,y.__assign)({},c),{x:d/2,y:0}))):h&&(t.shapeMap[u="link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d/2,y:0}),className:u,name:u,isAnchorPoint:!0})),i?(p||void 0===p||(i.remove(),delete t.shapeMap["link-point-top"]),i.attr((0,y.__assign)((0,y.__assign)({},c),{x:0,y:-e/2}))):p&&(t.shapeMap[l="link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-e/2}),className:l,name:l,isAnchorPoint:!0})),a?n||void 0===n?a.attr((0,y.__assign)((0,y.__assign)({},c),{x:0,y:e/2})):(a.remove(),delete t.shapeMap["link-point-bottom"]):n&&(t.shapeMap[r="link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:e/2}),className:r,name:r,isAnchorPoint:!0}))},updateShape:function(e,t,n,r,o){t.get("keyShape").attr((0,y.__assign)({},n)),this.updateLabel(e,t,o),r&&this.updateIcon(e,t)},updateIcon:function(e,t){var n,r,o,i=this,t=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,e=e.icon||{show:void 0,text:void 0},s=e.show,e=e.text,u=t.shapeMap["".concat(this.type,"-icon")]||t.find(function(e){return e.get("name")==="".concat(i.type,"-icon")});u?s||void 0===s?(n=void 0===(n=(o=(0,g.mix)({},u.attr(),a)).width)?20:n,r=void 0===(r=o.height)?20:r,"iconfont"!==o.fontFamily&&!o.hasOwnProperty("text")||(r=n=0),u.attr((0,y.__assign)((0,y.__assign)({},o),{x:-n/2,y:-r/2}))):(u.remove(),delete t.shapeMap["".concat(this.type,"-icon")]):s&&(o="".concat(this.type,"-icon"),e?t.shapeMap[o]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:o,name:o}):(n=a.width,r=a.height,t.shapeMap[o]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},a),{x:-n/2,y:-r/2}),className:o,name:o})),u=t.shapeMap["node-label"]||t.find(function(e){return"node-label"===e.get("name")}))&&u.toFront()}},a=(0,y.__assign)((0,y.__assign)({},a.shapeBase),n);o.default.registerNode("single-node",a)},54402:function(e,t,n){"use strict";var u=n(97582),r=o(n(27144)),n=o(n(36605));function o(e){return e&&e.__esModule?e:{default:e}}r.default.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:n.default.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e),t=(delete r.fill,t.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}));return this.drawClip(e,t),t},drawClip:function(e,t){var n,r,o,i,a,s,e=(this.mergeStyle||this.getOptions(e)).clipCfg;e.show&&(n=e.type,a=e.x,s=e.y,r=e.style,"circle"===n?(o=e.r,t.setClip({type:"circle",attrs:(0,u.__assign)({r:o,x:a,y:s},r)})):"rect"===n?(o=e.width,i=e.height,t.setClip({type:"rect",attrs:(0,u.__assign)({x:a-o/2,y:s-i/2,width:o,height:i},r)})):"ellipse"===n?(o=e.rx,i=e.ry,t.setClip({type:"ellipse",attrs:(0,u.__assign)({x:a,y:s,rx:o,ry:i},r)})):"polygon"===n?(a=e.points,t.setClip({type:"polygon",attrs:(0,u.__assign)({points:a},r)})):"path"===n&&(s=e.path,t.setClip({type:"path",attrs:(0,u.__assign)({path:s},r)})))},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,t=t.img,e=this.getSize(e),r=e[0],o=e[1];return n&&(r=n.width||e[0],o=n.height||e[1]),(0,u.__assign)({x:-r/2,y:-o/2,width:r,height:o,img:t},n)},updateShapeStyle:function(e,t){var n=t.getContainer(),r="".concat(this.itemType,"-shape"),n=n.shapeMap[r]||n.find(function(e){return e.get("className")===r})||t.getKeyShape(),t=this.getShapeStyle(e);n&&!n.destroyed&&n.attr(t)}},"single-node")},80180:function(e,t,n){"use strict";n(60902),n(97097),n(54402)},60902:function(e,t,n){"use strict";var r=n(97582),i=n(31834),o=a(n(36605));function a(e){return e&&e.__esModule?e:{default:e}}a(n(27144)).default.registerNode("simple-circle",{options:{size:o.default.defaultNode.size,style:{x:0,y:0,stroke:o.default.defaultNode.style.stroke,fill:o.default.defaultNode.style.fill,lineWidth:o.default.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.default.nodeLabel.style.fill,fontSize:o.default.nodeLabel.style.fontSize,fontFamily:o.default.windowFontFamily}},stateStyles:(0,r.__assign)({},o.default.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var e=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),e=t.addShape("circle",{attrs:e,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=e},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,i.deepMix)({},t,n),n=this.getSize(e)[0]/2;return(0,r.__assign)({x:0,y:0,r:n},t)},update:function(e,t,n){var r=this.getSize(e),r={stroke:e.color,r:r[0]/2},o=t.get("keyShape"),o=(0,i.deepMix)({},o.attr(),r,e.style);this.updateShape(e,t,o,!0,n)}},"single-node")},97097:function(e,t,n){"use strict";var r=n(97582),a=n(31834),o=i(n(36605));function i(e){return e&&e.__esModule?e:{default:e}}i(n(27144)).default.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:o.default.defaultNode.style.stroke,fill:o.default.defaultNode.style.fill,lineWidth:o.default.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.default.nodeLabel.style.fill,fontSize:o.default.nodeLabel.style.fontSize,fontFamily:o.default.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,r.__assign)({},o.default.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){e=this.getShapeStyle(e);return t.addShape("rect",{attrs:e,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,a.mix)({},t,n),n=this.getSize(e),e=t.width||n[0],n=t.height||n[1];return(0,r.__assign)({x:-e/2,y:-n/2,width:e,height:n},t)},update:function(e,t,n){t.getContainer();var r=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),i=t.get("keyShape"),o=(e.size||(o[0]=i.attr("width")||r.width,o[1]=i.attr("height")||r.height),{stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]}),r=(0,a.mix)({},r,i.attr(),o),r=(0,a.mix)(r,e.style);this.updateShape(e,t,r,!1,n)}},"single-node")},27144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ShapeFactoryBase=void 0;var a=n(97582),r=n(31834),s=n(86648),o={};function i(e){return o[e]||(o[e]=(0,r.upperFirst)(e)),o[e]}var u={defaultShapeType:"defaultType",className:null,getShape:function(e){return this[e]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(e,t,n){var e=this.getShape(e),r=(n.shapeMap={},e.draw(t,n));return e.afterDraw&&e.afterDraw(t,n,r),r},baseUpdate:function(e,t,n,r){var o,e=this.getShape(e);e.update&&(e.mergeStyle=null==(o=e.getOptions)?void 0:o.call(e,t,r),null!=(o=e.update))&&o.call(e,t,n,r),e.afterUpdate&&e.afterUpdate(t,n)},setState:function(e,t,n,r){this.getShape(e).setState(t,n,r)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,t){return this.getShape(e).getControlPoints(t)},getAnchorPoints:function(e,t){return this.getShape(e).getAnchorPoints(t)}},l=(t.ShapeFactoryBase=u,{options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints;return e.anchorPoints||t}}),n=(c.registerFactory=function(e,t){e=i(e),t=(0,a.__assign)((0,a.__assign)({},u),t);return(c[e]=t).className=e,t},c.getFactory=function(e){return c[i(e)]},c.registerNode=function(e,t,n){var r,o,i=c.Node;return(r="string"==typeof t||"function"==typeof t?(r=(0,s.createNodeFromXML)(t),(0,a.__assign)((0,a.__assign)({},i.getShape("single-node")),r)):t.jsx?(o=t.jsx,r=(0,s.createNodeFromXML)(o),(0,a.__assign)((0,a.__assign)((0,a.__assign)({},i.getShape("single-node")),r),t)):(i.getShape(n),o=n?i.getShape(n):l,(0,a.__assign)((0,a.__assign)({},o),t))).type=e,r.itemType="node",i[e]=r},c.registerEdge=function(e,t,n){var r=c.Edge,n=n?r.getShape(n):l,n=(0,a.__assign)((0,a.__assign)({},n),t);return n.type=e,n.itemType="edge",r[e]=n},c.registerCombo=function(e,t,n){var r=c.Combo,n=n?r.getShape(n):l,n=(0,a.__assign)((0,a.__assign)({},n),t);return n.type=e,n.itemType="combo",r[e]=n},c);function c(){}(t.default=n).registerFactory("node",{defaultShapeType:"circle"}),n.registerFactory("edge",{defaultShapeType:"line"}),n.registerFactory("combo",{defaultShapeType:"circle"})},15692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shapeBase=t.CLS_LABEL_BG_SUFFIX=void 0;var c=n(97582),r=(o=n(36605))&&o.__esModule?o:{default:o},o=n(43708),S=n(31834),O=n(61592);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=o.ext.transform,E=["startArrow","endArrow"],n={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},k={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:n,combo:n},o=(t.CLS_LABEL_BG_SUFFIX="-label-bg",{options:{labelCfg:{style:{fontFamily:r.default.windowFontFamily}},descriptionCfg:{style:{fontFamily:r.default.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return"move"===t||null!=t&&t.includes("bbox")?e:(0,S.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);return n.set("className",this.itemType+"-shape"),t.shapeMap[this.itemType+"-shape"]=n,e.label&&((e=this.drawLabel(e,t)).set("className",this.itemType+"-label"),t.shapeMap[this.itemType+"-label"]=e),n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n,r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg||{},o=this.getLabelStyle(e,r,t),i=o.rotate,r=(delete o.rotate,t.addShape("text",{attrs:o,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0}));if(t.shapeMap["text-shape"]=r,!isNaN(i)&&""!==i){var a=r.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(o.rotateCenter)switch(o.rotateCenter){case"center":s=f(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=f(s,[["t",-o.x,-o.y],["r",i],["t",o.x,o.y]]);break;case"leftcenter":s=f(s,[["t",-o.x,-o.y-a.height/2],["r",i],["t",o.x,o.y+a.height/2]]);break;default:s=f(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]])}else s=f(s,[["t",-o.x,-o.y-a.height/2],["r",i],["t",o.x,o.y+a.height/2]]);r.setMatrix(s)}return o.background&&(e=this.drawLabelBg(e,t,r),n=this.itemType+"-label-bg",e.set("classname",n),t.shapeMap[n]=e,r.toFront()),r},drawLabelBg:function(e,t,n){var r=this.options.labelCfg,r=(0,S.mix)({},r,e.labelCfg),e=this.getLabelBgStyleByPosition(n,r),n=t.addShape("rect",{name:"text-bg-shape",attrs:e,labelRelated:!0});return t.shapeMap["text-bg-shape"]=n},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){e=this.getLabelStyleByPosition(e,t,n),n="".concat(this.itemType,"Label"),n=r.default[n]?r.default[n].style:null;return(0,c.__assign)((0,c.__assign)((0,c.__assign)({},n),e),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var r,o,i=t.getContainer(),a=t.getKeyShape(),s=(0,S.mix)({},a.attr(),e.style);for(o in s)!function(t){var e,n=s[t];(0,S.isPlainObject)(n)?null!=(e=(null==(r=i.shapeMap)?void 0:r[t])||i.find(function(e){return e.get("name")===t}))&&e.attr(n):a.attr(((e={})[t]=n,e))}(o)},updateLabel:function(e,t,n){var r,o,t=t.getContainer(),i=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,i=void 0===i?{}:i,a=this.itemType+"-label",s=t.shapeMap[a]||t.find(function(e){return e.get("className")===a}),u=this.itemType+"-label-bg",l=t.shapeMap[u]||t.find(function(e){return e.get("className")===u});s&&void 0===e.label&&(t.removeChild(s),delete t.shapeMap[a],l)&&(t.removeChild(l),delete t.shapeMap[u]),!e.label&&""!==e.label||(s?(n&&"bbox|label"!==n&&("edge"!==this.itemType||"style"===n)||(i=(0,S.deepMix)(i,e.labelCfg)),n=this.getLabelStyleByPosition(e,i,t),r=null==(r=e.labelCfg)?void 0:r.style,r=(n=(0,c.__assign)((0,c.__assign)({},n),r)).rotate,delete n.rotate,isNaN(r)||""===r?1!==(null==(o=s.getMatrix())?void 0:o[4])&&s.resetMatrix():(o=f(o=[1,0,0,0,1,0,0,0,1],[["t",-n.x,-n.y],["r",r],["t",n.x,n.y]]),n.matrix=o),s.attr(n),l?n.background?(r=this.getLabelBgStyleByPosition(s,i),l.attr(r)):t.removeChild(l):n.background&&((l=this.drawLabelBg(e,t,s)).set("classname",u),t.shapeMap[u]=l,s.toFront())):((o=this.drawLabel(e,t)).set("className",a),t.shapeMap[a]=o))},afterUpdate:function(e,t){},setState:function(e,t,n){var r,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),e=(0,S.isBoolean)(t)?e:"".concat(e,":").concat(t),i=this.getStateStyle(e,n),e=n.getStateStyle(e);if(e||i){var u=(0,S.mix)({},e||i),l=n.getContainer(),c={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(c.r=1,c.width=1,c.height=1),t)for(h in u)!function(t){var e,n=u[t];(0,S.isPlainObject)(n)&&!E.includes(t)?null!=(e=(null==(o=l.shapeMap)?void 0:o[t])||l.find(function(e){return e.get("name")===t}))&&e.attr(n):a.attr(((e={})[t]=n,e))}(h);else{var f,h,p,d=(0,O.cloneBesidesImg)(n.getCurrentStatesStyle()),e=n.getModel(),y=(0,S.mix)({},e.style,(0,O.cloneBesidesImg)(n.getOriginStyle())),g=a.get("name"),v=a.attr(),m={},b=(Object.keys(v).forEach(function(e){var t;"img"!==e&&((t=v[e])&&"object"===P(t)?m[e]=(0,S.clone)(t):m[e]=t)}),{});for(f in u)!function(r){var o,i,e=u[r];(0,S.isPlainObject)(e)&&!E.includes(r)?(o=l.shapeMap[r]||l.find(function(e){return e.get("name")===r}))&&(i=(0,O.cloneBesidesImg)(o.attr()),(0,S.each)(e,function(e,t){var n;r===g&&m[t]&&!c[t]?(delete m[t],n=y[r][t]||k[s][t],a.attr(t,n)):!i[t]&&0!==i[t]||(delete i[t],n=y[r][t]||k[s][t],o.attr(t,n))}),b[r]=i):m[r]&&!c[r]&&(delete m[r],e=y[r]||(y[g]?y[g][r]:void 0)||k[s][r],a.attr(r,e))}(f);for(h in g?b[g]=m:(0,S.mix)(b,m),d)c[h]||(p=d[h],(0,S.isPlainObject)(p)&&!E.includes(h))||(g?((0,S.mix)(y[g],((r={})[h]=p,r)),delete y[h]):(0,S.mix)(y,((r={})[h]=p,r)),delete d[h]);var w,_={},x=((0,S.deepMix)(_,y,b,d),!1);for(w in _)!function(t){var e,n=_[t];(0,S.isPlainObject)(n)&&!E.includes(t)?(e=l.shapeMap[t]||l.find(function(e){return e.get("name")===t}))&&("text"!==e.get("type")&&!e.get("labelRelated")||(delete n.x,delete n.y,delete n.matrix),t===g&&("combo"===s&&(delete n.r,delete n.width,delete n.height),x=!0),e.attr(n)):x||(e=n||k[s][t],"combo"===s?g||a.attr(((n={})[t]=e,n)):a.attr(((n={})[t]=e,n)))}(w)}}}},getStateStyle:function(e,t){var n=t.getModel(),t=t.getType(),r=this.getOptions(n),o=r.stateStyles,r=r.style,r=void 0===r?{}:r,n=n.stateStyles?n.stateStyles[e]:o&&o[e];return"combo"===t?(0,S.clone)(n):(0,S.mix)({},r,n)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){return(null==e?void 0:e.anchorPoints)||(null==(e=this.getCustomConfig(e))?void 0:e.anchorPoints)||(null==(e=this.options)?void 0:e.anchorPoints)}});t.shapeBase=o},86648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTwoTarget=g,t.createNodeFromXML=function(r){function o(e){var t="function"==typeof r?r(e):r,t=i(t)(e),n=document.createElement("div");return n.innerHTML=t,t=y(p(n.children[0],e)),n.remove(),t}var l={};return{draw:function(e,s){var t=o(e),u=s;return function e(t){var n=t.attrs,n=void 0===n?{}:n,r=t.bbox,o=t.type,i=t.children,a=(0,c.__rest)(t,["attrs","bbox","type","children"]);"group"!==t.type&&(n=s.addShape(t.type,(0,c.__assign)({attrs:n,origin:{bbox:r,type:o,children:i}},a)),t.keyshape)&&(u=n),t.children&&t.children.forEach(e)}(t),l[e.id]=[t],u},update:function(e,i){l[e.id]||(l[e.id]=[]);function a(e){var t;"group"!==e.type&&n.addShape(e.type,{attrs:e.attrs}),null!=(t=e.children)&&t.length&&e.children.map(a)}function s(t){var e=u.find(function(e){return e.attrs.key===t.attrs.key});e&&n.removeChild(e),null!=(e=t.children)&&e.length&&t.children.map(s)}var n=i.getContainer(),u=n.get("children"),t=o(e),r=g(t,l[e.id].pop());!function e(t){var n=t.key;if("group"!==t.type){var r,o=u.find(function(e){return e.attrs.key===n});switch(t.action){case"change":o&&(r=t.val.keyshape?i.getOriginStyle():{},o.attr((0,c.__assign)((0,c.__assign)({},r),t.val.attrs)));break;case"add":a(t.val);break;case"delete":s(t.val);break;case"restructure":s(t.formerTarget),a(t.nowTarget)}}t.children&&t.children.forEach(e)}(r),l[e.id].push(t)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}},t.generateTarget=y,t.getBBox=d,t.parseXML=p,t.xmlDataRenderer=void 0;var c=n(97582),s=n(31834),u=n(61592);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){if("string"!=typeof e)return e;function t(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}}var n=t(e);if("string"!=typeof n)return n;for(var r=function(e){return e[e.length-1]},o=e.trim(),i=[],a=[],s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(function(e){return r(a)===e})},u=null,l=0,c="";l<o.length;){var f=o[l],h=s('"',"'");if(h||f.trim()){var p="\\"===o[l-1],d=s("}"),y=s("]"),g=s(","),v=r(i);if(h)r(a)!==f||p?c+=f:(a.pop(),h=t(c),v.push(h),u=h,c="");else if(y&&","===f)c&&(v.push(t(c)),c="");else if(d&&":"===f)a.push(","),c&&(v.push(c),c="");else if(g&&","===f)c&&(v.push(t(c)),c=""),a.pop();else if("}"===f&&(d||g)){c&&(v.push(t(c)),c=""),g&&a.pop();for(var m={},b=1;b<v.length;b+=2)m[v[b-1]]=v[b];i.pop(),i.length&&r(i).push(m),a.pop(),u=m}else"]"===f&&y?(c&&(v.push(t(c)),c=""),i.pop(),i.length&&r(i).push(v),a.pop(),u=v):"{"===f?(i.push([]),a.push("}")):"["===f?(i.push([]),a.push("]")):'"'===f?a.push('"'):"'"===f?a.push("'"):c+=f}l+=1}return u||c}var h=function(e){return e.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)})},i=function(a){return function(e){for(var t,n=a.length,r=[],o=0,i="";o<n;)"{"===a[o]&&"{"===a[o+1]?(r.push(i),i="",o+=2):"}"===a[o]&&"}"===a[o+1]?(r.length&&(t=r.pop(),i=(0,s.get)(e,i,t.endsWith("=")?'"{'.concat(i,'}"'):i),r.push(t+i)),o+=2,i=""):(i+=a[o],o+=1);return r.push(i),r.map(function(e,t){return r[t-1]&&r[t-1].endsWith("=")?'"{'.concat(e,'}"'):e}).join("")}};function p(r,t){var o={},e=r.getAttributeNames&&r.getAttributeNames()||[],n=r.children&&Array.from(r.children).map(function(e){return p(e,t)}),i={},a=r.tagName?r.tagName.toLowerCase():"group";return"text"===a&&(o.text=r.innerText),"img"===(i.type=a)&&(i.type="image"),Array.from(e).forEach(function(t){var e,n=h(t),t=r.getAttribute(t);try{"style"===n||"attrs"===n?(e=f(t),o=(0,c.__assign)((0,c.__assign)({},o),e)):i[n]=f(t)}catch(e){if("style"===n)throw e;i[n]=t}}),i.attrs=o,t&&t.style&&i.name&&"object"===l(t.style[i.name])&&(i.attrs=(0,c.__assign)((0,c.__assign)({},i.attrs),t.style[i.name])),t&&t.style&&i.keyshape&&(i.attrs=(0,c.__assign)((0,c.__assign)({},i.attrs),t.style)),n.length&&(i.children=n),i}function d(e,t,n){var r,o,i=e.attrs,a=void 0===i?{}:i,s={x:t.x||0,y:t.y||0,width:n.width||0,height:n.height||0};switch(e.type){case"maker":case"circle":a.r&&(o=2*a.r,r=2*a.r);break;case"text":a.text&&(o=(0,u.getTextSize)(a.text,a.fontSize||12)[0],s.y+=r=16,s.height=r,s.width=o,e.attrs=(0,c.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(o=a.width),a.height&&(r=a.height)}return 0<=r&&(s.height=r),0<=o&&(s.width=o),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}function y(e,t){var n=(0,c.__assign)({x:0,y:0,width:0,height:0},t=void 0===t?{x:0,y:0}:t);if(null!=(r=e.children)&&r.length){var r=e.attrs,o=void 0===r?{}:r,r=o.marginTop,i=(0,c.__assign)({},t);r&&(i.y+=r);for(var a=0;a<e.children.length;a++){e.children[a].attrs.key="".concat(o.key||"root"," -").concat(a," ");var s,u=y(e.children[a],i);u.bbox&&(s=u.bbox,"inline"===u.attrs.next?i.x+=u.bbox.width:i.y+=u.bbox.height,s.width+s.x>n.width&&(n.width=s.width+s.x),s.height+s.y>n.height)&&(n.height=s.height+s.y)}}return e.bbox=d(e,t,n),e.attrs=(0,c.__assign)((0,c.__assign)({},e.attrs),e.bbox),e}function g(t,n){var e=(t||{}).type,r=((null==n?void 0:n.attrs)||{}).key;if(r&&t&&(t.attrs.key=r),!t&&n)return{action:"delete",val:n,type:e,key:r};if(t&&!n)return{action:"add",val:t,type:e};if(!t&&!n)return{action:"same",type:e};var o=[];if(0<(null==(l=t.children)?void 0:l.length)||0<(null==(l=n.children)?void 0:l.length))for(var i=Math.max(null==(l=t.children)?void 0:l.length,null==(l=n.children)?void 0:l.length),a=n.children||[],s=t.children||[],u=0;u<i;u+=1)o.push(g(s[u],a[u]));var l=Object.keys(n.attrs),c=Object.keys(t.attrs);return n.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:n,key:r,children:o}:l.filter(function(e){return"children"!==e}).some(function(e){return t.attrs[e]!==n.attrs[e]||!c.includes(e)})?{action:"change",val:t,children:o,type:e,key:r}:{action:"same",children:o,type:e,key:r}}t.xmlDataRenderer=i},36605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="rgb(95, 149, 255)",r="rgb(253, 253, 253)",o="rgb(247, 250, 255)",i="rgb(224, 224, 224)",a="rgb(224, 224, 224)",o={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:n,fill:"rgb(239, 244, 255)"},size:20,color:n,linkPoints:{size:8,lineWidth:1,fill:o,stroke:n}},nodeStateStyles:{active:{fill:o,stroke:n,lineWidth:2,shadowColor:n,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:n,lineWidth:4,shadowColor:n,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:i,lineAppendWidth:2},color:i},edgeStateStyles:{active:{stroke:n,lineWidth:1},selected:{stroke:n,lineWidth:2,shadowColor:n,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:n,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:r,lineWidth:1,stroke:a,r:5,width:20,height:10},size:[20,5],color:a,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:n,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:n,lineWidth:2,fill:r,shadowColor:n,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:r,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:r,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"};t.default=o},93894:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){this.graph=e,this.destroyed=!1,this.initEvents()}},49744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ItemController",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ModeController",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"StateController",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ViewController",{enumerable:!0,get:function(){return o.default}});var r=s(n(97500)),o=s(n(31133)),i=s(n(49749)),a=s(n(88081));function s(e){return e&&e.__esModule?e:{default:e}}},49749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=n(97582),d=n(31834),p=r(n(4779)),y=r(n(14319)),g=r(n(43059)),v=n(61592);function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var n=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,d.throttle)(function(e){var t=n.graph;t&&!t.get("destroyed")&&(t=n.edgeToBeUpdateMap)&&(t=Object.values(t)).length&&(t.forEach(function(e){var t,n,r=e.edge;r&&!r.destroyed&&(t=r.getSource(),n=r.getTarget(),t)&&!t.destroyed&&n&&!n.destroyed&&r.refresh(e.updateType)}),n.edgeToBeUpdateMap={})},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}o.prototype.addItem=function(e,n){var r,t,o,i,a=this.graph,s="vedge"===e?"edge":e,u=a.get("".concat(s,"Group"))||a.get("group"),l=(0,d.upperFirst)(s),c=null,f=a.get(s+(0,d.upperFirst)("stateStyles"))||{},h=a.get("default"+l),l=(n.stateStyles&&(f=n.stateStyles),h&&(0,d.each)(h,function(e,t){(0,d.isObject)(e)&&!(0,d.isArray)(e)?n[t]=(0,d.deepMix)({},e,n[t]):(0,d.isArray)(e)?n[t]=n[t]||(0,d.clone)(h[t]):n[t]=n[t]||h[t]}),a.get(s+"Mapper"));if(l&&((r=l(n)).stateStyles&&(f=r.stateStyles,delete r.stateStyles),(0,d.each)(r,function(e,t){(0,d.isObject)(e)&&!(0,d.isArray)(e)?n[t]=(0,d.deepMix)({},n[t],e):n[t]=r[t]||n[t]})),a.emit("beforeadditem",{type:e,model:n}),"edge"===e||"vedge"===e){var s=void 0,l=void 0,s=n.source,l=n.target;if(s&&(0,d.isString)(s)&&(s=a.findById(s)),l&&(0,d.isString)(l)&&(l=a.findById(l)),!s||!l)return void console.warn("The source or target node of edge ".concat(n.id," does not exist!"));s.getType&&"combo"===s.getType()&&(n.isComboEdge=!0),l.getType&&"combo"===l.getType()&&(n.isComboEdge=!0),c=new p.default({model:n,source:s,target:l,styles:f,linkCenter:a.get("linkCenter"),group:u.addGroup()})}else"node"===e?c=new y.default({model:n,styles:f,group:u.addGroup()}):"combo"===e&&(s=n.children,l=(0,v.getComboBBox)(s,a),t=o=void 0,isNaN(l.x)?isNaN(n.x)&&(o=100*Math.random()):o=l.x,isNaN(l.y)?isNaN(n.y)&&(t=100*Math.random()):t=l.y,isNaN(n.x)||isNaN(n.y)?(n.x=o,n.y=t):(o=n.x-o,t=n.y-t,this.updateComboSucceeds(n.id,o,t,s)),(o=u.addGroup()).setZIndex(n.depth),c=new g.default({model:n,styles:f,animate:a.get("animate"),bbox:n.collapsed?(0,v.getComboBBox)([],a):l,group:o}),n.collapsed||"circle"!==c.getKeyShape().get("type")||(l.width=Math.hypot(l.height,l.width),l.height=l.width,c.set("bbox",l),c.refresh()),i=c.getModel(),(s||[]).forEach(function(e){var t=a.findById(e.id);c.addChild(t),e.depth=i.depth+2}));if(c)return c.setOptimize(a.getNodes().length>a.get("optimizeThreshold")),a.get("".concat(e,"s")).push(c),a.get("itemMap")[c.get("id")]=c,a.emit("afteradditem",{item:c,model:n}),c},o.prototype.updateItem=function(t,n){var e,r,o,i,a,s,u,l,c=this,f=this.graph;(t=(0,d.isString)(t)?f.findById(t):t)&&!t.destroyed&&(e="",t.getType&&(e=t.getType()),a=f.get(e+"Mapper"),u=(r=t.getModel()).x,l=r.y,o=t.getUpdateType(n),a?(a=a((0,d.deepMix)({},r,n)),i=(0,d.deepMix)({},r,a,n),a.stateStyles&&(t.set("styles",i.stateStyles),delete i.stateStyles),(0,d.each)(i,function(e,t){n[t]=e})):(0,d.each)(n,function(e,t){r[t]&&(0,d.isObject)(e)&&!(0,d.isArray)(e)&&(n[t]=(0,h.__assign)((0,h.__assign)({},r[t]),n[t]))}),f.emit("beforeupdateitem",{item:t,cfg:n}),"edge"===e?(n.source&&(a=n.source,(0,d.isString)(a)&&(a=f.findById(a)),t.setSource(a)),n.target&&(i=n.target,(0,d.isString)(i)&&(i=f.findById(i)),t.setTarget(i)),t.update(n)):"node"===e?(t.update(n,o),a=t.getEdges(),"move"===o?(0,d.each)(a,function(e){c.edgeToBeUpdateMap[e.getID()]={edge:e,updateType:o},c.throttleRefresh()}):null!=o&&o.includes("bbox")&&(0,d.each)(a,function(e){e.refresh(o)})):"combo"===e&&(t.update(n,o),isNaN(n.x)&&isNaN(n.y)||(i=n.x-u||0,a=n.y-l||0,this.updateComboSucceeds(r.id,i,a)),s=t.getEdges(),null!=o&&o.includes("bbox")||"move"===o)&&"combo"===e&&(u=t.get("shapeFactory"),l=r.type||"circle",(void 0===r.animate||void 0===n.animate?null!=(a=null==(i=u[l])?void 0:i.options)&&a.animate:r.animate||n.animate)?setTimeout(function(){var e;t&&!t.destroyed&&(e=t.getKeyShape())&&!e.destroyed&&(0,d.each)(s,function(e){e&&!e.destroyed&&e.refresh()})},201):(0,d.each)(s,function(e){e.refresh()})),t.setOptimize(f.getNodes().length>f.get("optimizeThreshold")),f.emit("afterupdateitem",{item:t,cfg:n}))},o.prototype.updateCombo=function(t,e,n){var r,o,i,a=this,s=this.graph;(t=(0,d.isString)(t)?s.findById(t):t)&&!t.destroyed&&(r=t.getModel(),s=(e=(0,v.getComboBBox)(e,s,t)).x,o=e.y,t.set("bbox",e),e=s,i=o,i=n?(e=isNaN(r.x)?s:r.x,isNaN(r.y)?o:r.y):(e=isNaN(s)?r.x:s,isNaN(o)?r.y:o),t.update({x:e,y:i}),n=t.get("shapeFactory"),s=r.type||"circle",(void 0===r.animate?null!=(e=null==(o=n[s])?void 0:o.options)&&e.animate:r.animate)?setTimeout(function(){var e;t&&!t.destroyed&&(e=t.getKeyShape())&&!e.destroyed&&(t.getShapeCfg(r),a.updateComboEdges(t))},201):this.updateComboEdges(t))},o.prototype.updateComboEdges=function(e){for(var t,n=e.getEdges()||[],r=0;r<n.length;r++){var o=n[r];null!=o&&o.destroyed||null!=(t=null==o?void 0:o.getSource())&&t.destroyed||null!=(t=null==o?void 0:o.getTarget())&&t.destroyed||o.refresh()}},o.prototype.collapseCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph,e=(e=(0,d.isString)(e)?n.findById(e):e).getChildren();e.nodes.forEach(function(e){n.hideItem(e,t)}),e.combos.forEach(function(e){n.hideItem(e,t)})},o.prototype.updateComboSucceeds=function(t,n,r,e){var o,i=this,a=(void 0===e&&(e=[]),this.graph);(n||r)&&(null!=(o=e)&&o.length||null!=(e=a.get("comboTrees"))&&e.forEach(function(e){(0,v.traverseTree)(e,function(e){return e.id!==t||(o=e.children,!1)})}),null!=o)&&o.forEach(function(e){var t=a.findById(e.id);t&&(t=t.getModel(),i.updateItem(e.id,{x:(t.x||0)+n,y:(t.y||0)+r}))})},o.prototype.expandCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph,e=(e=(0,d.isString)(e)?n.findById(e):e).getChildren(),r=new Set;e.nodes.forEach(function(e){n.showItem(e,t),e.getEdges().forEach(function(e){return r.add(e)})}),e.combos.forEach(function(e){e.getModel().collapsed?e.show():n.showItem(e,t),e.getEdges().forEach(function(e){return r.add(e)})}),r.forEach(function(e){return e.refresh()})},o.prototype.removeItem=function(e){var t=this,n=this.graph;if((e=(0,d.isString)(e)?n.findById(e):e)&&!e.destroyed){var r=(0,d.clone)(e.getModel()),o="",i=(e.getType&&(o=e.getType()),n.emit("beforeremoveitem",{item:r,type:o}),n.get("".concat(o,"s"))),a=i.indexOf(e),i=(-1<a&&i.splice(a,1),"edge"===o&&-1<(a=(i=n.get("v".concat(o,"s"))).indexOf(e))&&i.splice(a,1),e.get("id")),a=(delete n.get("itemMap")[i],n.get("comboTrees")),s=e.get("id");if("node"===o){var u,l,i=e.getModel().comboId;a&&i&&(l=!1,(u=a).forEach(function(e){l||(0,v.traverseTree)(e,function(e){var t;return e.id===s&&u?(t=u.indexOf(e),u.splice(t,1),!(l=!0)):(u=e.children,!0)})}));for(var c=(h=e.getEdges()).length-1;0<=c;c--)n.removeItem(h[c],!1);i&&n.updateCombo(i)}else if("combo"===o){var f,h,i=e.getModel().parentId,p=!1;for((a||[]).forEach(function(e){p||(0,v.traverseTree)(e,function(e){return e.id!==s||(f=e,!(p=!0))})}),f.removed=!0,f&&f.children&&f.children.forEach(function(e){t.removeItem(e.id)}),c=(h=e.getEdges()).length;0<=c;c--)n.removeItem(h[c],!1);i&&n.updateCombo(i)}e.destroy(),n.emit("afterremoveitem",{item:r,type:o})}},o.prototype.setItemState=function(e,t,n){var r=this.graph,o=t;(0,d.isString)(n)&&(o="".concat(t,":").concat(n)),e.hasState(o)===n&&n||(0,d.isString)(n)&&e.hasState(o)||(r.emit("beforeitemstatechange",{item:e,state:o,enabled:n}),e.setState(t,n),r.autoPaint(),r.emit("afteritemstatechange",{item:e,state:o,enabled:n}))},o.prototype.priorityState=function(e,t){var n=this.graph,r=e;(0,d.isString)(e)&&(r=n.findById(e)),this.setItemState(r,t,!1),this.setItemState(r,t,!0)},o.prototype.clearItemStates=function(e,t){var n=this.graph;(0,d.isString)(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},o.prototype.refreshItem=function(e){var t=this.graph;(0,d.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},o.prototype.addCombos=function(e,r){var o=this,t=this.graph,e=((e||[]).forEach(function(e){(0,v.traverseTreeUp)(e,function(t){var n;return r.forEach(function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,n=e)}),n&&o.addItem("combo",n),!0})}),t.get("comboGroup"));e&&e.sort()},o.prototype.changeItemVisibility=function(e,t){var n,r,o,i,a,s=this,u=this.graph;if(e=(0,d.isString)(e)?u.findById(e):e)return u.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&"node"===e.getType()?(n=e.getEdges(),(0,d.each)(n,function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&s.changeItemVisibility(e,t)})):e.getType&&"combo"===e.getType()&&(r=u.get("comboTrees"),o=e.get("id"),a=!(i=[]),(r||[]).forEach(function(e){a||e.children&&0!==e.children.length&&(0,v.traverseTree)(e,function(e){return e.id!==o||(i=e.children,!(a=!0))})}),!i||t&&e.getModel().collapsed||i.forEach(function(e){e=u.findById(e.id);s.changeItemVisibility(e,t)}),n=e.getEdges(),(0,d.each)(n,function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&s.changeItemVisibility(e,t)})),u.emit("afteritemvisibilitychange",{item:e,visible:t}),e;console.warn("The item to be shown or hidden does not exist!")},o.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t.default=o},66863:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(97582),u=n(31834),p=n(30271),o=n(42658);function r(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}r.prototype.initLayout=function(){},r.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},r.prototype.getLayoutCfgType=function(e){var t=e.type;return t||(t=e.pipes,Array.isArray(t)?t.map(function(e){return(null==e?void 0:e.type)||""}):null)},r.prototype.isLayoutTypeSame=function(e){var n=this.getLayoutCfgType(e),t=Array.isArray(this.layoutType),r=Array.isArray(n);return t&&r?this.layoutType.every(function(e,t){return e===n[t]}):!Array.isArray(n)&&!Array.isArray(this.layoutType)&&(null==e?void 0:e.type)===this.layoutType},r.prototype.refreshLayout=function(){var e,t=this.graph,n=this.layoutType,r=this.layoutCfg;t&&(e=void 0===(r=(void 0===r?{}:r).animate)&&("force"===n||"force2"===n),r=(0,o.isForce)(n)&&(r||e),t.get("animate")&&!r?t.positionsAnimate("comboCombined"===n):t.refreshPositions("comboCombined"===n))},r.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,e=(0,s.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=e,this.layoutType=e.type||this.layoutType,t||this.layout()},r.prototype.changeData=function(e){this.layout(e)},r.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,n=[];return null!=e&&e.forEach(function(e){var t=null==(t=e.getType)?void 0:t.call(e);t&&n.push(t),e.destroy()}),this.layoutMethods=[],n},r.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},r.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],r=[],o=[],i=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),c=this.graph.getCombos(),f=u.length,h=0;h<f;h++){var p,d=u[h];d&&!d.destroyed&&(p=d.getModel(),(d.isVisible()?t:n).push(p))}for(var y=l.length,h=0;h<y;h++){var g=l[h];g&&!g.destroyed&&(p=g.getModel(),(g.isVisible()?p.isComboEdge?i:r:o).push(p))}var v=c.length;for(h=0;h<v;h++){var m=c[h];m.destroyed||(p=m.getModel(),(m.isVisible()?a:s).push(p))}return{nodes:t,hiddenNodes:n,edges:r,hiddenEdges:o,combos:a,hiddenCombos:s,comboEdges:i,vedges:null==(e=this.graph.get("vedges"))?void 0:e.map(function(e){return e.getModel()})}},r.prototype.relayout=function(e){var o=this,t=this.graph,i=this.layoutMethods,a=this.layoutCfg;if(t&&!t.get("destroyed")){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();e=this.data.nodes;if(!e)return!1;s=this.initPositions(a.center,e)}t.emit("beforelayout"),null!=i&&i.forEach(function(e,n){var r=a[n]||a;s=s.then(function(){var e,t=o.execLayoutMethod(r,n);return n!==i.length-1||null!=(e=a.onAllLayoutEnd)&&e.call(a),t})})}},r.prototype.filterLayoutData=function(e,t){var n,r,o=e.nodes,i=e.edges,a=(0,s.__rest)(e,["nodes","edges"]);return o?(r=(0,u.isFunction)(null==t?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0},o=o.filter(r),r=(0,u.isFunction)(null==t?void 0:t.edgesFilter)?t.edgesFilter:(n=o.reduce(function(e,t){return e[t.id]=!0,e},{}),function(e){return n[e.source]&&n[e.target]}),(0,s.__assign)({nodes:o,edges:i.filter(r)},a)):e},r.prototype.getLayoutBBox=function(e){var t=this.graph,t=(0,u.groupBy)(t.getNodes(),function(e){return e.getModel().layoutOrder}),t=Object.values(t).map(function(e){e=(0,p.calculationItemsBBox)(e);return e.size=[e.width,e.height],e});return{groupNodes:Object.values((0,u.groupBy)(e,"layoutOrder")),layoutNodes:t}},r.prototype.layoutAnimate=function(){},r.prototype.moveToZero=function(){var e=this.graph.get("data").nodes;if(void 0!==e[0].x&&null!==e[0].x&&!(0,p.isNaN)(e[0].x)){for(var t=[0,0],n=e.length,r=0;r<n;r++){var o=e[r];t[0]+=o.x,t[1]+=o.y}for(t[0]/=e.length,t[1]/=e.length,r=0;r<n;r++)(o=e[r]).x-=t[0],o.y-=t[1]}},r.prototype.initPositions=function(h,t){var n;return(0,s.__awaiter)(this,void 0,void 0,function(){var l,c,f;return(0,s.__generator)(this,function(e){return l=this.graph,null!=t&&t.length?(c=t.filter(function(e){return(0,p.isNaN)(e.x)||(0,p.isNaN)(e.y)}),(f=c?c.length:0)?[2,null==(n=this.initWithPreset)?void 0:n.call(this,function(){},function(){var e=.85*l.get("width"),t=.85*l.get("height"),n=Math.ceil(Math.sqrt(f)*(e/t)),r=e/(n-1),o=t/(Math.ceil(f/n)-1);isFinite(r)&&r||(r=0),isFinite(o)&&r||(o=0);for(var i=h[0]-e/2,a=h[1]-t/2,s=0;s<f;s++){var u=c[s];(0,p.isNaN)(+u.x)&&(u.x=s%n*r+i),(0,p.isNaN)(+u.y)&&(u.y=Math.floor(s/n)*o+a)}})]:[2]):[2,Promise.resolve()]})})},r.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t.default=r},97500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(31834),i=(n=n(58279))&&n.__esModule?n:{default:n};function a(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}a.prototype.formatModes=function(){var e=this.modes;(0,u.each)(e,function(n){(0,u.each)(n,function(e,t){(0,u.isString)(e)&&(n[t]={type:e})})})},a.prototype.setBehaviors=function(e){var n,r=this.graph,e=this.modes[e],o=[];(0,u.each)(e||[],function(e){var t=i.default.getBehavior(e.type||e);t&&(n=new t(e))&&(n.bind(r),o.push(n))}),this.currentBehaves=o},a.mergeBehaviors=function(t,e){return(0,u.each)(e,function(e){t.indexOf(e)<0&&((0,u.isString)(e)&&(e={type:e}),t.push(e))}),t},a.filterBehaviors=function(e,n){var r=[];return e.forEach(function(e){var t=(0,u.isString)(e)?e:e.type;n.indexOf(t)<0&&r.push(e)}),r},a.prototype.setMode=function(e){var t=this.modes,n=this.graph,r=e;t[r]&&(n.emit("beforemodechange",{mode:e}),(0,u.each)(this.currentBehaves,function(e){e.delegate&&e.delegate.remove(),e.unbind(n)}),this.setBehaviors(r),n.emit("aftermodechange",{mode:e}),this.mode=e)},a.prototype.getMode=function(){return this.mode},a.prototype.manipulateBehaviors=function(e,t,n){var r,o=this;return(r=(0,u.isArray)(e)?e:[e],(0,u.isArray)(t))?(0,u.each)(t,function(e){o.modes[e]?o.modes[e]=n?a.mergeBehaviors(o.modes[e]||[],r):a.filterBehaviors(o.modes[e]||[],r):n&&(o.modes[e]=r)}):((e=t)||(e=this.mode),this.modes[e]||n&&(this.modes[e]=r),this.modes[e]=n?a.mergeBehaviors(this.modes[e]||[],r):a.filterBehaviors(this.modes[e]||[],r),this.formatModes(),this.setMode(this.mode)),this},a.prototype.updateBehavior=function(e,t,n){(0,u.isString)(e)&&(e={type:e});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,i=0;i<o;i++){if((a=r[i]).type===e.type||a===e.type)return a===e.type&&(a={type:a}),Object.assign(a,t),r[i]=a,this;i===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a,s=r.length,i=0;i<s;i++){if((a=r[i]).type===e.type)return a.updateCfg(t),this;i===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},a.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t.default=a},88081:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(31834);function r(e){this.graph=e,this.destroyed=!1}r.prototype.updateState=function(t,e,n){var r=this.graph.get("states"),o=e;r[o=(0,i.isString)(n)?"".concat(e,":").concat(n):o]||(r[o]=[]),n?r[o].push(t):r[o]=r[o].filter(function(e){return e!==t}),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},r.prototype.updateStates=function(n,e,r){var o=this.graph.get("states");((0,i.isString)(e)?[e]:e).forEach(function(e){var t=e;o[t]||(o[t]=[]),(0,i.isString)(r)&&(t="".concat(e,":").concat(r)),r?o[t].push(n):o[t]=o[t].filter(function(e){return e!==n})}),this.graph.set("states",o),this.graph.emit("graphstatechange",{states:e})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t.default=r},31133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=n(97582),s=n(31834),y=n(30271),p=n(39520),d=n(47592),g=n(61592);function r(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}r.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),t=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(t-e[0]-e[2])/2+e[0]}},r.prototype.fitCenter=function(e,t){var n,r,o,i,a,s,u,l=this.graph,c=l.get("group"),f=l.getNodes();0!==(a=f.length>l.get("optimizeThreshold")?(r=n=1/0,i=o=-1/0,f.forEach(function(e){var e=e.getModel(),t=e.x,e=e.y;t<n&&(n=t),e<r&&(r=e),o<t&&(o=t),i<e&&(i=e)}),f=c.getMatrix()||[1,0,0,0,1,0,0,0,1],s=(u=(0,p.applyMatrix)({x:n,y:r},f)).x,u=u.y,{minX:s,maxX:a=(f=(0,p.applyMatrix)({x:o,y:i},f)).x,minY:u,maxY:f=f.y,width:a-s,height:f-u,x:s,y:u}):c.getCanvasBBox()).width&&0!==a.height&&(f=this.getViewCenter(),s=a.x+a.width/2,u=a.y+a.height/2,l.translate(f.x-s,f.y-u,e,t))},r.prototype.animatedFitView=function(e,t,n,r,o,i,a,s){var u,l,c=this.graph,f=(n=n||{duration:500,easing:"easeCubic"},r.x+o.x-i.x-r.minX),i=r.y+o.y-i.y-r.minY;(0,y.isNaN)(f)||(0,y.isNaN)(i)||(u=(0,d.transform)([1,0,0,0,1,0,0,0,1],[["t",f,i]]),s?(r=c.get("minZoom"),f=c.get("maxZoom"),i=a,r&&a<r?(i=r,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):f&&f<a&&(i=f,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead")),l=(0,d.transform)(u,[["t",-o.x,-o.y],["s",i,i],["t",o.x,o.y]]),s=(0,g.getAnimateCfgWithCallback)({animateCfg:n,callback:function(){e.setMatrix(l),c.emit("viewportchange",{action:"translate",matrix:u}),c.emit("viewportchange",{action:"zoom",matrix:l})}}),e.stopAnimate(),e.setMatrix(t),e.animate(function(e){return{matrix:(0,p.lerpArray)(t,l,e)}},s)):(r=(0,g.getAnimateCfgWithCallback)({animateCfg:n,callback:function(){c.emit("viewportchange",{action:"translate",matrix:u})}}),e.animate(function(e){return{matrix:(0,p.lerpArray)(t,u,e)}},r)))},r.prototype.fitView=function(e,t){var n,r,o,i,a,s,u=this.graph,l=this.getFormatPadding(),c=u.get("width"),f=u.get("height"),h=u.get("group"),p=h.getMatrix()||[1,0,0,0,1,0,0,0,1],d=(h.resetMatrix(),u.getNodes()),d=d.length>u.get("optimizeThreshold")?(r=n=1/0,i=o=-1/0,d.forEach(function(e){var e=e.getModel(),t=e.x,e=e.y;t<n&&(n=t),e<r&&(r=e),o<t&&(o=t),i<e&&(i=e)}),{minX:n,maxX:o,minY:r,maxY:i,width:o-n,height:i-r,x:n,y:r}):h.getCanvasBBox();0!==d.width&&0!==d.height&&(a=this.getViewCenter(),s={x:d.x+d.width/2,y:d.y+d.height/2},c=(c-l[1]-l[3])/d.width,l=(f=(f-l[0]-l[2])/d.height)<c?f:c,e?this.animatedFitView(h,p,t,d,a,s,l,!0):(f=a.x-s.x,c=a.y-s.y,(0,y.isNaN)(f)||(0,y.isNaN)(c)||(u.translate(f,c),u.zoom(l,a))||console.warn("zoom failed, ratio out of range, ratio: %f",l)))},r.prototype.fitViewByRules=function(e,t,n){var r,o,i,a,s,u,l=e.onlyOutOfViewPort,l=void 0!==l&&l,c=e.direction,c=void 0===c?"both":c,e=e.ratioRule,e=void 0===e?"min":e,f=this.graph,h=this.getFormatPadding(),p=f.get("width"),d=f.get("height"),y=f.get("group"),g=y.getMatrix()||[1,0,0,0,1,0,0,0,1],v=(y.resetMatrix(),f.getNodes()),v=v.length>f.get("optimizeThreshold")?(o=r=1/0,a=i=-1/0,v.forEach(function(e){var e=e.getModel(),t=e.x,e=e.y;t<r&&(r=t),e<o&&(o=e),i<t&&(i=t),a<e&&(a=e)}),{minX:r,maxX:i,minY:o,maxY:a,width:i-r,height:a-o,x:r,y:o}):y.getCanvasBBox();0!==v.width&&0!==v.height&&(s=this.getViewCenter(),u={x:v.x+v.width/2,y:v.y+v.height/2},p=(p-h[1]-h[3])/v.width,d=(d-h[0]-h[2])/v.height,h="x"===c?p:"y"===c?d:"max"===e?Math.max(p,d):Math.min(p,d),l&&(h=h<1?h:1),t?this.animatedFitView(y,g,n,v,s,u,h,!0):((c=f.getZoom()*h)<(e=f.get("minZoom"))&&(c=e,console.warn("fitview failed, ratio out of range, ratio: %f",h,"graph minzoom has been used instead")),f.translate(s.x-u.x,s.y-u.y),f.zoomTo(c,s)))},r.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return(0,y.formatPadding)(e)},r.prototype.focusPoint=function(e,t,n){var r,o,i,a,s,u,l=this,c=this.getViewCenter(),c=this.getPointByCanvas(c.x,c.y),f=(f=this.graph.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1];t?(r=(c.x-e.x)*f[0],o=(c.y-e.y)*f[4],u=s=a=i=0,this.graph.get("canvas").animate(function(e){s=r*e,u=o*e,l.graph.translate(s-i,u-a),i=s,a=u},(0,h.__assign)({},n))):this.graph.translate((c.x-e.x)*f[0],(c.y-e.y)*f[4])},r.prototype.getPointByCanvas=function(e,t){var n=(n=this.graph.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1];return(0,p.invertMatrix)({x:e,y:t},n)},r.prototype.getPointByClient=function(e,t){e=this.graph.get("canvas").getPointByClient(e,t);return this.getPointByCanvas(e.x,e.y)},r.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),e=this.getCanvasByPoint(e,t),t=n.getClientByPoint(e.x,e.y);return{x:t.x,y:t.y}},r.prototype.getCanvasByPoint=function(e,t){var n=(n=this.graph.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1];return(0,p.applyMatrix)({x:e,y:t},n)},r.prototype.focus=function(e,t,n){var r,o,i,a;(e=(0,s.isString)(e)?this.graph.findById(e):e)&&(a=i=0,e.getType&&"edge"===e.getType()?(o=e.getSource().get("group").getMatrix(),r=e.getTarget().get("group").getMatrix(),o&&r?(i=(o[6]+r[6])/2,a=(o[7]+r[7])/2):(o||r)&&(i=(o||r)[6],a=(o||r)[7])):(i=(o=(o=e.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1])[6],a=o[7]),this.focusPoint({x:i,y:a},t,n))},r.prototype.focusItems=function(e,t,n,r){if(e.length){var o=this.graph,i=this.getFormatPadding(),a=o.get("width"),s=o.get("height"),u=o.get("group"),l=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var c,f={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,p=e;h<p.length;h++){var d=p[h].getBBox();d.minX<f.minX&&(f.minX=d.minX),d.minY<f.minY&&(f.minY=d.minY),d.maxX>f.maxX&&(f.maxX=d.maxX),d.maxY>f.maxY&&(f.maxY=d.maxY)}f.x=f.minX,f.y=f.minY,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY,0!==f.width&&0!==f.height&&(e=this.getViewCenter(),c={x:f.x+f.width/2,y:f.y+f.height/2},a=(a-i[1]-i[3])/f.width,i=(s=(s-i[0]-i[2])/f.height)<a?s:a,n?this.animatedFitView(u,l,r,f,e,c,i,t):(o.translate(e.x-c.x,e.y-c.y),t&&!o.zoom(i,e)&&console.warn("zoom failed, ratio out of range, ratio: %f",i)))}},r.prototype.changeSize=function(e,t){var n=this.graph;if(!(0,s.isNumber)(e)||!(0,s.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t}),n.get("canvas").changeSize(e,t),n.get("plugins").forEach(function(e){e.get("gridContainer")&&e.positionInit()})},r.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t.default=r},67239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var h=n(97582),r=l(n(73118)),o=n(43708),m=n(31834),a=n(81366),y=n(39520),p=n(29001),i=l(n(36605)),s=n(49744),b=n(61592),u=l(n(65674));function l(e){return e&&e.__esModule?e:{default:e}}var c,g=o.ext.transform,n=(c=r.default,(0,h.__extends)(f,c),f.prototype.init=function(){this.initCanvas();var e=new s.ViewController(this),t=new s.ModeController(this),n=new s.ItemController(this),r=new s.StateController(this);this.set({viewController:e,modeController:t,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},f.prototype.initGroups=function(){var e,t,n,r,o=this.get("canvas");o&&(e=(o.get("el")||{}).id,e=o.addGroup({id:"".concat(o=void 0===e?"g6":e,"-root"),className:i.default.rootContainerClassName}),this.get("groupByTypes")&&(t=e.addGroup({id:"".concat(o,"-edge"),className:i.default.edgeContainerClassName}),r=e.addGroup({id:"".concat(o,"-node"),className:i.default.nodeContainerClassName}),(n=e.addGroup({id:"".concat(o,"-combo"),className:i.default.comboContainerClassName})).toBack(),this.set({nodeGroup:r,edgeGroup:t,comboGroup:n})),r=e.addGroup({id:"".concat(o,"-delegate"),className:i.default.delegateContainerClassName}),this.set({delegateGroup:r}),this.set("group",e))},f.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},f.prototype.set=function(e,t){return(0,m.isPlainObject)(e)?this.cfg=(0,h.__assign)((0,h.__assign)({},this.cfg),e):this.cfg[e]=t,"enabledStack"!==e||!t||this.undoStack||this.redoStack||(this.undoStack=new a.Stack(this.cfg.maxStep),this.redoStack=new a.Stack(this.cfg.maxStep)),this},f.prototype.get=function(e){var t;return null==(t=this.cfg)?void 0:t[e]},f.prototype.getGroup=function(){return this.get("group")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.getMinZoom=function(){return this.get("minZoom")},f.prototype.setMinZoom=function(e){return this.set("minZoom",e)},f.prototype.getMaxZoom=function(){return this.get("maxZoom")},f.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},f.prototype.getWidth=function(){return this.get("width")},f.prototype.getHeight=function(){return this.get("height")},f.prototype.clearItemStates=function(e,t){(0,m.isString)(e)&&(e=this.findById(e));var n=this.get("itemController");t=t||e.get("states"),n.clearItemStates(e,t),this.get("stateController").updateStates(e,t,!1)},f.prototype.node=function(e){"function"==typeof e&&this.set("nodeMapper",e)},f.prototype.edge=function(e){"function"==typeof e&&this.set("edgeMapper",e)},f.prototype.combo=function(e){"function"==typeof e&&this.set("comboMapper",e)},f.prototype.findById=function(e){return this.get("itemMap")[e]},f.prototype.find=function(e,n){var r,e=this.get("".concat(e,"s"));return(0,m.each)(e,function(e,t){if(n(e,t))return r=e}),r},f.prototype.findAll=function(e,n){var r=[];return(0,m.each)(this.get("".concat(e,"s")),function(e,t){n(e,t)&&r.push(e)}),r},f.prototype.findAllByState=function(e,t,n){return n?this.findAll(e,function(e){return e.hasState(t)&&n(e)}):this.findAll(e,function(e){return e.hasState(t)})},f.prototype.translate=function(e,t,n,r){var o=this,i=this.get("group"),a=(a=(0,m.clone)(i.getMatrix()))||[1,0,0,0,1,0,0,0,1];n?(r=(0,b.getAnimateCfgWithCallback)({animateCfg:r,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:i.getMatrix()})}}),(0,y.move)(i,{x:i.getCanvasBBox().x+e,y:i.getCanvasBBox().y+t},n,r||{duration:500,easing:"easeCubic"})):(a=g(a,[["t",e,t]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint())},f.prototype.moveTo=function(e,t,n,r){var o=this.get("group");(0,y.move)(o,{x:e,y:t},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},f.prototype.fitView=function(e,t,n,r){e&&this.set("fitViewPadding",e);e=this.get("viewController");t?e.fitViewByRules(t,n,r):e.fitView(n,r),this.autoPaint()},f.prototype.fitCenter=function(e,t){this.get("viewController").fitCenter(e,t),this.autoPaint()},f.prototype.addBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!0),this},f.prototype.removeBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!1),this},f.prototype.updateBehavior=function(e,t,n){return this.get("modeController").updateBehavior(e,t,n),this},f.prototype.zoom=function(e,t,n,r){var o,i,a,s=this,u=this.get("group"),l=(0,m.clone)(u.getMatrix())||[1,0,0,0,1,0,0,0,1],c=this.get("minZoom"),f=this.get("maxZoom"),h=this.getZoom()||1,p=h*e,d=!1;return c&&p<c?(e=c/h,d=!0):f&&f<p&&(e=f/h,d=!0),l=g(l,t?[["t",-t.x,-t.y],["s",e,e],["t",t.x,t.y]]:[["s",e,e]]),n?(o=(0,m.clone)(u.getMatrix()),i=(o=o||[1,0,0,0,1,0,0,0,1])[0],a=i*e,c=(0,b.getAnimateCfgWithCallback)({animateCfg:r,callback:function(){return s.emit("viewportchange",{action:"zoom",matrix:u.getMatrix()})}}),u.animate(function(e){return{matrix:o=1===e?l:(e=(0,y.lerp)(i,a,e)/o[0],g(o,t?[["t",-t.x,-t.y],["s",e,e],["t",t.x,t.y]]:[["s",e,e]]))}},c)):(u.setMatrix(l),this.emit("viewportchange",{action:"zoom",matrix:l}),this.autoPaint()),!d},f.prototype.zoomTo=function(e,t,n,r){e/=this.getZoom();return this.zoom(e,t,n,r)},f.prototype.focusItem=function(e,t,n){var r=this.get("viewController"),o=!1,t=(t?o=!0:void 0===t&&(o=this.get("animate")),{});n?t=n:void 0===n&&(t=this.get("animateCfg")),r.focus(e,o,t),this.autoPaint()},f.prototype.focusItems=function(e,t,n,r){this.get("viewController").focusItems(e,t,n,r)},f.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},f.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},f.prototype.getPointByClient=function(e,t){return this.get("viewController").getPointByClient(e,t)},f.prototype.getClientByPoint=function(e,t){return this.get("viewController").getClientByPoint(e,t)},f.prototype.getPointByCanvas=function(e,t){return this.get("viewController").getPointByCanvas(e,t)},f.prototype.getCanvasByPoint=function(e,t){return this.get("viewController").getCanvasByPoint(e,t)},f.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},f.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},f.prototype.showItem=function(e,t){void 0===t&&(t=!0);e=this.get("itemController").changeItemVisibility(e,!0);if(t&&this.get("enabledStack")){var n=e.getID(),r={},o={};switch(e.getType()){case"node":r.nodes=[{id:n,visible:!1}],o.nodes=[{id:n,visible:!0}];break;case"edge":r.nodes=[{id:n,visible:!1}],o.edges=[{id:n,visible:!0}];break;case"combo":r.nodes=[{id:n,visible:!1}],o.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:r,after:o})}},f.prototype.hideItem=function(e,t){void 0===t&&(t=!0);e=this.get("itemController").changeItemVisibility(e,!1);if(t&&this.get("enabledStack")){var n=e.getID(),r={},o={};switch(e.getType()){case"node":o.nodes=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"edge":o.edges=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"combo":o.combos=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}]}this.pushStack("visible",{before:r,after:o})}},f.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},f.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},f.prototype.remove=function(e,t){this.removeItem(e,t=void 0===t?!0:t)},f.prototype.removeItem=function(e,t){void 0===t&&(t=!0);var n=e;if(!(n=(0,m.isString)(e)?this.findById(e):n)&&(0,m.isString)(e))console.warn("The item ".concat(e," to be removed does not exist!"));else if(n){e="";if(n.getType&&(e=n.getType()),t&&this.get("enabledStack")){var r=(0,h.__assign)((0,h.__assign)({},n.getModel()),{itemType:e}),o={};switch(e){case"node":o.nodes=[r],o.edges=[];for(var i=n.getEdges(),a=i.length-1;0<=a;a--)o.edges.push((0,h.__assign)((0,h.__assign)({},i[a].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[r];break;case"combo":o.combos=[r]}this.pushStack("delete",{before:o,after:{}})}"node"===e&&n.getModel().comboId&&this.updateComboTree(n,void 0,!1),this.get("itemController").removeItem(n),"combo"===e&&(t=(0,b.reconstructTree)(this.get("comboTrees")),this.set("comboTrees",t))}},f.prototype.innerAddItem=function(n,r,o){var i,e,a,s,t,u,l,c,f;return!!(0,p.singleDataValidation)(n,r)&&(r.id&&this.findById(r.id)?void console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;",""):(e=this.get("comboTrees")||[],"combo"===n?(a=this.get("itemMap"),s=!1,e.forEach(function(e){s||(0,b.traverseTreeUp)(e,function(e){r.parentId===e.id&&(s=!0,t=(0,h.__assign)({id:r.id,depth:e.depth+2},r),e.children?e.children.push(t):e.children=[t],r.depth=t.depth,i=o.addItem(n,r));var t=a[e.id];return s&&t&&t.getType&&"combo"===t.getType()&&o.updateCombo(t,e.children),!0})}),s||(t=(0,h.__assign)({id:r.id,depth:0},r),r.depth=t.depth,e.push(t),i=o.addItem(n,r)),this.set("comboTrees",e),r.collapsed&&(this.collapseCombo(i,!1),this.updateCombo(i))):"node"===n&&(0,m.isString)(r.comboId)&&e?((u=this.findById(r.comboId))&&u.getType&&"combo"!==u.getType()&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),i=o.addItem(n,r),l=this.get("itemMap"),f=c=!1,e.forEach(function(e){f||c||(0,b.traverseTreeUp)(e,function(e){var t;return e.id===r.id?!(f=!0):(r.comboId!==e.id||f||(c=!0,(t=(0,m.clone)(r)).itemType="node",e.children?e.children.push(t):e.children=[t],t.depth=e.depth+1),c&&l[e.id].getType&&"combo"===l[e.id].getType()&&o.updateCombo(l[e.id],e.children),!0)})})):i=o.addItem(n,r),("node"===n&&r.comboId||"combo"===n&&r.parentId)&&(u=this.findById(r.comboId||r.parentId))&&u.getType&&"combo"===u.getType()&&u.addChild(i),i))},f.prototype.addItem=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this.get("comboSorted"),o=(this.set("comboSorted",o&&!r),this.get("itemController")),r=this.innerAddItem(e,t,o);if(!1!==r&&!0!==r){t=this.get("combos");if(t&&0<t.length&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var i=(0,h.__assign)((0,h.__assign)({},r.getModel()),{itemType:e}),a={};switch(e){case"node":a.nodes=[i];break;case"edge":a.edges=[i];break;case"combo":a.combos=[i]}this.pushStack("add",{before:{},after:a})}}return r},f.prototype.addItems=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var o,i=this.get("itemController"),a=[],s=0;s<e.length;s++)"edge"!==(o=e[s]).type&&"vedge"!==o.type?a.push(this.innerAddItem(o.type,o.model,i)):a.push(void 0);for(s=0;s<e.length;s++)"edge"!==(o=e[s]).type&&"vedge"!==o.type||(a[s]=this.innerAddItem(o.type,o.model,i));if(n&&(r=this.get("combos"))&&0<r.length&&this.sortCombos(),this.autoPaint(),t&&this.get("enabledStack")){for(var u={nodes:[],edges:[],combos:[]},s=0;s<e.length;s++){var l=e[s].type,c=a[s];if(c&&!0!==c){var f=(0,h.__assign)((0,h.__assign)({},c.getModel()),{itemType:l});switch(l){case"node":u.nodes.push(f);break;case"edge":u.edges.push(f);break;case"combo":u.combos.push(f)}}}this.pushStack("addItems",{before:{},after:u})}return a},f.prototype.add=function(e,t,n,r){return this.addItem(e,t,n=void 0===n?!0:n,r=void 0===r?!0:r)},f.prototype.updateItem=function(e,t,n){var r=this;void 0===n&&(n=!0);var o,i=this.get("itemController"),a=(0,m.isString)(e)?this.findById(e):e,e=n&&this.get("enabledStack"),n=(e&&(o=(0,m.clone)(a.getModel())),""),s=(a.getType&&(n=a.getType()),(0,h.__spreadArray)([],a.getStates(),!0));if("combo"===n&&(0,m.each)(s,function(e){return r.setItemState(a,e,!1)}),i.updateItem(a,t),"combo"===n&&(0,m.each)(s,function(e){return r.setItemState(a,e,!0)}),e){var u={nodes:[],edges:[],combos:[]},l={nodes:[],edges:[],combos:[]},c=(0,h.__assign)({id:o.id},t);switch(n){case"node":u.nodes.push(o),l.nodes.push(c);break;case"edge":u.edges.push(o),l.edges.push(c);break;case"combo":u.combos.push(o),l.combos.push(c)}this.pushStack("update",{before:u,after:l})}},f.prototype.update=function(e,t,n){this.updateItem(e,t,n=void 0===n?!0:n)},f.prototype.setItemState=function(e,t,n){(0,m.isString)(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,t,n),this.get("stateController").updateState(e,t,n)},f.prototype.priorityState=function(e,t){this.get("itemController").priorityState(e,t)},f.prototype.data=function(e){(0,p.dataValidation)(e),this.set("data",e)},f.prototype.render=function(){var n=this,e=(this.set("comboSorted",!1),this.get("data"));if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var t=e.nodes,t=void 0===t?[]:t,r=e.edges,r=void 0===r?[]:r,o=e.combos,o=void 0===o?[]:o,i=(this.clear(!0),this.emit("beforerender"),n.addItems(t.map(function(e){return{type:"node",model:e}}),!1,!1),0!==(null==o?void 0:o.length)&&(t=(0,b.plainCombosToTrees)(o,t),this.set("comboTrees",t),n.addCombos(o)),n.addItems(r.map(function(e){return{type:"edge",model:e}}),!1,!1),n.get("animate")),t=((n.get("fitView")||n.get("fitCenter"))&&n.set("animate",!1),n.get("layoutController"));if(t){if(t.layout(a),this.destroyed)return}else a();function a(){(n.get("comboTrees")||[]).forEach(function(e){(0,b.traverseTreeUp)(e,function(e){var t=n.findById(e.id);return"combo"===t.getType()&&e.collapsed&&(n.collapseCombo(e.id,!1),n.updateCombo(t)),!0})}),n.get("fitView")?n.fitView():n.get("fitCenter")&&n.fitCenter(),n.autoPaint(),n.emit("afterrender"),(n.get("fitView")||n.get("fitCenter"))&&n.set("animate",i),setTimeout(function(){var e;null!=(e=n.getCombos())&&e.forEach(function(e){e.set("animate",!0)})},0)}this.get("groupByTypes")||(o&&0!==o.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach(function(e){e.toFront()}):this.getEdges().forEach(function(e){e.toBack()}))},f.prototype.read=function(e){this.data(e),this.render()},f.prototype.diffItems=function(n,r,e){var o,i=this,a=this.get("itemMap");(0,m.each)(e,function(e){var t;(o=a[e.id])?(i.get("animate")&&"node"===n&&(t=(t=o.getContainer().getMatrix())||[1,0,0,0,1,0,0,0,1],o.set("originAttrs",{x:t[6],y:t[7]})),i.updateItem(o,e,!1)):o=i.addItem(n,e,!1),o&&r["".concat(n,"s")].push(o)})},f.prototype.changeData=function(e,t){var n=this,r=(void 0===t&&(t=!0),this),e=e||r.get("data");if((0,p.dataValidation)(e)){this.emit("beforechangedata"),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(e){return r.clearItemStates(e)}),this.getEdges().map(function(e){return r.clearItemStates(e)});var o=this.get("canvas"),i=o.get("localRefresh"),a=(o.set("localRefresh",!1),r.get("data")||(r.data(e),r.render()),this.get("itemMap")),s={nodes:[],edges:[]},t=e.combos;t?(c=(0,b.plainCombosToTrees)(t,e.nodes),this.set("comboTrees",c)):this.set("comboTrees",[]),this.diffItems("node",s,e.nodes),(0,m.each)(a,function(e,t){a[t].getModel().depth=0,e.getType&&"edge"===e.getType()||(e.getType&&"combo"===e.getType()?(delete a[t],e.destroy()):s.nodes.indexOf(e)<0&&(delete a[t],r.remove(e,!1)))});for(var u=this.getCombos(),l=u.length-1;0<=l;l--)u[l].destroyed&&u.splice(l,1);t&&(r.addCombos(t),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",s,e.edges),(0,m.each)(a,function(e,t){(!e.getType||"node"!==e.getType()&&"combo"!==e.getType())&&s.edges.indexOf(e)<0&&(delete a[t],r.remove(e,!1))}),(this.get("comboTrees")||[]).forEach(function(e){(0,b.traverseTreeUp)(e,function(e){return"combo"===n.findById(e.id).getType()&&e.collapsed&&n.collapseCombo(e.id,!1),!0})}),this.set({nodes:s.nodes,edges:s.edges});var c=(this.get("layout")||{}).relayoutAtChangeData,t=void 0===c||c,c=this.get("layoutController");t&&c&&(c.changeData(function(){setTimeout(function(){var e;null!=(e=r.getCombos())&&e.forEach(function(e){e.set("animate",!0)})},0)}),r.get("animate")&&!c.getLayoutType()?(r.positionsAnimate(),null!=(t=r.getCombos())&&t.forEach(function(e){return e.set("animate",!0)})):r.autoPaint()),setTimeout(function(){o.set("localRefresh",i)},16),this.set("data",e),this.emit("afterchangedata")}return this},f.prototype.addCombos=function(e){var t=this.get("comboTrees");this.get("itemController").addCombos(t,e)},f.prototype.createCombo=function(e,t,n){var i=this,a=(void 0===n&&(n=!0),this.get("itemController"));this.set("comboSorted",!1);var r,o="";if(e){if((0,m.isString)(e))r={id:o=e};else{if(!(o=e.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");r=e}var s=n&&this.get("enabledStack"),u={nodes:[],combos:[]},e=(s&&t.forEach(function(e){var t=i.findById(e),n=t.getType();"node"!==n&&"combo"!==n||(t=t.getModel(),u["".concat(n,"s")].push({id:e,parentId:"node"===n?t.comboId:t.parentId}))}),this.get("comboTrees")),l=new Set(t),c=new Map,f=(e&&(e.forEach(function(e){(0,b.traverseTreeUp)(e,function(e,t,n){var r,o;return l.has(e.id)&&(t&&(r=i.findById(t.id),o=i.findById(e.id),t.children.splice(n,1),r.removeChild(o),a.updateCombo(r,t.children)),"combo"===e.itemType)&&c.set(e.id,e),!0})}),e=e.filter(function(e){return!l.has(e.id)}),this.set("comboTrees",e)),{nodes:[],combos:[]}),h=t.map(function(e){var t=i.findById(e),n=t.getModel(),r="",e=(t.getType&&(r=t.getType()),c.get(e)||{id:t.getID(),itemType:r});return"combo"===r?(e.parentId=o,n.parentId=o):"node"===r&&(e.comboId=o,n.comboId=o),s&&f["".concat(r,"s")].push({id:n.id,parentId:o}),e}),p=(r.children=h,this.addItem("combo",r,!1),this.set("comboSorted",!1),e&&(e.forEach(function(e){(0,b.traverseTree)(e,function(e){return e.id!==o||(e.itemType="combo",e.children=h,!1)})}),this.sortCombos()),s&&(f.combos.push(r),this.pushStack("createCombo",{before:u,after:f})),this.findById(o));!p.getModel().parentId&&p.getChildren().combos.length&&this.updateComboTree(p,void 0,!1),setTimeout(function(){p.set("animate",!0)},0)}},f.prototype.uncombo=function(e,t){var r,n,o,i,a,s,u,l,c,f,h,p=this,d=(void 0===t&&(t=!0),e);!(d=(0,m.isString)(e)?this.findById(e):d)||d.getType&&"combo"!==d.getType()?console.warn("The item is not a combo!"):(e=d.getModel(),r=d.getModel().parentId,n=(n=this.get("comboTrees"))||[],i=this.get("itemMap"),a=d.get("id"),s=[],u=this.get("combos"),l=this.findById(r),c={},(t=t&&this.get("enabledStack"))&&((c=(0,m.clone)(e)).children=[]),n.forEach(function(e){o||(0,b.traverseTreeUp)(e,function(e){var t,n;return e.id===a&&(o=e,d.getEdges().map(function(e){return e.getID()}).forEach(function(e){p.removeItem(e,!1)}),t=u.indexOf(d),u.splice(t,1),delete i[a],n=(0,m.clone)(d.getModel()),d.destroy(),p.emit("afterremoveitem",{item:n,type:"combo"})),!r||!o||e.id!==r||(l.removeCombo(d),-1!==(t=(s=e.children).indexOf(o))&&s.splice(t,1),null!=(n=o.children)&&n.forEach(function(e){var t=p.findById(e.id),n=t.getModel();t.getType&&"combo"===t.getType()?(e.parentId=r,delete e.comboId,n.parentId=r,delete n.comboId):t.getType&&"node"===t.getType()&&(e.comboId=r,n.comboId=r),l.addChild(t),s.push(e)}),p.updateCombo(l),!1)})}),!r&&o&&(e=n.indexOf(o),n.splice(e,1),null!=(e=o.children))&&e.forEach(function(e){e.parentId=void 0;var t=p.findById(e.id).getModel();delete t.parentId,delete t.comboId,"node"!==e.itemType&&n.push(e)}),t&&(f={nodes:[],combos:[]},h={nodes:[],combos:[]},null!=(e=o.children)&&e.forEach(function(e){var t=p.findById(e.id).getType();"node"!==t&&"combo"!==t||(f["".concat(t,"s")].push({id:e.id,parentId:a}),h["".concat(t,"s")].push({id:e.id,parentId:r}))}),f.combos.push(c),this.pushStack("uncombo",{before:f,after:h})))},f.prototype.updateCombos=function(r){var o=this,e=(void 0===r&&(r=!1),this.get("comboTrees")),i=this.get("itemController"),a=this.get("itemMap");(e||[]).forEach(function(e){(0,b.traverseTreeUp)(e,function(e){var t,n;return e&&"combo"===(null==(n=null==(t=a[e.id])?void 0:t.getType)?void 0:n.call(t))&&(n=(0,h.__spreadArray)([],t.getStates(),!0),(0,m.each)(n,function(e){return o.setItemState(t,e,!1)}),i.updateCombo(t,e.children,r),(0,m.each)(n,function(e){return o.setItemState(t,e,!0)})),!0})}),this.sortCombos()},f.prototype.updateCombo=function(e){var r,o,i,a=this,t=e;!(t=(0,m.isString)(e)?this.findById(e):t)||t.getType&&"combo"!==t.getType()?console.warn("The item to be updated is not a combo!"):(r=t.get("id"),e=this.get("comboTrees"),o=this.get("itemController"),i=this.get("itemMap"),(e||[]).forEach(function(e){(0,b.traverseTreeUp)(e,function(e){var t,n;return e&&(t=i[e.id],r===e.id)&&t&&t.getType&&"combo"===t.getType()&&(n=(0,h.__spreadArray)([],t.getStates(),!0),(0,m.each)(n,function(e){t.getStateStyle(e)&&a.setItemState(t,e,!1)}),o.updateCombo(t,e.children),(0,m.each)(n,function(e){t.getStateStyle(e)&&a.setItemState(t,e,!0)}),r=r&&e.parentId),!0})}))},f.prototype.updateComboTree=function(e,t,n){var r;void 0===n&&(n=!0),this.set("comboSorted",!1);var o,e=(r=(0,m.isString)(e)?this.findById(e):e).getModel(),i=e.comboId||e.parentId,a="";if(r.getType&&(a=r.getType()),t&&"combo"===a){var s,u=!0;if((this.get("comboTrees")||[]).forEach(function(e){s||(0,b.traverseTree)(e,function(e){if(!s)return e.id===r.getID()&&(s=e),!0})}),(0,b.traverseTree)(s,function(e){return e.id!==t||(u=!1)}),!u)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}n&&this.get("enabledStack")&&(n={},l={},"combo"===a?(n.combos=[{id:e.id,parentId:e.parentId}],l.combos=[{id:e.id,parentId:t}]):"node"===a&&(n.nodes=[{id:e.id,parentId:e.comboId}],l.nodes=[{id:e.id,parentId:t}]),this.pushStack("updateComboTree",{before:n,after:l})),(e.parentId||e.comboId)&&(n=this.findById(e.parentId||e.comboId))&&n.removeChild(r),"combo"===a?e.parentId=t:"node"===a&&(e.comboId=t),t&&(o=this.findById(t))&&o.addChild(r),i&&(o=this.findById(i))&&o.removeChild(r);var l=(0,b.reconstructTree)(this.get("comboTrees"),e.id,t);this.set("comboTrees",l),this.updateCombos()},f.prototype.save=function(){var t=[],n=[],r=[];return(0,m.each)(this.get("nodes"),function(e){t.push(e.getModel())}),(0,m.each)(this.get("edges"),function(e){n.push(e.getModel())}),(0,m.each)(this.get("combos"),function(e){r.push(e.getModel())}),{nodes:t,edges:n,combos:r}},f.prototype.changeSize=function(e,t){return this.get("viewController").changeSize(e,t),this},f.prototype.refresh=function(){var e,t,n;this.emit("beforegraphrefresh"),this.get("animate")?this.positionsAnimate():(e=this.get("nodes"),t=this.get("edges"),n=this.get("edges"),(0,m.each)(e,function(e){e.refresh()}),(0,m.each)(t,function(e){e.refresh()}),(0,m.each)(n,function(e){e.refresh()})),this.emit("aftergraphrefresh"),this.autoPaint()},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.getComboChildren=function(e){if((e=(0,m.isString)(e)?this.findById(e):e)&&(!e.getType||"combo"===e.getType()))return e.getChildren();console.warn("The combo does not exist!")},f.prototype.positionsAnimate=function(e){var a=this,t=(a.emit("beforeanimate"),a.get("animateCfg")),s=t.onFrame,n=e?a.getNodes().concat(a.getCombos()):a.getNodes(),r=n.map(function(e){e=e.getModel();return{id:e.id,x:e.x,y:e.y}}),o=(a.stopAnimate(),a.get("canvas"));a.animating=!0,setTimeout(function(){o.animate(function(i){(0,m.each)(r,function(e){var t,n,r,o=a.findById(e.id);o&&!o.destroyed&&(t=o.get("originAttrs"),n=o.get("model"),r=o.getContainer().getMatrix(),null==t&&(r&&(t={x:r[6],y:r[7]}),o.set("originAttrs",t||0)),s?(r=s(o,i,e,t||{x:0,y:0}),o.set("model",Object.assign(n,r))):t?(n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i):(n.x=e.x,n.y=e.y))}),a.refreshPositions(e)},{duration:t.duration,easing:t.easing,callback:function(){(0,m.each)(n,function(e){e.set("originAttrs",null)}),t.callback&&t.callback(),a.emit("afteranimate"),a.animating=!1}})},0)},f.prototype.refreshPositions=function(e){this.emit("beforegraphrefreshposition");function t(e){(0,m.each)(e,function(e){n=e.getModel();var t=e.get("originAttrs");t&&n.x===t.x&&n.y===t.y||(t=e.updatePosition({x:n.x,y:n.y}),s[n.id]=t,n.comboId&&(s[n.comboId]=s[n.comboId]||t),n.parentId&&(s[n.parentId]=s[n.parentId]||t))})}var n,r=this.get("nodes"),o=this.get("edges"),i=this.get("vedges"),a=this.get("combos"),s={};t(a),t(r),a&&0!==a.length&&(e&&t(a),this.updateCombos()),(0,m.each)(o,function(e){var t=e.getSource().getModel(),n=e.getTarget();!(0,m.isPlainObject)(n)&&(n=n.getModel(),s[t.id]||s[n.id]||e.getModel().isComboEdge)&&e.refresh()}),(0,m.each)(i,function(e){e.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},f.prototype.stopAnimate=function(){var e=this.get("canvas").cfg.timeline;e&&e.stopAllAnimations()},f.prototype.isAnimating=function(){return this.animating},f.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},f.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},f.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},f.prototype.clear=function(e){var t;return void 0===e&&(e=!1),null!=(t=this.get("canvas"))&&t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},f.prototype.updateLayout=function(e,i,t,n){var a,s=this,r=(void 0===e&&(e={}),void 0===n&&(n=!0),this.get("layoutController")),t=((0,m.isString)(e)&&(e={type:e}),i&&(a=(a=t)||("begin"===i?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y),(t=["force","gForce","fruchterman","force2"]).includes(e.type)||!e.type&&t.includes(null==r?void 0:r.layoutType)?e.center=[a.x,a.y]:this.once("afterlayout",function(e){var t=s.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1],t=(a.x=a.x*t[0]+t[6],a.y=a.y*t[0]+t[7],s.getGroup().getCanvasBBox()),n=t.minX,r=t.maxX,o=t.minY,r={x:(n+r)/2,y:(o+t.maxY)/2};"begin"===i&&(r.x=n,r.y=o),s.translate(a.x-r.x,a.y-r.y)})),(0,h.__assign)({},this.get("layout"))),o={};Object.assign(o,t,e),e.pipes&&!e.type?delete o.type:!e.pipes&&o.type&&delete o.pipes,this.set("layout",o),r&&(r.isLayoutTypeSame(o)&&o.gpuEnabled===t.gpuEnabled?r.updateLayoutCfg(o):r.changeLayout(o),n)&&this.get("enabledStack")&&this.pushStack("layout",{before:t,after:o})},f.prototype.destroyLayout=function(){var e=this.get("layoutController");null!=e&&e.destroyLayout()},f.prototype.layout=function(){var e=this.get("layoutController"),t=this.get("layout");t&&e&&(!t.workerEnabled&&null!=(t=e.layoutMethods)&&t.length?e.relayout(!0):e.layout())},f.prototype.collapseCombo=function(e,t){var c,f,n,h,p=this;void 0===t&&(t=!0),this.destroyed||((e=(0,m.isString)(e)?this.findById(e):e)?(this.emit("beforecollapseexpandcombo",{action:"collapse",item:e}),c=e.getModel(),this.get("itemController").collapseCombo(e,t),c.collapsed=!0,t=this.getEdges().concat(this.get("vedges")),n=!(f=[]),(this.get("comboTrees")||[]).forEach(function(e){n||(0,b.traverseTree)(e,function(e){return!(n&&e.depth<=c.depth||((n=c.id===e.id||n)&&(e=p.findById(e.id))&&e.getType&&"combo"===e.getType()&&(f=(f=f.concat(e.getNodes())).concat(e.getCombos())),0))})}),h={},t.forEach(function(e){var t=e.getModel(),n=t.isVEdge,t=t.size,t=void 0===t?1:t;if(!e.isVisible()||n){var r,o=e.getSource(),i=e.getTarget(),a=null;if(o.getModel().id===c.id||f.includes(o)&&!f.includes(i)?(a=i,r=!1):(i.getModel().id===c.id||!f.includes(o)&&f.includes(i))&&(a=o,r=!0),a)if(n)p.removeItem(e,!1);else{for(var s=a.getModel();!a.isVisible();){var u=s.parentId,l=s.comboId,u=u||l;if(!(a=p.findById(u))||!u)return;s=a.getModel()}i=s.id,o=r?{source:i,target:c.id,size:t,isVEdge:!0}:{source:c.id,target:i,size:t,isVEdge:!0},n="".concat(o.source,"-").concat(o.target);h[n]?h[n].size+=t:h[n]=o}}}),this.addItems(Object.values(h).map(function(e){return{type:"vedge",model:e}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})):console.warn("The combo to be collapsed does not exist!"))},f.prototype.expandCombo=function(e,t){var d,y,n,g,v=this;void 0===t&&(t=!0),!(e=(0,m.isString)(e)?this.findById(e):e)||e.getType&&"combo"!==e.getType()?console.warn("The combo to be collapsed does not exist!"):(this.emit("beforecollapseexpandcombo",{action:"expand",item:e}),d=e.getModel(),this.get("itemController").expandCombo(e,t),d.collapsed=!1,t=this.getEdges().concat(this.get("vedges")),n=!(y=[]),(this.get("comboTrees")||[]).forEach(function(e){n||(0,b.traverseTree)(e,function(e){return!(n&&e.depth<=d.depth||((n=d.id===e.id||n)&&(e=v.findById(e.id))&&e.getType&&"combo"===e.getType()&&(y=(y=y.concat(e.getNodes())).concat(e.getCombos())),0))})}),g={},t.forEach(function(e){if(!e.isVisible()||e.getModel().isVEdge){var t,n=e.getSource(),r=e.getTarget(),o=n.get("id"),i=r.get("id"),a=null;if(o===d.id||y.includes(n)&&!y.includes(r)?(a=r,t=!1):i===d.id||!y.includes(n)&&y.includes(r)?(a=n,t=!0):y.includes(n)&&y.includes(r)&&n.isVisible()&&r.isVisible()&&e.show(),a){o=e.getModel(),i=o.isVEdge,o=o.size,o=void 0===o?1:o;if(i)v.removeItem(e,!1);else{for(var s=a.getModel();!a.isVisible();){var u=s.parentId,l=s.comboId,u=u||l;if(!(a=v.findById(u))||!u)return;s=a.getModel()}for(var i=s.id,c=t?r:n,f=c.getModel();!c.isVisible();){var h=f.parentId,p=f.comboId,h=h||p;if(!(c=v.findById(h))||!h)return;if(f.comboId===d.id||f.parentId===d.id)break;f=c.getModel()}e=f.id;i&&(n="".concat((r=t?{source:i,target:e,isVEdge:!0,size:o}:{source:e,target:i,isVEdge:!0,size:o}).source,"-").concat(r.target),g[n]?g[n].size+=o:g[n]=r)}}}}),this.addItems(Object.values(g).map(function(e){return{type:"vedge",model:e}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:e}))},f.prototype.collapseExpandCombo=function(e,t){if(void 0===t&&(t=!0),(e=(0,m.isString)(e)?this.findById(e):e)&&(!e.getType||"combo"===e.getType())){for(var n=e.getModel(),r=this.findById(n.parentId);r;){var o=r.getModel();if(o.collapsed)return void console.warn("Fail to expand the combo since it's ancestor combo is collapsed.");r=this.findById(o.parentId)}n.collapsed?this.expandCombo(e,t):this.collapseCombo(e,t),this.updateCombo(e)}},f.prototype.getNeighbors=function(e,t){var n=e;return(n=(0,m.isString)(e)?this.findById(e):n).getNeighbors(t)},f.prototype.getNodeDegree=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=e,e=((0,m.isString)(e)&&(r=this.findById(e)),this.get("degrees")),o=(e&&!n||(e=(0,a.getDegree)(this.save()),this.set("degrees",e)),e[r.getID()]),i=0;if(!o)return 0;switch(t){case"in":i=o.inDegree;break;case"out":i=o.outDegree;break;case"all":i=o;break;default:i=o.degree}return i},f.prototype.getUndoStack=function(){return this.undoStack},f.prototype.getRedoStack=function(){return this.redoStack},f.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},f.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},f.prototype.pushStack=function(e,t,n){void 0===e&&(e="update"),void 0===n&&(n="undo"),this.get("enabledStack")?(t=t?(0,m.clone)(t):{before:{},after:(0,m.clone)(this.save())},("redo"===n?this.redoStack:this.undoStack).push({action:e,data:t}),this.emit("stackchange",{action:e,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})):console.warn(" undo & redo  Graph  enabledStack: true !")},f.prototype.getAdjMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix");return n&&e||(n=(0,a.getAdjMatrix)(this.save(),t),this.set("adjMatrix",n)),n},f.prototype.getShortestPathMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&e||(n=(0,a.getAdjMatrix)(this.save(),t),this.set("adjMatrix",n)),r&&e||(r=(0,a.floydWarshall)(this.save(),t),this.set("shortestPathMatrix",r)),r},f.prototype.on=function(e,t,n){return c.prototype.on.call(this,e,t,n)},f.prototype.destroy=function(){var e;this.emit("beforedestroy"),this.clear(),this.clearStack(),null!=(e=this.get("itemController"))&&e.destroy(),null!=(e=this.get("modeController"))&&e.destroy(),null!=(e=this.get("viewController"))&&e.destroy(),null!=(e=this.get("stateController"))&&e.destroy(),null!=(e=this.get("canvas"))&&e.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},f.prototype.createHull=function(e){var t,n;if(e.members&&!(e.members.length<1))return t=this.get("hullGroup"),(n=this.get("hullMap"))||this.set("hullMap",n={}),t&&!t.get("destroyed")||((t=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",t)),n[e.id]?(console.warn("Existed hull id."),n[e.id]):(t=t.addGroup({id:"".concat(e.id,"-container")}),n[(n=new u.default(this,(0,h.__assign)((0,h.__assign)({},e),{group:t}))).id]=n);console.warn("Create hull failed! The members is empty.")},f.prototype.getHulls=function(){return this.get("hullMap")},f.prototype.getHullById=function(e){return this.get("hullMap")[e]},f.prototype.removeHull=function(e){var t,e=(0,m.isString)(e)?this.getHullById(e):e;null!=(t=this.get("hullMap"))&&delete t[e.id],e.destroy()},f.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach(function(e){t[e].destroy()}),this.set("hullMap",{}))},f);function f(e){var i=c.call(this)||this;return i.sortCombos=(0,m.debounce)(function(){var r,o,e=i.get("comboSorted");!i||i.destroyed||e||(i.set("comboSorted",!0),r=[],o={},(i.get("comboTrees")||[]).forEach(function(e){(0,b.traverseTree)(e,function(e){return r[e.depth]?r[e.depth].push(e.id):r[e.depth]=[e.id],o[e.id]=e.depth,!0})}),(i.getEdges().concat(i.get("vedges"))||[]).forEach(function(e){var e=e.getModel(),t=o[e.source]||0,n=o[e.target]||0,t=Math.max(t,n);r[t]?r[t].push(e.id):r[t]=[e.id]}),r.forEach(function(e){if(e&&e.length)for(var t=e.length-1;0<=t;t--){var n=i.findById(e[t]);n&&n.toFront()}}))},500,!1),i.cfg=(0,m.deepMix)(i.getDefaultCfg(),e),i.init(),i.animating=!1,i.destroyed=!1,i.cfg.enabledStack&&(i.undoStack=new a.Stack(i.cfg.maxStep),i.redoStack=new a.Stack(i.cfg.maxStep)),i}t.default=n},48122:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var r={registerNode:!0,registerCombo:!0,registerEdge:!0,registerBehavior:!0,BaseGlobal:!0,AbstractGraph:!0,Shape:!0,Arrow:!0,Marker:!0,Util:!0,AbstractLayout:!0,AbstractEvent:!0,Node:!0,Edge:!0,Hull:!0,Combo:!0},o=(Object.defineProperty(t,"AbstractEvent",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"AbstractGraph",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"AbstractLayout",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return s.Arrow}}),t.BaseGlobal=void 0,Object.defineProperty(t,"Combo",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Edge",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Hull",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return s.Marker}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return l.default}}),t.registerNode=t.registerEdge=t.registerCombo=t.registerBehavior=t.default=void 0,m(n(2235))),i=m(n(67239)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=v(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(92100)),u=m(n(36605)),l=m(n(21712)),c=m(n(66863)),f=m(n(93894)),h=m(n(14319)),p=m(n(4779)),d=m(n(65674)),y=m(n(43059)),g=n(2782);function v(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(v=function(e){return e?n:t})(e))}function m(e){return e&&e.__esModule?e:{default:e}}Object.keys(g).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});n=s.default.registerNode,t.registerNode=n,n=s.default.registerEdge,t.registerEdge=n,n=s.default.registerCombo,t.registerCombo=n,n=o.default.registerBehavior,t.registerBehavior=n,n=u.default,t.BaseGlobal=n,u={version:u.default.version,AbstractGraph:i.default,BaseGlobal:n,Util:l.default,Shape:s.default,Node:h.default,Edge:p.default,Combo:y.default,Hull:d.default,registerNode:s.default.registerNode,registerEdge:s.default.registerEdge,registerCombo:s.default.registerCombo,registerBehavior:o.default.registerBehavior,Arrow:s.Arrow,Marker:s.Marker,AbstractLayout:c.default,AbstractEvent:f.default};t.default=u},24825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.G6GraphEvent=void 0;var r,o=n(97582),n=(r=n(6992).Event,(0,o.__extends)(i,r),i);function i(e,t){e=r.call(this,e,t)||this;return e.item=t.item,e.canvasX=t.canvasX,e.canvasY=t.canvasY,e.wheelDelta=t.wheelDelta,e.detail=t.detail,e}t.G6GraphEvent=n},69858:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69858),o=(Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),n(24825)),i=(Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),n(8115)),a=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),n(45341));Object.keys(a).forEach(function(e){"default"===e||"__esModule"===e||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},8115:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45341:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(97582),r=o(n(14319)),s=o(n(36605)),i=n(61592),u=n(31834);function o(e){return e&&e.__esModule?e:{default:e}}l=r.default,(0,a.__extends)(c,l),c.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},c.prototype.getShapeCfg=function(e){var t,n,r,o=this.get("styles"),i=this.get("bbox");return o&&i?(n=(0,u.isNumber)((t=e).size)?[e.size,e.size]:e.size,r=(0,u.isNumber)(e.fixSize)?[e.fixSize,e.fixSize]:e.fixSize,n=n||r||s.default.defaultCombo.size,r={r:(Math.max(i.width,i.height)||Math.max(n[0],n[1]))/2,width:i.width||n[0],height:i.height||n[1]},t.style=(0,a.__assign)((0,a.__assign)((0,a.__assign)({},o),e.style),r),i=e.padding||s.default.defaultCombo.padding,(0,u.isNumber)(i)?(r.r+=i,r.width+=2*i,r.height+=2*i):(r.r=r.r+Math.max.apply(Math,i),r.width+=i[1]+i[3]||2*i[1],r.height+=i[0]+i[2]||2*i[0]),this.set("sizeCache",r),t):e},c.prototype.calculateCanvasBBox=function(){var e,t,n,r,o;if(!this.destroyed)return e=this.get("keyShape"),o=this.get("group"),t=(n=this.get("bboxCache")||{}).x,n=n.x,r=this.get("sizeCache"),(o=(0,i.getBBox)(e,o)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2,r?(r.width=Math.max(r.width,o.width),r.height=Math.max(r.height,o.height),this.set("sizeCache",r),"circle"===e.get("type")?(o.width=2*r.r,o.height=2*r.r):(o.width=r.width,o.height=r.height),o.minX=o.centerX-o.width/2,o.minY=o.centerY-o.height/2,o.maxX=o.centerX+o.width/2,o.maxY=o.centerY+o.height/2):(o.width=o.maxX-o.minX,o.height=o.maxY-o.minY,o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2),o.x=o.minX,o.y=o.minY,o.x===t&&o.y===n||this.set("anchorPointsCache",null),o},c.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},c.prototype.getNodes=function(){return this.get("nodes")},c.prototype.getCombos=function(){return this.get("combos")},c.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},c.prototype.addCombo=function(e){return this.get("combos").push(e),!0},c.prototype.addNode=function(e){return this.get("nodes").push(e),!0},c.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},c.prototype.removeCombo=function(e){var t;if(e)return-1<(e=(t=this.getCombos()).indexOf(e))&&(t.splice(e,1),!0)},c.prototype.removeNode=function(e){var t;if(e)return-1<(e=(t=this.getNodes()).indexOf(e))&&(t.splice(e,1),!0)},c.prototype.getUpdateType=function(e){},c.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},c.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},c.prototype.destroy=function(){var e,t;this.destroyed||(e=this.get("animate"),t=this.get("group"),e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),t.remove(),this._cfg=null,this.destroyed=!0)};var l,n=c;function c(){return null!==l&&l.apply(this,arguments)||this}t.default=n},4779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(97582),a=n(31834),s={source:"start",target:"end"},n=(r=((n=n(80272))&&n.__esModule?n:{default:n}).default,(0,o.__extends)(i,r),i.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},i.prototype.setEnd=function(e,t){var n=s[e]+"Point",e=e+"Node",r=this.get(e);r&&!r.destroyed&&r.removeEdge(this),(0,a.isPlainObject)(t)?(this.set(n,t),this.set(e,null)):t&&(t.addEdge(this),this.set(e,t),this.set(n,null))},i.prototype.getLinkPoint=function(e,t,n){var r,o=e+"Node",i=this.get(s[e]+"Point");return i||(o=this.get(o),r=e+"Anchor",n=this.getPrePoint(e,n),t=t[r],i=(i=(0,a.isNil)(t)?i:o.getLinkPointByAnchor(t))||o.getLinkPoint(n),(0,a.isNil)(i.index))||this.set("".concat(e,"AnchorIndex"),i.index),i},i.prototype.getPrePoint=function(e,t){return t&&t.length?t["source"===e?0:t.length-1]:this.getEndPoint("source"===e?"target":"source")},i.prototype.getEndPoint=function(e){var t=s[e]+"Point",e=this.get(e+"Node");return e&&!e.destroyed?e.get("model"):this.get(t)},i.prototype.getControlPointsByCenter=function(e){var t=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),e=e.type;return r.getControlPoints(e,{startPoint:t,endPoint:n})},i.prototype.getEndCenter=function(e){var t=s[e]+"Point",e=this.get(e+"Node");return e?{x:(e=e.getBBox()).centerX,y:e.centerY}:this.get(t)},i.prototype.init=function(){r.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},i.prototype.getShapeCfg=function(e,t){var n=this.get("linkCenter"),t=null!=t&&t.includes("move")?e:r.prototype.getShapeCfg.call(this,e);return n?(t.startPoint=this.getEndCenter("source"),t.endPoint=this.getEndCenter("target")):(n=t.controlPoints||this.getControlPointsByCenter(t),t.startPoint=this.getLinkPoint("source",e,n),t.endPoint=this.getLinkPoint("target",e,n)),t.sourceNode=this.get("sourceNode"),t.targetNode=this.get("targetNode"),t},i.prototype.getModel=function(){var e=this.get("model"),t=this.get("source".concat("Node")),n=this.get("target".concat("Node"));return t?delete e["source".concat("Node")]:e.source=this.get("start".concat("Point")),n?delete e["target".concat("Node")]:e.target=this.get("end".concat("Point")),(0,a.isString)(e.source)||(0,a.isPlainObject)(e.source)||(e.source=e.source.getID()),(0,a.isString)(e.target)||(0,a.isPlainObject)(e.target)||(e.target=e.target.getID()),e},i.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},i.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},i.prototype.getSource=function(){return this.get("source")},i.prototype.getTarget=function(){return this.get("target")},i.prototype.updatePosition=function(){return!1},i.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model"),r=n.visible,o=e.visible,r=(r!==o&&void 0!==o&&this.changeVisibility(o),this.get("source")),o=this.get("target");r&&!r.destroyed&&o&&!o.destroyed&&(r=this.get("styles"),e.stateStyles&&(o=e.stateStyles,(0,a.mix)(r,o),delete e.stateStyles),Object.assign(n,e),this.updateShape(t),this.afterUpdate(),this.clearCache())},i.prototype.destroy=function(){var e=this.get("source".concat("Node")),t=this.get("target".concat("Node"));e&&!e.destroyed&&e.removeEdge(this),t&&!t.destroyed&&t.removeEdge(this),r.prototype.destroy.call(this)},i);function i(){return null!==r&&r.apply(this,arguments)||this}t.default=n},65674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),o=n(31834),i=n(73920),a=n(28362),s=n(39520),u=n(25560),l=n(40861);function c(t,e){this.cfg=(0,o.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,o.isString)(e)?t.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,o.isString)(e)?t.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}c.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},c.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=0<this.cfg.padding?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},c.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},c.prototype.calcPath=function(e,t){var n,r,o;switch(this.type){case"round-convex":n=(0,u.genConvexHull)(e),o=(0,a.roundedHull)(n.map(function(e){return[e.x,e.y]}),this.padding),r=(0,i.parsePathString)(o);break;case"smooth-convex":2===(n=(0,u.genConvexHull)(e)).length?(o=(0,a.roundedHull)(n.map(function(e){return[e.x,e.y]}),this.padding),r=(0,i.parsePathString)(o)):2<n.length&&(o=(0,a.paddedHull)(n.map(function(e){return[e.x,e.y]}),this.padding),r=(0,a.getClosedSpline)(o));break;case"bubble":r=2<=(n=(0,l.genBubbleSet)(e,t,this.cfg.bubbleCfg)).length&&(0,a.getClosedSpline)(n)}return r},c.prototype.render=function(){this.group.addShape("path",{attrs:(0,r.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},c.prototype.addMember=function(e){if(e)return(0,o.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e),-1<(e=this.nonMembers.indexOf(e))&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0},c.prototype.addNonMember=function(e){if(e)return(0,o.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e),-1<(e=this.members.indexOf(e))&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0},c.prototype.removeMember=function(e){if(e)return(0,o.isString)(e)&&(e=this.graph.findById(e)),-1<(e=this.members.indexOf(e))&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)},c.prototype.removeNonMember=function(e){if(e)return(0,o.isString)(e)&&(e=this.graph.findById(e)),-1<(e=this.nonMembers.indexOf(e))&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)},c.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(e){return(0,o.isString)(e)?n.graph.findById(e):e})),t&&(this.nonMembers=t.map(function(e){return(0,o.isString)(e)?n.graph.findById(e):e})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},c.prototype.updateStyle=function(e){this.group.findById(this.id).attr((0,r.__assign)({},e))},c.prototype.updateCfg=function(e){var t=this;this.cfg=(0,o.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(e){return(0,o.isString)(e)?t.graph.findById(e):e})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,o.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},c.prototype.contain=function(e){var t=this,n=(e=(0,o.isString)(e)?this.graph.findById(e):e).getKeyShape();return n=(n="path"===e.get("type")?(0,a.pathToPoints)(n.attr("path")):[[(e=n.getCanvasBBox()).minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]]).map(function(e){e=t.graph.getPointByCanvas(e[0],e[1]);return[e.x,e.y]}),(0,s.isPolygonsIntersect)(n,(0,a.pathToPoints)(this.path))},c.prototype.destroy=function(){this.group.remove(),this.cfg=null},t.default=c},80272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(97582),p=n(31834),i=(r=n(27144))&&r.__esModule?r:{default:r},a=n(61592),s=n(39520),d=n(30271);function u(e){this._cfg={},this.destroyed=!1,this.optimize=!1;this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),e);var t=this.get("model"),n=t.id,r=this.get("type"),e=(void 0===n?n=(0,d.uniqueId)(r):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n),e.group),e=(e&&(e.set("item",this),e.set("id",n)),this.init(),this.draw(),t.shape||t.type||("edge"===r?"line":"circle")),n=this.get("shapeFactory");n&&n[e]&&(r=n[e].options)&&r.stateStyles&&(n=this.get("styles")||t.stateStyles,n=(0,p.deepMix)({},r.stateStyles,n),this.set("styles",n))}u.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),e=(0,a.getBBox)(e,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},u.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),e=(0,a.getBBox)(e,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},u.prototype.drawInner=function(){var e=this.get("shapeFactory"),t=this.get("group"),n=this.get("model"),r=(t.clear(),n.visible);void 0===r||r||this.changeVisibility(r),e&&(this.updatePosition(n),n=(r=this.getShapeCfg(n)).type,(r=e.draw(n,r,t))&&(this.set("keyShape",r),r.set("isKeyShape",!0),r.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",n),this.restoreStates(e,n))},u.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),s=this,u=this.getKeyShape().get("name");if(this.get("originStyle")){for(var l=this.get("originStyle"),c=(u&&!l[u]&&(l[u]={}),this.getCurrentStatesStyle()),n=0;n<t.length;n++)!function(e){var n,r,o,e=t[e],i=e.get("name"),a=e.attr();i&&i!==u?(n=c[i],l[i]||(l[i]={}),n?Object.keys(a).forEach(function(e){var t=a[e];t!==n[e]&&(l[i][e]=t)}):l[i]="image"!==e.get("type")?(0,p.clone)(a):s.getShapeStyleByName(i)):(r=e.attr(),o={},Object.keys(c).forEach(function(e){var t=c[e];e!==u&&(0,p.isPlainObject)(t)||(o[e]=t)}),Object.keys(r).forEach(function(e){var t=r[e];o[e]!==t&&(u?l[u][e]=t:l[e]=t)}))}(n);delete l.path,delete l.matrix,delete l.x,delete l.y,l[u]&&(delete l[u].x,delete l[u].y,delete l[u].matrix,delete l[u].path),s.set("originStyle",l)}else{for(var r={},n=0;n<t.length;n++){var o,i,a=t[n],f=a.get("type"),h=a.get("name");h&&h!==u?(r[h]="image"!==f?(0,p.clone)(a.attr()):s.getShapeStyleByName(h),"text"===f&&r[h]&&(delete r[h].x,delete r[h].y,delete r[h].matrix)):(delete(o=s.getShapeStyleByName()).path,delete o.matrix,u?h?r[u]=o:(i=(0,d.uniqueId)("shape"),a.set("name",i),e.shapeMap[i]=a,r[i]="image"!==f?(0,p.clone)(a.attr()):s.getShapeStyleByName(h)):Object.assign(r,o))}s.set("originStyle",r)}},u.prototype.restoreStates=function(t,n){var r=this,e=r.get("states");(0,p.each)(e,function(e){t.setState(n,e,!0,r)})},u.prototype.init=function(){var e=i.default.getFactory(this.get("type"));this.set("shapeFactory",e)},u.prototype.get=function(e){return this._cfg[e]},u.prototype.set=function(e,t){(0,p.isPlainObject)(e)?this._cfg=(0,o.__assign)((0,o.__assign)({},this._cfg),e):this._cfg[e]=t},u.prototype.getDefaultCfg=function(){return{}},u.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},u.prototype.beforeDraw=function(){},u.prototype.afterDraw=function(){},u.prototype.afterUpdate=function(){},u.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},u.prototype.getShapeStyleByName=function(t){var n,e=this.get("group");return(e=t?e.shapeMap[t]||e.find(function(e){return e.get("name")===t}):this.getKeyShape())?(n={},(0,p.each)(e.attr(),function(e,t){"img"===t&&!(0,p.isString)(e)||(n[t]=e)}),n):{}},u.prototype.getShapeCfg=function(e,t){var n,r=this.get("styles");return r?((n=e).style=(0,o.__assign)((0,o.__assign)({},r),e.style),n):e},u.prototype.getStateStyle=function(e){var t=this.get("styles");return t&&t[e]},u.prototype.getOriginStyle=function(){return this.get("originStyle")},u.prototype.getCurrentStatesStyle=function(){var t=this,n={},e=t.getStates();return e&&e.length?((0,p.each)(t.getStates(),function(e){n=Object.assign(n,t.getStateStyle(e))}),n):this.get("originStyle")},u.prototype.setState=function(e,t){var n=this.get("states"),r=this.get("shapeFactory"),o=e,i=e,a=((0,p.isString)(t)&&(o="".concat(e,":").concat(t),i="".concat(e,":")),n);if((0,p.isBoolean)(t)){var s=n.indexOf(i);if(t){if(-1<s)return;n.push(o)}else-1<s&&n.splice(s,1)}else(0,p.isString)(t)&&(0<(s=n.filter(function(e){return e.includes(i)})).length&&this.clearStates(s),(a=a.filter(function(e){return!e.includes(i)})).push(o),this.set("states",a));r&&(n=this.get("model").type,r.setState(n,e,t,this))},u.prototype.clearStates=function(t){var n=this,e=n.getStates(),r=n.get("shapeFactory"),o=n.get("model").type,e=(t=t||e,(0,p.isString)(t)&&(t=[t]),e.filter(function(e){return-1===t.indexOf(e)}));n.set("states",e),t.forEach(function(e){r.setState(o,e,!1,n)})},u.prototype.setOptimize=function(e){this.optimize=e},u.prototype.getContainer=function(){return this.get("group")},u.prototype.getKeyShape=function(){return this.get("keyShape")},u.prototype.getModel=function(){return this.get("model")},u.prototype.getType=function(){return this.get("type")},u.prototype.getID=function(){return this.get("id")},u.prototype.isItem=function(){return!0},u.prototype.getStates=function(){return this.get("states")},u.prototype.hasState=function(e){return 0<=this.getStates().indexOf(e)},u.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},u.prototype.getUpdateType=function(e){},u.prototype.update=function(e,t){void 0===t&&(t=void 0);var n,r,o,i,a=this.get("model");"move"===t?this.updatePosition(e):(a.visible!==(n=e.visible)&&void 0!==n&&this.changeVisibility(n),n=a.x,r=a.y,e.x=isNaN(+e.x)?a.x:+e.x,e.y=isNaN(+e.y)?a.y:+e.y,o=this.get("styles"),e.stateStyles&&(i=e.stateStyles,(0,p.mix)(o,i),delete e.stateStyles),Object.assign(a,e),n===e.x&&r===e.y||this.updatePosition(e),this.updateShape(t)),this.afterUpdate(),this.clearCache()},u.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),r=n.type;t.shouldUpdate(r)&&r===this.get("currentShape")?(n=this.getShapeCfg(n,e),t.baseUpdate(r,n,this,e),"move"!==e&&this.setOriginStyle()):this.draw(),this.restoreStates(t,r)},u.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,e=isNaN(+e.y)?+t.y:+e.y,r=this.get("group");if(isNaN(n)||isNaN(e))return!1;t.x=n,t.y=e;t=r.getMatrix();return!(t&&t[6]===n&&t[7]===e||(r.resetMatrix(),(0,s.translate)(r,{x:n,y:e}),this.clearCache(),0))},u.prototype.getBBox=function(){var e=this.get("bboxCache");return e||(e=this.calculateBBox(),this.set("bboxCache",e)),e},u.prototype.getCanvasBBox=function(){var e=this.get("bboxCanvasCache");return e||(e=this.calculateCanvasBBox(),this.set("bboxCanvasCache",e)),e},u.prototype.toFront=function(){this.get("group").toFront()},u.prototype.toBack=function(){this.get("group").toBack()},u.prototype.show=function(){this.changeVisibility(!0)},u.prototype.hide=function(){this.changeVisibility(!1)},u.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},u.prototype.isVisible=function(){return this.get("visible")},u.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},u.prototype.destroy=function(){var e,t;this.destroyed||(e=this.get("animate"),t=this.get("group"),e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0)},t.default=u},14319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(97582),i=n(31834),u=n(39520),n=(r=((n=n(80272))&&n.__esModule?n:{default:n}).default,(0,o.__extends)(a,r),a.prototype.getNearestPoint=function(e,t){for(var n=0,r=e[0],o=(0,u.distance)(e[0],t),i=0;i<e.length;i++){var a=e[i],s=(0,u.distance)(a,t);s<o&&(r=a,o=s,n=i)}return r.anchorIndex=n,r},a.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},a.prototype.getEdges=function(){return this.get("edges")},a.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},a.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},a.prototype.getNeighbors=function(e){var t=this,n=this.get("edges");return"target"===e?n.filter(function(e){return e.getSource()===t}).map(function(e){return e.getTarget()}):"source"===e?n.filter(function(e){return e.getTarget()===t}).map(function(e){return e.getSource()}):n.map(function(e){return e.getSource()===t?e.getTarget():e.getSource()})},a.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},a.prototype.getLinkPoint=function(e){var t,n,r=this.get("keyShape").get("type"),o=this.get("type"),i=this.getBBox(),a="combo"===o?(t=i.centerX||(i.maxX+i.minX)/2,i.centerY||(i.maxY+i.minY)/2):(t=i.centerX,i.centerY),o=this.getAnchorPoints();switch(r){case"circle":n=(0,u.getCircleIntersectByPoint)({x:t,y:a,r:i.width/2},e);break;case"ellipse":n=(0,u.getEllipseIntersectByPoint)({x:t,y:a,rx:i.width/2,ry:i.height/2},e);break;default:n=(0,u.getRectIntersectByPoint)(i,e)}r=n;return r=(r=o.length?this.getNearestPoint(o,r=r||e):r)||{x:t,y:a}},a.prototype.getAnchorPoints=function(){var n,e,t,r,o=this.get("anchorPointsCache");return o||(o=[],r=this.get("shapeFactory"),n=this.getBBox(),t=this.get("model"),e=this.getShapeCfg(t),t=t.type,r=r.getAnchorPoints(t,e)||[],(0,i.each)(r,function(e,t){e={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:t};o.push(e)}),this.set("anchorPointsCache",o)),o},a.prototype.addEdge=function(e){this.get("edges").push(e)},a.prototype.lock=function(){this.set("locked",!0)},a.prototype.unlock=function(){this.set("locked",!1)},a.prototype.hasLocked=function(){return this.get("locked")},a.prototype.removeEdge=function(e){var t=this.getEdges(),e=t.indexOf(e);-1<e&&t.splice(e,1)},a.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},a.prototype.getUpdateType=function(e){var t,n,r;if(e)return t=!(0,i.isNil)(e.x),n=!(0,i.isNil)(e.y),1===(r=Object.keys(e)).length&&(t||n)||2===r.length&&t&&n?"move":(0,i.isNumber)(e.x)||(0,i.isNumber)(e.y)||e.type||e.anchorPoints||e.size||null!=e&&e.style&&(null!=(t=null==e?void 0:e.style)&&t.r||null!=(n=null==e?void 0:e.style)&&n.width||null!=(t=null==e?void 0:e.style)&&t.height||null!=(n=null==e?void 0:e.style)&&n.rx||null!=(t=null==e?void 0:e.style)&&t.ry)?"bbox|label":r.includes("label")||r.includes("labelCfg")?"style|label":"style"},a.prototype.setState=function(e,t){var n=this;this.optimize?r.prototype.setState.call(this,e,t):this.runWithBBoxAffected(function(){return r.prototype.setState.call(n,e,t)})},a.prototype.clearStates=function(e){var t=this;this.optimize?r.prototype.clearStates.call(this,e):this.runWithBBoxAffected(function(){return r.prototype.clearStates.call(t,e)})},a.prototype.runWithBBoxAffected=function(e){var t=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach(function(e){t.includes(e)&&(r[e]=n[e])}),e();for(var o=this.getKeyShape().attr(),i=0;i<t.length;i++){var a=t[i];if(o[a]!==r[a]){this.clearCache(),this.getEdges().forEach(function(e){return e.refresh()});break}}},a);function a(){return null!==r&&r.apply(this,arguments)||this}t.default=n},2782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80468);Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},30271:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.processParallelEdges=t.isViewportChanged=t.isNaN=t.formatPadding=t.cloneEvent=t.calculationItemsBBox=void 0;var r=n(31834),o=n(24825);t.uniqueId=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},t.formatPadding=function(e){if((0,r.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}var t;return(0,r.isNumber)(e)?[e,e,e,e]:(0,r.isString)(e)?[t=parseInt(e,10),t,t,t]:[0,0,0,0]},t.cloneEvent=function(e){var t=new o.G6GraphEvent(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},t.isViewportChanged=function(e){if(e)for(var t=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(e[n]!==t[n])return!0;return!1},t.isNaN=function(e){return Number.isNaN(Number(e))},t.calculationItemsBBox=function(e){for(var t=1/0,n=-1/0,r=1/0,o=-1/0,i=0;i<e.length;i++){var a=e[i].getBBox(),s=a.minX,u=a.minY,l=a.maxX,a=a.maxY;s<t&&(t=s),u<r&&(r=u),n<l&&(n=l),o<a&&(o=a)}return{x:Math.floor(t),y:Math.floor(r),width:Math.ceil(n)-Math.floor(t),height:Math.ceil(o)-Math.floor(r),minX:t,minY:r,maxX:n,maxY:o}},t.processParallelEdges=function(e,t,n,r,o){void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===o&&(o=void 0);for(var i,a=e.length,s=2*(t=void 0===t?15:t),u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},c=[],f={},h=0;h<a;h++){var p=e[h],d=p.source,y=p.target,g="".concat(d,"-").concat(y);if(!c[h]){l[g]||(l[g]=[]),c[h]=!0,l[g].push(p);for(var v,m,b,w=0;w<a;w++)h!==w&&(m=(v=e[w]).source,b=v.target,c[w]||(d===b&&y===m?(l[g].push(v),c[w]=!0,f["".concat(m,"|").concat(b,"|").concat(l[g].length-1)]=!0):d===m&&y===b&&(l[g].push(v),c[w]=!0)))}}for(i in l)for(var _=l[i],x=_.length,S=0;S<x;S++){var O,P=_[S];P.source!==P.target?1===x&&r&&P.source!==P.target?P.type=r:(P.type=n,O=(S%2==0?1:-1)*(f["".concat(P.source,"|").concat(P.target,"|").concat(S)]?-1:1),P.curveOffset=x%2==1?O*Math.ceil(S/2)*s:O*(Math.floor(S/2)*s+t)):(o&&(P.type=o),P.loopCfg={position:u[S%8],dist:20*Math.floor(S/8)+50})}return e}},6130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSubjectColors=void 0,t.defaultSubjectColors=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]},61592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateLabelByLength=t.traverseTreeUp=t.traverseTree=t.shouldRefreshEdge=t.reconstructTree=t.plainCombosToTrees=t.getTextSize=t.getLoopCfgs=t.getLetterWidth=t.getLabelPosition=t.getComboBBox=t.getBBox=t.getAnimateCfgWithCallback=t.cloneBesidesImg=void 0;var s=n(97582),w=n(43708),u=n(31834),_=i(n(36605)),r=i(n(63198)),o=n(39520);function i(e){return e&&e.__esModule?e:{default:e}}function h(e,t){"function"==typeof t&&function e(t,n,r,o){if(!1!==o(t,n,r)){if(t&&t.children)for(var i=t.children.length-1;0<=i;i--)if(!e(t.children[i],t,i,o))return;return 1}}(e,null,-1,t)}function a(e,t){return t*(r.default[e]||1)}var l=Math.PI,c=Math.sin,f=Math.cos,x=c(l/8),S=f(l/8);t.getBBox=function(e,t){var e=e.getBBox(),n={x:e.minX,y:e.minY},e={x:e.maxX,y:e.maxY},t=(t&&(t=(t=t.getMatrix())||[1,0,0,0,1,0,0,0,1],n=(0,o.applyMatrix)(n,t),e=(0,o.applyMatrix)(e,t)),n.x),n=n.y,r=e.x,e=e.y;return{x:t,y:n,minX:t,minY:n,maxX:r,maxY:e,width:r-t,height:e-n}},t.getLoopCfgs=function(e){var t=e.sourceNode||e.targetNode,n=(n=t.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1],t=t.getKeyShape(),r=t.getBBox(),o=e.loopCfg||{},i=o.dist||2*Math.max(r.width,r.height),a=o.position||_.default.defaultLoopPosition,s=[(r.minX+r.maxX)/2+n[6],(r.minY+r.maxY)/2+n[7]],u=[e.startPoint.x,e.startPoint.y],l=[e.endPoint.x,e.endPoint.y],c=r.height/2,f=r.width/2,h=c,p=c,d=h*x,y=h*S,g=p*x,v=p*S,m=t.get("type"),n=Math.min(c/2,f/2),r=Math.min(c,f),b=null!==o&&o.pointPadding?Math.min(r,null===o?void 0:o.pointPadding):n;if(u[0]===l[0]&&u[1]===l[1]){switch(a){case"top":l="circle"===m?(u=[s[0]-d,s[1]-y],[s[0]+g,s[1]-v]):(u=[s[0]-b,s[1]-c],[s[0]+b,s[1]-c]);break;case"top-right":h=c,p=f,l="circle"===m?(u=[s[0]+(d=h*x),s[1]-(y=h*S)],[s[0]+(v=p*S),s[1]-(g=p*x)]):(u=[s[0]+f-b,s[1]-c],[s[0]+f,s[1]-c+b]);break;case"right":p=h=f,l="circle"===m?(u=[s[0]+(y=h*S),s[1]-(d=h*x)],[s[0]+(v=p*S),s[1]+(g=p*x)]):(u=[s[0]+f,s[1]-b],[s[0]+f,s[1]+b]);break;case"bottom-right":h=f,p=c,l="circle"===m?(u=[s[0]+(y=h*S),s[1]+(d=h*x)],[s[0]+(g=p*x),s[1]+(v=p*S)]):(u=[s[0]+f,s[1]+c-b],[s[0]+f-b,s[1]+c]);break;case"bottom":p=h=c,l="circle"===m?(u=[s[0]+(d=h*x),s[1]+(y=h*S)],[s[0]-(g=p*x),s[1]+(v=p*S)]):(u=[s[0]-b,s[1]+c],[s[0]+b,s[1]+c]);break;case"bottom-left":h=c,p=f,l="circle"===m?(u=[s[0]-(d=h*x),s[1]+(y=h*S)],[s[0]-(v=p*S),s[1]+(g=p*x)]):(u=[s[0]-f,s[1]+c-b],[s[0]-f+b,s[1]+c]);break;case"left":p=h=f,l="circle"===m?(u=[s[0]-(y=h*S),s[1]+(d=h*x)],[s[0]-(v=p*S),s[1]-(g=p*x)]):(u=[s[0]-f,s[1]-b],[s[0]-f,s[1]+b]);break;case"top-left":h=f,p=c,l="circle"===m?(u=[s[0]-(y=h*S),s[1]-(d=h*x)],[s[0]-(g=p*x),s[1]-(v=p*S)]):(u=[s[0]-f+b,s[1]-c],[s[0]-f,s[1]-c+b]);break;default:u=[s[0]-(d=(h=f)*x),s[1]-(y=h*S)],l=[s[0]+(g=(p=f)*x),s[1]-(v=p*S)]}!1===o.clockwise&&(t=[u[0],u[1]],u=[l[0],l[1]],l=[t[0],t[1]])}r=[u[0]-s[0],u[1]-s[1]],n=(h+i)/h,a=(p+i)/p,!1===o.clockwise&&(n=(p+i)/p,a=(h+i)/h),t=w.vec2.scale([0,0],r,n),o=[s[0]+t[0],s[1]+t[1]],i=[l[0]-s[0],l[1]-s[1]],r=w.vec2.scale([0,0],i,a),n=[s[0]+r[0],s[1]+r[1]];return e.startPoint={x:u[0],y:u[1]},e.endPoint={x:l[0],y:l[1]},e.controlPoints=[{x:o[0],y:o[1]},{x:n[0],y:n[1]}],e},t.getLabelPosition=function(e,t,n,r,o){var i=[],a=null==e?void 0:e.getPoint(t);if(!a)return{x:0,y:0,angle:0};t<1e-4?i=e.getStartTangent().reverse():.9999<t?i=e.getEndTangent():(e=null==e?void 0:e.getPoint(t+1e-4),i.push([a.x,a.y]),i.push([e.x,e.y]));t=Math.atan2(i[1][1]-i[0][1],i[1][0]-i[0][0]),t<0&&(t+=2*l),n&&(a.x+=f(t)*n,a.y+=c(t)*n),r&&(e=t-l/2,.5*l<t&&t<1.5*l&&(e-=l),a.x+=f(e)*r,a.y+=c(e)*r),i={x:a.x,y:a.y,angle:t};return o?(.5*l<t&&t<1.5*l&&(t-=l),(0,s.__assign)({rotate:t},i)):i},t.traverseTree=h,t.traverseTreeUp=function(e,t){"function"==typeof t&&function e(t,n,r,o){if(t&&t.children)for(var i=t.children.length-1;0<=i;i--)if(!e(t.children[i],t,i,o))return;return!1!==o(t,n,r)}(e,null,-1,t)};t.getLetterWidth=a,t.getTextSize=function(e,t){var n=0,r=new RegExp("[-]+");return e.split("").forEach(function(e){r.test(e)?n+=t:n+=a(e,t)}),[n,t]},t.truncateLabelByLength=function(e,t){return"number"!=typeof t||t<=0||t>=e.length?e:e.substring(0,t)+"..."},t.plainCombosToTrees=function(e,t){var i=[],a={},s={},r=(e.forEach(function(e){s[e.id]=e}),e.forEach(function(e,t){var n,r=(0,u.clone)(e),o=(r.itemType="combo",r.children=void 0,r.parentId===r.id?(console.warn("The parentId for combo ".concat(r.id," can not be the same as the combo's id")),delete r.parentId):r.parentId&&!s[r.parentId]&&(console.warn("The parent combo for combo ".concat(r.id," does not exist!")),delete r.parentId),a[r.id]);o?(r.children=o.children,(o=a[r.id]=r).parentId?(n=a[o.parentId])?n.children?n.children.push(r):n.children=[r]:(n={id:o.parentId,children:[o]},a[o.parentId]=n,a[r.id]=r):i.push(o)):((0,u.isString)(e.parentId)?(n=a[e.parentId])?n.children?n.children.push(r):n.children=[r]:(o={id:e.parentId,children:[r]},a[o.id]=o):i.push(r),a[r.id]=r)}),{}),o=((t||[]).forEach(function(e){r[e.id]=e;var t,n=a[e.comboId];n&&(t={id:e.id,comboId:e.comboId},n.children?n.children.push(t):n.children=[t],t.itemType="node",a[e.id]=t)}),0);return i.forEach(function(e){e.depth=o+10,h(e,function(e){var t=a[e.id].itemType,n="node"===t?a[e.comboId]:a[e.parentId],n=(e.depth=n&&"node"===t?o+1:o+10,o<e.depth&&(o=e.depth),r[e.id]);return n&&(n.depth=e.depth),!0})}),i},t.reconstructTree=function(e,n,r){var o,t,i,a,s=e,u={root:{children:e}},l=!1,c="root",f=((e||[]).forEach(function(e){if(!l)return e.id===n?("combo"===(o=e).itemType?o.parentId=r:o.comboId=r,void(l=!0)):void h(e,function(e){var t;return u[e.id]={children:(null==e?void 0:e.children)||[]},s=null==(t=u[e.parentId||e.comboId||"root"])?void 0:t.children,!e||!e.removed&&n!==e.id||!s||(c=e.parentId||e.comboId||"root","combo"===(o=e).itemType?o.parentId=r:o.comboId=r,!(l=!0))})}),(s=null==(f=u[c])?void 0:f.children)?s.indexOf(o):-1);return-1<f&&s.splice(f,1),l||(o={id:n,itemType:"node",comboId:r},u[n]={children:void 0}),n&&(t=!1,r?(i=0,(e||[]).forEach(function(e){t||h(e,function(e){return r!==e.id||(t=!0,e.children?e.children.push(o):e.children=[o],i=e.depth,"node"===o.itemType?o.depth=i+2:o.depth=i+1,!1)})})):"node"!==o.itemType&&e.push(o),a=o.depth,h(o,function(e){return"node"===e.itemType?a+=2:a+=1,e.depth=a,!0})),e},t.getComboBBox=function(e,t,n){var r,o,i,a={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return e&&0!==e.length?(e.forEach(function(e){var e=t.findById(e.id);e&&e.isVisible()&&(e.set("bboxCanvasCache",void 0),(e=e.getCanvasBBox()).x&&a.minX>e.minX&&(a.minX=e.minX),e.y&&a.minY>e.minY&&(a.minY=e.minY),e.x&&a.maxX<e.maxX&&(a.maxX=e.maxX),e.y)&&a.maxY<e.maxY&&(a.maxY=e.maxY)}),a.x=(a.minX+a.maxX)/2,a.y=(a.minY+a.maxY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,"circle"===(null==n?void 0:n.getKeyShape().get("type"))&&(a.width=Math.hypot(a.height,a.width),a.height=a.width),Object.keys(a).forEach(function(e){a[e]!==1/0&&a[e]!==-1/0||(a[e]=void 0)}),a):(n=(e=(null==n?void 0:n.getModel())||{}).x,r=e.y,o=e.fixSize,i=e.collapsed,e=e.fixCollapseSize,{minX:n-(e=[(o=(e=(0,u.isArray)(i=i?e:o)?i:[i,i])[0])/2,(i=e[1])/2])[0],minY:r-e[1],maxX:n+e[0],maxY:r+e[1],x:n,y:r,width:o,height:i})},t.shouldRefreshEdge=function(e){var t=(0,u.isNumber)(e.x)||(0,u.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return t=e.style?t||(0,u.isNumber)(e.style.r)||(0,u.isNumber)(e.style.width)||(0,u.isNumber)(e.style.height)||(0,u.isNumber)(e.style.rx)||(0,u.isNumber)(e.style.ry):t},t.cloneBesidesImg=function(t){var o={};return Object.keys(t).forEach(function(e){var n,r=t[e];"img"===e&&!(0,u.isString)(r)||((0,u.isObject)(r)&&!(0,u.isArray)(r)?(n={},Object.keys(r).forEach(function(e){var t=r[e];"img"===e&&!(0,u.isString)(t)||(n[e]=(0,u.clone)(t))}),o[e]=n):o[e]=(0,u.clone)(r))}),o},t.getAnimateCfgWithCallback=function(e){var t,n,r=e.animateCfg,o=e.callback;return r?(t=(0,u.clone)(r),r.callback?(n=r.callback,t.callback=function(){o(),n()}):t.callback=o):t={duration:500,callback:o},t}},21712:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),o=h(n(39520)),i=h(n(61592)),s=h(n(28362)),u=h(n(30271)),l=h(n(6130)),c=h(n(42658)),n=n(43708);function f(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(f=function(e){return e?n:t})(e))}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}var p=n.ext.transform,r=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},u),i),s),o),l),c),{transform:p,mat3:n.mat3});t.default=r},42658:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForce=void 0,t.isForce=function(e){return"force"===e||"g6force"===e||"gForce"===e||"force2"===e}},63198:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875}},39520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=t.squareDist=t.scaleMatrix=t.scale=t.rotate=t.pointRectSquareDist=t.pointLineSquareDist=t.pointLineDistance=t.move=t.lerpArray=t.lerp=t.itemIntersectByLine=t.isPolygonsIntersect=t.isPointsOverlap=t.isPointInPolygon=t.invertMatrix=t.intersectBBox=t.getRectIntersectByPoint=t.getPointsCenter=t.getLineIntersect=t.getEllipseIntersectByPoint=t.getDegree=t.getCircleIntersectByPoint=t.getCircleCenterByPoints=t.getBBoxBoundLine=t.getAdjMatrix=t.fractionToLine=t.floydWarshall=t.distance=t.compare=t.applyMatrix=t.Line=void 0;function l(e,t,n){return t<=e&&e<=n}function f(e,t,n,r){var o=n.x-e.x,i=n.y-e.y,a=t.x-e.x,t=t.y-e.y,s=r.x-n.x,r=r.y-n.y,u=1/(n=a*r-t*s);return 1e-4*(a*a+t*t)*(s*s+r*r)<n*n&&l(n=(o*r-i*s)*u,0,1)&&l((o*t-i*a)*u,0,1)?{x:e.x+n*a,y:e.y+n*t}:null}var a=n(43708),c=n(31834),p=a.ext.transform;t.compare=function(n){return function(e,t){return e[n]-t[n]}};t.getLineIntersect=f,t.getRectIntersectByPoint=function(e,t){var n=e.x,r=e.y,o=e.width,e=e.height,i=[],a={x:n+o/2,y:r+e/2};i.push({x:n,y:r}),i.push({x:n+o,y:r}),i.push({x:n+o,y:r+e}),i.push({x:n,y:r+e}),i.push({x:n,y:r});for(var s=null,u=1;u<i.length&&!(s=f(i[u-1],i[u],a,t));u++);return s},t.getCircleIntersectByPoint=function(e,t){var n,r=e.x,o=e.y,e=e.r,i=t.x-r,t=t.y-o;return i*i+t*t<e*e?null:(n=Math.atan(t/i),{x:r+Math.abs(e*Math.cos(n))*Math.sign(i),y:o+Math.abs(e*Math.sin(n))*Math.sign(t)})},t.getEllipseIntersectByPoint=function(e,t){var n=e.rx,r=e.ry,o=e.x,e=e.y,i=t.x-o,t=t.y-e,t=Math.atan2(t/r,i/n);return t<0&&(t+=2*Math.PI),{x:o+n*Math.cos(t),y:e+r*Math.sin(t)}},t.applyMatrix=function(e,t,n){e=[e.x,e.y,n=void 0===n?1:n];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),a.vec3.transformMat3(e,e,t),{x:e[0],y:e[1]}},t.invertMatrix=function(e,t,n){void 0===n&&(n=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);t=(t=a.mat3.invert([1,0,0,0,1,0,0,0,1],t))||[1,0,0,0,1,0,0,0,1],e=[e.x,e.y,n];return a.vec3.transformMat3(e,e,t),{x:e[0],y:e[1]}},t.getCircleCenterByPoints=function(e,t,n){var r=e.x-t.x,o=e.y-t.y,i=e.x-n.x,a=e.y-n.y,t=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,n=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,e=o*i-r*a;return{x:-(a*t-o*n)/e,y:-(r*n-i*t)/e}},t.distance=function(e,t){var n=e.x-t.x,e=e.y-t.y;return Math.sqrt(n*n+e*e)},t.scaleMatrix=function(e,n){var r=[];return e.forEach(function(e){var t=[];e.forEach(function(e){t.push(e*n)}),r.push(t)}),r},t.floydWarshall=function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var o=0;o<n;o+=1)r===o?t[r][o]=0:0!==e[r][o]&&e[r][o]?t[r][o]=e[r][o]:t[r][o]=1/0}for(var i=0;i<n;i+=1)for(r=0;r<n;r+=1)for(o=0;o<n;o+=1)t[r][o]>t[r][i]+t[i][o]&&(t[r][o]=t[r][i]+t[i][o]);return t},t.getAdjMatrix=function(e,n){var t=e.nodes,e=e.edges,r=[],o={};if(t)return t&&t.forEach(function(e,t){o[e.id]=t,r.push([])}),e&&e.forEach(function(e){var t=e.source,e=e.target,t=o[t],e=o[e];r[t][e]=1,n||(r[e][t]=1)}),r;throw new Error("invalid nodes data!")},t.translate=function(e,t){e.translate(t.x,t.y)},t.move=function(e,t,n,r){void 0===r&&(r={duration:500});var o,i,a,s,u,l,c=(c=e.getMatrix())||[1,0,0,0,1,0,0,0,1],f=e.getCanvasBBox(),h=t.x-f.minX,t=t.y-f.minY;n?(o=h*c[0],i=t*c[4],l=u=s=a=0,e.animate(function(e){return c=p(c,[["t",(u=o*e)-a,(l=i*e)-s]]),a=u,s=l,{matrix:c}},r)):(f=p(c,[["t",h,t]]),e.setMatrix(f))},t.scale=function(e,t){var n=(n=e.getMatrix())||[1,0,0,0,1,0,0,0,1],r=t;(0,c.isArray)(t)||(r=[t,t]),(0,c.isArray)(t)&&1===t.length&&(r=[t[0],t[0]]),n=p(n,[["s",r[0],r[1]]]),e.setMatrix(n)},t.rotate=function(e,t){var n=e.getMatrix();n=p(n=n||[1,0,0,0,1,0,0,0,1],[["r",t]]),e.setMatrix(n)},t.getDegree=function(e,t,n){for(var r=[],o=0;o<e;o++)r[o]=0;return n.forEach(function(e){e.source&&(r[t[e.source]]+=1),e.target&&(r[t[e.target]]+=1)}),r};function h(e,t,n){var r=!1,o=e.length;function i(e){return Math.abs(e)<1e-6?0:e<0?-1:1}if(o<=2)return!1;for(var a,s,u,l=0;l<o;l++){var c=e[l],f=e[(l+1)%o];if(s=f,((u=[t,n])[0]-(a=c)[0])*(s[1]-a[1])==(s[0]-a[0])*(u[1]-a[1])&&Math.min(a[0],s[0])<=u[0]&&u[0]<=Math.max(a[0],s[0])&&Math.min(a[1],s[1])<=u[1]&&u[1]<=Math.max(a[1],s[1]))return!0;0<i(c[1]-n)!=0<i(f[1]-n)&&i(t-(n-c[1])*(c[0]-f[0])/(c[1]-f[1])-c[0])<0&&(r=!r)}return r}function d(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}t.isPointInPolygon=h;t.intersectBBox=d,t.isPolygonsIntersect=function(t,n){function e(e){var t=e.map(function(e){return e[0]}),e=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function r(e){for(var t,n,r=[],o=e.length,i=0;i<o-1;i++){var a=e[i],s=e[i+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(t=e[0],n=e[o-1],r.push({from:{x:n[0],y:n[1]},to:{x:t[0],y:t[1]}})),r}var o,i,a,s,u;return!(t.length<2||n.length<2||(s=e(t),o=e(n),!d(s,o)))&&((i=!1,c.each)(n,function(e){if(h(t,e[0],e[1]))return!(i=!0)}),!!i||((0,c.each)(t,function(e){if(h(n,e[0],e[1]))return!(i=!0)}),!!i)||(a=r(t),s=r(n),(u=!1,c.each)(s,function(e){if(t=e,(n=!1,c.each)(a,function(e){if(f(e.from,e.to,t.from,t.to))return!(n=!0)}),n)return!(u=!0);var t,n}),u))},r.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:e,y:t,minX:e,minY:t,maxX:n,maxY:r,width:n-e,height:r-t}};var y=r;function r(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}t.Line=y;function g(e,t){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[t]}function s(e,t,n){return e+(t-e)*n}t.getBBoxBoundLine=g,t.itemIntersectByLine=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),o=0,i=[],a=0;a<4;a++){var s=g(r,n[a]),u=s[0],l=s[1],c=s[2],s=s[3];i[a]=f({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:l},{x:c,y:s}),i[a]&&(o+=1)}return[i,o]},t.fractionToLine=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),o=Number.POSITIVE_INFINITY,i=0,a=0;a<4;a++){var s=g(r,n[a]),u=s[0],l=s[1],c=s[2],s=s[3],u=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),t=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(t){e=n/t,n=r/t;if(0<=e&&e<=1&&0<=n&&n<=1)return e}return Number.POSITIVE_INFINITY}(t,new y(u,l,c,s));0<=(u=Math.abs(u-.5))&&u<=1&&(i+=1,o=u<o?u:o)}return 0===i?-1:o},t.getPointsCenter=function(e){var t=0,n=0;if(0<e.length){for(var r=0,o=e;r<o.length;r++){var i=o[r];t+=i.x,n+=i.y}t/=e.length,n/=e.length}return{x:t,y:n}},t.squareDist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},t.pointLineSquareDist=function(e,t){var n=t.x1,r=t.y1,o=t.x2-n,t=t.y2-r,n=e.x-n,e=e.y-r,r=n*o+e*t<=0||(r=(n=o-n)*o+(e=t-e)*t)<=0?0:r*r/(o*o+t*t),o=n*n+e*e-r;return o=o<0?0:o},t.isPointsOverlap=function(e,t,n){return void 0===n&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},t.pointRectSquareDist=function(e,t){var n=e.x<t.x,r=e.x>t.x+t.width,o=e.y>t.y+t.height,i=e.y<t.y;return n||r||o||i?!o||n||r?!i||n||r?!n||o||i?!r||o||i?(n=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)))*n+(r=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y)))*r:Math.pow(t.x+t.width-e.x,2):Math.pow(t.x-e.x,2):Math.pow(e.y-t.y,2):Math.pow(t.y+t.height-e.y,2):0},t.pointLineDistance=function(e,t){var n=e[0],r=e[1],o=e[2],e=e[3],i=t.x,t=t.y,o=[o-n,e-r];return a.vec2.exactEquals(o,[0,0])?NaN:(a.vec2.normalize(e=[-o[1],o[0]],e),Math.abs(a.vec2.dot([i-n,t-r],e)))};t.lerp=s,t.lerpArray=function(e,t,n){for(var r=Math.min(e.length,t.length),o=new Array(r),i=0;i<r;i++)o[i]=s(e[i],t[i],n);return o}},28362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStarPath=t.getSpline=t.getControlPoint=t.getClosedSpline=void 0,t.paddedHull=function(n,e){var t,r,o,i,a,s=n.length;if(!n||s<1)return"";if(1===s)return r=[n[0][0],n[0][1]-e],t=[n[0][0],n[0][1]+e],"M ".concat(r," A ").concat([e,e,"0,0,0",t].join(",")," A ").concat([e,e,"0,0,0",r].join(","));if(2===s)return r=h((t=n)[0],t[1]),o=f(r,e),i=p.vec2.add([0,0],t[0],p.vec2.scale([0,0],o,-1)),t=p.vec2.add([0,0],t[1],o),o=1.2*e,r=f(p.vec2.normalize([0,0],r),o),o=p.vec2.scale([0,0],r,-1),a=p.vec2.add([0,0],i,o),o=p.vec2.add([0,0],t,o),r=p.vec2.add([0,0],i,r),"M ".concat(i," C ").concat([a,o,t].join(",")," S ").concat([r,i].join(",")," Z");for(var u=n.map(function(e,t){t=n[(t+1)%s];return{p:e,v:p.vec2.normalize([0,0],h(e,t))}}),l=0;l<u.length;++l){var c=p.vec2.normalize([0,0],p.vec2.add([0,0],u[0<l?l-1:s-1].v,p.vec2.scale([0,0],u[l].v,-1)));u[l].p=p.vec2.add([0,0],u[l].p,p.vec2.scale([0,0],c,e))}return u.map(function(e){e=e.p;return{x:e[0],y:e[1]}})},t.pointsToPolygon=t.pathToPoints=void 0,t.roundedHull=function(e,t){if(!e||e.length<1)return"";if(1===e.length)return r=[e[0][0],e[0][1]-t],n=[e[0][0],e[0][1]+t],"M ".concat(r," A ").concat(t,",").concat(t,",0,0,0,").concat(n," A ").concat(t,",").concat(t,",0,0,0,").concat(r);var n,r,o,i,a;if(2===e.length)return n=e,r=p.vec2.scale([0,0],d(n[0],n[1]),t),o=p.vec2.scale([0,0],r,-1),i=p.vec2.add([0,0],n[0],r),r=p.vec2.add([0,0],n[1],r),a=p.vec2.add([0,0],n[1],o),n=p.vec2.add([0,0],n[0],o),"M ".concat(i," L ").concat(r," A ").concat([t,t,"0,0,0",a].join(",")," L ").concat(n," A ").concat([t,t,"0,0,0",i].join(","));for(var s=new Array(e.length),u=0;u<s.length;++u){var l=0===u?e[e.length-1]:e[u-1],c=e[u],f=p.vec2.scale([0,0],d(l,c),t);s[u]=[p.vec2.add([0,0],l,f),p.vec2.add([0,0],c,f)]}var h="A ".concat([t,t,"0,0,0,"].join(","));return(s=s.map(function(e,t){var n="";return(n=0===t?"M ".concat(s[s.length-1][1]," "):n)+"".concat(h+e[0]," L ").concat(e[1])})).join(" ")};var p=n(43708),s=n(73920),f=(t.getSpline=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,r=e;n<r.length;n++){var o=r[n],i=o.x,o=o.y;t.push(i),t.push(o)}var a=(0,s.catmullRom2Bezier)(t);return a.unshift(["M",e[0].x,e[0].y]),a},t.getControlPoint=function(e,t,n,r){void 0===r&&(r=0);var n={x:(1-(n=void 0===n?0:n))*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0],t=(p.vec2.normalize(o,[t.x-e.x,t.y-e.y]),[-(o=o&&(o[0]||o[1])?o:[0,0])[1]*r,o[0]*r]);return n.x+=t[0],n.y+=t[1],n},t.pointsToPolygon=function(e,t){var n=e.length;if(!n)return"";for(var r="",o=0;o<n;o++)r+=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(e,t){return"\\"===e.charAt(0)?e.slice(1):(e=0===(e=n[t])?"0":e)||""}):e}(0===o?"M{x} {y}":"L{x} {y}",e[o]);return t&&(r+="Z"),r},t.pathToPoints=function(e){var r=[];return e.forEach(function(e){if("A"!==e[0])for(var t=1;t<e.length;t+=2)r.push([e[t],e[t+1]]);else{var n=e.length;r.push([e[n-2],e[n-1]])}}),r},t.getClosedSpline=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],n=e[1],r=e[e.length-1],o=e[e.length-2];e.unshift(r),e.unshift(o),e.push(t),e.push(n);for(var i=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,u=e[a-1].y,l=e[a].x,c=e[a].y,f=e[a+1].x,h=e[a+1].y,p=f-((a!==e.length-2?e[a+2].x:f)-l)/6,d=h-((a!==e.length-2?e[a+2].y:h)-c)/6;i.push(["C",l+(f-s)/6,c+(h-u)/6,p,d,f,h])}return i.unshift(["M",r.x,r.y]),i},function(e,t){return p.vec2.scale([0,0],p.vec2.normalize([0,0],e),t)}),d=function(e,t){t=[e[1]-t[1],t[0]-e[0]],e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);if(0===e)throw new Error("p0 should not be equal to p1");return[t[0]/e,t[1]/e]},h=function(e,t){return[t[0]-e[0],t[1]-e[1]]};t.getStarPath=function(e,t){for(var n=[],r=0;r<5;r++){var o=Math.cos((18+72*r)/180*Math.PI)*e,i=Math.sin((18+72*r)/180*Math.PI)*e,a=Math.cos((54+72*r)/180*Math.PI)*t,s=Math.sin((54+72*r)/180*Math.PI)*t;n.push(0===r?["M",o,-i]:["L",o,-i]),n.push(["L",a,-s])}return n.push(["Z"]),n}},29001:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.singleDataValidation=t.dataValidation=void 0;var s=n(97582),u=n(31834),l=n(61592);t.dataValidation=function(e){var t,n,r,o,i,a;return e?(o=e.nodes,t=e.edges,a=void 0===(a=e.combos)?[]:a,o||t?(r=(o||[]).find(function(e){return!(0,u.isString)(e.id)}))?(console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(r.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1):(r=(o||[]).map(function(e){return e.id}),o=null==a?void 0:a.map(function(e){return e.id}),i=(0,s.__spreadArray)((0,s.__spreadArray)([],r,!0),o,!0),!(a=(t||[]).find(function(e){return!i.includes(e.source)||!i.includes(e.target)}))||(console.warn("G6 Warning Tips: The source %c".concat(a.source,"%c or the target %c").concat(a.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)):(n=!0,(0,l.traverseTree)(e,function(e){return!!(0,u.isString)(e.id)||(n=!1)}),n)):(console.error("G6 Error Tips: the data must be defined"),!1)},t.singleDataValidation=function(e,t){if("node"===e||"combo"===e){if(t.id&&!(0,u.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==e||t.source&&t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}},61885:function(e,t,n){"use strict";n(79409)},58452:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifyPolyline=t.removeRedundantPoint=t.removeFrom=t.reconstructPath=t.pathFinder=t.mergeBBox=t.isSegmentsIntersected=t.isSegmentCrossingBBox=t.isPointOutsideBBox=t.isHorizontalPort=t.isBending=t.isBBoxesOverlapping=t.heuristicCostEstimate=t.getSimplePolyline=t.getPolylinePoints=t.getPointsFromBBox=t.getPathWithBorderRadiusByPolyline=t.getNeighborPoints=t.getExpandedBBoxPoint=t.getExpandedBBox=t.getBorderRadiusPoints=t.getBBoxYCrossPoints=t.getBBoxXCrossPoints=t.getBBoxFromPoints=t.getBBoxFromPoint=t.getBBoxCrossPointsByPoint=t.filterConnectPoints=t.distance=t._costByPoints=t.SortedArray=void 0;function p(e){var t=e.x,e=e.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}}function d(e){var t=[],n=[],e=((e=void 0===e?[]:e).forEach(function(e){t.push(e.x),n.push(e.y)}),Math.min.apply(Math,t)),r=Math.max.apply(Math,t),o=Math.min.apply(Math,n),i=Math.max.apply(Math,n);return{centerX:(e+r)/2,centerY:(o+i)/2,maxX:r,maxY:i,minX:e,minY:o,height:i-o,width:r-e}}function y(e){for(var t=[],n={},r=e.length-1;0<=r;r--){var o=e[r];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,t.push(o))}return t}t.getBBoxFromPoint=p,t.getBBoxFromPoints=d,t.isBBoxesOverlapping=function(e,t){return 2*Math.abs(e.centerX-t.centerX)<e.width+t.width&&2*Math.abs(e.centerY-t.centerY)<e.height+t.height};function g(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e}function a(e,t){var n=Math.abs(e.x-t.centerX),e=Math.abs(e.y-t.centerY);return 0===n&&0===e?0:n/t.width>e/t.height}function v(e,t,n){var r,o,i=a(t,e);return 0===i?(r=e.centerX,o=e.centerY,n.y<t.y?o=e.minY:n.x>t.x?r=e.maxX:n.x<t.x?r=e.minX:n.x===t.x&&(o=e.maxY),{x:r,y:o}):i?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}}function m(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),o=Math.max(e.maxX,t.maxX),e=Math.max(e.maxY,t.maxY);return{centerX:(n+o)/2,centerY:(r+e)/2,minX:n,minY:r,maxX:o,maxY:e,height:e-r,width:o-n}}function b(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]}function w(e,t){var n=e.x,e=e.y;return n<t.minX||n>t.maxX||e<t.minY||e>t.maxY}function n(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]}function r(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]}function _(e,t){return n(e,t.x).concat(r(e,t.y))}function x(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function i(t,e){var n=0;return e.forEach(function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y)&&(n+=-2)}),n}function S(e,t,n,r,o){return x(e,t)+x(e,n)+i(e,[t,n,r,o])}function O(e,t,n,r,o){void 0===o&&(o=0),e.unshift(t[r]),n[r]&&n[r]!==r&&o<=100&&O(e,t,n,n[r],o+1)}function s(e,t,n,r){var o=n.x-e.x,i=n.y-e.y,a=r.x-e.x,e=r.y-e.y,s=n.x-t.x,n=n.y-t.y,u=r.x-t.x,r=r.y-t.y;return(o*e-i*a)*(s*r-n*u)<=0&&(o*n-i*s)*(a*r-e*u)<=0}function u(e,t,n){var r,o,i;return!(!n.width&&!n.height)&&(r=(n=b(n))[0],o=n[1],i=n[2],n=n[3],s(e,t,r,o)||s(e,t,r,n)||s(e,t,o,i)||s(e,t,i,n))}function P(e,t,n,r){var o=[];return e.forEach(function(e){e===t||e.x!==t.x&&e.y!==t.y||u(e,t,n)||u(e,t,r)||o.push(e)}),y(o)}function E(e,r,o,t,n,i,a){var s,u=[],l=((s={})[r.id]=r,s),c={},f={},h={},p=(f[r.id]=0,h[r.id]=S(r,o,r),new M);p.add({id:r.id,value:h[r.id]});var d,y={};for(e.forEach(function(e){y[e.id]=e});Object.keys(l).length;){var g=p.minId(!1);if(!g)break;if((d=l[g])===o)return O(g=[],y,c,o.id),g;delete l[d.id],p.remove(d.id),u.push(d),P(e,d,t,n).forEach(function(e){var t,n;-1===u.indexOf(e)&&(t=e.id,l[t]||(l[t]=e),n=h[d.id]+x(d,e),f[t]&&f[t]<=n||(c[t]=d.id,f[t]=n,h[t]=f[t]+S(e,o,r,i,a)),p.add({id:t,value:h[t]}))})}return[r,o]}function l(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)}function c(e,t,n,r){var o=x(e,t),i=x(n,t);return[{x:t.x-(r=i<(r=o<r?o:r)?i:r)/o*(t.x-e.x),y:t.y-r/o*(t.y-e.y)},{x:t.x-r/i*(t.x-n.x),y:t.y-r/i*(t.y-n.y)}]}var k=t.filterConnectPoints=y,M=(t.simplifyPolyline=k,t.getSimplePolyline=function(e,t){return[e,{x:e.x,y:t.y},t]},t.getExpandedBBox=g,t.isHorizontalPort=a,t.getExpandedBBoxPoint=v,t.mergeBBox=m,t.getPointsFromBBox=b,t.isPointOutsideBBox=w,t.getBBoxXCrossPoints=n,t.getBBoxYCrossPoints=r,t.getBBoxCrossPointsByPoint=_,t.distance=x,t._costByPoints=i,t.heuristicCostEstimate=S,t.reconstructPath=O,t.removeFrom=function(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)},t.isSegmentsIntersected=s,t.isSegmentCrossingBBox=u,t.getNeighborPoints=P,t.pathFinder=E,t.isBending=l,t.getBorderRadiusPoints=c,t.getPathWithBorderRadiusByPolyline=function(r,o){var i=[],e=r[0];return i.push("M".concat(e.x," ").concat(e.y)),r.forEach(function(e,t){var n=r[t+1],t=r[t+2];n&&t?l(e,n,t)?(t=(e=c(e,n,t,o))[0],e=e[1],i.push("L".concat(t.x," ").concat(t.y)),i.push("Q".concat(n.x," ").concat(n.y," ").concat(e.x," ").concat(e.y)),i.push("L".concat(e.x," ").concat(e.y))):i.push("L".concat(n.x," ").concat(n.y)):n&&i.push("L".concat(n.x," ").concat(n.y))}),i.join("")},t.getPolylinePoints=function(e,t,n,r,o){n&&n.getType()?"combo"===n.getType()?(l=n.getKeyShape().getBBox())?((a={x:a=(c=n.getModel()).x,y:c=c.y,width:l.width,height:l.height,minX:l.minX+a,maxX:l.maxX+a,minY:l.minY+c,maxY:l.maxY+c}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2):a=p(e):a=n&&n.getBBox():a=p(e),r&&r.getType()?"combo"===r.getType()?(l=r.getKeyShape().getBBox())?((i={x:n=(c=r.getModel()).x,y:c=c.y,width:l.width,height:l.height,minX:l.minX+n,maxX:l.maxX+n,minY:l.minY+c,maxY:l.maxY+c}).centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2):i=p(t):i=r&&r.getBBox():i=p(t);var i,a,s=g(a,o),u=g(i,o),n=v(s,e,t),l=v(u,t,e),c=d([n,l]),r=m(s,c),o=m(u,c),f=(f=[]).concat(b(r)).concat(b(o)),h={x:(e.x+t.x)/2,y:(e.y+t.y)/2},c=([c,r,o].forEach(function(e){f=f.concat(_(e,h).filter(function(e){return w(e,s)&&w(e,u)}))}),[{x:n.x,y:l.y},{x:l.x,y:n.y}].forEach(function(e){w(e,s)&&w(e,u)&&f.push(e)}),f.unshift(n),f.push(l),f=y(f),E(f,n,l,a,i,e,t));return c.unshift(e),c.push(t),k(c)},t.removeRedundantPoint=function(e){if(null!=e&&e.length)for(var t=e[e.length-1],n={x:t.x,y:t.y},r=[t],o=[t],i=e.length-2;0<=i;i--){var a,s=e[i];s.x===n.x?r.push(s):(r=[s],n.x=s.x),s.y===n.y?o.push(s):(o=[s],n.y=s.y),2<r.length?-1<(a=e.indexOf(r[1]))&&e.splice(a,1):2<o.length&&-1<(a=e.indexOf(o[1]))&&e.splice(a,1)}return e},o.prototype._innerAdd=function(e,t){for(var n=[0,t-1];1<n[1]-n[0];){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>e.value)n[1]=r;else{if(!(this.arr[r].value<e.value))return this.arr.splice(r,0,e),void(this.map[e.id]=!0);n[0]=r}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},o.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;return!t||this.arr[t-1].value<e.value?(this.arr.push(e),void(this.map[e.id]=!0)):void this._innerAdd(e,t)},o.prototype.remove=function(e){this.map[e]&&delete this.map[e]},o.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;0<=t;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},o.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},o.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},o);function o(){this.arr=[],this.map={},this.arr=[],this.map={}}t.SortedArray=M},79409:function(e,t,n){"use strict";var r=n(97582),d=n(31834),c=n(48122),f=n(58452),h=n(79917);(0,c.registerEdge)("polyline",{options:{color:c.BaseGlobal.defaultEdge.color,size:c.BaseGlobal.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:c.BaseGlobal.defaultEdge.style.stroke,lineAppendWidth:c.BaseGlobal.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:c.BaseGlobal.edgeLabel.style.fill,fontSize:c.BaseGlobal.edgeLabel.style.fontSize,fontFamily:c.BaseGlobal.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,r.__assign)({},c.BaseGlobal.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){e=this.getShapeStyle(e),0===e.radius&&delete e.radius,e=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return t.shapeMap["edge-shape"]=e},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},t=(0,d.mix)({},t,n,e.style),n=(e=this.getPathPoints(e),this.radius=t.radius,this.offset=t.offset,e.startPoint),r=e.endPoint,o=this.getControlPoints(e),i=[n],a=((i=o?i.concat(o):i).push(r),e.sourceNode),s=e.targetNode,u=t.radius,l=this.options.routeCfg,l=(0,d.mix)({},l,e.routeCfg),i=(l.offset=t.offset,this.getPath(i,a,s,u,l,!Boolean(o)));return((0,d.isArray)(i)&&i.length<=1||(0,d.isString)(i)&&-1===i.indexOf("L"))&&(i="M0 0, L0 0"),(isNaN(n.x)||isNaN(n.y)||isNaN(r.x)||isNaN(r.y))&&(i="M0 0, L0 0"),(0,d.mix)({},c.BaseGlobal.defaultEdge.style,t,{lineWidth:e.size,path:i})},updateShapeStyle:function(e,t){var n,r,o,i,a,s,u,l,c,f,h,p=t.getContainer();t.isVisible()&&(n={stroke:e.color},p=p.shapeMap["edge-shape"]||p.find(function(e){return"edge-shape"===e.get("className")})||t.getKeyShape(),t=e.size,r=(e=this.getPathPoints(e)).startPoint,o=e.endPoint,f=[r],(f=(i=this.getControlPoints(e))?f.concat(i):f).push(o),a=p.attr(),s=(0,d.mix)({},n,a,e.style),h=e.sourceNode,u=e.targetNode,l=s.radius,c=this.options.routeCfg,(c=(0,d.mix)({},c,e.routeCfg)).offset=s.offset,f=this.getPath(f,h,u,l,c,!Boolean(i)),((0,d.isArray)(f)&&f.length<=1||(0,d.isString)(f)&&-1===f.indexOf("L"))&&(f="M0 0, L0 0"),(isNaN(r.x)||isNaN(r.y)||isNaN(o.x)||isNaN(o.y))&&(f="M0 0, L0 0"),a.endArrow&&!1===s.endArrow&&(e.style.endArrow={path:""}),a.startArrow&&!1===s.startArrow&&(e.style.startArrow={path:""}),h=(0,d.mix)(n,p.attr(),{lineWidth:t,path:f},e.style),p)&&p.attr(h)},getPath:function(e,t,n,r,o,i){var a,s=o.offset,u=o.obstacles,l=o.simple;return!s||2<e.length||!1===i?r?(0,f.getPathWithBorderRadiusByPolyline)(e,r):(a=[],(0,d.each)(e,function(e,t){a.push(0===t?["M",e.x,e.y]:["L",e.x,e.y])}),a):(i=(l=!1===l||null!=u&&u.length?l:!0)?(0,f.getPolylinePoints)(e[e.length-1],e[0],n,t,s):(0,h.pathFinder)(e[0],e[e.length-1],t,n,o))&&i.length?r?(0,f.getPathWithBorderRadiusByPolyline)(i,r):(i=(0,f.removeRedundantPoint)(i),c.Util.pointsToPolygon(i)):"M0 0, L0 0"}},"single-edge")},79917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathFinder=t.octolinearCfg=void 0;function X(e,t){return(t=Math.round(Math.abs(e/t)))<0?0:(e<0?-1:1)*t}function q(e,t,n){for(var r=1/0,o=0,i=t.length;o<i;o++){var a=n(e,t[o]);a<r&&(r=a)}return r}function J(e,t,n,r,o){var i=[];if(!n)return[e];var a=o.directions,s=o.offset,u=n.getBBox(),n=t.x>u.minX&&t.x<u.maxX&&t.y>u.minY&&t.y<u.maxY,l=(0,Q.getExpandedBBox)(u,s);for(d in l)l[d]=X(l[d],o.gridSize);if(n){for(var c=0,f=a;c<f.length;c++)for(var h=f[c],p=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],d=0;d<4;d++){var y=p[d],y=g.Util.getLineIntersect(e,{x:e.x+h.stepX*l.width,y:e.y+h.stepY*l.height},y[0],y[1]);y&&!(0,Q.isSegmentCrossingBBox)(e,y,u)&&(y.id="".concat(y.x,"|||").concat(y.y),i.push(y))}return i}return(t=(0,Q.getExpandedBBoxPoint)(l,e,r)).id="".concat(t.x,"|||").concat(t.y),[t]}function Z(e,t,n,r){var t=o(e,t),n=n[e.id];return n=o(n?{x:n.x,y:n.y}:r,e),i(n,t)}var g=n(48122),K=n(31834),Q=n(58452),$={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},fallbackRoute:function(e,t,n,r,o){return(0,Q.simplifyPolyline)((0,Q.getPolylinePoints)(e,t,n,r,o.offset))}},n={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},fallbackRoute:function(e,t){return[e,t]}},o=(t.octolinearCfg=n,function(e,t){var n=t.x-e.x,t=t.y-e.y;return n||t?Math.atan2(t,n):0}),i=function(e,t){e=Math.abs(e-t);return e>Math.PI?2*Math.PI-e:e};t.pathFinder=function(e,t,n,r,o){if(isNaN(e.x)||isNaN(t.x))return[];var i,N,a,s=(0,K.deepMix)($,o),D=(s.obstacles=s.obstacles||[],s.penalties),u=s.gridSize,l=(o=s.obstacles.concat([n,r]),i=u,N=s.offset,a={},o.forEach(function(e){if(e)for(var t=(0,Q.getExpandedBBox)(e.getBBox(),N),n=X(t.minX,i);n<=X(t.maxX,i);n+=1)for(var r=X(t.minY,i);r<=X(t.maxY,i);r+=1)a["".concat(n,"|||").concat(r)]=!0}),a),c={x:X(e.x,u),y:X(e.y,u)},f={x:X(t.x,u),y:X(t.y,u)},h=(e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(f.x,"|||").concat(f.y),J(c,e,n,f,s)),p=J(f,t,r,c,s);h.forEach(function(e){delete l[e.id]}),p.forEach(function(e){delete l[e.id]});for(var d={},B={},F={},y={},g={},v=new Q.SortedArray,m=0;m<h.length;m++){var b=h[m];y[(d[b.id]=b).id]=0,g[b.id]=q(b,p,s.distFunc),v.add({id:b.id,value:g[b.id]})}var w,G=s.maximumLoops,z=1/0,U={};for(p.forEach(function(e){U["".concat(e.x,"|||").concat(e.y)]=!0}),Object.keys(d).forEach(function(e){e=d[e].id;g[e]<=z&&(z=g[e],w=d[e])});0<Object.keys(d).length&&0<G;){var _=v.minId((G+1)%30==0);if(!_)break;if(w=d[_],U["".concat(w.x,"|||").concat(w.y)]){_=w;var x=F;var S=c;var O=t;var V=e;var W=f;var P=u;var E=[O],k=O,M=_.id,j=_.x,C=_.y,_={x:j,y:C,id:M};Z(_,W,x,S)&&(k={x:W.x===O.x?O.x:_.x*P,y:W.y===O.y?O.y:_.y*P},E.unshift(k));for(var T=x[M];T&&T.id!==M;){var Y={x:j,y:C,id:M},A={x:T.x,y:T.y,id:T.id};Z(A,Y,x,S)&&(k={x:A.x===Y.x?k.x:A.x*P,y:A.y===Y.y?k.y:A.y*P},E.unshift(k)),j=A.x,C=A.y,T=x[M=A.id]}return E[0].x=(j===S.x?V:k).x,E[0].y=(C===S.y?V:k).y,E.unshift(V),E;return}for(delete d[w.id],v.remove(w.id),B[w.id]=!0,m=0;m<s.directions.length;m++){var I,H,R=s.directions[m],L="".concat(Math.round(w.x)+R.stepX,"|||").concat(Math.round(w.y)+R.stepY),R={x:w.x+R.stepX,y:w.y+R.stepY,id:L};B[L]||(I=Z(w,R,F,c))>s.maxAllowedDirectionChange||l[L]||(d[L]||(d[L]=R),I=D[I],I=s.distFunc(w,R)+(isNaN(I)?u:I),I=y[w.id]+I,(H=y[L])&&H<=I)||(F[L]=w,g[L]=(y[L]=I)+q(R,p,s.distFunc),v.add({id:L,value:g[L]}))}--G}return s.fallbackRoute(e,t,n,r,s)}},27509:function(e,t,n){"use strict";n(48476),n(61885)},68891:function(e,t,n){"use strict";var l=n(97582),r=n(48122),u=n(31834);(0,r.registerNode)("circle",{options:{size:r.BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize,fontFamily:r.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,l.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(e),n=(0,u.deepMix)({},n,e.icon),o="".concat(this.type,"-keyShape"),r=t.addShape("circle",{attrs:r,className:o,name:o,draggable:!0}),o=(t.shapeMap[o]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(a="".concat(this.type,"-icon"),t.shapeMap[a]=s?t.addShape("text",{attrs:(0,l.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:a,name:a,draggable:!0}):t.addShape("image",{attrs:(0,l.__assign)({x:-o/2,y:-i/2},n),className:a,name:a,draggable:!0})),this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n,r,o,i,a,s,u=(this.mergeStyle||this.getOptions(e)).linkPoints;u&&(n=(u=u||{}).top,s=u.left,a=u.right,r=u.bottom,o=u.size,i=u.r,u=(0,l.__rest)(u,["top","left","right","bottom","size","r"]),e=this.getSize(e)[0]/2,s&&(t.shapeMap[s="link-point-left"]=t.addShape("circle",{attrs:(0,l.__assign)((0,l.__assign)({},u),{x:-e,y:0,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0})),a&&(t.shapeMap[s="link-point-right"]=t.addShape("circle",{attrs:(0,l.__assign)((0,l.__assign)({},u),{x:e,y:0,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0})),n&&(t.shapeMap[a="link-point-top"]=t.addShape("circle",{attrs:(0,l.__assign)((0,l.__assign)({},u),{x:0,y:-e,r:o/2||i||5}),className:a,name:a,isAnchorPoint:!0})),r)&&(t.shapeMap[s="link-point-bottom"]=t.addShape("circle",{attrs:(0,l.__assign)((0,l.__assign)({},u),{x:0,y:e,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,u.deepMix)({},t,n),n=this.getSize(e)[0]/2;return(0,l.__assign)({x:0,y:0,r:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getSize(e),i=(0,l.__assign)({},e.style);void 0===e.style.stroke&&e.color&&(i.stroke=e.color),void 0!==e.style.r||isNaN(o[0])||(i.r=o[0]/2),this.updateShape(e,t,i,!0,n),this.updateLinkPoints(e,r)}},"single-node")},1359:function(e,t,n){"use strict";var c=n(97582),r=n(48122),s=n(31834);(0,r.registerNode)("diamond",{options:{size:[80,80],style:{stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize,fontFamily:r.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,c.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(e),r=t.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),o=(t.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(t.shapeMap["".concat(this.type,"-icon")]=s?t.addShape("text",{attrs:(0,c.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,c.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,u=n.r,n=(0,c.__rest)(n,["top","left","right","bottom","size","r"]),e=this.getSize(e),l=e[0],e=e[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:-l/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:l/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:-e/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:e/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var e=this.getSize(e),t=e[0],e=e[1];return[["M",0,-e/2],["L",t/2,0],["L",0,e/2],["L",-t/2,0],["Z"]]},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,s.mix)({},t,n),n=this.getPath(e);return(0,c.__assign)({path:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getOptions({}).style,i=this.getPath(e),i={stroke:e.color,path:i},a=t.get("keyShape"),o=(0,s.mix)({},o,a.attr(),i),o=(0,s.mix)(o,e.style);this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,r)}},"single-node")},41775:function(e,t,n){"use strict";var u=n(97582),r=n(48122),l=n(31834),h=r.Util.defaultSubjectColors,c=((0,r.registerNode)("donut",{options:{size:r.BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize,fontFamily:r.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,u.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(e),n=(0,l.deepMix)({},n,e.icon),r=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")}),o=(t.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(t.shapeMap["".concat(this.type,"-icon")]=s?t.addShape("text",{attrs:(0,u.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,u.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),c(e,t,r),this.drawLinkPoints(e,t),r},updateShape:function(e,t,n,r,o){var i=t.get("keyShape");i.attr((0,u.__assign)({},n)),a(e,t,i),this.updateLabel(e,t,o),r&&this.updateIcon(e,t)}},"circle"),function(e,t,n){var r=e.donutAttrs,r=void 0===r?{}:r,e=e.donutColorMap,e=void 0===e?{}:e,o=Object.keys(r).length;if(r&&1<o){var r=g(r,e),i=r.configs,a=r.totalValue;if(a){var e=v(n),s=e.lineWidth,u=e.arcR,l=[u,0],c=0;if(1===o)y(t,{arcR:u,arcBegin:l,beginAngle:c,config:i[0],fanIndex:0,lineWidth:s,totalValue:a,drawWhole:!0});else for(var f=0;f<i.length;f++){var h=y(t,{arcR:u,arcBegin:l,beginAngle:c,config:i[f],fanIndex:f,lineWidth:s,totalValue:a});if(h.shouldEnd)return;l=h.arcBegin,c=h.beginAngle}}}}),y=function(e,t){var n,r,o=t.arcR,i=t.arcBegin,a=t.beginAngle,s=t.config,u=t.fanIndex,l=t.lineWidth,c=t.totalValue,f=t.drawWhole,f=void 0!==f&&f,t=t.updateShape,t=void 0===t?void 0:t,c=s.value/c;if(c<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};a=f||.999<c?(r=[o,1e-4],1):(n=a+(a=c*Math.PI*2),r=[o*Math.cos(n),-o*Math.sin(n)],a>Math.PI?1:0);i={path:[["M",i[0],i[1]],["A",o,o,0,a,0,r[0],r[1]]],stroke:s.color||(null==t?void 0:t.attr("stroke"))||h[u%h.length],lineWidth:l};return t?t.attr(i):e.shapeMap["".concat("fan-shape-").concat(u)]=e.addShape("path",{attrs:i,name:"".concat("fan-shape-").concat(u),draggable:!0}),{beginAngle:n,arcBegin:r,shape:e.shapeMap["".concat("fan-shape-").concat(u)],shouldEnd:f||.999<c}},a=function(e,t,n){var r=e.donutAttrs,e=e.donutColorMap,e=void 0===e?{}:e,o={},i=t.getContainer();if(r){var t=g(r,e),a=t.configs,s=t.totalValue;if(s)for(var r=v(n),u=r.lineWidth,l=r.arcR,c=[l,0],f=0,h=0;h<a.length;h++){var p="".concat("fan-shape-").concat(h),d=y(i,{arcR:l,arcBegin:c,beginAngle:f,config:a[h],fanIndex:h,lineWidth:u,totalValue:s,drawWhole:1===a.length,updateShape:i.shapeMap[p]});if(d.shape&&(o[p]=!0),d.shouldEnd)break;c=d.arcBegin,f=d.beginAngle}}Object.keys(i.shapeMap).filter(function(e){return e.includes("fan-shape-")}).forEach(function(e){o[e]||(i.shapeMap[e].remove(!0),delete i.shapeMap[e])})},g=function(n,r){var o=0,i=[];return Object.keys(n).forEach(function(e){var t=+n[e];isNaN(t)||(i.push({key:e,value:t,color:r[e]}),o+=t)}),{totalValue:o,configs:i}},v=function(e){var e=e.attr("r"),t=.6*e;return{lineWidth:e-t,arcR:(e+t)/2}}},27983:function(e,t,n){"use strict";var c=n(97582),r=n(48122),s=n(31834);(0,r.registerNode)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize,fontFamily:r.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,c.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(e),r=t.addShape("ellipse",{attrs:r,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),o=(t.shapeMap["ellipse-keyShape"]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(t.shapeMap["".concat(this.type,"-icon")]=s?t.addShape("text",{attrs:(0,c.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,c.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,u=n.r,n=(0,c.__rest)(n,["top","left","right","bottom","size","r"]),e=this.getSize(e),l=e[0]/2,e=e[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:-l,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:l,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:-e,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:e,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,s.mix)({},t,n),n=this.getSize(e),e=n[0]/2,n=n[1]/2;return(0,c.__assign)({x:0,y:0,rx:e,ry:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getOptions({}).style,i=this.getSize(e),i={stroke:e.color,rx:i[0]/2,ry:i[1]/2},a=t.get("keyShape"),o=(0,s.mix)({},o,a.attr(),i),o=(0,s.mix)(o,e.style);this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,r)}},"single-node")},48476:function(e,t,n){"use strict";n(68891),n(57676),n(27983),n(1359),n(99764),n(16125),n(13556),n(41775)},16125:function(e,t,n){"use strict";var v=n(97582),m=n(31834),n=n(48122);(0,n.registerNode)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:n.BaseGlobal.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:n.BaseGlobal.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:n.BaseGlobal.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,n=void 0===n?{}:n,r=this.getShapeStyle(e),o=this.getSize(e),i=o[0],o=o[1],r=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),a=(t.shapeMap["".concat(this.type,"-keyShape")]=r,n.show),n=(0,v.__rest)(n,["show"]);return a&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,v.__assign)({x:-i/2,y:-o/2,height:o},n),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),r},drawLogoIcon:function(e,t){var n,r,o,i,a,s,u=(this.mergeStyle||this.getOptions(e)).logoIcon,u=void 0===u?{}:u,e=this.getSize(e)[0];u.show&&(n=u.width,r=u.height,o=u.x,i=u.y,a=u.offset,s=u.text,u=(0,v.__rest)(u,["width","height","x","y","offset","text"]),t.shapeMap["rect-logo-icon"]=s?t.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},u),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:(0,v.__assign)((0,v.__assign)({},u),{x:o||-e/2+n+a,y:i||-r/2,width:n,height:r}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}))},drawStateIcon:function(e,t){var n,r,o,i,a,s,u=(this.mergeStyle||this.getOptions(e)).stateIcon,u=void 0===u?{}:u,e=this.getSize(e)[0];u.show&&(n=u.width,r=u.height,o=u.x,i=u.y,a=u.offset,s=u.text,u=(0,v.__rest)(u,["width","height","x","y","offset","text"]),t.shapeMap["rect-state-icon"]=s?t.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},u),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:(0,v.__assign)((0,v.__assign)({},u),{x:o||e/2-n+a,y:i||-r/2,width:n,height:r}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}))},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,u=n.r,n=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),e=this.getSize(e),l=e[0],e=e[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},n),{x:-l/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},n),{x:l/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},n),{x:0,y:-e/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},n),{x:0,y:e/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),r=n.labelCfg,r=void 0===r?{}:r,o=n.logoIcon,o=void 0===o?{}:o,n=n.descriptionCfg,n=void 0===n?{}:n,i=this.getSize(e)[0],a=null,s=o.show,o=o.width,u=-i/2+r.offset,s=(s&&(u=-i/2+o+r.offset),r.style),i=n.style,o=n.paddingTop;return(0,m.isString)(e.description)?(a=t.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},s),{x:u,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=a,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},i),{x:u,y:17+(o||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(a=t.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},s),{x:u,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=a),a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,m.mix)({},t,n),n=this.getSize(e),e=t.width||n[0],n=t.height||n[1];return(0,v.__assign)({x:-e/2,y:-n/2,width:e,height:n},t)},update:function(e,t){var n,r,o,i,a,s=this.mergeStyle||this.getOptions(e),u=s.style,u=void 0===u?{}:u,l=s.labelCfg,l=void 0===l?{}:l,s=s.descriptionCfg,s=void 0===s?{}:s,c=this.getSize(e),f=c[0],c=c[1],u=(t.get("keyShape").attr((0,v.__assign)((0,v.__assign)({},u),{x:-f/2,y:-c/2,width:f,height:c})),t.getContainer()),t=u.shapeMap["rect-logo-icon"]||u.find(function(e){return"rect-logo-icon"===e.get("className")}),h=t?t.attr():{},h=(0,m.mix)({},h,e.logoIcon),p=h.width,d=(void 0===p&&(p=this.options.logoIcon.width),e.logoIcon?e.logoIcon.show:void 0),y=l.offset,p=-f/2+p+y,y=(d||void 0===d||(p=-f/2+y),u.shapeMap["node-label"]||u.find(function(e){return"node-label"===e.get("className")})),g=u.shapeMap["rect-description"]||u.find(function(e){return"rect-description"===e.get("className")}),l=(e.label&&(y?(a=e.labelCfg?e.labelCfg.style:{},i=(0,m.mix)({},y.attr(),a),e.label&&(i.text=e.label),i.x=p,(0,m.isString)(e.description)&&(i.y=-5),g&&(g.resetMatrix(),g.attr({x:p})),y.resetMatrix(),y.attr(i)):u.shapeMap["node-label"]=u.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},l.style),{x:p,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0})),(0,m.isString)(e.description)&&(y=s.paddingTop,g?(a=e.descriptionCfg?e.descriptionCfg.style:{},i=(0,m.mix)({},g.attr(),a),(0,m.isString)(e.description)&&(i.text=e.description),i.x=p,g.resetMatrix(),g.attr((0,v.__assign)((0,v.__assign)({},i),{y:17+(y||0)}))):u.shapeMap["rect-description"]=u.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},s.style),{x:p,y:17+(y||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})),u.shapeMap["pre-rect"]||u.find(function(e){return"pre-rect"===e.get("className")})),p=(l&&!l.destroyed&&(a=(0,m.mix)({},l.attr(),e.preRect),l.attr((0,v.__assign)((0,v.__assign)({},a),{x:-f/2,y:-c/2,height:c}))),t&&!t.destroyed?d||void 0===d?(g=h.width,n=h.height,r=h.x,o=h.y,i=h.offset,s=(0,v.__rest)(h,["width","height","x","y","offset"]),t.attr((0,v.__assign)((0,v.__assign)({},s),{x:r||-f/2+g+i,y:o||-n/2,width:g,height:n}))):(t.remove(),delete u.shapeMap["pre-rect"]):d&&this.drawLogoIcon(e,u),u.shapeMap["rect-state-icon"]||u.find(function(e){return"rect-state-icon"===e.get("className")})),y=p?p.attr():{},l=(0,m.mix)({},y,e.stateIcon);p?(l.show||void 0===l.show||(p.remove(),delete u.shapeMap["rect-state-icon"]),a=l.width,n=l.height,r=l.x,o=l.y,c=l.offset,h=(0,v.__rest)(l,["width","height","x","y","offset"]),p.attr((0,v.__assign)((0,v.__assign)({},h),{x:r||f/2-a+c,y:o||-n/2,width:a,height:n}))):l.show&&this.drawStateIcon(e,u),this.updateLinkPoints(e,u)},getOptions:function(e,t){return"move"===t?e:(0,m.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node")},57676:function(e,t,n){"use strict";var c=n(97582),s=n(31834),n=n(48122);(0,n.registerNode)("rect",{options:{size:[100,30],style:{radius:0,stroke:n.BaseGlobal.defaultNode.style.stroke,fill:n.BaseGlobal.defaultNode.style.fill,lineWidth:n.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:n.BaseGlobal.nodeLabel.style.fill,fontSize:n.BaseGlobal.nodeLabel.style.fontSize,fontFamily:n.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:n.BaseGlobal.defaultNode.linkPoints.size,lineWidth:n.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:n.BaseGlobal.defaultNode.linkPoints.fill,stroke:n.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,c.__assign)({},n.BaseGlobal.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),n=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,u=n.r,n=(0,c.__rest)(n,["top","left","right","bottom","size","r"]),e=this.getSize(e),l=e[0],e=e[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:-l/2,y:0,r:s/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:l/2,y:0,r:s/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:-e/2,r:s/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,c.__assign)((0,c.__assign)({},n),{x:0,y:e/2,r:s/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,s.mix)({},t,n),n=this.getSize(e),e=t.width||n[0],n=t.height||n[1];return(0,c.__assign)({x:-e/2,y:-n/2,width:e,height:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getOptions({}).style,i=this.getSize(e),a=t.get("keyShape"),i=(e.size||(i[0]=a.attr("width")||o.width,i[1]=a.attr("height")||o.height),{stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]}),o=(0,s.mix)({},o,a.attr(),i),o=(0,s.mix)(o,e.style);this.updateShape(e,t,o,!1,n),this.updateLinkPoints(e,r)}},"single-node")},13556:function(e,t,n){"use strict";var g=n(97582),r=n(48122),v=n(31834);(0,r.registerNode)("star",{options:{size:60,style:{stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize,fontFamily:r.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(e),r=t.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),o=(t.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(t.shapeMap["".concat(this.type,"-icon")]=s?t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,g.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n,r,o=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===o?{}:o,i=o.top,a=o.left,s=o.right,u=o.leftBottom,l=o.rightBottom,c=o.size,f=o.r,o=(0,g.__rest)(o,["top","left","right","leftBottom","rightBottom","size","r"]),e=this.getSize(e)[0];s&&(n=Math.cos(.1*Math.PI)*e,r=Math.sin(.1*Math.PI)*e,t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},o),{x:n,y:-r,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})),i&&(n=Math.cos(.5*Math.PI)*e,r=Math.sin(.5*Math.PI)*e,t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},o),{x:n,y:-r,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})),a&&(n=Math.cos(.9*Math.PI)*e,r=Math.sin(.9*Math.PI)*e,t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},o),{x:n,y:-r,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})),u&&(n=Math.cos(1.3*Math.PI)*e,r=Math.sin(1.3*Math.PI)*e,t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},o),{x:n,y:-r,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),l&&(n=Math.cos(1.7*Math.PI)*e,r=Math.sin(1.7*Math.PI)*e,t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},o),{x:n,y:-r,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(e){var t=this.getSize(e)[0],e=e.innerR||3*t/8;return r.Util.getStarPath(t,e)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,v.mix)({},t,n),n=this.getPath(e);return(0,g.__assign)({path:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getOptions({}).style,i=this.getPath(e),i={stroke:e.color,path:i},a=t.get("keyShape"),o=(0,v.mix)({},o,a.attr(),i),o=(0,v.mix)(o,e.style);this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,r=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),o=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),i=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),a=t.shapeMap["link-point-left-bottom"]||t.find(function(e){return"link-point-left-bottom"===e.get("className")}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(e){return"link-point-right-bottom"===e.get("className")}),u=r||o||i||a||s,u=(u&&(n=u.attr()),(0,v.mix)({},n,e.linkPoints)),n=u.fill,l=u.stroke,c=u.lineWidth,f=(f=u.size/2)||u.r,u=e.linkPoints||{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},h=u.left,p=u.right,d=u.top,y=u.leftBottom,u=u.rightBottom,e=this.getSize(e)[0],f={r:f,fill:n,stroke:l,lineWidth:c},n=Math.cos(.1*Math.PI)*e,l=Math.sin(.1*Math.PI)*e;o?p||void 0===p?o.attr((0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l})):(o.remove(),delete t.shapeMap["link-point-right"]):p&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),n=Math.cos(.5*Math.PI)*e,l=Math.sin(.5*Math.PI)*e,i?d||void 0===d?i.attr((0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l})):(i.remove(),delete t.shapeMap["link-point-top"]):d&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),n=Math.cos(.9*Math.PI)*e,l=Math.sin(.9*Math.PI)*e,r?h||void 0===h?r.attr((0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l})):(r.remove(),delete t.shapeMap["link-point-left"]):h&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),n=Math.cos(1.3*Math.PI)*e,l=Math.sin(1.3*Math.PI)*e,a?y||void 0===y?a.attr((0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l})):(a.remove(),delete t.shapeMap["link-point-left-bottom"]):y&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),n=Math.cos(1.7*Math.PI)*e,l=Math.sin(1.7*Math.PI)*e,s?u||void 0===u?s.attr((0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l})):(s.remove(),delete t.shapeMap["link-point-right-bottom"]):u&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},f),{x:n,y:-l}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node")},99764:function(e,t,n){"use strict";var y=n(97582),r=n(48122),g=n(31834);(0,r.registerNode)("triangle",{options:{size:40,direction:"up",style:{stroke:r.BaseGlobal.defaultNode.style.stroke,fill:r.BaseGlobal.defaultNode.style.fill,lineWidth:r.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:r.BaseGlobal.nodeLabel.style.fill,fontSize:r.BaseGlobal.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:r.BaseGlobal.defaultNode.linkPoints.size,lineWidth:r.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:r.BaseGlobal.defaultNode.linkPoints.fill,stroke:r.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},r.BaseGlobal.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),r=n.icon,r=void 0===r?{}:r,n=n.direction,o=this.getShapeStyle(e),n=e.direction||n,o=t.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),i=(t.shapeMap["".concat(this.type,"-keyShape")]=o,r.width),a=r.height,s=r.show,u=r.offset,l=r.text;return s&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):(s=-i/2,l=-a/2,"up"!==n&&"down"!==n||(l+=u),"left"!==n&&"right"!==n||(s+=u),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:s,y:l},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}))),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n,r,o=this.mergeStyle||this.getOptions(e),i=o.linkPoints,i=void 0===i?{}:i,o=o.direction,o=e.direction||o,a=i.top,s=i.left,u=i.right,l=i.bottom,c=i.size,f=i.r,i=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),e=this.getSize(e)[0];s&&(s=null,n=e*Math.sin(1/3*Math.PI),r=e*Math.sin(1/3*Math.PI),"up"===o?s=[-r,n]:"down"===o?s=[-r,-n]:"left"===o&&(s=[-r,r-n]),s)&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:s[0],y:s[1],r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})),u&&(s=null,n=e*Math.sin(1/3*Math.PI),r=e*Math.sin(1/3*Math.PI),"up"===o?s=[r,n]:"down"===o?s=[r,-n]:"right"===o&&(s=[r,r-n]),s)&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:s[0],y:s[1],r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})),a&&(u=null,n=e*Math.sin(1/3*Math.PI),r=e*Math.sin(1/3*Math.PI),"up"===o?u=[r-n,-n]:"left"===o?u=[r,-n]:"right"===o&&(u=[-r,-n]),u)&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:u[0],y:u[1],r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})),l&&(s=null,n=e*Math.sin(1/3*Math.PI),r=e*Math.sin(1/3*Math.PI),"down"===o?s=[-r+n,n]:"left"===o?s=[r,n]:"right"===o&&(s=[-r,n]),s)&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:s[0],y:s[1],r:c/2||f||5}),className:"link-point-bottom",name:"link-point-bottom"}))},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,t=e.direction||t,e=this.getSize(e)[0],n=e*Math.sin(1/3*Math.PI),e=e*Math.sin(1/3*Math.PI),r=[["M",-e,n],["L",0,-n],["L",e,n],["Z"]];return"down"===t?r=[["M",-e,-n],["L",e,-n],["L",0,n],["Z"]]:"left"===t?r=[["M",-e,e-n],["L",e,-e],["L",e,e],["Z"]]:"right"===t&&(r=[["M",e,e-n],["L",-e,e],["L",-e,-e],["Z"]]),r},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},t=(0,g.mix)({},t,n),n=this.getPath(e);return(0,y.__assign)({path:n},t)},update:function(e,t,n){var r=t.getContainer(),o=this.getOptions({}).style,i=this.getPath(e),i={stroke:e.color,path:i},a=t.get("keyShape"),o=(0,g.mix)({},o,a.attr(),i),o=(0,g.mix)(o,e.style);this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var n=this.getOptions({}),r=n.linkPoints,n=n.direction,n=e.direction||n,o=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),i=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),a=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),s=t.shapeMap["link-point-bottom"]||t.find(function(e){return"link-point-bottom"===e.get("className")}),u=o||i||a||s,u=(u&&(r=u.attr()),(0,g.mix)({},r,e.linkPoints)),r=u.fill,l=u.stroke,c=u.lineWidth,f=(f=u.size/2)||u.r,u=e.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},h=u.left,p=u.right,d=u.top,u=u.bottom,e=this.getSize(e)[0],f={r:f,fill:r,stroke:l,lineWidth:c},r=null,l=e*Math.sin(1/3*Math.PI),c=e*Math.sin(1/3*Math.PI),e=("up"===n?r=[-c,l]:"down"===n?r=[-c,-l]:"left"===n&&(r=[-c,c-l]),r&&(o?h||void 0===h?o.attr((0,y.__assign)((0,y.__assign)({},f),{x:r[0],y:r[1]})):(o.remove(),delete t.shapeMap["link-point-left"]):h&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:r[0],y:r[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}))),null),o=("up"===n?e=[c,l]:"down"===n?e=[c,-l]:"right"===n&&(e=[c,c-l]),e&&(i?p||void 0===p?i.attr((0,y.__assign)((0,y.__assign)({},f),{x:e[0],y:e[1]})):(i.remove(),delete t.shapeMap["link-point-right"]):p&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:e[0],y:e[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}))),null),h=("up"===n?o=[c-l,-l]:"left"===n?o=[c,-l]:"right"===n&&(o=[-c,-l]),o&&(a?d||void 0===d?a.attr((0,y.__assign)((0,y.__assign)({},f),{x:o[0],y:o[1]})):(a.remove(),delete t.shapeMap["link-point-top"]):d&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:o[0],y:o[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}))),null);"down"===n?h=[l-c,l]:"left"===n?h=[c,l]:"right"===n&&(h=[-c,l]),h&&(s?u||void 0===u?s.attr((0,y.__assign)((0,y.__assign)({},f),{x:h[0],y:h[1]})):(s.remove(),delete t.shapeMap["link-point-bottom"]):u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:h[0],y:h[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node")},61125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n=n(31834),n={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,n.throttle)(function(e,t){var n=e.item,r=t.graph;if(r&&!r.destroyed&&(t.item=n,t.shouldUpdate(e.item,{event:e,action:"activate"},t))){for(var o=t.activeState,i=t.inactiveState,a=r.getNodes(),s=r.getCombos(),u=r.getEdges(),l=r.get("vedges"),c=a.length,f=s.length,h=u.length,p=l.length,d=t.inactiveItems||{},y=t.activeItems||{},g=0;g<c;g++){var v=a[g],m=v.getID(),b=v.hasState("selected");t.resetSelected&&b&&r.setItemState(v,"selected",!1),y[m]&&(r.setItemState(v,o,!1),delete y[m]),i&&!d[m]&&(r.setItemState(v,i,!0),d[m]=v)}for(g=0;g<f;g++){var w=s[g],_=w.getID(),b=w.hasState("selected");t.resetSelected&&b&&r.setItemState(w,"selected",!1),y[_]&&(r.setItemState(w,o,!1),delete y[_]),i&&!d[_]&&(r.setItemState(w,i,!0),d[_]=w)}for(g=0;g<h;g++)y[k=(E=u[g]).getID()]&&(r.setItemState(E,o,!1),delete y[k]),i&&!d[k]&&(r.setItemState(E,i,!0),d[k]=E);for(g=0;g<p;g++){var x=l[g],S=x.getID();y[S]&&(r.setItemState(x,o,!1),delete y[S]),i&&!d[S]&&(r.setItemState(x,i,!0),d[S]=x)}if(n&&!n.destroyed){i&&(r.setItemState(n,i,!1),delete d[n.getID()]),y[n.getID()]||(r.setItemState(n,o,!0),y[n.getID()]=n);for(var O=n.getEdges(),P=O.length,g=0;g<P;g++){var E,k=(E=O[g]).getID(),M=void 0,j=(M=E.getSource()===n?E.getTarget():E.getSource()).getID();i&&d[j]&&(r.setItemState(M,i,!1),delete d[j]),y[j]||(r.setItemState(M,o,!0),y[j]=M),d[k]&&(r.setItemState(E,i,!1),delete d[k]),y[k]||(r.setItemState(E,o,!0),y[k]=E),E.toFront()}}t.activeItems=y,t.inactiveItems=d,r.emit("afteractivaterelations",{item:e.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,n.throttle)(function(e,t){var n,r,o,i,a=t.get("graph");a&&!a.destroyed&&t.shouldUpdate(e.item,{event:e,action:"deactivate"},t)&&(n=t.activeState,r=t.inactiveState,o=t.activeItems||{},i=t.inactiveItems||{},Object.values(o).filter(function(e){return!e.destroyed}).forEach(function(e){a.clearItemStates(e,n)}),Object.values(i).filter(function(e){return!e.destroyed}).forEach(function(e){a.clearItemStates(e,r)}),t.activeItems={},t.inactiveItems={},a.emit("afteractivaterelations",{item:e.item||t.get("item"),action:"deactivate"}))},50,{trailing:!0,leading:!0})};t.default=n},46625:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=Math.min,g=Math.max,n=Math.abs,r=["drag","shift","ctrl","alt","control"];t.default={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return-1<r.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush;t||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n=n||this.createBrush(),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(e)},onMouseUp:function(e){this.graph,!this.brush&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var t=this.graph,n=this.selectedState,e=t.findAllByState("node",n),r=t.findAllByState("edge",n),o=t.findAllByState("combo",n);e.forEach(function(e){return t.setItemState(e,n,!1)}),r.forEach(function(e){return t.setItemState(e,n,!1)}),o.forEach(function(e){return t.setItemState(e,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,r,o){e=e.getBBox();return e.centerX>=t&&e.centerX<=n&&e.centerY>=r&&e.centerY<=o},getSelectedNodes:function(e){var r=this,o=this.graph,t=this.originPoint,i=this.shouldUpdate,n=this.isBBoxCenterInRect,a=this.selectedState,e={x:e.x,y:e.y},t=o.getPointByCanvas(t.x,t.y),s=y(e.x,t.x),u=g(e.x,t.x),l=y(e.y,t.y),c=g(e.y,t.y),f=[],h=[],p=(o.getNodes().forEach(function(e){var t;e.isVisible()&&n(e,s,u,l,c)&&i(e,"select",r)&&(f.push(e),t=e.getModel(),h.push(t.id),o.setItemState(e,a,!0))}),[]),d=(this.includeEdges&&f.forEach(function(e){e.getOutEdges().forEach(function(e){var t,n;e.isVisible()&&(t=(n=e.getModel()).source,n=n.target,h.includes(t))&&h.includes(n)&&i(e,"select",r)&&(p.push(e),o.setItemState(e,r.selectedState,!0))})}),[]);this.includeCombos&&o.getCombos().forEach(function(e){var t;e.isVisible()&&n(e,s,u,l,c)&&i(e,"select",r)&&(d.push(e),t=e.getModel(),h.push(t.id),o.setItemState(e,a,!0))}),this.selectedEdges=p,this.selectedNodes=f,this.selectedCombos=d,this.onSelect&&this.onSelect(f,p,d),o.emit("nodeselectchange",{selectedItems:{nodes:f,edges:p,combos:d},select:!0})},createBrush:function(){var e=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:n(e.canvasX-t.x),height:n(e.canvasY-t.y),x:y(e.canvasX,t.x),y:y(e.canvasY,t.y)})},onKeyDown:function(e){var t,e=e.key;e&&(t=this.trigger.toLowerCase(),e=e.toLowerCase(),this.keydown=e===t||"control"===e&&"ctrl"===t||"ctrl"===e&&"control"===t)},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}}},14789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=n(31834),r=["shift","ctrl","alt","control"];t.default={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){return-1<r.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior click-select  trigger  'drag''shift''ctrl'  'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t,n,r,o,i,a,s,u,l=this,c=e.item;c&&!c.destroyed&&(t=c.getType(),n=l.graph,i=l.keydown,r=l.multiple,o=l.shouldUpdate,(0,l.shouldBegin)(e,l))&&(i&&r||(i=n.findAllByState("node",l.selectedState).concat(n.findAllByState("edge",l.selectedState)).concat(n.findAllByState("combo",l.selectedState)),(0,f.each)(i,function(e){e!==c&&n.setItemState(e,l.selectedState,!1)})),!function(){switch(t){case"node":return l.selectNode;case"edge":return l.selectEdge;case"combo":return l.selectCombo;default:return}}()?(a=n.findAllByState("node",l.selectedState),s=n.findAllByState("edge",l.selectedState),u=n.findAllByState("combo",l.selectedState),n.emit("nodeselectchange",{selectedItems:{nodes:a,edges:s,combos:u},select:!1})):c.hasState(l.selectedState)?(o(e,l)&&n.setItemState(c,l.selectedState,!1),a=n.findAllByState("node",l.selectedState),s=n.findAllByState("edge",l.selectedState),u=n.findAllByState("combo",l.selectedState),n.emit("nodeselectchange",{target:c,selectedItems:{nodes:a,edges:s,combos:u},select:!1})):(o(e,l)&&n.setItemState(c,l.selectedState,!0),a=n.findAllByState("node",l.selectedState),s=n.findAllByState("edge",l.selectedState),u=n.findAllByState("combo",l.selectedState),n.emit("nodeselectchange",{target:c,selectedItems:{nodes:a,edges:s,combos:u},select:!0})))},onCanvasClick:function(e){var t=this,n=this.graph;(0,this.shouldBegin)(e,this)&&(e=n.findAllByState("node",this.selectedState),(0,f.each)(e,function(e){n.setItemState(e,t.selectedState,!1)}),e=n.findAllByState("edge",this.selectedState),(0,f.each)(e,function(e){n.setItemState(e,t.selectedState,!1)}),e=n.findAllByState("combo",this.selectedState),(0,f.each)(e,function(e){n.setItemState(e,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1}))},onKeyDown:function(e){e=e.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}}},96852:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=["click","dblclick"];t.default={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var e,t;return n.includes(this.trigger)?t=this.trigger:(t="dblclick",console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(e={})["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var e=e.item,t=this.graph,n=this.relayout;e&&!e.destroyed&&"combo"===e.getType()&&(e=e.getModel().id)&&(t.collapseExpandCombo(e),n&&t.get("layout")?t.layout():t.refreshPositions())}}},82426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=["click","dblclick"];t.default={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var e,t;return n.includes(this.trigger)?t=this.trigger:(t="click",console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(e={})["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;"click"===this.trigger?this.timer?(clearTimeout(this.timer),this.timer=0):this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200):this.toggle(e)},toggle:function(e){var t,n,r=e.item;r&&(t=this.graph.findDataById(r.get("id")))&&(n=t.children)&&0!==n.length&&(n=!t.collapsed,this.shouldBegin(e,n,this))&&(t.collapsed=n,r.getModel().collapsed=n,this.graph.emit("itemcollapsed",{item:e.item,collapsed:n}),this.shouldUpdate(e,n,this))&&(this.onChange(r,n,this),this.graph.layout())}}},15120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(97582),u=n(31834),r=["click","drag"],o=["shift","ctrl","control","alt","meta",void 0];t.default={getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e;return-1<r.indexOf(this.trigger.toLowerCase())||(this.trigger="click",console.warn("Behavior create-edge  trigger  'click''drag'")),this.key&&-1===o.indexOf(this.key.toLowerCase())&&(this.trigger=void 0,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===this.trigger?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(e){var t;this.key&&!this.keydown||(t=e.item)&&t.getID()!==this.source&&"node"===t.getType()||this.cancelCreating({item:this.edge,x:e.x,y:e.y})},onClick:function(e){var t,n,r,o,i,a;this.key&&!this.keydown||(n=e.item,t=this.graph,n=n.getModel(),r=this.getEdgeConfig,this.addingEdge&&this.edge?this.shouldEnd(e,this)&&(o=void 0,o=r&&(0,u.isFunction)(r)?r({source:this.source,target:n.id},this):this.edgeConfig,i=(0,s.__assign)({target:n.id},o),this.source===n.id&&(i.type="loop"),t.emit("beforecreateedge",{}),t.updateItem(this.edge,i,!1),t.get("enabledStack")&&(i=(0,s.__assign)((0,s.__assign)({},this.edge.getModel()),{itemType:"edge"}),(a={}).edges=[i],t.pushStack("add",{before:{},after:a})),t.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1):this.shouldBegin(e,this)&&(o=void 0,o=r&&(0,u.isFunction)(r)?r({source:n.id,target:n.id},this):this.edgeConfig,this.edge=t.addItem("edge",(0,s.__assign)({source:n.id,target:n.id},o),!1),this.source=n.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)))},updateEndPoint:function(e){this.key&&!this.keydown||(this.edge&&this.edge.destroyed&&this.cancelCreating({item:this.edge}),e={x:e.x,y:e.y},this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:e},!1):this.addingEdge=!1)},cancelCreating:function(e){var t,n;if(!this.key||this.keydown)return t=this.graph,n=e.item,this.addingEdge&&(this.edge===n||null!=(e=null==(n=e.target)?void 0:n.isCanvas)&&e.call(n))?(this.edge&&!this.edge.destroyed&&t.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1)):void 0},onKeyDown:function(e){e=e.key;e&&(e.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}}},40566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(31834),n=(n=n(85698))&&n.__esModule?n:{default:n},y=n.default.cloneEvent,s=n.default.isNaN,r=Math.abs,o=["shift","ctrl","alt","control"];t.default={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t,n,r,o,i=this.origin,a=+e.clientX,e=+e.clientY;s(a)||s(e)||(t=a-i.x,i=e-i.y,"x"===this.get("direction")?i=0:"y"===this.get("direction")&&(t=0),this.origin={x:a,y:e},a=this.graph.get("width"),e=this.graph.get("height"),n=this.graph.get("canvas").getCanvasBBox(),r=this.scalableRange,o=this.scalableRange,r<1&&-1<r&&(r*=a,o*=e),(n.minX<=a+r&&n.minX+t>a+r||0<=n.maxX+r&&n.maxX+r+t<0)&&(t=0),(n.minY<=e+o&&n.minY+i>e+o||0<=n.maxY+o&&n.maxY+o+i<0)&&(i=0),this.graph.translate(t,i))},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],t=t[1];n&&t||(e.preventDefault(),this.mousedown=!0,this.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t,n=e.originalEvent;if((!n||"touchstart"===e.name||0===n.button)&&("touchstart"===e.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(e,this)&&!this.keydown&&this.allowDrag(e)){if(this.origin={x:e.clientX,y:e.clientY},this.dragging=!1,this.enableOptimize){for(var n=this.graph,r=n.getEdges(),o=0,i=r.length;o<i;o++){var a=r[o].get("group").get("children");a&&a.forEach(function(e){e.set("ori-visibility",e.get("ori-visibility")||e.get("visible")),e.hide()})}for(var s=n.getNodes(),u=0,l=s.length;u<l;u++)for(var c=0,f=s[u].getContainer().get("children");c<f.length;c++){var h=f[c];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}"undefined"!=typeof window&&((t=this).handleDOMContextMenu=function(e){return t.onMouseUp(e)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu))}},onTouchMove:function(e){var t=e.originalEvent.touches,n=t[0],t=t[1];n&&t?this.onMouseUp(e):(e.preventDefault(),this.onDrag(e))},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=y(e),this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(r(this.origin.x-e.clientX)+r(this.origin.y-e.clientY)<10)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){this.mousedown=!1,this.dragstart=!1;var t=this.graph;if(!this.keydown){var n=t.getZoom(),r=t.get("modeController"),r=null==(r=null==(r=null==r?void 0:r.modes[r.mode])?void 0:r.filter(function(e){return"zoom-canvas"===e.type}))?void 0:r[0],r=r?r.optimizeZoom||.1:0;if(this.enableOptimize){for(var o=t.getEdges(),i=0,a=o.length;i<a;i++){var s=o[i].get("group").get("children");s&&s.forEach(function(e){var t=e.get("ori-visibility");e.set("ori-visibility",void 0),t&&e.show()})}if(r<n)for(var u=t.getNodes(),l=0,c=u.length;l<c;l++)for(var f=0,h=u[l].getContainer().get("children");f<h.length;f++){var p,d=h[f];d.get("isKeyShape")||(p=d.get("ori-visibility"),d.set("ori-visibility",void 0),p&&d.show())}}this.dragging?(e=y(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,t.emit("canvas:dragend",e),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){e=e.key;e&&(-1<o.indexOf(e.toLowerCase())?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t=e.target,t=t&&t.isCanvas&&t.isCanvas();if((0,i.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!t)return!1;if((0,i.isObject)(this.allowDragOnItem)){var t=this.allowDragOnItem,n=t.node,r=t.edge,t=t.combo,o=null==(o=null==(e=e.item)?void 0:e.getType)?void 0:o.call(e);if(!n&&"node"===o)return!1;if(!r&&"edge"===o)return!1;if(!t&&"combo"===o)return!1}return!0}}},21987:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(97582),l=n(31834),r=o(n(85698)),c=o(n(31339));function o(e){return e&&e.__esModule?e:{default:e}}var f=r.default.calculationItemsBBox;t.default={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;return!(!t||t.destroyed||!this.shouldUpdate(e,this)||"combo"!==t.getType())},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t,r,n=this,o=this.graph,i=e.item;this.currentShouldEnd=!0,this.validationCombo(e)&&(this.targets=[],e=o.findAllByState("combo",this.selectedState),t=i.get("id"),0===e.filter(function(e){e=e.get("id");return t===e}).length?this.targets.push(i):this.targets=e,r=[],this.targets.forEach(function(e){var e=e.getModel(),t=e.x,n=e.y,e=e.id;r.push({x:t,y:n,id:e})}),this.set("beforeDragItems",r),this.activeState&&this.targets.map(function(e){var e=e.getModel();e.parentId&&(e=o.findById(e.parentId))&&o.setItemState(e,n.activeState,!0)}),this.point={},this.originPoint={},this.currentItemChildCombos=[],function t(e,n){!1!==n(e)&&e&&0!==(e=e.get("combos")).length&&(0,l.each)(e,function(e){t(e,n)})}(i,function(e){return!e.destroyed&&(e=e.getModel(),n.currentItemChildCombos.push(e.id),!0)}))},onDrag:function(t){var o,n,e,r,i,a,s,u=this;this.origin&&this.validationCombo(t)&&(this.enableDelegate?this.updateDelegate(t):(this.activeState&&(o=this.graph,r=t.item,n=r.getModel(),e=o.getCombos(),r=r.getBBox(),i=r.centerX,a=r.centerY,s=r.width,e.filter(function(e){e=e.getModel();return n.parentId,e.id!==n.id&&!u.currentItemChildCombos.includes(e.id)}).map(function(e){var t=e.getBBox(),n=t.centerX,r=t.centerY,t=t.width,n=i-n,r=a-r,n=2*Math.sqrt(n*n+r*r);.8*s<s+t-n?o.setItemState(e,u.activeState,!0):o.setItemState(e,u.activeState,!1)})),(0,l.each)(this.targets,function(e){u.updateCombo(e,t)}),this.onlyChangeComboSize&&this.updateParentCombos()))},updatePositions:function(t,n){var r=this;(this.enableDelegate||n)&&(0,l.each)(this.targets,function(e){r.updateCombo(e,t,n)})},onDrop:function(e){var t,n,r=this,o=e.item;this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&o&&this.targets&&!o.destroyed&&(t=this.graph,n=o.getModel(),this.targets.map(function(e){e.getModel().parentId!==n.id?(r.activeState&&t.setItemState(o,r.activeState,!1),r.onlyChangeComboSize?t.updateCombo(e):t.updateComboTree(e,n.id,!1)):t.updateCombo(o)}),this.end(o,e),this.endComparison=!0)},onNodeDrop:function(e){var t,n,r,o,i=this;this.targets&&0!==this.targets.length&&(t=this.graph,o=(n=e.item.getModel().comboId)?t.findById(n):void 0,this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd)&&(n?(this.activeState&&(o=t.findById(n),t.setItemState(o,this.activeState,!1)),this.targets.map(function(e){i.onlyChangeComboSize?t.updateCombo(e):n!==e.getID()&&(r=t.findById(n),n!==e.getModel().parentId)&&t.updateComboTree(e,n,!1)})):this.targets.map(function(e){i.onlyChangeComboSize?t.updateCombo(e):e.getModel().comboId&&t.updateComboTree(e,void 0,!1)}),this.endComparison=!0,this.end(r,e))},onDragEnter:function(e){var t;this.origin&&this.validationCombo(e)&&(e=e.item,t=this.graph,this.activeState)&&t.setItemState(e,this.activeState,!0)},onDragLeave:function(e){var t;this.origin&&this.validationCombo(e)&&(e=e.item,t=this.graph,this.activeState)&&t.setItemState(e,this.activeState,!1)},onDragEnd:function(e){var t,n;this.targets&&0!==this.targets.length&&(t=e.item,this.currentShouldEnd&&this.updatePositions(e),t=this.getParentCombo(t.getModel().parentId),n=this.graph,t&&this.activeState&&n.setItemState(t,this.activeState,!1),this.end(void 0,e))},end:function(e,t){var o,i,a,s=this;this.origin&&(o=this.graph,this.delegateShape&&(o.get("delegateGroup").clear(),this.delegateShape=null),e&&this.activeState&&o.setItemState(e,this.activeState,!1),e||(i=o.get("enabledStack")&&this.enableStack,a={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}},this.targets.map(function(e){var t,n,r;s.onlyChangeComboSize?(o.updateCombo(e),t=(r=e.getModel()).x,n=r.y,r=r.id,a.after.combos.push({x:t,y:n,id:r}),o.pushStack("update",a)):o.updateComboTree(e,void 0,i)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0)},traverse:function(e,t,n){var r,o=this;!1!==t(e,n=void 0===n?{}:n)&&e&&(r=e.get("combos"),(0,l.each)(r,function(e){o.traverse(e,t,n)}),r=e.get("nodes"),(0,l.each)(r,function(e){o.traverse(e,t,n)}))},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);t={};this.traverse(e,function(e,t){return!e.destroyed&&(e.getEdges().forEach(function(e){return t[e.getID()]=e}),!0)},t),Object.values(t).forEach(function(e){return e.refresh()})},updateSingleItem:function(e,t,n){var r=this.origin,o=this.graph,i=e.getModel(),a=e.get("id"),i=(this.point[a]||(this.point[a]={x:i.x,y:i.y}),t.x-r.x+this.point[a].x),a=t.y-r.y+this.point[a].y;n&&(i+=r.x-t.x,a+=r.y-t.y),o.updateItem(e,{x:i,y:a},!1)},getParentCombo:function(e){var t=this.graph;if(e){t=t.findById(e);if(t)return t}},updateDelegate:function(e){var t,n,r,o,i,a,s=this.graph;this.delegateShape?(t=e.x-this.origin.x+this.originPoint.minX,e=e.y-this.origin.y+this.originPoint.minY,this.delegateShape.attr({x:t,y:e})):(t=s.get("delegateGroup"),e=null,s=(e=1<this.targets.length?f(this.targets):this.targets[0].getBBox()).x,n=e.y,r=e.width,o=e.height,i=e.minX,a=e.minY,this.originPoint={x:s,y:n,width:r,height:o,minX:i,minY:a},s=(0,u.__assign)((0,u.__assign)({},c.default.delegateStyle),this.delegateStyle),this.delegateShape=t.addShape("rect",{attrs:(0,u.__assign)({width:e.width,height:e.height,x:e.x,y:e.y},s),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape)},updateParentCombos:function(){var t=this.graph,e=this.targets,n={};null!=e&&e.forEach(function(e){e=e.getModel().parentId;e&&(n[e]=t.findById(e))}),Object.values(n).forEach(function(e){e&&t.updateCombo(e)})}}},67712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(97582),l=n(31834),c=(n=n(31339))&&n.__esModule?n:{default:n},n={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&"combo"===e.getType()},onTouchStart:function(e){if(e.item){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,this.onDragStart(e)}},onTouchMove:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return void this.onDragEnd(e);e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},"undefined"==typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,n;"node"===(null==(n=null==(t=e.item)?void 0:t.getType)?void 0:n.call(t))?this.mousedown&&(this.dragstart?this.onDrag((0,u.__assign)((0,u.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e))):this.onDragEnd()},onDragStart:function(e){var t,n,r,o=this;this.currentShouldEnd=!0,this.shouldBegin((0,u.__assign)((0,u.__assign)({},e),this.mousedown),this)&&(t=(e=this.mousedown).item,e=e.target,!t||t.destroyed||t.hasLocked()||(t.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(t),e&&e.get("isAnchorPoint"))||(e=this.graph,this.targets=[],this.targetCombo=null,e=e.findAllByState("node",this.selectedState),n=t.get("id"),0!==e.filter(function(e){e=e.get("id");return n===e}).length&&1<e.length?e.forEach(function(e){e.hasLocked()||o.targets.push(e)}):this.targets.push(t),this.graph.get("enabledStack")&&this.enableStack&&(r=[],this.targets.forEach(function(e){var e=e.getModel(),t=e.x,n=e.y,e=e.id;r.push({x:t,y:n,id:e})}),this.set("beforeDragNodes",r)),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(e){e.getEdges().forEach(function(e){e.isVisible()&&(o.hidenEdge[e.getID()]=!0,e.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}))},onDrag:function(t){var n=this;this.mousedown&&this.origin&&this.shouldUpdate(t,this)&&(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):(this.targets.map(function(e){n.update(e,t);e=e.getModel().comboId;e&&(e,n.graph.findById(e))}),this.onlyChangeComboSize&&this.updateParentCombos()))},onDragEnd:function(e){var t,r,n=this;this.mousedown=!1,this.dragstart=!1,"undefined"!=typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin&&(null!=(t=this.cachedCaptureItems)&&t.forEach(function(e){e.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(e){e.getEdges().forEach(function(e){n.hidenEdge[e.getID()]&&e.show(),e.refresh()})}),this.hidenEdge={},(t=this.graph).get("enabledStack")&&this.enableStack&&(r={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}},this.get("beforeDragNodes").forEach(function(e){r.before.nodes.push(e)}),this.targets.forEach(function(e){var e=e.getModel(),t=e.x,n=e.y,e=e.id;r.after.nodes.push({x:t,y:n,id:e})}),t.pushStack("update",(0,l.clone)(r))),t.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null)},onDropCombo:function(e){var t,n,r=e.item;this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(r)&&(t=this.graph,this.comboActiveState&&t.setItemState(r,this.comboActiveState,!1),this.targetCombo=r,this.onlyChangeComboSize?t.updateCombos():(n=r.getModel(),this.targets.map(function(e){e.getModel().comboId!==n.id&&t.updateComboTree(e,n.id)}),t.updateCombo(r)),t.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo}))},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(e){e.getModel().comboId&&t.updateComboTree(e)}))},onDropNode:function(e){var t,n,r,o;this.targets&&0!==this.targets.length&&(t=e.item,n=this.graph,o=(r=t.getModel().comboId)?n.findById(r):void 0,this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():r?(o=n.findById(r),this.comboActiveState&&n.setItemState(o,this.comboActiveState,!1),this.targets.map(function(e){var t=e.getModel();r!==t.comboId&&n.updateComboTree(e,r)}),n.updateCombo(o)):this.targets.map(function(e){e.getModel().comboId&&n.updateComboTree(e)}),n.emit("dragnodeend",{items:this.targets,targetItem:t}))},onDragEnter:function(e){var t,e=e.item;this.validationCombo(e)&&(t=this.graph,this.comboActiveState)&&t.setItemState(e,this.comboActiveState,!0)},onDragLeave:function(e){var t,e=e.item;this.validationCombo(e)&&(t=this.graph,this.comboActiveState)&&t.setItemState(e,this.comboActiveState,!1)},updatePositions:function(t,n){var r=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):n||this.targets.map(function(e){return r.update(e,t)}):this.targets.map(function(e){return r.update(e,t,n)}))},update:function(e,t,n){var r=this.origin,o=e.get("model"),i=e.get("id"),o=(this.point[i]||(this.point[i]={x:o.x||0,y:o.y||0}),t.x-r.x+this.point[i].x),i=t.y-r.y+this.point[i].y,n=(n&&(o+=r.x-t.x,i+=r.y-t.y),{x:o,y:i});this.get("updateEdge")?this.graph.updateItem(e,n,!1):e.updatePosition(n)},debounceUpdate:(0,l.debounce)(function(e){var t=e.targets,r=e.graph,o=e.point,i=e.origin,a=e.evt,s=e.updateEdge,n=e.onlyChangeComboSize,e=e.updateParentCombos;t.map(function(e){var t=e.get("model"),n=e.get("id"),t=(o[n]||(o[n]={x:t.x||0,y:t.y||0}),{x:a.x-i.x+o[n].x,y:a.y-i.y+o[n].y});s?r.updateItem(e,t,!1):e.updatePosition(t)}),n&&e(r,t)},50,!0),updateDelegate:function(e){var t,n,r,o,i,a,s=this.graph;this.delegateRect?(t=e.x-this.origin.x+this.originPoint.minX,n=e.y-this.origin.y+this.originPoint.minY,this.delegateRect.attr({x:t,y:n})):(t=s.get("group"),n=(0,l.deepMix)({},c.default.delegateStyle,this.delegateStyle),e=(s=this.calculationGroupPosition(e)).x,r=s.y,o=s.width,i=s.height,a=s.minX,s=s.minY,this.originPoint={x:e,y:r,width:o,height:i,minX:a,minY:s},this.delegateRect=t.addShape("rect",{attrs:(0,u.__assign)({width:o,height:i,x:e,y:r},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1))},calculationGroupPosition:function(e){var t=this.targets;0===t.length&&t.push(e.item);for(var n=1/0,r=-1/0,o=1/0,i=-1/0,a=0;a<t.length;a++){var s=t[a].getBBox(),u=s.minX,l=s.minY,c=s.maxX,s=s.maxY;u<n&&(n=u),l<o&&(o=l),r<c&&(r=c),i<s&&(i=s)}return{x:Math.floor(n),y:Math.floor(o),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(i)-Math.floor(o),minX:n,minY:o}},updateParentCombos:function(e,t){var n=e||this.graph,e=t||this.targets,r={};null!=e&&e.forEach(function(e){e=e.getModel().comboId;e&&(r[e]=n.findById(e))}),Object.values(r).forEach(function(e){e&&n.updateCombo(e)})}};t.default=n},32230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),n=(n=n(45140))&&n.__esModule?n:{default:n},r=(0,r.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: ".concat(e.source," target: ").concat(e.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},n.default);t.default=r},5312:function(e,t,n){"use strict";var r=n(31834),o=n(48122),i=b(n(40566)),a=b(n(67712)),s=b(n(61125)),u=b(n(46625)),l=b(n(14789)),c=b(n(71051)),f=b(n(63332)),h=b(n(32230)),p=b(n(82426)),d=b(n(21987)),y=b(n(96852)),g=b(n(86048)),v=b(n(15120)),m=b(n(54528)),n=b(n(42417));function b(e){return e&&e.__esModule?e:{default:e}}i={"drag-canvas":i.default,"zoom-canvas":c.default,"drag-node":a.default,"activate-relations":s.default,"brush-select":u.default,"click-select":l.default,"lasso-select":g.default,tooltip:f.default,"edge-tooltip":h.default,"collapse-expand":p.default,"drag-combo":d.default,"collapse-expand-combo":y.default,"create-edge":v.default,"shortcuts-call":m.default,"scroll-canvas":n.default};(0,r.each)(i,function(e,t){(0,o.registerBehavior)(t,e)})},86048:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),n=(n=n(85698))&&n.__esModule?n:{default:n},f=n.default.isPolygonsIntersect,h=n.default.pathToPoints,o=["drag","shift","ctrl","alt","control"];t.default={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return-1<o.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso;e.item||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),t=t||this.createLasso(),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){!this.lasso&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,n=[];return e.length&&(e.forEach(function(e,t){n.push(0===t?["M",e.x,e.y]:["L",e.x,e.y])}),n.push(["L",e[0].x,e[0].y])),n},clearStates:function(e){void 0===e&&(e="canvas:click");var t=this.graph,n=this.selectedState,r=this.shouldDeselect,o=t.findAllByState("node",n),i=t.findAllByState("edge",n);r&&!r({action:e,nodes:o,edges:i})||(o.forEach(function(e){return t.setItemState(e,n,!1)}),i.forEach(function(e){return t.setItemState(e,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var o=this,i=this.graph,a=this.shouldUpdate,s=this.points.map(function(e){return[i.getCanvasByPoint(e.x,e.y).x,i.getCanvasByPoint(e.x,e.y).y]}),u=this.selectedState,l=[],c=[],r=(i.getNodes().forEach(function(e){var t,n,r;e.isVisible()&&(n=s,r=(t=e).getKeyShape(),r="path"===t.get("type")?h(r.attr("path")):[[(t=r.getCanvasBBox()).minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]],f(n,r))&&a(e,"select",o)&&(l.push(e),t=e.getModel(),c.push(t.id),i.setItemState(e,u,!0))}),[]);this.includeEdges&&l.forEach(function(e){e.getOutEdges().forEach(function(e){var t,n;e.isVisible()&&(t=(n=e.getModel()).source,n=n.target,c.includes(t))&&c.includes(n)&&a(e,"select",o)&&(r.push(e),i.setItemState(e,o.selectedState,!0))})}),this.selectedEdges=r,this.selectedNodes=l,this.onSelect&&this.onSelect(l,r),i.emit("nodeselectchange",{selectedItems:{nodes:l,edges:r},select:!0})},createLasso:function(){var e=this.graph.get("delegateGroup").addShape("path",{attrs:(0,r.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){e=e.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}}},42417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(31834),r=["shift","ctrl","alt","control","meta"];t.default={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==r.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var f=this;if(this.allowDrag(t)){var e,n,r,o,i,a,s,h=this.graph,u=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(u.includes("control")&&u.push("ctrl"),u.some(function(e){return t["".concat(e,"Key")]})?(u=h.get("canvas").getPointByClient(t.clientX,t.clientY),e=h.getZoom(),0<t.wheelDelta?e+=.05*e:e-=.05*e,h.zoomTo(e,{x:u.x,y:u.y})):(e=t.deltaX||t.movementX,!(u=t.deltaY||t.movementY)&&-1<navigator.userAgent.indexOf("Firefox")&&(u=125*-t.wheelDelta/3),n=this.graph.get("width"),r=this.graph.get("height"),s=this.graph.get("canvas").getCanvasBBox(),o=this.scalableRange,i=this.scalableRange,o<1&&-1<o&&(o*=n,i*=r),O=s.minX,l=s.maxX,a=s.minY,s=s.maxY,0<e?l<-o?e=0:l-e<-o&&(e=l+o):e<0&&(n+o<O?e=0:n+o<O-e&&(e=O-(n+o))),0<u?s<-i?u=0:s-u<-i&&(u=s+i):u<0&&(r+i<a?u=0:r+i<a-u&&(u=a-(r+i))),"x"===this.get("direction")?u=0:"y"===this.get("direction")&&(e=0),h.translate(-e,-u)),t.preventDefault(),this.get("enableOptimize")){var p=this.get("optimizeZoom"),l=this.get("optimized"),d=h.getNodes(),y=h.getEdges(),g=d.length,v=y.length;if(!l){for(var c=0;c<g;c++){var m=d[c];if(!m.destroyed)for(var b=(x=m.get("group").get("children")).length,w=0;w<b;w++)(S=x[w]).destoryed||S.get("isKeyShape")||(S.set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide())}for(var _=0;_<v;_++)for(var x,S,b=(x=y[_].get("group").get("children")).length,w=0;w<b;w++)(S=x[w]).set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout(function(){var e=h.getZoom();if(f.get("optimized")){f.set("optimized",!1);for(var t=0;t<g;t++){var n=d[t],r=(s=n.get("group").get("children")).length;if(e<p)(i=(u=n.getKeyShape()).get("ori-visibility"))&&u.show();else for(var o=0;o<r;o++){var i=(l=s[o]).get("ori-visibility");!l.get("visible")&&i&&l.show()}}for(var a=0;a<v;a++){var s,u,l,c=y[a],r=(s=c.get("group").get("children")).length;if(e<p)(i=(u=c.getKeyShape()).get("ori-visibility"))&&u.show();else for(o=0;o<r;o++)(l=s[o]).get("visible")||(i=l.get("ori-visibility"))&&l.show()}}},100);this.set("timeout",O)}}},allowDrag:function(e){var t=e.target,t=t&&t.isCanvas&&t.isCanvas();if((0,i.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!t)return!1;if((0,i.isObject)(this.allowDragOnItem)){var t=this.allowDragOnItem,n=t.node,r=t.edge,t=t.combo,o=null==(o=null==(e=e.item)?void 0:e.getType)?void 0:o.call(e);if(!n&&"node"===o)return!1;if(!r&&"edge"===o)return!1;if(!t&&"combo"===o)return!1}return!0}}},54528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=["shift","ctrl","alt","control"];t.default={getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return-1<n.indexOf(this.trigger.toLowerCase())||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view  trigger  '".concat(this.trigger,"'  'drag''shift''ctrl'  'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){e=e.key;if(e){var t,n=this.trigger.toLowerCase(),e=e.toLowerCase(),n=(this.triggerKeydown||(this.triggerKeydown=e===n||"control"===e&&"ctrl"===n||"ctrl"===e&&"control"===n),this.graph);if(!n[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '".concat(this.functionName,"'  Graph ")),{};(this.triggerKeydown&&!this.combinedKey||(t=this.combinedKey.toLowerCase(),this.triggerKeydown&&(e===t||"control"===e&&"ctrl"===t||"ctrl"===e&&"control"===t)))&&(this.functionParams&&this.functionParams.length?n[this.functionName].apply(n,this.functionParams):n[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}},45140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(39269);t.default={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e,this)?this.currentTarget&&e.item===this.currentTarget&&this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t,n=this.container;e.item&&!e.item.destroyed&&(n||(n=this.createTooltip(this.graph.get("canvas")),this.container=n),t=this.formatText(e.item.get("model"),e),n.innerHTML=t,(0,a.modifyCSS)(this.container,{visibility:"visible"}),this.updatePosition(e))},hideTooltip:function(){(0,a.modifyCSS)(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this.width,r=this.height,o=this.container,i=this.graph;t(e,this)?(t=i.getPointByClient(e.clientX,e.clientY),i=(e=i.getCanvasByPoint(t.x,t.y)).x,t=e.y,e=o.getBoundingClientRect(),n/2<i?i-=e.width:i+=this.offset,r/2<t?t-=e.height:t+=this.offset,n="".concat(i,"px"),r="".concat(t,"px"),(0,a.modifyCSS)(this.container,{left:n,top:r,visibility:"visible"})):(0,a.modifyCSS)(o,{visibility:"hidden"})},createTooltip:function(e){var t=e.get("el"),n=(t.style.position="relative",(0,a.createDom)('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>')));return t.parentNode.appendChild(n),(0,a.modifyCSS)(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}}},63332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),n=(n=n(45140))&&n.__esModule?n:{default:n},r=(0,r.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},n.default);t.default=r},71051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(43708),Y=n(31834),o=n(99121),H=r.ext.transform;t.default={getDefaultCfg:function(){return this.isFireFox="firefox"===(0,o.getBrowserName)(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],t=t[1];e.preventDefault(),!t||this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,t&&(this.endPoint={pageX:t.pageX,pageY:t.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1)},onTouchMove:function(e){var t,n,r,o;this.moveable&&(e.preventDefault(),n=(t=e.originalEvent.touches)[0],t=t[1])&&(this.endPoint||(this.endPoint={pageX:t.pageX,pageY:t.pageY}),n=(r=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)})({x:n.pageX,y:n.pageY},{x:t.pageX,y:t.pageY})/r({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),t=this.originScale*n,this.currentScale=t,r=this.get("minZoom")||this.graph.get("minZoom"),t>(this.get("maxZoom")||this.graph.get("maxZoom"))||t<r||(n=this.get("animate"),r=this.get("animateCfg"),o=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY),this.graph.zoomTo(t,{x:o.x,y:o.y},n,r),this.graph.emit("wheelzoom",e)))},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var f=this,h=this.graph,t=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var n=h.get("canvas").getPointByClient(e.clientX,e.clientY),r=this.get("sensitivity"),o=h.getZoom(),i=o,i=o*(this.isFireFox?0<e.deltaY||e.wheelDelta<0?1-.05*r:1/(1-.05*r):e.wheelDelta<0?1-.05*r:1/(1-.05*r)),r=this.get("minZoom")||h.get("minZoom"),a=this.get("maxZoom")||h.get("maxZoom");if(a<i?i=a:i<r&&(i=r),this.get("enableOptimize")){var p=this.get("optimizeZoom"),a=this.get("optimized"),d=h.getNodes(),y=h.getEdges(),N=d.length,D=y.length;if(!a){for(var s=0;s<N;s++)if(!(v=d[s]).destroyed)for(var u=(L=v.get("group").get("children")).length,l=0;l<u;l++)(O=L[l]).destoryed||O.get("isKeyShape")||(O.set("ori-visibility",O.get("ori-visibility")||O.get("visible")),O.hide());for(var c=0;c<D;c++)for(u=(L=(R=y[c]).get("group").get("children")).length,l=0;l<u;l++)(O=L[l]).set("ori-visibility",O.get("ori-visibility")||O.get("visible")),O.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));r=setTimeout(function(){var e=h.getZoom();if(f.get("optimized")){f.set("optimized",!1);for(var t=0;t<N;t++){var n=d[t],r=(s=n.get("group").get("children")).length;if(e<p){var o=(c=n.getKeyShape()).get("ori-visibility");c.set("ori-visibility",void 0),o&&c.show()}else for(var i=0;i<r;i++)o=(u=s[i]).get("ori-visibility"),u.set("ori-visibility",void 0),!u.get("visible")&&o&&u.show()}for(var a=0;a<D;a++){var s,u,l=y[a],r=(s=l.get("group").get("children")).length;if(e<p){var c,o=(c=l.getKeyShape()).get("ori-visibility");c.set("ori-visibility",void 0),o&&c.show()}else for(i=0;i<r;i++)(u=s[i]).get("visible")||(o=u.get("ori-visibility"),u.set("ori-visibility",void 0),o&&u.show())}}},100);this.set("timeout",r)}if(o<=1){var B=void 0,F=void 0;if(t.fixAll||t.fixLineWidth||t.fixLabel){for(var B=h.findAllByState("node",t.fixState),F=h.findAllByState("edge",t.fixState),G=o/i,z=B.length,g=0;g<z;g++){var v,m,b,w,_=(v=B[g]).getContainer(),U=v.getModel(),V=v.getOriginStyle(),x=v.getStateStyle(t.fixState),S=v.get("shapeFactory").getShape(U.type).getStateStyle(t.fixState,v)[t.fixState];if(t.fixAll)i<=1&&(m=(m=(0,Y.clone)(_.getMatrix()))||[1,0,0,0,1,0,0,0,1],b=(w=v.getModel()).x,w=w.y,m=H(m,[["t",-b,-w],["s",G,G],["t",b,w]]),_.setMatrix(m));else for(u=(L=_.get("children")).length,l=0;l<u;l++){var O=L[l],P=void 0,E=void 0;if(t.fixLabel&&"text"===O.get("type")){var P=O.attr("fontSize")||12,k=x[O.get("name")],M=S[O.get("name")],j=k?k.fontSize:12,C=M?M.fontSize:12,T=j||C||12;if(i<=1&&O.attr("fontSize",T/i),E)break}if(t.fixLineWidth&&O.get("isKeyShape")){var E=O.attr("lineWidth")||0,A=x.lineWidth||S.lineWidth||V.lineWidth||0;if(i<=1&&O.attr("lineWidth",A/i),P)break}}}for(var W=F.length,I=0;I<W;I++)for(var R,L=(_=(R=F[I]).getContainer()).get("children"),U=R.getModel(),x=R.getStateStyle(t.fixState),S=R.get("shapeFactory").getShape(U.type).getStateStyle(t.fixState,R)[t.fixState],u=L.length,l=0;l<u&&(O=L[l],E=P=void 0,!t.fixLabel&&!t.fixAll||"text"!==O.get("type")||(P=O.attr("fontSize")||12,k=x[O.get("name")],M=S[O.get("name")],j=k?k.fontSize:12,C=M?M.fontSize:12,T=j||C||12,i<=1&&O.attr("fontSize",T/i),!E))&&(!t.fixLineWidth&&!t.fixAll||!O.get("isKeyShape")||(E=O.attr("lineWidth")||0,A=x.lineWidth||S.lineWidth||1,i<=1&&O.attr("lineWidth",A/i),!P));l++);}}a=this.get("animate"),r=this.get("animateCfg");h.zoomTo(i,{x:n.x,y:n.y},a,r),h.emit("wheelzoom",e)}}}},68950:function(e,t,n){"use strict";n(27509)},31339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=(t.default=void 0,n(73297).getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)"),n={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:n.mainStroke,fill:n.mainFill},size:20,color:n.mainStroke,linkPoints:{size:8,lineWidth:1,fill:n.activeFill,stroke:n.activeStroke}},nodeStateStyles:{active:{fill:n.activeFill,stroke:n.activeStroke,lineWidth:2,shadowColor:n.mainStroke,shadowBlur:10},selected:{fill:n.selectedFill,stroke:n.selectedStroke,lineWidth:4,shadowColor:n.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:n.highlightFill,stroke:n.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:n.inactiveFill,stroke:n.inactiveStroke,lineWidth:1},disable:{fill:n.disableFill,stroke:n.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:n.edgeMainStroke,lineAppendWidth:2},color:n.edgeMainStroke},edgeStateStyles:{active:{stroke:n.edgeActiveStroke,lineWidth:1},selected:{stroke:n.edgeSelectedStroke,lineWidth:2,shadowColor:n.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:n.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:n.edgeInactiveStroke,lineWidth:1},disable:{stroke:n.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:n.comboMainFill,lineWidth:1,stroke:n.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:n.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:n.comboActiveStroke,lineWidth:1,fill:n.comboActiveFill},selected:{stroke:n.comboSelectedStroke,lineWidth:2,fill:n.comboSelectedFill,shadowColor:n.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:n.comboHighlightStroke,lineWidth:2,fill:n.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:n.comboInactiveStroke,fill:n.comboInactiveFill,lineWidth:1},disable:{stroke:n.comboDisableStroke,fill:n.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};t.default=n},48263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(97582),s=n(39269),u=n(31834),n=n(48122),i=n.Util.cloneEvent,l=n.Util.isViewportChanged,n=(r=n.AbstractEvent,(0,o.__extends)(c,r),c.prototype.initEvents=function(){var e=this.graph,t=this.extendEvents,t=void 0===t?[]:t,n=e.get("canvas"),r=n.get("el"),o=(0,u.wrapBehavior)(this,"onCanvasEvents"),i=(0,u.wrapBehavior)(this,"onExtendEvents"),a=(0,u.wrapBehavior)(this,"onWheelEvent");n.off("*").on("*",o),this.canvasHandler=o,t.push((0,s.addEventListener)(r,"wheel",a)),"undefined"!=typeof window&&(t.push((0,s.addEventListener)(window,"keydown",i)),t.push((0,s.addEventListener)(window,"keyup",i)),t.push((0,s.addEventListener)(window,"focus",i))),this.resetHandler&&e.off("afterchangedata",this.resetHandler),this.resetHandler=(0,u.wrapBehavior)(this,"resetStatus"),e.on("afterchangedata",this.resetHandler)},c.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},c.prototype.onCanvasEvents=function(e){var t=this,n=this.graph,r=n.get("canvas"),o=e.target,i=e.type;switch(i){case"drag":this.onCanvasEvents(Object.assign({},e,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},e,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return t.mousedown=!1});break;case"click":if(!this.mousedown)return}e.canvasX=e.x,e.canvasY=e.y;var a={x:e.canvasX,y:e.canvasY},s=n.get("group").getMatrix();l(s=s||[1,0,0,0,1,0,0,0,1])&&(a=n.getPointByClient(e.clientX,e.clientY)),e.x=a.x,e.y=a.y,e.currentTarget=n,o===r?("mousemove"!==i&&"mouseleave"!==i||this.handleMouseMove(e,"canvas"),e.target=r,e.item=null,n.emit(i,e),n.emit("canvas:".concat(i),e)):(s=c.getItemRoot(o))?(a=s.get("item")).destroyed||(r=a.getType(),e.target=o,e.item=a,e.canvasX===e.x&&e.canvasY===e.y&&(s=n.getCanvasByPoint(e.x,e.y),e.canvasX=s.x,e.canvasY=s.y),e.name&&!e.name.includes(":")?(n.emit("".concat(r,":").concat(i),e),n.emit(i,e)):e.name&&n.emit(e.name,e),"dragstart"===i&&(this.dragging=!0),"dragend"===i&&(this.dragging=!1),"mousemove"===i&&this.handleMouseMove(e,r)):n.emit(i,e)},c.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},c.prototype.onWheelEvent=function(e){(0,u.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},c.prototype.handleMouseMove=function(e,t){var n=this.graph,r=this.preItem,n=n.get("canvas"),n=e.target===n?null:e.item;e=i(e),r&&r!==n&&!r.destroyed&&(e.item=r,this.emitCustomEvent(r.getType(),"mouseleave",e),this.dragging)&&this.emitCustomEvent(r.getType(),"dragleave",e),n&&r!==n&&(e.item=n,this.emitCustomEvent(t,"mouseenter",e),this.dragging)&&this.emitCustomEvent(t,"dragenter",e),this.preItem=n},c.prototype.emitCustomEvent=function(e,t,n){n.type=t,this.graph.emit("".concat(e,":").concat(t),n)},c.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},c.prototype.destroy=function(){var e=this.graph,t=this.canvasHandler,n=this.extendEvents;e.get("canvas").off("*",t),(0,u.each)(n,function(e){e.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},c);function c(e){var t=r.call(this,e)||this;return t.extendEvents=[],t.dragging=!1,t.mousedown=!1,t.preItem=null,t.destroy(),t.graph=e,t.destroyed=!1,t.initEvents(),t}t.default=n},74278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EventController",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"LayoutController",{enumerable:!0,get:function(){return o.default}});var r=i(n(48263)),o=i(n(71426));function i(e){return e&&e.__esModule?e:{default:e}}},71426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var v=n(97582),m=n(48122),b=n(39849),r=n(88405),g=n(89996),o=n(59271),l=n(31834);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return setTimeout(e,16)}function a(e){return clearTimeout(e)}function w(e){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||i)(e)}function s(e){("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||a)(e)}var u,c=["fruchterman","gForce"],h=["force","grid","circular"],n=(u=m.AbstractLayout,(0,v.__extends)(p,u),p.prototype.initLayout=function(){},p.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=(0,r.LayoutWorker)(this.layoutCfg.workerScriptURL),this.worker)},p.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(s(e.requestId),e.requestId=null),e.requestId2)&&(s(e.requestId2),e.requestId2=null)},p.prototype.execLayoutMethod=function(y,g){var e=this;return new Promise(function(p,d){return(0,v.__awaiter)(e,void 0,void 0,function(){var o,i,a,s,u,l,c,f,h;return(0,v.__generator)(this,function(e){switch(e.label){case 0:if(!(o=this.graph)||o.get("destroyed"))return[2];i=y.type,y.onLayoutEnd=function(){o.emit("aftersublayout",{type:i}),p()},i&&this.isGPU&&(x(i)?i="".concat(i,"-gpu"):console.warn("The '".concat(i,"' layout does not support GPU calculation for now, it will run in CPU."))),m.Util.isForce(i)?(a=y.onTick,s=y.animate,u=void 0===s&&("force"===i||"force2"===i),f=function(){a&&a(),(s||u)&&o.refreshPositions()},y.tick=f):"comboForce"!==i&&"comboCombined"!==i||(y.comboTrees=o.get("comboTrees"));try{l=new b.Layout[i](y),this.layoutMethods[g]&&this.layoutMethods[g].destroy(),this.layoutMethods[g]=l}catch(e){console.warn("The layout method: '".concat(i,"' does not exist! Please specify it first.")),d()}return l.enableTick&&(c=y.onTick,f=function(){c&&c(),o.refreshPositions()},l.tick=f),t=h=this.filterLayoutData(this.data,y),n=g,null!=(r=null==t?void 0:t.nodes)&&r.length&&t.nodes.forEach(function(e){e.layoutOrder=n}),l.init(h),o.emit("beforesublayout",{type:i}),[4,l.execute()];case 1:return e.sent(),l.isCustomLayout&&y.onLayoutEnd&&y.onLayoutEnd(),[2]}var t,n,r})})})},p.prototype.updateLayoutMethod=function(u,l){var t=this;return new Promise(function(s,e){return(0,v.__awaiter)(t,void 0,void 0,function(){var t,n,r,o,i,a;return(0,v.__generator)(this,function(e){switch(e.label){case 0:return t=this.graph,n=null==l?void 0:l.type,l.onLayoutEnd=function(){t.emit("aftersublayout",{type:n}),s()},m.Util.isForce(n)&&(r=l.onTick,o=l.animate,i=void 0===o&&("force"===n||"force2"===n),a=function(){null!=r&&r(),(o||i)&&t.refreshPositions()},l.tick=a),a=this.filterLayoutData(this.data,l),u.init(a),u.updateCfg(l),t.emit("beforesublayout",{type:n}),[4,u.execute()];case 1:return e.sent(),u.isCustomLayout&&l.onLayoutEnd&&l.onLayoutEnd(),[2]}})})})},p.prototype.layout=function(e){var t,n,r,o,i,a,s,u,l,c=this,f=this.graph;if(f&&!f.get("destroyed"))return this.data=this.setDataFromGraph(),l=this.data,t=l.nodes,l=l.hiddenNodes,!!t&&(r=f.get("width"),s=f.get("height"),n={},Object.assign(n,{width:r,height:s,center:[r/2,s/2]},this.layoutCfg),r=(this.layoutCfg=n).type,o=!1,null!=(s=this.layoutMethods)&&s.forEach(function(e){return o=!(null==(e=e.nodes)||!e.length)||o}),s=this.destoryLayoutMethods(),f.emit("beforelayout"),i=Promise.resolve(),o&&r&&1===(null==s?void 0:s.length)&&s[0]===r?this.tweakInit():i=this.initPositions(n.center,t),this.initPositions(n.center,l).then(),this.isGPU=d(n,r),a=n.onLayoutEnd,s=n.layoutEndFormatted,u=n.adjust,s||(n.layoutEndFormatted=!0,n.onAllLayoutEnd=function(){return(0,v.__awaiter)(c,void 0,void 0,function(){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return a&&a(t),this.refreshLayout(),u&&n.pipes?[4,this.adjustPipesBox(this.data,u)]:[3,2];case 1:e.sent(),this.refreshLayout(),e.label=2;case 2:return f.emit("afterlayout"),[2]}})})}),this.stopWorker(),!(!n.workerEnabled||!this.layoutWithWorker(this.data,e))||(l=!1,n.type?(l=!0,i=i.then(function(){return(0,v.__awaiter)(c,void 0,void 0,function(){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(n,0)];case 1:return[2,e.sent()]}})})})):n.pipes&&(l=!0,n.pipes.forEach(function(t,n){i=i.then(function(){return(0,v.__awaiter)(c,void 0,void 0,function(){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(t,n)];case 1:return[2,e.sent()]}})})})})),l?i.then(function(){n.onAllLayoutEnd&&n.onAllLayoutEnd(),e&&e()}).catch(function(e){console.warn("graph layout failed,",e)}):(f.refreshPositions(),null!=e&&e()),!1))},p.prototype.tweakInit=function(){var o,n,r,e=this.data,t=this.graph,i=e.nodes,e=e.edges;null!=i&&i.length&&(o={},i.forEach(function(e){var t=e.x,n=e.y;isNaN(t)||isNaN(n)||(o[e.id]={x:t,y:n},e.mass=e.mass||2)}),e.forEach(function(e){var t=e.source,e=e.target,n=o[t],r=o[e];!n&&r?o[t]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)}:!r&&n&&(o[e]={x:n.x+80*(Math.random()-.5),y:n.y+80*(Math.random()-.5)})}),n=t.get("width"),r=t.get("height"),i.forEach(function(e){var t=o[e.id]||{x:n/2+20*(Math.random()-.5),y:r/2+20*(Math.random()-.5)};e.x=t.x,e.y=t.y}))},p.prototype.initWithPreset=function(a,s){var t=this;return new Promise(function(i,e){return(0,v.__awaiter)(t,void 0,void 0,function(){var t,n,r,o;return(0,v.__generator)(this,function(e){switch(e.label){case 0:return t=(n=this).layoutCfg,n=n.data,null!=(r=t.preset)&&r.type&&b.Layout[null==r?void 0:r.type]?(o=d(r,r.type),o=o?"".concat(r.type,"-gpu"):r.type,o=new b.Layout[o](r),delete t.preset,o.init(n),[4,o.execute()]):(null!=s&&s(),i(),[2,!1]);case 1:return e.sent(),null!=a&&a(),i(),[2,!0]}})})})},p.prototype.layoutWithWorker=function(t,e){var n=this,r=this.layoutCfg,o=this.graph,i=this.getWorker(),a=this.workerData;if(!i)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,o.emit("beforelayout");var s=Promise.resolve(),a=!1;if(r.type)a=!0,s=s.then(function(){return n.runWebworker(i,t,r)});else if(r.pipes)for(var a=!0,u=0,l=r.pipes;u<l.length;u++)!function(e){s=s.then(function(){return n.runWebworker(i,t,e)})}(l[u]);return a&&s.then(function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null!=e&&e()}).catch(function(e){console.error("layout failed",e)}),!0},p.prototype.runWebworker=function(e,t,r){var n,o,i=this,a=this.isGPU,s=this.filterLayoutData(t,r),t=s.nodes,u=s.edges,l=document.createElement("canvas"),a=a&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,c=(o={},(n=r)&&"object"===f(n)?(Object.keys(n).forEach(function(e){n.hasOwnProperty(e)&&"function"!=typeof n[e]&&(o[e]=n[e])}),o):n);return a?(a=l.transferControlToOffscreen(),c.type="".concat(c.type,"-gpu"),e.postMessage({type:g.LAYOUT_MESSAGE.GPURUN,nodes:t,edges:u,layoutCfg:c,canvas:a},[a])):e.postMessage({type:g.LAYOUT_MESSAGE.RUN,nodes:t,edges:u,layoutCfg:c}),new Promise(function(t,n){e.onmessage=function(e){i.handleWorkerMessage(t,n,e,s,r)}})},p.prototype.handleWorkerMessage=function(e,t,n,r,o){function i(){o.onTick&&o.onTick()}var a=this.graph,s=this.workerData,u=n.data;switch(u.type){case g.LAYOUT_MESSAGE.TICK:s.currentTick=u.currentTick,s.currentTickData=u,s.requestId||(s.requestId=w(function(){_(r,u),a.refreshPositions(),i(),u.currentTick===u.totalTicks?e():s.currentTick===u.totalTicks&&(s.requestId2=w(function(){_(r,s.currentTickData),a.refreshPositions(),s.requestId2=null,i(),e()})),s.requestId=null}));break;case g.LAYOUT_MESSAGE.END:null==s.currentTick&&(_(r,u),e());break;case g.LAYOUT_MESSAGE.GPUEND:if(null==s.currentTick){for(var l=r.nodes,c=u.vertexEdgeData,f=l.length,h=0;h<f;h++){var p=l[h],d=c[4*h],y=c[4*h+1];p.x=d,p.y=y}e()}break;case g.LAYOUT_MESSAGE.ERROR:console.warn("Web-Worker layout error!",u.message),t();break;default:t()}},p.prototype.updateLayoutCfg=function(e){var r,o,t,i=this,n=this.graph,a=this.layoutMethods;n&&!n.get("destroyed")&&(t=e.disableTriggerLayout,e=(0,v.__rest)(e,["disableTriggerLayout"]),r=(0,l.mix)({},this.layoutCfg,e),this.layoutCfg=r,t||(null!=a&&a.length?(this.data=this.setDataFromGraph(),this.stopWorker(),e.workerEnabled&&this.layoutWithWorker(this.data,null)||(n.emit("beforelayout"),o=Promise.resolve(),t=!1,1===(null==a?void 0:a.length)?(t=!0,o=o.then(function(){return(0,v.__awaiter)(i,void 0,void 0,function(){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(a[0],r)];case 1:return[2,e.sent()]}})})})):null!=a&&a.length&&(t=!0,a.forEach(function(t,e){var n=r.pipes[e];o=o.then(function(){return(0,v.__awaiter)(i,void 0,void 0,function(){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,n)];case 1:return[2,e.sent()]}})})})})),t&&o.then(function(){r.onAllLayoutEnd&&r.onAllLayoutEnd()}).catch(function(e){console.warn("layout failed",e)}))):this.layout()))},p.prototype.adjustPipesBox=function(o,s){var u=this;return new Promise(function(e){var t=o.nodes,n=(null!=t&&t.length||e(),h.includes(s)||(console.warn("The adjust type ".concat(s," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),e()),{center:u.layoutCfg.center,nodeSize:function(e){return Math.max(e.height,e.width)},preventOverlap:!0,onLayoutEnd:function(){}}),t=u.getLayoutBBox(t),i=t.groupNodes,r=t.layoutNodes,a=(0,l.clone)(r);n.onLayoutEnd=function(){null!=r&&r.forEach(function(e,t){var n,r=e.x-(null==(n=a[t])?void 0:n.x),o=e.y-(null==(n=a[t])?void 0:n.y);null!=(e=i[t])&&e.forEach(function(e){e.x+=r,e.y+=o})}),e()},new b.Layout[s](n).layout({nodes:r})})},p.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},p);function p(e){var t=u.call(this,e)||this;return t.graph=e,t.layoutCfg=e.get("layout")||{},t.layoutType=t.getLayoutType(),t.worker=null,t.workerData={},t.initLayout(),t}function _(e,t){for(var n=e.nodes,r=t.nodes,o=n.length,i=0;i<o;i++){var a=n[i];a.x=r[i].x,a.y=r[i].y}}function x(e){return c.includes(e)}function d(e,t){var n=t,t=(t&&"gpu"===t.split("-")[1]&&(n=t.split("-")[0],e.gpuEnabled=!0),!1);return e.gpuEnabled&&(t=!0,(0,o.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),t=!1)),t&&!x(n)&&(console.warn("The '".concat(n,"' layout does not support GPU calculation for now, it will run in CPU.")),t=!1),t}t.default=n},99042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,v=n(97582),g=n(15873),m=n(32227),r=n(48122),o=n(43708),b=n(31834),w=n(39269),_=(s=n(31339))&&s.__esModule?s:{default:s},y=n(97082),a=n(74278),x=o.ext.transform,s=(i=r.AbstractGraph,(0,v.__extends)(u,i),u.prototype.initLayoutController=function(){var e=new a.LayoutController(this);this.set({layoutController:e})},u.prototype.initEventController=function(){var e=new a.EventController(this);this.set({eventController:e})},u.prototype.initCanvas=function(){var e=this.get("container");if("string"==typeof e&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var t=e.clientWidth,n=e.clientHeight,r=this.get("width")||t,o=this.get("height")||n;this.get("width")||this.get("height")||(this.set("width",t),this.set("height",n)),e="svg"===this.get("renderer")?new m.Canvas({container:e,width:r,height:o}):(t={container:e,width:r,height:o},(n=this.get("pixelRatio"))&&(t.pixelRatio=n,window.devicePixelRatio=n),new g.Canvas(t)),this.set("canvas",e)},u.prototype.initPlugins=function(){var t=this;(0,b.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},u.prototype.downloadImageWatermark=function(r,o,i,a){return(0,v.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,v.__generator)(this,function(e){switch(e.label){case 0:return t=r.style.backgroundImage,t=t.slice(5,t.length-2),(n=new Image).src=t,[4,new Promise(function(t){n.onload=function(){var e=o.createPattern(n,"repeat");o.rect(0,0,i,a),o.fillStyle=e,o.fill(),t("")}})];case 1:return e.sent(),[2]}})})},u.prototype.asyncToDataUrl=function(u,l,c,f,h,e){var t=this,p=document.querySelector(".g6-graph-watermarker"),n=this.get("canvas"),d=n.getRenderer(),y=e||n.get("el"),g="";u=u||"image/png",setTimeout(function(){return(0,v.__awaiter)(t,void 0,void 0,function(){var t,n,r,o,i,a,s;return(0,v.__generator)(this,function(e){switch(e.label){case 0:return"svg"!==d?[3,1]:(t=y.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(s=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s)).replaceChild(t,s.documentElement),t=(new XMLSerializer).serializeToString(s),g="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(t)),[3,4]);case 1:return n=void 0,r=y.getContext("2d"),o=f||this.get("width"),i=h||this.get("height"),a=void 0,p?[4,this.downloadImageWatermark(p,r,o,i)]:[3,3];case 2:e.sent(),e.label=3;case 3:if(l){s="undefined"!=typeof window?window.devicePixelRatio:1;try{n=r.getImageData(0,0,o*s,i*s),a=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=l,r.fillRect(0,0,o,i)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}g=y.toDataURL(u),l&&(r.clearRect(0,0,o,i),r.putImageData(n,0,0),r.globalCompositeOperation=a),e.label=4;case 4:return c&&c(g),[2]}})})},16)},u.prototype.toDataURL=function(e,t){var n=this.get("canvas"),r=n.getRenderer(),n=n.get("el"),o=(e=e||"image/png","");if("svg"===r)var r=n.cloneNode(!0),i=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",i),r=(i.replaceChild(r,i.documentElement),(new XMLSerializer).serializeToString(i)),o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(r));else{var i=void 0,r=n.getContext("2d"),a=Math.max(this.get("width"),500),s=Math.max(this.get("height"),500),u=void 0;if(t){var l="undefined"!=typeof window&&window.devicePixelRatio||1;try{i=r.getImageData(0,0,a*l,s*l),u=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,a,s)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}o=n.toDataURL(e),t&&(r.clearRect(0,0,a,s),r.putImageData(i,0,0),r.globalCompositeOperation=u)}return o},u.prototype.toFullDataURL=function(o,i,e){var t=this.get("group").getCanvasBBox(),n=t.height,r=t.width,a=this.get("renderer"),s=(0,w.createDom)('<div id="virtual-image"></div>'),u=e?e.backgroundColor:void 0,e=e?e.padding:void 0,l=(e?(0,b.isNumber)(e)&&(e=[e,e,e,e]):e=[0,0,0,0],n+e[0]+e[2]),c=r+e[1]+e[3],s={container:s,height:l,width:c,quickHit:!0},s=new("svg"===a?m:g).Canvas(s),f=this.get("group").clone(),h=(h=(0,b.clone)(f.getMatrix()))||[1,0,0,0,1,0,0,0,1],p=(t.maxX+t.minX)/2,t=(t.maxY+t.minY)/2,d=(h=x(h,[["t",-p,-t],["t",r/2+e[3],n/2+e[0]]]),f.resetMatrix(),f.setMatrix(h),s.add(f),s.get("el")),y="";i=i||"image/png",setTimeout(function(){if("svg"===a){var e=d.cloneNode(!0),t=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),t=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",t),e=(t.replaceChild(e,t.documentElement),(new XMLSerializer).serializeToString(t));y="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(e))}else{var t=void 0,e=d.getContext("2d"),n=void 0;if(u){var r="undefined"!=typeof window?window.devicePixelRatio:1;try{t=e.getImageData(0,0,c*r,l*r),n=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.fillStyle=u,e.fillRect(0,0,c,l)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}y=d.toDataURL(i),u&&(e.clearRect(0,0,c,l),e.putImageData(t,0,0),e.globalCompositeOperation=n)}o&&o(y)},16)},u.prototype.downloadFullImage=function(r,o,e){var i=this,t=this.get("group").getCanvasBBox(),n=t.height,a=t.width,s=this.get("renderer"),u=(0,w.createDom)('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),c=e?e.backgroundColor:void 0,e=e?e.padding:void 0,f=(e?(0,b.isNumber)(e)&&(e=[e,e,e,e]):e=[0,0,0,0],n+e[0]+e[2]),h=a+e[1]+e[3],l=(l&&(p=(l=this.get("graphWaterMarker").cfg||{}).width,l=l.height,f=Math.ceil(f/l)*l,h=Math.ceil(h/p)*p),{container:u,height:f,width:h}),p=new("svg"===s?m:g).Canvas(l),u=this.get("group"),l=(0,y.cloneGElement)(u),u=(u=(0,b.clone)(l.getMatrix()))||[1,0,0,0,1,0,0,0,1],d=(t.maxX+t.minX)/2,t=(t.maxY+t.minY)/2,d=(u=x(u,[["t",-d,-t],["t",a/2+e[3],n/2+e[0]]]),l.resetMatrix(),l.setMatrix(u),p.add(l),p.get("el"));o=o||"image/png",this.asyncToDataUrl(o,c,function(e){var t=document.createElement("a"),n=(r||"graph")+("svg"===s?".svg":".".concat(o.split("/")[1])),e=(i.dataURLToImage(e,s,t,n),document.createEvent("MouseEvents"));e.initEvent("click",!1,!1),t.dispatchEvent(e)},h,f,d)},u.prototype.downloadImage=function(e,t,n){var r=this,o=(this.stopAnimate(),this.get("canvas").getRenderer()),i=(t=t||"image/png",(e||"graph")+("svg"===o?".svg":".".concat(t.split("/")[1]))),a=document.createElement("a");this.asyncToDataUrl(t,n,function(e){r.dataURLToImage(e,o,a,i);e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),a.dispatchEvent(e)})},u.prototype.dataURLToImage=function(e,t,n,r){if(e&&"data:"!==e){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==t){var o,t=e.split(","),i="";t&&0<t.length&&(o=t[0].match(/:(.*?);/))&&2<=o.length&&(i=o[1]);for(var a=atob(t[1]),s=a.length,u=new Uint8Array(s);s--;)u[s]=a.charCodeAt(s);var l=new Blob([u],{type:i});window.navigator.msSaveBlob?window.navigator.msSaveBlob(l,r):n.addEventListener("click",function(){n.download=r,n.href=window.URL.createObjectURL(l)})}else n.addEventListener("click",function(){n.download=r,n.href=e})}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},u.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},u.prototype.removePlugin=function(e){var t=this.get("plugins"),n=t.indexOf(e);0<=n&&(e.destroyPlugin(),t.splice(n,1))},u.prototype.setImageWaterMarker=function(e,t){void 0===e&&(e=_.default.waterMarkerImage);var n,r,o,i,a,s=this.get("container"),u=((s=(0,b.isString)(s)?document.getElementById(s):s).style.position||(s.style.position="relative"),this.get("graphWaterMarker")),t=(0,b.deepMix)({},_.default.imageWaterMarkerConfig,t),l=t.width,c=t.height,f=t.compatible,h=t.image;e?(u?u.clear():(t={container:s,width:l,height:c,capture:!1},(l=this.get("pixelRatio"))&&(t.pixelRatio=l,window.devicePixelRatio=l),u=new g.Canvas(t),this.set("graphWaterMarker",u)),u.get("el").style.display="none",n=u.get("context"),r=h.rotate,o=h.x,i=h.y,n.rotate(-r*Math.PI/180),(a=new Image).crossOrigin="anonymous",a.src=e,a.onload=function(){var e;n.drawImage(a,o,i,h.width,h.height),n.rotate(r*Math.PI/180),f?s.style.cssText="background-image: url(".concat(u.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((e=document.querySelector(".g6-graph-watermarker"))||((e=document.createElement("div")).className="g6-graph-watermarker"),e.className="g6-graph-watermarker",u.destroyed||(e.style.cssText="background-image: url(".concat(u.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),s.appendChild(e)))}):((c=f?s:document.querySelector(".g6-graph-watermarker"))&&(c.style.cssText=void 0),u&&u.clear())},u.prototype.setTextWaterMarker=function(e,t){var n=this.get("container"),r=((n=(0,b.isString)(n)?document.getElementById(n):n).style.position||(n.style.position="relative"),this.get("graphWaterMarker")),t=(0,b.deepMix)({},_.default.textWaterMarkerConfig,t),o=t.width,i=t.height,a=t.compatible,t=t.text;if(null!=e&&e.length){r?r.clear():(o={container:n,width:o,height:i,capture:!1},(i=this.get("pixelRatio"))&&(o.pixelRatio=i,window.devicePixelRatio=i),r=new g.Canvas(o),this.set("graphWaterMarker",r)),r.get("el").style.display="none";var s=r.get("context"),i=t.rotate,o=t.fill,u=t.fontFamily,l=t.fontSize,c=t.baseline,f=t.x,h=t.y,p=t.lineHeight;s.rotate(-i*Math.PI/180),s.font="".concat(l,"px ").concat(u),s.fillStyle=o,s.textBaseline=c;for(var d=(0,b.isString)(e)?[e]:e,y=d.length-1;0<=y;y--)s.fillText(d[y],f,h+y*p);s.rotate(i*Math.PI/180),a?n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((t=document.querySelector(".g6-graph-watermarker"))||((t=document.createElement("div")).className="g6-graph-watermarker"),t.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(t))}else(l=a?n:document.querySelector(".g6-graph-watermarker"))&&(l.style.cssText=void 0),r&&r.clear()},u.prototype.destroy=function(){(0,b.each)(this.get("plugins"),function(e){e.destroyPlugin()});var e,t=this.get("tooltips");if(t)for(var n=0;n<t.length;n++){var r,o=t[n];o&&(r=o.parentElement)&&r.removeChild(o)}null!=(e=this.get("eventController"))&&e.destroy(),null!=(e=this.get("layoutController"))&&e.destroy(),null!=(e=this.get("graphWaterMarker"))&&e.destroy(),null!=(e=document.querySelector(".g6-graph-watermarker"))&&e.remove(),i.prototype.destroy.call(this)},u);function u(e){var e=i.call(this,e)||this,t=e.get("defaultNode");return t||e.set("defaultNode",{type:"circle"}),t.type||(t.type="circle",e.set("defaultNode",t)),e.destroyed=!1,e}t.default=s},83701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),o=s(n(6977)),f=n(31834),i=s(n(85698)),a=n(71441),n=s(n(99042));function s(e){return e&&e.__esModule?e:{default:e}}var u,l=i.default.radialLayout,c=i.default.traverseTree,i=(u=n.default,(0,r.__extends)(h,u),h.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(e){e=o.default[t.type](e,t);return l(e),e}:function(e){return o.default[t.type](e,t)}):null},h.indexOfChild=function(e,n){var r=-1;return(0,f.each)(e,function(e,t){if(n===e.id)return r=t,!1}),r},h.prototype.getDefaultCfg=function(){var e=u.prototype.getDefaultCfg.call(this);return e.animate=!0,e},h.prototype.innerAddChild=function(e,t,n){var r=this,o=e.data,i=(o&&(o.x=e.x,o.y=e.y,o.depth=e.depth),r.addItem("node",o,!1));return t&&(i.set("parent",t),n&&((o=t.get("originAttrs"))?i.set("originAttrs",o):(o=t.getModel(),i.set("originAttrs",{x:o.x,y:o.y}))),(o=t.get("children"))?o.push(i):t.set("children",[i]),r.addItem("edge",{source:t.get("id"),target:i.get("id"),id:"".concat(t.get("id"),":").concat(i.get("id"))},!1)),(0,f.each)(e.children||[],function(e){r.innerAddChild(e,i,n)}),r.emit("afteraddchild",{item:i,parent:t}),i},h.prototype.innerUpdateChild=function(e,t,n){var r=this,o=r.findById(e.id);if(o){(0,f.each)(e.children||[],function(e){r.innerUpdateChild(e,o,n)});var i,a,s=o.get("children");if(s&&0<s.length)for(var u=s.length-1;0<=u;u--){var l=s[u].getModel();-1===h.indexOfChild(e.children||[],l.id)&&(r.innerRemoveChild(l.id,{x:e.x,y:e.y},n),s.splice(u,1))}o.get("originAttrs")&&(i=o.get("originAttrs").x,a=o.get("originAttrs").y);var c=o.getModel();n&&o.set("originAttrs",{x:c.x,y:c.y}),o.set("model",Object.assign(c,e.data)),i===e.x&&a===e.y||o.updatePosition({x:e.x,y:e.y})}else r.innerAddChild(e,t,n)},h.prototype.innerRemoveChild=function(e,t,n){var r,o=this,e=o.findById(e);e&&((0,f.each)(e.get("children"),function(e){o.innerRemoveChild(e.getModel().id,t,n)}),n?(r=e.getModel(),e.set("to",t),e.set("originAttrs",{x:r.x,y:r.y}),o.get("removeList").push(e)):o.removeItem(e,!1))},h.prototype.changeData=function(e,t){void 0===t&&(t=!0);var n=this;this.getNodes().map(function(e){return n.clearItemStates(e)}),this.getEdges().map(function(e){return n.clearItemStates(e)}),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:e||n.get("data")}),e?(n.data(e),n.render(!1)):n.layout(this.get("fitView"))},h.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(e)},h.prototype.updateLayout=function(e,t,n,r){var o;void 0===r&&(r=!0),e?(r&&this.get("enabledStack")&&this.pushStack("layout",{before:this.get("layout"),after:e}),this.set("layout",e),this.set("layoutMethod",this.getLayout()),this.layout(),t&&(r=(r=n)||("begin"===t?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),r=this.getPointByCanvas(r.x,r.y),e=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1],r.x=r.x*e[0]+e[6],r.y=r.y*e[0]+e[7],n={x:((e=(n=this.getGroup().getCanvasBBox()).minX)+n.maxX)/2,y:((o=n.minY)+n.maxY)/2},"begin"===t&&(n.x=e,n.y=o),this.translate(r.x-n.x,r.y-n.y))):console.warn("layout cannot be null")},h.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(e)},h.prototype.layout=function(e){var i,o=this,t=this.get("data"),n=this.get("layoutMethod"),r=this.get("layout"),a=t,r=(null!=r&&r.excludeInvisibles?(t=(0,f.clone)(this.get("data")),i={},c(t,function(e){var t=e.children;if(null==t||!t.length)return!0;for(var n=t.length-1;0<=n;n--){var r=o.findById(t[n].id);(r?r.isVisible():!1!==t[n].visible)||(i[e.id]=i[e.id]||[],i[e.id].push({idx:n,child:t.splice(n,1)[0]}))}}),a=n?n(t,this.get("layout")):t,c(a,function(e){var t=i[e.id];if(null!=t&&t.length)for(var n=t.length-1;0<=n;n--){var r=t[n],o=r.idx,r=r.child;e.children.splice(o,0,r)}})):a=n?n(t,this.get("layout")):t,this.get("animate"));this.emit("beforerefreshlayout",{data:t,layoutData:a}),this.emit("beforelayout"),this.innerUpdateChild(a,void 0,r),e&&this.get("viewController").fitView(),r?this.layoutAnimate(a):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:t,layoutData:a}),this.emit("afterlayout")},h.prototype.addChild=function(e,t,n){void 0===n&&(n=!0),this.emit("beforeaddchild",{model:e,parent:t}),(0,f.isString)(t)||(t=t.get("id"));var r=this.findDataById(t);r&&(r.children||(r.children=[]),r.children.push(e),this.findById(t).refresh(),this.changeData(void 0,n))},h.prototype.updateChildren=function(e,t,n){void 0===n&&(n=!0);var r=this.findById(t);t&&r?(this.findDataById(t).children=e,r.refresh(),this.changeData(void 0,n)):console.warn("Update children failed! There is no node with id '".concat(t,"'"))},h.prototype.updateChild=function(e,t,n){var r,o;void 0===n&&(n=!0),t&&this.findById(t)?(r=this.findDataById(t),o=this.findById(e.id),r.children||(r.children=[]),o?-1<(o=h.indexOfChild(r.children,e.id))&&(r.children[o]=e):r.children.push(e),null!=(o=this.findById(t))&&o.refresh(),this.changeData(void 0,n)):this.changeData(e,n)},h.prototype.removeChild=function(t,e){void 0===e&&(e=!0);var n,r,o=this.findById(t);(o=o?null==o?void 0:o.get("parent"):this.getNodes().find(function(e){return!!(e.getModel().children||[]).find(function(e){return e.id===t})}))&&!o.destroyed&&(n=o.get("id"),n=(n=this.findDataById(n))&&n.children||[],r=h.indexOfChild(n,t),n.splice(r,1),o.refresh()),this.changeData(void 0,e)},h.prototype.findDataById=function(t,e){var n,r=this;return e=e||r.get("data"),t===e.id?e:((n=null,f.each)(e.children||[],function(e){return e.id===t?(n=e,!1):!(n=r.findDataById(t,e))&&void 0}),n)},h.prototype.layoutAnimate=function(a,s){var u=this,e=this.get("animateCfg");u.emit("beforeanimate",{data:a}),u.getEdges().forEach(function(e){var t=e.get("model");t.sourceAnchor||(t.sourceAnchor=e.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(i){c(a,function(e){var t,n,r,o=u.findById(e.id);return o&&(t=o.get("originAttrs"),n=o.get("model"),t||(t={x:n.x,y:n.y},o.set("originAttrs",t)),s?(r=s(o,i,t,a),o.set("model",Object.assign(n,r))):(n.x=t.x+(e.x-t.x)*i,n.y=t.y+(e.y-t.y)*i)),!0}),(0,f.each)(u.get("removeList"),function(e){var t=e.getModel(),n=e.get("originAttrs"),e=e.get("to");t.x=n.x+(e.x-n.x)*i,t.y=n.y+(e.y-n.y)*i}),u.refreshPositions()},{duration:e.duration,easing:e.ease,callback:function(){(0,f.each)(u.getNodes(),function(e){e.set("originAttrs",null)}),(0,f.each)(u.get("removeList"),function(e){u.removeItem(e,!1)}),u.set("removeList",[]),e.callback&&e.callback(),u.emit("afteranimate",{data:a})},delay:e.delay})},h.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},h.prototype.isLayoutAnimating=function(){return this.layoutAnimating},h.prototype.render=function(e){void 0===e&&(e=!0);var t=this.get("data");if(!t||!(0,f.isObject)(t)||!Object.keys(t).length)throw new Error("data must be defined first");this.clear(),e&&this.get("enabledStack")&&this.clearStack(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},h.prototype.save=function(){return this.get("data")},h.prototype.data=function(e){u.prototype.data.call(this,e),this.set("originData",(0,a.deepClone)(e))},h);function h(e){e=u.call(this,e)||this;return e.layoutAnimating=!1,e.set("removeList",[]),e.set("layoutMethod",e.getLayout()),e}t.default=i},86431:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var r={Minimap:!0,Grid:!0,Bundling:!0,Menu:!0,Fisheye:!0,Algorithm:!0,ToolBar:!0,Tooltip:!0,TimeBar:!0,ImageMinimap:!0,EdgeFilterLens:!0,SnapLine:!0,Legend:!0,Annotation:!0,Arrow:!0,Marker:!0,Shape:!0,Graph:!0,TreeGraph:!0,TreeLayout:!0,Layout:!0,registerLayout:!0,Global:!0,Util:!0},o=(t.Annotation=t.Algorithm=void 0,Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return i.Arrow}}),t.Fisheye=t.EdgeFilterLens=t.Bundling=void 0,Object.defineProperty(t,"Global",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Graph",{enumerable:!0,get:function(){return l.default}}),t.ImageMinimap=t.Grid=void 0,Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return f.Layout}}),t.Legend=void 0,Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return i.Marker}}),t.Minimap=t.Menu=void 0,Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return i.Shape}}),t.Tooltip=t.ToolBar=t.TimeBar=t.SnapLine=void 0,Object.defineProperty(t,"TreeGraph",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"TreeLayout",{enumerable:!0,get:function(){return f.TreeLayout}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return p.default}}),t.default=void 0,Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return f.registerLayout}}),n(97582)),i=n(48122),s=(Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),b(n(81366))),u=b(n(26765)),l=v(n(99042)),c=v(n(83701)),f=n(39849),h=v(n(31339)),p=v(n(85698)),d=v(n(27419)),y=(n(68950),n(5312),n(98880)),g=(Object.keys(y).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})}),n(13383));function v(e){return e&&e.__esModule?e:{default:e}}function m(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(m=function(e){return e?n:t})(e))}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=m(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}Object.keys(g).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});var n=(0,o.__assign)((0,o.__assign)({},s),u),o=(t.Algorithm=n,d.default.Grid),s=(t.Grid=o,d.default.Minimap),u=(t.Minimap=s,d.default.Bundling),o=(t.Bundling=u,d.default.Menu),s=(t.Menu=o,d.default.Fisheye),u=(t.Fisheye=s,d.default.ToolBar),o=(t.ToolBar=u,d.default.Tooltip),u=(t.Tooltip=o,d.default.TimeBar),o=(t.TimeBar=u,d.default.ImageMinimap),w=(t.ImageMinimap=o,d.default.EdgeFilterLens),_=(t.EdgeFilterLens=w,d.default.SnapLine),x=(t.SnapLine=_,d.default.Legend),x=(t.Legend=x,d.default.Annotation),d=(t.Annotation=x,{version:h.default.version,Graph:l.default,TreeGraph:c.default,Util:p.default,Layout:f.Layout,TreeLayout:f.TreeLayout,registerLayout:f.registerLayout,Global:h.default,registerBehavior:i.registerBehavior,registerCombo:i.registerCombo,registerEdge:i.registerEdge,registerNode:i.registerNode,Minimap:d.default.Minimap,Grid:d.default.Grid,Bundling:d.default.Bundling,Menu:d.default.Menu,ToolBar:d.default.ToolBar,Tooltip:d.default.Tooltip,Legend:d.default.Legend,TimeBar:u,SnapLine:_,Fisheye:s,ImageMinimap:o,EdgeFilterLens:w,Annotation:x,Algorithm:n,Arrow:i.Arrow,Marker:i.Marker,Shape:i.Shape});t.default=d},13383:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return r.Layouts}}),Object.defineProperty(t,"TreeLayout",{enumerable:!0,get:function(){return o.default}}),t.registerLayout=void 0;var r=n(16038),o=(n=n(8278))&&n.__esModule?n:{default:n};(0,r.registerLayout)("grid",r.GridLayout),(0,r.registerLayout)("random",r.RandomLayout),(0,r.registerLayout)("force",r.ForceLayout),(0,r.registerLayout)("circular",r.CircularLayout),(0,r.registerLayout)("dagre",r.DagreLayout),(0,r.registerLayout)("dagreCompound",r.DagreCompoundLayout),(0,r.registerLayout)("radial",r.RadialLayout),(0,r.registerLayout)("concentric",r.ConcentricLayout),(0,r.registerLayout)("mds",r.MDSLayout),(0,r.registerLayout)("fruchterman",r.FruchtermanLayout),(0,r.registerLayout)("fruchterman-gpu",r.FruchtermanGPULayout),(0,r.registerLayout)("gForce",r.GForceLayout),(0,r.registerLayout)("force2",r.Force2Layout),(0,r.registerLayout)("gForce-gpu",r.GForceGPULayout),(0,r.registerLayout)("comboForce",r.ComboForceLayout),(0,r.registerLayout)("comboCombined",r.ComboCombinedLayout),(0,r.registerLayout)("forceAtlas2",r.ForceAtlas2Layout),t.registerLayout=function(e,t){t.isCustomLayout=!0,r.Layouts[e]=(0,r.registerLayout)(e,t)}},8278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(6977));function o(e){return e&&e.__esModule?e:{default:e}}var i=o(n(85698)).default.radialLayout;function a(e){this.type=e.type,this.radial=e.radial,this.config=e}a.prototype.init=function(e){var t=this;this.data=e,this.radial?this.layoutMethod=function(e){e=r.default[t.type](e,t.config);return i(e),e}:this.layoutMethod=function(e){return r.default[t.type](e,t.config)}},a.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},a.prototype.layout=function(e){return this.init(e),this.execute()},t.default=a},88405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutWorker=void 0;var r=(n=n(47795))&&n.__esModule?n:{default:n};t.LayoutWorker=function(e){return new r.default(function(){var f="LAYOUT_RUN",h="LAYOUT_END",p="LAYOUT_ERROR",d="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(e){var t;(t=e.data.type)!==f&&t!==d||function(e){var t=this;switch(e.data.type){case f:var n,r=e.data,o=r.nodes,i=r.edges,r=r.layoutCfg,a=(r=void 0===r?{}:r).type;(s=layout.getLayoutByName(a))?(r.onLayoutEnd=function(){t.postMessage({type:h,nodes:o}),null!=n&&n.destroy()},(n=new s(r)).init({nodes:o,edges:i}),n.execute()):this.postMessage({type:p,message:"layout ".concat(a," not found")});break;case d:var s,u=e.data,l=u.nodes,c=(i=u.edges,u.layoutCfg),r=void 0===c?{}:c,c=u.canvas;(a=r.type,s=layout.getLayoutByName(a))?"gpu"!==a.split("-")[1]?this.postMessage({type:p,message:"layout ".concat(a," does not support GPU")}):((u=new s(r)).init({nodes:l,edges:i}),u.executeWithWorker(c,this)):this.postMessage({type:p,message:"layout ".concat(a," not found")})}}(e)}},e=void 0===e?"https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js":e)}},89996:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAYOUT_MESSAGE=void 0,t.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"}},47795:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e,t){e=e.toString(),t=new Blob(["importScripts('".concat(t,"');(").concat(e,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(t))}},27419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n=((n=n(75836))&&n.__esModule?n:{default:n}).default;t.default=n},98880:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},99121:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserName=void 0,t.getBrowserName=function(){var e=navigator.userAgent.toLowerCase();return-1<e.indexOf("firefox")?"firefox":-1<e.indexOf("safari")?"safari":-1<e.indexOf("opr")?"opera":-1<e.indexOf("chrome")?"chrome":-1<e.indexOf("trident")?"ie 11":-1<e.indexOf("ie")?"ie":"unknown"}},73297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixColor=t.getColorsWithSubjectColor=t.getColorSetsBySubjectColors=void 0;function g(e,t,n){return e=(0,v.default)(e),t=(0,v.default)(t),(0,v.default)([(1-n)*e.red()+n*t.red(),(1-n)*e.green()+n*t.green(),(1-n)*e.blue()+n*t.blue()]).rgb()}function i(e,t,n,r){return void 0===t&&(t="#fff"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===(n=void 0===n?"default":n)?(void 0===(r="rgb(150, 150, 150)")&&(r="rgb(150, 150, 150)"),i=g(n=void 0===(n=t)?"#fff":n,o=e,.05).rgb().toString(),a=g(n,o,.1).rgb().toString(),s=g(n,o,.2).rgb().toString(),u=g(n,o,.4).rgb().toString(),l=g(n,r,.02).rgb().toString(),c=g(n,r,.05).rgb().toString(),f=g(n,r,.1).rgb().toString(),h=g(n,r,.2).rgb().toString(),r=g(n,r,.3).rgb().toString(),p=(0,m.generate)(o,{theme:"default",backgroundColor:n}),d=(0,v.default)(o).hex().toLowerCase(),d=p.indexOf(d),{mainStroke:y=o,mainFill:a,activeStroke:o,activeFill:i,inactiveStroke:u,inactiveFill:i,selectedStroke:o,selectedFill:n,highlightStroke:y=-1!==d?p[d+1]:y,highlightFill:s,disableStroke:r,disableFill:c,edgeMainStroke:r,edgeActiveStroke:o,edgeInactiveStroke:h,edgeSelectedStroke:o,edgeHighlightStroke:o,edgeDisableStroke:f,comboMainStroke:r,comboMainFill:l,comboActiveStroke:o,comboActiveFill:i,comboInactiveStroke:r,comboInactiveFill:l,comboSelectedStroke:o,comboSelectedFill:l,comboHighlightStroke:y,comboHighlightFill:l,comboDisableStroke:h,comboDisableFill:c}):(void 0===(a="#777")&&(a="#777"),p=g(u=void 0===(u=t)?"#fff":u,n=e,.2).rgb().toString(),d=g(u,n,.3).rgb().toString(),s=g(u,n,.6).rgb().toString(),f=g(u,n,.8).rgb().toString(),i=g(u,a,.2).rgb().toString(),r=g(u,a,.25).rgb().toString(),o=g(u,a,.3).rgb().toString(),y=g(u,a,.4).rgb().toString(),l=g(u,a,.5).rgb().toString(),u=(0,m.generate)(n,{theme:"dark",backgroundColor:u}),h=(0,v.default)(n).hex().toLowerCase(),h=u.indexOf(h),{mainStroke:f,mainFill:p,activeStroke:c=n,activeFill:d,inactiveStroke:f,inactiveFill:p,selectedStroke:n,selectedFill:p,highlightStroke:n,highlightFill:s,disableStroke:l,disableFill:r,edgeMainStroke:a,edgeActiveStroke:n,edgeInactiveStroke:a,edgeSelectedStroke:n,edgeHighlightStroke:n,edgeDisableStroke:o,comboMainStroke:y,comboMainFill:r,comboActiveStroke:n,comboActiveFill:i,comboInactiveStroke:y,comboInactiveFill:r,comboSelectedStroke:n,comboSelectedFill:i,comboHighlightStroke:c=-1!==h?u[h+1]:c,comboHighlightFill:r,comboDisableStroke:y,comboDisableFill:i});var o,i,a,s,u,l,c,f,h,p,d,y}var r,v=(r=n(69630))&&r.__esModule?r:{default:r},m=n(17549);t.mixColor=g;t.getColorsWithSubjectColor=i,t.getColorSetsBySubjectColors=function(e,t,n,r){void 0===t&&(t="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var o=[];return e.forEach(function(e){o.push(i(e,t,n,r))}),o}},71441:function(e,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=function(t){try{return structuredClone(t)}catch(e){return function e(t,n){if(void 0===n&&(n=new WeakMap),null===t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("object"!==i(t))return t;if(n.get(t))return n.get(t);var r,o=Array.isArray(t)?[]:{};for(r in n.set(t,o),t)t.hasOwnProperty(r)&&void 0!==t[r]&&(o[r]=e(t[r],n));return o}(t)}}},59271:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gpuDetector=void 0,t.gpuDetector=function r(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=(window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']:['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']).join("\n")),e},addGetWebGLMessage:function(e){var t=void 0!==(e=e||{}).parent?e.parent:document.body,e=void 0!==e.id?e.id:"oldie",n=r().getWebGLErrorMessage();n.id=e,t.appendChild(n)}}}},97082:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneGElement=void 0,t.cloneGElement=function(e){var t=e.clone();return n(e,t),t};var n=function n(e,r){e.isGroup()&&r.isGroup()&&null!=(t=e.get("children"))&&t.forEach(function(e,t){t=r.get("children")[t];n(e,t)});var t=e.get("type"),o=r.get("type");"image"===t&&"image"===o&&(t=e.get("clipShape"))&&r.setClip({type:t.get("type"),attrs:t.attr()})}},85698:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(97582),o=c(n(73297)),i=c(n(91490)),s=c(n(59271)),u=c(n(99121)),n=n(48122);function l(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(l=function(e){return e?n:t})(e))}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=l(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}r=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},n.Util),o),i),s),u);t.default=r},91490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radialLayout=t.proccessToFunc=t.buildTextureDataWithTwoEdgeAttr=t.buildTextureDataWithOneEdgeAttr=t.buildTextureData=t.attributesToTextureData=t.arrayToTextureData=void 0;var r=n(48122),o=n(31834),l=r.Util.traverseTree;t.proccessToFunc=function(t,n){return t?(0,o.isNumber)(t)?function(e){return t}:t:function(e){return n||1}},t.buildTextureData=function(e,t){for(var n=[],r=[],o={},i=0,i=0;i<e.length;i++){var a=e[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<t.length;i++){var s=t[i];r[o[s.source]].push(o[s.target]),r[o[s.target]].push(o[s.source])}var u=0;for(i=0;i<e.length;i++){var l=r[i],c=l.length;n[4*i+2]=n.length,n[4*i+3]=l.length;for(var u=Math.max(u,l.length),f=0;f<c;++f){var h=l[f];n.push(+h)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:u}},t.buildTextureDataWithOneEdgeAttr=function(e,t,n){for(var r=[],o=[],i={},a=0,a=0;a<e.length;a++){var s=e[a];i[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),o.push([])}for(a=0;a<t.length;a++){var u=t[a];o[i[u.source]].push(i[u.target]),o[i[u.source]].push(n(u)),o[i[u.target]].push(i[u.source]),o[i[u.target]].push(n(u))}var l=0;for(a=0;a<e.length;a++){var c=o[a],f=c.length;r[4*a+2]=r.length,r[4*a+3]=f/2;for(var l=Math.max(l,f/2),h=0;h<f;++h){var p=c[h];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:l}},t.buildTextureDataWithTwoEdgeAttr=function(e,t,n,r){for(var o=[],i=[],a={},s=0,s=0;s<e.length;s++){var u=e[s];a[u.id]=s,o.push(u.x),o.push(u.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){var l=t[s];i[a[l.source]].push(a[l.target]),i[a[l.source]].push(n(l)),i[a[l.source]].push(r(l)),i[a[l.source]].push(0),i[a[l.target]].push(a[l.source]),i[a[l.target]].push(n(l)),i[a[l.target]].push(r(l)),i[a[l.target]].push(0)}var c=0;for(s=0;s<e.length;s++){var f=i[s],h=f.length;o[4*s+2]=o.length+1048576*h/4,o[4*s+3]=0;for(var c=Math.max(c,h/4),p=0;p<h;++p){var d=f[p];o.push(+d)}}for(;o.length%4!=0;)o.push(0);return{array:new Float32Array(o),maxEdgePerVetex:c}},t.attributesToTextureData=function(e,t){var r=[],o=e.length,i={};return t.forEach(function(n){e.forEach(function(e,t){if(void 0===i[n[e]]&&(i[n[e]]=Object.keys(i).length),r.push(i[n[e]]),t===o-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},t.arrayToTextureData=function(e){for(var r=[],o=e.length,t=e[0].length,n=0;n<t;n++)!function(n){e.forEach(function(e,t){if(r.push(e[n]),t===o-1)for(;r.length%4!=0;)r.push(0)})}(n);return new Float32Array(r)},t.radialLayout=function(r,e){var o={x:1/0,y:1/0},t={x:-1/0,y:-1/0},i="x",a="y",n=(e&&0<=["V","TB","BT"].indexOf(e)&&(a="x",i="y"),0),s=(l(r,function(e){return n++,e.x>t.x&&(t.x=e.x),e.x<o.x&&(o.x=e.x),e.y>t.y&&(t.y=e.y),e.y<o.y&&(o.y=e.y),!0}),2*Math.PI/n),u=t[a]-o[a];return 0==u||l(r,function(e){var t=(e[a]-o[a])/u*(2*Math.PI-s)+s,n=Math.abs("x"===i?e.x-r.x:e.y-r.y);return e.x=n*Math.cos(t),e.y=n*Math.sin(t),!0}),r}},84680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var I=n(31834),y=n(48122),R=n(39269),r=o(n(28813)),i=n(15873),n=o(n(78146));function o(e){return e&&e.__esModule?e:{default:e}}a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function L(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var a,N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=("undefined"!=typeof document&&(0,r.default)("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n"),function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return a(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var e={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};return e="click"===this.get("trigger")?N(N({},e),{"node:click":"showAnnotation","edge:click":"showAnnotation"}):e},e.prototype.getDOMContent=function(e){var t,n,r,o,i;if(!this.destroyed)return i=e.collapsed,t=e.maxWidth,n=void 0===(n=e.title)?"":n,o=e.content,e=void 0===(e=e.borderRadius)?5:e,r=i?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",o=i?"":" <p class='g6-annotation-content'>".concat(void 0===o?"":o,"</p>"),i=i?"".concat(e,"px"):"".concat(e,"px ").concat(e,"px 0 0"),'<div class="g6-annotation-wrapper" style="border-radius: '.concat(e,"px; max-width: ").concat(t,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(i,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(n,"</h4>\n          ").concat(r,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(o,"\n      </div>")},e.prototype.init=function(){var e,t,n=this;!n.destroyed&&(e=n.get("graph").getContainer(),t=n.get("container"),this.get("containerCfg")?(t=this.createContainer(),e.appendChild(t)):t=e,this.set("container",t),t=e.getBoundingClientRect(),e=new i.Canvas({container:e,width:t.right-t.left,height:t.bottom-t.top}),(0,R.modifyCSS)(e.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,I.debounce)(function(){return n.resizeCanvas(n)},100)),t=e.addGroup({id:"annotation-link-group"}),n.set("linkGroup",t),n.set("canvas",e),n.get("getTitle")||n.set("getTitle",function(e){var t=(null==(t=null==e?void 0:e.getModel)?void 0:t.call(e))||{},e=t.label,t=t.id;return e||t||"-"}),n.get("getContent")||n.set("getContent",function(e){var t,n,r;return e?(t=(n=(null==(n=e.getModel)?void 0:n.call(e))||{}).label,n=n.id,e=(r=null==(r=e.getType)?void 0:r.call(e))?"".concat(r,": "):"","".concat(e).concat(t||n||"")):"-"}),t=n.get("defaultData"))&&this.readData(t)},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var e=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),o=r.getBoundingClientRect(),i=o.left,a=o.right,s=o.top,u=o.bottom-s,l=a-i,o=e.position,a=void 0===o?"top":o,o=e.offsetX,c=void 0===o?0:o,o=e.offsetY,f=void 0===o?0:o,o=L(e,["position","offsetX","offsetY"]),h=e.height,h=void 0===h?"fit-content":h,p=e.width,n=void 0===p?n.getWidth():p,d=("100%"===h&&(h=u),"100%"===n&&(n=l),"unset"),y="unset",g={};switch(a){case"right":d="".concat(u,"px"),(g={top:0,right:0}).right+=i+c,g.top+=s+f;break;case"bottom":y="".concat(l,"px"),(g={bottom:0,left:0}).left+=i+c,g.bottom+=s+f;break;case"top":y="".concat(l,"px");case"left":d="".concat(u,"px");default:(g={top:0,left:0}).left+=i+c,g.top+=s+f}Object.keys(g).forEach(function(e){g[e]="".concat(g[e],"px")});p=(0,R.createDom)("<div class='".concat(e.className," g6-annotation-container'></div>"));return(0,R.modifyCSS)(p,N(N({position:"absolute",display:"top"===a||"bottom"===a?"inline-flex":"unset",width:(0,I.isNumber)(n)?"".concat(n,"px"):n,height:(0,I.isNumber)(h)?"".concat(h,"px"):h,maxHeight:d,maxWidth:y,overflow:"scroll"},g),o)),r.appendChild(p),p.addEventListener("scroll",function(e){t.updateLinks()}),p}},e.prototype.resizeCanvas=function(n){clearTimeout(n.resizeTimer),n.resizeTimer=setTimeout(function(){var e,t;n&&!n.destroyed&&(e=(t=n.get("container").getBoundingClientRect()).right-t.left,t=t.bottom-t.top,n.get("canvas").changeSize(e,t),n.updateOutsideCards(n))},250)},e.prototype.updateOutsideCards=function(e){var e=e||this,t=e.get("cardInfoMap")||{},n=e.get("graph"),r=n.getPointByCanvas(0,0),o=n.getPointByCanvas(n.getWidth(),n.getHeight()),r=n.getClientByPoint(r.x,r.y),a=r.x,s=r.y,r=n.getClientByPoint(o.x,o.y),u=r.x,l=r.y;Object.values(t).forEach(function(e){var t,n,r,o,i,e=e.card;e&&(n=e.style,t=c(n.left),n=c(n.top),i=(r=e.getBoundingClientRect()).width,r=r.height,u-a<(o=t)+i&&(o=u-a-i),l-s<(i=n)+r&&(i=l-s-r),n<0&&(i=0),(0,R.modifyCSS)(e,{left:"".concat(o=t<0?0:o,"px"),top:"".concat(i,"px")}))}),e.updateLinks()},e.prototype.showAnnotation=function(e){this.destroyed||(e=e.item,this.toggleAnnotation(e))},e.prototype.hideCards=function(){var e,t=this;t.destroyed||(e=t.get("cardInfoMap")||{},Object.keys(e).forEach(function(e){t.hideCard(e)}))},e.prototype.toggleAnnotation=function(e,t){var n,r,o,i,a,s,u,l,c,f,h,p,d,y,g,v,m,b,w,_,x,S,O,P,E,k,M,j,C,T,A;void 0===t&&(t={}),this.destroyed||(n=this.get("cardInfoMap")||{},r=this.get("graph"),j=this.get("container"),o=this.get("containerCfg"),P=(t=Object.assign({},this.get("cardCfg")||{},t)).minHeight,k=t.minWidth,E=t.width,x=t.height,i=void 0!==(i=t.collapsed)&&i,a=t.x,s=t.y,u=t.title,l=t.content,A=t.maxTitleLength,w=t.defaultBegin,t=L(t,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),c=this.get("linkGroup"),f=this.get("rows")||[[]],C=(y=n[p=(h=null==(h=e.isCanvas)?void 0:h.call(e))?"canvas-annotation":e.getID()]||{}).card,M=y.link,_=y.x,S=y.y,d=y.title,y=y.content,m=this.get("getTitle"),b=this.get("getContent"),g=this.get("getContentPlaceholder")||function(){return""},v=this.get("getTitlePlaceHolder")||function(){return""},g=g(e),v=v(e),m=(0,R.createDom)(this.getDOMContent(N({itemId:p,collapsed:i,title:(null==(m=d||u||(null==m?void 0:m(e)))?void 0:m.substr(0,A))||v,content:y||l||(null==b?void 0:b(e))||g},t))),A=(0,I.isNumber)(P)?"".concat(P,"px"):P,(0,R.modifyCSS)(m,{minHeight:i?"unset":A,minWidth:(0,I.isNumber)(k)?"".concat(k,"px"):k,height:x,width:E}),(b=!!C)?(null!=M&&M.remove(!0),j.replaceChild(m,C)):j.appendChild(m),o||(O=j.getBoundingClientRect()||{},void 0!==a&&void 0!==s?(_=a,S=s):b||h||(T=O.top,P=(t=w||{}).left,A=t.right,x=t.top,E=t.bottom,C=void 0===A?16:A,w=void 0===x?8:x,isNaN(P)||(C=j.scrollWidth-P),isNaN(E)||(w=j.scrollHeight-E),t=(0,I.isNumber)(k)?k:100,_=j.scrollWidth-m.scrollWidth-(f.length-1)*t-C,S=(null==(x=((A=f[f.length-1])[A.length-1]||{}).bbox)?void 0:x.bottom)-T||w),(0,R.modifyCSS)(m,{position:"absolute",left:"".concat(_,"px"),top:"".concat(S,"px"),cusor:o?"unset":"move"})),this.bindListener(m,p),P=m.getBoundingClientRect(),h||(E=D(e,P,r,this.get("canvas")),k=this.get("linkStyle"),M=c.addShape("path",{attrs:N({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:E},k)})),n[p]=N(N({},n[p]||{}),{id:p,collapsed:i,card:m,link:M,x:_,y:S,cardBBox:P,content:y||l,title:d||u,contentPlaceholder:g,titlePlaceholder:v,isCanvas:h}),this.set("cardInfoMap",n),o?(this.updateCardPositionsInConatainer(),this.updateLinks()):(j=!isNaN(a)&&!isNaN(s),b||h||j||(C=void 0===(t=O.bottom)?0:t,T=O.top,f[f.length-1].push({id:p,bbox:P}),P.top>C-T-P.height-16&&f.push([]),this.set("rows",f))),this.updateCardSize(p),null!=(A=this.get("onAnnotationChange"))&&A(n[p],b?"update":"create"))},e.prototype.updateCardPositionsInConatainer=function(){var e,r,o,t;this.destroyed||(e=this.get("cardInfoMap"))&&(t=this.get("container"),r=this.get("containerCfg").position,o=t.getBoundingClientRect().width,t=getComputedStyle(t),t=c(t.paddingLeft)+c(t.paddingRight),o-=t,Object.values(e).forEach(function(e){var t=e.card,n=t.getBoundingClientRect().width;switch(r){case"right":(0,R.modifyCSS)(t,{marginLeft:o?"".concat(o-n,"px"):"0px"});break;case"top":case"bottom":(0,R.modifyCSS)(t,{marginLeft:"8px"})}}))},e.prototype.handleExpandCollapseCard=function(e){var t,n,r;this.destroyed||(r=this.get("graph"),(t=this.get("cardInfoMap"))&&(n=t[e].collapsed,r=r.findById(e))&&("hide"!==this.get("cardCfg").collapseType||n?this.toggleAnnotation(r,{collapsed:!n}):this.hideCard(e),t[e]=N(N({},t[e]),{collapsed:!n})))},e.prototype.hideCard=function(e){var t,n,r;this.destroyed||(t=this.get("cardInfoMap"))&&t[e]&&(n=(r=t[e]).card,r=r.link,(0,R.modifyCSS)(n,{display:"none"}),null!=r&&r.hide(),this.get("onAnnotationChange")(t[e],"hide"))},e.prototype.removeCard=function(e){var t,n,r,o;this.destroyed||(t=this.get("cardInfoMap"))&&(r=(n=t[e]).card,o=n.link,this.get("container").removeChild(r),null!=o&&o.remove(!0),delete t[e],this.get("onAnnotationChange")(n,"remove"))},e.prototype.bindListener=function(n,y){var r,g=this;this.destroyed||(n.addEventListener("mousemove",function(e){var t,n;"g6-annotation-collapse"===e.target.className?t="collapse":"g6-annotation-expand"===e.target.className?t="expand":"g6-annotation-close"===e.target.className&&(t="close"),t&&(void 0===(n=g.get("cardCfg").onMouseEnterIcon)?function(){}:n)(e,y,t)}),n.addEventListener("mouseout",function(e){var t,n;"g6-annotation-collapse"===e.target.className?t="collapse":"g6-annotation-expand"===e.target.className?t="expand":"g6-annotation-close"===e.target.className&&(t="close"),t&&(void 0===(n=g.get("cardCfg").onMouseLeaveIcon)?function(){}:n)(e,y,t)}),n.addEventListener("mouseenter",function(e){var t,n,r,o=g.get("cardInfoMap");o&&((r=(n=g.get("graph")).findById(y))&&(t=g.get("itemHighlightState"),n.setItemState(r,t,!0)),n=o[y].link)&&(r=g.get("linkHighlightStyle")||{},n.attr(r))}),n.addEventListener("mouseleave",function(e){var t,n,r,o,i=g.get("cardInfoMap");i&&((o=(r=g.get("graph")).findById(y))&&(t=g.get("itemHighlightState"),r.setItemState(o,t,!1)),n=i[y].link)&&(r=g.get("linkHighlightStyle")||{},Object.keys(r).forEach(function(e){n.attr(e,void 0),n.attr(e,void 0)}),o=g.get("linkStyle"),n.attr(o))}),n.addEventListener("click",function(e){var t=(g.get("cardCfg")||{}).onClickIcon;"g6-annotation-collapse"===e.target.className||"g6-annotation-expand"===e.target.className?("hide"===g.get("cardCfg").collapseType?g.hideCard(y):g.handleExpandCollapseCard(y),null!=t&&t(e,y,"g6-annotation-collapse"===e.target.className?"collapse":"expand")):"g6-annotation-close"===e.target.className&&("remove"===g.get("cardCfg").closeType?g.removeCard(y):g.hideCard(y),null!=t)&&t(e,y,"close")}),this.get("editable")&&n.addEventListener("dblclick",function(e){var n,r,o,i,t,a,s,u=g.get("cardInfoMap"),l=(g.get("cardCfg")||{}).maxTitleLength,l=void 0===l?20:l;!u||"g6-annotation-title"!==(e=(n=e.target).className)&&"g6-annotation-content"!==e||(t=(a=("g6-annotation-title"===e?n:n.parentNode).getBoundingClientRect()).width,a=a.height,s=getComputedStyle(n),r=(0,R.createDom)("<".concat("g6-annotation-title"===e?"input":"textarea",' class="').concat(e,'-input" type="textarea" style="width:').concat(t,"px; height: ").concat(a,'px; min-width: 16px;"/>')),(o=(0,R.createDom)('<div class="'.concat(e,'-input-wrapper" style="width: ').concat(t,"px; height: ").concat(a,"px; min-width: 16px; margin-right: ").concat(s.marginRight,'" />'))).appendChild(r),n.parentNode.replaceChild(o,n),t=(i=u[y]).contentPlaceholder,a=i.titlePlaceholder,s=i.content,u=i.title,s=s,"g6-annotation-title"===e?(r.name="title",r.maxLength=l,s=u):r.name="content",s?(r.innerHTML=n.innerHTML,r.value=n.innerHTML):r.placeholder="g6-annotation-title"===e?a:t,r.focus(),r.addEventListener("blur",function(e){r.value&&(n.innerHTML=r.value,i[r.name||"title"]=r.value),o.parentNode.replaceChild(n,o),g.updateCardSize(y);var t=g.get("onAnnotationChange");null!=t&&t(i,"update")}))}),r=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"],n.draggable=!0,n.addEventListener("dragstart",function(e){var t=e.target.className;r.includes(t)||(t=n.style,g.set("dragging",{card:n,x:e.clientX,y:e.clientY,left:c(t.left),top:c(t.top)}))}),n.addEventListener("drag",function(e){e.preventDefault();var t,n,r,o,i,a,s,u,l,c,f,h,p,d=g.get("cardInfoMap");d&&(t=e.clientX,e=e.clientY,a=g.get("dragging"),isNaN(t)||isNaN(e)||!a||(n=a.x,r=a.y,o=a.left,i=a.top,a=a.card,o+=p=t-n,i+=s=e-r,l=(u=g.get("graph")).getPointByCanvas(0,0),c=u.getPointByCanvas(u.getWidth(),u.getHeight()),h=(l=u.getClientByPoint(l.x,l.y)).x,l=l.y,f=(c=u.getClientByPoint(c.x,c.y)).x,c=c.y,(f-h-((f=a.getBoundingClientRect()).right-f.left)<o&&0<p||o<0&&p<0)&&(o-=p),(c-l-(f.bottom-f.top)<i&&0<s||i<0&&s<0)&&(i-=s),(0,R.modifyCSS)(a,{left:"".concat(o,"px"),top:"".concat(i,"px"),visibility:"hidden"}),n=t,r=e,(h=(d[y]||{}).link)&&(p=u.findById(y),h.attr("path",D(p,f,u,g.get("canvas")))),g.set("dragging",{x:n,y:r,left:o,top:i,card:a})))}),n.addEventListener("dragend",function(e){var t,n,r,o=g.get("cardInfoMap");o&&(t=g.get("dragging"))&&(n=t.left,r=t.top,t=t.card,o[y].x=n,o[y].y=r,(0,R.modifyCSS)(t,{visibility:"visible"}),g.set("dragging",!1),null!=(n=g.get("rows"))&&n.forEach(function(e){for(var t=e.length-1;0<=t;t--)e[t].id===y&&e.splice(t,1)}),null!=(r=g.get("onAnnotationChange")))&&r(o[y],"update")}))},e.prototype.updateCardSize=function(e){var t,n,r=this.get("cardInfoMap");r&&(e=(r=r[e].card).getBoundingClientRect().width,r=r.getElementsByClassName("g6-annotation-title")[0])&&(t=getComputedStyle(r),t=c(t.marginLeft),n=r.getBoundingClientRect().width,(0,R.modifyCSS)(r,{marginRight:"".concat(e-t-24-16-n,"px")}))},e.prototype.updateLink=function(e){var t,n,r,o,e=e.item;e&&(o=this.get("cardInfoMap"))&&(t=this.get("canvas"),n=this.get("graph"),r=(o=o[e.getID()]||{}).link,o=o.card,r)&&(e=D(e,o.getBoundingClientRect(),n,t),r.attr("path",e))},e.prototype.updateLinks=function(){var e,t,n=this;this.destroyed||(e=this.get("cardInfoMap"))&&(t=this.get("graph"),Object.values(e).forEach(function(e){e=e.id,e=t.findById(e);n.updateLink({item:e})}))},e.prototype.onGraphDataChange=function(){var r,o=this,e=this.get("cardInfoMap");e&&(r=this.get("graph"),Object.values(e).forEach(function(e){var t=e.id,n=e.card,e=e.isCanvas;n&&!e&&"none"!==n.style.display&&((e=r.findById(t))&&e.isVisible()?o.toggleAnnotation(e):o.hideCard(t))}))},e.prototype.onGraphItemVisibilityChange=function(e){var t,n=e.item,e=e.visible;n&&!n.destroyed&&(t=this.get("cardInfoMap"))&&t[t=n.getID()]&&!e&&this.hideCard(t)},e.prototype.saveData=function(u){void 0===u&&(u=!1);var l,c,f,h,e=this.get("cardInfoMap");if(e)return l=this.get("graph"),c=this.get("getTitle"),f=this.get("getContent"),h=[],Object.values(e).forEach(function(e){var t,n=e.title,r=e.content,o=e.x,i=e.y,a=e.id,s=e.collapsed,e=e.card;e&&"none"===e.style.display&&!u||(t=l.findById(a)||l.get("canvas"),h.push({id:a,x:o,y:i,collapsed:s,title:n||(null==c?void 0:c(t)),content:r||(null==f?void 0:f(t)),visible:e&&"none"!==e.style.display}))}),h},e.prototype.readData=function(e){var l=this,c=this.get("graph");e.forEach(function(e){var t=e.id,n=e.x,r=e.y,o=e.title,i=e.content,a=e.collapsed,s=e.visible,u=c.findById(t);(u=u||"canvas-annotation"!==t?u:c.get("canvas"))?(l.toggleAnnotation(u,{x:n,y:r,title:o,content:i,collapsed:a}),s||l.hideCard(t)):((u=l.get("cardInfoMap")||{})[t]=e,l.set("cardInfoMap",u))})},e.prototype.clear=function(){var n,e=this.get("cardInfoMap");e&&(n=this.get("container"),Object.values(e).forEach(function(e){var t=e.card,e=e.link;n.removeChild(t),null!=e&&e.remove(!0)}),this.set("cardInfoMap",{}))},e.prototype.destroy=function(){this.clear(),null!=(e=this.get("canvas"))&&e.destroy();var e=this.get("graph");e&&!e.destroyed&&(this.get("containerCfg")&&e.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(n.default)),D=(t.default=r,function(e,t,r,o){i="edge"===e.getType()?[e.getKeyShape().getPoint(.5)]:(h=(d=null==(d=e.getKeyShape)?void 0:d.call(e).getBBox()).minX,f=d.minY,p=d.maxX,d=d.maxY,{left:{x:h+=c=(e=e.getModel()).x,y:((f+=e=e.y)+(d+=e))/2},right:{x:p+=c,y:(f+d)/2},top:{x:(h+p)/2,y:f},bottom:{x:(h+p)/2,y:d}}),Object.keys(i).forEach(function(e){var t=i[e],n=t.x,t=t.y,n=r.getClientByPoint(n,t);i[e]=o.getPointByClient(n.x,n.y)});var i,n,a,s,u,l,e=t.top,c=void 0===e?0:e,f=t.left,h=void 0===f?0:f,p=t.right,d=void 0===p?0:p,e=t.bottom,f=void 0===e?0:e,p={left:o.getPointByClient(h,(c+f)/2),right:o.getPointByClient(d,(c+f)/2),top:o.getPointByClient((h+d)/2,c),bottom:o.getPointByClient((h+d)/2,f)};return n=i,a=p,l=1/0,Object.keys(n).forEach(function(e){var r=n[e];Object.keys(a).forEach(function(e){var e=a[e],t=r.x-e.x,n=r.y-e.y,t=t*t+n*n;t<l&&(l=t,s=r,u=e)})}),t=y.Util.getControlPoint(s,u,.5,20),[["M",s.x,s.y],["Q",t.x,t.y,u.x,u.y]]}),c=function(e){return Number(e.replace(/\s+|px/gi,""))||0}},78146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(31834);function r(e){this._cfgs=(0,i.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}r.prototype.getDefaultCfgs=function(){return{}},r.prototype.initPlugin=function(n){var r=this,e=(r.set("graph",n),r.getEvents()),o={};(0,i.each)(e,function(e,t){e=(0,i.wrapBehavior)(r,e);o[t]=e,n.on(t,e)}),this._events=o,this.init()},r.prototype.getEvents=function(){return{}},r.prototype.get=function(e){var t;return null==(t=this._cfgs)?void 0:t[e]},r.prototype.set=function(e,t){this._cfgs[e]=t},r.prototype.destroy=function(){},r.prototype.destroyPlugin=function(){this.destroy();var n=this.get("graph"),e=this._events;(0,i.each)(e,function(e,t){n.off(t,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},t.default=r},43688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=(n=n(78146))&&n.__esModule?n:{default:n};i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function f(e,t,n){var r=e.x-t.x,e=e.y-t.y;return!n||Math.abs(r)>n||Math.abs(e)>n?Math.sqrt(r*r+e*e):n}function a(e,t){var n=(t.source.y-t.target.y)/(t.source.x-t.target.x),e=(n*n*t.source.x+n*(e.y-t.source.y)+e.x)/(n*n+1);return{x:e,y:n*(e-t.source.x)+t.source.y}}n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var e=this.get("graph"),t=this.get("onTick");this.set("tick",function(){t&&t(),e.refreshPositions()})},e.prototype.bundling=function(e){var i=this;if(i.set("data",e),!i.isTicking()){var t=e.edges||[],a={},n=!1;if((e.nodes||[]).forEach(function(e){null!==e.x&&null!==!e.y&&void 0!==e.x?e.y:n=!0,a[e.id]=e}),n)throw new Error("please layout the graph or assign x and y for nodes first");i.set("nodeIdMap",a);var s=i.get("divisions"),r=i.get("divRate"),u=i.divideEdges(s),e=(i.set("edgePoints",u),i.getEdgeBundles());i.set("edgeBundles",e);for(var o=i.get("cycles"),l=i.get("iterations"),c=i.get("iterRate"),f=i.get("lambda"),h=0;h<o;h++){for(var p=0;p<l;p++)!function(){var o=[];t.forEach(function(e,t){if(e.source!==e.target){var n=a[e.source],e=a[e.target];o[t]=i.getEdgeForces({source:n,target:e},t,s,f);for(var r=0;r<s+1;r++)u[t][r].x+=o[t][r].x,u[t][r].y+=o[t][r].y}})}();f/=2,s*=r,l*=c,u=i.divideEdges(s),i.set("edgePoints",u)}t.forEach(function(e,t){e.source!==e.target&&(e.type="polyline",e.controlPoints=u[t].slice(1,u[t].length-1))}),i.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e,n=this,r=t.data;r&&n.set("data",r),n.get("ticking")&&n.set("ticking",!1),Object.keys(t).forEach(function(e){n.set(e,t[e])}),t.onTick&&(e=this.get("graph"),n.set("tick",function(){t.onTick(),e.refresh()})),n.bundling(r)},e.prototype.divideEdges=function(r){var o=this,e=o.get("data").edges,l=o.get("nodeIdMap"),c=o.get("edgePoints");return c&&void 0!==c||(c=[]),e.forEach(function(e,i){c[i]&&void 0!==c[i]||(c[i]=[]);var t,a,s,u,n=l[e.source],e=l[e.target];1===r?(c[i].push({x:n.x,y:n.y}),c[i].push({x:.5*(n.x+e.x),y:.5*(n.y+e.y)}),c[i].push({x:e.x,y:e.y})):(a=(null!=(t=c[i])&&t.length?o.getEdgeLength(c[i]):f({x:n.x,y:n.y},{x:e.x,y:e.y}))/(r+1),s=a,u=[{x:n.x,y:n.y}],c[i].forEach(function(e,t){if(0!==t){for(var n=f(e,c[i][t-1]);s<n;){var r=s/n,o={x:c[i][t-1].x,y:c[i][t-1].y};o.x+=r*(e.x-c[i][t-1].x),o.y+=r*(e.y-c[i][t-1].y),u.push(o),n-=s,s=a}s-=n}}),u.push({x:e.x,y:e.y}),c[i]=u)}),c},e.prototype.getEdgeLength=function(n){var r=0;return n.forEach(function(e,t){0!==t&&(r+=f(e,n[t-1]))}),r},e.prototype.getEdgeBundles=function(){var a=this,t=a.get("data").edges||[],s=a.get("bundleThreshold"),u=a.get("nodeIdMap"),l=(l=a.get("edgeBundles"))||[];return t.forEach(function(e,t){l[t]&&void 0!==l[t]||(l[t]=[])}),t.forEach(function(e,r){var o=u[e.source],i=u[e.target];t.forEach(function(e,t){var n;t<=r||(n=u[e.source],e=u[e.target],a.getBundleScore({source:o,target:i},{source:n,target:e})>=s&&(l[r].push(t),l[t].push(r)))})}),l},e.prototype.getBundleScore=function(e,t){return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.length=f({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),t.length=f({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),this.getAngleScore(e,t)*this.getScaleScore(e,t)*this.getPositionScore(e,t)*this.getVisibilityScore(e,t)},e.prototype.getAngleScore=function(e,t){return n={x:e.vx,y:e.vy},r={x:t.vx,y:t.vy},(n.x*r.x+n.y*r.y)/(e.length*t.length);var n,r},e.prototype.getScaleScore=function(e,t){var n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n)},e.prototype.getPositionScore=function(e,t){var n=(e.length+t.length)/2;return n/(n+f({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2}))},e.prototype.getVisibilityScore=function(e,t){var n=this.getEdgeVisibility(e,t),t=this.getEdgeVisibility(t,e);return n<t?n:t},e.prototype.getEdgeVisibility=function(e,t){var n=a(t.source,e),t=a(t.target,e),r={x:(n.x+t.x)/2,y:(n.y+t.y)/2},e={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*f(r,e)/f(n,t))},e.prototype.getEdgeForces=function(e,t,n,r){for(var o=this.get("edgePoints"),i=this.get("K")/(f(e.source,e.target)*(n+1)),a=[{x:0,y:0}],s=1;s<n;s++){var u={x:0,y:0},l=this.getSpringForce({pre:o[t][s-1],cur:o[t][s],next:o[t][s+1]},i),c=this.getElectrostaticForce(s,t);u.x=r*(l.x+c.x),u.y=r*(l.y+c.y),a.push(u)}return a.push({x:0,y:0}),a},e.prototype.getSpringForce=function(e,t){var n=e.pre.x+e.next.x-2*e.cur.x,e=e.pre.y+e.next.y-2*e.cur.y;return{x:n*=t,y:e*=t}},e.prototype.getElectrostaticForce=function(n,r){var o=this.get("eps"),e=this.get("edgeBundles"),i=this.get("edgePoints"),a={x:0,y:0};return e[r].forEach(function(e){var t={x:i[e][n].x-i[r][n].x,y:i[e][n].y-i[r][n].y};(Math.abs(t.x)>o||Math.abs(t.y)>o)&&(e=1/f(i[e][n],i[r][n]),a.x+=t.x*e,a.y+=t.y*e)}),a},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(n.default);t.default=n},41239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(31834),r=n(48122),n=(n=n(78146))&&n.__esModule?n:{default:n},s=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),p=r.Util.distance,u={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},r=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,a.clone)(u),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},e.prototype.init=function(){var e=this.get("showLabel"),t="edge"===e||"both"===e;this.set("showNodeLabel","node"===e||"both"===e),this.set("showEdgeLabel",t),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(e){var t=this,n=t.get("delegate");n&&!n.destroyed||(t.filter(e),(n=t.get("delegate")).on("dragstart",function(e){}),n.on("drag",function(e){t.filter(e)}),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",function(e){t.scaleRByWheel(e)}))},e.prototype.scaleRByWheel=function(e){var t,n,r,o,i;e&&e.originalEvent&&(e.preventDefault&&e.preventDefault(),t=this.get("graph"),(n=this.get("delegate"))?(n.attr("x"),n.attr("y")):t.getPointByClient(e.clientX,e.clientY),n=e.originalEvent.wheelDelta<0?.95:1/.95,r=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(r||t.get("height"))&&1<n||i<(o||.05*t.get("height"))&&n<1)&&(n=1),this.set("r",i*=n),this.filter(e))},e.prototype.filter=function(e){var t=this.get("graph"),n=t.getNodes(),o={},i=this.get("r"),a=this.get("type"),s={x:e.x,y:e.y},u=(this.updateDelegate(s,i),this.get("shouldShow")),l=this.get("vShapes"),c=(l&&l.forEach(function(e){e.remove(),e.destroy()}),l=[],n.forEach(function(e){var t=e.getModel(),n=t.x,r=t.y;p({x:n,y:r},s)<i&&(o[t.id]=e)}),[]),r=(t.getEdges().forEach(function(e){var t=e.getModel(),n=t.source,r=t.target;u(t)&&("only-source"===a||"one"===a?o[n]&&!o[r]&&c.push(e):"only-target"===a||"one"===a?o[r]&&!o[n]&&c.push(e):"both"===a&&o[n]&&o[r]&&c.push(e))}),this.get("showNodeLabel")),f=this.get("showEdgelabel"),h=t.get("group");c.forEach(function(e){e.get("group").get("children").forEach(function(e){var t=e.get("type"),e=h.addShape(t,{attrs:e.attr()});l.push(e),r&&"text"===t&&e.set("visible",!0)})}),Object.keys(o).forEach(function(e){e=o[e].get("group").clone();if(h.add(e),l.push(e),f)for(var t=e.get("children"),n=0;n<t.length;n++){var r=t[n];"text"===r.get("type")&&r.set("visible",!0)}}),this.set("vShapes",l)},e.prototype.updateParams=function(e){var t=e.r,n=e.trigger,r=e.minR,o=e.maxR,i=e.scaleRBy,a=e.showLabel,s=e.shouldShow;isNaN(e.r)||this.set("r",t),isNaN(o)||this.set("maxR",o),isNaN(r)||this.set("minR",r),"mousemove"!==n&&"click"!==n||this.set("trigger",n),("wheel"===i||"unset"===i)&&(this.set("scaleRBy",i),this.get("delegate").remove(),this.get("delegate").destroy(),e=this.get("dPercentText"))&&(e.remove(),e.destroy()),"node"!==a&&"both"!==a||this.set("showNodeLabel",!0),"edge"!==a&&"both"!==a||this.set("showEdgeLabel",!0),s&&this.set("shouldShow",s)},e.prototype.updateDelegate=function(e,t){var n,r=this,o=r.get("graph"),i=r.get("delegate");!i||i.destroyed?(o=o.get("group"),n=r.get("delegateStyle")||u,i=o.addShape("circle",{attrs:s({r:t,x:e.x,y:e.y},n),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",function(e){r.scaleRByWheel(e)})):i.attr({x:e.x,y:e.y,r:t}),r.set("delegate",i)},e.prototype.clear=function(){var e=this.get("vShapes"),e=(e&&e.forEach(function(e){e.remove(),e.destroy()}),this.set("vShapes",e=[]),this.get("delegate"));e&&!e.destroyed&&(e.remove(),e.destroy())},e.prototype.destroy=function(){this.clear()},e}(n.default);t.default=r},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(31834),n=(n=n(78146))&&n.__esModule?n:{default:n},u=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),l={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,a.clone)(l),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},e.prototype.init=function(){var e=this.get("r"),t=(this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",e*e),this.get("d"));this.set("molecularParam",(t+1)*e)},e.prototype.createDelegate=function(e){var t=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(e),(r=n.get("delegate")).on("dragstart",function(e){n.set("delegateCenterDiff",{x:r.attr("x")-e.x,y:r.attr("y")-e.y})}),r.on("drag",function(e){n.magnify(e)}),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",function(e){t.scaleDByWheel(e)}),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",function(e){n.scaleRByWheel(e)}))},e.prototype.scaleRByWheel=function(e){var t,n,r,o,i,a;e&&e.originalEvent&&(e.preventDefault&&e.preventDefault(),t=this.get("graph"),n=((n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0)||t.getPointByClient(e.clientX,e.clientY),r=e.originalEvent.wheelDelta<0?.95:1/.95,a=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(a||t.get("height"))&&1<r||i<(o||.05*t.get("height"))&&r<1)&&(r=1),this.set("r",i*=r),this.set("r2",i*i),a=this.get("d"),this.set("molecularParam",(a+1)*i),this.set("delegateCenterDiff",void 0),this.magnify(e,n))},e.prototype.scaleRByDrag=function(e){var t,n,r,o,i,a;e&&(r=this.get("dragPrePos"),n=(t=this.get("graph")).getPointByClient(e.clientX,e.clientY),r=e.x-r.x<0?.95:1/.95,a=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(a||t.get("height"))&&1<r||i<(o||.05*t.get("height"))&&r<1)&&(r=1),this.set("r",i*=r),this.set("r2",i*i),a=this.get("d"),this.set("molecularParam",(a+1)*i),this.magnify(e,n),this.set("dragPrePos",{x:e.x,y:e.y}))},e.prototype.scaleDByWheel=function(e){var t,n,r;(e||e.originalEvent)&&(e.preventDefault&&e.preventDefault(),r=e.originalEvent.wheelDelta<(r=0)?-.1:.1,r=this.get("d")+r,t=this.get("maxD"),n=this.get("minD"),r<t)&&n<r&&(this.set("d",r),t=this.get("r"),this.set("molecularParam",(r+1)*t),r=(n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0,this.set("delegateCenterDiff",void 0),this.magnify(e,r))},e.prototype.scaleDByDrag=function(e){var t=this.get("dragPrePos"),t=0<e.x-t.x?.1:-.1,t=this.get("d")+t,n=this.get("maxD"),r=this.get("minD");t<n&&r<t&&(this.set("d",t),n=this.get("r"),this.set("molecularParam",(t+1)*n),this.magnify(e)),this.set("dragPrePos",{x:e.x,y:e.y})},e.prototype.magnify=function(e,t){this.restoreCache();var n=this.get("graph"),r=this.get("cachedMagnifiedModels"),o=this.get("cachedOriginPositions"),i=this.get("showLabel"),a=this.get("r"),s=this.get("r2"),u=this.get("d"),l=this.get("molecularParam"),c=n.getNodes(),f=c.length,h=t?{x:t.x,y:t.y}:{x:e.x,y:e.y},t=(!this.get("dragging")||"mousemove"!==this.get("trigger")&&"click"!==this.get("trigger")||(h=this.get("cacheCenter")),this.get("delegateCenterDiff"));t&&(h.x+=t.x,h.y+=t.y),this.updateDelegate(h,a);for(var p=0;p<f;p++){var d=c[p].getModel(),y=d.x,g=d.y;if(!isNaN(y)&&!isNaN(g)){var v=(y-h.x)*(y-h.x)+(g-h.y)*(g-h.y);if(!isNaN(v)&&v<s&&0!=v){var v=Math.sqrt(v),m=l*v/(u*v+a),b=(y-h.x)/v,w=(g-h.y)/v;if(d.x=b*m+h.x,d.y=w*m+h.y,o[d.id]||(o[d.id]={x:y,y:g,texts:[]}),r.push(d),i&&2*v<a)for(var _=c[p].getContainer().getChildren(),x=_.length,S=0;S<x;S++){var O=_[S];"text"===O.get("type")&&(o[d.id].texts.push({visible:O.get("visible"),shape:O}),O.set("visible",!0))}}}}n.refreshPositions()},e.prototype.restoreCache=function(){for(var e=this.get("cachedMagnifiedModels"),t=this.get("cachedOriginPositions"),n=e.length,r=0;r<n;r++){var o=e[r],i=t[o.id];o.x=i.x,o.y=i.y;for(var a=i.texts.length,s=0;s<a;s++){var u=i.texts[s];u.shape.set("visible",u.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},e.prototype.updateParams=function(e){var t=e.r,n=e.d,r=e.trigger,o=e.minD,i=e.maxD,a=e.minR,s=e.maxR,u=e.scaleDBy,l=e.scaleRBy;isNaN(e.r)||(this.set("r",t),this.set("r2",t*t)),isNaN(n)||this.set("d",n),isNaN(i)||this.set("maxD",i),isNaN(o)||this.set("minD",o),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a);var c,e=this.get("d"),t=this.get("r");this.set("molecularParam",(e+1)*t),"mousemove"!==r&&"click"!==r&&"drag"!==r||this.set("trigger",r),("drag"===u||"wheel"===u||"unset"===u)&&(this.set("scaleDBy",u),this.get("delegate").remove(),this.get("delegate").destroy(),c=this.get("dPercentText"))&&(c.remove(),c.destroy()),("drag"===l||"wheel"===l||"unset"===l)&&(this.set("scaleRBy",l),this.get("delegate").remove(),this.get("delegate").destroy(),c=this.get("dPercentText"))&&(c.remove(),c.destroy())},e.prototype.updateDelegate=function(e,t){var n,r,o=this,i=this,a=i.get("graph"),s=i.get("delegate");!s||s.destroyed?(n=a.get("group"),r=i.get("delegateStyle")||l,s=n.addShape("circle",{attrs:u({r:t/1.5,x:e.x,y:e.y},r),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?s.on("mousewheel",function(e){i.scaleRByWheel(e)}):"drag"===this.get("scaleRBy")&&(s.on("dragstart",function(e){i.set("dragging",!0),i.set("cacheCenter",{x:e.x,y:e.y}),i.set("dragPrePos",{x:e.x,y:e.y})}),s.on("drag",function(e){i.scaleRByDrag(e)}),s.on("dragend",function(e){i.set("dragging",!1)})),"wheel"===this.get("scaleDBy")?s.on("mousewheel",function(e){o.scaleDByWheel(e)}):"drag"===this.get("scaleDBy")&&(s.on("dragstart",function(e){i.set("dragging",!0),i.set("cacheCenter",{x:e.x,y:e.y}),i.set("dragPrePos",{x:e.x,y:e.y})}),s.on("drag",function(e){o.scaleDByDrag(e)}),s.on("dragend",function(e){i.set("dragging",!1)})))):s.attr({x:e.x,y:e.y,r:t/1.5}),i.get("showDPercent")&&(n=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),r=i.get("dPercentText"),t=e.y+t/1.5+16,!r||r.destroyed?(r=a.get("group").addShape("text",{attrs:{text:"".concat(n,"%"),x:e.x,y:t,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",r)):r.attr({text:"".concat(n,"%"),x:e.x,y:t})),i.set("delegate",s)},e.prototype.clear=function(){var e=this.get("graph"),e=(this.restoreCache(),e.refreshPositions(),this.get("delegate")),e=(e&&!e.destroyed&&(e.remove(),e.destroy()),this.get("dPercentText"));e&&!e.destroyed&&(e.remove(),e.destroy())},e.prototype.destroy=function(){this.clear()},e}(n.default);t.default=n},90687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(39269),n=(n=n(78146))&&n.__esModule?n:{default:n},s=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)"),n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{img:s,follow:!0}},e.prototype.init=function(){var e=this.get("graph"),t=e.get("container"),e=e.get("canvas").get("el"),n=this.get("img")||s,r=(n.includes("url(")||(n='url("'.concat(n,'")')),(0,a.createDom)("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>")),n=(0,a.createDom)("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(n,";\n        user-select: none\n        '></div>"));this.set("container",r),this.set("gridContainer",n),this.positionInit(),r.appendChild(n),t.insertBefore(r,e)},e.prototype.positionInit=function(){var e=this.get("graph"),t=e.get("minZoom"),n=e.get("width"),e=e.get("height"),n=((0,a.modifyCSS)(this.get("container"),{width:"".concat(n,"px"),height:"".concat(e,"px")}),80*n/t),e=80*e/t;(0,a.modifyCSS)(this.get("gridContainer"),{width:"".concat(n,"px"),height:"".concat(e,"px"),left:"-".concat(n/2,"px"),top:"-".concat(e/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(e){var t=this.get("gridContainer"),e=(e=e.matrix)||[1,0,0,0,1,0,0,0,1],n=this.get("follow"),n="matrix(".concat(e[0],", ").concat(e[1],", ").concat(e[3],", ").concat(e[4],", ").concat(n?e[6]:"0",", ").concat(n?e[7]:"0",")");(0,a.modifyCSS)(t,{transform:n})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var e=this.get("graph").get("container"),t=this.get("container");e.removeChild(t)},e}(n.default);t.default=n},11091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(r=n(78146))&&r.__esModule?r:{default:r},v=n(31834),m=n(39269),o=n(48122),f=n(43708),h=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},o.Util.applyMatrix),n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var e,i,a,s,u,l,c,f,h,p,d,y=this,r=this._cfgs,g=r.graph;this.destroyed||(e=this.get("container"),(0,v.isString)(e)&&(e=document.getElementById(e)),i=(0,m.createDom)("<div class=".concat(r.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),u=!1,d=p=h=f=c=l=s=a=0,e.addEventListener("mousedown",function(e){var t,n;r.refresh=!1,e.target===i&&(t=i.style,f=parseInt(t.width,10),h=parseInt(t.height,10),t=y.get("width"),n=y.get("height"),t<f||n<h||(d=g.getZoom(),p=y.get("ratio"),u=!0,a=e.clientX,s=e.clientY))},!1),e.addEventListener("mousemove",function(e){var t,n,r,o;!u||(0,v.isNil)(e.clientX)||(0,v.isNil)(e.clientY)||(t=y.get("width"),n=y.get("height"),r=i.style,l=parseInt(r.left,10),c=parseInt(r.top,10),f=parseInt(r.width,10),h=parseInt(r.height,10),r=a-e.clientX,o=s-e.clientY,l-r<0?r=l:t<=l-r+f&&(r=0),c-o<0?o=c:n<=c-o+h&&(o=0),l-=r,c-=o,(0,m.modifyCSS)(i,{left:"".concat(l,"px"),top:"".concat(c,"px")}),g.translate(r*d/p,o*d/p),a=e.clientX,s=e.clientY)},!1),e.addEventListener("mouseleave",function(){u=!1,r.refresh=!0},!1),e.addEventListener("mouseup",function(){u=!1,r.refresh=!0},!1),this.set("viewport",i),e.appendChild(i))},e.prototype.updateViewport=function(){var e,t,n,r,o,i,a,s,u,l,c;this.destroyed||(e=this.get("ratio"),t=this.get("width"),n=this.get("height"),c=(s=(o=this.get("graph")).get("width"))/o.get("height"),i=[((a=(r=o.getGroup()).getCanvasBBox()).minX+a.maxX)/2,(a.minY+a.maxY)/2],l=[a.maxX-a.minX,a.maxY-a.minY],u={centerX:i[0],centerY:i[1],width:0,height:0,minX:0,minY:0},a[0]/a[1]>c?(u.width=l[0],u.height=u.width/c):(u.height=l[1],u.width=u.height*c),u.minX=i[0]-u.width/2,u.minY=i[1]-u.height/2,a=(a=r.getMatrix())||[1,0,0,0,1,0,0,0,1],l=f.mat3.invert([1,0,0,0,1,0,0,0,1],a),c=h({x:u.minX,y:u.minY},l),i=o.getCanvasByPoint(c.x,c.y),(r=this.get("viewport"))||this.initViewport(),c=(a=t*-i.x/u.width)+(o=(l=s/u.width)*t),u=(s=n*-i.y/u.height)+(i=l*n),a<0&&(o+=a,a=0),t<c&&(o-=c-t),s<0&&(i+=s,s=0),n<u&&(i-=u-n),this.set("ratio",e),l="".concat(a,"px"),c="".concat(s,"px"),(0,m.modifyCSS)(r,{left:l,top:c,width:"".concat(o,"px"),height:"".concat(i,"px")}))},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var e=this.get("graph"),t=e.get("width"),t=e.get("height")/t,n=this.get("className"),r=this.get("container"),o=this.get("width"),i=this.get("height"),t=((o=o||i?o:200)?this.set("height",i=t*o):this.set("width",o=1/t*i),(0,m.createDom)("<div class='".concat(n,"' style='width: ").concat(o,"px; height: ").concat(i,"px; overflow: hidden; position: relative;'></div>"))),n=(((r=(0,v.isString)(r)?document.getElementById(r):r)||e.get("container")).appendChild(t),this.set("container",t),(0,m.createDom)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>')),o=(t.appendChild(n),(0,m.createDom)('<span style="display: table-cell; vertical-align: middle; "></span>')),i=(n.appendChild(o),this.set("containerDOM",n),this.set("containerSpan",o),(0,m.createDom)('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />')));this.set("imgDOM",i),this.updateImgSize(),o.appendChild(i),this.updateCanvas()},e.prototype.updateImgSize=function(){var o=this.get("imgDOM"),i=this.get("width"),a=this.get("height");o.onload=function(){(r=o).naturalWidth?(e=r.naturalWidth,t=r.naturalHeight):((n=new Image).src=r.src,n.onload=function(){});var e,t,n,r=[e,t];r[1]<r[0]?o.width=i:o.height=a}},e.prototype.updateCanvas=function(){var e;this.get("refresh")&&!(e=this.get("graph")).get("destroyed")&&(this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport()),e=this.get("width")/e.get("canvas").getCanvasBBox().width,this.set("ratio",e),this.updateViewport())},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(e){this.get("imgDOM").remove(),this.set("graphImg",e);var t=(0,m.createDom)('<img alt="" src="'.concat(e,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));this.set("imgDOM",t),t.src=e,this.updateImgSize(),this.get("containerSpan").appendChild(t),this.updateCanvas()},e.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},e}(r.default);t.default=n},75836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Annotation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"Bundling",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"EdgeFilterLens",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Fisheye",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Grid",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ImageMinimap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Legend",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Menu",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Minimap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"PluginBase",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"SnapLine",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"TimeBar",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ToolBar",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var r=v(n(90687)),o=v(n(58042)),i=v(n(29953)),a=v(n(43688)),s=v(n(192)),u=v(n(42875)),l=v(n(61912)),c=v(n(74399)),f=v(n(11091)),h=v(n(41239)),p=v(n(24853)),d=v(n(78146)),y=v(n(20178)),g=v(n(84680));function v(e){return e&&e.__esModule?e:{default:e}}n={PluginBase:d.default,Menu:o.default,Grid:r.default,Minimap:i.default,Bundling:a.default,ToolBar:u.default,Tooltip:l.default,Fisheye:s.default,TimeBar:c.default,ImageMinimap:f.default,EdgeFilterLens:h.default,SnapLine:p.default,Legend:y.default,Annotation:g.default};t.default=n},20178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(39269),r=(r=n(78146))&&r.__esModule?r:{default:r},s=n(31834),g=n(48122),v=n(15873),m=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),u=["click","mouseenter"],n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{},e=(e.multiple&&"mouseenter"===e.trigger&&this.set("multiple",!1),this.get("align")),t=(e||((t=this.get("position").split("-")).includes("left")&&(e="left"),e=t.includes("right")?"right":"center",this.set("align",e)),this.get("graph").get("container")),e=(0,a.createDom)("<div class='g6-legend-container' style=\"position: absolute;\"></div>"),t=(t.appendChild(e),this.set("container",e),this.render());(0,a.modifyCSS)(e,this.getContainerPos(t)),this.bindEvents()},e.prototype.getContainerPos=function(r){void 0===r&&(r=[0,0]);var o=this.get("graph"),e=this.get("offsetX"),t=this.get("offsetY"),i=this.get("margin"),n=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(o.getWidth()-r[0])/2+0,top:(o.getHeight()-r[1])/2+0};return n.forEach(function(e){var t=i[a[e]],n=e;switch(e){case"top":case"left":t+=0;break;case"bottom":t=o.getHeight()-r[1]-t+0,n="top";break;default:t=o.getWidth()-r[0]-t+0,n="left"}s[n]=t}),s.top+=t+o.getContainer().offsetTop,s.left+=e+o.getContainer().offsetLeft,Object.keys(s).forEach(function(e){s[e]="".concat(s[e],"px")}),s},e.prototype.bindEvents=function(){var e,t=this,n=t.get("filter");n&&n.enable&&(n=n.trigger||"click",u.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click"),e=t.get("legendCanvas"),"mouseenter"===n?(e.on("node-container:mouseenter",function(e){return t.filterData(e)}),e.on("node-container:mouseleave",function(e){t.clearFilter(),t.clearActiveLegend()})):(e.on("node-container:click",function(e){return t.filterData(e)}),e.on("click",function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))},e.prototype.changeData=function(e){this.set("data",e);e=this.render();(0,a.modifyCSS)(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(e){var t=this.get("filter"),e=(null!=t&&t.multiple||this.clearActiveLegend(),e.get("parent")),e=(e.get("active")?(e.set("active",!1),this.findLegendItemsByState("active").length&&e.set("inactive",!0)):(e.set("inactive",!1),e.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(e){e.set("inactive",!0)}):this.clearActiveLegend(),(null==t?void 0:t.legendStateStyles)||{}),n=(null===e?void 0:e.inactive)||{opacity:.5,"text-shape":{opacity:.5}},r=n["text-shape"]||{},o=(this.findLegendItemsByState("inactive").forEach(function(e){var e=e.get("children"),t=e[0],e=e[1];t.attr(m(m({},t.get("oriAttrs")),n)),e.attr(m(m({},e.get("oriAttrs")),r))}),(null===e?void 0:e.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}}),i=o["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(e){var e=e.get("children"),t=e[0],e=e[1];t.attr(m(m({},t.get("oriAttrs")),o)),e.attr(m(m({},e.get("oriAttrs")),i))})},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find(function(e){return"root"===e.get("name")}),o=r.find(function(e){return"node-group"===e.get("name")}),r=r.find(function(e){return"edge-group"===e.get("name")});return"node"===e?o.get("children").filter(function(e){return!!e.get(t)===n}):"edge"===e?r.get("children").filter(function(e){return!!e.get(t)===n}):o.get("children").filter(function(e){return!!e.get(t)===n}).concat(r.get("children").filter(function(e){return!!e.get(t)===n}))},e.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find(function(e){return"root"===e.get("name")});[e.find(function(e){return"node-group"===e.get("name")}),e.find(function(e){return"edge-group"===e.get("name")})].forEach(function(e){e.get("children").forEach(function(e){e.set("active",!1),e.set("inactive",!1);var e=e.get("children"),t=e[0],e=e[1];t.attr(t.get("oriAttrs")),e.attr(e.get("oriAttrs"))})})},e.prototype.filterData=function(e){var r,o,i,t,a,s,u,n=this.get("filter"),l=null==n?void 0:n.filterFunctions;n&&l&&(t=this.get("legendCanvas"),r=this.get("graph"),o=n.graphActiveState||"active",i=n.graphInactiveState||"inactive",n=n.multiple,this.clearFilter(),n||this.clearActiveLegend(),this.activateLegend(e.target),e=(n=t.find(function(e){return"root"===e.get("name")})).find(function(e){return"node-group"===e.get("name")}),t=n.find(function(e){return"edge-group"===e.get("name")}),a=e.get("children").filter(function(e){return e.get("active")}),s=t.get("children").filter(function(e){return e.get("active")}),u=0,(n=["getNodes","getEdges"]).forEach(function(e){r[e]().forEach(function(t){var n=!1;("getNodes"===e?a:s).forEach(function(e){e=l[e.get("id")];n=n||e(t.getModel())}),n?(r.setItemState(t,i,!1),r.setItemState(t,o,!0),u++):(r.setItemState(t,o,!1),r.setItemState(t,i,!0))})}),u||n.forEach(function(e){r[e]().forEach(function(e){r.clearItemStates(e,[i])})}))},e.prototype.clearFilter=function(){var t,n,r=this.get("graph"),e=this.get("filter");e&&(t=e.graphActiveState||"active",n=e.graphInactiveState||"inactive",r.getNodes().forEach(function(e){r.clearItemStates(e,[t,n])}),r.getEdges().forEach(function(e){r.clearItemStates(e,[t,n])}))},e.prototype.render=function(){var f=this,e=(this.processData(),this.get("legendCanvas")),t=(e?e.clear():e=new v.Canvas({container:this.get("container"),width:200,height:200}),e.addGroup({name:"root"})),n=t.addGroup({name:"node-group"}),r=t.addGroup({name:"edge-group"}),o=(this.set("legendCanvas",e),this.get("itemsData")),h=[n,r];["nodes","edges"].forEach(function(l,c){o[l].forEach(function(e){var t,n=h[c].addGroup({id:e.id,name:"node-container"}),r=e.type,o=f.getShapeSize(e),i=o.width,a=o.height,s=o.r,o=f.getStyle(l.substr(0,4),e);switch(e.type){case"circle":t={r:s,x:0,y:0};break;case"rect":t={width:i,height:a,x:-i/2,y:-a/2};break;case"ellipse":t={rx:i,ry:a,x:0,y:0},r="ellipse";break;case"line":t={x1:-i/2,y1:0,x2:i/2,y2:0},r="line";break;case"quadratic":t={path:[["M",-i/2,0],["Q",0,i/2,i/2,0]]},r="path";break;case"cubic":t={path:[["M",-i/2,0],["C",-i/6,i/2,i/6,-i/2,i/2,0]]},r="path";break;case"diamond":t={path:[["M",0,-a],["L",i,0],["L",0,a],["L",-i,0],["Z"]]},r="path";break;case"triangle":t={path:[["M",-i,a],["L",0,-a],["L",i,a],["Z"]]},r="path";break;case"star":t={path:g.Util.getStarPath(3*s,1.2*s)},r="path";break;default:t={r:s,x:0,y:0}}var u,o=n.addShape(r,{attrs:m(m({},t),o),name:"".concat(e.type,"-node-keyShape"),oriAttrs:m({opacity:1},o)});e.label&&(o=o.getBBox(),u=(null==(u=e.labelCfg)?void 0:u.style)||{},u=m({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},u),n.addShape("text",{attrs:m({x:o.maxX+4,y:0,text:e.label},u),className:"legend-label",name:"".concat(e.type,"-node-text"),oriAttrs:u}))})});var i=this.get("padding"),a=t.find(function(e){return"title-container"===e.get("name")}),s={height:0,maxY:0,width:0},u=(this.get("title")&&(a=a||t.addGroup({name:"title-container"}),d={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:i[0]},p=this.get("titleConfig")||{},d=Object.assign(d,p.style||{}),d=a.addShape("text",{attrs:m({text:this.get("title")},d)}),s=a.getCanvasBBox(),a.setMatrix([1,0,0,0,1,0,p.offsetX,p.offsetY,1])),this.layoutItems(),t.getCanvasBBox(),n.getCanvasBBox()),l=[1,0,0,0,1,0,u.minX<0?Math.abs(u.minX)+i[3]:i[3],s.maxY<u.minY?Math.abs(s.maxY-u.minY)+i[0]:s.maxY+i[0],1],c=(n.setMatrix(l),[(c=t.getCanvasBBox()).minX+c.width+i[1],c.minY+c.height+i[2]]),s=(d?(p=m({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),s=a.getCanvasBBox(),y=a.getMatrix()||[1,0,0,0,1,0,0,0,1],"center"===p.position?y[6]=c[0]/2+p.offsetX:"right"===p.position?(y[6]=c[0]-i[3]+p.offsetX,d.attr({textAlign:"right"})):(y[6]=i[3]+p.offsetX,d.attr({textAlign:"left"})),a.setMatrix(y),s=a.getCanvasBBox(),l=[1,0,0,0,1,0,p=u.minX<0?Math.abs(u.minX)+i[3]:i[3],d=u.minY<s.maxY?Math.abs(s.maxY-u.minY)+i[0]:s.maxY+i[0],1],n.setMatrix(l),y=[1,0,0,0,1,0,p,d,1],"vertical"===this.get("layout")?y[6]+=u.maxX+this.get("horiSep"):y[7]+=u.maxY+this.get("vertiSep"),r.setMatrix(y)):(u=n.getCanvasBBox(),a=[1,0,0,0,1,0,0,0,1],"vertical"===this.get("layout")?a[6]+=l[6]+u.maxX+this.get("horiSep"):a[7]+=l[7]+u.maxY+this.get("vertiSep"),r.setMatrix(a)),t.getCanvasBBox(),u=n.getCanvasBBox(),l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],r.getMatrix()||[1,0,0,0,1,0,0,0,1]),p=r.getCanvasBBox(),c=[Math.max(u.width+l[6],p.width+s[6])+i[1],Math.max(u.height+l[7],p.height+s[7])+i[2]],d=(e.changeSize(c[0],c[1]),this.get("containerStyle")),y=t.getMatrix()||[1,0,0,0,1,0,0,0,1],a=g.Util.invertMatrix({x:0,y:0},y);return t.addShape("rect",{attrs:m({x:a.x+(d.lineWidth||1),y:a.y+(d.lineWidth||1),width:c[0]-2*(d.lineWidth||1),height:c[1]-2*(d.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},d),name:"legend-back-rect",capture:!1}).toBack(),c},e.prototype.layoutItems=function(){var n,e=this.get("legendCanvas"),s=this.get("horiSep"),u=this.get("vertiSep"),l=this.get("layout"),t=this.get("align"),c=[0,0],e=e.find(function(e){return"root"===e.get("name")}),r=e.find(function(e){return"node-group"===e.get("name")}),e=e.find(function(e){return"edge-group"===e.get("name")}),f={min:0,max:-1/0},h=-1/0,o=(r.get("children").forEach(function(e,t){0===t&&(f.min=c[0]);var t=e.get("children")[0],n=e.getCanvasBBox(),t=t.getBBox(),r=t.width,t=t.height,o=0,i=0,a=0,o="vertical"===l?(i=c[1],c[0]=(a=c[0]+r/2)+n.height+u,n.maxX+i+r/2):(a=c[1],c[0]=(i=c[0]+r/2)+n.width+s,n.maxY+a+t/2);f.max<c[0]&&(f.max=c[0]),h<o&&(h=o),e.setMatrix([1,0,0,0,1,0,i,a,1])}),f.max-f.min),a={min:0,max:-1/0},i=r.getCanvasBBox();c[0]=0,c[1]="vertical"===l?i.maxX+s:i.maxY+u,e.get("children").forEach(function(e,t){0===t&&(a.min=c[0]);var t=e.get("children")[0],n=e.getCanvasBBox(),t=t.getBBox(),r=t.width,t=t.height,o=0,i=0;"vertical"===l?(o=c[1],c[0]=(i=c[0])+n.height+u,e.setMatrix([1,0,0,0,1,0,0,i+t/2,1])):(i=c[1],c[0]=(o=c[0])+n.width+s,e.setMatrix([1,0,0,0,1,0,o+r/2,0,1])),a.max<c[0]&&(a.max=c[0])}),t&&""!==t&&"left"!==t&&(i=o-(a.max-a.min),n="center"===t?Math.abs(i)/2:Math.abs(i),(i<0?r:e).get("children").forEach(function(e){var t=e.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===l?t[7]+=n:t[6]+=n,e.setMatrix(t)}))},e.prototype.processData=function(){var e=this.get("data"),o={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(e,t){return e.order-t.order}),e.nodes.forEach(function(e){var t=e.size||[(null==(t=e.style)?void 0:t.width)||(null==(t=e.style)?void 0:t.r)||8,(null==(t=e.style)?void 0:t.height)||(null==(t=e.style)?void 0:t.r)||8],n=(null==(n=e.labelCfg)?void 0:n.style)||{};o.nodes.push({id:e.id||(0,s.uniqueId)(),type:e.type||"circle",style:m({},e.style),order:e.order,label:e.label,itemType:"node",size:t,labelCfg:{position:"right",style:m({fontFamily:"Arial"},n)}})})),e.edges&&(e.edges.sort(function(e,t){return e.order-t.order}),e.edges.forEach(function(e){var t=e.type||"line",n=("cubic-horizontal"===e.type&&(t="cubic"),(null==(n=e.labelCfg)?void 0:n.style)||{}),r=e.size||[(null==(r=e.style)?void 0:r.width)||8,1];o.edges.push({id:e.id||(0,s.uniqueId)(),type:t,size:r,style:m({lineWidth:(0,s.isArray)(r)?r[1]:1},e.style),order:e.order,label:e.label,itemType:"edge",labelCfg:{position:"right",style:m({fontFamily:"Arial"},n)}})})),this.set("itemsData",o)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(e){var t=this.get(e);if((0,s.isNumber)(t))this.set(e,[t,t,t,t]);else if((0,s.isArray)(t))switch(t.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[t[0],t[0],t[0],t[0]]);break;case 2:this.set(e,[t[0],t[1],t[0],t[1]]);break;case 3:this.set(e,[t[0],t[1],t[2],t[1]])}return this.get(e)},e.prototype.getShapeSize=function(e){var t,n,r;return e.size&&((0,s.isArray)(e.size)?(t=e.size[0],n=e.size[1]||e.size[0],r=e.size[0]/2):(0,s.isNumber)(e.size)&&(t=e.size,n=e.size,r=e.size/2)),r=(r=e.style&&(e.style.width&&(t=e.style.width),e.style.height&&(n=e.style.height),e.style.r)?e.style.r:r)||5,{width:t=t||r,height:n=n||r,r:r}},e.prototype.getStyle=function(e,t){return m(m({},"node"===e?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),t.style||{})},e.prototype.destroy=function(){var e=this.get("legendCanvas"),e=(null!=e&&e.destroy(),this.get("graph").get("container")),t=this.get("container");e.removeChild(t)},e}(r.default);t.default=n},58042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var y=n(39269),g=n(31834),r=o(n(28813)),n=o(n(78146));function o(e){return e&&e.__esModule?e:{default:e}}i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};"undefined"!=typeof document&&(0,r.default)("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var i,r=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var e=this.get("className"),e=(0,y.createDom)("<div class=".concat(e||"g6-component-contextmenu","></div>"));(0,y.modifyCSS)(e,{top:"0px",position:"absolute",visibility:"hidden"});var t=(t=this.get("container"))||this.get("graph").get("container");(t=(0,g.isString)(t)?document.getElementById(t):t).appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var n,r,e,o,i,a,s,u,l,c,f,h,p=this,d=(t.preventDefault(),this.get("itemTypes"));if(t.item){if(t.item&&t.item.getType&&-1===d.indexOf(t.item.getType()))return void p.onMenuHide()}else if(-1===d.indexOf("canvas"))return void p.onMenuHide();this.get("shouldBegin")(t)&&(d=this.get("menu"),h=this.get("getContent"),n=this.get("graph"),h=h(t,n),(0,g.isString)(h)?d.innerHTML=h:d.innerHTML=h.outerHTML,this.removeMenuEventListener(),(r=this.get("handleMenuClick"))&&(this.set("handleMenuClickWrapper",h=function(e){r(e.target,t.item,n)}),d.addEventListener("click",h)),h=n.get("width"),e=n.get("height"),o=d.getBoundingClientRect(),i=this.get("offsetX")||0,a=this.get("offsetY")||0,s=n.getContainer().offsetTop,u=n.getContainer().offsetLeft,l=t.canvasX+u+i,c=t.canvasY+s+a,l+o.width>h&&(l=t.canvasX-o.width-i+u),c+o.height>e&&(c=t.canvasY-o.height-a+s),(0,y.modifyCSS)(d,{top:"".concat(c=c<0?0:c,"px"),left:"".concat(l,"px"),visibility:"visible"}),f="click"===this.get("trigger"),h=function(e){f?f=!1:p.onMenuHide()},document.body.addEventListener("click",h),this.set("handler",h))},e.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),t=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null)),t&&document.body.removeEventListener("click",t)},e.prototype.onMenuHide=function(){var e=this.get("menu");e&&(0,y.modifyCSS)(e,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var e,t=this.get("menu");this.removeMenuEventListener(),t&&(e=(e=this.get("container"))||this.get("graph").get("container"),(e=(0,g.isString)(e)?document.getElementById(e):e).removeChild(t))},e}(n.default);t.default=r},29953:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=n(15873),s=n(32227),b=n(31834),w=n(39269),r=n(43708),n=(n=n(78146))&&n.__esModule?n:{default:n},u=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),c=Math.max,f=r.ext.transform,r=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=(0,b.debounce)(function(e){var t=n;t.destroyed||t.updateCanvas()},100,!1),n}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var e,t,n,o,i,a,s,u,l,c,f,h,p,r,d,y=this,g=this._cfgs,v=g.size,m=g.graph;this.destroyed||(e=this.get("canvas").get("container"),t=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1<navigator.userAgent.toLowerCase().indexOf("safari"),o=(0,w.createDom)("\n      <div\n        class=".concat(g.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!n&&!t,"\n      </div>")),s=!1,p=h=f=c=l=u=a=i=0,o.addEventListener(n||t?"mousedown":"dragstart",function(t){var e,n;if(t.dataTransfer){var r=new Image;r.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null!=(n=(e=t.dataTransfer).setDragImage)&&n.call(e,r,0,0);try{t.dataTransfer.setData("text/html","view-port-minimap")}catch(e){t.dataTransfer.setData("text","view-port-minimap")}}g.refresh=!1,t.target===o&&(n=o.style,u=parseInt(n.left,10),l=parseInt(n.top,10),c=parseInt(n.width,10),f=parseInt(n.height,10),c>v[0]||f>v[1]||(p=m.getZoom(),h=y.get("ratio"),s=!0,i=t.clientX,a=t.clientY))},!1),r=function(e){var t,n;!s||(0,b.isNil)(e.clientX)||(0,b.isNil)(e.clientY)||(t=i-e.clientX,n=a-e.clientY,(u-t<0||u-t+c>=v[0])&&(t=0),(l-n<0||l-n+f>=v[1])&&(n=0),u-=t,l-=n,(0,w.modifyCSS)(o,{left:"".concat(u,"px"),top:"".concat(l,"px")}),m.translate(t*p/h,n*p/h),i=e.clientX,a=e.clientY)},n||t||o.addEventListener("drag",r,!1),o.addEventListener(n||t?"mouseup":"dragend",d=function(){s=!1,g.refresh=!0},!1),e.addEventListener("mouseleave",d),e.addEventListener("mouseup",d),(n||t)&&e.addEventListener("mousemove",r,!1),this.set("viewport",o),e.appendChild(o))},e.prototype.updateViewport=function(){var e,t,n,r,o,i,a,s,u;this.destroyed||(e=this.get("ratio"),i=this.get("totaldx"),u=this.get("totaldy"),o=this.get("graph"),t=this.get("size"),r=o.get("canvas").get("el"),n=o.get("width")||r.scrollWidth||500,r=o.get("height")||r.scrollHeight||500,a=o.getPointByCanvas(0,0),o=o.getPointByCanvas(n,r),(n=this.get("viewport"))||this.initViewport(),r=(o.x-a.x)*e,o=(o.y-a.y)*e,s=(i=a.x*e+i)+r,u=(a=a.y*e+u)+o,i<0&&(r+=i,i=0),s>t[0]&&(r-=s-t[0]),a<0&&(o+=a,a=0),u>t[1]&&(o-=u-t[1]),this.set("ratio",e),s="".concat(i,"px"),u="".concat(a,"px"),(0,w.modifyCSS)(n,{left:s,top:u,width:"".concat(r,"px"),height:"".concat(o,"px")}))},e.prototype.updateGraphShapes=function(){var t,e=this._cfgs.graph,n=this.get("canvas"),r=e.get("group");r.destroyed||(n.clear(),this.get("hideEdge")?(t=n.addGroup(),r.get("children").forEach(function(e){e.get("id").includes("-edge")||t.add(e.clone())})):((t=r.clone()).resetMatrix(),n.add(t)),"svg"===e.get("renderer")&&this.updateVisible(t))},e.prototype.updateVisible=function(e){var t,n=this;e.isGroup()||e.get("visible")?(t=e.get("children"))&&t.length&&t.forEach(function(e){e.get("visible")||e.hide(),n.updateVisible(e)}):e.hide()},e.prototype.updateKeyShapes=function(){var t,n=this,e=this._cfgs.graph,r=this.get("canvas"),o=r.get("children")[0]||r.addGroup(),i=(this.get("hideEdge")||(0,b.each)(e.getEdges(),function(e){n.updateOneEdgeKeyShape(e,o)}),(0,b.each)(e.getNodes(),function(e){n.updateOneNodeKeyShape(e,o)}),e.getCombos());i&&i.length&&(t=o.find(function(e){return"comboGroup"===e.get("name")})||o.addGroup({name:"comboGroup"}),setTimeout(function(){n.destroyed||((0,b.each)(i,function(e){n.updateOneComboKeyShape(e,t)}),null!=t&&t.sort(),null!=t&&t.toBack(),n.updateCanvas())},250)),this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(e,t){var n,r,o,i,a,s;this.destroyed||(r=(n=this.get("itemMap")||{})[e.get("id")],o=e.getBBox(),s=(i=e.get("keyShape").clone()).attr(),a={x:o.centerX,y:o.centerY},r?a=Object.assign(s,a):t.add(r=i),"rect"!==(s=r.get("type"))&&"image"!==s||(a.x=o.minX,a.y=o.minY),r.attr(a),e.isVisible()?r.show():r.hide(),r.exist=!0,t=e.getModel().depth,isNaN(t)||r.set("zIndex",t),n[e.get("id")]=r,this.set("itemMap",n))},e.prototype.updateOneNodeKeyShape=function(e,t){var n=this.get("itemMap")||{},r=n[e.get("id")],o=e.getBBox(),i=e.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY},a=(r?(s=Object.assign(a,s),r.toFront()):t.add(r=i),r.get("type")),t=("rect"!==a&&"image"!==a||(s.x=o.minX,s.y=o.minY),r.attr(s),e.isVisible()?r.show():r.hide(),r.exist=!0,e.getModel().depth);isNaN(t)||r.set("zIndex",t),n[e.get("id")]=r,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t,n=this,e=this._cfgs.graph,r=this.get("canvas"),o=r.get("children")[0]||r.addGroup(),i=(this.get("hideEdge")||(0,b.each)(e.getEdges(),function(e){n.updateOneEdgeKeyShape(e,o)}),(0,b.each)(e.getNodes(),function(e){n.updateOneNodeDelegateShape(e,o)}),e.getCombos());i&&i.length&&(t=o.find(function(e){return"comboGroup"===e.get("name")})||o.addGroup({name:"comboGroup"}),setTimeout(function(){n.destroyed||((0,b.each)(i,function(e){n.updateOneComboKeyShape(e,t)}),null!=t&&t.sort(),null!=t&&t.toBack(),n.updateCanvas())},250)),this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},t=Object.keys(e);if(t&&0!==t.length)for(var n=t.length-1;0<=n;n--){var r=e[t[n]],o=r.exist;r.exist=!1,o||(r.remove(),delete e[t[n]])}},e.prototype.updateOneEdgeKeyShape=function(e,t){var n,r=this.get("itemMap")||{},o=r[e.get("id")];o?(n=e.get("keyShape").attr("path"),o.attr("path",n)):(o=e.get("keyShape").clone(),t.add(o)),e.isVisible()?o.show():o.hide(),o.exist=!0,r[e.get("id")]=o,this.set("itemMap",r)},e.prototype.updateOneNodeDelegateShape=function(e,t){var n,r=this.get("delegateStyle"),o=this.get("itemMap")||{},i=o[e.get("id")],a=e.getBBox();i?(n={x:a.minX,y:a.minY,width:a.width,height:a.height},i.attr(n),i.toFront()):i=t.addShape("rect",{attrs:u({x:a.minX,y:a.minY,width:a.width,height:a.height},r),name:"minimap-node-shape"}),e.isVisible()?i.show():i.hide(),i.exist=!0,o[e.get("id")]=i,this.set("itemMap",o)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var e=this.get("graph"),t=this.get("size"),n=this.get("className"),r=this.get("container"),n=(0,w.createDom)("<div class='".concat(n,"' style='width: ").concat(t[0],"px; height: ").concat(t[1],"px; overflow: hidden'></div>"));((r=(0,b.isString)(r)?document.getElementById(r):r)||e.get("container")).appendChild(n),this.set("container",n);r=(0,w.createDom)('<div class="g6-minimap-container" style="position: relative;"></div>');n.appendChild(r),r.addEventListener("dragenter",function(e){e.preventDefault()}),r.addEventListener("dragover",function(e){e.preventDefault()}),n=new("svg"===e.get("renderer")?s:a).Canvas({container:r,width:t[0],height:t[1]}),this.set("canvas",n),this.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("size"),n=this.get("canvas"),r=this.get("type"),o=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var i,a,s,u,l,r=n.get("children")[0];r&&(r.resetMatrix(),n=r.getCanvasBBox(),i=e.get("canvas").getCanvasBBox(),e=e.getZoom()||1,u=i.width/e,i=i.height/e,Number.isFinite(n.width)&&(u=c(n.width,u),i=c(n.height,i)),u+=2*o,i+=2*o,e=Math.min(t[0]/u,t[1]/i),l=[1,0,0,0,1,0,0,0,1],s=a=0,Number.isFinite(n.minX)&&(a=-n.minX),Number.isFinite(n.minY)&&(s=-n.minY),n=(t[0]-(u-2*o)*e)/2,u=(t[1]-(i-2*o)*e)/2,l=f(l,[["t",a,s],["s",e,e],["t",n,u]]),r.setMatrix(l),this.set("ratio",e),this.set("totaldx",n+a*e),this.set("totaldy",u+s*e),this.set("dx",n),this.set("dy",u),this.updateViewport())}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){null!=(e=this.get("canvas"))&&e.destroy();var e=this.get("container");null!=e&&e.parentNode&&e.parentNode.removeChild(e)},e}(n.default);t.default=r},24853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,g=n(31834),r=n(48122),n=(n=n(78146))&&n.__esModule?n:{default:n},a=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},r.Util.pointLineDistance),s={stroke:"#FA8C16",lineWidth:1},r=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{line:s,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(e){var e=e.item,t=(e.get("delegateShape")||e).getBBox(),e=e.getModel(),n=e.x-t.x,e=e.y-t.y;this.show({x:t.minX+n,y:t.minY+e},{width:t.width,height:t.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var e=this._cfgs,r=e.horizontalLines,o=e.verticalLines,i=e.itemAlignType;this.get("graph").getNodes().forEach(function(e){var t=e.getBBox(),n=e.get("id");!0===i||"horizontal"===i?(r["".concat(n,"tltr")]=[t.minX,t.minY,t.maxX,t.minY,e],r["".concat(n,"lcrc")]=[t.minX,t.centerY,t.maxX,t.centerY,e],r["".concat(n,"blbr")]=[t.minX,t.maxY,t.maxX,t.maxY,e]):"center"===i&&(r["".concat(n,"lcrc")]=[t.minX,t.centerY,t.maxX,t.centerY,e]),!0===i||"vertical"===i?(o["".concat(n,"tlbl")]=[t.minX,t.minY,t.minX,t.maxY,e],o["".concat(n,"tcbc")]=[t.centerX,t.minY,t.centerX,t.maxY,e],o["".concat(n,"trbr")]=[t.maxX,t.minY,t.maxX,t.maxY,e]):"center"===i&&(o["".concat(n,"tcbc")]=[t.centerX,t.minY,t.centerX,t.maxY,e])})},e.prototype.show=function(e,t){var n=(0,g.mix)({},e);return this.itemAlign(e,t,n),e},e.prototype.itemAlign=function(e,t,n){var r=this,o=this._cfgs,i=o.horizontalLines,a=o.verticalLines,o=o.tolerance,s={x:n.x+t.width/2,y:n.y},u={x:n.x+t.width/2,y:n.y+t.height/2},l={x:n.x+t.width/2,y:n.y+t.height},c={x:n.x,y:n.y+t.height/2},f={x:n.x+t.width,y:n.y+t.height/2},h=[],p=[],d=null;if(this.clearAlignLine(),(0,g.each)(i,function(e){e[4].isVisible&&(h.push(r.getLineDisObject(e,s)),h.push(r.getLineDisObject(e,u)),h.push(r.getLineDisObject(e,l)))}),(0,g.each)(a,function(e){e[4].isVisible&&(p.push(r.getLineDisObject(e,c)),p.push(r.getLineDisObject(e,u)),p.push(r.getLineDisObject(e,f)))}),h.sort(function(e,t){return e.dis-t.dis}),p.sort(function(e,t){return e.dis-t.dis}),0!==h.length&&h[0].dis<o){e.y=h[0].line[1]-h[0].point.y+n.y;for(var d={type:"item",horizontals:[h[0]]},y=1;y<3;y++)h[0].dis===h[y].dis&&d.horizontals.push(h[y])}if(0!==p.length&&p[0].dis<o)for(e.x=p[0].line[0]-p[0].point.x+n.x,d?d.verticals=[p[0]]:d={type:"item",verticals:[p[0]]},y=1;y<3;y++)p[0].dis===p[y].dis&&d.verticals.push(p[y]);d&&(d.bbox=t,this.addAlignLine(d))},e.prototype.addAlignLine=function(e){var o=e.bbox,t=e.type,n=e.horizontals,e=e.verticals,r=this._cfgs,i=r.line,a=r.alignLines,s=this.get("graph").get("group");"item"===t&&(n&&(0,g.each)(n,function(e){var t=e.line,e=e.point,n=(t[0]+t[2])/2,n=e.x<n?(r=e.x-o.width/2,Math.max(t[0],t[2])):(r=e.x+o.width/2,Math.min(t[0],t[2])),e=(0,g.mix)({x1:r,y1:t[1],x2:n,y2:t[1]},i),r=s.addShape("line",{attrs:e,capture:!1});a.push(r)}),e)&&(0,g.each)(e,function(e){var t=e.line,e=e.point,n=(t[1]+t[3])/2,n=e.y<n?(r=e.y-o.height/2,Math.max(t[1],t[3])):(r=e.y+o.height/2,Math.min(t[1],t[3])),e=(0,g.mix)({x1:t[0],y1:r,x2:t[0],y2:n},i),r=s.addShape("line",{attrs:e,capture:!1});a.push(r)})},e.prototype.getLineDisObject=function(e,t){return{line:e,point:t,dis:a(e,t)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;(0,g.each)(e,function(e){e.remove()}),e.length=0},e.prototype.destory=function(){var e=this._cfgs,t=e.horizontalLines,n=e.verticalLines;this.get("graph").getNodes().forEach(function(e){e=e.get("id");delete t["".concat(e,"tltr")],delete t["".concat(e,"lcrc")],delete t["".concat(e,"blbr")],delete n["".concat(e,"tlbl")],delete n["".concat(e,"tcbc")],delete n["".concat(e,"trbr")]}),this.clearAlignLine()},e}(n.default);t.default=r},41520:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALUE_CHANGE=t.TIMELINE_START=t.TIMELINE_END=t.TIMEBAR_CONFIG_CHANGE=t.PRE_STEP_BTN=t.PLAY_PAUSE_BTN=t.NEXT_STEP_BTN=void 0,t.TIMELINE_START="timebarstartplay",t.TIMELINE_END="timebarendplay",t.VALUE_CHANGE="valuechange",t.TIMEBAR_CONFIG_CHANGE="timebarConfigChanged",t.PLAY_PAUSE_BTN="playPauseBtn",t.NEXT_STEP_BTN="nextStepBtn",t.PRE_STEP_BTN="preStepBtn"},86627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TIME_TYPE=void 0;var r=n(31834),o=n(43708),h=(a=n(51515))&&a.__esModule?a:{default:a},p=n(41520),g=function(){return(g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=o.ext.transform,d={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},y={fill:"#fff"},m={fill:"green"},b={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},u={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},i={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:b,timeTypeControllerStyle:u},l={SINGLE:"single",RANGE:"range"},a=(t.TIME_TYPE=l,s.prototype.init=function(){this.renderPlayButton()},s.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},s.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},s.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,r=e.x,o=e.y,i=e.hideTimeTypeController,a=e.fill,a=void 0===a?"#aaa":a,s=e.stroke,s=void 0===s?"green":s,u=e.containerStyle,u=void 0===u?{}:u,l=g(g({},d),e.playBtnStyle||{}),c=g(g({},y),e.preBtnStyle||{}),e=g(g({},m),e.nextBtnStyle||{}),f=n/2-5,o=o+10,r=this.controllerGroup.addShape("rect",{attrs:g({x:r,y:o,width:t,height:n,stroke:s,fill:a},u),name:"container-rect"}),n=(this.playButton?this.playButton.update({x:t/2,y:o,r:f}):this.playButton=new h.default({group:this.controllerGroup,x:t/2,y:o+f+5,r:f,isPlay:this.isPlay,style:l}),c.offsetX||0),s=c.offsetY||0,a=(c.scale||1)*f,u=(this.controllerGroup.addShape("path",{attrs:g({path:this.getPreMarkerPath(t/2-5*f+n,o+f+5+s,.5*a)},c),name:p.PRE_STEP_BTN}),e.offsetX||0),l=e.offsetY||0,n=(e.scale||1)*f,s=(this.controllerGroup.addShape("path",{attrs:g({path:this.getNextMarkerPath(t/2+5*f+u,o+f+5+l,.5*n)},e),name:p.NEXT_STEP_BTN}),r.toBack(),this.renderSpeedBtn(),i||this.renderToggleTime(),this.bindEvent(),this.controllerCfg.scale),a=void 0===s?1:s,c=this.controllerGroup.getCanvasBBox(),t=(c.maxX+c.minX)/2,u=(c.maxY+c.minY)/2,o=v([1,0,0,0,1,0,0,0,1],[["t",-t,-u],["s",a,a],["t",t,u]]);this.controllerGroup.setMatrix(o)},s.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,r=e.hideTimeTypeController,e=g(g({},b),this.controllerCfg.speedControllerStyle||{}),o=e.scroller,i=void 0===o?{}:o,o=e.text,o=void 0===o?{}:o,a=e.pointer,a=void 0===a?{}:a,s=e.scale,s=void 0===s?1:s,u=e.offsetX,u=void 0===u?0:u,e=e.offsetY,e=void 0===e?0:e,l=this.controllerGroup.addGroup({name:"speed-group"}),c=(this.speedGroup=l,[]),f=5;this.speedAxisY=[19,22,26,32,39];for(var h=0;h<5;h++){var p=t+this.speedAxisY[h],d=n-(r?50:110);l.addShape("line",{attrs:g({x1:d,x2:15+d,y1:p,y2:p},i),speed:f,name:"speed-rect"}),this.speedAxisY[h]=p,c.push(f),--f}this.speedText=l.addShape("text",{attrs:g({x:n-(r?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},o),name:"speed-text"}),this.speedPoint=l.addShape("path",{attrs:g({path:this.getPointerPath(n-(r?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},a),name:"speed-pointer"});var o=this.speedGroup.getCanvasBBox(),a=(o.maxX+o.minX)/2,o=(o.maxY+o.minY)/2,y=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1],y=v(y,[["t",-a,-o],["s",s,s],["t",a+u*s,o+e*s]]);this.speedGroup.setMatrix(y)},s.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},s.prototype.renderToggleTime=function(){var e=this.controllerCfg,t=e.width,e=e.defaultTimeType,n=g(g({},u),this.controllerCfg.timeTypeControllerStyle||{}),r=n.scale,r=void 0===r?1:r,o=n.offsetX,o=void 0===o?0:o,i=n.offsetY,i=void 0===i?0:i,a=n.box,a=void 0===a?{}:a,s=n.check,s=void 0===s?{}:s,n=n.text,n=void 0===n?{}:n,e=(this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),e===l.SINGLE),e=(this.toggleGroup.addShape("rect",{attrs:g({x:t-50,y:this.speedAxisY[0]+3.5},a),isChecked:e,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:g({path:[["M",t-50+3,this.speedAxisY[1]+6],["L",t-50+7,this.speedAxisY[1]+10],["L",t-50+12,this.speedAxisY[1]+4]]},s),capture:!1,name:"check-icon"}),e||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:g({text:e?(null==(a=this.controllerCfg)?void 0:a.timeRangeControllerText)||"":(null==(s=this.controllerCfg)?void 0:s.timePointControllerText)||"",x:t-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},n),name:"checked-text"}),this.toggleGroup.getCanvasBBox()),a=(e.maxX+e.minX)/2,s=(e.maxY+e.minY)/2,t=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1],t=v(t,[["t",-a,-s],["s",r,r],["t",a+o*r,s+i*r]]);this.toggleGroup.setMatrix(t)},s.prototype.bindEvent=function(){var i=this;this.speedGroup.on("speed-rect:click",function(e){var e=e.target.attr("y1"),t=i.speedPoint.attr("matrix"),n=i.speedAxisY.indexOf(t[7]||0),e=i.speedAxisY.indexOf(e),n=i.speedAxisY[e]-i.speedAxisY[n],t=v(t,[["t",0,n]]);i.speedPoint.setMatrix(t),i.currentSpeed=i.speedAxisY.length-e,i.speedText.attr("text","".concat(i.currentSpeed,".0X")),i.group.emit(p.TIMEBAR_CONFIG_CHANGE,{speed:i.currentSpeed,type:i.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var n,r=(t=i.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1])[7],o=i.speedAxisY.indexOf(r),e=(-1===o&&(n=1/0,i.speedAxisY.forEach(function(e,t){e=Math.abs(e-r);e<n&&(n=e,o=t)})),o=0<e.originalEvent.deltaY?Math.max(0,o-1):Math.min(i.speedAxisY.length-1,o+1),i.speedAxisY[o]-r),t=v(t,[["t",0,e]]);i.speedPoint.setMatrix(t),i.currentSpeed=i.speedAxisY.length-o,i.speedText.attr("text","".concat(i.currentSpeed,".0X")),i.group.emit(p.TIMEBAR_CONFIG_CHANGE,{speed:i.currentSpeed,type:i.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var t,n=e.target.get("isChecked");n?(i.checkedIcon.hide(),i.checkedText.attr("text",(null==(t=i.controllerCfg)?void 0:t.timePointControllerText)||""),i.currentType=l.RANGE):(i.checkedIcon.show(),i.checkedText.attr("text",(null==(t=i.controllerCfg)?void 0:t.timeRangeControllerText)||""),i.currentType=l.SINGLE),e.target.set("isChecked",!n),i.group.emit(p.TIMEBAR_CONFIG_CHANGE,{type:i.currentType,speed:i.currentSpeed})})},s.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},s);function s(e){this.controllerCfg=(0,r.deepMix)({},i,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||l.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}t.default=a},82010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31834),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},c={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"};function o(e){var t=e.group,n=e.name,r=e.type,o=e.x,o=void 0===o?0:o,i=e.y,i=void 0===i?0:i,a=e.width,a=void 0===a?2:a,s=e.height,s=void 0===s?24:s,e=e.style,e=void 0===e?{}:e;this.group=t,this.name=n,this.handleType=r,this.x=o,this.y=i,this.width=a,this.height=s,"trend"===r?this.style=u(u({},l),e):"simple"===r&&(this.style=u(u({},c),e)),this.renderHandle()}o.prototype.setX=function(e){this.setXY(e,void 0)},o.prototype.setY=function(e){this.setXY(void 0,e)},o.prototype.setXY=function(e,t){(0,r.isNumber)(e)&&(this.x=e),(0,r.isNumber)(t)&&(this.y=t),this.updateXY()},o.prototype.renderHandle=function(){var e=this.width,t=this.height,n=this.style,r=this.name,o=n.fill,i=n.stroke,a=n.radius,s=n.opacity,n=n.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:t,fill:o,stroke:i,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:n,lineAppendWidth:12},name:"".concat(r,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:t,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:t/2,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:n,lineWidth:2},name:"".concat(r,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},o.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var e=t.style.fill;t.topCircle.attr("fill",e)})},o.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})},o.prototype.show=function(){this.handleGroup.show()},o.prototype.hide=function(){this.handleGroup.hide()},o.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t.default=o},74399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(39269),u=n(15873),l=n(32227),c=n(31834),r=o(n(78146)),i=n(41520),x=o(n(90832)),S=o(n(1187));function o(e){return e&&e.__esModule?e:{default:e}}a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};var a,O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=function(r){function e(e){var n=r.call(this,e)||this;return n.afterrenderListener=function(e){return n.filterData({})},n.valueChangeListener=(0,c.throttle)(function(e){return n.filterData(e)},200,{trailing:!0,leading:!0}),n.changeData=function(e){var t=n.get("graph");n.cacheGraphData=t.get("data"),n.filterData({})},n}var t=e,n=r;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}return a(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var e,t=this.get("graph"),n=this._cfgs,r=n.width,o=n.height,n=n.putInGraphContainer,i=this.get("className")||"g6-component-timebar",a=this.get("container");a?e=a=(0,c.isString)(a)?document.getElementById(a):a:(e=(0,s.createDom)("<div class='".concat(i,"'></div>")),(0,s.modifyCSS)(e,{position:"relative"})),n&&this.get("graph").get("container").appendChild(e),this.set("timeBarContainer",e),a=new("SVG"===t.get("renderer")?l:u).Canvas({container:e,width:r,height:o}),this.get("containerCSS")&&(0,s.modifyCSS)(e,this.get("containerCSS")),this.set("canvas",a)},e.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"}),e=(this.set("timeBarGroup",e),this.renderTrend(),this.initEvent(),"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif");this.set("fontFamily",e)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(e){var t=this.get("timebar");t&&(t.isPlay=!!e,t.changePlayStatus())},e.prototype.renderTrend=function(){function t(){var e=r.get("timebar");e.draggingHandler=!1,e.isPlay&&(e.isPlay=!1,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()),document.removeEventListener("mouseup",t)}var n,r=this,e=this._cfgs,o=e.width,i=e.x,a=e.y,s=e.padding,u=e.type,l=e.trend,c=e.slider,f=e.controllerCfg,h=e.textStyle,p=e.tick,d=e.backgroundStyle,e=e.foregroundStyle,y=l.data,l=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(l,["data"]),g=o-2*s,v="trend"===u?26:4,m=this.get("graph"),b=this.get("timeBarGroup"),w=this.get("canvas"),_=null;"trend"===u||"simple"===u?(n=this.get("getValue"),_=new S.default(O(O({graph:m,canvas:w,group:b,type:u,x:i+s,y:"trend"===u?a+s:a+s+15,width:g,height:v,padding:s,backgroundStyle:d,foregroundStyle:e,trendCfg:O(O({},l),{data:y.map(function(e){return(null==n?void 0:n(e))||e.value})})},c),{tick:{ticks:y,tickLabelFormatter:p.tickLabelFormatter,tickLabelStyle:p.tickLabelStyle,tickLineStyle:p.tickLineStyle},handlerStyle:O(O({},c.handlerStyle),{height:c.height||v}),controllerCfg:f,textStyle:h}))):"tick"===u&&(_=new x.default(O({graph:m,canvas:w,group:b,x:i+s,y:a+s,width:o,height:42,padding:2,controllerCfg:f},p)));w.on("mousedown",function(e){"maxHandlerShape-handler"!==e.target.get("name")&&"minHandlerShape-handler"!==e.target.get("name")&&e.target!==_.foregroundShape||document.addEventListener("mouseup",t)}),this.set("timebar",_)},e.prototype.filterData=function(e){var r,o,i,t,a,s,u,l,n,c,f,e=e.value,h=(e||(e=[],(p=this._cfgs.type)&&"trend"!==p&&"simple"!==p?"tick"===p&&(e[0]=this._cfgs.tick.start,e[1]=this._cfgs.tick.end):(e[0]=this._cfgs.slider.start,e[1]=this._cfgs.slider.end)),null),p=this._cfgs.type;"trend"===p||"simple"===p?h=this._cfgs.trend.data:"tick"===p&&(h=this._cfgs.tick.data),h&&0!==h.length?(t=this.get("rangeChange"),r=this.get("graph"),i=Math.round(h.length*e[0]),o=(o=Math.round(h.length*e[1]))>=h.length?h.length-1:o,i=i>=h.length?h.length-1:i,n=(e=null==(e=this._cfgs.tick)?void 0:e.tickLabelFormatter)?e(h[i]):h[i].date,e=e?e(h[o]):h[o].date,"tick"!==p&&this.get("timebar").setText(n,e),t?t(r,n,e):((!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=r.get("data")),p=this.get("filterItemTypes"),t=this.get("changeData"),a=this.get("getDate"),s=this.get("shouldIgnore"),u=h[i].date,l=h[o].date,t||void 0===t?(n=this.cacheGraphData.nodes,e=this.cacheGraphData.edges,c={},f={},r.getNodes().forEach(function(e){return c[e.getID()]=!0}),r.getEdges().forEach(function(e){return f[e.getID()]=!0}),p.includes("node")&&(null!=n&&n.forEach(function(e){var t=+((null==a?void 0:a(e))||e.date),t=u<=t&&t<=l||(null==s?void 0:s("node",e,{min:u,max:l})),n=c[e.id];n&&!t?(r.removeItem(e.id),c[e.id]=!1):!n&&t&&(r.addItem("node",e),c[e.id]=!0)}),null!=e)&&e.forEach(function(e){var t=c[e.source]&&c[e.target]||(null==s?void 0:s("edge",e,{min:u,max:l})),n=!!r.findById(e.id);n&&!t?(r.removeItem(e.id),f[e.id]=!1):!n&&t?(r.addItem("edge",e),f[e.id]=!0):n||(f[e.id]=!1)}),(this.get("filterEdge")||p.includes("edge"))&&null!=e&&e.filter(function(e){var t=+((null==a?void 0:a(e))||e.date),t=u<=t&&t<=l||(null==s?void 0:s("edge",e,{min:u,max:l})),n=c[e.source]&&c[e.target],t=t&&n,n=f[e.id];n&&!t?(f[e.id]=!1,r.removeItem(e.id)):!n&&t&&(f[e.id]=!0,r.addItem("edge",e))})):(p.includes("node")&&r.getNodes().forEach(function(e){var t=e.getModel();null!=s&&s("node",t,{min:u,max:l})||((t=+((null==a?void 0:a(t))||t.date))<u||l<t?r.hideItem(e):r.showItem(e))}),(this.get("filterEdge")||p.includes("edge"))&&r.getEdges().forEach(function(e){var t,n=e.getModel();null!=s&&s("edge",n,{min:h[i].date,max:h[o].date})||((n=+((null==a?void 0:a(n))||n.date))<h[i].date||n>h[o].date?r.hideItem(e):(n=e.getSource().isVisible(),t=e.getTarget().isVisible(),n&&t&&r.showItem(e)))})))):console.warn(" TimeBar ")},e.prototype.initEvent=function(){var e=this.get("graph");e.on("afterchangedata",this.changeData),e.on("afterrender",this.afterrenderListener),e.on(i.VALUE_CHANGE,this.valueChangeListener)},e.prototype.destroy=function(){var e,t=this.get("graph"),t=(t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(i.VALUE_CHANGE,this.valueChangeListener),this.get("timebar")),t=(t&&t.destory&&t.destory(),r.prototype.destroy.call(this),this.get("timeBarContainer"));t&&(e=(e=this.get("container"))||this.get("graph").get("container"),(e=(e=(0,c.isString)(e)?document.getElementById(e):e)===t?e.parentElement:e).removeChild(t))},e}(r.default);t.default=n},51385:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.dataToPath=function(e,n,r,t){void 0===t&&(t=!0);var o=new c.Linear({values:e}),i=new c.Category({values:(0,f.map)(e,function(e,t){return t})}),e=(0,f.map)(e,function(e,t){return[i.scale(t)*n,r-o.scale(e)*r]});return(t?l:u)(e)},t.dataToRectPath=function(e,n,r,t){void 0===t&&(t=5);for(var o=new c.Linear({values:e}),i=new c.Category({values:(0,f.map)(e,function(e,t){return t})}),a=(0,f.map)(e,function(e,t){return[i.scale(t)*n,r-o.scale(e)*r]}),s=[],u=0;u<a.length;u++){var l=a[u],l=p({x:l[0],y:l[1],y0:r,size:t});s.push.apply(s,l)}return d(s)},t.getAreaLineY=h,t.getLinePath=u,t.getRectPath=d,t.getRectPoints=p,t.getSmoothLinePath=l,t.linePathToAreaPath=function(e,t,n,r){e=i([],e,!0),r=h(r,n);return e.push(["L",t,r]),e.push(["L",0,r]),e.push(["Z"]),e};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(73920)),c=n(91994),f=n(31834);function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}var i=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function u(e){return(0,f.map)(e,function(e,t){return[0===t?"M":"L",e[0],e[1]]})}function l(e){var t,n,r;return e.length<=2?u(e):(t=[],(0,f.each)(e,function(e){(0,f.isEqual)(e,t.slice(t.length-2))||t.push(e[0],e[1])}),n=o.catmullRom2Bezier(t,!1),r=(e=(0,f.head)(e))[0],e=e[1],n.unshift(["M",r,e]),n)}function h(e,t){var e=new c.Linear({values:e}),n=Math.max(0,e.min);return t-e.scale(n)*t}function p(e){var t,n,r=e.x,o=e.y,i=e.y0,e=e.size,i=(0,f.isArray)(o)?(t=o[0],o[1]):(t=i,o),o=(0,f.isArray)(r)?(n=r[0],r[1]):(n=r-e/2,r+e/2),r=[{x:n,y:t},{x:n,y:i}];return r.push({x:o,y:i},{x:o,y:t}),r}function d(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var o=1,i=e.length;o<i;o++)n.push(["L",e[o].x,e[o].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}},90832:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(43708),S=n(31834),a=o(n(30653)),i=o(n(86627)),l=n(41520);function o(e){return e&&e.__esModule?e:{default:e}}var O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},P=r.ext.transform,m={fill:"#5B8FF9"},b={fill:"#e6e8e9"};function s(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,r=e.group,o=e.width,i=e.height,a=e.padding,s=e.data,u=e.start,l=e.end,c=e.x,c=void 0===c?0:c,f=e.y,f=void 0===f?0:f,h=e.tickLabelFormatter,p=e.selectedTickStyle,p=void 0===p?m:p,d=e.unselectedTickStyle,d=void 0===d?b:d,y=e.tooltipBackgroundColor,g=e.tooltipFomatter,v=e.tickLabelStyle,e=e.controllerCfg,e=void 0===e?{speed:1}:e;this.graph=t,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=o,this.height=i,this.padding=a,this.data=s,this.start=u,this.end=l,this.tickLabelFormatter=h,this.tickLabelStyle=v||{},this.selectedTickStyle=p,this.unselectedTickStyle=d,this.controllerCfg=e,this.currentSpeed=e.speed||1,this.x=c,this.y=f,this.tooltipBackgroundColor=y,this.tooltipFomatter=g,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}s.prototype.renderSlices=function(){var s=this,e=this,u=e.width,t=e.height,l=e.padding,n=e.data,r=e.start,o=e.end,c=e.tickLabelFormatter,f=e.selectedTickStyle,h=e.unselectedTickStyle,p=e.tickLabelStyle,d=t-(3*l+4+10)-2*l,y=n.length,g=(u-2*l-2*(y-1))/y,v=(this.tickWidth=g,this.sliceGroup),m=[],b=[],w=Math.round(y*r),_=Math.round(y*o),x=(this.startTickRectId=w,this.endTickRectId=_,p.rotate),e=(delete p.rotate,n.forEach(function(e,t){var n=v.addShape("rect",{attrs:O({x:l+t*(2+g),y:l,width:g,height:d},w<=t&&t<=_?f:h),draggable:!0,name:"tick-rect-".concat(t)}),r=v.addShape("rect",{attrs:{x:l+t*g+2*(2*t-1)/2,y:l,width:0===t||t===y-1?1+g:2+g,height:d,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(t)});r.toFront();var o,i=n.getBBox(),a=(i.minX+i.maxX)/2;m.push({rect:n,pickRect:r,value:e.date,x:a,y:i.minY}),c?(o=c(e),(0,S.isString)(o)||(o=o&&e.date)):t%Math.round(y/10)==0&&(o=e.date),o&&(b.push(o),n=i.maxY+2*l,v.addShape("line",{attrs:{stroke:"#BFBFBF",x1:a,y1:n,x2:a,y2:n+4},name:"tick-line"}),(e=(t=v.addShape("text",{attrs:O({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:a,y:r=n+4+l,textAlign:"center",text:o,textBaseline:"top",fontSize:10,fontFamily:s.fontFamily||"Arial, sans-serif"},p),capture:!1,name:"tick-label"})).getBBox()).maxX>u?t.attr("textAlign","right"):e.minX<0&&t.attr("textAlign","left"),(0,S.isNumber)(x)&&10!==b.length&&(i=P([1,0,0,0,1,0,0,0,1],[["t",-a,-r],["r",x],["t",a-5,r+2]]),t.attr({textAlign:"left",matrix:i})),1===b.length?t.attr({textAlign:"left"}):10===b.length&&t.attr({textAlign:"right"}))}),this.tickRects=m,this.group);this.currentSpeed=1,this.controllerBtnGroup=new i.default(O({group:e,x:this.x,y:this.y+t+5,width:u,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},s.prototype.initEvent=function(){var u=this,e=this.sliceGroup,e=(e.on("click",function(e){var t,n,r,e=e.target;"rect"===e.get("type")&&e.get("name")&&(e=parseInt(e.get("name").split("-")[2],10),isNaN(e)||(t=u.tickRects,n=u.unselectedTickStyle,t.forEach(function(e){e.rect.attr(n)}),r=u.selectedTickStyle,t[e].rect.attr(r),u.startTickRectId=e,r=(u.endTickRectId=e)/t.length,u.graph.emit(l.VALUE_CHANGE,{value:[r,r]})))}),e.on("dragstart",function(e){var t=u.tickRects,n=u.unselectedTickStyle,e=(t.forEach(function(e){e.rect.attr(n)}),e.target),e=parseInt(e.get("name").split("-")[2],10),r=u.selectedTickStyle,r=(t[e].rect.attr(r),(u.startTickRectId=e)/t.length);u.graph.emit(l.VALUE_CHANGE,{value:[r,r]}),u.dragging=!0}),e.on("dragover",function(e){if(u.dragging&&"rect"===e.target.get("type")){for(var t=parseInt(e.target.get("name").split("-")[2],10),n=u.startTickRectId,r=u.tickRects,o=u.selectedTickStyle,i=u.unselectedTickStyle,a=0;a<r.length;a++)r[a].rect.attr(n<=a&&a<=t?o:i);var e=r.length,s=(u.endTickRectId=t,n/e);u.graph.emit(l.VALUE_CHANGE,{value:[s,t/e]})}}),e.on("drop",function(e){var t,n,r;u.dragging&&(u.dragging=!1,"rect"===e.target.get("type"))&&(t=u.startTickRectId,(e=parseInt(e.target.get("name").split("-")[2],10))<t||(r=u.selectedTickStyle,(n=u.tickRects)[e].rect.attr(r),u.endTickRectId=e,r=n.length,u.graph.emit(l.VALUE_CHANGE,{value:[t/r,e/r]})))}),this.tooltipBackgroundColor),n=this.tooltipFomatter,r=this.canvas,o=new a.default({container:r.get("container"),backgroundColor:e}),i=this.tickRects,e=(i.forEach(function(e){e=e.pickRect;e.on("mouseenter",function(e){var t,e=e.target;"rect"===e.get("type")&&(e=parseInt(e.get("name").split("-")[2],10),t=r.getClientByPoint(i[e].x,i[e].y),o.show({x:i[e].x,y:i[e].y,clientX:t.x,clientY:t.y,text:n?n(i[e].value):i[e].value}))}),e.on("mouseleave",function(e){o.hide()})}),this.group);e.on("".concat(l.PLAY_PAUSE_BTN,":click"),function(){u.isPlay=!u.isPlay,u.changePlayStatus()}),e.on("".concat(l.NEXT_STEP_BTN,":click"),function(){u.updateStartEnd(1)}),e.on("".concat(l.PRE_STEP_BTN,":click"),function(){u.updateStartEnd(-1)}),e.on(l.TIMEBAR_CONFIG_CHANGE,function(e){e.type;e=e.speed;u.currentSpeed=e})},s.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(l.TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e)&&this.graph.emit(l.TIMELINE_END,null)},s.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},s.prototype.updateStartEnd=function(e){var t=this.tickRects,n=t.length,r=this.unselectedTickStyle,o=this.selectedTickStyle,i=this.endTickRectId;if(0<e?this.endTickRectId++:(t[this.endTickRectId].rect.attr(r),this.endTickRectId--),i!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var a=this.startTickRectId;a<=this.endTickRectId-1;a++)t[a].rect.attr(r);this.startTickRectId=this.endTickRectId}t[this.endTickRectId]&&(t[this.endTickRectId].rect.attr(o),e=this.startTickRectId/n,i=this.endTickRectId/n,this.graph.emit(l.VALUE_CHANGE,{value:[e,i]}))},s.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(e){e=e.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(l.PLAY_PAUSE_BTN,":click")),e.off("".concat(l.NEXT_STEP_BTN,":click")),e.off("".concat(l.PRE_STEP_BTN,":click")),e.off(l.TIMEBAR_CONFIG_CHANGE),this.sliceGroup.destroy()},t.default=s},30653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TEXT_STYLE=t.BACKGROUND_STYLE=t.ARROW_STYLE=void 0;var u=n(31834),l=n(39269),n=(t.BACKGROUND_STYLE={opacity:.5,fill:"#000"},t.ARROW_STYLE={opacity:.5,fill:"#000",r:5},t.TEXT_STYLE={fill:"#fff",fontSize:12},r.prototype.render=function(){var e=this.className,t=(this.x,this.y,this.backgroundColor),n=this.textColor,r=this.text,o=this.padding,i=this.opacity,a=this.fontSize,s=this.container,e=(0,l.createDom)("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(i,'"></div>')),i=((s=(0,u.isString)(s)?document.getElementById(s):s).appendChild(e),this.parentHeight=s.offsetHeight,this.parentWidth=s.offsetWidth,(0,l.modifyCSS)(e,{visibility:"hidden",top:0,left:0}),(0,l.createDom)("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(t,"; font-size: ").concat(a,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(n,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"))),s=(i.innerHTML=r,e.appendChild(i),this.backgroundDOM=i,(0,l.createDom)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(t,"'></div>")));e.appendChild(s),this.arrowDOM=s,this.container=e},r.prototype.show=function(e){var t=e.text,n=e.x,e=(e.y,e.clientX,e.clientY,this.backgroundDOM.innerHTML=t,this.backgroundDOM.offsetWidth),t=this.backgroundDOM.offsetHeight,r=this.arrowDOM.offsetWidth,o=this.arrowDOM.offsetHeight,o=((0,l.modifyCSS)(this.container,{top:"".concat(-t-o,"px"),left:"".concat(n,"px"),visibility:"visible"}),(0,l.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-e/2,"px")}),(0,l.modifyCSS)(this.arrowDOM,{marginLeft:"".concat(-r/2,"px"),top:"".concat(t,"px")}),n-e/2),r=n+e/2;o<0?(0,l.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-e/2-o,"px")}):r>this.parentWidth&&(0,l.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-e/2-r+this.parentWidth+12,"px")})},r.prototype.hide=function(){(0,l.modifyCSS)(this.container,{top:0,left:0,visibility:"hidden"})},r);function r(e){var t=e.x,t=void 0===t?0:t,n=e.y,n=void 0===n?0:n,r=e.container,o=e.text,i=e.padding,i=void 0===i?[4,4,4,4]:i,a=e.className,a=void 0===a?"g6-component-timebar-tooltip":a,s=e.backgroundColor,s=void 0===s?"#000":s,u=e.textColor,u=void 0===u?"#fff":u,l=e.opacity,l=void 0===l?.8:l,e=e.fontSize,e=void 0===e?12:e;this.container=r,this.className=a,this.backgroundColor=s,this.textColor=u,this.x=t,this.y=n,this.text=o,this.padding=i,this.opacity=l,this.fontSize=e,this.render()}t.default=n},51515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(31834),a=n(41520),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e){this.config=(0,r.deepMix)({},e),this.init()}o.prototype.update=function(e){this.config=(0,r.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},o.prototype.init=function(){this.initElement(),this.renderMarker()},o.prototype.initElement=function(){var e=this.config,t=e.group,e=e.style,n=e.scale,n=void 0===n?1:n,r=e.offsetX,o=e.offsetY,r=this.config.x+(void 0===r?0:r),o=this.config.y+(void 0===o?0:o),i=t.addGroup({name:a.PLAY_PAUSE_BTN}),t=(this.startMarkerGroup=i.addGroup({name:a.PLAY_PAUSE_BTN}),this.circle=t.addShape("circle",{attrs:s({x:r,y:o,r:this.config.r*n},e),name:a.PLAY_PAUSE_BTN}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(r,o,n),fill:e.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=i.addGroup({name:a.PLAY_PAUSE_BTN}),.25*this.config.r*n),i=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r-.375*this.config.r*n,y:o-i/2,width:t,height:i,fill:e.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r+1/8*this.config.r*n,y:o-i/2,width:t,height:i,fill:e.stroke||"#aaa",lineWidth:0}})},o.prototype.updateElement=function(){var e=this.config.style,t=e.scale,t=void 0===t?1:t,n=e.offsetX,e=e.offsetY,n=this.config.x+(void 0===n?0:n),e=this.config.y+(void 0===e?0:e),r=(this.circle.attr("x",n),this.circle.attr("y",e),this.circle.attr("r",this.config.r*t),this.startMarker.attr("path",this.getStartMarkerPath(n,e,t)),.25*this.config.r*t),o=.5*this.config.r*Math.sqrt(3)*t;this.pauseLeftMarker.attr("x",n-.375*this.config.r*t),this.pauseLeftMarker.attr("y",e-o/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",o),this.pauseRightMarker.attr("x",n+1/8*this.config.r*t),this.pauseRightMarker.attr("y",e-o/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",o)},o.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},o.prototype.getStartMarkerPath=function(e,t,n){n=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},t.default=o},83421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LINE_STYLE=t.AREA_STYLE=void 0;var c=n(51385),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h={stroke:"#C5C5C5",strokeOpacity:.85},p=(t.LINE_STYLE=h,{fill:"#CACED4",opacity:.85}),n=(t.AREA_STYLE=p,r.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,r=e.width,o=e.height,i=(e.barWidth,e.data),a=e.smooth,s=e.isArea,u=e.lineStyle,e=e.areaStyle,l=this.group.addGroup({name:"trend-group"});i&&(a=(0,c.dataToPath)(i,r,o,a),l.addShape("path",{attrs:f({path:a},u),name:"trend-line"}),s)&&(u=(0,c.linePathToAreaPath)(a,r,o,i),l.addShape("path",{attrs:f({path:u},e),name:"trend-area"})),this.intervalConfig&&l.addShape("path",{attrs:f({path:(0,c.dataToRectPath)(this.intervalConfig.data,r,o,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),l.move(t,n)},r.prototype.destory=function(){this.group.destroy()},r);function r(e){var t=e.x,t=void 0===t?0:t,n=e.y,n=void 0===n?0:n,r=e.width,r=void 0===r?200:r,o=e.height,o=void 0===o?26:o,i=e.smooth,i=void 0===i||i,a=e.isArea,a=void 0!==a&&a,s=e.data,s=void 0===s?[]:s,u=e.lineStyle,l=e.areaStyle,c=e.group,e=e.interval,e=void 0===e?null:e;this.group=c,this.x=t,this.y=n,this.width=r,this.height=o,this.data=s,this.smooth=i,this.isArea=a,this.lineStyle=Object.assign({},h,u),this.areaStyle=Object.assign({},p,l),this.intervalConfig=e,this.renderLine()}t.default=n},1187:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TICK_LINE_STYLE=t.TICK_LABEL_STYLE=t.TEXT_STYLE=t.HANDLER_STYLE=t.FOREGROUND_STYLE=t.DEFAULT_HANDLER_WIDTH=t.BACKGROUND_STYLE=void 0;var _=n(31834),r=n(43708),h=o(n(83421)),p=o(n(82010)),x=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(86627)),s=n(41520);function u(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(u=function(e){return e?n:t})(e))}function o(e){return e&&e.__esModule?e:{default:e}}var S=function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=r.ext.transform,O={fill:"#416180",opacity:.05},P=(t.BACKGROUND_STYLE=O,{fill:"#416180",opacity:.15,radius:5}),E={fill:"#5B8FF9",opacity:.3,cursor:"grab"},k=(t.FOREGROUND_STYLE=E,{width:t.DEFAULT_HANDLER_WIDTH=2,height:24}),M=(t.HANDLER_STYLE=k,{textBaseline:"middle",fill:"#000",opacity:.45}),j=(t.TEXT_STYLE=M,{textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}),C=(t.TICK_LABEL_STYLE=j,{lineWidth:1,stroke:"#ccc"}),n=(t.TICK_LINE_STYLE=C,i.prototype.update=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.minText,a=e.maxText,s=e.start,e=e.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(e,0)),(0,_.assign)(this,{x:t,y:n,width:r,height:o,minText:i,maxText:a}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var o=this,e=this.width,i=this.height,t=this.timeBarType,n=("trend"===t&&(0,_.size)((0,_.get)(this.trendCfg,"data"))&&(n=new h.default(S(S({x:this.x,y:this.y,width:e,height:i},this.trendCfg),{group:this.group})),this.trendComponent=n),this.group.addGroup({name:"slider-group"})),r=(n.addShape("rect",{attrs:S({x:0,y:0,width:e,height:i},this.backgroundStyle),name:"background"}),this.group.addGroup()),r=("trend"===t?(this.minTextShape=r.addShape("text",{attrs:S({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=r.addShape("text",{attrs:S({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=r.addShape("text",{attrs:S({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=r.addShape("text",{attrs:S({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:S({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(e){e.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(e){e.target.attr("cursor",o.foregroundStyle.cursor||"grab")}),(0,_.get)(this.handlerStyle,"width",2)),a=(0,_.get)(this.handlerStyle,"height",24),s=this.group.addGroup({name:"minHandlerShape"}),s=(this.minHandlerShape=new p.default({name:"minHandlerShape",group:s,type:t,x:this.x,y:this.y,width:r,height:a,style:this.handlerStyle}),this.group.addGroup({name:"maxHandlerShape"})),u=(this.maxHandlerShape=new p.default({name:"maxHandlerShape",group:s,type:t,x:this.x,y:this.y,width:r,height:a,style:this.handlerStyle}),this.ticks),l=e/(u.length-1),c=(this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(e){e.destroy()}),-1/0),f=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=u.map(function(e,t){o.tickPosList.push(o.x+t*l),o.tickLabelFormatter?(r=o.tickLabelFormatter(e),(0,_.isString)(r)||(r=r&&e.date)):r=e.date;var e=o.x+t*l,n=o.y+i+5,r=o.group.addShape("text",{attrs:S({x:e,y:n,text:r,fontFamily:o.fontFamily||"Arial, sans-serif"},o.tickLabelStyle),name:"tick-label"}),n=((0,_.isNumber)(f)&&t!==u.length-1&&(e=d([1,0,0,0,1,0,0,0,1],[["t",-e,-n],["r",f],["t",e-5,n+2]]),r.attr({textAlign:"left",matrix:e})),0===t?r.attr({textAlign:"left"}):t!==u.length-1&&r.attr({textAlign:"right"}),o.group.addShape("line",{attrs:S({x1:o.x+t*l,y1:o.y+i+2,x2:o.x+t*l,y2:o.y+i+6},o.tickLineStyle),name:"tick-line"})),e=(n.toBack(),r.getBBox());return e.minX>c?(r.show(),n.show(),c=e.minX+e.width+10):(r.hide(),n.hide()),r}),this.controllerBtnGroup=new x.default(S({group:this.group,x:this.x,y:this.y+i+25,width:e,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),n.move(this.x,this.y),this.bindEvents(),this.currentMode===x.TIME_TYPE.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var n=this,e=this.group.find(function(e){return"minHandlerShape"===e.get("name")}),e=(e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape))),this.group.find(function(e){return"maxHandlerShape"===e.get("name")}));e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(s.PLAY_PAUSE_BTN,":click"),function(){n.isPlay=!n.isPlay,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()}),this.group.on("".concat(s.NEXT_STEP_BTN,":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(.01),n.updateUI()}),this.group.on("".concat(s.PRE_STEP_BTN,":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(-.01),n.updateUI()}),this.group.on(s.TIMEBAR_CONFIG_CHANGE,function(e){var t=e.type,e=e.speed;n.currentSpeed=e,(n.currentMode=t)===x.TIME_TYPE.SINGLE?(n.minHandlerShape.hide(),n.foregroundShape.hide(),n.minTextShape.hide()):t===x.TIME_TYPE.RANGE&&(n.minHandlerShape.show(),n.foregroundShape.show(),n.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e));case this.maxHandlerShape:return t=0-this.end,n=1-this.end,Math.min(n,Math.max(t,e));case this.foregroundShape:return t=0-this.start,n=1-this.end,Math.min(n,Math.max(t,e));default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(this.currentHandler)switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}else this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):null==t?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date},i.prototype.updateUI=function(){var n=this,e=(this.start<0&&(this.start=0),1<this.start&&(this.start=1),1<this.end&&(this.end=1),this.end<0&&(this.end=0),this.x+this.start*this.width),t=this.x+this.end*this.width,r=(this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",t-e),(0,_.get)(this.handlerStyle,"width",2)),o=(this.setText(this.minText,this.maxText),this.dodgeText([e,t])),i=o[0],o=o[1];this.minHandlerShape.setX(e-r/2),(0,_.each)(i,function(e,t){return n.minTextShape.attr(t,e)}),this.maxHandlerShape.setX(t-r/2),(0,_.each)(o,function(e,t){return n.maxTextShape.attr(t,e)}),this.currentMode===x.TIME_TYPE.RANGE?this.graph.emit(s.VALUE_CHANGE,{value:[this.start,this.end].sort()}):this.currentMode===x.TIME_TYPE.SINGLE&&this.graph.emit(s.VALUE_CHANGE,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t=(0,_.get)(this.handlerStyle,"width",2),n=this.minTextShape,r=this.maxTextShape,o=e[0],e=e[1],i=!1,a=(e<o&&(o=(a=[e,o])[0],e=a[1],n=(a=[r,n])[0],r=a[1],i=!0),n.getBBox()),s=r.getBBox(),u=null,l=null;return"trend"===this.timeBarType?(u=o-a.width<this.x+2?{x:o+t/2+2,textAlign:"left"}:{x:o-t/2-2,textAlign:"right"},l=e+s.width>this.x+this.width?{x:e-t/2-2,textAlign:"right"}:{x:e+t/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(u=n.attr("x")>a.width?{x:o,textAlign:"center"}:{x:o,textAlign:"left"},l=r.attr("x")>this.width-s.width?{x:e,textAlign:"right"}:{x:e,textAlign:"center"}),i?[l,u]:[u,l]},i.prototype.startPlay=function(){var r=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var e=r.ticks,t=r.width,n=r.currentSpeed,t=t/e.length/(1e3*(10-n)/60),e=r.adjustOffsetRange(t/r.width);r.updateStartEnd(e),r.updateUI(),r.isPlay&&(r.playHandler=r.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(s.TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e)&&this.graph.emit(s.TIMELINE_END,null)},i.prototype.destory=function(){this.graph.off(s.VALUE_CHANGE,function(){});var e=this.group,t=e.find(function(e){return"minHandlerShape"===e.get("name")}),t=(t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy()),e.find(function(e){return"maxHandlerShape"===e.get("name")}));t&&(t.off("maxHandlerShape-handler:mousedown"),t.off("maxHandlerShape-handler:touchstart"),t.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(s.PLAY_PAUSE_BTN,":click")),e.off("".concat(s.NEXT_STEP_BTN,":click")),e.off("".concat(s.PRE_STEP_BTN,":click")),e.off(s.TIMEBAR_CONFIG_CHANGE),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i);function i(e){var n=this,t=(this.prevX=0,this.onMouseDown=function(t){return function(e){n.currentHandler=t;e=e.originalEvent,e.stopPropagation(),e.preventDefault(),n.prevX=(0,_.get)(e,"touches.0.pageX",e.pageX),e=n.canvas.get("container");e.addEventListener("mousemove",n.onMouseMove),e.addEventListener("mouseup",n.onMouseUp),e.addEventListener("mouseleave",n.onMouseUp),e.addEventListener("touchmove",n.onMouseMove),e.addEventListener("touchend",n.onMouseUp),e.addEventListener("touchcancel",n.onMouseUp)}},this.onMouseMove=function(e){e.stopPropagation(),e.preventDefault();var e=(0,_.get)(e,"touches.0.pageX",e.pageX),t=e-n.prevX,t=n.adjustOffsetRange(t/n.width);n.updateStartEnd(t),n.updateUI(),n.prevX=e},this.onMouseUp=function(){n.currentHandler&&(n.currentHandler=void 0);var e=n.canvas.get("container");e&&(e.removeEventListener("mousemove",n.onMouseMove),e.removeEventListener("mouseup",n.onMouseUp),e.removeEventListener("mouseleave",n.onMouseUp),e.removeEventListener("touchmove",n.onMouseMove),e.removeEventListener("touchend",n.onMouseUp),e.removeEventListener("touchcancel",n.onMouseUp))},e.x),t=void 0===t?0:t,r=e.y,r=void 0===r?0:r,o=e.width,o=void 0===o?100:o,i=e.height,a=e.padding,a=void 0===a?10:a,s=e.trendCfg,u=e.controllerCfg,u=void 0===u?{speed:1}:u,l=e.backgroundStyle,l=void 0===l?{}:l,c=e.foregroundStyle,c=void 0===c?{}:c,f=e.handlerStyle,f=void 0===f?{}:f,h=e.textStyle,h=void 0===h?{}:h,p=e.start,p=void 0===p?0:p,d=e.end,d=void 0===d?1:d,y=e.minText,y=void 0===y?"":y,g=e.maxText,g=void 0===g?"":g,v=e.group,m=e.graph,b=e.canvas,w=e.tick,w=void 0===w?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(e){return e},ticks:[]}:w,e=e.type;this.graph=m,this.canvas=b,this.group=v,this.timeBarType=e,this.x=t,this.y=r,this.width=o,this.height=i,this.padding=a,this.ticks=w.ticks,this.trendCfg=s,this.controllerCfg=u,this.currentSpeed=u.speed||1,this.tickLabelFormatter=w.tickLabelFormatter,"trend"===e?this.backgroundStyle=S(S({},O),l):"simple"===e&&(this.backgroundStyle=S(S({},P),l)),this.foregroundStyle=S(S({},E),c),this.handlerStyle=S(S({},k),f),this.textStyle=S(S({},M),h),this.tickLabelStyle=S(S({},j),w.tickLabelStyle),this.tickLineStyle=S(S({},C),w.tickLineStyle),this.currentMode=u.defaultTimeType||x.TIME_TYPE.RANGE,this.start=p,this.end=d,this.minText=y,this.maxText=g,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}t.default=n},42875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(39269),a=n(31834),r=o(n(78146)),n=o(n(28813));function o(e){return e&&e.__esModule?e:{default:e}}s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};"undefined"!=typeof document&&(0,n.default)("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var s,n=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return s(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,n=this.get("graph"),e=this.get("getContent")(n),r=e,e=((0,a.isString)(e)&&(r=(0,i.createDom)(e)),this.get("className"));r.setAttribute("class",e||"g6-component-toolbar");var e=(e=this.get("container"))||this.get("graph").get("container"),o=((e=(0,a.isString)(e)?document.getElementById(e):e).appendChild(r),this.set("toolBar",r),this.get("handleClick")),e=(r.addEventListener("click",function(e){var e=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),"HTML"===n.tagName)return t.push(document,window),t;n=n.parentElement}return t}(e).filter(function(e){return"LI"===e.nodeName});0!==e.length&&(e=e[0].getAttribute("code"))&&(o?o(e,n):t.handleDefaultOperator(e))}),this.get("position"));e&&(0,i.modifyCSS)(r,{top:"".concat(e.y,"px"),left:"".concat(e.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var e=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),r=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),o=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');n&&r&&o&&i&&(n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4"),o.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),e.on("stackchange",function(e){var t=e.undoStack,e=e.redoStack,t=t.length,e=e.length;0===t?(n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),r.removeAttribute("style")),0===e?(o.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(o.removeAttribute("style"),i.removeAttribute("style"))}))},e.prototype.undo=function(){var n=this.get("graph"),e=n.getUndoStack();if(e&&0!==e.length){var t=e.pop();if(t){var e=t.action,r=(n.pushStack(e,(0,a.clone)(t.data),"redo"),t.data.before);if(r="add"===e?t.data.after:r)switch(e){case"visible":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=n.findById(e.id);e.visible?n.showItem(t,!1):n.hideItem(t,!1)})});break;case"render":case"update":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=n.findById(e.id);delete e.id,n.updateItem(t,e,!1),"combo"===t.getType()&&n.updateCombo(t)})});break;case"changedata":n.changeData(r,!1);break;case"delete":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=e.itemType;delete e.itemType,n.addItem(t,e,!1)})});break;case"add":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){n.removeItem(e.id,!1)})});break;case"updateComboTree":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){n.updateComboTree(e.id,e.parentId,!1)})});break;case"createCombo":var o=t.data.after.combos,o=o[o.length-1];Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){n.updateComboTree(e.id,e.parentId,!1)})}),n.removeItem(o.id,!1);break;case"uncombo":var i=r.combos[r.combos.length-1],o=r.nodes.concat(r.combos).map(function(e){return e.id}).filter(function(e){return e!==i.id});n.createCombo(i,o,!1);break;case"layout":n.updateLayout(r,void 0,void 0,!1)}}}},e.prototype.redo=function(){var n=this.get("graph"),e=n.getRedoStack();if(e&&0!==e.length){var t=e.pop();if(t){var e=t.action,r=t.data.after;if(n.pushStack(e,(0,a.clone)(t.data)),r="delete"===e?t.data.before:r)switch(e){case"visible":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=n.findById(e.id);e.visible?n.showItem(t,!1):n.hideItem(t,!1)})});break;case"render":case"update":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=n.findById(e.id);delete e.id,n.updateItem(t,e,!1),"combo"===t.getType()&&n.updateCombo(t)})});break;case"changedata":n.changeData(r,!1);break;case"delete":r.edges&&r.edges.forEach(function(e){n.removeItem(e.id,!1)}),r.nodes&&r.nodes.forEach(function(e){n.removeItem(e.id,!1)}),r.combos&&r.combos.forEach(function(e){n.removeItem(e.id,!1)});break;case"add":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){var t=e.itemType;delete e.itemType,n.addItem(t,e,!1)})});break;case"updateComboTree":Object.keys(r).forEach(function(e){e=r[e];e&&e.forEach(function(e){n.updateComboTree(e.id,e.parentId,!1)})});break;case"createCombo":var o=r.combos[r.combos.length-1];n.createCombo(o,o.children.map(function(e){return e.id}),!1);break;case"uncombo":o=t.data.before.combos,o=o[o.length-1];n.uncombo(o.id,!1);break;case"layout":n.updateLayout(r,void 0,void 0,!1)}}}},e.prototype.zoomOut=function(){var e=this.get("graph"),t=e.getZoom(),n=1/(1-.05*this.get("zoomSensitivity"));n*t>(this.get("maxZoom")||e.get("maxZoom"))||e.zoomTo(t*n)},e.prototype.zoomIn=function(){var e=this.get("graph"),t=e.getZoom(),n=1-.05*this.get("zoomSensitivity");n*t<(this.get("minZoom")||e.get("minZoom"))||e.zoomTo(t*n)},e.prototype.realZoom=function(){this.get("graph").zoomTo(1)},e.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},e.prototype.handleDefaultOperator=function(e){switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},e.prototype.destroy=function(){var e=this.get("toolBar"),t=(e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=(0,a.isString)(t)?document.getElementById(t):t).removeChild(e)),this.get("handleClick"));t&&e.removeEventListener("click",t)},e}(r.default);t.default=n},61912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(39269),c=n(31834),r=o(n(28813)),n=o(n(78146));function o(e){return e&&e.__esModule?e:{default:e}}i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};"undefined"!=typeof document&&(0,r.default)("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var i,r=function(t){function e(e){return t.call(this,e)||this}var n=e,r=t;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return i(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return"\n          <h4 class='tooltip-type'>".concat(e.item.getType(),"</h4>\n          <span class='tooltip-id'>ID").concat(e.item.getID(),"</span>\n        ")},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",n=(0,l.createDom)("<div class='".concat(e,"'></div>")),e=(e=t.get("container"))||t.get("graph").get("container");(0,c.isString)(e)&&(e=document.getElementById(e)),(0,l.modifyCSS)(n,{position:"absolute",visibility:"hidden",display:"none"}),e.appendChild(n),"click"!==t.get("trigger")&&(n.addEventListener("mouseenter",function(e){(0,l.modifyCSS)(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(e){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(e){var t,n=this.get("itemTypes");e.item&&e.item.getType&&-1===n.indexOf(e.item.getType())||(n=e.item,t=this.get("graph"),this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),t.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(e),t.emit("tooltipchange",{item:e.item,action:"show"})))},e.prototype.onMouseEnter=function(e){var t,n=this.get("itemTypes");e.item&&e.item.getType&&-1===n.indexOf(e.item.getType())||(n=e.item,t=this.get("graph"),this.currentTarget=n,this.showTooltip(e),t.emit("tooltipchange",{item:e.item,action:"show"}))},e.prototype.onMouseMove=function(e){var t=this.get("itemTypes");e.item&&e.item.getType&&-1===t.indexOf(e.item.getType())||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var e=this.get("tooltip");e&&(e.innerHTML="")},e.prototype.showTooltip=function(e){var t,n;e.item&&(t=this.get("itemTypes"),e.item.getType&&-1===t.indexOf(e.item.getType())||(t=this.get("tooltip"),n=this.get("getContent")(e),(0,c.isString)(n)?t.innerHTML=n:(this.clearContainer(),t.appendChild(n)),this.updatePosition(e)))},e.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&(0,l.modifyCSS)(e,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(e){var t,n,r,o,i,a,s=this.get("shouldBegin"),u=this.get("tooltip");s(e)?(t=(s=this.get("graph")).get("width"),n=s.get("height"),r=this.get("offsetX")||0,o=this.get("offsetY")||0,a=s.getPointByClient(e.clientX,e.clientY),i=this.get("fixToNode"),(e=e.item).getType&&"node"===e.getType()&&i&&(0,c.isArray)(i)&&2<=i.length&&(a={x:(e=e.getBBox()).minX+e.width*i[0],y:e.minY+e.height*i[1]}),i=(e=s.getCanvasByPoint(a.x,a.y)).x,a=e.y,s={x:i+(e=s.getContainer()).offsetLeft+r,y:a+e.offsetTop+o},(0,l.modifyCSS)(u,{visibility:"visible",display:"unset"}),i+(e=u.getBoundingClientRect()).width+r>t&&(s.x-=e.width+r),a+e.height+o>n&&(s.y-=e.height+o,s.y<0)&&(s.y=0),(0,l.modifyCSS)(u,{left:"".concat(s.x,"px"),top:"".concat(s.y,"px")})):(0,l.modifyCSS)(u,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var e,t=this.get("tooltip");t&&(e=(e=this.get("container"))||this.get("graph").get("container"),(e=(0,c.isString)(e)?document.getElementById(e):e).removeChild(t))},e}(n.default);t.default=r},27996:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var r={version:!0},o=(t.version=t.default=void 0,function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(86431)));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),o.default.version="4.8.22";n=o.default;t.default=n,t.version="4.8.22"},43518:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphEnum=void 0,(t=t.GraphEnum||(t.GraphEnum={})).DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""},24328:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.GraphWithEvent=void 0,o=a(n(12325)).default,i(s,o),s.prototype.appendEvent=function(e,t){this.eventPool[e]||(this.eventPool[e]=[]),this.eventPool[e].push(t)},s.prototype.removeEvent=function(e,t){this.eventPool[e]&&-1<(t=this.eventPool[e].indexOf(t))&&this.eventPool[e].splice(t,1)},s.prototype.emitEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.eventPool[e]&&this.eventPool[e].forEach(function(e){e.apply(void 0,t)})},s.prototype.setNode=function(e,t){return o.prototype.setNode.call(this,e,t),this.emitEvent("nodeAdd",e,t),this},s.prototype.removeNode=function(e){return o.prototype.removeNode.call(this,e),this.emitEvent("nodeRemove",e),this},s.prototype.setEdge=function(e,t,n,r){return o.prototype.setEdge.call(this,e,t,n,r),this.emitEvent("edgeAdd",e,t,n,r),this},s.prototype.removeEdge=function(e,t,n){return o.prototype.removeEdge.call(this,e,t,n),this.emitEvent("edgeRemove",e,t,n),this},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.eventPool={},e}t.GraphWithEvent=a},12325:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=(Object.defineProperty(t,"__esModule",{value:!0}),n(1875)),o=n(43518),s=n(1875),u=n(59264),l={compound:!1,multigraph:!1,directed:!0};function c(e){var a=this,e=(void 0===e&&(e={}),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=o.GraphEnum.GRAPH_NODE,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return a.directed},this.isMultigraph=function(){return a.multigraph},this.isCompound=function(){return a.compound},this.setGraph=function(e){return a.label=e,a},this.graph=function(){return a.label},this.setDefaultNodeLabel=function(e){return(0,i.isFunction)(e)?a.defaultNodeLabelFn=e:a.defaultNodeLabelFn=function(){return e},a},this.nodeCount=function(){return a.nodeCountNum},this.node=function(e){return a.nodesLabelMap.get(e)},this.nodes=function(){return Array.from(a.nodesLabelMap.keys())},this.sources=function(){return a.nodes().filter(function(e){return!(null!=(e=a.inEdgesMap.get(e))&&e.size)})},this.sinks=function(){return a.nodes().filter(function(e){return!(null!=(e=a.outEdgesMap.get(e))&&e.size)})},this.setNodes=function(e,t){return e.map(function(e){return a.setNode(e,t)}),a},this.hasNode=function(e){return a.nodesLabelMap.has(e)},this.checkCompound=function(){if(!a.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(e){if(a.isCompound()){var t=null==(t=a.parentMap)?void 0:t.get(e);if(t!==a.GRAPH_NODE)return t}},this.removeFromParentsChildList=function(e){var t=a.parentMap.get(e);a.childrenMap.get(t).delete(e)},this.setParent=function(e,t){var n;a.checkCompound();for(var r=void 0===t?a.GRAPH_NODE:t,o=a.parent(r);o;){if(e===o)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");o=a.parent(o)}t&&a.setNode(t),a.setNode(e),a.removeFromParentsChildList(e),null!=(i=a.parentMap)&&i.set(e,r);var i=a.childrenMap.get(r);return i.set(e,!0),null!=(n=a.childrenMap)&&n.set(r,i),a},this.children=function(e){var t,n=void 0===e?a.GRAPH_NODE:e;return a.isCompound()?(t=null==(t=a.childrenMap)?void 0:t.get(n))?Array.from(t.keys()):void 0:n===a.GRAPH_NODE?a.nodes():e&&a.hasNode(e)?[]:void 0},this.predecessors=function(e){e=a.predecessorsMap.get(e);return e?Array.from(e.keys()):void 0},this.successors=function(e){e=a.successorsMap.get(e);return e?Array.from(e.keys()):void 0},this.neighbors=function(e){var t;if(a.hasNode(e))return Array.from(new Set(null==(t=a.predecessors(e))?void 0:t.concat(a.successors(e))))},this.isLeaf=function(e){var t;return a.isDirected()?!(null!=(t=a.successors(e))&&t.length):!(null!=(t=a.neighbors(e))&&t.length)},this.filterNodes=function(t){var e=a.directed,n=a.multigraph,r=a.compound,o=new c({directed:e,multigraph:n,compound:r});return o.setGraph(a.graph()),a.nodes().forEach(function(e){t(e)&&o.setNode(e,a.node(e))}),a.edges().forEach(function(e){o.hasNode(e.v)&&o.hasNode(e.w)&&o.setEdgeObj(e,a.edge(e))}),r&&o.nodes().forEach(function(t){o.setParent(t,function(){for(var e=a.parent(t);void 0!==e&&!o.hasNode(e);)e=a.parent(e);return e}())}),o},this.setDefaultEdgeLabel=function(e){return(0,i.isFunction)(e)?a.defaultEdgeLabelFn=e:a.defaultEdgeLabelFn=function(){return e},a},this.edgeCount=function(){return a.edgeCountNum},this.setEdgeObj=function(e,t){return a.setEdge(e.v,e.w,t,e.name)},this.setPath=function(e,n){return e.reduce(function(e,t){return a.setEdge(e,t,n),t}),a},this.edgeFromArgs=function(e,t,n){return a.edge({v:e,w:t,name:n})},this.edge=function(e){return a.edgesLabelsMap.get((0,s.edgeObjToId)(a.isDirected(),e))},this.hasEdge=function(e,t,n){return a.edgesLabelsMap.has((0,s.edgeObjToId)(a.isDirected(),{v:e,w:t,name:n}))},this.removeEdgeObj=function(e){var t=e.v,n=e.w,e=e.name;return a.removeEdge(t,n,e)},this.edges=function(){return Array.from(a.edgesMap.values())},this.inEdges=function(e,t){e=a.inEdgesMap.get(e);if(e)return Array.from(e.values()).filter(function(e){return!t||e.v===t})},this.outEdges=function(e,t){e=a.outEdgesMap.get(e);if(e)return Array.from(e.values()).filter(function(e){return!t||e.w===t})},this.nodeEdges=function(e,t){var n;return!a.hasNode(e)||null==(n=a.inEdges(e,t))?void 0:n.concat(a.outEdges(e,t))},this.toJSON=function(){return(0,u.write)(a)},this.nodeInDegree=function(e){e=a.inEdgesMap.get(e);return e?e.size:0},this.nodeOutDegree=function(e){e=a.outEdgesMap.get(e);return e?e.size:0},this.nodeDegree=function(e){return a.nodeInDegree(e)+a.nodeOutDegree(e)},this.source=function(e){return e.v},this.target=function(e){return e.w},r(r({},l),e));this.compound=e.compound,this.directed=e.directed,this.multigraph=e.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}c.prototype.setNode=function(t,e){var n=this.nodesLabelMap,r=this.defaultNodeLabelFn,o=this.isCompound,i=this.parentMap,a=this.childrenMap,s=this.inEdgesMap,u=this.outEdgesMap,l=this.predecessorsMap,c=this.successorsMap;return n.has(t)?void 0!==e&&n.set(t,e):(n.set(t,e||r(t)),o()&&(null!=i&&i.set(t,this.GRAPH_NODE),null!=a&&a.set(t,new Map),null!=a&&a.has(this.GRAPH_NODE)||null==a||a.set(this.GRAPH_NODE,new Map),null!=(n=null==a?void 0:a.get(this.GRAPH_NODE)))&&n.set(t,!0),[s,u,l,c].forEach(function(e){return e.set(t,new Map)}),this.nodeCountNum+=1),this},c.prototype.removeNode=function(e){var t,n,r,o,i,a,s,u,l=this;return this.hasNode(e)&&(t=function(e){l.removeEdge(e.v,e.w,e.name)},n=this.inEdgesMap,r=this.outEdgesMap,o=this.predecessorsMap,i=this.successorsMap,a=this.nodesLabelMap,this.isCompound()&&(this.removeFromParentsChildList(e),null!=(s=this.parentMap)&&s.delete(e),null!=(s=this.children(e))&&s.forEach(function(e){return l.setParent(e)}),null!=(s=this.childrenMap))&&s.delete(e),s=n.get(e),u=r.get(e),Array.from(s.values()).forEach(t),Array.from(u.values()).forEach(t),a.delete(e),n.delete(e),r.delete(e),o.delete(e),i.delete(e),--this.nodeCountNum),this},c.prototype.setEdge=function(e,t,n,r){var e=(0,s.edgeArgsToObj)(this.isDirected(),e,t,r),t=(0,s.edgeObjToId)(this.isDirected(),e),o=e.v,i=e.w;if(this.edgesLabelsMap.has(t))this.edgesLabelsMap.set(t,n);else{if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(o),this.setNode(i),this.edgesLabelsMap.set(t,n||this.defaultEdgeLabelFn(o,i,r)),Object.freeze(e),this.edgesMap.set(t,e);var n=this.predecessorsMap.get(i),r=this.successorsMap.get(o);(0,s.incrementOrInitEntry)(n,o),(0,s.incrementOrInitEntry)(r,i),null!=(n=this.inEdgesMap.get(i))&&n.set(t,e),null!=(r=this.outEdgesMap.get(o))&&r.set(t,e),this.edgeCountNum+=1}return this},c.prototype.removeEdge=function(e,t,n){var r,o=(0,i.edgeArgsToId)(this.isDirected(),e,t,n);return this.edgesMap.get(o)&&(t=(e=(0,s.edgeArgsToObj)(this.isDirected(),e,t,n)).v,n=e.w,this.edgesLabelsMap.delete(o),this.edgesMap.delete(o),e=this.predecessorsMap.get(n),r=this.successorsMap.get(t),(0,s.decrementOrRemoveEntry)(e,t),(0,s.decrementOrRemoveEntry)(r,n),this.inEdgesMap.get(n).delete(o),this.outEdgesMap.get(t).delete(o),--this.edgeCountNum),this},c.fromJSON=u.read,t.default=c},59264:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.read=t.write=void 0,r(n(12325)));t.write=function(e){var n,t,e={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e).nodes().map(function(e){e={id:e,value:t.node(e),parent:t.parent(e)};return void 0===e.value&&delete e.value,void 0===e.parent&&delete e.parent,e}),edges:(n=e).edges().map(function(e){var t=n.edge(e),t={v:e.v,w:e.w,value:t,name:e.name};return void 0===t.name&&delete t.name,void 0===t.value&&delete t.value,t}),value:e.graph()};return void 0===e.value&&delete e.value,e},t.read=function(e){var t=new o.default(e.options);return void 0!==e.value&&t.setGraph(e.value),e.nodes.forEach(function(e){t.setNode(e.id,e.value),e.parent&&t.setParent(e.id,e.parent)}),e.edges.forEach(function(e){t.setEdge(e.v,e.w,e.value,e.name)}),t}},49033:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var a=this;this.arr=[],this.keyIndice=new Map,this.size=function(){return a.arr.length},this.keys=function(){return a.arr.map(function(e){return e.key})},this.has=function(e){return a.keyIndice.has(e)},this.priority=function(e){e=a.keyIndice.get(e);if(void 0!==e)return a.arr[e].priority},this.swap=function(e,t){var n=a.arr,r=a.keyIndice,o=[n[e],n[t]],i=o[0],o=o[1];n[e]=o,n[t]=i,r.set(i.key,t),r.set(o.key,e)},this.innerDecrease=function(e){for(var t,n,r=a.arr,o=r[e].priority,i=e;0!==i&&!((null==(t=r[n=i>>1])?void 0:t.priority)<o);)a.swap(i,n),i=n},this.heapify=function(e){var t=a.arr,n=e<<1,r=1+n,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,(o=r<t.length?t[r].priority<t[o].priority?r:o:o)!==e)&&(a.swap(e,o),a.heapify(o))},this.min=function(){if(0===a.size())throw new Error("Queue underflow");return a.arr[0].key},this.add=function(e,t){var n,r=a.keyIndice,o=a.arr;return!r.has(e)&&(n=o.length,r.set(e,n),o.push({key:e,priority:t}),a.innerDecrease(n),!0)},this.removeMin=function(){a.swap(0,a.arr.length-1);var e=a.arr.pop();return a.keyIndice.delete(e.key),a.heapify(0),e.key},this.decrease=function(e,t){if(!a.has(e))throw new Error("There's no key named ".concat(e));var n=a.keyIndice.get(e);if(t>a.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(e," Old: + ").concat(a.arr[n].priority," New: ").concat(t));a.arr[n].priority=t,a.innerDecrease(n)}}},9164:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(i){var a=new Set,s=[];return i.nodes().forEach(function(e){for(var t,n=[],r=[e];0<r.length;){var o=r.pop();a.has(o)||(a.add(o),n.push(o),null!=(t=i.successors(o))&&t.forEach(function(e){return r.push(e)}),null==(t=i.predecessors(o)))||t.forEach(function(e){return r.push(e)})}n.length&&s.push(n)}),s}},38825:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e,n){function r(e){return t.isDirected()?t.successors(e):t.neighbors(e)}var o=[],i=[];return(Array.isArray(e)?e:[e]).forEach(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(n,e,r,o,i,a){o.includes(e)||(o.push(e),r||a.push(e),i(e).forEach(function(e){return t(n,e,r,o,i,a)}),r&&a.push(e))}(t,e,"post"===n,i,r,o)}),o}},86684:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(38413)));t.default=function(t,n,r){var o={};return t.nodes().forEach(function(e){return o[String(e)]=(0,i.default)(t,e,n,r),o}),o}},38413:function(e,t,n){"use strict";function o(){return 1}function i(e,n,i,t){function r(e){var t=e.v!==a?e.v:e.w,n=u.get(t),r=i(e),o=s.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+r);o<n.distance&&(n.distance=o,n.predecessor=a,l.decrease(t,o))}var a,s,u=new Map,l=new c.default;for(e.nodes().forEach(function(e){var t=e===n?0:Number.POSITIVE_INFINITY;u.set(e,{distance:t}),l.add(e,t)});0<l.size()&&(a=l.removeMin(),!(s=u.get(a))||s.distance!==Number.POSITIVE_INFINITY);)t(a).forEach(r);var o={};return Array.from(u.entries()).forEach(function(e){var t=e[0],e=e[1];return o[String(t)]=e,o}),o}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(49033)));t.default=function(t,e,n,r){return i(t,e,n||o,r||function(e){return t.outEdges(e)})}},2345:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(32175)));t.default=function(t){return(0,o.default)(t).filter(function(e){return 1<e.length||1===e.length&&t.hasEdge(e[0],e[0])})}},19296:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floydWarshall=void 0;function r(){return 1}function n(t,e,n){return o=e||r,i=n||function(e){return t.outEdges(e)},a={},(s=t.nodes()).forEach(function(n){var r=String(n);a[r]={},a[r][r]={distance:0},s.forEach(function(e){n!==e&&(a[r][String(e)]={distance:Number.POSITIVE_INFINITY})}),i(n).forEach(function(e){var t=e.v===n?e.w:e.v,e=o(e);a[r][String(t)]={distance:e,predecessor:n}})}),s.forEach(function(e){var o=String(e),i=a[o];s.forEach(function(e){var e=String(e),r=a[e];s.forEach(function(e){var e=String(e),t=r[o],n=i[e],e=r[e],t=t.distance+n.distance;t<e.distance&&(e.distance=t,e.predecessor=n.predecessor)})})}),a;var o,i,a,s}t.floydWarshall=n,t.default=n},78877:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.floydWarshall=t.topsort=t.prim=t.preorder=t.postorder=t.isAcyclic=t.tarjan=t.findCycles=t.dijkstraAll=t.dijkstra=t.dfs=t.components=void 0,r(n(55119))),o=(t.prim=o.default,r(n(9164))),o=(t.components=o.default,r(n(38825))),o=(t.dfs=o.default,r(n(38413))),o=(t.dijkstra=o.default,r(n(86684))),o=(t.dijkstraAll=o.default,r(n(2345))),o=(t.findCycles=o.default,r(n(72869))),o=(t.isAcyclic=o.default,r(n(10997))),o=(t.postorder=o.default,r(n(29958))),o=(t.preorder=o.default,r(n(32175))),o=(t.tarjan=o.default,r(n(14437))),o=(t.topsort=o.default,r(n(19296)));t.floydWarshall=o.default},72869:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=(Object.defineProperty(t,"__esModule",{value:!0}),i(n(14437)));t.default=function(e){try{(0,a.default)(e)}catch(e){if(e instanceof a.CycleException)return!1;throw e}return!0}},10997:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(38825)));t.default=function(e,t){return(0,o.default)(e,t,"post")}},29958:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(38825)));t.default=function(e,t){return(0,o.default)(e,t,"pre")}},55119:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(12325))),c=r(n(49033));t.default=function(e,r){var t,o,n=new l.default,i=new Map,a=new c.default;function s(e){var t=e.v===o?e.w:e.v,n=a.priority(t);void 0!==n&&(e=r(e))<n&&(i.set(t,o),a.decrease(t,e))}if(0!==e.nodeCount()){e.nodes().forEach(function(e){a.add(e,Number.POSITIVE_INFINITY),n.setNode(e)}),a.decrease(e.nodes()[0],0);for(var u=!1;0<a.size();){if(o=a.removeMin(),i.has(o))n.setEdge(o,i.get(o));else{if(u)throw new Error("Input graph is not connected: "+e.graph());u=!0}null!=(t=e.nodeEdges(o))&&t.forEach(s)}}return n}},32175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(a){var s=0,u=[],l=new Map,c=[];return a.nodes().forEach(function(e){l.has(e)||function r(e){var t,o={onStack:!0,lowlink:s,index:s};if(l.set(e,o),s+=1,u.push(e),null!=(t=a.successors(e))&&t.forEach(function(e){var t,n;l.has(e)?null!=(t=l.get(e))&&t.onStack&&(n=l.get(e),o.lowlink=Math.min(o.lowlink,n.index)):(r(e),n=l.get(e),o.lowlink=Math.min(o.lowlink,n.lowlink))}),o.lowlink===o.index){for(var n,i=[];n=u.pop(),l.get(n).onStack=!1,i.push(n),e!==n;);c.push(i)}}(e)}),c}},14437:function(e,t){"use strict";var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),t.CycleException=void 0,n=Error,o(i,n),i);function i(){return null!==n&&n.apply(this,arguments)||this}t.CycleException=s,t.default=function(r){var o=new Set,i=new Set,a=[];if(r.sinks().forEach(function e(t){var n;if(i.has(t))throw new s;o.has(t)||(i.add(t),o.add(t),null!=(n=r.predecessors(t))&&n.forEach(e),i.delete(t),a.push(t))}),o.size!==r.nodeCount())throw new s;return a}},72927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphComplement=void 0;var r=n(52402),o=n(94562);t.isGraphComplement=function(e,t){var n;return!(!(0,r.isSimpleGraph)(e)||!(0,r.isSimpleGraph)(t)||!(0,o.containAllSameNodes)(e,t)||(0,o.containSameEdges)(e,t)||(n=e.nodeCount(),e.edgeCount()+t.edgeCount()!==n*(n-1)/2))}},94562:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isGraphContainsAnother=n.isGraphSame=n.containAllSameEdges=n.containAllSameNodes=n.isGraphOptionSame=n.getSameEdges=n.getSameNodes=n.containSameEdges=n.containSameNodes=void 0,n.containSameNodes=function(e,t){for(var n=e.nodes(),r=0;r<n.length;r++){var o=n[r];if(t.hasNode(o))return!0}return!1},n.containSameEdges=function(e,t){for(var n=e.edges(),r=0;r<n.length;r++){var o=n[r];if(t.hasEdge(o.v,o.w,o.name))return!0}return!1},n.getSameNodes=function(e,t){return e.nodes().filter(function(e){return t.hasNode(e)})},n.getSameEdges=function(e,t){return e.edges().filter(function(e){return t.hasEdge(e.v,e.w,e.name)})},n.isGraphOptionSame=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()},n.containAllSameNodes=function(e,t){return(0,n.getSameNodes)(e,t).length===e.nodes().length},n.containAllSameEdges=function(e,t){return(0,n.getSameEdges)(e,t).length===e.edges().length},n.isGraphSame=function(e,t){return(0,n.isGraphOptionSame)(e,t)&&e.nodeCount()===t.nodeCount()&&(0,n.containAllSameNodes)(e,t)&&e.edgeCount()===t.edgeCount()&&(0,n.containAllSameEdges)(e,t)},n.isGraphContainsAnother=function(e,t){return(0,n.containAllSameNodes)(e,t)&&(0,n.containAllSameEdges)(e,t)}},26382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphContainsAnother=t.isGraphSame=t.getSameNodes=t.getSameEdges=t.isGraphOptionSame=t.isGraphComplement=t.containSameNodes=t.containSameEdges=t.containAllSameNodes=t.containAllSameEdges=void 0;var r=n(94562),o=(Object.defineProperty(t,"containAllSameEdges",{enumerable:!0,get:function(){return r.containAllSameEdges}}),Object.defineProperty(t,"containAllSameNodes",{enumerable:!0,get:function(){return r.containAllSameNodes}}),Object.defineProperty(t,"containSameEdges",{enumerable:!0,get:function(){return r.containSameEdges}}),Object.defineProperty(t,"containSameNodes",{enumerable:!0,get:function(){return r.containSameNodes}}),Object.defineProperty(t,"isGraphOptionSame",{enumerable:!0,get:function(){return r.isGraphOptionSame}}),Object.defineProperty(t,"getSameEdges",{enumerable:!0,get:function(){return r.getSameEdges}}),Object.defineProperty(t,"getSameNodes",{enumerable:!0,get:function(){return r.getSameNodes}}),Object.defineProperty(t,"isGraphSame",{enumerable:!0,get:function(){return r.isGraphSame}}),Object.defineProperty(t,"isGraphContainsAnother",{enumerable:!0,get:function(){return r.isGraphContainsAnother}}),n(72927));Object.defineProperty(t,"isGraphComplement",{enumerable:!0,get:function(){return o.isGraphComplement}})},52402:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.hasSelfLoop=t.isNullGraph=t.isSimpleGraph=t.isGraph=void 0,r(n(12325)));t.isGraph=function(e){return e instanceof o.default},t.isSimpleGraph=function(e){if(e.isMultigraph())return!1;for(var t=e.edges(),n=new Map,r=0;r<t.length;r++){var o=t[r];if(o.v===o.w)return!1;var o=[o.v,o.w].sort(),i=o[0],o=o[1],i="".concat(i,"-").concat(o);if(n.has(i))return!1;n.set(i,!0)}return!0},t.isNullGraph=function(e){return 0===e.nodes().length},t.hasSelfLoop=function(e){for(var t=e.edges(),n=0;n<t.length;n++){var r=t[n];if(r.v===r.w)return!0}return!1}},43504:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(t,"__esModule",{value:!0}),t.getGraphComplement=void 0,n(52402)),l=r(n(12325));t.getGraphComplement=function(e){if(!(0,u.isSimpleGraph)(e))return null;for(var t=e.nodeCount(),n=new l.default({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),r=e.nodes(),o=0;o<t;o++){var i=r[o];n.setNode(i,e.node(i));for(var a=o+1;a<t;a++){var s=r[a];e.hasEdge(i,s)||n.setEdge(i,s)}}return n}},10910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGraphComplement=void 0;var r=n(43504);Object.defineProperty(t,"getGraphComplement",{enumerable:!0,get:function(){return r.getGraphComplement}})},54917:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.generate=t.essence=t.comparision=t.algorithm=t.GraphWithEvent=t.Graph=void 0,a(n(12325))),s=(t.Graph=a.default,n(24328)),a=(Object.defineProperty(t,"GraphWithEvent",{enumerable:!0,get:function(){return s.GraphWithEvent}}),i(n(78877))),a=(t.algorithm=a,i(n(26382))),a=(t.comparision=a,i(n(52402))),a=(t.essence=a,i(n(10910)));t.generate=a},1875:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=t.edgeObjToId=t.edgeArgsToObj=t.edgeArgsToId=t.decrementOrRemoveEntry=t.incrementOrInitEntry=void 0;var o=n(43518);function r(e,t,n,r){t=String(t),n=String(n);return!e&&n<t&&(e=t,t=n,n=e),t+o.GraphEnum.EDGE_KEY_DELIM+n+o.GraphEnum.EDGE_KEY_DELIM+(void 0===r?o.GraphEnum.DEFAULT_EDGE_NAME:r)}t.incrementOrInitEntry=function(e,t){var n=e.get(t)||0;e.set(t,n+1)},t.decrementOrRemoveEntry=function(e,t){var n=e.get(t);void 0!==n&&(0<--n?e.set(t,n):e.delete(t))},t.edgeArgsToId=r,t.edgeArgsToObj=function(e,t,n,r){var o=String(t),i=String(n),t={v:t,w:n};return!e&&i<o&&(n=t.v,t.v=t.w,t.w=n),void 0!==r&&(t.name=r),t},t.edgeObjToId=function(e,t){return r(e,t.v,t.w,t.name)},t.isFunction=function(e){return"function"==typeof e}},6977:function(e,t,n){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),n=function(){return n=[function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Array.isArray?Array.isArray(e):Object(r.a)(e,"Array")}},function(e,t,n){"use strict";t.a=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Function")}},function(e,t,n){"use strict";var r={}.toString;t.a=function(e,t){return r.call(e)==="[object "+t+"]"}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"String")}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Number")}},function(e,t,n){n=n(38).mix;e.exports={assign:n,getHeight:function(e,t,n,r){return void 0===r&&(r="height"),"center"===n?(e[r]+t[r])/2:e.height}}},function(e,t,n){"use strict";t.a=function(e){return null==e}},function(e,t,n){"use strict";var i=n(0),a=n(12);t.a=function(e,t){if(e)if(Object(i.a)(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(Object(a.a)(e))for(var o in e)if(e.hasOwnProperty(o)&&!1===t(e[o],o))break}},function(e,t,n){"use strict";var r=n(7);t.a=function(e){return Object(r.a)(e)?"":e.toString()}},function(e,t,n){"use strict";var r=n(14),o=n(3);t.a=function(e){if(!Object(r.a)(e)||!Object(o.a)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){var r=n(18);function o(e,t){this.options=t=void 0===t?{}:t,this.rootNode=r(e,t)}o.prototype.execute=function(){throw new Error("please override this method")},e.exports=o},function(e,t,n){"use strict";t.a=function(e){var t=s(e);return null!==e&&"object"===t||"function"===t}},function(e,t,n){"use strict";var r=n(1);t.a=function(e,t){return!!Object(r.a)(e)&&-1<e.indexOf(t)}},function(e,t,n){"use strict";t.a=function(e){return"object"===s(e)&&null!==e}},function(e,t,n){"use strict";var o=n(8),i=n(2),n=Object.values?function(e){return Object.values(e)}:function(n){var r=[];return Object(o.a)(n,function(e,t){Object(i.a)(n)&&"prototype"===t||r.push(e)}),r};t.a=n},function(e,t,n){"use strict";function o(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}t.a=function(e,t,n,r){return t&&o(e,t),n&&o(e,n),r&&o(e,r),e}},function(e,t,n){var i=n(35),a=["LR","RL","TB","BT","H","V"],s=["LR","RL","H"],u=a[0];e.exports=function(e,t,n){var r=t.direction||u;if(t.isHorizontal=-1<s.indexOf(r),r&&-1===a.indexOf(r))throw new TypeError("Invalid direction: "+r);r===a[0]?n(e,t):r===a[1]?(n(e,t),e.right2left()):r===a[2]?n(e,t):r===a[3]?(n(e,t),e.bottom2top()):r!==a[4]&&r!==a[5]||(o=(r=i(e,t)).left,r=r.right,n(o,t),n(r,t),t.isHorizontal?o.right2left():o.bottom2top(),r.translate(o.x-r.x,o.y-r.y),e.x=o.x,e.y=r.y,n=e.getBoundingBox(),t.isHorizontal?n.top<0&&e.translate(0,-n.top):n.left<0&&e.translate(-n.left,0));var o=t.fixedRoot;return(o=void 0===o?!0:o)&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),e}},function(e,t,n){var c=n(6),f={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var t=e.label||" ";return e.width||18*t.split("").length}};function h(e,t){var n=this;if(n.vgap=n.hgap=0,e instanceof h)return e;n.data=e;var r=t.getHGap(e),o=t.getVGap(e);return n.preH=t.getPreH(e),n.preV=t.getPreV(e),n.width=t.getWidth(e),n.height=t.getHeight(e),n.width+=n.preH,n.height+=n.preV,n.id=t.getId(e),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,o),n}c.assign(h.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(e,t){this.hgap+=e,this.vgap+=t,this.width+=2*e,this.height+=2*t},eachNode:function(e){for(var t,n=[this];t=n.shift();)e(t),n=t.children.concat(n)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t,n=[this];t=n.shift();)e(t),n=n.concat(t.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.eachNode(function(e){e.x+=t,e.y+=n,e.x+=e.preH,e.y+=e.preV})},right2left:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)}}),e.exports=function(e,t,n){var r,o=new h(e,t=c.assign({},f,t=void 0===t?{}:t)),i=[o];if(!n&&!e.collapsed)for(;r=i.shift();)if(!r.data.collapsed){var a=t.getChildren(r.data),s=a?a.length:0;if(r.children=new Array(s),a&&s)for(var u=0;u<s;u++){var l=new h(a[u],t);r.children[u]=l,i.push(l),l.parent=r,l.depth=r.depth+1}}return o}},function(e,t,n){"use strict";var i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];t(o,r)&&n.push(o)}return n}},function(e,t,n){"use strict";var a=n(7),s=n(21);t.a=function(e,t){var n=Object(s.a)(t),r=n.length;if(Object(a.a)(e))return!r;for(var o=0;o<r;o+=1){var i=n[o];if(t[i]!==e[i]||!(i in e))return!1}return!0}},function(e,t,n){"use strict";var o=n(8),i=n(2),n=Object.keys?function(e){return Object.keys(e)}:function(n){var r=[];return Object(o.a)(n,function(e,t){Object(i.a)(n)&&"prototype"===t||r.push(t)}),r};t.a=n},function(e,t,n){"use strict";var r=n(0);t.a=function(e){if(Object(r.a)(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){if(Object(r.a)(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},function(e,t,n){"use strict";var i=n(1),a=Array.prototype.splice;t.a=function(e,t){if(!Object(i.a)(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];n!==r&&void 0===o||a.call(e,o,1)}return e}},function(e,t,n){"use strict";var o=n(8),i=n(0),a=n(10);t.a=function(e,n,t){var r;return Object(i.a)(e)||Object(a.a)(e)?(r=t,Object(o.a)(e,function(e,t){r=n(r,e,t)}),r):e}},function(e,t,n){"use strict";t.a=function(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];t.has(i)||(n.push(i),t.set(i,!0))}return n}},function(e,t,n){"use strict";t.a=function(e,t){var o;return t?(Object(i.a)(t)||(o=Object(r.a)(t)?t:t.replace(/\s+/g,"").split("*"),t=function(e){for(var t="_",n=0,r=o.length;n<r;n++)t+=e[o[n]]&&e[o[n]].toString();return t}),Object(a.a)(e,t)):{0:e}};var r=n(0),i=n(2),a=n(28)},function(e,t,n){"use strict";var s=n(0),u=n(2),l=Object.prototype.hasOwnProperty;t.a=function(e,t){if(!t||!Object(s.a)(e))return{};for(var n={},r=Object(u.a)(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],a=r(i);l.call(n,a)?n[a].push(i):n[a]=[i]}return n}},function(e,t,n){"use strict";t.a=function(e,t){return e.hasOwnProperty(t)}},function(e,t,n){"use strict";var r={}.toString;t.a=function(e){return r.call(e).replace(/^\[object /,"").replace(/]$/,"")}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(2);t.a=function(a,s){var e;if(Object(r.a)(a))return(e=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,o=s?s.apply(this,t):t[0],i=e.cache;return i.has(o)?i.get(o):(r=a.apply(this,t),i.set(o,r),r)}).cache=new Map,e;throw new TypeError("Expected a function")}},function(e,t,n){"use strict";var s=n(14),u=n(1),l=n(4);t.a=function e(t,n){if(t===n)return!0;if(t&&n&&!Object(l.a)(t)&&!Object(l.a)(n)){if(Object(u.a)(t)||Object(u.a)(n)){if(t.length!==n.length)return!1;for(var r=!0,o=0;o<t.length&&(r=e(t[o],n[o]));o++);return r}if(Object(s.a)(t)||Object(s.a)(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(r=!0,o=0;o<i.length&&(r=e(t[i[o]],n[i[o]]));o++);return r}}return!1}},function(e,t,n){"use strict";var a,r=n(116),o=n(15),i=n(32),s=n(4);t.a=Object(i.a)(function(e,t){var n=(t=void 0===t?{}:t).fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,t=t.fontVariant;return(a=a||document.createElement("canvas").getContext("2d")).font=[i,t,o,n+"px",r].join(" "),a.measureText(Object(s.a)(e)?e:"").width},function(e,t){return void 0===t&&(t={}),Object(r.a)([e],Object(o.a)(t)).join("")})},function(e,t,n){var l=n(18);e.exports=function(e,t){for(var n=l(e.data,t,!0),r=l(e.data,t,!0),o=e.children.length,i=Math.round(o/2),a=t.getSide||function(e,t){return t<i?"right":"left"},s=0;s<o;s++){var u=e.children[s];("right"===a(u,s)?r:n).children.push(u)}return n.eachNode(function(e){e.isRoot()||(e.side="left")}),r.eachNode(function(e){e.isRoot()||(e.side="right")}),{left:n,right:r}}},function(e,t,n){n={compactBox:n(37),dendrogram:n(120),indented:n(122),mindmap:n(124)};e.exports=n},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o,i=n(11),a=n(119),s=n(17),u=n(6),l=(n=o=i,(i=f).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),f.prototype.execute=function(){return s(this.rootNode,this.options,a)},f),c={};function f(){return o.apply(this,arguments)||this}e.exports=function(e,t){return t=u.assign({},c,t),new l(e,t).execute()}},function(N,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(13),r=(t.d(e,"contains",function(){return n.a}),t.d(e,"includes",function(){return n.a}),t(39)),o=(t.d(e,"difference",function(){return r.a}),t(40)),i=(t.d(e,"find",function(){return o.a}),t(41)),a=(t.d(e,"findIndex",function(){return i.a}),t(42)),s=(t.d(e,"firstValue",function(){return a.a}),t(43)),u=(t.d(e,"flatten",function(){return s.a}),t(44)),l=(t.d(e,"flattenDeep",function(){return u.a}),t(45)),c=(t.d(e,"getRange",function(){return l.a}),t(46)),f=(t.d(e,"pull",function(){return c.a}),t(24)),h=(t.d(e,"pullAt",function(){return f.a}),t(25)),p=(t.d(e,"reduce",function(){return h.a}),t(47)),d=(t.d(e,"remove",function(){return p.a}),t(48)),y=(t.d(e,"sortBy",function(){return d.a}),t(49)),g=(t.d(e,"union",function(){return y.a}),t(26)),v=(t.d(e,"uniq",function(){return g.a}),t(50)),m=(t.d(e,"valuesOfKey",function(){return v.a}),t(51)),b=(t.d(e,"head",function(){return m.a}),t(52)),w=(t.d(e,"last",function(){return b.a}),t(53)),_=(t.d(e,"startsWith",function(){return w.a}),t(54)),x=(t.d(e,"endsWith",function(){return _.a}),t(19)),S=(t.d(e,"filter",function(){return x.a}),t(55)),O=(t.d(e,"every",function(){return S.a}),t(56)),P=(t.d(e,"some",function(){return O.a}),t(57)),E=(t.d(e,"group",function(){return P.a}),t(28)),k=(t.d(e,"groupBy",function(){return E.a}),t(27)),M=(t.d(e,"groupToMap",function(){return k.a}),t(58)),j=(t.d(e,"getWrapBehavior",function(){return M.a}),t(59)),C=(t.d(e,"wrapBehavior",function(){return j.a}),t(60)),T=(t.d(e,"number2color",function(){return C.a}),t(61)),A=(t.d(e,"parseRadius",function(){return T.a}),t(62)),I=(t.d(e,"clamp",function(){return A.a}),t(63)),R=(t.d(e,"fixedBase",function(){return I.a}),t(64)),D=(t.d(e,"isDecimal",function(){return R.a}),t(65)),B=(t.d(e,"isEven",function(){return D.a}),t(66)),F=(t.d(e,"isInteger",function(){return B.a}),t(67)),G=(t.d(e,"isNegative",function(){return F.a}),t(68)),z=(t.d(e,"isNumberEqual",function(){return G.a}),t(69)),U=(t.d(e,"isOdd",function(){return z.a}),t(70)),V=(t.d(e,"isPositive",function(){return U.a}),t(22)),W=(t.d(e,"max",function(){return V.a}),t(71)),Y=(t.d(e,"maxBy",function(){return W.a}),t(23)),H=(t.d(e,"min",function(){return Y.a}),t(72)),X=(t.d(e,"minBy",function(){return H.a}),t(73)),q=(t.d(e,"mod",function(){return X.a}),t(74)),J=(t.d(e,"toDegree",function(){return q.a}),t(75)),Z=(t.d(e,"toInteger",function(){return J.a}),t(76)),K=(t.d(e,"toRadian",function(){return Z.a}),t(77)),Q=(t.d(e,"forIn",function(){return K.a}),t(29)),$=(t.d(e,"has",function(){return Q.a}),t(78)),ee=(t.d(e,"hasKey",function(){return $.a}),t(79)),te=(t.d(e,"hasValue",function(){return ee.a}),t(21)),ne=(t.d(e,"keys",function(){return te.a}),t(20)),re=(t.d(e,"isMatch",function(){return ne.a}),t(15)),oe=(t.d(e,"values",function(){return re.a}),t(80)),ie=(t.d(e,"lowerCase",function(){return oe.a}),t(81)),ae=(t.d(e,"lowerFirst",function(){return ie.a}),t(82)),se=(t.d(e,"substitute",function(){return ae.a}),t(83)),ue=(t.d(e,"upperCase",function(){return se.a}),t(84)),le=(t.d(e,"upperFirst",function(){return ue.a}),t(30)),ce=(t.d(e,"getType",function(){return le.a}),t(85)),fe=(t.d(e,"isArguments",function(){return ce.a}),t(0)),he=(t.d(e,"isArray",function(){return fe.a}),t(1)),pe=(t.d(e,"isArrayLike",function(){return he.a}),t(86)),de=(t.d(e,"isBoolean",function(){return pe.a}),t(87)),ye=(t.d(e,"isDate",function(){return de.a}),t(88)),ge=(t.d(e,"isError",function(){return ye.a}),t(2)),ve=(t.d(e,"isFunction",function(){return ge.a}),t(89)),me=(t.d(e,"isFinite",function(){return ve.a}),t(7)),be=(t.d(e,"isNil",function(){return me.a}),t(90)),we=(t.d(e,"isNull",function(){return be.a}),t(5)),_e=(t.d(e,"isNumber",function(){return we.a}),t(12)),xe=(t.d(e,"isObject",function(){return _e.a}),t(14)),Se=(t.d(e,"isObjectLike",function(){return xe.a}),t(10)),Oe=(t.d(e,"isPlainObject",function(){return Se.a}),t(31)),Pe=(t.d(e,"isPrototype",function(){return Oe.a}),t(91)),Ee=(t.d(e,"isRegExp",function(){return Pe.a}),t(4)),ke=(t.d(e,"isString",function(){return Ee.a}),t(3)),Me=(t.d(e,"isType",function(){return ke.a}),t(92)),je=(t.d(e,"isUndefined",function(){return Me.a}),t(93)),Ce=(t.d(e,"isElement",function(){return je.a}),t(94)),Te=(t.d(e,"requestAnimationFrame",function(){return Ce.a}),t(95)),Ae=(t.d(e,"clearAnimationFrame",function(){return Te.a}),t(96)),Ie=(t.d(e,"augment",function(){return Ae.a}),t(97)),Re=(t.d(e,"clone",function(){return Ie.a}),t(98)),Le=(t.d(e,"debounce",function(){return Re.a}),t(32)),Ne=(t.d(e,"memoize",function(){return Le.a}),t(99)),De=(t.d(e,"deepMix",function(){return Ne.a}),t(8)),Be=(t.d(e,"each",function(){return De.a}),t(100)),Fe=(t.d(e,"extend",function(){return Be.a}),t(101)),Ge=(t.d(e,"indexOf",function(){return Fe.a}),t(102)),ze=(t.d(e,"isEmpty",function(){return Ge.a}),t(33)),Ue=(t.d(e,"isEqual",function(){return ze.a}),t(103)),Ve=(t.d(e,"isEqualWith",function(){return Ue.a}),t(104)),We=(t.d(e,"map",function(){return Ve.a}),t(105)),L=(t.d(e,"mapValues",function(){return We.a}),t(16)),Ye=(t.d(e,"mix",function(){return L.a}),t.d(e,"assign",function(){return L.a}),t(106)),He=(t.d(e,"get",function(){return Ye.a}),t(107)),Xe=(t.d(e,"set",function(){return He.a}),t(108)),qe=(t.d(e,"pick",function(){return Xe.a}),t(109)),Je=(t.d(e,"omit",function(){return qe.a}),t(110)),Ze=(t.d(e,"throttle",function(){return Je.a}),t(111)),Ke=(t.d(e,"toArray",function(){return Ze.a}),t(9)),Qe=(t.d(e,"toString",function(){return Ke.a}),t(112)),$e=(t.d(e,"uniqueId",function(){return Qe.a}),t(113)),et=(t.d(e,"noop",function(){return $e.a}),t(114)),tt=(t.d(e,"identity",function(){return et.a}),t(115)),nt=(t.d(e,"size",function(){return tt.a}),t(34)),rt=(t.d(e,"measureTextWidth",function(){return nt.a}),t(117)),ot=(t.d(e,"getEllipsisText",function(){return rt.a}),t(118));t.d(e,"Cache",function(){return ot.a})},function(e,t,n){"use strict";var r=n(19),o=n(13);t.a=function(e,t){return void 0===t&&(t=[]),Object(r.a)(e,function(e){return!Object(o.a)(t,e)})}},function(e,t,n){"use strict";var o=n(2),i=n(20),a=n(0),s=n(10);t.a=function(e,t){var n;if(Object(a.a)(e)&&(Object(o.a)(t)&&(n=t),n=Object(s.a)(t)?function(e){return Object(i.a)(e,t)}:n))for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}},function(e,t,n){"use strict";t.a=function(e,t,n){for(var r=n=void 0===n?0:n;r<e.length;r++)if(t(e[r],r))return r;return-1}},function(e,t,n){"use strict";var i=n(7),a=n(0);t.a=function(e,t){for(var n=null,r=0;r<e.length;r++){var o=e[r][t];if(!Object(i.a)(o)){n=Object(a.a)(o)?o[0]:o;break}}return n}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){if(!Object(r.a)(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},function(e,t,n){"use strict";var o=n(0);t.a=function e(t,n){if(void 0===n&&(n=[]),Object(o.a)(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}},function(e,t,n){"use strict";var i=n(0),a=n(22),s=n(23);t.a=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if(Object(i.a)(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var o=Object(a.a)(t);return{min:Object(s.a)(t),max:o}}},function(e,t,n){"use strict";var r=Array.prototype,a=r.splice,s=r.indexOf;t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var o,i=t[r];-1<(o=s.call(e,i));)a.call(e,o,1);return e}},function(e,t,n){"use strict";var s=n(1),u=n(24);t.a=function(e,t){var n=[];if(Object(s.a)(e)){for(var r=-1,o=[],i=e.length;++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}Object(u.a)(e,o)}return n}},function(e,t,n){"use strict";var r=n(0),i=n(4),a=n(2);t.a=function(e,n){var o,t=Object(a.a)(n)?function(e,t){return n(e)-n(t)}:(o=[],Object(i.a)(n)?o.push(n):Object(r.a)(n)&&(o=n),function(e,t){for(var n=0;n<o.length;n+=1){var r=o[n];if(e[r]>t[r])return 1;if(e[r]<t[r])return-1}return 0});return e.sort(t),e}},function(e,t,n){"use strict";var r=n(26);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(r.a)([].concat.apply([],e))}},function(e,t,n){"use strict";var u=n(0),l=n(7);t.a=function(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o][t];if(!Object(l.a)(i)){Object(u.a)(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];r[s]||(n.push(s),r[s]=!0)}}}return n}},function(e,t,n){"use strict";t.a=function(e){if(Object(r.a)(e))return e[0]};var r=n(1)},function(e,t,n){"use strict";t.a=function(e){if(Object(r.a)(e))return e[e.length-1]};var r=n(1)},function(e,t,n){"use strict";var r=n(0),o=n(4);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(o.a)(e))&&e[0]===t}},function(e,t,n){"use strict";var r=n(0),o=n(4);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(o.a)(e))&&e[e.length-1]===t}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}},function(e,t,n){"use strict";var i=n(27);t.a=function(e,t){if(!t)return[e];var n,r=Object(i.a)(e,t),o=[];for(n in r)o.push(r[n]);return o}},function(e,t,n){"use strict";t.a=function(e,t){return e["_wrap_"+t]}},function(e,t,n){"use strict";t.a=function(t,n){return t["_wrap_"+n]||(t["_wrap_"+n]=function(e){t[n](e)})}},function(e,t,n){"use strict";var o={};t.a=function(e){var t=o[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;o[e]=t="#"+n}return t}},function(e,t,n){"use strict";var i=n(0);t.a=function(e){var t=0,n=0,r=0,o=0;return Object(i.a)(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,{r1:t,r2:n,r3:r,r4:o}}},function(e,t,n){"use strict";t.a=function(e,t,n){return e<t?t:n<e?n:e}},function(e,t,n){"use strict";t.a=function(e,t){var t=t.toString(),n=t.indexOf(".");return-1===n?Math.round(e):(20<(t=t.substr(n+1).length)&&(t=20),parseFloat(e.toFixed(t)))}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%1!=0}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2==0}},function(e,t,n){"use strict";var r=n(5),n=Number.isInteger||function(e){return Object(r.a)(e)&&e%1==0};t.a=n},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e<0}},function(e,t,n){"use strict";t.a=function(e,t,n){return void 0===n&&(n=r),Math.abs(e-t)<n};var r=1e-5},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2!=0}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&0<e}},function(e,t,n){"use strict";var s=n(0),u=n(2);t.a=function(e,t){if(Object(s.a)(e)){for(var n,r=-1/0,o=0;o<e.length;o++){var i=e[o],a=Object(u.a)(t)?t(i):i[t];r<a&&(n=i,r=a)}return n}}},function(e,t,n){"use strict";var s=n(0),u=n(2);t.a=function(e,t){if(Object(s.a)(e)){for(var n,r=1/0,o=0;o<e.length;o++){var i=e[o],a=Object(u.a)(t)?t(i):i[t];a<r&&(n=i,r=a)}return n}}},function(e,t,n){"use strict";t.a=function(e,t){return(e%t+t)%t}},function(e,t,n){"use strict";var r=180/Math.PI;t.a=function(e){return r*e}},function(e,t,n){"use strict";t.a=parseInt},function(e,t,n){"use strict";var r=Math.PI/180;t.a=function(e){return r*e}},function(e,t,n){"use strict";n=n(8);t.a=n.a},function(e,t,n){"use strict";n=n(29);t.a=n.a},function(e,t,n){"use strict";var r=n(13),o=n(15);t.a=function(e,t){return Object(r.a)(Object(o.a)(e),t)}},function(e,t,n){"use strict";var r=n(9);t.a=function(e){return Object(r.a)(e).toLowerCase()}},function(e,t,n){"use strict";var r=n(9);t.a=function(e){e=Object(r.a)(e);return e.charAt(0).toLowerCase()+e.substring(1)}},function(e,t,n){"use strict";t.a=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(e,t){return"\\"===e.charAt(0)?e.slice(1):void 0===n[t]?"":n[t]}):e}},function(e,t,n){"use strict";var r=n(9);t.a=function(e){return Object(r.a)(e).toUpperCase()}},function(e,t,n){"use strict";var r=n(9);t.a=function(e){e=Object(r.a)(e);return e.charAt(0).toUpperCase()+e.substring(1)}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Arguments")}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Boolean")}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Date")}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"Error")}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&isFinite(e)}},function(e,t,n){"use strict";t.a=function(e){return null===e}},function(e,t,n){"use strict";var r=n(3);t.a=function(e){return Object(r.a)(e,"RegExp")}},function(e,t,n){"use strict";t.a=function(e){return void 0===e}},function(e,t,n){"use strict";t.a=function(e){return e instanceof Element||e instanceof HTMLDocument}},function(e,t,n){"use strict";t.a=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},function(e,t,n){"use strict";t.a=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},function(e,t,n){"use strict";var i=n(16),a=n(2);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var o=e[r];Object(a.a)(o)&&(o=o.prototype),Object(i.a)(n.prototype,o)}}},function(e,t,n){"use strict";var a=n(0);t.a=function e(t){if("object"!==s(t)||null===t)return t;if(Object(a.a)(t))for(var n=[],r=0,o=t.length;r<o;r++)"object"===s(t[r])&&null!=t[r]?n[r]=e(t[r]):n[r]=t[r];else for(var i in n={},t)"object"===s(t[i])&&null!=t[i]?n[i]=e(t[i]):n[i]=t[i];return n}},function(e,t,n){"use strict";t.a=function(r,o,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(e,t)},o),n&&r.apply(e,t)}}},function(e,t,n){"use strict";var s=n(0),u=n(10),l=5;t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)!function e(t,n,r,o){for(var i in r=r||0,o=o||l,n){var a;n.hasOwnProperty(i)&&(null!==(a=n[i])&&Object(u.a)(a)?(Object(u.a)(t[i])||(t[i]={}),r<o?e(t[i],a,r+1,o):t[i]=n[i]):Object(s.a)(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=a))}}(e,t[r]);return e}},function(e,t,n){"use strict";var a=n(16),s=n(2);t.a=function(e,t,n,r){Object(s.a)(t)||(n=t,t=e,e=function(){});var o=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;e=new n;return e.constructor=t,e},i=o(t.prototype,e);return e.prototype=Object(a.a)(i,e.prototype),e.superclass=o(t.prototype,t),Object(a.a)(i,n),Object(a.a)(e,r),e}},function(e,t,n){"use strict";var i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,o=0;o<e.length;o++)if(e[o]===t){r=o;break}return r}},function(e,t,n){"use strict";var r=n(7),o=n(1),i=n(30),a=n(31),s=Object.prototype.hasOwnProperty;t.a=function(e){if(!Object(r.a)(e)){if(Object(o.a)(e))return!e.length;var t,n=Object(i.a)(e);if("Map"===n||"Set"===n)return!e.size;if(Object(a.a)(e))return!Object.keys(e).length;for(t in e)if(s.call(e,t))return!1}return!0}},function(e,t,n){"use strict";var r=n(2),o=n(33);t.a=function(e,t,n){return Object(r.a)(n)?!!n(e,t):Object(o.a)(e,t)}},function(e,t,n){"use strict";var i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(t(o,r))}return n}},function(e,t,n){"use strict";function o(e){return e}var i=n(7),a=n(12);t.a=function(t,n){void 0===n&&(n=o);var r={};return Object(a.a)(t)&&!Object(i.a)(t)&&Object.keys(t).forEach(function(e){r[e]=n(t[e],e)}),r}},function(e,t,n){"use strict";var i=n(4);t.a=function(e,t,n){for(var r=0,o=Object(i.a)(t)?t.split("."):t;e&&r<o.length;)e=e[o[r++]];return void 0===e||r<o.length?n:e}},function(e,t,n){"use strict";var i=n(12),a=n(4),s=n(5);t.a=function(e,t,n){var r=e,o=Object(a.a)(t)?t.split("."):t;return o.forEach(function(e,t){t<o.length-1?(Object(i.a)(r[e])||(r[e]=Object(s.a)(o[t+1])?[]:{}),r=r[e]):r[e]=n}),e}},function(e,t,n){"use strict";var r=n(8),o=n(10),i=Object.prototype.hasOwnProperty;t.a=function(t,e){var n;return null!==t&&Object(o.a)(t)?(n={},Object(r.a)(e,function(e){i.call(t,e)&&(n[e]=t[e])}),n):{}}},function(e,t,n){"use strict";var o=n(25);t.a=function(e,r){return Object(o.a)(e,function(e,t,n){return r.includes(n)||(e[n]=t),e},{})}},function(e,t,n){"use strict";t.a=function(n,r,o){function e(){var e=Date.now(),t=(l||!1!==o.leading||(l=e),r-(e-l));return a=this,s=arguments,t<=0||r<t?(i&&(clearTimeout(i),i=null),l=e,u=n.apply(a,s),i||(a=s=null)):i||!1===o.trailing||(i=setTimeout(c,t)),u}var i,a,s,u,l=0,c=(o=o||{},function(){l=!1===o.leading?0:Date.now(),i=null,u=n.apply(a,s),i||(a=s=null)});return e.cancel=function(){clearTimeout(i),l=0,i=a=s=null},e}},function(e,t,n){"use strict";var r=n(1);t.a=function(e){return Object(r.a)(e)?Array.prototype.slice.call(e):[]}},function(e,t,n){"use strict";var r={};t.a=function(e){return r[e=e||"g"]?r[e]+=1:r[e]=1,e+r[e]}},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict";t.a=function(e){return Object(r.a)(e)?0:(Object(o.a)(e)?e:Object.keys(e)).length};var r=n(7),o=n(1)},function(e,t,n){"use strict";t.a=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},Object.create,Object.create},function(e,t,n){"use strict";var c=n(4),f=n(9),h=n(34);t.a=function(e,t,n,r){void 0===r&&(r="...");var o,i,a=Object(h.a)(r,n),s=Object(c.a)(e)?e:Object(f.a)(e),u=t,l=[];if(Object(h.a)(e,n)<=t)return e;for(;o=s.substr(0,16),!((i=Object(h.a)(o,n))+a>u&&u<i);)if(l.push(o),u-=i,!(s=s.substr(16)))return l.join("");for(;o=s.substr(0,1),!((i=Object(h.a)(o,n))+a>u);)if(l.push(o),u-=i,!(s=s.substr(1)))return l.join("");return""+l.join("")+r}},function(e,t,n){"use strict";function r(){this.map={}}r.prototype.has=function(e){return void 0!==this.map[e]},r.prototype.get=function(e,t){e=this.map[e];return void 0===e?t:e},r.prototype.set=function(e,t){this.map[e]=t},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(e){delete this.map[e]},r.prototype.size=function(){return Object.keys(this.map).length},t.a=r},function(e,t){function r(e,t,n,r){void 0===r&&(r=[]);var o=this;o.w=e||0,o.h=t||0,o.y=n||0,o.x=0,o.c=r||[],o.cs=r.length,o.prelim=0,o.mod=0,o.shift=0,o.change=0,o.tl=null,o.tr=null,o.el=null,o.er=null,o.msel=0,o.mser=0}r.fromNode=function(e,t){var n;return e?(n=[],e.children.forEach(function(e){n.push(r.fromNode(e,t))}),t?new r(e.height,e.width,e.x,n):new r(e.width,e.height,e.y,n)):null},e.exports=function(e,t){t=(t=void 0===t?{}:t).isHorizontal;function S(e){0===e.cs?((e.el=e).er=e).msel=e.mser=0:(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function O(e){return e.y+e.h}function P(e,t,n){for(;null!==n&&e>=n.low;)n=n.nxt;return{low:e,index:t,nxt:n}}!function t(e,n,r){void 0===r&&(r=0),n?(e.x=r,r+=e.width):(e.y=r,r+=e.height),e.children.forEach(function(e){t(e,n,r)})}(e,t);var n=r.fromNode(e,t);return function e(t){if(0!==t.cs){e(t.c[0]);for(var n=P(O(t.c[0].el),0,null),r=1;r<t.cs;++r){e(t.c[r]);for(var o,i,a,s,u,l=O(t.c[r].er),c=(u=o=i=a=s=v=x=_=w=b=m=g=y=d=p=h=f=c=void 0,t),f=r,h=n,p=c.c[f-1],d=p.mod,y=c.c[f],g=y.mod;null!==p&&null!==y;){O(p)>h.low&&(h=h.nxt);var v,m=d+p.prelim+p.w-(g+y.prelim);if(0<m){g+=m;{b=void 0;w=void 0;_=void 0;x=void 0;v=void 0;var b=c;var w=f;var _=h.index;var x=m;b.c[w].mod+=x,b.c[w].msel+=x,b.c[w].mser+=x;_!==w-1&&(v=w-_,b.c[_+1].shift+=x/v,b.c[w].shift-=x/v,b.c[w].change-=x-x/v)}}m=O(p),_=O(y);m<=_&&null!==(p=0===(b=p).cs?b.tr:b.c[b.cs-1])&&(d+=p.mod),_<=m&&null!==(y=0===(w=y).cs?w.tl:w.c[0])&&(g+=y.mod)}!p&&y?(i=f,a=y,s=g,u=(o=c).c[0].el,s=s-(u.tl=a).mod-o.c[0].msel,u.mod+=s,u.prelim-=s,o.c[0].el=o.c[i].el,o.c[0].msel=o.c[i].msel):p&&!y&&(a=f,u=p,s=d,i=(o=c).c[a].er,s=s-(i.tr=u).mod-o.c[a].mser,i.mod+=s,i.prelim-=s,o.c[a].er=o.c[a-1].er,o.c[a].mser=o.c[a-1].mser),n=P(l,r,n)}t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}S(t)}(n),function e(t,n){n+=t.mod,t.x=t.prelim+n;for(var r=t,o=0,i=0,a=0;a<r.cs;a++)i+=(o+=r.c[a].shift)+r.c[a].change,r.c[a].mod+=i;for(var s=0;s<t.cs;s++)e(t.c[s],n)}(n,0),function n(e,r,o){o?r.y=e.x:r.x=e.x,e.c.forEach(function(e,t){n(e,r.children[t],o)})}(n,e,t),function t(e,n,r){r?e.y+=n:e.x+=n,e.children.forEach(function(e){t(e,n,r)})}(e,-function t(e,n){var r=n?e.y:e.x;return e.children.forEach(function(e){r=Math.min(t(e,n),r)}),r}(e,n=t),n),e}},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o,i=n(11),a=n(121),s=n(17),u=n(6),l=(n=o=i,(i=f).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),f.prototype.execute=function(){return this.rootNode.width=0,s(this.rootNode,this.options,a)},f),c={};function f(){return o.apply(this,arguments)||this}e.exports=function(e,t){return t=u.assign({},c,t),new l(e,t).execute()}},function(e,t,n){var o=n(6),a={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};e.exports=function(e,n){void 0===n&&(n={}),n=o.assign({},a,n);var r,i=0,t=function n(e){if(!e)return null;e.width=0,e.depth&&e.depth>i&&(i=e.depth);var t=e.children,r=t.length,o=new function(e,t){void 0===t&&(t=[]);this.x=this.y=0,this.leftChild=this.rightChild=null,this.height=0,this.children=t}(e.height,[]);return t.forEach(function(e,t){e=n(e);o.children.push(e),0===t&&(o.leftChild=e),t===r-1&&(o.rightChild=e)}),o.originNode=e,o.isLeaf=e.isLeaf(),o}(e);return function e(t){var n;return t.isLeaf||0===t.children.length?t.drawingDepth=i:(n=t.children.map(e),n=Math.min.apply(null,n),t.drawingDepth=n-1),t.drawingDepth}(t),function t(e){e.x=e.drawingDepth*n.rankSep,e.isLeaf?(e.y=0,r&&(e.y=r.y+r.height+n.nodeSep,e.originNode.parent!==r.originNode.parent)&&(e.y+=n.subTreeSep),r=e):(e.children.forEach(function(e){t(e)}),e.y=(e.leftChild.y+e.rightChild.y)/2)}(t),function n(e,r,o){o?(r.x=e.x,r.y=e.y):(r.x=e.y,r.y=e.x),e.children.forEach(function(e,t){n(e,r.children[t],o)})}(t,e,n.isHorizontal),e}},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o,i=n(11),a=n(123),s=n(35),u=n(6),l=["LR","RL","H"],c=l[0],f=(n=o=i,(i=p).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),p.prototype.execute=function(){var e=this.options,t=this.rootNode,n=(e.isHorizontal=!0,e.indent),n=void 0===n?20:n,r=e.dropCap,r=void 0===r||r,o=e.direction,o=void 0===o?c:o,i=e.align;if(o&&-1===l.indexOf(o))throw new TypeError("Invalid direction: "+o);return o===l[0]?a(t,n,r,i):o===l[1]?(a(t,n,r,i),t.right2left()):o===l[2]&&(e=(o=s(t,e)).left,o=o.right,a(e,n,r,i),e.right2left(),a(o,n,r,i),n=e.getBoundingBox(),o.translate(n.width,0),t.x=o.x-t.width/2),t},p),h={};function p(){return o.apply(this,arguments)||this}e.exports=function(e,t){return t=u.assign({},h,t),new f(e,t).execute()}},function(e,t,n){var i=n(6);e.exports=function(e,t,n,r){var o=null;e.eachNode(function(e){!function(e,t,n,r,o){var n="function"==typeof n?n(e):n*e.depth;if(!r)try{if(e.id===e.parent.children[0].id)return e.x+=n,e.y=t?t.y:0}catch(e){}e.x+=n,t?(e.y=t.y+i.getHeight(t,e,o),t.parent&&e.parent.id!==t.parent.id&&(n=(r=t.parent).y+i.getHeight(r,e,o),e.y=n>e.y?n:e.y)):e.y=0}(e,o,t,n,r),o=e})}},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o,i=n(11),a=n(125),s=n(17),u=n(6),l=(n=o=i,(i=f).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),f.prototype.execute=function(){return s(this.rootNode,this.options,a)},f),c={};function f(){return o.apply(this,arguments)||this}e.exports=function(e,t){return t=u.assign({},c,t),new l(e,t).execute()}},function(e,t,n){var r=n(6),o={getSubTreeSep:function(){return 0}};e.exports=function(e,t){t=r.assign({},o,t=void 0===t?{}:t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse(function(e){e.x=e.parent.x+e.parent.width}),e.parent=null,function t(e,n){var r=0;return e.children.length?e.children.forEach(function(e){r+=t(e,n)}):r=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,r)+2*e._subTreeSep,e.totalHeight}(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode(function(e){var t=e.children,n=t.length;if(n){var r=t[0];if(r.startY=e.startY+e._subTreeSep,1===n)r.y=e.y+e.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var o=1;o<n;o++){var i=t[o];i.startY=t[o-1].startY+t[o-1].totalHeight,i.y=i.startY+i.totalHeight/2-i.height/2}}}}),function t(e){var n,r,o,i,a=e.children,s=a.length;s&&(a.forEach(function(e){t(e)}),n=a[0],r=(s=a[s-1]).y-n.y+s.height,o=0,a.forEach(function(e){o+=e.totalHeight}),r>e.height?e.y=n.y+r/2-e.height/2:1!==a.length||e.height>o?(i=e.y+(e.height-r)/2-n.y,a.forEach(function(e){e.translate(0,i)})):e.y=(n.y+n.height/2+s.y+s.height/2)/2-e.height/2)}(e)}}],o={},r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=36);function r(e){var t;return(o[e]||(t=o[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var n,o},"object"===s(t)&&"object"===s(e)?e.exports=n():void 0!==(t="function"==typeof(n=n)?n.apply(t,[]):n)&&(e.exports=t)},16038:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0,n(52235));Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return i.registerLayout}}),Object.defineProperty(t,"unRegisterLayout",{enumerable:!0,get:function(){return i.unRegisterLayout}}),Object.defineProperty(t,"getLayoutByName",{enumerable:!0,get:function(){return i.getLayoutByName}}),o(n(71812),t)},9284:function(e,t){"use strict";function n(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0,n.prototype.layout=function(e){return this.init(e),this.execute(!0)},n.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},n.prototype.execute=function(e){},n.prototype.executeWithWorker=function(){},n.prototype.getDefaultCfg=function(){return{}},n.prototype.updateCfg=function(e){e&&Object.assign(this,e)},n.prototype.getType=function(){return"base"},n.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t.Base=n},64933:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=(Object.defineProperty(t,"__esModule",{value:!0}),t.CircularLayout=void 0,n(9284)),M=n(58652);function a(e,t){e=e.degree,t=t.degree;return e<t?-1:t<e?1:0}s=i.Base,o(u,s),u.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},u.prototype.execute=function(){var e=this.nodes,t=this.edges,n=e.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return e[0].x=r[0],e[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());for(var o,i,a,s,u=this.radius,l=this.startRadius,c=this.endRadius,f=this.divisions,h=this.startAngle,p=this.endAngle,d=this.angleRatio,y=this.ordering,g=this.clockwise,v=this.nodeSpacing,m=this.nodeSize,b=(p-h)/n,w={},_=(e.forEach(function(e,t){w[e.id]=t}),this.nodeMap=w,(0,M.getDegree)(e.length,w,t)),x=(this.degrees=_,v?(o=(0,M.getFuncByUnknownType)(10,v),i=(0,M.getFuncByUnknownType)(10,m),a=-1/0,e.forEach(function(e){e=i(e);a<e&&(a=e)}),s=0,e.forEach(function(e,t){s+=0===t?a||10:(o(e)||0)+(a||10)}),u=s/(2*Math.PI)):u||l||c?!l&&c?l=c:l&&!c&&(c=l):u=this.height>this.width?this.width/2:this.height/2,b*d),S=[],S="topology"===y?this.topologyOrdering():"topology-directed"===y?this.topologyOrdering(!0):"degree"===y?this.degreeOrdering():e,O=Math.ceil(n/f),P=0;P<n;++P){var E=u,k=(E=(E=E||null===l||null===c?E:l+P*(c-l)/(n-1))||10+100*P/(n-1),h+P%O*x+2*Math.PI/f*Math.floor(P/O));g||(k=p-P%O*x-2*Math.PI/f*Math.floor(P/O)),S[P].x=r[0]+Math.cos(k)*E,S[P].y=r[1]+Math.sin(k)*E,S[P].weight=_[P].all}return null!=(t=this.onLayoutEnd)&&t.call(this),{nodes:S,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()},u.prototype.topologyOrdering=function(e){void 0===e&&(e=!1);var o,t,i,s=this.degrees,u=this.edges,l=this.nodes,c=(0,M.clone)(l),f=this.nodeMap,h=[c[0]],p=[l[0]],d=[],y=l.length,g=(d[0]=!0,t=u,i=f,e=e,(o=c).forEach(function(e,t){o[t].children=[],o[t].parent=[]}),e?t.forEach(function(e){var t=(0,M.getEdgeTerminal)(e,"source"),e=(0,M.getEdgeTerminal)(e,"target"),n=0,t=(t&&(n=i[t]),0),e=(e&&(t=i[e]),o[n].children),r=o[t].parent;e.push(o[t].id),r.push(o[n].id)}):t.forEach(function(e){var t=(0,M.getEdgeTerminal)(e,"source"),e=(0,M.getEdgeTerminal)(e,"target"),n=0,t=(t&&(n=i[t]),0),e=(e&&(t=i[e]),o[n].children),r=o[t].children;e.push(o[t].id),r.push(o[n].id)}),0);return c.forEach(function(e,t){if(0!==t)if(t!==y-1&&s[t].all===s[t+1].all&&!function(e,t,n){for(var r=n.length,o=0;o<r;o++){var i=(0,M.getEdgeTerminal)(n[o],"source"),a=(0,M.getEdgeTerminal)(n[o],"target");if(e.id===i&&t.id===a||t.id===i&&e.id===a)return 1}}(h[g],e,u)||d[t]){for(var n=h[g].children,r=!1,o=0;o<n.length;o++){var i=f[n[o]];if(s[i].all===s[t].all&&!d[i]){h.push(c[i]),p.push(l[f[c[i].id]]),r=d[i]=!0;break}}for(var a=0;!r&&(d[a]||(h.push(c[a]),p.push(l[f[c[a].id]]),r=d[a]=!0),++a!==y););}else h.push(e),p.push(l[f[e.id]]),d[t]=!0,g++}),p},u.prototype.degreeOrdering=function(){var e=this.nodes,n=[],r=this.degrees;return e.forEach(function(e,t){e.degree=r[t].all,n.push(e)}),n.sort(a),n},u.prototype.getType=function(){return"circular"};var s,n=u;function u(e){var t=s.call(this)||this;return t.radius=null,t.nodeSize=void 0,t.startRadius=null,t.endRadius=null,t.startAngle=0,t.endAngle=2*Math.PI,t.clockwise=!0,t.divisions=1,t.ordering=null,t.angleRatio=1,t.nodes=[],t.edges=[],t.nodeMap={},t.degrees=[],t.width=300,t.height=300,t.updateCfg(e),t}t.CircularLayout=n},99266:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},b=(Object.defineProperty(t,"__esModule",{value:!0}),t.ComboCombinedLayout=void 0,n(84587)),a=n(9284),w=n(58652),_=n(71812),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{}},s.prototype.execute=function(){var e=this.nodes,t=this.center;e&&0!==e.length&&(1===e.length?(e[0].x=t[0],e[0].y=t[1]):(this.initVals(),this.run())),this.onLayoutEnd&&this.onLayoutEnd()},s.prototype.run=function(){var e,t,n,r=this.nodes,o=this.edges,i=this.combos,a=this.comboEdges,s=this.center,u={},l=(r.forEach(function(e){u[e.id]=e}),{}),c=(i.forEach(function(e){l[e.id]=e}),this.getInnerGraphs(u)),f=[],h=[],p={},d=!0,y=(this.comboTrees.forEach(function(t){var e=c[t.id],e=m(m({},t),{x:e.x||l[t.id].x,y:e.y||l[t.id].y,fx:e.fx||l[t.id].fx,fy:e.fy||l[t.id].fy,mass:e.mass||l[t.id].mass,size:e.size});h.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):d=!1,f.push(t.id),(0,w.traverseTreeUp)(t,function(e){return e.id!==t.id&&(p[e.id]=t.id),!0})}),r.forEach(function(e){var t;e.comboId&&l[e.comboId]||(t=m({},e),h.push(t),isNaN(t.x)||0===t.x||isNaN(t.y)||0===t.y?(t.x=100*Math.random(),t.y=100*Math.random()):d=!1,f.push(e.id))}),[]);o.concat(a).forEach(function(e){var t=p[e.source]||e.source,e=p[e.target]||e.target;t!==e&&f.includes(t)&&f.includes(e)&&y.push({source:t,target:e})}),null!=h&&h.length&&(1===h.length?(h[0].x=s[0],h[0].y=s[1]):(e={nodes:h,edges:y},n=null==(n=(t=this.outerLayout||new _.GForceLayout({gravity:1,factor:4,linkDistance:function(e,t,n){n=(((null==(t=t.size)?void 0:t[0])||30)+((null==(t=n.size)?void 0:t[0])||30))/2;return Math.min(1.5*n,700)}})).getType)?void 0:n.call(t),t.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),d&&b.FORCE_LAYOUT_TYPE_MAP[n]&&(new(h.length<100?_.MDSLayout:_.GridLayout)).layout(e),t.layout(e)),h.forEach(function(t){var e=c[t.id];e?(e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach(function(e){e.x+=t.x,e.y+=t.y})):(e=u[t.id])&&(e.x=t.x,e.y=t.y)}));for(var g=Object.keys(c),v=g.length-1;0<=v;v--)!function(e){var e=g[e],t=c[e];if(!t)return;t.nodes.forEach(function(e){t.visited||(e.x+=t.x||0,e.y+=t.y||0),u[e.id]&&(u[e.id].x=e.x,u[e.id].y=e.y)}),l[e]&&(l[e].x=t.x,l[e].y=t.y)}(v);return{nodes:r,edges:o,combos:i,comboEdges:a}},s.prototype.getInnerGraphs=function(h){var e=this.comboTrees,p=this.nodeSize,d=this.edges,y=this.comboPadding,t=this.spacing,g={},v=this.innerLayout||new _.ConcentricLayout({type:"concentric",sortBy:"id"});return v.center=[0,0],v.preventOverlap=!0,v.nodeSpacing=t,(e||[]).forEach(function(e){(0,w.traverseTreeUp)(e,function(e){var t,n,r,o,i,a,s,u,l,c,f=(null==y?void 0:y(e))||10;return(0,w.isArray)(f)&&(f=Math.max.apply(Math,f)),null!=(t=e.children)&&t.length?(t=e.children.map(function(e){var t;return"combo"===e.itemType?g[e.id]:(t=h[e.id]||{},m(m({},t),e))}),n=t.map(function(e){return e.id}),l={nodes:t,edges:d.filter(function(e){return n.includes(e.source)&&n.includes(e.target)})},r=1/0,t.forEach(function(e){var t;e.size||(e.size=(null==(t=g[e.id])?void 0:t.size)||(null==p?void 0:p(e))||[30,30]),(0,w.isNumber)(e.size)&&(e.size=[e.size,e.size]),(r=r>e.size[0]?e.size[0]:r)>e.size[1]&&(r=e.size[1])}),v.layout(l),o=(a=(0,w.getLayoutBBox)(t)).minX,i=a.minY,c=a.maxX,a=a.maxY,s=(c+o)/2,u=(a+i)/2,l.nodes.forEach(function(e){e.x-=s,e.y-=u}),l=Math.max(c-o,r)+2*f,c=Math.max(a-i,r)+2*f,g[e.id]={id:e.id,nodes:t,size:[l,c]}):"combo"===e.itemType&&(g[e.id]={id:e.id,nodes:[],size:f?[2*f,2*f]:[30,30]}),!0})}),g},s.prototype.initVals=function(){var t,n,r=this.nodeSize,e=this.spacing,o=(0,w.isNumber)(e)?function(){return e}:(0,w.isFunction)(e)?e:function(){return 0};this.spacing=o,a=r?(0,w.isFunction)(r)?function(e){var t=r(e),n=o(e);return(0,w.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+n)/2:((t||10)+n)/2}:(0,w.isArray)(r)?(t=(r[0]>r[1]?r[0]:r[1])/2,function(e){return t+o(e)/2}):(n=r/2,function(e){return n+o(e)/2}):function(e){var t=o(e);return e.size?(0,w.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+t)/2:(0,w.isObject)(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+t)/2:(e.size+t)/2:10+t/2},this.nodeSize=a;var i=this.comboPadding,a=(0,w.isNumber)(i)?function(){return i}:(0,w.isArray)(i)?function(){return Math.max.apply(null,i)}:(0,w.isFunction)(i)?i:function(){return 0};this.comboPadding=a},s.prototype.getType=function(){return"comboCombined"},s);function s(e){var t=o.call(this)||this;return t.center=[0,0],t.nodes=[],t.edges=[],t.combos=[],t.comboEdges=[],t.comboPadding=10,t.comboTrees=[],t.updateCfg(e),t}t.ComboCombinedLayout=n},65428:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.ComboForceLayout=void 0,n(9284)),_=n(58652),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},s.prototype.execute=function(){var e=this.nodes,t=this.center;this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},e&&0!==e.length&&(1===e.length?(e[0].x=t[0],e[0].y=t[1]):(this.initVals(),this.run())),this.onLayoutEnd&&this.onLayoutEnd()},s.prototype.run=function(){var e=this,t=e.nodes,n=e.previousLayouted?e.maxIteration/5:e.maxIteration,r=(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center),o=e.velocityDecay,i=e.comboMap;e.previousLayouted||e.initPos(i);for(var a=0;a<n;a++)!function(){var n=[];t.forEach(function(e,t){n[t]={x:0,y:0}}),e.applyCalculate(n),e.applyComboCenterForce(n),t.forEach(function(e,t){(0,_.isNumber)(e.x)&&(0,_.isNumber)(e.y)&&(e.x+=n[t].x*o,e.y+=n[t].y*o)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()}();var s=[0,0],u=(t.forEach(function(e){(0,_.isNumber)(e.x)&&(0,_.isNumber)(e.y)&&(s[0]+=e.x,s[1]+=e.y)}),s[0]/=t.length,s[1]/=t.length,[r[0]-s[0],r[1]-s[1]]);t.forEach(function(e,t){(0,_.isNumber)(e.x)&&(0,_.isNumber)(e.y)&&(e.x+=u[0],e.y+=u[1])}),e.combos.forEach(function(e){var t=i[e.id];t&&t.empty&&(e.x=t.cx||e.x,e.y=t.cy||e.y)}),e.previousLayouted=!0},s.prototype.initVals=function(){var e=this.edges,t=this.nodes,n=this.combos,r={},o={},i={},a=(t.forEach(function(e,t){o[e.id]=e,i[e.id]=t}),this.nodeMap=o,this.indexMap=i,{}),t=(n.forEach(function(e){a[e.id]=e}),this.oriComboMap=a,this.comboMap=this.getComboMap(),this.preventOverlap),n=(this.preventComboOverlap=this.preventComboOverlap||t,this.preventNodeOverlap=this.preventNodeOverlap||t,this.collideStrength);n&&(this.comboCollideStrength=n,this.nodeCollideStrength=n),this.comboCollideStrength=this.comboCollideStrength||0,this.nodeCollideStrength=this.nodeCollideStrength||0;for(var s=0;s<e.length;++s){var u=(0,_.getEdgeTerminal)(e[s],"source"),l=(0,_.getEdgeTerminal)(e[s],"target");r[u]?r[u]++:r[u]=1,r[l]?r[l]++:r[l]=1}for(var c=[],s=0;s<e.length;++s)u=(0,_.getEdgeTerminal)(e[s],"source"),l=(0,_.getEdgeTerminal)(e[s],"target"),c[s]=r[u]/(r[u]+r[l]);this.bias=c;var f,h,p=this.nodeSize,d=this.nodeSpacing,t=(0,_.isNumber)(d)?function(){return d}:(0,_.isFunction)(d)?d:function(){return 0};this.nodeSpacing=t,n=p?(0,_.isFunction)(p)?function(e){return p(e)}:(0,_.isArray)(p)?(f=(p[0]>p[1]?p[0]:p[1])/2,function(e){return f}):(h=p/2,function(e){return h}):function(e){return e.size?(0,_.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2:(0,_.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2:e.size/2:10},this.nodeSize=n;var y=this.comboSpacing,t=(0,_.isNumber)(y)?function(){return y}:(0,_.isFunction)(y)?y:function(){return 0};this.comboSpacing=t;var g=this.comboPadding,n=(0,_.isNumber)(g)?function(){return g}:(0,_.isArray)(g)?function(){return Math.max.apply(null,g)}:(0,_.isFunction)(g)?g:function(){return 0};this.comboPadding=n;var v=(v=this.linkDistance)||10,t=(0,_.isNumber)(v)?function(e){return v}:v;this.linkDistance=t;var m=(m=this.edgeStrength)||1,n=(0,_.isNumber)(m)?function(e){return m}:m;this.edgeStrength=n;var b=(b=this.nodeStrength)||30,t=(0,_.isNumber)(b)?function(e){return b}:b;this.nodeStrength=t},s.prototype.initPos=function(o){this.nodes.forEach(function(e,t){var n=e.comboId,r=o[n];n&&r?(e.x=r.cx+100/(t+1),e.y=r.cy+100/(t+1)):(e.x=100/(t+1),e.y=100/(t+1))})},s.prototype.getComboMap=function(){var o=this,i=o.nodeMap,e=o.comboTrees,a=o.oriComboMap,s={};return(e||[]).forEach(function(e){var r=[];(0,_.traverseTreeUp)(e,function(e){var n,t;return"node"!==e.itemType&&a[e.id]&&(void 0===s[e.id]&&(t={id:e.id,name:e.id,cx:0,cy:0,count:0,depth:o.oriComboMap[e.id].depth||0,children:[]},s[e.id]=t),(t=e.children)&&t.forEach(function(e){if(!s[e.id]&&!i[e.id])return!0;r.push(e)}),(n=s[e.id]).cx=0,(n.cy=0)===r.length&&(n.empty=!0,t=a[e.id],n.cx=t.x,n.cy=t.y),r.forEach(function(e){var t;n.count++,"node"!==e.itemType?(t=s[e.id],(0,_.isNumber)(t.cx)&&(n.cx+=t.cx),(0,_.isNumber)(t.cy)&&(n.cy+=t.cy)):(t=i[e.id])&&((0,_.isNumber)(t.x)&&(n.cx+=t.x),(0,_.isNumber)(t.y))&&(n.cy+=t.y)}),n.cx/=n.count||1,n.cy/=n.count||1,n.children=r),!0})}),s},s.prototype.applyComboCenterForce=function(l){var e=this.gravity,c=this.comboGravity||e,f=this.alpha,e=this.comboTrees,h=this.indexMap,p=this.nodeMap,d=this.comboMap;(e||[]).forEach(function(e){(0,_.traverseTreeUp)(e,function(e){var i,a,s,u;return"node"!==e.itemType&&d[e.id]&&(i=d[e.id],a=(i.depth+1)/10*.5,s=i.cx,u=i.cy,i.cx=0,i.cy=0,i.children.forEach(function(e){var t,n,r,o;"node"!==e.itemType?((t=d[e.id])&&(0,_.isNumber)(t.cx)&&(i.cx+=t.cx),t&&(0,_.isNumber)(t.cy)&&(i.cy+=t.cy)):(e=(t=p[e.id]).x-s||.005,n=t.y-u||.005,r=Math.sqrt(e*e+n*n),o=h[t.id],l[o].x-=e*(e=c*f/r*a),l[o].y-=n*e,(0,_.isNumber)(t.x)&&(i.cx+=t.x),(0,_.isNumber)(t.y)&&(i.cy+=t.y))}),i.cx/=i.count||1,i.cy/=i.count||1),!0})})},s.prototype.applyCalculate=function(e){var t=this.comboMap,n=this.nodes,s={};n.forEach(function(i,a){n.forEach(function(e,t){var n,r,o;a<t||(r=(t=i.x-e.x||.005)*t+(n=i.y-e.y||.005)*n,o=Math.sqrt(r),r<1&&(r=o),s["".concat(i.id,"-").concat(e.id)]={vx:t,vy:n,vl2:r,vl:o},s["".concat(e.id,"-").concat(i.id)]={vl2:r,vl:o,vx:-t,vy:-n})})}),this.updateComboSizes(t),this.calRepulsive(e,s),this.calAttractive(e,s),this.preventComboOverlap&&this.comboNonOverlapping(e,t)},s.prototype.updateComboSizes=function(r){var o=this,e=o.comboTrees,a=o.nodeMap,s=o.nodeSize,u=o.comboSpacing,l=o.comboPadding;(e||[]).forEach(function(e){var n=[];(0,_.traverseTreeUp)(e,function(e){if("node"!==e.itemType){var i=r[e.id];if(!i)return!1;var t=e.children,t=(t&&t.forEach(function(e){(r[e.id]||a[e.id])&&n.push(e)}),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0,n.forEach(function(e){var t,n,r,o;return"node"!==e.itemType||!(e=a[e.id])||(t=s(e),n=e.x-t,r=e.y-t,o=e.x+t,e=e.y+t,i.minX>n&&(i.minX=n),i.minY>r&&(i.minY=r),i.maxX<o&&(i.maxX=o),void(i.maxY<e&&(i.maxY=e)))}),o.oriComboMap[e.id].size||10),e=((0,_.isArray)(t)&&(t=t[0]),Math.max(i.maxX-i.minX,i.maxY-i.minY,t));i.r=e/2+u(i)/2+l(i)}return!0})})},s.prototype.comboNonOverlapping=function(g,v){var e=this.comboTree,m=this.comboCollideStrength,b=this.indexMap,w=this.nodeMap;(0,_.traverseTreeUp)(e,function(e){var t;return!(!v[e.id]&&!w[e.id]&&"comboTreeRoot"!==e.id||((t=e.children)&&1<t.length&&t.forEach(function(p,d){if("node"===p.itemType)return!1;var y=v[p.id];y&&t.forEach(function(e,t){var n,r,o,i,a,s,u,l,c,f,h;return!(d<=t||"node"===e.itemType||!(t=v[e.id]))&&(n=y.cx-t.cx||.005,r=y.cy-t.cy||.005,o=y.r||1,i=(t=t.r||1)*t,a=o*o,(u=n*n+r*r)<(o=o+t)*o?!(!(t=p.children)||0===t.length||!(s=e.children)||0===s.length)&&(e=Math.sqrt(u),l=n*(u=(o-e)/e*m),c=r*u,h=1-(f=i/(a+i)),void t.forEach(function(e){if("node"!==e.itemType)return!1;var t;w[e.id]&&(t=b[e.id],s.forEach(function(e){return"node"===e.itemType&&!!w[e.id]&&(e=b[e.id],g[t].x+=l*f,g[t].y+=c*f,g[e].x-=l*h,void(g[e].y-=c*h))}))})):void 0)})}),0))})},s.prototype.calRepulsive=function(l,c){var o=this,i=o.nodes,f=o.width*o.optimizeRangeFactor,h=o.nodeStrength,p=o.alpha,d=o.nodeCollideStrength,y=o.preventNodeOverlap,g=o.nodeSize,v=o.nodeSpacing,m=o.depthRepulsiveForceScale,a=o.center;i.forEach(function(s,u){var e,t,n,r;s.x&&s.y&&(a&&(e=o.gravity,t=s.x-a[0]||.005,n=s.y-a[1]||.005,r=Math.sqrt(t*t+n*n),l[u].x-=t*e*p/r,l[u].y-=n*e*p/r),i.forEach(function(e,t){var n,r,o,i,a;u!==t&&e.x&&e.y&&(r=(a=c["".concat(s.id,"-").concat(e.id)]).vl2,a=a.vl,f<a||(o=(i=c["".concat(s.id,"-").concat(e.id)]).vx,i=i.vy,n=(n=Math.log(Math.abs(e.depth-s.depth)/10)+1||1)<1?1:n,e.comboId!==s.comboId&&(n+=1),n=n?Math.pow(m,n):1,n=h(e)*p/r*n,l[u].x+=o*n,l[u].y+=i*n,u<t&&y&&r<(e=(n=g(s)+v(s)||1)+(r=g(e)+v(e)||1))*e&&(e=i*(i=(e-a)/a*d),l[u].x+=(a=o*i)*(i=(o=r*r)/(n*n+o)),l[u].y+=e*i,l[t].x-=a*(i=1-i),l[t].y-=e*i)))}))})},s.prototype.calAttractive=function(l,c){var f=this,e=f.edges,h=f.linkDistance,p=f.alpha,d=f.edgeStrength,y=f.bias,g=f.depthAttractiveForceScale;e.forEach(function(e,t){var n,r,o,i,a,s=(0,_.getEdgeTerminal)(e,"source"),u=(0,_.getEdgeTerminal)(e,"target");s&&u&&s!==u&&(n=f.indexMap[s],r=f.indexMap[u],a=f.nodeMap[s],i=f.nodeMap[u],a)&&i&&(o=a.depth===i.depth?0:Math.log(Math.abs(a.depth-i.depth)/10),a.comboId===i.comboId&&(o/=2),o=o?Math.pow(g,o):1,a.comboId!==i.comboId&&1===o?o=g/2:a.comboId===i.comboId&&(o=2),(0,_.isNumber)(i.x))&&(0,_.isNumber)(a.x)&&(0,_.isNumber)(i.y)&&(0,_.isNumber)(a.y)&&(a=(i=c["".concat(u,"-").concat(s)]).vl,u=i.vx,i=i.vy*(s=(a-h(e))/a*p*d(e)*o),a=y[t],l[r].x-=(e=u*s)*a,l[r].y-=i*a,l[n].x+=e*(1-a),l[n].y+=i*(1-a))})},s.prototype.getType=function(){return"comboForce"},s);function s(e){var t=o.call(this)||this;return t.center=[0,0],t.maxIteration=100,t.gravity=10,t.comboGravity=10,t.linkDistance=10,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.edgeStrength=.6,t.nodeStrength=30,t.preventOverlap=!1,t.preventNodeOverlap=!1,t.preventComboOverlap=!1,t.collideStrength=void 0,t.nodeCollideStrength=.5,t.comboCollideStrength=.5,t.comboSpacing=20,t.comboPadding=10,t.optimizeRangeFactor=1,t.onTick=function(){},t.onLayoutEnd=function(){},t.depthAttractiveForceScale=1,t.depthRepulsiveForceScale=2,t.nodes=[],t.edges=[],t.combos=[],t.comboTrees=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.oriComboMap={},t.indexMap={},t.comboMap={},t.previousLayouted=!1,t.updateCfg(e),t}t.ComboForceLayout=n},57940:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=(Object.defineProperty(t,"__esModule",{value:!0}),t.ConcentricLayout=void 0,n(58652)),n=(o=n(9284).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},a.prototype.execute=function(){var o=this,e=o.nodes,t=o.edges,n=e.length;if(0!==n){o.width||"undefined"==typeof window||(o.width=window.innerWidth),o.height||"undefined"==typeof window||(o.height=window.innerHeight),o.center||(o.center=[o.width/2,o.height/2]);var i=o.center;if(1===n)return e[0].x=i[0],e[0].y=i[1],void(null!=(n=o.onLayoutEnd)&&n.call(o));var r,n=o.nodeSize,a=o.nodeSpacing,s=[],u=0,l=(0,b.isArray)(n)?Math.max(n[0],n[1]):n,c=((0,b.isArray)(a)?u=Math.max(a[0],a[1]):(0,b.isNumber)(a)&&(u=a),e.forEach(function(e){s.push(e);var t=l;(0,b.isArray)(e.size)?t=Math.max(e.size[0],e.size[1]):(0,b.isNumber)(e.size)?t=e.size:(0,b.isObject)(e.size)&&(t=Math.max(e.size.width,e.size.height)),l=Math.max(l,t),(0,b.isFunction)(a)&&(u=Math.max(a(e),u))}),o.clockwise=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,{}),f=(s.forEach(function(e,t){e.id,c[e.id]=t}),"degree"!==o.sortBy&&(0,b.isString)(o.sortBy)&&void 0!==s[0][o.sortBy]||(o.sortBy="degree",(0,b.isNumber)(e[0].degree))||(r=(0,b.getDegree)(e.length,c,t),s.forEach(function(e,t){e.degree=r[t].all})),s.sort(function(e,t){return t[o.sortBy]-e[o.sortBy]}),o.maxValueNode=s[0],o.maxLevelDiff=o.maxLevelDiff||o.maxValueNode[o.sortBy]/4,[[]]),h=f[0],p=(s.forEach(function(e){var t;0<h.length&&(t=Math.abs(h[0][o.sortBy]-e[o.sortBy]),o.maxLevelDiff)&&t>=o.maxLevelDiff&&(h=[],f.push(h)),h.push(e)}),l+(u||o.minNodeSpacing)),d=(o.preventOverlap||(n=0<f.length&&1<f[0].length,n=(Math.min(o.width,o.height)/2-p)/(f.length+(n?1:0)),p=Math.min(p,n)),0);if(f.forEach(function(e){var t,n=o.sweep,n=(void 0===n&&(n=2*Math.PI-2*Math.PI/e.length),e.dTheta=n/Math.max(1,e.length-1));1<e.length&&o.preventOverlap&&(t=Math.cos(n)-Math.cos(0),n=Math.sin(n)-Math.sin(0),t=Math.sqrt(p*p/(t*t+n*n)),d=Math.max(t,d)),e.r=d,d+=p}),o.equidistant){for(var y=0,g=0,v=0;v<f.length;v++)var m=f[v].r-g,y=Math.max(y,m);g=0,f.forEach(function(e,t){0===t&&(g=e.r),e.r=g,g+=y})}return f.forEach(function(e){var n=e.dTheta,r=e.r;e.forEach(function(e,t){t=o.startAngle+(o.clockwise?1:-1)*n*t;e.x=i[0]+r*Math.cos(t),e.y=i[1]+r*Math.sin(t)})}),o.onLayoutEnd&&o.onLayoutEnd(),{nodes:e,edges:t}}null!=(n=o.onLayoutEnd)&&n.call(o)},a.prototype.getType=function(){return"concentric"},a);function a(e){var t=o.call(this)||this;return t.nodeSize=30,t.minNodeSpacing=10,t.nodeSpacing=10,t.preventOverlap=!1,t.equidistant=!1,t.startAngle=1.5*Math.PI,t.clockwise=!0,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t.onLayoutEnd=function(){},t.updateCfg(e),t}t.ConcentricLayout=n},84587:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORCE_LAYOUT_TYPE_MAP=t.LAYOUT_MESSAGE=void 0,t.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},t.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},10813:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},W=(Object.defineProperty(t,"__esModule",{value:!0}),t.DagreLayout=void 0,a(n(46269))),Y=n(58652),a=n(9284),H=n(95317),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},s.prototype.execute=function(){var c,f,i,o,t,N,s,a,u,l,h,n,p,r,d,y,e,D,g,v,m,b,w,_,x,S,O,B,P,E,F,G,z,U,k=this,M=this,j=M.nodes,C=M.nodeSize,T=M.rankdir,A=M.combos,I=M.begin,V=M.radial,R=M.comboEdges,R=void 0===R?[]:R,L=M.vedges,L=void 0===L?[]:L;if(j)return c=M.edges||[],f=new H.Graph({multigraph:!0,compound:!0}),M.nodeMap={},i={},j.forEach(function(e){(M.nodeMap[e.id]=e).comboId&&(i[e.comboId]=i[e.comboId]||[],i[e.comboId].push(e.id))}),t=[],N={},null!=(e=M.nodeOrder)&&e.length?(M.nodeOrder.forEach(function(e){N[e]=!0,t.push(M.nodeMap[e])}),j.forEach(function(e){N[e.id]||t.push(e)})):t=j,o=C?(0,Y.isArray)(C)?function(){return C}:function(){return[C,C]}:function(e){return e.size?(0,Y.isArray)(e.size)?e.size:(0,Y.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]},s=(0,Y.getFunc)(M.ranksep,50,M.ranksepFunc),a=(0,Y.getFunc)(M.nodesep,50,M.nodesepFunc),u=a,l=s,"LR"!==T&&"RL"!==T||(u=s,l=a),f.setDefaultEdgeLabel(function(){return{}}),f.setGraph(M),h={},this.sortByCombo&&A&&A.forEach(function(e){var t,n,r;(h[e.id]=e).collapsed&&(r=o(e),t=l(e),n=u(e),n=r[0]+2*n,r=r[1]+2*t,f.setNode(e.id,{width:n,height:r})),e.parentId&&(h[e.parentId]||f.setNode(e.parentId,{}),f.setParent(e.id,e.parentId))}),t.filter(function(e){return!1!==e.layout}).forEach(function(e){var t=o(e),n=l(e),r=u(e),r=t[0]+2*r,t=t[1]+2*n,n=e.layer;(0,Y.isNumber)(n)?f.setNode(e.id,{width:r,height:t,layer:n}):f.setNode(e.id,{width:r,height:t}),k.sortByCombo&&e.comboId&&(h[e.comboId]||(h[e.comboId]={id:e.comboId},f.setNode(e.comboId,{})),f.setParent(e.id,e.comboId))}),c.forEach(function(e){var t=(0,Y.getEdgeTerminal)(e,"source"),n=(0,Y.getEdgeTerminal)(e,"target");k.layoutNode(t)&&k.layoutNode(n)&&f.setEdge(t,n,{weight:e.weight||1})}),n=void(null!=(e=null==R?void 0:R.concat(L||[]))&&e.forEach(function(n){var e=n.source,t=n.target,r=(null==(r=h[e])||!r.collapsed)&&i[e]||[e],o=(null==(e=h[t])||!e.collapsed)&&i[t]||[t];r.forEach(function(t){o.forEach(function(e){f.setEdge(t,e,{weight:n.weight||1})})})})),null!=(R=M.preset)&&R.nodes&&(n=new H.Graph({multigraph:!0,compound:!0}),M.preset.nodes.forEach(function(e){null!=n&&n.setNode(e.id,e)})),W.default.layout(f,{prevGraph:n,edgeLabelSpace:M.edgeLabelSpace,keepNodeOrder:Boolean(!!M.nodeOrder),nodeOrder:M.nodeOrder}),p=[0,0],I&&(d=r=1/0,f.nodes().forEach(function(e){e=f.node(e);r>e.x&&(r=e.x),d>e.y&&(d=e.y)}),f.edges().forEach(function(e){null!=(e=f.edge(e).points)&&e.forEach(function(e){r>e.x&&(r=e.x),d>e.y&&(d=e.y)})}),p[0]=I[0]-r,p[1]=I[1]-d),y="LR"===T||"RL"===T,V?(L=this.focusNode,e=this.ranksep,D=this.getRadialPos,R=(0,Y.isString)(L)?L:null==L?void 0:L.id,g=R?null==(I=f.node(R))?void 0:I._rank:0,v=[],m=y?"y":"x",b=y?"height":"width",w=1/0,_=-1/0,f.nodes().forEach(function(e){var t,n,r,o=f.node(e);M.nodeMap[e]&&(t=a(M.nodeMap[e]),0===g?(v[o._rank]||(v[o._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),v[o._rank].nodes.push(e),v[o._rank].totalWidth+=2*t+o[b],v[o._rank].maxSize<Math.max(o.width,o.height)&&(v[o._rank].maxSize=Math.max(o.width,o.height))):0==(n=o._rank-g)?(v[n]||(v[n]={nodes:[],totalWidth:0,maxSize:-1/0}),v[n].nodes.push(e),v[n].totalWidth+=2*t+o[b],v[n].maxSize<Math.max(o.width,o.height)&&(v[n].maxSize=Math.max(o.width,o.height))):(r=Math.abs(n),v[r]||(v[r]={left:[],right:[],totalWidth:0,maxSize:-1/0}),v[r].totalWidth+=2*t+o[b],v[r].maxSize<Math.max(o.width,o.height)&&(v[r].maxSize=Math.max(o.width,o.height)),(n<0?v[r].left:v[r].right).push(e)),n=o[m]-o[b]/2-t,r=o[m]+o[b]/2+t,n<w&&(w=n),_<r)&&(_=r)}),x=e||50,S={},B=[.5*(w+_-(O=(_-w)/.9)),.5*(w+_+O)],P=function(e,o,t,i){void 0===i&&(i=[0,1]);var a=t=void 0===t?-1/0:t;return e.forEach(function(e){var t=f.node(e),n=(S[e]=o,D(t[m],B,O,o,i)),r=n.x,n=n.y;M.nodeMap[e]&&(M.nodeMap[e].x=r+p[0],M.nodeMap[e].y=n+p[1],M.nodeMap[e]._order=t._order,r=s(M.nodeMap[e]),a<r)&&(a=r)}),a},E=!0,v.forEach(function(e){if(null!=(n=null==e?void 0:e.nodes)&&n.length||null!=(n=null==e?void 0:e.left)&&n.length||null!=(n=null==e?void 0:e.right)&&n.length){if(E&&1===e.nodes.length)return n=e.nodes[0],M.nodeMap[n]?(M.nodeMap[n].x=p[0],M.nodeMap[n].y=p[1],S[e.nodes[0]]=0,x=s(M.nodeMap[n]),void(E=!1)):void 0;x=Math.max(x,e.totalWidth/(2*Math.PI));var t,n=-1/0;n=0===g||null!=(t=e.nodes)&&t.length?P(e.nodes,x,n,[0,1]):(t=(null==(t=e.left)?void 0:t.length)/((null==(t=e.left)?void 0:t.length)+(null==(t=e.right)?void 0:t.length)),n=P(e.left,x,n,[0,t]),P(e.right,x,n,[.05+t,1])),x+=n,E=!1,e.maxSize}}),f.edges().forEach(function(n){var r,e,o,i,a,s,u,t=f.edge(n),l=c.findIndex(function(e){var t=(0,Y.getEdgeTerminal)(e,"source"),e=(0,Y.getEdgeTerminal)(e,"target");return t===n.v&&e===n.w});l<=-1||!M.edgeLabelSpace||!M.controlPoints||"loop"===c[l].type||(r="x"===m?"y":"x",e=null==(e=null==t?void 0:t.points)?void 0:e.slice(1,t.points.length-1),o=[],i=null==(t=f.node(n.v))?void 0:t[r],a=i-(null==(t=f.node(n.w))?void 0:t[r]),s=S[n.v],u=s-S[n.w],null!=e&&e.forEach(function(e){var t=(e[r]-i)/a*u+s,e=D(e[m],B,O,t);o.push({x:e.x+p[0],y:e.y+p[1]})}),c[l].controlPoints=o)})):(F=new Set,V="BT"===T||"RL"===T?function(e,t){return t-e}:function(e,t){return e-t},f.nodes().forEach(function(t){var e,n=f.node(t);n&&(e=(e=k.nodeMap[t])||(null==A?void 0:A.find(function(e){return e.id===t})))&&(e.x=n.x+p[0],e.y=n.y+p[1],e._order=n._order,F.add(y?e.x:e.y))}),G=Array.from(F).sort(V),z=y?function(e,t){return e.x!==t.x}:function(e,t){return e.y!==t.y},U=y?function(e,t,n){var r=Math.max(t.y,n.y),o=Math.min(t.y,n.y);return e.filter(function(e){return e.y<=r&&e.y>=o})}:function(e,t,n){var r=Math.max(t.x,n.x),o=Math.min(t.x,n.x);return e.filter(function(e){return e.x<=r&&e.x>=o})},f.edges().forEach(function(n){var e,t,r=f.edge(n),o=c.findIndex(function(e){var t=(0,Y.getEdgeTerminal)(e,"source"),e=(0,Y.getEdgeTerminal)(e,"target");return t===n.v&&e===n.w});o<=-1||!M.edgeLabelSpace||!M.controlPoints||"loop"===c[o].type||(null!=(e=null==r?void 0:r.points)&&e.forEach(function(e){e.x+=p[0],e.y+=p[1]}),e=M.nodeMap[n.v],t=M.nodeMap[n.w],c[o].controlPoints=X(null==r?void 0:r.points,e,t,G,y,z,U))})),M.onLayoutEnd&&M.onLayoutEnd(),{nodes:j,edges:c}},s.prototype.getRadialPos=function(e,t,n,r,o){e=2*((e-t[0])/n*((o=void 0===o?[0,1]:o)[1]-o[0])+o[0])*Math.PI;return{x:Math.cos(e)*r,y:Math.sin(e)*r}},s.prototype.getType=function(){return"dagre"},s);function s(e){var n=o.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(t){var e=n.nodes.find(function(e){return e.id===t});return!e||!1!==e.layout},n.updateCfg(e),n}t.DagreLayout=n;var X=function(e,t,n,r,o,i,a){var s,u,l,c,f,h,p,e=(null==e?void 0:e.slice(1,e.length-1))||[];return t&&n&&(s=t.x,u=t.y,l=n.x,c=n.y,o&&(s=t.y,u=t.x,l=n.y,c=n.x),c!==u)&&s!==l&&(p=r.indexOf(u),(h=r[p+1])&&(f=e[0],h=o?{x:(u+h)/2,y:(null==f?void 0:f.y)||l}:{x:(null==f?void 0:f.x)||l,y:(u+h)/2},f&&!i(f,h)||e.unshift(h)),f=r.indexOf(c),1===(h=Math.abs(f-p))?(e=a(e,t,n)).length||e.push(o?{x:(u+c)/2,y:s}:{x:s,y:(u+c)/2}):1<h&&(p=r[f-1])&&(a=e[e.length-1],t=o?{x:(c+p)/2,y:(null==a?void 0:a.y)||l}:{x:(null==a?void 0:a.x)||s,y:(c+p)/2},a&&!i(a,t)||e.push(t))),e}},91083:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},w=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.DagreCompoundLayout=void 0,n(9284)),_=n(94756),x=n(58652),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},s.prototype.init=function(e){var t=e.hiddenNodes||[],n=e.hiddenEdges||[],r=e.hiddenCombos||[];this.nodes=this.getDataByOrder((e.nodes||[]).concat(t)),this.edges=this.getDataByOrder((e.edges||[]).concat(n)),this.combos=(e.combos||[]).concat(r.map(function(e){return b(b({},e),{collapsed:!0})}))},s.prototype.execute=function(){var e,t,n,r=this.nodes,o=this.edges;if(r)return t=(e=this.getLayoutConfig()).graphDef,n=e.graphOption,e=e.graphSettings,t=(0,_.buildGraph)(t,n,e),n=(0,_.flatGraph)(t,!0),this.updatePosition(n),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:r,edges:o}},s.prototype.getNodePath=function(t){var e=this.nodes,o=this.combos,e=e.find(function(e){return e.id===t});return e&&e.comboId?function e(t,n){void 0===n&&(n=[]);var r=o.find(function(e){return e.id===t});return r&&(n.unshift(t),r.parentId)?e(r.parentId,n):n}(e.comboId,[t]):[t]},s.prototype.getLayoutConfig=function(){var o=this.nodes,e=this.edges,i=this.combos,t=this.nodeSize,n=this.rankdir,r=this.align,a=this.edgesep,s=this.nodesep,u=this.ranksep,l=this.settings,c=(i||[]).reduce(function(e,t){var n=o.filter(function(e){return e.comboId===t.id}).map(function(e){return e.id}),r=(i||[]).filter(function(e){return e.parentId===t.id}).map(function(e){return e.id});return(n.length||r.length)&&(e[t.id]=w(w([],n,!0),r,!0)),e},{}),f=t?(0,x.isArray)(t)?function(){return t}:function(){return[t,t]}:function(e){return e&&e.size?(0,x.isArray)(e.size)?e.size:(0,x.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]},h=(h=null==i?void 0:i[0])&&h.size?(0,x.isArray)(h.size)?h.size:[h.size,h.size]:[80,40],p=h[0],h=h[1],d=null==(d=null==(d=this.graphSettings)?void 0:d.subScene)?void 0:d.meta,y=(null==(y=i.find(function(e){return!e.collapsed}))?void 0:y.padding)||[20,20,20,20],g=y[0],v=y[1],m=y[2],y=y[3],c={compound:c,nodes:w([],(o||[]).map(function(e){var t=f(e),n=t[0],t=t[1];return b(b({},e),{width:n,height:t})}),!0),edges:w([],(e||[]).map(function(e){return b(b({},e),{v:e.source,w:e.target})}),!0)},e={expanded:(i||[]).filter(function(e){return!e.collapsed}).map(function(e){return e.id})},r={graph:{meta:{align:r,rankDir:n,nodeSep:s,edgeSep:a,rankSep:u}},subScene:{meta:{paddingTop:g||(null==d?void 0:d.paddingTop)||20,paddingRight:v||(null==d?void 0:d.paddingRight)||20,paddingBottom:m||(null==d?void 0:d.paddingBottom)||20,paddingLeft:y||(null==d?void 0:d.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:p,height:h}}},n=(0,_.mergeConfig)(l,b({},(0,_.mergeConfig)(r,_.LAYOUT_CONFIG)));return{graphDef:c,graphOption:e,graphSettings:this.graphSettings=n}},s.prototype.updatePosition=function(e){var t=e.nodes,e=e.edges;this.updateNodePosition(t,e),this.updateEdgePosition(t,e)},s.prototype.getBegin=function(e,t){var n,r,o=this.begin,i=[0,0];return o&&(r=n=1/0,e.forEach(function(e){n>e.x&&(n=e.x),r>e.y&&(r=e.y)}),t.forEach(function(e){e.points.forEach(function(e){n>e.x&&(n=e.x),r>e.y&&(r=e.y)})}),i[0]=o[0]-n,i[1]=o[1]-r),i},s.prototype.updateNodePosition=function(e,l){var c=this.combos,f=this.nodes,h=this.edges,p=this.anchorPoint,d=this.graphSettings,y=this.getBegin(e,l);e.forEach(function(r){var o,e,t,i=r.x,a=r.y,n=r.id,s=r.type,u=r.coreBox;s===_.HierarchyNodeType.META&&n!==_.ROOT_NAME?(t=c.findIndex(function(e){return e.id===n}),e=null==(e=null==d?void 0:d.subScene)?void 0:e.meta,c[t].offsetX=i+y[0],c[t].offsetY=a+y[1],c[t].fixSize=[u.width,u.height],c[t].fixCollapseSize=[u.width,u.height],r.expanded?c[t].padding=[null==e?void 0:e.paddingTop,null==e?void 0:e.paddingRight,null==e?void 0:e.paddingBottom,null==e?void 0:e.paddingLeft]:c[t].padding=[0,0,0,0]):s===_.HierarchyNodeType.OP&&(t=f.findIndex(function(e){return e.id===n}),f[t].x=i+y[0],f[t].y=a+y[1],p)&&(o=[],u=l.filter(function(e){return e.v===n}),e=l.filter(function(e){return e.w===n}),0<u.length&&u.forEach(function(e){var t=e.points[0],n=(t.x-i)/r.width+.5,t=(t.y-a)/r.height+.5;o.push([n,t]),e.baseEdgeList.forEach(function(t){var e=h.find(function(e){return e.source===t.v&&e.target===t.w});e&&(e.sourceAnchor=o.length-1)})}),0<e.length&&e.forEach(function(e){var t=e.points[e.points.length-1],n=(t.x-i)/r.width+.5,t=(t.y-a)/r.height+.5;o.push([n,t]),e.baseEdgeList.forEach(function(t){var e=h.find(function(e){return e.source===t.v&&e.target===t.w});e&&(e.targetAnchor=o.length-1)})}),f[t].anchorPoints=0<o.length?o:f[t].anchorPoints||[])})},s.prototype.updateEdgePosition=function(l,e){var c=this,f=c.combos,t=c.edges,n=c.controlPoints,h=this.getBegin(l,e);n&&(f.forEach(function(e){e.inEdges=[],e.outEdges=[]}),t.forEach(function(t){var e,n,r,o,i=l.find(function(e){return e.id===t.source}),a=l.find(function(e){return e.id===t.target}),s=[],s=(s=(i&&a?(0,_.getEdges)(null==i?void 0:i.id,null==a?void 0:a.id,l):(e=c.getNodePath(t.source),n=c.getNodePath(t.target),r=e.reverse().slice(i?0:1).find(function(t){return l.find(function(e){return e.id===t})}),o=n.reverse().slice(a?0:1).find(function(t){return l.find(function(e){return e.id===t})}),i=l.find(function(e){return e.id===r}),a=l.find(function(e){return e.id===o}),(0,_.getEdges)(null==i?void 0:i.id,null==a?void 0:a.id,l,{v:t.source,w:t.target}))).reduce(function(e,t){return w(w([],e,!0),t.points.map(function(e){return b(b({},e),{x:e.x+h[0],y:e.y+h[1]})}),!0)},[])).slice(1,-1);if(t.controlPoints=s,(null==a?void 0:a.type)===_.NodeType.META){var u=f.findIndex(function(e){return e.id===(null==a?void 0:a.id)});if(!f[u]||null!=(e=f[u].inEdges)&&e.some(function(e){return e.source===i.id&&e.target===a.id}))return;null!=(n=f[u].inEdges)&&n.push({source:i.id,target:a.id,controlPoints:s})}(null==i?void 0:i.type)===_.NodeType.META&&(u=f.findIndex(function(e){return e.id===(null==i?void 0:i.id)}),!f[u]||null!=(e=f[u].outEdges)&&e.some(function(e){return e.source===i.id&&e.target===a.id})||null!=(n=f[u].outEdges)&&n.push({source:i.id,target:a.id,controlPoints:s}))}))},s.prototype.getType=function(){return"dagreCompound"},s.prototype.getDataByOrder=function(e){return e.every(function(e){return void 0!==e.layoutOrder})||e.forEach(function(e,t){e.layoutOrder=t}),e.sort(function(e,t){return e.layoutOrder-t.layoutOrder})},s);function s(e){var t=o.call(this)||this;return t.rankdir="TB",t.nodesep=50,t.edgesep=5,t.ranksep=50,t.controlPoints=!0,t.anchorPoint=!0,t.nodes=[],t.edges=[],t.combos=[],t.onLayoutEnd=function(){},t.updateCfg(e),t}t.DagreCompoundLayout=n},95317:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0,o=n(54917).Graph,i(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}t.Graph=n},46269:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(81449))),n=n(656);t.default={layout:r.default,util:{time:n.time,notime:n.notime}}},62051:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(36791)));t.default={run:function(n){var r,o,i,a,t,e="greedy"===n.graph().acyclicer?(0,s.default)(n,(t=n,function(e){return(null==(e=t.edge(e))?void 0:e.weight)||1})):(o=[],i={},a={},(r=n).nodes().forEach(function t(e){var n;a[e]||(i[e]=a[e]=!0,null!=(n=r.outEdges(e))&&n.forEach(function(e){i[e.w]?o.push(e):t(e.w)}),delete i[e])}),o);null!=e&&e.forEach(function(e){var t=n.edge(e);n.removeEdgeObj(e),t.forwardName=e.name,t.reversed=!0,n.setEdge(e.w,e.v,t,"rev-".concat(Math.random()))})},undo:function(r){r.edges().forEach(function(e){var t,n=r.edge(e);n.reversed&&(r.removeEdgeObj(e),t=n.forwardName,delete n.reversed,delete n.forwardName,r.setEdge(e.w,e.v,n,t))})}}},81850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function s(e,t,n,r,o,i){var a=o[t][i-1],n=(0,u.addDummyNode)(e,"border",{rank:i,borderType:t,width:0,height:0},n);o[t][i]=n,e.setParent(n,r),a&&e.setEdge(a,n,{weight:1})}var u=n(656);t.default=function(a){var e;null!=(e=a.children())&&e.forEach(function e(t){var n=a.children(t),r=a.node(t);if(null!=n&&n.length&&n.forEach(e),r.hasOwnProperty("minRank")){r.borderLeft=[],r.borderRight=[];for(var o=r.minRank,i=r.maxRank+1;o<i;o+=1)s(a,"borderLeft","_bl",t,r,o),s(a,"borderRight","_br",t,r,o)}})}},17359:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(t){t.nodes().forEach(function(e){n(t.node(e))}),t.edges().forEach(function(e){n(t.edge(e))})}function n(e){var t=e.width;e.width=e.height,e.height=t}function i(e){null!=e&&e.y&&(e.y=-e.y)}function a(e){var t=e.x;e.x=e.y,e.y=t}t.default={adjust:function(e){var t=null==(t=e.graph().rankdir)?void 0:t.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var n,r,t=null==(t=e.graph().rankdir)?void 0:t.toLowerCase();"bt"!==t&&"rl"!==t||((r=e).nodes().forEach(function(e){i(r.node(e))}),r.edges().forEach(function(e){var t,e=r.edge(e);null!=(t=e.points)&&t.forEach(i),e.hasOwnProperty("y")&&i(e)})),"lr"!==t&&"rl"!==t||((n=e).nodes().forEach(function(e){a(n.node(e))}),n.edges().forEach(function(e){var t,e=n.edge(e);null!=(t=e.points)&&t.forEach(a),e.hasOwnProperty("x")&&a(e)}),o(e))}}},55272:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t){if("next"!==e&&"prev"!==e)return t}function n(e){e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev}function o(){var e={};(e.prev=e).next=e.prev,this.shortcut=e}o.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return n(t),t},o.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&n(e),e.next=t.next,t.next.prev=e,(t.next=e).prev=t},o.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,r)),n=null==n?void 0:n.prev;return"[".concat(e.join(", "),"]")},t.default=o},36791:function(e,t,n){"use strict";function r(){return 1}var o,i,a,s=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(t,"__esModule",{value:!0}),u(n(55272))),n=n(54917),l=(a=u.default,s(d,a),d),c=(i=n.Graph,s(p,i),p),f=function(r,o,i,e,a){var t,s=[];return null!=(t=r.inEdges(e.v))&&t.forEach(function(e){var t=r.edge(e),n=r.node(e.v);a&&s.push({v:e.v,w:e.w,in:0,out:0}),void 0===n.out&&(n.out=0),n.out-=t,h(o,i,n)}),null!=(t=r.outEdges(e.v))&&t.forEach(function(e){var t=r.edge(e),e=e.w,e=r.node(e);void 0===e.in&&(e.in=0),e.in-=t,h(o,i,e)}),r.removeNode(e.v),a?s:void 0},h=function(e,t,n){(n.out?n.in?e[n.out-n.in+t]:e[e.length-1]:e[0]).enqueue(n)};function p(){return null!==i&&i.apply(this,arguments)||this}function d(){return null!==a&&a.apply(this,arguments)||this}t.default=function(t,e){return t.nodeCount()<=1?[]:null==(e=function(e,t,n){for(var r,o=[],i=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)f(e,t,n,r);for(;r=i.dequeue();)f(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;0<s;--s)if(r=t[s].dequeue()){o=o.concat(f(e,t,n,r,!0));break}}return o}((e=function(e,r){var o=new c,i=0,a=0;e.nodes().forEach(function(e){o.setNode(e,{v:e,in:0,out:0})}),e.edges().forEach(function(e){var t=o.edge(e)||0,n=(null==r?void 0:r(e))||1;o.setEdge(e.v,e.w,t+n),a=Math.max(a,o.node(e.v).out+=n),i=Math.max(i,o.node(e.w).in+=n)});for(var t=[],n=a+i+3,s=0;s<n;s++)t.push(new l);var u=i+1;return o.nodes().forEach(function(e){h(t,u,o.node(e))}),{buckets:t,zeroIdx:u,graph:o}}(t,e||r)).graph,e.buckets,e.zeroIdx).map(function(e){return t.outEdges(e.v,e.w)}))?void 0:e.flat()}},81449:function(r,e,t){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(e,"__esModule",{value:!0}),n(t(62051))),u=n(t(2749)),l=n(t(75378)),c=t(656),f=n(t(71745)),h=n(t(83077)),p=n(t(81850)),d=n(t(17359)),y=n(t(74962)),g=n(t(34831)),v=n(t(76590)),m=t(95317),b=["nodesep","edgesep","ranksep","marginx","marginy"],w={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],x=["width","height","layer","fixorder"],S={width:0,height:0},O=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"],k=function(n){n.edges().forEach(function(e){var t=n.edge(e);t.width&&t.height&&(t=n.node(e.v),e={e:e,rank:(n.node(e.w).rank-t.rank)/2+t.rank},(0,c.addDummyNode)(n,"edge-proxy",e,"_ep"))})},M=function(n){var r=0;n.nodes().forEach(function(e){var t,e=n.node(e);e.borderTop&&(e.minRank=null==(t=n.node(e.borderTop))?void 0:t.rank,e.maxRank=null==(t=n.node(e.borderBottom))?void 0:t.rank,r=Math.max(r,e.maxRank||-1/0))}),n.graph().maxRank=r},j=function(n){n.nodes().forEach(function(e){var t=n.node(e);"edge-proxy"===t.dummy&&(n.edge(t.e).labelRank=t.rank,n.removeNode(e))})},C=function(n){function t(e){var t,n,r;e&&(t=e.x,n=e.y,r=e.width,e=e.height,isNaN(t)||isNaN(r)||(void 0===o&&(o=t-r/2),o=Math.min(o,t-r/2),a=Math.max(a,t+r/2)),isNaN(n)||isNaN(e)||(void 0===i&&(i=n-e/2),i=Math.min(i,n-e/2),s=Math.max(s,n+e/2)))}var o,i,a=0,s=0,e=n.graph(),r=e.marginx||0,u=e.marginy||0;n.nodes().forEach(function(e){t(n.node(e))}),n.edges().forEach(function(e){e=n.edge(e);null!=e&&e.hasOwnProperty("x")&&t(e)}),o-=r,i-=u,n.nodes().forEach(function(e){e=n.node(e);e&&(e.x-=o,e.y-=i)}),n.edges().forEach(function(e){var t,e=n.edge(e);null!=(t=e.points)&&t.forEach(function(e){e.x-=o,e.y-=i}),e.hasOwnProperty("x")&&(e.x-=o),e.hasOwnProperty("y")&&(e.y-=i)}),e.width=a-o+r,e.height=s-i+u},T=function(i){i.edges().forEach(function(e){var t,n=i.edge(e),r=i.node(e.v),e=i.node(e.w),o=n.points?(t=n.points[0],n.points[n.points.length-1]):(n.points=[],t=e,r);n.points.unshift((0,c.intersectRect)(r,t)),n.points.push((0,c.intersectRect)(e,o))})},A=function(n){n.edges().forEach(function(e){var t=n.edge(e);if(null!=t&&t.hasOwnProperty("x"))switch("l"!==t.labelpos&&"r"!==t.labelpos||(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset}})},I=function(t){t.edges().forEach(function(e){var e=t.edge(e);e.reversed&&null!=(e=e.points)&&e.reverse()})},R=function(i){i.nodes().forEach(function(e){var t,n,r,o;null!=(t=i.children(e))&&t.length&&(t=i.node(e),e=i.node(t.borderTop),n=i.node(t.borderBottom),r=i.node(t.borderLeft[(null==(r=t.borderLeft)?void 0:r.length)-1]),o=i.node(t.borderRight[(null==(o=t.borderRight)?void 0:o.length)-1]),t.width=Math.abs((null==o?void 0:o.x)-(null==r?void 0:r.x))||10,t.height=Math.abs((null==n?void 0:n.y)-(null==e?void 0:e.y))||10,t.x=((null==r?void 0:r.x)||0)+t.width/2,t.y=((null==e?void 0:e.y)||0)+t.height/2)}),i.nodes().forEach(function(e){var t;"border"===(null==(t=i.node(e))?void 0:t.dummy)&&i.removeNode(e)})},L=function(n){n.edges().forEach(function(e){var t;e.v===e.w&&((t=n.node(e.v)).selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:e,label:n.edge(e)}),n.removeEdgeObj(e))})},N=function(o){var e=(0,c.buildLayerMatrix)(o);null!=e&&e.forEach(function(e){var r=0;null!=e&&e.forEach(function(e,t){var n=o.node(e);n.order=t+r,null!=(e=n.selfEdges)&&e.forEach(function(e){(0,c.addDummyNode)(o,"selfedge",{width:e.label.width,height:e.label.height,rank:n.rank,order:t+ ++r,e:e.e,label:e.label},"_se")}),delete n.selfEdges})})},F=function(a){a.nodes().forEach(function(e){var t,n,r,o,i=a.node(e);"selfedge"===i.dummy&&(t=(o=a.node(i.e.v)).x+o.width/2,n=o.y,r=i.x-t,o=o.height/2,a.setEdgeObj(i.e,i.label),a.removeNode(e),i.label.points=[{x:t+2*r/3,y:n-o},{x:t+5*r/6,y:n-o},{y:n,x:t+r},{x:t+5*r/6,y:n+o},{x:t+2*r/3,y:n+o}],i.label.x=i.x,i.label.y=i.y)})},D=function(t,e){var n={};return null!=e&&e.forEach(function(e){void 0!==t[e]&&(n[e]=+t[e])}),n},B=function(t){void 0===t&&(t={});var n={};return Object.keys(t).forEach(function(e){n[e.toLowerCase()]=t[e]}),n};e.default=function(e,o){var r=o&&o.debugTiming?c.time:c.notime;r("layout",function(){o&&!o.keepNodeOrder&&o.prevGraph&&r("  inheritOrder",function(){var n,r;n=e,r=o.prevGraph,n.nodes().forEach(function(e){var t=n.node(e),e=r.node(e);void 0!==e?(t.fixorder=e._order,delete e._order):delete t.fixorder})});var i=r("  buildLayoutGraph",function(){return r=e,o=new m.Graph({multigraph:!0,compound:!0}),t=B(r.graph()),n={},null!=_&&_.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),o.setGraph(Object.assign({},w,D(t,b),n)),r.nodes().forEach(function(e){var t=B(r.node(e)),t=a(a({},S),t),t=D(t,x);o.setNode(e,t),o.setParent(e,r.parent(e))}),r.edges().forEach(function(e){var t=B(r.edge(e)),n={};null!=E&&E.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),o.setEdgeObj(e,Object.assign({},P,D(t,O),n))}),o;var r,o,t,n});o&&!1===o.edgeLabelSpace||r("  makeSpaceForEdgeLabels",function(){var n,r;(r=(n=i).graph()).ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(function(e){e=n.node(e);isNaN(e.layer)||e.layer||(e.layer=0)}),n.edges().forEach(function(e){var t,e=n.edge(e);e.minlen*=2,"c"!==(null==(t=e.labelpos)?void 0:t.toLowerCase())&&("TB"===r.rankdir||"BT"===r.rankdir?e.width+=e.labeloffset:e.height+=e.labeloffset)})});try{r("  runLayout",function(){var e,t,n;e=i,n=o,(t=r)("    removeSelfEdges",function(){L(e)}),t("    acyclic",function(){s.default.run(e)}),t("    nestingGraph.run",function(){h.default.run(e)}),t("    rank",function(){(0,l.default)((0,c.asNonCompoundGraph)(e))}),t("    injectEdgeLabelProxies",function(){k(e)}),t("    removeEmptyRanks",function(){(0,c.removeEmptyRanks)(e)}),t("    nestingGraph.cleanup",function(){h.default.cleanup(e)}),t("    normalizeRanks",function(){(0,c.normalizeRanks)(e)}),t("    assignRankMinMax",function(){M(e)}),t("    removeEdgeLabelProxies",function(){j(e)}),t("    normalize.run",function(){u.default.run(e)}),t("    parentDummyChains",function(){(0,f.default)(e)}),t("    addBorderSegments",function(){(0,p.default)(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",function(){(0,v.default)(e,n.nodeOrder)}),t("    order",function(){(0,y.default)(e,null==n?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",function(){N(e)}),t("    adjustCoordinateSystem",function(){d.default.adjust(e)}),t("    position",function(){(0,g.default)(e)}),t("    positionSelfEdges",function(){F(e)}),t("    removeBorderNodes",function(){R(e)}),t("    normalize.undo",function(){u.default.undo(e)}),t("    fixupEdgeLabelCoords",function(){A(e)}),t("    undoCoordinateSystem",function(){d.default.undo(e)}),t("    translateGraph",function(){C(e)}),t("    assignNodeIntersects",function(){T(e)}),t("    reversePoints",function(){I(e)}),t("    acyclic.undo",function(){s.default.undo(e)})})}catch(e){if("Not possible to find intersection inside of the rectangle"===e.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",e);throw e}r("  updateInputGraph",function(){var r,o;o=i,(r=e).nodes().forEach(function(e){var t,n=r.node(e);n&&(t=o.node(e),n.x=t.x,n.y=t.y,n._order=t.order,n._rank=t.rank,null!=(e=o.children(e)))&&e.length&&(n.width=t.width,n.height=t.height)}),r.edges().forEach(function(e){var t=r.edge(e),e=o.edge(e);t.points=e?e.points:[],e&&e.hasOwnProperty("x")&&(t.x=e.x,t.y=e.y)}),r.graph().width=o.graph().width,r.graph().height=o.graph().height})})}},83077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function p(o,i,a,s,u,l,c){var f,h,e,t=o.children(c);null!=t&&t.length?(f=(0,d.addBorderNode)(o,"_bt"),h=(0,d.addBorderNode)(o,"_bb"),e=o.node(c),o.setParent(f,c),e.borderTop=f,o.setParent(h,c),e.borderBottom=h,null!=t&&t.forEach(function(e){p(o,i,a,s,u,l,e);var t=o.node(e),n=t.borderTop||e,e=t.borderBottom||e,t=t.borderTop?s:2*s,r=n!==e?1:u-l[c]+1;o.setEdge(f,n,{minlen:r,weight:t,nestingEdge:!0}),o.setEdge(e,h,{minlen:r,weight:t,nestingEdge:!0})}),o.parent(c)||o.setEdge(i,f,{weight:0,minlen:u+l[c]})):c!==i&&o.setEdge(i,c,{weight:0,minlen:a})}var d=n(656);t.default={run:function(t){var o,i,n,r,a=(0,d.addDummyNode)(t,"root",{},"_root"),s=(i={},null!=(e=(o=t).children())&&e.forEach(function(e){return function t(e,n){var r=o.children(e);null!=r&&r.forEach(function(e){return t(e,n+1)}),i[e]=n}(e,1)}),i),e=Math.max.apply(Math,Object.values(s)),u=(e=Math.abs(e)===1/0?1:e)-1,l=2*u+1,c=(t.graph().nestingRoot=a,t.edges().forEach(function(e){t.edge(e).minlen*=l}),r=0,(n=t).edges().forEach(function(e){r+=n.edge(e).weight}),r+1);null!=(e=t.children())&&e.forEach(function(e){p(t,a,l,c,u,s,e)}),t.graph().nodeRankFactor=l},cleanup:function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(function(e){t.edge(e).nestingEdge&&t.removeEdgeObj(e)})}}},2749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=n(656);t.default={run:function(p){p.graph().dummyChains=[],p.edges().forEach(function(e){var t=p,n=e,r=n.v,o=t.node(r).rank,e=n.w,i=t.node(e).rank,a=n.name,s=t.edge(n),u=s.labelRank;if(i!==o+1){t.removeEdgeObj(n);var l,c,f=t.graph(),h=0;for(++o;o<i;++h,++o)s.points=[],l=(0,d.addDummyNode)(t,"edge",c={edgeLabel:s,width:0,height:0,edgeObj:n,rank:o},"_d"),o===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),t.setEdge(r,l,{weight:s.weight},a),0===h&&(f.dummyChains||(f.dummyChains=[]),f.dummyChains.push(l)),r=l;t.setEdge(r,e,{weight:s.weight},a)}})},undo:function(i){var e;null!=(e=i.graph().dummyChains)&&e.forEach(function(e){var t,n=i.node(e),r=n.edgeLabel;n.edgeObj&&i.setEdgeObj(n.edgeObj,r);for(var o=e;n.dummy;)t=i.successors(o)[0],i.removeNode(o),r.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),n=i.node(o=t)})}}},92059:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(o,i,e){var a,s={};null!=e&&e.forEach(function(e){for(var t,n,r=o.parent(e);r;){if((t=o.parent(r))?(n=s[t],s[t]=r):(n=a,a=r),n&&n!==r)return void i.setEdge(n,r);r=t}})}},16771:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,e){return e.map(function(e){var n,t=r.inEdges(e);return null!=t&&t.length?(n={sum:0,weight:0},null!=t&&t.forEach(function(e){var t=r.edge(e),e=r.node(e.v);n.sum+=t.weight*e.order,n.weight+=t.weight}),{v:e,barycenter:n.sum/n.weight,weight:n.weight}):{v:e}})}},95053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95317);t.default=function(o,n,i){var a=function(e){for(var t;e.hasNode(t="_root".concat(Math.random())););return t}(o),s=new r.Graph({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(e){return o.node(e)});return o.nodes().forEach(function(r){var e=o.node(r),t=o.parent(r);(e.rank===n||e.minRank<=n&&n<=e.maxRank)&&(s.setNode(r),s.setParent(r,t||a),null!=(t=o[i](r))&&t.forEach(function(e){var t=e.v===r?e.w:e.v,n=s.edgeFromArgs(t,r),n=void 0!==n?n.weight:0;s.setEdge(t,r,{weight:o.edge(e).weight+n})}),e.hasOwnProperty("minRank"))&&s.setNode(r,{borderLeft:e.borderLeft[n],borderRight:e.borderRight[n]})}),s}},42468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(656);t.default=function(e,t){for(var n=0,r=1;r<(null==t?void 0:t.length);r+=1)n+=function(t,e,n){for(var r=(0,u.zipObject)(n,n.map(function(e,t){return t})),e=e.map(function(e){e=null==(e=t.outEdges(e))?void 0:e.map(function(e){return{pos:r[e.w]||0,weight:t.edge(e).weight}});return null==e?void 0:e.sort(function(e,t){return e.pos-t.pos})}).flat().filter(function(e){return void 0!==e}),o=1;o<n.length;)o<<=1;var i=2*o-1,a=(--o,Array(i).fill(0,0,i)),s=0;return null!=e&&e.forEach(function(e){if(e){var t=e.pos+o;a[t]+=e.weight;for(var n=0;0<t;)t%2&&(n+=a[t+1]),a[t=t-1>>1]+=e.weight;s+=e.weight*n}}),s}(e,t[r-1],t[r]);return n}},74962:function(e,t,n){"use strict";function p(t,e,n){return e.map(function(e){return(0,o.default)(t,e,n)})}function d(e,i,a,s){var u=new f.Graph;null!=e&&e.forEach(function(e){for(var t=e.graph().root,n=(0,c.default)(e,t,u,i,a,s),r=0;r<(null==(o=n.vs)?void 0:o.length);r++){var o=e.node(n.vs[r]);o&&(o.order=r)}(0,l.default)(e,u,n.vs)})}function y(n,e){null!=e&&e.forEach(function(e){null!=e&&e.forEach(function(e,t){n.node(e).order=t})})}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},g=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(59883))),v=r(n(42468)),o=r(n(95053)),l=r(n(92059)),c=r(n(49514)),m=n(58652),f=n(95317),b=n(656);t.default=function(e,t){for(var n=(0,b.maxRank)(e),r=[],o=[],i=1;i<n+1;i++)r.push(i);for(i=n-1;-1<i;i--)o.push(i);var a=p(e,r,"inEdges"),s=p(e,o,"outEdges"),u=(0,g.default)(e);y(e,u);for(var l,c,f=Number.POSITIVE_INFINITY,h=i=0;h<4;++i,++h)d(i%2?a:s,2<=i%4,!1,t),u=(0,b.buildLayerMatrix)(e),(c=(0,v.default)(e,u))<f&&(l=(h=0,m.clone)(u),f=c);for(u=(0,g.default)(e),y(e,u),h=i=0;h<4;++i,++h)d(i%2?a:s,2<=i%4,!0,t),u=(0,b.buildLayerMatrix)(e),(c=(0,v.default)(e,u))<f&&(l=(h=0,m.clone)(u),f=c);y(e,l)}},76590:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,e){for(var t=n.nodes().filter(function(e){return!(null!=(e=n.children(e))&&e.length)}).map(function(e){return n.node(e).rank}),r=Math.max.apply(Math,t),o=[],i=0;i<r+1;i++)o[i]=[];null!=e&&e.forEach(function(e){var t=n.node(e);!t||null!=t&&t.dummy||isNaN(t.rank)||(t.fixorder=o[t.rank].length,o[t.rank].push(e))})}},59883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(24258);t.default=function(r){for(var o={},e=r.nodes().filter(function(e){return!(null!=(e=r.children(e))&&e.length)}),t=e.map(function(e){return r.node(e).rank}),n=(0,s.max)(t),i=[],a=0;a<n+1;a++)i.push([]);t=e.sort(function(e,t){return r.node(e).rank-r.node(t).rank}),e=t.filter(function(e){return void 0!==r.node(e).fixorder}).sort(function(e,t){return r.node(e).fixorder-r.node(t).fixorder});return null!=e&&e.forEach(function(e){isNaN(r.node(e).rank)||i[r.node(e).rank].push(e),o[e]=!0}),null!=t&&t.forEach(function e(t){var n;o.hasOwnProperty(t)||(o[t]=!0,n=r.node(t),isNaN(n.rank)||i[n.rank].push(t),null!=(n=r.successors(t))&&n.forEach(e))}),i}},10135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(t){for(var e,n=[],r=function(){var i=t.pop();n.push(i),null!=(e=i.in.reverse())&&e.forEach(function(e){var t,n,r,o;(e=e).merged||(void 0===e.barycenter||void 0===i.barycenter||e.barycenter>=i.barycenter)&&(e=e,o=r=0,(t=i).weight&&(r+=t.barycenter*t.weight,o+=t.weight),e.weight&&(r+=e.barycenter*e.weight,o+=e.weight),t.vs=null==(n=e.vs)?void 0:n.concat(t.vs),t.barycenter=r/o,t.weight=o,t.i=Math.min(e.i,t.i),e.merged=!0)}),null!=(e=i.out)&&e.forEach(function(e){(e=e).in.push(i),0==--e.indegree&&t.push(e)})};null!=t&&t.length;)r();var o=["vs","i","barycenter","weight"];return n.filter(function(e){return!e.merged}).map(function(t){var n={};return null!=o&&o.forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n})}t.default=function(e,t){var r={},e=(null!=e&&e.forEach(function(e,t){r[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};t=r[e.v];void 0!==e.barycenter&&(t.barycenter=e.barycenter,t.weight=e.weight)}),null!=(e=t.edges())&&e.forEach(function(e){var t=r[e.v],n=r[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(r[e.w]))}),null==(e=(t=Object.values(r)).filter)?void 0:e.call(t,function(e){return!e.indegree}));return n(e)}},49514:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},h=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(16771))),p=r(n(10135)),d=r(n(10728));t.default=function n(r,e,o,i,t,a){var s,u=r.children(e),e=r.node(e),l=e?e.borderLeft:void 0,c=e?e.borderRight:void 0,f={},e=(l&&(u=null==u?void 0:u.filter(function(e){return e!==l&&e!==c})),(0,h.default)(r,u||[])),u=(null!=e&&e.forEach(function(e){var t;null!=(t=r.children(e.v))&&t.length&&(t=n(r,e.v,o,i,a),(f[e.v]=t).hasOwnProperty("barycenter"))&&(t=t,void 0!==(e=e).barycenter?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight))}),(0,p.default)(e,o)),e=(s=f,null!=(e=u)&&e.forEach(function(e){var t=null==(t=e.vs)?void 0:t.map(function(e){return s[e]?s[e].vs:e});e.vs=t.flat()}),null!=(e=u.filter(function(e){return 0<e.vs.length}))&&e.forEach(function(e){var t=r.node(e.vs[0]);t&&(e.fixorder=t.fixorder,e.order=t.order)}),(0,d.default)(u,i,t,a));return l&&(e.vs=[l,e.vs,c].flat(),null!=(u=r.predecessors(l)))&&u.length&&(u=r.node((null==(t=r.predecessors(l))?void 0:t[0])||""),t=r.node((null==(t=r.predecessors(c))?void 0:t[0])||""),e.hasOwnProperty("barycenter")||(e.barycenter=0,e.weight=0),e.barycenter=(e.barycenter*e.weight+u.order+t.order)/(e.weight+2),e.weight+=2),e}},10728:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function h(e,t,n){for(var r,o=n;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),null!=e&&e.push(r.vs),o++;return o}var p=n(656);t.default=function(e,t,n,r){var o,i,e=(0,p.partition)(e,function(e){var t=e.hasOwnProperty("fixorder")&&!isNaN(e.fixorder);return r?!t&&e.hasOwnProperty("barycenter"):t||e.hasOwnProperty("barycenter")}),a=e.lhs,s=e.rhs.sort(function(e,t){return-e.i- -t.i}),u=[],l=0,c=0,f=0,e=(null!=a&&a.sort((o=!!t,i=!!n,function(e,t){if(void 0!==e.fixorder&&void 0!==t.fixorder)return e.fixorder-t.fixorder;if(e.barycenter<t.barycenter)return-1;if(e.barycenter>t.barycenter)return 1;if(i&&void 0!==e.order&&void 0!==t.order){if(e.order<t.order)return-1;if(e.order>t.order)return 1}return o?t.i-e.i:e.i-t.i})),f=h(u,s,f),null!=a&&a.forEach(function(e){var t;f+=null==(t=e.vs)?void 0:t.length,u.push(e.vs),l+=e.barycenter*e.weight,c+=e.weight,f=h(u,s,f)}),{vs:u.flat()});return c&&(e.barycenter=l/c,e.weight=c),e}},71745:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(f){i={},a=0,null!=(e=(o=f).children())&&e.forEach(function e(t){var n,r=a;null!=(n=o.children(t))&&n.forEach(e),i[t]={low:r,lim:a++}});var o,e,i,a,h=i;null!=(e=f.graph().dummyChains)&&e.forEach(function(e){var t,n,r,o=e,i=f.node(o).edgeObj;if(i)for(var e=function(e,t,n,r){for(var o,i=[],a=[],s=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim),l=n;l=e.parent(l),i.push(l),l&&(t[l].low>s||u>t[l].lim););for(o=l,l=r;l&&l!==o;)a.push(l),l=e.parent(l);return{lca:o,path:i.concat(a.reverse())}}(f,h,i.v,i.w),a=e.path,s=e.lca,u=0,l=a[u],c=!0;o!==i.w;){if(r=f.node(o),c){for(;l!==s&&(null==(t=f.node(l))?void 0:t.maxRank)<r.rank;)l=a[++u];l===s&&(c=!1)}if(!c){for(;u<a.length-1&&(null==(n=f.node(a[u+1]))?void 0:n.minRank)<=r.rank;)u++;l=a[u]}f.setParent(o,l),o=f.successors(o)[0]}})}},22438:function(e,h,t){"use strict";var r,n,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=(Object.defineProperty(h,"__esModule",{value:!0}),h.width=h.sep=h.positionX=h.balance=h.alignCoordinates=h.findSmallestWidthAlignment=h.buildBlockGraph=h.horizontalCompaction=h.verticalAlignment=h.hasConflict=h.addConflict=h.findOtherInnerSegmentNode=h.findType2Conflicts=h.findType1Conflicts=void 0,t(54917)),c=t(24258),u=t(656),l=(n=i.Graph,o(a,n),a);function a(){return null!==n&&n.apply(this,arguments)||this}function f(a,s){var e=Object.values(s),u=(0,c.min)(e),l=(0,c.max)(e);["u","d"].forEach(function(i){["l","r"].forEach(function(e){var t,n,r=i+e,o=a[r];o!==s&&(n=Object.values(o),t="l"===e?u-(0,c.min)(n):l-(0,c.max)(n))&&(a[r]={},Object.keys(o).forEach(function(e){a[r][e]=o[e]+t}))})})}h.findType1Conflicts=function(l,e){var c={};return null!=e&&e.length&&e.reduce(function(e,r){var i=0,a=0,s=e.length,u=null==r?void 0:r[(null==r?void 0:r.length)-1];return null!=r&&r.forEach(function(e,t){var n=(0,h.findOtherInnerSegmentNode)(l,e),o=n?l.node(n).order:s;!n&&e!==u||(null!=(n=r.slice(a,t+1))&&n.forEach(function(r){var e;null!=(e=l.predecessors(r))&&e.forEach(function(e){var t=l.node(e),n=t.order;!(n<i||o<n)||t.dummy&&null!=(n=l.node(r))&&n.dummy||(0,h.addConflict)(c,e,r)})}),a=t+1,i=o)}),r}),c},h.findType2Conflicts=function(l,e){var u={};function c(e,t){var n=JSON.stringify(e.slice(1));t.get(n)||(function(e,t,n,r,o){for(var i,a,s=t;s<n;s++)a=e[s],null==(i=l.node(a))||!i.dummy||null!=(i=l.predecessors(a))&&i.forEach(function(e){var t=l.node(e);t.dummy&&(t.order<r||t.order>o)&&(0,h.addConflict)(u,e,a)})}.apply(void 0,e),t.set(n,!0))}return null!=e&&e.length&&e.reduce(function(r,o){var i,a=-1,s=0,u=new Map;return null!=o&&o.forEach(function(e,t){var n;"border"===(null==(n=l.node(e))?void 0:n.dummy)&&(n=l.predecessors(e)||[]).length&&(i=l.node(n[0]).order,c([o,s,t,a,i],u),s=t,a=i),c([o,s,o.length,i,r.length],u)}),o}),u},h.findOtherInnerSegmentNode=function(t,e){var n;return null==(n=t.node(e))||!n.dummy||null==(n=t.predecessors(e))?void 0:n.find(function(e){return t.node(e).dummy})},h.addConflict=function(e,t,n){var r,o=n,n=(n<t&&(r=t,t=n,o=r),e[t]);n||(e[t]=n={}),n[o]=!0},h.hasConflict=function(e,t,n){return!!e[n<t?n:t]},h.verticalAlignment=function(e,t,s,u){var l={},c={},f={};return null!=t&&t.forEach(function(e){null!=e&&e.forEach(function(e,t){f[c[l[e]=e]=e]=t})}),null!=t&&t.forEach(function(e){var a=-1;null!=e&&e.forEach(function(e){var t=u(e);if(t.length)for(var n=((t=t.sort(function(e,t){return f[e]-f[t]})).length-1)/2,r=Math.floor(n),o=Math.ceil(n);r<=o;++r){var i=t[r];c[e]===e&&a<f[i]&&!(0,h.hasConflict)(s,e,i)&&(c[i]=e,c[e]=l[e]=l[i],a=f[i])}})}),{root:l,align:c}},h.horizontalCompaction=function(r,e,t,n,o){function i(e,t){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}var a={},s=(0,h.buildBlockGraph)(r,e,t,o),u=o?"borderLeft":"borderRight";return i(function(e){a[e]=(s.inEdges(e)||[]).reduce(function(e,t){return Math.max(e,(a[t.v]||0)+s.edge(t))},0)},s.predecessors.bind(s)),i(function(e){var t=(s.outEdges(e)||[]).reduce(function(e,t){return Math.min(e,(a[t.w]||0)-s.edge(t))},Number.POSITIVE_INFINITY),n=r.node(e);t!==Number.POSITIVE_INFINITY&&n.borderType!==u&&(a[e]=Math.max(a[e],t))},s.successors.bind(s)),null!=(e=Object.values(n))&&e.forEach(function(e){a[e]=a[t[e]]}),a},h.buildBlockGraph=function(i,e,a,t){var s=new l,n=i.graph(),u=(0,h.sep)(n.nodesep,n.edgesep,t);return null!=e&&e.forEach(function(e){var o;null!=e&&e.forEach(function(e){var t,n,r=a[e];s.setNode(r),o&&(t=a[o],n=s.edgeFromArgs(t,r),s.setEdge(t,r,Math.max(u(i,e,o),n||0))),o=e})}),s},h.findSmallestWidthAlignment=function(i,e){return(0,u.minBy)(Object.values(e),function(n){var e,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null!=(e=Object.keys(n))&&e.forEach(function(e){var t=n[e],e=(0,h.width)(i,e)/2;r=Math.max(t+e,r),o=Math.min(t-e,o)}),r-o})},h.alignCoordinates=f,h.balance=function(n,r){var o={};return Object.keys(n.ul).forEach(function(t){var e;r?o[t]=n[r.toLowerCase()][t]:(e=Object.values(n).map(function(e){return e[t]}),o[t]=(e[0]+e[1])/2)}),o},h.positionX=function(o){var i,e=(0,u.buildLayerMatrix)(o),a=Object.assign((0,h.findType1Conflicts)(o,e),(0,h.findType2Conflicts)(o,e)),s={},t=(["u","d"].forEach(function(r){i="u"===r?e:Object.values(e).reverse(),["l","r"].forEach(function(e){"r"===e&&(i=i.map(function(e){return Object.values(e).reverse()}));var t=("u"===r?o.predecessors:o.successors).bind(o),t=(0,h.verticalAlignment)(o,i,a,t),n=(0,h.horizontalCompaction)(o,i,t.root,t.align,"r"===e);"r"===e&&Object.keys(n).forEach(function(e){n[e]=-n[e]}),s[r+e]=n})}),(0,h.findSmallestWidthAlignment)(o,s));return f(s,t),(0,h.balance)(s,o.graph().align)},h.sep=function(a,s,u){return function(e,t,n){var r,o=e.node(t),i=e.node(n),t=0;if(t+=o.width/2,o.hasOwnProperty("labelpos"))switch((o.labelpos||"").toLowerCase()){case"l":r=-o.width/2;break;case"r":r=o.width/2}if(r&&(t+=u?r:-r),r=0,t=(t=(t+=(o.dummy?s:a)/2)+(i.dummy?s:a)/2)+i.width/2,i.labelpos)switch((i.labelpos||"").toLowerCase()){case"l":r=i.width/2;break;case"r":r=-i.width/2}return r&&(t+=u?r:-r),r=0,t}},h.width=function(e,t){return e.node(t).width||0}},34831:function(e,t,n){"use strict";var f=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h=(Object.defineProperty(t,"__esModule",{value:!0}),n(656)),p=n(22438);t.default=function(e){var r,o,i,a,t,s,u,l,n=(0,h.asNonCompoundGraph)(e),c=(r=n,e=(0,h.buildLayerMatrix)(r),o=r.graph().ranksep,i=0,null!=e&&e.forEach(function(e){var t=e.map(function(e){return r.node(e).height}),n=Math.max.apply(Math,f(f([],t,!1),[0],!1));null!=e&&e.forEach(function(e){r.node(e).y=i+n/2}),i+=n+o}),a=n,t=(0,h.buildLayerMatrix)(a),s=Object.assign((0,p.findType1Conflicts)(a,t),(0,p.findType2Conflicts)(a,t)),u={},l=[],["u","d"].forEach(function(r){l="u"===r?t:Object.values(t).reverse(),["l","r"].forEach(function(e){"r"===e&&(l=l.map(function(e){return Object.values(e).reverse()}));var t=("u"===r?a.predecessors:a.successors).bind(a),t=(0,p.verticalAlignment)(a,l,s,t),n=(0,p.horizontalCompaction)(a,l,t.root,t.align,"r"===e);"r"===e&&Object.keys(n).forEach(function(e){return n[e]=-n[e]}),u[r+e]=n})}),(e=(0,p.findSmallestWidthAlignment)(a,u))&&(0,p.alignCoordinates)(u,e),(0,p.balance)(u,a.graph().align));null!=(e=Object.keys(c))&&e.forEach(function(e){n.node(e).x=c[e]})}},6838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.feasibleTreeWithLayer=t.feasibleTree=void 0;function r(e){var t,n=new s.Graph({directed:!1}),r=e.nodes()[0],o=e.nodeCount();for(n.setNode(r,{});u(n,e)<o;)t=c(n,e),t=n.hasNode(t.v)?(0,a.slack)(e,t):-(0,a.slack)(e,t),f(n,e,t);return n}function o(t){var e,n=new s.Graph({directed:!1}),r=t.nodes()[0],o=t.nodes().filter(function(e){return!!t.node(e)}).length;for(n.setNode(r,{});l(n,t)<o;)e=c(n,t),e=n.hasNode(e.v)?(0,a.slack)(t,e):-(0,a.slack)(t,e),f(n,t,e);return n}var a=n(28861),i=n(656),s=n(95317),u=(t.feasibleTree=r,function(o,i){return o.nodes().forEach(function n(r){i.nodeEdges(r).forEach(function(e){var t=e.v,t=r===t?e.w:t;o.hasNode(t)||(0,a.slack)(i,e)||(o.setNode(t,{}),o.setEdge(r,t,{}),n(t))})}),o.nodeCount()}),l=(t.feasibleTreeWithLayer=o,function(o,i){return o.nodes().forEach(function n(r){var e;null!=(e=i.nodeEdges(r))&&e.forEach(function(e){var t=e.v,t=r===t?e.w:t;o.hasNode(t)||void 0===i.node(t).layer&&(0,a.slack)(i,e)||(o.setNode(t,{}),o.setEdge(r,t,{}),n(t))})}),o.nodeCount()}),c=function(t,n){return(0,i.minBy)(n.edges(),function(e){return t.hasNode(e.v)!==t.hasNode(e.w)?(0,a.slack)(n,e):1/0})},f=function(e,t,n){e.nodes().forEach(function(e){t.node(e).rank||(t.node(e).rank=0),t.node(e).rank+=n})};t.default={feasibleTree:r,feasibleTreeWithLayer:o}},75378:function(e,t,n){"use strict";function r(e){(0,i.longestPathWithLayer)(e),(0,a.feasibleTreeWithLayer)(e)}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),n(28861)),a=n(6838),s=o(n(2035)),u=i.longestPath;t.default=function(e){switch(e.graph().ranker){case"network-simplex":(0,s.default)(e);break;case"tight-tree":r(e);break;case"longest-path":u(e);break;default:r(e)}}},2035:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.exchangeEdges=i.enterEdge=i.leaveEdge=i.initLowLimValues=i.calcCutValue=i.initCutValues=void 0;var a=t(6838),s=t(28861),u=t(656),t=t(54917),n=t.algorithm.preorder,r=t.algorithm.postorder,o=(i.initCutValues=function(t,n){var e=r(t,t.nodes());null!=(e=null==e?void 0:e.slice(0,(null==e?void 0:e.length)-1))&&e.forEach(function(e){o(t,n,e)})},function(e,t,n){var r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=(0,i.calcCutValue)(e,t,n)}),l=(i.calcCutValue=function(r,o,i){var a=r.node(i).parent,s=!0,e=o.edgeFromArgs(i,a),u=0;return e||(s=!1,e=o.edgeFromArgs(a,i)),u=e.weight,null!=(e=o.nodeEdges(i))&&e.forEach(function(e){var t=e.v===i,n=t?e.w:e.v;n!==a&&(t=t===s,e=o.edge(e).weight,u+=t?e:-e,f(r,i,n))&&(e=r.edgeFromArgs(i,n).cutvalue,u+=t?-e:e)}),u},i.initLowLimValues=function(e,t){void 0===t&&(t=e.nodes()[0]),l(e,{},1,t)},function t(n,r,e,o,i){var a,s=e,u=e,e=n.node(o);return r[o]=!0,null!=(a=n.neighbors(o))&&a.forEach(function(e){r[e]||(u=t(n,r,u,e,o))}),e.low=s,e.lim=u++,i?e.parent=i:delete e.parent,u}),c=(i.leaveEdge=function(t){return t.edges().find(function(e){return t.edge(e).cutvalue<0})},i.enterEdge=function(t,n,e){var r=e.v,o=e.w,e=(n.hasEdge(r,o)||(r=e.w,o=e.v),t.node(r)),r=t.node(o),i=e,a=!1,o=(e.lim>r.lim&&(i=r,a=!0),n.edges().filter(function(e){return a===h(t,t.node(e.v),i)&&a!==h(t,t.node(e.w),i)}));return(0,u.minBy)(o,function(e){return(0,s.slack)(n,e)})},i.exchangeEdges=function(e,t,n,r){var o=n.v,n=n.w;e.removeEdge(o,n),e.setEdge(r.v,r.w,{}),(0,i.initLowLimValues)(e),(0,i.initCutValues)(e,t),c(e,t)},function(o,i){var e=o.nodes().find(function(e){return!(null!=(e=i.node(e))&&e.parent)}),e=n(o,e);null!=(e=null==e?void 0:e.slice(1))&&e.forEach(function(e){var t=o.node(e).parent,n=i.edgeFromArgs(e,t),r=!1;n||(n=i.edgeFromArgs(t,e),r=!0),i.node(e).rank=i.node(t).rank+(r?n.minlen:-n.minlen)})}),f=function(e,t,n){return e.hasEdge(t,n)},h=function(e,t,n){return n.low<=t.lim&&t.lim<=n.lim};i.default=function(e){var t=(0,u.simplify)(e);(0,s.longestPath)(t);var n,r,o=(0,a.feasibleTree)(t);for((0,i.initLowLimValues)(o),(0,i.initCutValues)(o,t);n=(0,i.leaveEdge)(o);)r=(0,i.enterEdge)(o,t,n),(0,i.exchangeEdges)(o,t,n,r)}},28861:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slack=t.longestPathWithLayer=t.longestPath=void 0;function n(o){var e,i={};null!=(e=o.sources())&&e.forEach(function t(e){var n,r=o.node(e);return r?i[e]?r.rank:(i[e]=!0,null!=(e=o.outEdges(e))&&e.forEach(function(e){e=t(e.w)-o.edge(e).minlen;e&&(void 0===n||e<n)&&(n=e)}),n=n||0,r.rank=n):0})}function r(i){var e,o,a={},s=(null!=(e=i.sources())&&e.forEach(function(e){i.node(e)&&function t(e){var n,r=i.node(e);return r?a[e]?r.rank:(a[e]=!0,null!=(e=i.outEdges(e))&&e.forEach(function(e){e=t(e.w)-i.edge(e).minlen;e&&(void 0===n||e<n)&&(n=e)}),n=n||0,(void 0===o||n<o)&&(o=n),r.rank=n):0}(e)}),void 0===o&&(o=0),{});i.nodes().forEach(function(e){var t=i.node(e);t&&(isNaN(t.layer)?t.rank-=o:function t(e,n){var r=i.node(e),o=isNaN(r.layer)?n:r.layer;(void 0===r.rank||r.rank<o)&&(r.rank=o),s[e]||(s[e]=!0,null==(n=i.outEdges(e)))||n.map(function(e){t(e.w,o+i.edge(e).minlen)})}(e,t.layer))})}function o(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}t.longestPath=n,t.longestPathWithLayer=r;t.slack=o,t.default={longestPath:n,longestPathWithLayer:r,slack:o}},656:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.minBy=i.notime=i.time=i.partition=i.maxRank=i.addBorderNode=i.removeEmptyRanks=i.normalizeRanks=i.buildLayerMatrix=i.intersectRect=i.predecessorWeights=i.successorWeights=i.zipObject=i.asNonCompoundGraph=i.simplify=i.addDummyNode=void 0;var a=t(58652),s=t(95317);i.addDummyNode=function(e,t,n,r){for(var o;o="".concat(r).concat(Math.random()),e.hasNode(o););return n.dummy=t,e.setNode(o,n),o},i.simplify=function(r){var o=(new s.Graph).setGraph(r.graph());return r.nodes().forEach(function(e){o.setNode(e,r.node(e))}),r.edges().forEach(function(e){var t=o.edgeFromArgs(e.v,e.w)||{weight:0,minlen:1},n=r.edge(e);o.setEdge(e.v,e.w,{weight:t.weight+n.weight,minlen:Math.max(t.minlen,n.minlen)})}),o},i.asNonCompoundGraph=function(n){var r=new s.Graph({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(function(e){var t;null!=(t=n.children(e))&&t.length||r.setNode(e,n.node(e))}),n.edges().forEach(function(e){r.setEdgeObj(e,n.edge(e))}),r},i.zipObject=function(e,r){return null==e?void 0:e.reduce(function(e,t,n){return e[t]=r[n],e},{})},i.successorWeights=function(r){var o={};return r.nodes().forEach(function(e){var t,n={};null!=(t=r.outEdges(e))&&t.forEach(function(e){n[e.w]=(n[e.w]||0)+((null==(e=r.edge(e))?void 0:e.weight)||0)}),o[e]=n}),o},i.predecessorWeights=function(n){var e=n.nodes(),t=e.map(function(e){var t={};return null!=(e=n.inEdges(e))&&e.forEach(function(e){t[e.v]=(t[e.v]||0)+n.edge(e).weight}),t});return(0,i.zipObject)(e,t)},i.intersectRect=function(e,t){var n,r=Number(e.x),o=Number(e.y),i=Number(t.x)-r,t=Number(t.y)-o,a=Number(e.width)/2,e=Number(e.height)/2;return i||t?(e=Math.abs(t)*a>Math.abs(i)*e?(n=(e=t<0?-e:e)*i/t,e):(n=a=i<0?-a:a)*t/i,{x:r+n,y:o+e}):{x:0,y:0}},i.buildLayerMatrix=function(n){for(var r=[],e=(0,i.maxRank)(n)+1,t=0;t<e;t++)r.push([]);for(n.nodes().forEach(function(e){var t=n.node(e);t&&void 0!==(t=t.rank)&&r[t]&&r[t].push(e)}),t=0;t<e;t++)r[t]=r[t].sort(function(e,t){e=null==(e=n.node(e))?void 0:e.order,t=null==(t=n.node(t))?void 0:t.order;return Number(e)-Number(t)});return r},i.normalizeRanks=function(t){var e=t.nodes().filter(function(e){return void 0!==(null==(e=t.node(e))?void 0:e.rank)}).map(function(e){return t.node(e).rank}),n=Math.min.apply(Math,e);t.nodes().forEach(function(e){e=t.node(e);e.hasOwnProperty("rank")&&n!==1/0&&(e.rank-=n)})},i.removeEmptyRanks=function(n){var e=n.nodes(),t=e.filter(function(e){return void 0!==(null==(e=n.node(e))?void 0:e.rank)}).map(function(e){return n.node(e).rank}),r=Math.min.apply(Math,t),o=[];e.forEach(function(e){var t=((null==(t=n.node(e))?void 0:t.rank)||0)-r;o[t]||(o[t]=[]),o[t].push(e)});for(var i=0,a=n.graph().nodeRankFactor||0,s=0;s<o.length;s++){var u=o[s];void 0===u?s%a!=0&&--i:!i||null!=u&&u.forEach(function(e){e=n.node(e);e&&(e.rank=e.rank||0,e.rank+=i)})}},i.addBorderNode=function(e,t,n,r){var o={width:0,height:0};return(0,a.isNumber)(n)&&(0,a.isNumber)(r)&&(o.rank=n,o.order=r),(0,i.addDummyNode)(e,"border",o,t)},i.maxRank=function(t){var n;return t.nodes().forEach(function(e){e=null==(e=t.node(e))?void 0:e.rank;void 0!==e&&(void 0===n||n<e)&&(n=e)}),n=n||0},i.partition=function(e,t){var n={lhs:[],rhs:[]};return null!=e&&e.forEach(function(e){(t(e)?n.lhs:n.rhs).push(e)}),n},i.time=function(e,t){var n=Date.now();try{return t()}finally{console.log("".concat(e," time: ").concat(Date.now()-n,"ms"))}},i.notime=function(e,t){return t()},i.minBy=function(e,n){return e.reduce(function(e,t){return n(e)>n(t)?t:e})}},20245:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},p=(Object.defineProperty(t,"__esModule",{value:!0}),a(n(56129))),d=s(n(60693)),y=s(n(8528)),g=n(10813);t.default=function(e,s){var r,o,n,u,t,l=e.nodes,c=e.edges,f=s.width,h=s.height;return null!=l&&l.length?(r=[],l.forEach(function(t){var e;1<c.filter(function(e){return e.source===t.id||e.target===t.id}).length&&(delete(e=i({},t)).size,r.push(e))}),o=[],c.forEach(function(t){var e=r.find(function(e){return e.id===t.source}),n=r.find(function(e){return e.id===t.target});e&&n&&o.push(t)}),n=new g.DagreLayout({type:"dagre",ranksep:s.nodeMinGap,nodesep:s.nodeMinGap}).layout({nodes:r,edges:o}).nodes,l.forEach(function(t){var e=(n||[]).find(function(e){return e.id===t.id});t.x=(null==e?void 0:e.x)||f/2,t.y=(null==e?void 0:e.y)||h/2}),u=JSON.parse(JSON.stringify(l)),e=JSON.parse(JSON.stringify(c)),t=p.forceSimulation().nodes(u).force("link",p.forceLink(e).id(function(e){return e.id}).distance(function(t){return o.find(function(e){return e.source===t.source&&e.target===t.target})?30:20})).force("charge",p.forceManyBody()).force("center",p.forceCenter(f/2,h/2)).force("x",p.forceX(f/2)).force("y",p.forceY(h/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),new Promise(function(a){t.on("end",function(){l.forEach(function(t){var e=u.find(function(e){return e.id===t.id});e&&(t.x=e.x,t.y=e.y)});var t=Math.min.apply(Math,l.map(function(e){return e.x})),e=Math.max.apply(Math,l.map(function(e){return e.x})),n=Math.min.apply(Math,l.map(function(e){return e.y})),r=Math.max.apply(Math,l.map(function(e){return e.y})),o=f/(e-t),i=h/(r-n);l.forEach(function(e){void 0!==e.x&&o<1&&(e.x=(e.x-t)*o),void 0!==e.y&&i<1&&(e.y=(e.y-n)*i)}),l.forEach(function(e){e.sizeTemp=e.size,e.size=[10,10]}),(0,y.default)(l,c),l.forEach(function(e){e.size=e.sizeTemp||[],delete e.sizeTemp}),(0,d.default)({nodes:l,edges:c},s),a()})})):Promise.resolve()}},60693:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},g=(Object.defineProperty(t,"__esModule",{value:!0}),r(n(21860)));t.default=function(n,e){if(!n.nodes||0===n.nodes.length)return n;var t=e.width,r=e.height,o=e.nodeMinGap,i=1e4,a=1e4,s=(n.nodes.forEach(function(e){var t=e.size[0]||50,e=e.size[1]||50;i=Math.min(t,i),a=Math.min(e,a)}),new g.default);s.init(t,r,{CELL_H:a,CELL_W:i}),n.nodes.forEach(function(e){var t=s.occupyNearest(e);t&&(t.node={id:e.id,size:e.size},e.x=t.x,e.y=t.y,e.dx=t.dx,e.dy=t.dy)});for(var u=0;u<n.nodes.length;u++){var l=n.nodes[u],c=s.findGridByNodeId(l.id);if(!c)throw new Error("can not find node cell");var f=c.column,h=c.row;if(l.size[0]+o>i){for(var p=y=Math.ceil((l.size[0]+o)/i)-1,d=0;d<y&&-1<s.additionColumn.indexOf(f+d+1)&&!s.cells[f+d+1][h].node;d++)p--;s.insertColumn(f,p)}if(l.size[1]+o>a){for(var y,p=y=Math.ceil((l.size[1]+o)/a)-1,d=0;d<y&&-1<s.additionRow.indexOf(h+d+1)&&!s.cells[f][h+d+1].node;d++)p--;s.insertRow(h,p)}}for(u=0;u<s.columnNum;u++)for(d=0;d<s.rowNum;d++)!function(e){var t=s.cells[u][e];t.node&&(e=n.nodes.find(function(e){return e.id===(null==(e=null==t?void 0:t.node)?void 0:e.id)}))&&(e.x=t.x+e.size[0]/2,e.y=t.y+e.size[1]/2)}(d)}},21860:function(e,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}Object.defineProperty(t,"__esModule",{value:!0}),s.prototype.init=function(e,t,n){this.cells=[],this.CELL_W=n.CELL_W||s.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||s.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(t/this.CELL_H),s.MIN_DIST=Math.pow(e,2)+Math.pow(t,2);for(var r=0;r<this.columnNum;r++){for(var o=[],i=0;i<this.rowNum;i++){var a={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1};o.push(a)}this.cells.push(o)}},s.prototype.findGridByNodeId=function(e){for(var t,n=0;n<this.columnNum;n++)for(var r=0;r<this.rowNum;r++)if(this.cells[n][r].node&&(null==(t=null==(t=this.cells[n][r])?void 0:t.node)?void 0:t.id)===e)return{column:n,row:r};return null},s.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},s.prototype.occupyNearest=function(e){for(var t,n=s.MIN_DIST,r=null,o=0;o<this.columnNum;o++)for(var i=0;i<this.rowNum;i++)!this.cells[o][i].occupied&&(t=this.sqdist(e,this.cells[o][i]))<n&&(n=t,r=this.cells[o][i]);return r&&(r.occupied=!0),r},s.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var r=0;r<this.rowNum;r++)this.cells[n+this.columnNum][r]={dx:n,dy:r,x:n*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;e<n;n--)for(r=0;r<this.rowNum;r++)this.cells[n+t][r]=o(o({},this.cells[n][r]),{x:(n+t)*this.CELL_W,y:r*this.CELL_H}),this.cells[n][r]={x:n*this.CELL_W,y:r*this.CELL_H,occupied:!0,node:null};for(r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=e&&(this.additionColumn[r]+=t);for(n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},s.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var r=0;r<this.columnNum;r++)this.cells[r][n+this.rowNum]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.columnNum;r++)for(n=this.rowNum-1;e<n;n--)this.cells[r][n+t]=o(o({},this.cells[r][n]),{dx:r,dy:n+t,x:r*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[r][n]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(r=0;r<t;r++)this.additionRow.push(e+r+1);this.rowNum+=t}},s.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var n=0;n<this.rowNum;n++)this.cells[t][n].node&&e.push(this.cells[t][n]);return e},s.MIN_DIST=50,s.DEFAULT_CELL_W=80,s.DEFAULT_CELL_H=80,t.default=s},4957:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=void 0,n(9284)),u=a(n(20245)),a=(o=s.Base,i(l,o),l.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},l.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges;return null!=t&&t.forEach(function(e){e.size||(e.size=[50,50])}),(0,u.default)({nodes:t,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){e.onLayoutEnd&&e.onLayoutEnd()})},l.prototype.getType=function(){return"er"},l);function l(e){var t=o.call(this)||this;return t.width=300,t.height=300,t.nodeMinGap=50,t.onLayoutEnd=function(){},e&&t.updateCfg(e),t}t.ERLayout=a},8528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=1200,a=800,m=1e7,b=10,w=1.5707963267948966,_=new Map,f=.8;function s(e,t){var n=(_.get(e.id)||[]).find(function(e){return e.source===t.id||e.target===t.id}),r=e.size[0]*e.size[1],o=t.size[0]*t.size[1],i=o<r?t:e,o=o<r?e:t,r=i.x-i.size[0]/2,e=i.y-i.size[1]/2,a=i.x+i.size[0]/2,s=i.y+i.size[1]/2,u=o.x-o.size[0]/2,l=o.y-o.size[1]/2,c=o.x+o.size[0]/2,f=o.y+o.size[1]/2,h=i.x,p=i.y,d=o.x,y=o.y,g=0,v=0;return u<=a&&r<=c&&l<=s&&e<=f?(0===(v=Math.sqrt(Math.pow(d-h,2)+Math.pow(y-p,2)))&&(v=1e-7),g=+b/v*100+((a<c?a:c)-(u<r?r:u))*((s<f?s:f)-(l<e?e:l)),g*=m):(d=i.x-i.size[0]/2,h=i.y-i.size[1]/2,y=i.x+i.size[0]/2,p=i.y+i.size[1]/2,a=o.x-o.size[0]/2,c=o.y-o.size[1]/2,r=o.x+o.size[0]/2,u=o.y+o.size[1]/2,s=i.x,f=i.y,e=o.x,l=o.y,e-=s,s=Math.atan2(e,l-f),o=i=f=l=0,w<s?(f=h-u,l=a-y,i=parseFloat((f?f/Math.cos(s):l).toFixed(2)),o=parseFloat((l?l/Math.sin(s):f).toFixed(2))):i=o=0<s&&s<=w?(f=c-p)>(l=a-y)?parseFloat((f?f/Math.cos(s):l).toFixed(2)):parseFloat((l?l/Math.sin(s):f).toFixed(2)):s<-w?(f=h-u)>(l=-(r-d))?parseFloat((f?f/Math.cos(s):l).toFixed(2)):parseFloat((l?l/Math.sin(s):f).toFixed(2)):(f=c-p)>(l=Math.abs(e)>(y-d)/2?d-r:e)?parseFloat((f?f/Math.cos(s):l).toFixed(2)):parseFloat((l&&0!==s?l/Math.sin(s):f).toFixed(2)),parseFloat(s.toFixed(2)),a=!1,h={distance:Math.abs(i<o?i:o),isHoriz:a},(v=h.distance)<=b?g+=0!==v?n?b+ +m/v:b+m*b/v:m:(g+=v,n&&(g+=v*v))),g}function h(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];(r.x<0||r.y<0||r.x>i||r.y>a)&&(t+=1e12);for(var o=n+1;o<e.length;o++)t+=s(r,e[o])}return t}function u(e,t){for(var n,r,o=!1,i=[10,-10,0,0],a=[0,0,10,-10],s=0;s<e.length;++s)for(var u=e[s],l=p(u,e),c=0;c<i.length;c++)!function(t,e,n,r){var o=new Map,i=(n.forEach(function(e,t){o.set(e.id,e)}),[]);(r.filter(function(e){return e.source===t.id||e.target===t.id})||[]).forEach(function(e){e=e.source===t.id?e.target:e.source,e=o.get(e);e&&i.push(e)});for(var a=!0,s=0;s<i.length;s++){var u=i[s],l=180*Math.atan((t.y-u.y)/(u.x-t.y)),c=180*Math.atan((e.y-u.y)/(u.x-e.y));if((l<30||150<l)&&!(c<30||150<c)||l*c<0){a=!1;break}if(70<l&&l<110&&!(70<c&&c<110)||l*c<0){a=!1;break}if((u.x-t.x)*(u.x-e.x)<0){a=!1;break}if((u.y-t.y)*(u.y-e.y)<0){a=!1;break}}return a}(u,{x:u.x+i[c],y:u.y+a[c]},e,t)||(u.x+=i[c],u.y+=a[c],n=p(u,e),r=Math.random(),n<l||r<f&&.1<r?(l=n,o=!0):(u.x-=i[c],u.y-=a[c]));return.1<f&&(f*=.5),o?h(e):0}function p(e,t){var n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>i||e.y+e.size[1]+20>a)&&(n+=1e12);for(var r=0;r<t.length;++r)e.id!==t[r].id&&(n+=s(e,t[r]));return n}t.default=function(e,n){if(0!==e.length){e.forEach(function(t){var e=n.filter(function(e){return e.source===t.id||e.target===t.id});_.set(t,e)}),e.sort(function(e,t){return(null==(e=_.get(e.id))?void 0:e.length)-(null==(e=_.get(t.id))?void 0:e.length)});for(var t=h(e),r=20,o=0,i=0;0<r&&!(50<=++i);){var a=u(e,n),a=(o=0!==a?a:o)-t,t=o;0==a?--r:r=20}e.forEach(function(e){e.x=e.x-e.size[0]/2,e.y=e.y-e.size[1]/2})}return{nodes:e,edges:n}}},52569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceNBody=void 0;var s=n(21617);function u(e){var t=0,n=0,r=0;if(e.length){for(var o=0;o<4;o++)(i=e[o])&&i.weight&&(t+=i.weight,n+=i.x*i.weight,r+=i.y*i.weight);e.x=n/t,e.y=r/t,e.weight=t}else{var i=e;e.x=i.data.x,e.y=i.data.y,e.weight=i.data.weight}}t.forceNBody=function(r,i,e,t,o){var a=e/t,e=r.map(function(e,t){var e=i[e.id],n=e.data,r=e.x,o=e.y,e=e.size,n=n.layout.force.nodeStrength;return{x:r,y:o,size:e,index:t,vx:0,vy:0,weight:a*n}}),n=(0,s.quadtree)(e,function(e){return e.x},function(e){return e.y}).visitAfter(u);return e.forEach(function(e){var i;i=e,n.visit(function(e,t,n,r,o){return l(e,t,n,r,o,i)})}),e.map(function(e,t){var n=i[r[t].id].data.layout.force.mass,n=void 0===n?1:n;o[2*t]=e.vx/n,o[2*t+1]=e.vy/n}),o};var l=function(e,t,n,r,o,i){var a,s=i.x-e.x||.1,u=i.y-e.y||.1,r=r-t,t=s*s+u*u,l=Math.sqrt(t)*t;return r*r*.81<t?(a=e.weight/l,i.vx+=s*a,i.vy+=u*a,!0):!e.length&&void(e.data!==i&&(a=e.data.weight/l,i.vx+=s*a,i.vy+=u*a))}},13490:function(e,t,n){"use strict";function f(t,n){return t?(0,P.isNumber)(t)?function(e){return t}:t:function(e){return n||1}}var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=this&&this.__assign||function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.Force2Layout=void 0,n(9284)),P=n(58652),s=n(52569),n=(o=a.Base,i(u,o),u.prototype.getCentripetalOptions=function(){function i(e){return"function"==typeof l?l(e):l}var a,s,r,e=this.leafCluster,t=this.clustering,o=this.nodeClusterBy,n=this.nodes,u=this.nodeMap,l=this.clusterNodeStrength,c={},e=(e&&(a=this.getSameTypeLeafMap()||{},s=Array.from(new Set(null==n?void 0:n.map(function(e){return e[o]})))||[],c={single:100,leaf:function(e,t,n){var r=a[e.id]||{},o=r.relativeLeafNodes,r=r.sameTypeLeafNodes;return(null==r?void 0:r.length)===(null==o?void 0:o.length)||1===(null===s?void 0:s.length)?1:i(e)},others:1,center:function(e,t,n){var r,o=((null==(o=e.data)?void 0:o.layout)||{}).degree;return o?(1!==o||1===(e=void 0===(o=(a[e.id]||{}).sameTypeLeafNodes)?[]:o).length?r=void 0:1<e.length&&(r=(0,P.getAvgNodePosition)(e)),{x:null==r?void 0:r.x,y:null==r?void 0:r.y}):{x:100,y:100}}}),t&&(a=a||this.getSameTypeLeafMap(),r={},Array.from(new Set(n.map(function(e,t){return e[o]}))).filter(function(e){return void 0!==e}).forEach(function(t){var e=n.filter(function(e){return e[o]===t}).map(function(e){return u[e.id]});r[t]=(0,P.getAvgNodePosition)(e)}),c={single:i,leaf:i,others:i,center:function(e,t,n){e=r[e[o]];return{x:null==e?void 0:e.x,y:null==e?void 0:e.y}}}),this.centripetalOptions=d(d({},this.centripetalOptions),c),this.centripetalOptions),f=e.leaf,h=e.single,p=e.others;f&&"function"!=typeof f&&(this.centripetalOptions.leaf=function(){return f}),h&&"function"!=typeof h&&(this.centripetalOptions.single=function(){return h}),p&&"function"!=typeof p&&(this.centripetalOptions.others=function(){return p})},u.prototype.updateCfg=function(e){e&&Object.assign(this,e)},u.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},u.prototype.execute=function(){var e,r,t,n,o,i,a,s=this,u=(s.stop(),s.nodes),l=s.edges,c=s.defSpringLen;s.judgingDistance=0,u&&0!==u.length?(s.width||"undefined"==typeof window||(s.width=window.innerWidth),s.height||"undefined"==typeof window||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]),e=s.center,1===u.length?(u[0].x=e[0],u[0].y=e[1],s.onLayoutEnd([d({},u[0])])):(s.degreesMap=(0,P.getDegreeMap)(u,l),s.propsGetMass?s.getMass=s.propsGetMass:s.getMass=function(e){var t=1,e=((0,P.isNumber)(e.mass)&&(t=e.mass),s.degreesMap[e.id].all);return!e||e<5?t:5*e*t},r=s.nodeSize,s.preventOverlap&&(t=s.nodeSpacing,n=(0,P.isNumber)(t)?function(){return t}:(0,P.isFunction)(t)?t:function(){return 0},o=r?(0,P.isArray)(r)?function(e){return Math.max(r[0],r[1])+n(e)}:function(e){return r+n(e)}:function(e){return e.size?(0,P.isArray)(e.size)?Math.max(e.size[0],e.size[1])+n(e):(0,P.isObject)(e.size)?Math.max(e.size.width,e.size.height)+n(e):e.size+n(e):10+n(e)}),s.nodeSize=o,s.linkDistance=f(s.linkDistance,1),s.nodeStrength=f(s.nodeStrength,1),s.edgeStrength=f(s.edgeStrength,1),i={},a={},u.forEach(function(e,t){(0,P.isNumber)(e.x)||(e.x=Math.random()*s.width),(0,P.isNumber)(e.y)||(e.y=Math.random()*s.height);var n=s.degreesMap[e.id];i[e.id]=d(d({},e),{data:d(d({},e.data),{size:s.nodeSize(e)||30,layout:{inDegree:n.in,outDegree:n.out,degree:n.all,tDegree:n.in,sDegree:n.out,force:{mass:s.getMass(e),nodeStrength:s.nodeStrength(e,l)}}})}),a[e.id]=t}),s.nodeMap=i,s.nodeIdxMap=a,s.edgeInfos=[],null!=l&&l.forEach(function(e){var t=i[e.source],n=i[e.target];t&&n?s.edgeInfos.push({edgeStrength:s.edgeStrength(e),linkDistance:c?c(d(d({},e),{source:t,target:n}),t,n):s.linkDistance(e,t,n)||1+(r(t)+r(t)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),s.onLayoutEnd=s.onLayoutEnd||function(){},s.run())):s.onLayoutEnd([])},u.prototype.run=function(){var e=this,t=e.maxIteration,n=e.nodes,r=e.edges,o=e.workerEnabled,i=e.minMovement,a=e.animate,s=e.nodeMap,u=e.height;if(e.currentMinY=0,e.currentMaxY=u,n){var l,c,f=[],h=(n.forEach(function(e,t){f[2*t]=0,f[2*t+1]=0}),this.defSideCoe&&"function"==typeof this.defSideCoe&&(l={},r.forEach(function(e){var t=e.source,n=e.target;l[t]=l[t]||[],l[t].push(e),l[n]=l[n]||[],l[n].push(e)}),this.relatedEdges=l),t);if(o||!a){for(var p=0;(e.judgingDistance>i||p<1)&&p<h;p++)e.runOneStep(p,f);e.onLayoutEnd(Object.values(s))}else"undefined"!=typeof window&&(c=0,this.timeInterval=window.setInterval(function(){n&&(e.runOneStep(c,f),++c>=h||e.judgingDistance<i)&&(e.onLayoutEnd(Object.values(s)),window.clearInterval(e.timeInterval))},0))}},u.prototype.runOneStep=function(e,t){var n,r=this.nodes,o=this.edges,i=(this.nodeMap,this.monitor),a=[];null!=r&&r.length&&(this.calRepulsive(a),o&&this.calAttractive(a),this.calGravity(a),this.attractToSide(a),n=this.interval,this.updateVelocity(a,t,n),this.updatePosition(t,n),null!=(t=this.tick)&&t.call(this),i)&&i({energy:this.calTotalEnergy(a),nodes:r,edges:o,iterations:e})},u.prototype.calTotalEnergy=function(r){var o,e=this.nodes,i=this.nodeMap;return null!=e&&e.length?(o=0,e.forEach(function(e,t){var n=r[2*t],t=r[2*t+1],e=i[e.id].data.layout.force.mass;o+=(void 0===e?1:e)*(n*n+t*t)*.5}),o):0},u.prototype.calRepulsive=function(e){var t=this.nodes,n=this.nodeMap,r=this.factor,o=this.coulombDisScale;this.nodeSize,(0,s.forceNBody)(t,n,r,o*o,e)},u.prototype.calAttractive=function(l){var e=this.edges,c=this.nodeMap,f=this.nodeIdxMap,h=this.edgeInfos;this.nodeSize,e.forEach(function(e,t){var n,r,o,i,a=(0,P.getEdgeTerminal)(e,"source"),e=(0,P.getEdgeTerminal)(e,"target"),s=c[a],u=c[e];s&&u&&(n=u.x-s.x,o=u.y-s.y,n||o||(n=.01*Math.random(),o=.01*Math.random()),r=Math.sqrt(n*n+o*o),i=(t=h[t]||{}).linkDistance,t=t.edgeStrength,s=1/(s.data.layout.force.mass||1),u=1/(u.data.layout.force.mass||1),i=o/r*(o=((void 0===i?200:i)-r)*(void 0===t?200:t)),t=2*f[a],a=2*f[e],l[t]-=(e=n/r*o)*s,l[1+t]-=i*s,l[a]+=e*u,l[1+a]+=i*u)})},u.prototype.calGravity=function(e){var t=this.nodes,n=this.edges,r=void 0===n?[]:n,o=this.nodeMap,i=this.width,a=this.height,s=this.center,u=this.gravity,l=this.degreesMap,c=this.centripetalOptions;if(t)for(var f=t.length,h=0;h<f;h++){var p,d,y=2*h,g=o[t[h].id],v=g.data.layout.force.mass,v=void 0===v?1:v,m=0,b=0,w=u,_=l[g.id],x=_.in,S=_.out,_=_.all,O=null==(O=this.getCenter)?void 0:O.call(this,g,_);O?(p=O[0],d=O[1],O=O[2],m=g.x-p,b=g.y-d,w=O):(m=g.x-s[0],b=g.y-s[1]),w&&(e[y]-=w*m/v,e[1+y]-=w*b/v),c&&(p=c.leaf,d=c.single,O=c.others,b=(w=(null==(m=c.center)?void 0:m(g,t,r,i,a))||{x:0,y:0,centerStrength:0}).x,m=w.y,w=w.centerStrength,(0,P.isNumber)(b))&&(0,P.isNumber)(m)&&(b=(g.x-b)/v,m=(g.y-m)/v,w&&(e[y]-=w*b,e[1+y]-=w*m),0===_?(v=d(g))&&(e[y]-=v*b,e[1+y]-=v*m):0===x||0===S?(w=p(g,t,r))&&(e[y]-=w*b,e[1+y]-=w*m):(_=O(g))&&(e[y]-=_*b,e[1+y]-=_*m))}},u.prototype.attractToSide=function(o){var i=this.defSideCoe,e=(this.height,this.nodes),a=this.relatedEdges,t=this.currentMinY,s=void 0===t?0:t,t=this.currentMaxY,u=void 0===t?this.height:t;i&&"function"==typeof i&&null!=e&&e.length&&e.forEach(function(e,t){var n,r=i(e,a[e.id]||[]);0!==r&&(n=r<0?s:u,r=Math.abs(r),o[2*t+1]-=r*(e.y-n))})},u.prototype.updateVelocity=function(i,a,s){var e=this.nodes,u=this.damping,l=this.maxSpeed;null!=e&&e.length&&e.forEach(function(e,t){var n=(a[2*t]+i[2*t]*s)*u||.01,r=(a[2*t+1]+i[2*t+1]*s)*u||.01,o=Math.sqrt(n*n+r*r);l<o&&(n*=o=l/o,r*=o),a[2*t]=n,a[2*t+1]=r})},u.prototype.updatePosition=function(i,a){var s,u,l,c=this,e=c.nodes,f=c.distanceThresholdMode,h=c.nodeMap;null!=e&&e.length?(s=0,"max"===f?c.judgingDistance=-1/0:"min"===f&&(c.judgingDistance=1/0),u=1/0,l=-1/0,e.forEach(function(e,t){var n=h[e.id];if((0,P.isNumber)(e.fx)&&(0,P.isNumber)(e.fy))e.x=e.fx,e.y=e.fy,n.x=e.x,n.y=e.y;else{var r=i[2*t]*a,t=i[2*t+1]*a,o=(e.x+=r,e.y+=t,n.x=e.x,n.y=e.y,e.y<u&&(u=e.y),e.y>l&&(l=e.y),Math.sqrt(r*r+t*t));switch(f){case"max":c.judgingDistance<o&&(c.judgingDistance=o);break;case"min":c.judgingDistance>o&&(c.judgingDistance=o);break;default:s+=o}}}),this.currentMinY=u,this.currentMaxY=l,f&&"mean"!==f||(c.judgingDistance=s/e.length)):this.judgingDistance=0},u.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},u.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},u.prototype.getType=function(){return"force2"},u.prototype.getSameTypeLeafMap=function(){var n,r=this.nodeClusterBy,e=this.nodes,o=this.edges,i=this.nodeMap,a=this.degreesMap;if(null!=e&&e.length)return n={},e.forEach(function(e,t){1===a[e.id].all&&(n[e.id]=(0,P.getCoreNodeAndRelativeLeafNodes)("leaf",e,o,r,a,i))}),n},u);function u(e){var t=o.call(this)||this,n=(t.maxIteration=1e3,t.workerEnabled=!1,t.edgeStrength=200,t.nodeStrength=1e3,t.coulombDisScale=.005,t.damping=.9,t.maxSpeed=500,t.minMovement=.4,t.interval=.02,t.factor=1,t.linkDistance=200,t.gravity=0,t.clusterNodeStrength=20,t.preventOverlap=!0,t.distanceThresholdMode="mean",t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t.judgingDistance=0,t.centripetalOptions={leaf:2,single:2,others:1,center:function(e){return{x:t.width/2,y:t.height/2}}},e.getMass);return t.propsGetMass=n,t.updateCfg(e),t}t.Force2Layout=n},39398:function(e,t){"use strict";function n(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.distanceTo=function(e){var t=this.rx-e.rx,e=this.ry-e.ry;return Math.hypot(t,e)},n.prototype.setPos=function(e,t){this.rx=e,this.ry=t},n.prototype.resetForce=function(){this.fx=0,this.fy=0},n.prototype.addForce=function(e){var t=e.rx-this.rx,n=e.ry-this.ry,r=Math.hypot(t,n),e=this.g*(this.degree+1)*(e.degree+1)/(r=r<1e-4?1e-4:r);this.fx+=e*t/r,this.fy+=e*n/r},n.prototype.in=function(e){return e.contains(this.rx,this.ry)},n.prototype.add=function(e){var t=this.mass+e.mass;return new n({rx:(this.rx*this.mass+e.rx*e.mass)/t,ry:(this.ry*this.mass+e.ry*e.mass)/t,mass:t,degree:this.degree+e.degree})},t.default=n},40432:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ForceAtlas2Layout=void 0,n(9284)),w=n(58652),b=a(n(39398)),m=a(n(69785)),_=a(n(49122)),a=(o=s.Base,i(u,o),u.prototype.getDefaultCfg=function(){return{}},u.prototype.execute=function(){var e=this.nodes,t=this.onLayoutEnd,n=this.prune,r=this.maxIteration;this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight);for(var o=[],i=e.length,a=0;a<i;a+=1){var s=e[a],u=10,l=10,s=((0,w.isNumber)(s.size)&&(u=s.size,l=s.size),(0,w.isArray)(s.size)?(isNaN(s.size[0])||(u=s.size[0]),isNaN(s.size[1])||(l=s.size[1])):(0,w.isObject)(s.size)&&(u=s.size.width,l=s.size.height),this.getWidth&&!isNaN(this.getWidth(s))&&(l=this.getWidth(s)),this.getHeight&&!isNaN(this.getHeight(s))&&(u=this.getHeight(s)),Math.max(u,l));o.push(s)}void 0===this.barnesHut&&250<i&&(this.barnesHut=!0),void 0===this.prune&&100<i&&(this.prune=!0),0!==this.maxIteration||this.prune?0===this.maxIteration&&n&&(r=100,i<=200&&100<i?r=500:200<i&&(r=950),this.maxIteration=r):(r=250,i<=200&&100<i?r=1e3:200<i&&(r=1200),this.maxIteration=r),this.kr||(this.kr=50,100<i&&i<=500?this.kr=20:500<i&&(this.kr=1)),this.kg||(this.kg=20,100<i&&i<=500?this.kg=10:500<i&&(this.kg=1)),this.nodes=this.updateNodesByForces(o),t()},u.prototype.updateNodesByForces=function(e){for(var t=this.edges,n=this.maxIteration,r=this.nodes,o=t.filter(function(e){return(0,w.getEdgeTerminal)(e,"source")!==(0,w.getEdgeTerminal)(e,"target")}),i=r.length,a=o.length,s=[],u={},l={},c=[],f=0;f<i;f+=1)void(s[u[r[f].id]=f]=0)!==r[f].x&&!isNaN(r[f].x)||(r[f].x=1e3*Math.random()),void 0!==r[f].y&&!isNaN(r[f].y)||(r[f].y=1e3*Math.random()),c.push({x:r[f].x,y:r[f].y});for(f=0;f<a;f+=1){for(var h=void 0,p=void 0,d=0,y=0,g=0;g<i;g+=1){var v=(0,w.getEdgeTerminal)(o[f],"source"),m=(0,w.getEdgeTerminal)(o[f],"target");r[g].id===v?(h=r[g],d=g):r[g].id===m&&(p=r[g],y=g),l[f]={sourceIdx:d,targetIdx:y}}h&&(s[u[h.id]]+=1),p&&(s[u[p.id]]+=1)}r=this.iterate(n,u,l,a,s,e);if(this.prune){for(g=0;g<a;g+=1)s[l[g].sourceIdx]<=1?(r[l[g].sourceIdx].x=r[l[g].targetIdx].x,r[l[g].sourceIdx].y=r[l[g].targetIdx].y):s[l[g].targetIdx]<=1&&(r[l[g].targetIdx].x=r[l[g].sourceIdx].x,r[l[g].targetIdx].y=r[l[g].sourceIdx].y);this.prune=!1,this.barnesHut=!1,r=this.iterate(100,u,l,a,s,e)}return r},u.prototype.iterate=function(e,t,n,r,o,i){for(var a,s=this.nodes,u=this.kr,l=this.preventOverlap,c=this.barnesHut,f=s.length,h=0,p=e,d=[],y=[],g=[],v=0;v<f;v+=1)d[2*v]=0,d[2*v+1]=0,c&&(a={id:v,rx:s[v].x,ry:s[v].y,mass:1,g:u,degree:o[v]},g[v]=new b.default(a));for(;0<p;){for(v=0;v<f;v+=1)y[2*v]=d[2*v],y[2*v+1]=d[2*v+1],d[2*v]=0,d[2*v+1]=0;d=this.getAttrForces(p,50,r,t,n,o,i,d);var d=c&&(l&&50<p||!l)?this.getOptRepGraForces(d,g,o):this.getRepGraForces(p,50,d,100,i,o),m=this.updatePos(d,y,h,o),s=m.nodes,h=m.sg;p--,this.tick&&this.tick()}return s},u.prototype.getAttrForces=function(e,t,n,r,o,i,a,s){for(var u=this.nodes,l=this.preventOverlap,c=this.dissuadeHubs,f=this.mode,h=this.prune,p=0;p<n;p+=1){var d,y,g,v,m=u[o[p].sourceIdx],b=o[p].sourceIdx,w=u[o[p].targetIdx],_=o[p].targetIdx;h&&(i[b]<=1||i[_]<=1)||(d=[w.x-m.x,w.y-m.y],y=(y=Math.hypot(d[0],d[1]))<1e-4?1e-4:y,d[0]=d[0]/y,d[1]=d[1]/y,v=g=y=l&&e<t?y-a[b]-a[_]:y,"linlog"===f&&(v=g=Math.log(1+y)),c&&(g=y/i[b],v=y/i[_]),l&&e<t&&y<=0?v=g=0:l&&e<t&&0<y&&(v=g=y),s[2*r[m.id]]+=g*d[0],s[2*r[w.id]]-=v*d[0],s[2*r[m.id]+1]+=g*d[1],s[2*r[w.id]+1]-=v*d[1])}return s},u.prototype.getRepGraForces=function(e,t,n,r,o,i){for(var a=this.nodes,s=this.preventOverlap,u=this.kr,l=this.kg,c=this.center,f=this.prune,h=a.length,p=0;p<h;p+=1){for(var d,y,g,v=p+1;v<h;v+=1)f&&(i[p]<=1||i[v]<=1)||(d=[a[v].x-a[p].x,a[v].y-a[p].y],y=(y=Math.hypot(d[0],d[1]))<1e-4?1e-4:y,d[0]=d[0]/y,d[1]=d[1]/y,s&&e<t&&(y=y-o[p]-o[v]),g=u*(i[p]+1)*(i[v]+1)/y,s&&e<t&&y<0?g=r*(i[p]+1)*(i[v]+1):s&&e<t&&0===y?g=0:s&&e<t&&0<y&&(g=u*(i[p]+1)*(i[v]+1)/y),n[2*p]-=g*d[0],n[2*v]+=g*d[0],n[2*p+1]-=g*d[1],n[2*v+1]+=g*d[1]);var m=[a[p].x-c[0],a[p].y-c[1]],b=Math.hypot(m[0],m[1]),b=(m[0]=m[0]/b,m[1]=m[1]/b,l*(i[p]+1));n[2*p]-=b*m[0],n[2*p+1]-=b*m[1]}return n},u.prototype.getOptRepGraForces=function(e,t,n){for(var r=this.nodes,o=this.kg,i=this.center,a=this.prune,s=r.length,u=9e10,l=-9e10,c=9e10,f=-9e10,h=0;h<s;h+=1)a&&n[h]<=1||(t[h].setPos(r[h].x,r[h].y),r[h].x>=l&&(l=r[h].x),r[h].x<=u&&(u=r[h].x),r[h].y>=f&&(f=r[h].y),r[h].y<=c&&(c=r[h].y));for(var p,d,y={xmid:(l+u)/2,ymid:(f+c)/2,length:Math.max(l-u,f-c),massCenter:i,mass:s},g=new m.default(y),v=new _.default(g),h=0;h<s;h+=1)a&&n[h]<=1||t[h].in(g)&&v.insert(t[h]);for(h=0;h<s;h+=1)a&&n[h]<=1||(t[h].resetForce(),v.updateForce(t[h]),e[2*h]-=t[h].fx,e[2*h+1]-=t[h].fy,p=[r[h].x-i[0],r[h].y-i[1]],d=Math.hypot(p[0],p[1]),p[0]=p[0]/(d=d<1e-4?1e-4:d),p[1]=p[1]/d,d=o*(n[h]+1),e[2*h]-=d*p[0],e[2*h+1]-=d*p[1]);return e},u.prototype.updatePos=function(e,t,n,r){for(var o,i,a=this.nodes,s=this.ks,u=this.tao,l=this.prune,c=this.ksmax,f=a.length,h=[],p=[],d=0,y=0,g=0;g<f;g+=1)l&&r[g]<=1||(o=[e[2*g]-t[2*g],e[2*g+1]-t[2*g+1]],o=Math.hypot(o[0],o[1]),i=[e[2*g]+t[2*g],e[2*g+1]+t[2*g+1]],i=Math.hypot(i[0],i[1]),h[g]=o,p[g]=i/2,d+=(r[g]+1)*h[g],y+=(r[g]+1)*p[g]);var v,m,b=n;for(n=u*y/d,0!==b&&(n=1.5*b<n?1.5*b:n),g=0;g<f;g+=1)l&&r[g]<=1||(0,w.isNumber)(a[g].fx)&&(0,w.isNumber)(a[g].fy)||(m=s*n/(1+n*Math.sqrt(h[g])),v=(m=(v=c/(v=(v=Math.hypot(e[2*g],e[2*g+1]))<1e-4?1e-4:v))<m?v:m)*e[2*g],m=m*e[2*g+1],a[g].x+=v,a[g].y+=m);return{nodes:a,sg:n}},u);function u(e){var t=o.call(this)||this;return t.center=[0,0],t.width=300,t.height=300,t.nodes=[],t.edges=[],t.kr=5,t.kg=1,t.mode="normal",t.preventOverlap=!1,t.dissuadeHubs=!1,t.barnesHut=void 0,t.maxIteration=0,t.ks=.1,t.ksmax=10,t.tao=.1,t.onLayoutEnd=function(){},t.prune=void 0,t.updateCfg(e),t}t.ForceAtlas2Layout=a},69785:function(e,t){"use strict";function n(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.getLength=function(){return this.length},n.prototype.contains=function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n},n.prototype.NW=function(){return new n({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},n.prototype.NE=function(){return new n({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},n.prototype.SW=function(){return new n({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},n.prototype.SE=function(){return new n({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t.default=n},49122:function(e,t){"use strict";function n(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.insert=function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new n(this.quad.NW()),this.NE=new n(this.quad.NE()),this.SW=new n(this.quad.SW()),this.SE=new n(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e},n.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},n.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},n.prototype.updateForce=function(e){null!=this.body&&e!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(e)<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e)))},t.default=n},556:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},x=(Object.defineProperty(t,"__esModule",{value:!0}),i(n(56129))),S=n(58652);t.default=function(){function t(e){return function(){return e}}var l,c=function(e){return e.cluster},f=t(1),h=t(-1),p=t(100),d=t(.1),n=[0,0],y=[],g={},v=[],m=100,b=100,i={none:{x:0,y:0}},w=[],r="force",a=!0,s=.1;function u(e){if(!a)return u;l.tick(),_();for(var t=0,n=y.length,r=void 0,o=e*s;t<n;++t)(r=y[t]).vx+=(i[c(r)].x-r.x)*o,r.vy+=(i[c(r)].y-r.y)*o}function o(){var r;if(y&&(y&&y.length)){if(void 0===c(y[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");i=[],a=[],s={},u={},e=[],r={},(t=y).forEach(function(e){e=c(e);r[e]||(r[e]={count:0,sumforceNodeSize:0})}),t.forEach(function(e){var t=c(e),e=f(e),n=r[t];n.count=n.count+1,n.sumforceNodeSize=n.sumforceNodeSize+Math.PI*(e*e)*1.3,r[t]=n}),u=r,n={},o=[],v.forEach(function(e){e=e,t=(0,S.getEdgeTerminal)(e,"source"),e=(0,S.getEdgeTerminal)(e,"target"),t=c(g[t]),e=c(g[e]);var e=t<=e?"".concat(t,"~").concat(e):"".concat(e,"~").concat(t),t=0;void 0!==n[e]&&(t=n[e]),n[e]=t+=1}),Object.entries(n).forEach(function(e){var t=e[0],e=e[1],n=t.split("~")[0],t=t.split("~")[1];void 0!==n&&void 0!==t&&o.push({source:n,target:t,count:e})}),e=o,Object.keys(u).forEach(function(e,t){var n=u[e];i.push({id:e,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),s[e]=t}),e.forEach(function(e){var t=(0,S.getEdgeTerminal)(e,"source"),n=(0,S.getEdgeTerminal)(e,"target"),t=s[t],n=s[n];void 0!==t&&void 0!==n&&a.push({source:t,target:n,count:e.count})});var n,o,i,a,s,u,e,t={nodes:i,links:a};l=x.forceSimulation(t.nodes).force("x",x.forceX(m).strength(.1)).force("y",x.forceY(b).strength(.1)).force("collide",x.forceCollide(function(e){return e.r}).iterations(4)).force("charge",x.forceManyBody().strength(h)).force("links",x.forceLink(t.nodes.length?t.links:[]).distance(p).strength(d)),w=l.nodes(),_()}}function _(){return i={none:{x:0,y:0}},w.forEach(function(e){i[e.id]={x:e.x-n[0],y:e.y-n[1]}}),i}return u.initialize=function(e){y=e,o()},u.template=function(e){return arguments.length?(r=e,o(),u):r},u.groupBy=function(t){return arguments.length?(c="string"==typeof t?function(e){return e[t]}:t,u):c},u.enableGrouping=function(e){return arguments.length?(a=e,u):a},u.strength=function(e){return arguments.length?(s=e,u):s},u.centerX=function(e){return arguments.length?(m=e,u):m},u.centerY=function(e){return arguments.length?(b=e,u):b},u.nodes=function(e){return arguments.length?(g={},(e||[]).forEach(function(e){g[e.id]=e}),y=e||[],u):y},u.links=function(e){return arguments.length?(v=e||[],o(),u):v},u.nodeSize=u.forceNodeSize=function(e){return arguments.length?(f="function"==typeof e?e:t(+e),o(),u):f},u.forceCharge=function(e){return arguments.length?(h="function"==typeof e?e:t(+e),o(),u):h},u.forceLinkDistance=function(e){return arguments.length?(p="function"==typeof e?e:t(+e),o(),u):p},u.forceLinkStrength=function(e){return arguments.length?(d="function"==typeof e?e:t(+e),o(),u):d},u.offset=function(e){return arguments.length?(n=e,u):n},u.getFocis=_,u}},90461:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return s(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},v=(Object.defineProperty(t,"__esModule",{value:!0}),t.ForceLayout=void 0,u(n(56129))),m=l(n(556)),c=n(58652),u=n(9284),b=n(84587),l=(o=u.Base,i(f,o),f.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},f.prototype.init=function(e){this.nodes=e.nodes||[];e=e.edges||[];this.edges=e.map(function(t){var n={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach(function(e){-1<r.indexOf(e)||(n[e]=t[e])}),n}),this.ticking=!1},f.prototype.execute=function(e){var t,n,r,o,i=this,a=i.nodes,s=i.edges;if(!i.ticking){var u=i.forceSimulation,l=i.alphaMin,c=i.alphaDecay,f=i.alpha;if(u)e&&(i.clustering&&i.clusterForce&&(i.clusterForce.nodes(a),i.clusterForce.links(s)),u.nodes(a),s&&i.edgeForce?i.edgeForce.links(s):s&&!i.edgeForce&&(p=v.forceLink().id(function(e){return e.id}).links(s),i.edgeStrength&&p.strength(i.edgeStrength),i.linkDistance&&p.distance(i.linkDistance),i.edgeForce=p,u.force("link",p))),i.preventOverlap&&i.overlapProcess(u),u.alpha(f).restart(),this.ticking=!0;else try{var h,p,d=v.forceManyBody();if(i.nodeStrength&&d.strength(i.nodeStrength),u=v.forceSimulation().nodes(a),i.clustering&&((h=(0,m.default)()).centerX(i.center[0]).centerY(i.center[1]).template("force").strength(i.clusterFociStrength),s&&h.links(s),a&&h.nodes(a),h.forceLinkDistance(i.clusterEdgeDistance).forceLinkStrength(i.clusterEdgeStrength).forceCharge(i.clusterNodeStrength).forceNodeSize(i.clusterNodeSize),i.clusterForce=h,u.force("group",h)),u.force("center",v.forceCenter(i.center[0],i.center[1])).force("charge",d).alpha(f).alphaDecay(c).alphaMin(l),i.preventOverlap&&i.overlapProcess(u),s&&(p=v.forceLink().id(function(e){return e.id}).links(s),i.edgeStrength&&p.strength(i.edgeStrength),i.linkDistance&&p.distance(i.linkDistance),i.edgeForce=p,u.force("link",p)),!i.workerEnabled||"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||(i.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),i.workerEnabled){u.stop();n=(t=u).alphaMin(),r=t.alphaTarget(),o=t.alpha(),n=Math.log((n-r)/(o-r))/Math.log(1-t.alphaDecay());for(var y=Math.ceil(n),g=1;g<=y;g++)u.tick(),postMessage({nodes:a,currentTick:g,totalTicks:y,type:b.LAYOUT_MESSAGE.TICK},void 0);i.ticking=!1}else u.on("tick",function(){i.tick()}).on("end",function(){i.ticking=!1,i.onLayoutEnd&&i.onLayoutEnd()}),i.ticking=!0;i.forceSimulation=u,i.ticking=!0}catch(e){i.ticking=!1,console.warn(e)}}},f.prototype.overlapProcess=function(e){var t,n,r,o=this.nodeSize,i=this.nodeSpacing,a=this.collideStrength,s=(0,c.isNumber)(i)?function(){return i}:(0,c.isFunction)(i)?i:function(){return 0};n=o?(0,c.isFunction)(o)?function(e){return o(e)+s(e)}:(0,c.isArray)(o)?(t=(o[0]>o[1]?o[0]:o[1])/2,function(e){return t+s(e)}):(0,c.isNumber)(o)?(r=o/2,function(e){return r+s(e)}):function(){return 10}:function(e){return e.size?(0,c.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2+s(e):(0,c.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2+s(e):e.size/2+s(e):10+s(e)},e.force("collisionForce",v.forceCollide(n).strength(a))},f.prototype.updateCfg=function(e){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,e)},f.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},f);function f(e){var t=o.call(this)||this;return t.center=[0,0],t.nodeStrength=null,t.edgeStrength=null,t.preventOverlap=!1,t.clusterNodeStrength=null,t.clusterEdgeStrength=null,t.clusterEdgeDistance=null,t.clusterNodeSize=null,t.clusterFociStrength=null,t.linkDistance=50,t.alphaDecay=.028,t.alphaMin=.001,t.alpha=.3,t.collideStrength=1,t.workerEnabled=!1,t.tick=function(){},t.onLayoutEnd=function(){},t.ticking=void 0,e&&t.updateCfg(e),t}t.ForceLayout=l},1878:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(90461),t)},66865:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.FruchtermanLayout=void 0,n(9284)),p=n(58652),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},s.prototype.execute=function(){var e,n,r,o=this,t=this.nodes;if(void 0!==this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),t&&0!==t.length)return this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]),e=this.center,1===t.length?(t[0].x=e[0],t[0].y=e[1],void(null!=(e=this.onLayoutEnd)&&e.call(this))):(n={},r={},t.forEach(function(e,t){(0,p.isNumber)(e.x)||(e.x=Math.random()*o.width),(0,p.isNumber)(e.y)||(e.y=Math.random()*o.height),n[e.id]=e,r[e.id]=t}),this.nodeMap=n,this.nodeIdxMap=r,this.run());null!=(e=this.onLayoutEnd)&&e.call(this)},s.prototype.run=function(){var t=this,e=t.nodes;if(e){var n=t.edges,r=t.maxIteration,o=t.workerEnabled,i=t.clustering,a=t.animate,s={};if(i&&e.forEach(function(e){void 0===s[e.cluster]&&(s[e.cluster]={name:e.cluster,cx:0,cy:0,count:0})}),o||!a){for(var u=0;u<r;u++)t.runOneStep(s);null!=(i=t.onLayoutEnd)&&i.call(t)}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval(function(){var e;t.runOneStep(s),++l>=r&&(null!=(e=t.onLayoutEnd)&&e.call(t),window.clearInterval(t.timeInterval))},0)}return{nodes:e,edges:n}}},s.prototype.runOneStep=function(i){var e=this.nodes;if(e){var t=this.edges,r=this.center,o=this.gravity,a=this.speed,n=this.clustering,s=this.height*this.width,u=Math.sqrt(s)/10,s=s/(e.length+1),l=Math.sqrt(s),c=[];if(e.forEach(function(e,t){c[t]={x:0,y:0}}),this.applyCalculate(e,t,c,l,s),n){for(var f in i)i[f].cx=0,i[f].cy=0,i[f].count=0;for(var f in e.forEach(function(e){var t=i[e.cluster];(0,p.isNumber)(e.x)&&(t.cx+=e.x),(0,p.isNumber)(e.y)&&(t.cy+=e.y),t.count++}),i)i[f].cx/=i[f].count,i[f].cy/=i[f].count;var h=this.clusterGravity||o;e.forEach(function(e,t){var n,r,o;(0,p.isNumber)(e.x)&&(0,p.isNumber)(e.y)&&(n=i[e.cluster],r=Math.sqrt((e.x-n.cx)*(e.x-n.cx)+(e.y-n.cy)*(e.y-n.cy)),c[t].x-=(o=l*h)*(e.x-n.cx)/r,c[t].y-=o*(e.y-n.cy)/r)})}e.forEach(function(e,t){var n;(0,p.isNumber)(e.x)&&(0,p.isNumber)(e.y)&&(c[t].x-=(n=.01*l*o)*(e.x-r[0]),c[t].y-=n*(e.y-r[1]))}),e.forEach(function(e,t){var n,r;(0,p.isNumber)(e.fx)&&(0,p.isNumber)(e.fy)?(e.x=e.fx,e.y=e.fy):(0,p.isNumber)(e.x)&&(0,p.isNumber)(e.y)&&0<(n=Math.sqrt(c[t].x*c[t].x+c[t].y*c[t].y))&&(r=Math.min(a/800*u,n),e.x+=c[t].x/n*r,e.y+=c[t].y/n*r)}),null!=(t=this.tick)&&t.call(this)}},s.prototype.applyCalculate=function(e,t,n,r,o){this.calRepulsive(e,n,o),t&&this.calAttractive(t,n,r)},s.prototype.calRepulsive=function(e,a,s){e.forEach(function(o,i){a[i]={x:0,y:0},e.forEach(function(e,t){var n,r;i!==t&&(0,p.isNumber)(o.x)&&(0,p.isNumber)(e.x)&&(0,p.isNumber)(o.y)&&(0,p.isNumber)(e.y)&&(0===(n=(r=o.x-e.x)*r+(e=o.y-e.y)*e)&&(n=1,e=r=.01*(t<i?1:-1)),a[i].x+=r*(t=s/n),a[i].y+=e*t)})})},s.prototype.calAttractive=function(e,a,s){var u=this;e.forEach(function(e){var t,n,r,o,i=(0,p.getEdgeTerminal)(e,"source"),e=(0,p.getEdgeTerminal)(e,"target");i&&e&&(t=u.nodeIdxMap[i])!==(n=u.nodeIdxMap[e])&&(i=u.nodeMap[i],e=u.nodeMap[e],(0,p.isNumber)(e.x))&&(0,p.isNumber)(i.x)&&(0,p.isNumber)(e.y)&&(0,p.isNumber)(i.y)&&(r=e.x-i.x,e=e.y-i.y,i=Math.sqrt(r*r+e*e),a[n].x-=r/i*(o=i*i/s),a[n].y-=e/i*o,a[t].x+=r/i*o,a[t].y+=e/i*o)})},s.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},s.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},s.prototype.getType=function(){return"fruchterman"},s);function s(e){var t=o.call(this)||this;return t.maxIteration=1e3,t.workerEnabled=!1,t.gravity=10,t.speed=5,t.clustering=!1,t.clusterGravity=10,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t.onLayoutEnd=function(){},t.tick=function(){},t.animate=!0,t.updateCfg(e),t}t.FruchtermanLayout=n},66007:function(e,t,n){"use strict";function l(t,n){return t?(0,g.isNumber)(t)?function(e){return t}:t:function(e){return n||1}}var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.GForceLayout=void 0,n(9284)),g=n(58652),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},s.prototype.execute=function(){var n,r,t,e,o,i,a,s=this,u=s.nodes;void 0!==s.timeInterval&&"undefined"!=typeof window&&window.clearInterval(s.timeInterval),u&&0!==u.length?(s.width||"undefined"==typeof window||(s.width=window.innerWidth),s.height||"undefined"==typeof window||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]),a=s.center,1===u.length?(u[0].x=a[0],u[0].y=a[1],null!=(a=s.onLayoutEnd)&&a.call(s)):(n={},r={},u.forEach(function(e,t){(0,g.isNumber)(e.x)||(e.x=Math.random()*s.width),(0,g.isNumber)(e.y)||(e.y=Math.random()*s.height),n[e.id]=e,r[e.id]=t}),s.nodeMap=n,s.nodeIdxMap=r,s.linkDistance=l(s.linkDistance,1),s.nodeStrength=l(s.nodeStrength,1),s.edgeStrength=l(s.edgeStrength,1),t=s.nodeSize,s.preventOverlap&&(e=s.nodeSpacing,o=(0,g.isNumber)(e)?function(){return e}:(0,g.isFunction)(e)?e:function(){return 0},i=t?(0,g.isArray)(t)?function(e){return Math.max(t[0],t[1])+o(e)}:function(e){return t+o(e)}:function(e){return e.size?(0,g.isArray)(e.size)?Math.max(e.size[0],e.size[1])+o(e):(0,g.isObject)(e.size)?Math.max(e.size.width,e.size.height)+o(e):e.size+o(e):10+o(e)}),s.nodeSize=i,a=s.edges,s.degrees=(0,g.getDegree)(u.length,s.nodeIdxMap,a),s.getMass||(s.getMass=function(e){return e.mass||s.degrees[s.nodeIdxMap[e.id]].all||1}),s.run())):null!=(i=s.onLayoutEnd)&&i.call(s)},s.prototype.run=function(){var t,n=this,r=n.maxIteration,o=n.nodes,e=n.workerEnabled,i=n.minMovement,a=n.animate;if(o)if(e||!a){for(var s=0;s<r;s++){var u=n.runOneStep(s);if(n.reachMoveThreshold(o,u,i))break}null!=(e=n.onLayoutEnd)&&e.call(n)}else"undefined"!=typeof window&&(t=0,this.timeInterval=window.setInterval(function(){var e;o&&(e=n.runOneStep(t)||[],n.reachMoveThreshold(o,e,i)&&(null!=(e=n.onLayoutEnd)&&e.call(n),window.clearInterval(n.timeInterval)),++t>=r)&&(null!=(e=n.onLayoutEnd)&&e.call(n),window.clearInterval(n.timeInterval))},0))},s.prototype.reachMoveThreshold=function(e,r,t){var o=0;return e.forEach(function(e,t){var n=e.x-r[t].x,e=e.y-r[t].y;o+=Math.sqrt(n*n+e*e)}),(o/=e.length)<t},s.prototype.runOneStep=function(e){var t,n=this.nodes,r=this.edges,o=[],i=[];if(n)return n.forEach(function(e,t){o[2*t]=0,i[2*t]=o[2*t+1]=0,i[2*t+1]=0}),this.calRepulsive(o,n),r&&this.calAttractive(o,r),this.calGravity(o,n),r=Math.max(.02,this.interval-.002*e),this.updateVelocity(o,i,r,n),t=[],n.forEach(function(e){t.push({x:e.x,y:e.y})}),this.updatePosition(i,r,n),null!=(e=this.tick)&&e.call(this),t},s.prototype.calRepulsive=function(f,e){var h=this.getMass,p=this.factor,d=this.coulombDisScale,y=this.preventOverlap,t=this.collideStrength,g=void 0===t?1:t,v=this.nodeStrength,m=this.nodeSize;e.forEach(function(u,l){var c=h?h(u):1;e.forEach(function(e,t){var n,r,o,i,a,s;t<=l||(o=u.x-e.x,i=u.y-e.y,0===o&&0===i&&(o=.01*Math.random(),i=.01*Math.random()),n=o*o+i*i,s=((r=Math.sqrt(n))+.1)*d,o=o/r,i=i/r,s=.5*(v(u)+v(e))*p/(s*s),a=h?h(e):1,f[2*l]+=o*s,f[2*l+1]+=i*s,f[2*t]-=o*s,f[2*t+1]-=i*s,y&&(m(u)+m(e))/2>r&&(s=g*(v(u)+v(e))*.5/n,f[2*l]+=o*s/c,f[2*l+1]+=i*s/c,f[2*t]-=o*s/a,f[2*t+1]-=i*s/a))})})},s.prototype.calAttractive=function(l,e){var c=this.nodeMap,f=this.nodeIdxMap,h=this.linkDistance,p=this.edgeStrength,d=this.nodeSize,y=this.getMass;e.forEach(function(e,t){var n=(0,g.getEdgeTerminal)(e,"source"),r=(0,g.getEdgeTerminal)(e,"target"),o=c[n],i=c[r],a=i.x-o.x,s=i.y-o.y,u=(0===a&&0===s&&(a=.01*Math.random(),s=.01*Math.random()),Math.sqrt(a*a+s*s)),a=a/u,s=s/u,u=((h(e,o,i)||1+(d(o)+d(i)||0)/2)-u)*p(e),e=f[n],n=f[r],r=y?y(o):1,o=y?y(i):1;l[2*e]-=a*u/r,l[2*e+1]-=s*u/r,l[2*n]+=a*u/o,l[2*n+1]+=s*u/o})},s.prototype.calGravity=function(e,t){for(var n=this.center,r=this.gravity,o=this.degrees,i=t.length,a=0;a<i;a++){var s,u=t[a],l=u.x-n[0],c=u.y-n[1],f=r;this.getCenter&&(s=this.getCenter(u,o[a].all))&&(0,g.isNumber)(s[0])&&(0,g.isNumber)(s[1])&&(0,g.isNumber)(s[2])&&(l=u.x-s[0],c=u.y-s[1],f=s[2]),f&&(e[2*a]-=f*l,e[2*a+1]-=f*c)}},s.prototype.updateVelocity=function(i,a,e,t){var s=this,u=e*s.damping;t.forEach(function(e,t){var n=i[2*t]*u||.01,r=i[2*t+1]*u||.01,o=Math.sqrt(n*n+r*r);o>s.maxSpeed&&(n*=o=s.maxSpeed/o,r*=o),a[2*t]=n,a[2*t+1]=r})},s.prototype.updatePosition=function(r,o,e){e.forEach(function(e,t){var n;(0,g.isNumber)(e.fx)&&(0,g.isNumber)(e.fy)?(e.x=e.fx,e.y=e.fy):(n=r[2*t]*o,t=r[2*t+1]*o,e.x+=n,e.y+=t)})},s.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},s.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},s.prototype.getType=function(){return"gForce"},s);function s(e){var t=o.call(this)||this;return t.maxIteration=500,t.workerEnabled=!1,t.edgeStrength=200,t.nodeStrength=1e3,t.coulombDisScale=.005,t.damping=.9,t.maxSpeed=1e3,t.minMovement=.5,t.interval=.02,t.factor=1,t.linkDistance=1,t.gravity=10,t.preventOverlap=!0,t.collideStrength=1,t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t.animate=!0,t.updateCfg(e),t}t.GForceLayout=n},69720:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=this&&this.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})},P=this&&this.__generator||function(r,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=o.call(r,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.FruchtermanGPULayout=void 0,n(9284)),E=n(58652),k=n(66887),M=n(70446),j=n(92444),C=n(84587),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},s.prototype.execute=function(){return O(this,void 0,void 0,function(){var t,n,r,o,i,a=this;return P(this,function(e){switch(e.label){case 0:return(n=(t=this).nodes)&&0!==n.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),r=t.center,1===n.length?(n[0].x=r[0],n[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(o={},i={},n.forEach(function(e,t){(0,E.isNumber)(e.x)||(e.x=Math.random()*a.width),(0,E.isNumber)(e.y)||(e.y=Math.random()*a.height),o[e.id]=e,i[e.id]=t}),t.nodeMap=o,t.nodeIdxMap=i,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return e.sent(),[2]}})})},s.prototype.executeWithWorker=function(s,u){return O(this,void 0,void 0,function(){var t,n,r,o,i,a=this;return P(this,function(e){switch(e.label){case 0:return n=(t=this).nodes,r=t.center,n&&0!==n.length?1===n.length?(n[0].x=r[0],n[0].y=r[1],[2]):(o={},i={},n.forEach(function(e,t){(0,E.isNumber)(e.x)||(e.x=Math.random()*a.width),(0,E.isNumber)(e.y)||(e.y=Math.random()*a.height),o[e.id]=e,i[e.id]=t}),t.nodeMap=o,t.nodeIdxMap=i,[4,t.run(s,u)]):[2];case 1:return e.sent(),[2]}})})},s.prototype.run=function(x,S){return O(this,void 0,void 0,function(){var t,n,o,r,i,a,s,u,l,c,f,h,p,d,y,g,v,m,b,w,_=this;return P(this,function(e){switch(e.label){case 0:for(n=(t=this).nodes,d=t.edges,o=t.maxIteration,r=t.center,a=t.height*t.width,i=Math.sqrt(a)/10,a=a/(n.length+1),s=Math.sqrt(a),u=t.speed,l=t.clustering,h=(0,M.attributesToTextureData)([t.clusterField],n),c=h.array,f=h.count,n.forEach(function(e,t){var n=0,r=0;(0,E.isNumber)(e.fx)&&(0,E.isNumber)(e.fy)&&(n=e.fx||.001,r=e.fy||.001),c[4*t+1]=n,c[4*t+2]=r}),h=n.length,d=(0,M.buildTextureData)(n,d),p=d.maxEdgePerVetex,d=d.array,y=t.workerEnabled,y=y?k.World.create({canvas:x,engineOptions:{supportCompute:!0}}):k.World.create({engineOptions:{supportCompute:!0}}),g=t.onLayoutEnd,v=[],m=0;m<f;m++)v.push(0,0,0,0);return b=y.createKernel(j.fruchtermanBundle).setDispatch([h,1,1]).setBinding({u_Data:d,u_K:s,u_K2:a,u_Gravity:t.gravity,u_ClusterGravity:t.clusterGravity||t.gravity||1,u_Speed:u,u_MaxDisplace:i,u_Clustering:l?1:0,u_Center:r,u_AttributeArray:c,u_ClusterCenters:v,MAX_EDGE_PER_VERTEX:p,VERTEX_COUNT:h}),l&&(w=y.createKernel(j.clusterBundle).setDispatch([f,1,1]).setBinding({u_Data:d,u_NodeAttributes:c,u_ClusterCenters:v,VERTEX_COUNT:h,CLUSTER_COUNT:f})),[4,O(_,void 0,void 0,function(){var t,r;return P(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<o?[4,b.execute()]:[3,6];case 2:return e.sent(),l?(w.setBinding({u_Data:b}),[4,w.execute()]):[3,4];case 3:e.sent(),b.setBinding({u_ClusterCenters:w}),e.label=4;case 4:b.setBinding({u_MaxDisplace:i*=.99}),e.label=5;case 5:return t++,[3,1];case 6:return[4,b.getOutput()];case 7:return r=e.sent(),x?S.postMessage({type:C.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:r}):n.forEach(function(e,t){var n=r[4*t],t=r[4*t+1];e.x=n,e.y=t}),g&&g(),[2]}})})];case 1:return e.sent(),[2]}})})},s.prototype.getType=function(){return"fruchterman-gpu"},s);function s(e){var t=o.call(this)||this;return t.maxIteration=1e3,t.gravity=10,t.speed=1,t.clustering=!1,t.clusterField="cluster",t.clusterGravity=10,t.workerEnabled=!1,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t.updateCfg(e),t}t.FruchtermanGPULayout=n},92444:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clusterBundle=t.clusterCode=t.fruchtermanBundle=t.fruchtermanCode=void 0,t.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",t.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',t.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",t.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},54790:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),k=this&&this.__awaiter||function(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})},M=this&&this.__generator||function(r,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=o.call(r,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.GForceGPULayout=void 0,n(9284)),j=n(58652),C=n(66887),T=n(70446),A=n(23979),I=n(6920),R=n(84587),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},s.prototype.execute=function(){return k(this,void 0,void 0,function(){var n,t,r,o,i;return M(this,function(e){switch(e.label){case 0:return(t=(n=this).nodes)&&0!==t.length?(n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]),r=n.center,1===t.length?(t[0].x=r[0],t[0].y=r[1],n.onLayoutEnd&&n.onLayoutEnd(),[2]):(o={},i={},t.forEach(function(e,t){(0,j.isNumber)(e.x)||(e.x=Math.random()*n.width),(0,j.isNumber)(e.y)||(e.y=Math.random()*n.height),o[e.id]=e,i[e.id]=t}),n.nodeMap=o,n.nodeIdxMap=i,n.nodeStrength=(0,T.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,T.proccessToFunc)(n.edgeStrength,1),[4,n.run()])):(n.onLayoutEnd&&n.onLayoutEnd(),[2]);case 1:return e.sent(),[2]}})})},s.prototype.executeWithWorker=function(e,t){var n,r,o=this,i=o.nodes,a=o.center;i&&0!==i.length&&(1===i.length?(i[0].x=a[0],i[0].y=a[1]):(n={},r={},i.forEach(function(e,t){(0,j.isNumber)(e.x)||(e.x=Math.random()*o.width),(0,j.isNumber)(e.y)||(e.y=Math.random()*o.height),n[e.id]=e,r[e.id]=t}),o.nodeMap=n,o.nodeIdxMap=r,o.nodeStrength=(0,T.proccessToFunc)(o.nodeStrength,1),o.edgeStrength=(0,T.proccessToFunc)(o.edgeStrength,1),o.run(e,t)))},s.prototype.run=function(P,E){return k(this,void 0,void 0,function(){var o,i,a,t,n,r,s,u,l,c,f,h,p,d,y,g,v,m,b,w,_,x,S,O=this;return M(this,function(e){switch(e.label){case 0:for(i=(o=this).nodes,g=o.edges,a=o.maxIteration,o.width||"undefined"==typeof window||(o.width=window.innerWidth),o.height||"undefined"==typeof window||(o.height=window.innerHeight),t=i.length,o.linkDistance=(0,T.proccessToFunc)(o.linkDistance),o.edgeStrength=(0,T.proccessToFunc)(o.edgeStrength),r=(0,T.buildTextureDataWithTwoEdgeAttr)(i,g,o.linkDistance,o.edgeStrength),n=r.maxEdgePerVetex,r=r.array,o.degrees=(0,A.getDegree)(i.length,o.nodeIdxMap,g).map(function(e){return e.all}),s=[],u=[],l=[],c=[],f=[],h=[],p=[],o.getMass||(o.getMass=function(e){return o.degrees[o.nodeIdxMap[e.id]]||1}),d=o.gravity,y=o.center,i.forEach(function(e,t){s.push(o.getMass(e)),u.push(o.nodeStrength(e)),o.degrees[t]||(o.degrees[t]=0);var n=[y[0],y[1],d];o.getCenter&&(t=o.getCenter(e,o.degrees[t]))&&(0,j.isNumber)(t[0])&&(0,j.isNumber)(t[1])&&(0,j.isNumber)(t[2])&&(n=t),l.push(n[0]),c.push(n[1]),f.push(n[2]),(0,j.isNumber)(e.fx)&&(0,j.isNumber)(e.fy)?(h.push(e.fx||.001),p.push(e.fy||.001)):(h.push(0),p.push(0))}),g=(0,T.arrayToTextureData)([s,o.degrees,u,h]),v=(0,T.arrayToTextureData)([l,c,f,p]),m=o.workerEnabled,m=m?C.World.create({canvas:P,engineOptions:{supportCompute:!0}}):C.World.create({engineOptions:{supportCompute:!0}}),b=o.onLayoutEnd,w=[],r.forEach(function(e){w.push(e)}),_=0;_<4;_++)w.push(0);return x=m.createKernel(I.gForceBundle).setDispatch([t,1,1]).setBinding({u_Data:r,u_damping:o.damping,u_maxSpeed:o.maxSpeed,u_minMovement:o.minMovement,u_coulombDisScale:o.coulombDisScale,u_factor:o.factor,u_NodeAttributeArray1:g,u_NodeAttributeArray2:v,MAX_EDGE_PER_VERTEX:n,VERTEX_COUNT:t,u_AveMovement:w,u_interval:o.interval}),S=m.createKernel(I.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:r,VERTEX_COUNT:t,u_AveMovement:[0,0,0,0]}),[4,k(O,void 0,void 0,function(){var t,n,r;return M(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<a?[4,x.execute()]:[3,5];case 2:return e.sent(),S.setBinding({u_Data:x}),[4,S.execute()];case 3:e.sent(),n=Math.max(.02,o.interval-.002*t),x.setBinding({u_interval:n,u_AveMovement:S}),e.label=4;case 4:return t++,[3,1];case 5:return[4,x.getOutput()];case 6:return r=e.sent(),P?E.postMessage({type:R.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:r}):i.forEach(function(e,t){var n=r[4*t],t=r[4*t+1];e.x=n,e.y=t}),b&&b(),[2]}})})];case 1:return e.sent(),[2]}})})},s.prototype.getType=function(){return"gForce-gpu"},s);function s(e){var t=o.call(this)||this;return t.maxIteration=1e3,t.edgeStrength=200,t.nodeStrength=1e3,t.coulombDisScale=.005,t.damping=.9,t.maxSpeed=1e3,t.minMovement=.5,t.interval=.02,t.factor=1,t.linkDistance=1,t.gravity=10,t.workerEnabled=!1,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t.updateCfg(e),t}t.GForceGPULayout=n},6920:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aveMovementBundle=t.aveMovementCode=t.gForceBundle=t.gForceCode=void 0,t.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i  p \n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",t.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',t.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",t.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},50790:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=(Object.defineProperty(t,"__esModule",{value:!0}),t.GridLayout=void 0,n(58652)),n=(o=n(9284).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},a.prototype.execute=function(){var r=this,e=r.nodes,t=r.edges,n=r.begin,o=e.length;if(0===o)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:e,edges:t};if(1===o)return e[0].x=n[0],e[0].y=n[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:e,edges:t};var i,a,s,u=r.sortBy,n=r.width,l=r.height,c=r.condense,f=r.preventOverlapPadding,h=r.preventOverlap,p=r.nodeSpacing,d=r.nodeSize,y=[],g=(e.forEach(function(e){y.push(e)}),{}),e=(y.forEach(function(e,t){g[e.id]=t}),"degree"!==u&&(0,O.isString)(u)&&void 0!==y[0][u]||(u="degree",!(0,O.isNaN)(e[0].degree))||(i=(0,O.getDegree)(y.length,g,t),y.forEach(function(e,t){e.degree=i[t].all})),y.sort(function(e,t){return t[u]-e[u]}),n||"undefined"==typeof window||(n=window.innerWidth),l||"undefined"==typeof window||(l=window.innerHeight),r.rows),v=null!=r.cols?r.cols:r.columns;if(r.cells=o,null!=e&&null!=v?(r.rows=e,r.cols=v):null!=e&&null==v?(r.rows=e,r.cols=Math.ceil(r.cells/r.rows)):null==e&&null!=v?(r.cols=v,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.rows=Math.max(r.rows,1),r.cols=Math.max(r.cols,1),r.cols*r.rows>r.cells)((b=r.small())-1)*(m=r.large())>=r.cells?r.small(b-1):(m-1)*b>=r.cells&&r.large(m-1);else for(;r.cols*r.rows<r.cells;){var m,b=r.small();((m=r.large())+1)*b>=r.cells?r.large(m+1):r.small(b+1)}r.cellWidth=n/r.cols,r.cellHeight=l/r.rows,c&&(r.cellWidth=0,r.cellHeight=0),(h||p)&&(a=(0,O.getFuncByUnknownType)(10,p),s=(0,O.getFuncByUnknownType)(30,d,!1),y.forEach(function(e){e.x&&e.y||(e.x=0,e.y=0);var t,n=s(e)||30,n=(0,O.isArray)(n)?(t=n[0],n[1]):t=n,e=void 0!==a?a(e):f,n=n+e;r.cellWidth=Math.max(r.cellWidth,t+e),r.cellHeight=Math.max(r.cellHeight,n)})),r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(var w=0;w<y.length;w++){var _=y[w],x=void 0;if((x=r.position?r.position(_):x)&&(void 0!==x.row||void 0!==x.col)){var S={row:x.row,col:x.col};if(void 0===S.col)for(S.col=0;r.used(S.row,S.col);)S.col++;else if(void 0===S.row)for(S.row=0;r.used(S.row,S.col);)S.row++;r.id2manPos[_.id]=S,r.use(S.row,S.col)}r.getPos(_)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:t,nodes:y}},a.prototype.small=function(e){var t,n=this.rows||5,r=this.cols||5;return null==e?t=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=e:this.cols=e,t},a.prototype.large=function(e){var t,n=this.rows||5,r=this.cols||5;return null==e?t=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=e:this.cols=e,t},a.prototype.used=function(e,t){return this.cellUsed["c-".concat(e,"-").concat(t)]||!1},a.prototype.use=function(e,t){this.cellUsed["c-".concat(e,"-").concat(t)]=!0},a.prototype.moveToNextCell=function(){var e=this.cols||5;this.col++,this.col>=e&&(this.col=0,this.row++)},a.prototype.getPos=function(e){var t,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[e.id];if(a)t=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();t=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}e.x=t,e.y=n},a.prototype.getType=function(){return"grid"},a);function a(e){var t=o.call(this)||this;return t.begin=[0,0],t.preventOverlap=!0,t.preventOverlapPadding=10,t.condense=!1,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t.row=0,t.col=0,t.cellWidth=0,t.cellHeight=0,t.cellUsed={},t.id2manPos={},t.onLayoutEnd=function(){},t.updateCfg(e),t}t.GridLayout=n},71812:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=t.ForceAtlas2Layout=t.ComboCombinedLayout=t.ComboForceLayout=t.GForceGPULayout=t.FruchtermanGPULayout=t.FruchtermanLayout=t.MDSLayout=t.ConcentricLayout=t.RadialLayout=t.DagreCompoundLayout=t.DagreLayout=t.CircularLayout=t.ForceLayout=t.Force2Layout=t.GForceLayout=t.RandomLayout=t.GridLayout=t.Layouts=t.Layout=void 0,n(50790)),a=(Object.defineProperty(t,"GridLayout",{enumerable:!0,get:function(){return i.GridLayout}}),n(83846)),s=(Object.defineProperty(t,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}}),n(66007)),u=(Object.defineProperty(t,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}}),n(13490)),l=(Object.defineProperty(t,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}}),n(1878)),c=(Object.defineProperty(t,"ForceLayout",{enumerable:!0,get:function(){return l.ForceLayout}}),n(64933)),f=(Object.defineProperty(t,"CircularLayout",{enumerable:!0,get:function(){return c.CircularLayout}}),n(10813)),h=(Object.defineProperty(t,"DagreLayout",{enumerable:!0,get:function(){return f.DagreLayout}}),n(91083)),p=(Object.defineProperty(t,"DagreCompoundLayout",{enumerable:!0,get:function(){return h.DagreCompoundLayout}}),n(44318)),d=(Object.defineProperty(t,"RadialLayout",{enumerable:!0,get:function(){return p.RadialLayout}}),n(57940)),y=(Object.defineProperty(t,"ConcentricLayout",{enumerable:!0,get:function(){return d.ConcentricLayout}}),n(15031)),g=(Object.defineProperty(t,"MDSLayout",{enumerable:!0,get:function(){return y.MDSLayout}}),n(66865)),v=(Object.defineProperty(t,"FruchtermanLayout",{enumerable:!0,get:function(){return g.FruchtermanLayout}}),n(69720)),m=(Object.defineProperty(t,"FruchtermanGPULayout",{enumerable:!0,get:function(){return v.FruchtermanGPULayout}}),n(54790)),b=(Object.defineProperty(t,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}}),n(65428)),w=(Object.defineProperty(t,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}}),n(99266)),_=(Object.defineProperty(t,"ComboCombinedLayout",{enumerable:!0,get:function(){return w.ComboCombinedLayout}}),n(40432)),x=(Object.defineProperty(t,"ForceAtlas2Layout",{enumerable:!0,get:function(){return _.ForceAtlas2Layout}}),n(4957)),S=(Object.defineProperty(t,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}}),n(34199));Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return S.Layout}}),Object.defineProperty(t,"Layouts",{enumerable:!0,get:function(){return S.Layouts}}),o(n(88312),t)},34199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layouts=t.Layout=void 0;var r=n(52235),o=n(50790),i=n(83846),a=n(13490),s=n(66007),u=n(1878),l=n(64933),c=n(10813),f=n(44318),h=n(57940),p=n(15031),d=n(66865),y=n(69720),g=n(54790),v=n(65428),m=n(99266),b=n(40432),w=n(4957),_=n(91083),x=n(58652);function S(e){var t=(0,r.getLayoutByName)(e.type);this.layoutInstance=new t(e)}S.prototype.layout=function(e){return this.layoutInstance.layout(e)},S.prototype.updateCfg=function(e){this.layoutInstance.updateCfg(e)},S.prototype.init=function(e){this.correctLayers(e.nodes),this.layoutInstance.init(e)},S.prototype.correctLayers=function(e){var t,n,r;null!=e&&e.length&&(t=1/0,n=[],e.forEach(function(e){(0,x.isString)(e.layer)&&(e.layer=parseInt(e.layer,10)),void 0===e.layer||isNaN(e.layer)||(n.push(e),e.layer<t&&(t=e.layer))}),t<=0)&&(r=Math.abs(t)+1,n.forEach(function(e){return e.layer+=r}))},S.prototype.execute=function(){this.layoutInstance.execute()},S.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},S.prototype.destroy=function(){return this.layoutInstance.destroy()},t.Layout=S,t.Layouts={force:u.ForceLayout,fruchterman:d.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:c.DagreLayout,dagreCompound:_.DagreCompoundLayout,circular:l.CircularLayout,radial:f.RadialLayout,concentric:h.ConcentricLayout,grid:o.GridLayout,mds:p.MDSLayout,comboForce:v.ComboForceLayout,comboCombined:m.ComboCombinedLayout,random:i.RandomLayout,"gForce-gpu":g.GForceGPULayout,"fruchterman-gpu":y.FruchtermanGPULayout,er:w.ERLayout}},15031:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=(Object.defineProperty(t,"__esModule",{value:!0}),t.MDSLayout=void 0,n(92686)),s=n(58652),n=(o=n(9284).Base,i(u,o),u.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},u.prototype.execute=function(){var e,t,n=this.nodes,r=this.edges,r=void 0===r?[]:r,o=this.center;if(n&&0!==n.length)return 1===n.length?(n[0].x=o[0],n[0].y=o[1],void(this.onLayoutEnd&&this.onLayoutEnd())):(t=this.linkDistance,e=(0,s.getAdjMatrix)({nodes:n,edges:r},!1),e=(0,s.floydWarshall)(e),this.handleInfinity(e),e=(0,s.scaleMatrix)(e,t),this.scaledDistances=e,t=this.runMDS(),(this.positions=t).forEach(function(e,t){n[t].x=e[0]+o[0],n[t].y=e[1]+o[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:n,edges:r});this.onLayoutEnd&&this.onLayoutEnd()},u.prototype.runMDS=function(){var e=this.scaledDistances,e=a.Matrix.mul(a.Matrix.pow(e,2),-.5),t=e.mean("row"),n=e.mean("column"),r=e.mean(),r=(e.add(r).subRowVector(t).subColumnVector(n),new a.SingularValueDecomposition(e)),o=a.Matrix.sqrt(r.diagonalMatrix).diagonal();return r.leftSingularVectors.toJSON().map(function(e){return a.Matrix.mul([e],[o]).toJSON()[0].splice(0,2)})},u.prototype.handleInfinity=function(r){var o=-999999;r.forEach(function(e){e.forEach(function(e){e!==1/0&&o<e&&(o=e)})}),r.forEach(function(e,n){e.forEach(function(e,t){e===1/0&&(r[n][t]=o)})})},u.prototype.getType=function(){return"mds"},u);function u(e){var t=o.call(this)||this;return t.center=[0,0],t.linkDistance=50,t.nodes=[],t.edges=[],t.onLayoutEnd=function(){},t.updateCfg(e),t}t.MDSLayout=n},44318:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(30910),t)},7655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=n(92686);function r(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}r.prototype.layout=function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=p.Matrix.mul(p.Matrix.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean(),s=(r.add(a).subRowVector(o).subColumnVector(i),new p.SingularValueDecomposition(r)),u=p.Matrix.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(function(e){return p.Matrix.mul([e],[u]).toJSON()[0].splice(0,t)})}catch(t){for(var l=[],c=0;c<e.length;c++){var f=Math.random()*n,h=Math.random()*n;l.push([f,h])}return l}},t.default=r},30910:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},O=(Object.defineProperty(t,"__esModule",{value:!0}),t.RadialLayout=void 0,n(58652)),a=n(9284),P=i(n(7655)),E=i(n(20632));function d(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}s=a.Base,o(u,s),u.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},u.prototype.execute=function(){var n=this,r=n.nodes,e=n.edges||[];if(r&&0!==r.length){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var o=n.center;if(1===r.length)return r[0].x=o[0],r[0].y=o[1],void(n.onLayoutEnd&&n.onLayoutEnd());var t=n.linkDistance,i=null;if((0,O.isString)(n.focusNode)){for(var a=!1,s=0;s<r.length;s++)r[s].id===n.focusNode&&(i=r[s],n.focusNode=i,a=!0,s=r.length);a||(i=null)}else i=n.focusNode;i||(i=r[0],n.focusNode=i);u=i.id,l=-1,r.forEach(function(e,t){e.id===u&&(l=t)});var u,l,c=l,f=(c<0&&(c=0),n.focusIndex=c,(0,O.getAdjMatrix)({nodes:r,edges:e},!1)),h=(0,O.floydWarshall)(f),p=n.maxToFocus(h,c),p=(n.handleInfinity(h,c,p+1),(n.distances=h)[c]),h=n.width||500,d=n.height||500,y=h-o[0]>o[0]?o[0]:h-o[0],g=d-o[1]>o[1]?o[1]:d-o[1],v=(y=0===y?h/2:y)<(g=0===g?d/2:g)?y:g,m=Math.max.apply(Math,p),b=[],y=(p.forEach(function(e,t){n.unitRadius||(n.unitRadius=v/m),b[t]=e*n.unitRadius}),n.radii=b,n.eIdealDisMatrix()),g=function(e){for(var t=e.length,n=e[0].length,r=[],o=0;o<t;o++){for(var i=[],a=0;a<n;a++)0!==e[o][a]?i.push(1/(e[o][a]*e[o][a])):i.push(0);r.push(i)}return r}(n.eIdealDistances=y),w=(n.weights=g,new P.default({linkDistance:t,distances:y}).layout());w.forEach(function(e){(0,O.isNaN)(e[0])&&(e[0]=Math.random()*t),(0,O.isNaN)(e[1])&&(e[1]=Math.random()*t)}),(n.positions=w).forEach(function(e,t){r[t].x=e[0]+o[0],r[t].y=e[1]+o[1]}),w.forEach(function(e){e[0]-=w[c][0],e[1]-=w[c][1]}),n.run();var _,x,p=n.preventOverlap,S=n.nodeSize,g=n.strictRadial;return p&&(_=n.nodeSpacing,x=(0,O.isNumber)(_)?function(){return _}:(0,O.isFunction)(_)?_:function(){return 0},y=S?(0,O.isArray)(S)?function(e){return(S[0]>S[1]?S[0]:S[1])+x(e)}:function(e){return S+x(e)}:function(e){return e.size?(0,O.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])+x(e):(0,O.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)+x(e):e.size+x(e):10+x(e)},p={nodes:r,nodeSizeFunc:y,adjMatrix:f,positions:w,radii:b,height:d,width:h,strictRadial:g,focusID:c,iterations:n.maxPreventOverlapIteration||200,k:w.length/4.5},w=new E.default(p).layout()),w.forEach(function(e,t){r[t].x=e[0]+o[0],r[t].y=e[1]+o[1]}),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:e}}n.onLayoutEnd&&n.onLayoutEnd()},u.prototype.run=function(){for(var e=this.maxIteration,t=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=e;i++)this.oneIteration(i/e,t,o,r,n)},u.prototype.oneIteration=function(n,r,l,c,f){var h=1-n,p=this.focusIndex;r.forEach(function(o,i){var a,e,s,u,t=d(o,[0,0]),t=0===t?0:1/t;i!==p&&(s=a=u=0,r.forEach(function(e,t){var n,r;i!==t&&(n=d(o,e),r=c[t][i],s+=f[i][t],u+=f[i][t]*(e[0]+r*(o[0]-e[0])*(n=0===n?0:1/n)),a+=f[i][t]*(e[1]+r*(o[1]-e[1])*n))}),e=0===l[i]?0:1/l[i],s=s*h+n*e*e,u=(u*=h)+n*e*o[0]*t,o[0]=u/s,a=(a*=h)+n*e*o[1]*t,o[1]=a/s)})},u.prototype.eIdealDisMatrix=function(){var e,i,a,s,t,u=this,l=u.nodes;return l?(e=u.distances,i=u.linkDistance,a=u.radii||[],s=u.unitRadius||50,t=[],e&&e.forEach(function(e,r){var o=[];e.forEach(function(e,t){var n;r===t?o.push(0):a[r]===a[t]?"data"===u.sortBy?o.push(e*(Math.abs(r-t)*u.sortStrength)/(a[r]/s)):u.sortBy?(n=l[r][u.sortBy]||0,t=l[t][u.sortBy]||0,(0,O.isString)(n)&&(n=n.charCodeAt(0)),(0,O.isString)(t)&&(t=t.charCodeAt(0)),o.push(e*(Math.abs(n-t)*u.sortStrength)/(a[r]/s))):o.push(e*i/(a[r]/s)):o.push(e*((i+s)/2))}),t.push(o)}),t):[]},u.prototype.handleInfinity=function(e,t,n){for(var r,o=e.length,i=0;i<o;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(var a=0;a<o;a++)e[i][a]!==1/0&&e[t][a]===1/0&&(e[t][a]=n+e[i][a],e[a][t]=n+e[i][a])}for(i=0;i<o;i++)if(i!==t)for(a=0;a<o;a++)e[i][a]===1/0&&(r=Math.abs(e[t][i]-e[t][a]),e[i][a]=r=0===r?1:r)},u.prototype.maxToFocus=function(e,t){for(var n=0,r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n},u.prototype.getType=function(){return"radial"};var s,i=u;function u(e){var t=s.call(this)||this;return t.maxIteration=1e3,t.focusNode=null,t.unitRadius=null,t.linkDistance=50,t.preventOverlap=!1,t.strictRadial=!0,t.maxPreventOverlapIteration=200,t.sortStrength=10,t.nodes=[],t.edges=[],t.updateCfg(e),t}t.RadialLayout=i},20632:function(e,t){"use strict";function n(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.layout=function(){var e=this.positions,n=[],t=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=n;for(var o=0;o<t;o++)e.forEach(function(e,t){n[t]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return e},n.prototype.getRepulsion=function(){var a=this,e=a.positions,s=a.nodes,u=a.disp,l=a.k,c=a.radii||[];e.forEach(function(o,i){u[i]={x:0,y:0},e.forEach(function(e,t){var n,r;i!==t&&c[i]===c[t]&&(r=o[0]-e[0],e=o[1]-e[1],0===(n=Math.sqrt(r*r+e*e))&&(n=1,e=r=.01*(t<i?1:-1)),n<a.nodeSizeFunc(s[i])/2+a.nodeSizeFunc(s[t])/2)&&(u[i].x+=r/n*(t=l*l/n),u[i].y+=e/n*t)})})},n.prototype.updatePositions=function(){var i=this.positions,a=this.disp,s=this.speed,u=this.strictRadial,l=this.focusID,c=this.maxDisplace||this.width/10,f=(u&&a.forEach(function(e,t){var n=i[t][0]-i[l][0],t=i[t][1]-i[l][1],r=Math.sqrt(n*n+t*t),t=t/r,n=-n/r,r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.acos((t*e.x+n*e.y)/r),o=(o>Math.PI/2&&(o-=Math.PI/2,t*=-1,n*=-1),Math.cos(o)*r);e.x=t*o,e.y=n*o}),this.radii);i.forEach(function(e,t){var n,r,o;t!==l&&0<(r=Math.sqrt(a[t].x*a[t].x+a[t].y*a[t].y))&&t!==l&&(o=Math.min(c*(s/800),r),e[0]+=a[t].x/r*o,e[1]+=a[t].y/r*o,u)&&(r=e[0]-i[l][0],o=e[1]-i[l][1],r=r/(n=Math.sqrt(r*r+o*o))*f[t],o=o/n*f[t],e[0]=i[l][0]+r,e[1]=i[l][1]+o)})},t.default=n},83846:function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),t.RandomLayout=void 0,o=n(9284).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},a.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach(function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},a.prototype.getType=function(){return"random"},a);function a(e){var t=o.call(this)||this;return t.center=[0,0],t.width=300,t.height=300,t.nodes=[],t.edges=[],t.onLayoutEnd=function(){},t.updateCfg(e),t}t.RandomLayout=n},88312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},52235:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0,n(9284)),u=n(58652),l=new Map;t.registerLayout=function(e,i){var a;function t(e){var t,n=t=a.call(this)||this,r={},o=Object.assign({},n.getDefaultCfg(),(null==(o=i.getDefaultCfg)?void 0:o.call(i))||{});return Object.assign(r,o,i,e),Object.keys(r).forEach(function(e){n[e]=r[e]}),t}return l.get(e)&&console.warn("The layout with the name ".concat(e," exists already, it will be overridden")),(0,u.isObject)(i)?(a=s.Base,o(t,a),l.set(e,t)):l.set(e,i),l.get(e)},t.unRegisterLayout=function(e){l.has(e)&&l.delete(e)},t.getLayoutByName=function(e){return l.has(e)?l.get(e):null}},5458:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=void 0,t.isArray=Array.isArray},77102:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getFuncByUnknownType=o.getFunc=o.isFunction=void 0;var i=t(58652),a=t(58325);o.isFunction=function(e){return"function"==typeof e},o.getFunc=function(e,t,n){return n||((0,a.isNumber)(e)?function(){return e}:function(){return t})},o.getFuncByUnknownType=function(t,n,r){return void 0===r&&(r=!0),n||0===n?(0,o.isFunction)(n)?n:(0,a.isNumber)(n)?function(){return n}:(0,i.isArray)(n)?function(){var e;return r?(e=Math.max.apply(Math,n),isNaN(e)?t:e):n}:(0,i.isObject)(n)?function(){var e;return r?(e=Math.max(n.width,n.height),isNaN(e)?t:e):[n.width,n.height]}:function(){return t}:function(e){return e.size?(0,i.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,i.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}}},70446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayToTextureData=t.attributesToTextureData=t.buildTextureDataWithTwoEdgeAttr=t.buildTextureData=t.proccessToFunc=void 0;var r=n(58652),v=n(23979);t.proccessToFunc=function(e,t){return e?(0,r.isNumber)(e)?function(){return e}:e:function(){return t||1}},t.buildTextureData=function(e,t){for(var n=[],r=[],o={},i=0,i=0;i<e.length;i++){var a=e[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<t.length;i++){var s=t[i],u=(0,v.getEdgeTerminal)(s,"source"),s=(0,v.getEdgeTerminal)(s,"target");isNaN(o[u])||isNaN(o[s])||(r[o[u]].push(o[s]),r[o[s]].push(o[u]))}var l=0;for(i=0;i<e.length;i++){var c=r[i],f=c.length;n[4*i+2]=n.length,n[4*i+3]=f;for(var l=Math.max(l,f),h=0;h<f;++h){var p=c[h];n.push(+p)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:l,array:new Float32Array(n)}},t.buildTextureDataWithTwoEdgeAttr=function(e,t,n,r){for(var o=[],i=[],a={},s=0,s=0;s<e.length;s++){var u=e[s];a[u.id]=s,o.push(u.x),o.push(u.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){var l=t[s],c=(0,v.getEdgeTerminal)(l,"source"),f=(0,v.getEdgeTerminal)(l,"target");i[a[c]].push(a[f]),i[a[c]].push(n(l)),i[a[c]].push(r(l)),i[a[c]].push(0),i[a[f]].push(a[c]),i[a[f]].push(n(l)),i[a[f]].push(r(l)),i[a[f]].push(0)}var h=0;for(s=0;s<e.length;s++){var p=i[s],d=p.length;o[4*s+2]=o.length+1048576*d/4,o[4*s+3]=0;for(var h=Math.max(h,d/4),y=0;y<d;++y){var g=p[y];o.push(+g)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:h,array:new Float32Array(o)}},t.attributesToTextureData=function(e,t){var r=[],o=e.length,i={};return t.forEach(function(n){e.forEach(function(e,t){if(void 0===i[n[e]]&&(i[n[e]]=Object.keys(i).length),r.push(i[n[e]]),t===o-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},t.arrayToTextureData=function(e){for(var r=[],o=e.length,t=e[0].length,n=0;n<t;n++)!function(n){e.forEach(function(e,t){if(r.push(e[n]),t===o-1)for(;r.length%4!=0;)r.push(0)})}(n);return new Float32Array(r)}},58652:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(66515),t),o(n(5458),t),o(n(58325),t),o(n(23979),t),o(n(74584),t),o(n(77102),t)},23979:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCoreNodeAndRelativeLeafNodes=i.getAvgNodePosition=i.getLayoutBBox=i.traverseTreeUp=i.scaleMatrix=i.getAdjMatrix=i.floydWarshall=i.getDegreeMap=i.getDegree=i.getEdgeTerminal=void 0;function p(e,t,n){return"source"===e?(null==(e=null==n?void 0:n.find(function(e){return e.target===t.id}))?void 0:e.source)||{}:(null==(e=null==n?void 0:n.find(function(e){return e.source===t.id}))?void 0:e.target)||{}}function d(e,t,n){var r=[];switch(e){case"source":r=null==n?void 0:n.filter(function(e){return e.source===t.id}).map(function(e){return e.target});break;case"target":r=null==n?void 0:n.filter(function(e){return e.target===t.id}).map(function(e){return e.source});break;case"both":r=null==n?void 0:n.filter(function(e){return e.source===t.id}).map(function(e){return e.target}).concat(null==n?void 0:n.filter(function(e){return e.target===t.id}).map(function(e){return e.source}))}return e=new Set(r),Array.from(e)}var l=t(5458),c=t(58325),n=t(74584);i.getEdgeTerminal=function(e,t){e=e[t];return(0,n.isObject)(e)?e.cell:e},i.getDegree=function(e,n,t){for(var r=[],o=0;o<e;o++)r[o]={in:0,out:0,all:0};return t&&t.forEach(function(e){var t=(0,i.getEdgeTerminal)(e,"source"),e=(0,i.getEdgeTerminal)(e,"target");t&&r[n[t]]&&(r[n[t]].out+=1,r[n[t]].all+=1),e&&r[n[e]]&&(r[n[e]].in+=1,r[n[e]].all+=1)}),r},i.getDegreeMap=function(e,t){var n={};return e.forEach(function(e){n[e.id]={in:0,out:0,all:0}}),t&&t.forEach(function(e){var t=(0,i.getEdgeTerminal)(e,"source"),e=(0,i.getEdgeTerminal)(e,"target");t&&(n[t].out+=1,n[t].all+=1),e&&(n[e].in+=1,n[e].all+=1)}),n},i.floydWarshall=function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var o=0;o<n;o+=1)r===o?t[r][o]=0:0!==e[r][o]&&e[r][o]?t[r][o]=e[r][o]:t[r][o]=1/0}for(var i=0;i<n;i+=1)for(r=0;r<n;r+=1)for(o=0;o<n;o+=1)t[r][o]>t[r][i]+t[i][o]&&(t[r][o]=t[r][i]+t[i][o]);return t},i.getAdjMatrix=function(e,n){var t=e.nodes,e=e.edges,r=[],o={};if(t)return t&&t.forEach(function(e,t){o[e.id]=t,r.push([])}),null!=e&&e.forEach(function(e){var t=(0,i.getEdgeTerminal)(e,"source"),e=(0,i.getEdgeTerminal)(e,"target"),t=o[t],e=o[e];void 0!==t&&void 0!==e&&(r[t][e]=1,n||(r[e][t]=1))}),r;throw new Error("invalid nodes data!")},i.scaleMatrix=function(e,n){var r=[];return e.forEach(function(e){var t=[];e.forEach(function(e){t.push(e*n)}),r.push(t)}),r},i.traverseTreeUp=function(e,t){"function"==typeof t&&function e(t,n){if(t&&t.children)for(var r=t.children.length-1;0<=r;r--)if(!e(t.children[r],n))return;return n(t)}(e,t)},i.getLayoutBBox=function(e){var i=1/0,a=1/0,s=-1/0,u=-1/0;return e.forEach(function(e){var t=e.size,t=((0,l.isArray)(t)?1===t.length&&(t=[t[0],t[0]]):(0,c.isNumber)(t)?t=[t,t]:void 0!==t&&!isNaN(t)||(t=[30,30]),[t[0]/2,t[1]/2]),n=e.x-t[0],r=e.x+t[0],o=e.y-t[1],e=e.y+t[1];n<i&&(i=n),o<a&&(a=o),s<r&&(s=r),u<e&&(u=e)}),{minX:i,minY:a,maxX:s,maxY:u}},i.getAvgNodePosition=function(e){var t={x:0,y:0},e=(e.forEach(function(e){t.x+=e.x||0,t.y+=e.y||0}),e.length||1);return{x:t.x/e,y:t.y/e}};i.getCoreNodeAndRelativeLeafNodes=function(e,t,n,r,o,i){var a,s,u,l=o[t.id],c=l.in,l=l.out,f=t,h=[];return 0===c?(f=p("source",t,n),h=d("both",f,n).map(function(e){return i[e]})):0===l&&(f=p("target",t,n),h=d("both",f,n).map(function(e){return i[e]})),{coreNode:f,relativeLeafNodes:h=h.filter(function(e){return o[e.id]&&(0===o[e.id].in||0===o[e.id].out)}),sameTypeLeafNodes:(c=e,l=h,s=o,u=t[a=r]||"",l=(null==l?void 0:l.filter(function(e){return e[a]===u}))||[],l="leaf"===c?l.filter(function(e){var t;return 0===(null==(t=s[e.id])?void 0:t.in)||0===(null==(t=s[e.id])?void 0:t.out)}):l)}}},58325:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toNumber=n.isNaN=n.isNumber=void 0,n.isNumber=function(e){return"number"==typeof e},n.isNaN=function(e){return Number.isNaN(Number(e))},n.toNumber=function(e){var t=parseFloat(e);return(0,n.isNaN)(t)?e:t}},74584:function(e,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0,r.isObject=function(e){return null!==e&&"object"===o(e)},r.clone=function(e){var t,n;return null===e?e:e instanceof Date?new Date(e.getTime()):e instanceof Array?(t=[],e.forEach(function(e){t.push(e)}),t.map(function(e){return(0,r.clone)(e)})):"object"===o(e)&&Object.keys(e).length?(n=i({},e),Object.keys(n).forEach(function(e){n[e]=(0,r.clone)(n[e])}),n):e}},66515:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelize=t.isString=void 0,t.isString=function(e){return"string"==typeof e};var n,r,o=/-(\w)/g;t.camelize=(n=function(e){return e.replace(o,function(e,t){return t?t.toUpperCase():""})},r=Object.create(null),function(e){return r[e]||(r[e]=n(e))})},62974:function(e,t){"use strict";function n(e){e=Math.round(e).toString(16);return 1===e.length?"0"+e:e}Object.defineProperty(t,"__esModule",{value:!0}),t.arr2rgb=t.toHex=void 0,t.toHex=n,t.arr2rgb=function(e){return"#"+n(e[0])+n(e[1])+n(e[2])}},88179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradient=void 0;var r=n(97549),a=n(62974),o=n(27915);function s(e,t,n,r){return e[r]+(t[r]-e[r])*n}t.gradient=function(e){var i=("string"==typeof e?e.split("-"):e).map(function(e){return(0,r.rgb2arr)(-1===e.indexOf("#")?(0,o.toRGB)(e):e)});return function(e){return t=i,e=e,e=isNaN(Number(e))||e<0?0:1<e?1:Number(e),n=t.length-1,r=Math.floor(n*e),e=n*e-r,o=t[r],n=r===n?o:t[r+1],(0,a.arr2rgb)([s(o,n,e,0),s(o,n,e,1),s(o,n,e,2)]);var t,n,r,o}}},36045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCSSGradient=t.toRGB=t.gradient=t.rgb2arr=void 0;var r=n(97549),o=(Object.defineProperty(t,"rgb2arr",{enumerable:!0,get:function(){return r.rgb2arr}}),n(88179)),i=(Object.defineProperty(t,"gradient",{enumerable:!0,get:function(){return o.gradient}}),n(27915)),a=(Object.defineProperty(t,"toRGB",{enumerable:!0,get:function(){return i.toRGB}}),n(63398));Object.defineProperty(t,"toCSSGradient",{enumerable:!0,get:function(){return a.toCSSGradient}})},97549:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb2arr=void 0,t.rgb2arr=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}},63398:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCSSGradient=void 0;var a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u=/[\d.]+:(#[^\s]+|[^)]+\))/gi;t.toCSSGradient=function(e){var t,n,r,o,i;return/^[r,R,L,l]{1}[\s]*\(/.test(e)?(n=void 0,"l"===e[0]?(t=+(o=a.exec(e))[1]+90,n=o[2],r="linear-gradient("+t+"deg, "):"r"===e[0]&&(r="radial-gradient(",n=(o=s.exec(e))[4]),(i=n.match(u)).forEach(function(e,t){e=e.split(":");r+=e[1]+" "+100*Number(e[0])+"%",t!==i.length-1&&(r+=", ")}),r+=")"):e}},27915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRGB=void 0;var r,o=n(62974),i=/rgba?\(([\s.,0-9]+)\)/;t.toRGB=function(e){var t;return"#"===e[0]&&7===e.length?e:(r||((t=document.createElement("i")).title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),r=t),r.style.color=e,t=document.defaultView.getComputedStyle(r,"").getPropertyValue("color"),e=i.exec(t)[1].split(/\s*,\s*/).map(function(e){return Number(e)}),(0,o.arr2rgb)(e))}},24258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582);(0,r.__exportStar)(n(36045),t),(0,r.__exportStar)(n(25494),t),(0,r.__exportStar)(n(28775),t),(0,r.__exportStar)(n(92446),t),(0,r.__exportStar)(n(17600),t)},97217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(57022)),a=(0,r.__importDefault)(n(94827));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var o=e[r];(0,a.default)(o)&&(o=o.prototype),(0,i.default)(n.prototype,o)}}},29180:function(e,t){"use strict";function n(){this.map={}}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.has=function(e){return void 0!==this.map[e]},n.prototype.get=function(e,t){e=this.map[e];return void 0===e?t:e},n.prototype.set=function(e,t){this.map[e]=t},n.prototype.clear=function(){this.map={}},n.prototype.delete=function(e){delete this.map[e]},n.prototype.size=function(){return Object.keys(this.map).length},t.default=n},69186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return e<t?t:n<e?n:e}},88017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},61669:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=(0,n(97582).__importDefault)(n(42970));t.default=function e(t){if("object"!==a(t)||null===t)return t;if((0,s.default)(t))for(var n=[],r=0,o=t.length;r<o;r++)"object"===a(t[r])&&null!=t[r]?n[r]=e(t[r]):n[r]=t[r];else for(var i in n={},t)"object"===a(t[i])&&null!=t[i]?n[i]=e(t[i]):n[i]=t[i];return n}},78018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(347));t.default=function(e,t){return!!(0,r.default)(e)&&-1<e.indexOf(t)}},26939:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,o,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(e,t)},o),n&&r.apply(e,t)}}},56403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),a=(0,r.__importDefault)(n(42970)),s=(0,r.__importDefault)(n(33104));function u(e,t,n,r){for(var o in n=n||0,r=r||5,t){var i;!function(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}(t,o)||(null!==(i=t[o])&&(0,s.default)(i)?((0,s.default)(e[o])||(e[o]={}),n<r?u(e[o],i,n+1,r):e[o]=t[o]):(0,a.default)(i)?(e[o]=[],e[o]=e[o].concat(i)):void 0!==i&&(e[o]=i))}}t.default=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)u(e,t[r]);return e}},76705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(18227)),i=(0,r.__importDefault)(n(78018));t.default=function(e,t){return void 0===t&&(t=[]),(0,o.default)(e,function(e){return!(0,i.default)(t,e)})}},74748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(42970)),a=(0,r.__importDefault)(n(6422));t.default=function(e,t){if(e)if((0,i.default)(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if((0,a.default)(e))for(var o in e)if(e.hasOwnProperty(o)&&!1===t(e[o],o))break}},76033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(42970)),i=(0,r.__importDefault)(n(69565));t.default=function(e,t){return!(!(0,o.default)(e)&&!(0,i.default)(e))&&e[e.length-1]===t}},28390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),a=(0,r.__importDefault)(n(57022)),s=(0,r.__importDefault)(n(94827));t.default=function(e,t,n,r){(0,s.default)(t)||(n=t,t=e,e=function(){});var o=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;e=new n;return e.constructor=t,e},i=o(t.prototype,e);return e.prototype=(0,a.default)(i,e.prototype),e.superclass=o(t.prototype,t),(0,a.default)(i,n),(0,a.default)(e,r),e}},18227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(347));t.default=function(e,t){if(!(0,i.default)(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];t(o,r)&&n.push(o)}return n}},62483:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=n=void 0===n?0:n;r<e.length;r++)if(t(e[r],r))return r;return-1}},47540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(94827)),i=(0,r.__importDefault)(n(22225)),a=(0,r.__importDefault)(n(42970)),s=(0,r.__importDefault)(n(33104));t.default=function(e,t){var n;if((0,a.default)(e)&&((0,o.default)(t)&&(n=t),n=(0,s.default)(t)?function(e){return(0,i.default)(e,t)}:n))for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}},96106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(81937)),a=(0,r.__importDefault)(n(42970));t.default=function(e,t){for(var n=null,r=0;r<e.length;r++){var o=e[r][t];if(!(0,i.default)(o)){n=(0,a.default)(o)?o[0]:o;break}}return n}},93348:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var t=t.toString(),n=t.indexOf(".");return-1===n?Math.round(e):(20<(t=t.substr(n+1).length)&&(t=20),parseFloat(e.toFixed(t)))}},92559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(0,n(97582).__importDefault)(n(42970));t.default=function e(t,n){if(void 0===n&&(n=[]),(0,o.default)(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}},61037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(42970));t.default=function(e){if(!(0,r.default)(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},88177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=(0,n(97582).__importDefault)(n(74748));t.default=n.default},26533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(42970)),a=(0,r.__importDefault)(n(15409)),s=(0,r.__importDefault)(n(48291));t.default=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if((0,i.default)(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var o=(0,a.default)(t);return{min:(0,s.default)(t),max:o}}},35025:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={}.toString;t.default=function(e){return n.call(e).replace(/^\[object /,"").replace(/]$/,"")}},71931:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e["_wrap_"+t]}},47324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(69565));t.default=function(e,t,n){for(var r=0,o=(0,i.default)(t)?t.split("."):t;e&&r<o.length;)e=e[o[r++]];return void 0===e||r<o.length?n:e}},25979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),s=(0,r.__importDefault)(n(42970)),u=(0,r.__importDefault)(n(94827)),l=Object.prototype.hasOwnProperty;t.default=function(e,t){if(!t||!(0,s.default)(e))return{};for(var n={},r=(0,u.default)(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],a=r(i);l.call(n,a)?n[a].push(i):n[a]=[i]}return n}},69004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(42970)),a=(0,r.__importDefault)(n(94827)),s=(0,r.__importDefault)(n(25979));t.default=function(e,t){var o;return t?((0,a.default)(t)||(o=(0,i.default)(t)?t:t.replace(/\s+/g,"").split("*"),t=function(e){for(var t="_",n=0,r=o.length;n<r;n++)t+=e[o[n]]&&e[o[n]].toString();return t}),(0,s.default)(e,t)):{0:e}}},20138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(69004));t.default=function(e,t){if(!t)return[e];var n,r=(0,i.default)(e,t),o=[];for(n in r)o.push(r[n]);return o}},73759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=(0,n(97582).__importDefault)(n(48554));t.default=n.default},13982:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(78018)),i=(0,r.__importDefault)(n(6357));t.default=function(e,t){return(0,o.default)((0,i.default)(e),t)}},48554:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.hasOwnProperty(t)}},60349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(347));t.default=function(e){if((0,r.default)(e))return e[0]}},76888:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},55487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(347));t.default=function(e,t){if(!(0,i.default)(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,o=0;o<e.length;o++)if(e[o]===t){r=o;break}return r}},92446:function(N,e,t){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(e,"__esModule",{value:!0}),e.has=e.forIn=e.toRadian=e.toInteger=e.toDegree=e.mod=e.minBy=e.min=e.maxBy=e.max=e.isPositive=e.isOdd=e.isNumberEqual=e.isNegative=e.isInteger=e.isEven=e.isDecimal=e.fixedBase=e.clamp=e.parseRadius=e.number2color=e.wrapBehavior=e.getWrapBehavior=e.groupToMap=e.groupBy=e.group=e.some=e.every=e.filter=e.endsWith=e.startsWith=e.last=e.head=e.valuesOfKey=e.uniq=e.union=e.sortBy=e.remove=e.reduce=e.pullAt=e.pull=e.getRange=e.flattenDeep=e.flatten=e.firstValue=e.findIndex=e.find=e.difference=e.includes=e.contains=void 0,e.set=e.get=e.assign=e.mix=e.mapValues=e.map=e.isEqualWith=e.isEqual=e.isEmpty=e.indexOf=e.extend=e.each=e.deepMix=e.memoize=e.debounce=e.clone=e.augment=e.clearAnimationFrame=e.requestAnimationFrame=e.isElement=e.isUndefined=e.isType=e.isString=e.isRegExp=e.isPrototype=e.isPlainObject=e.isObjectLike=e.isObject=e.isNumber=e.isNull=e.isNil=e.isFinite=e.isFunction=e.isError=e.isDate=e.isBoolean=e.isArrayLike=e.isArray=e.isArguments=e.getType=e.upperFirst=e.upperCase=e.substitute=e.lowerFirst=e.lowerCase=e.values=e.isMatch=e.keys=e.hasValue=e.hasKey=void 0,e.Cache=e.size=e.identity=e.noop=e.uniqueId=e.toString=e.toArray=e.throttle=e.omit=e.pick=void 0,t(78018)),o=(Object.defineProperty(e,"contains",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(e,"includes",{enumerable:!0,get:function(){return n(r).default}}),t(76705)),i=(Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return n(o).default}}),t(47540)),a=(Object.defineProperty(e,"find",{enumerable:!0,get:function(){return n(i).default}}),t(62483)),s=(Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return n(a).default}}),t(96106)),u=(Object.defineProperty(e,"firstValue",{enumerable:!0,get:function(){return n(s).default}}),t(61037)),l=(Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return n(u).default}}),t(92559)),c=(Object.defineProperty(e,"flattenDeep",{enumerable:!0,get:function(){return n(l).default}}),t(26533)),f=(Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return n(c).default}}),t(35277)),h=(Object.defineProperty(e,"pull",{enumerable:!0,get:function(){return n(f).default}}),t(69226)),p=(Object.defineProperty(e,"pullAt",{enumerable:!0,get:function(){return n(h).default}}),t(98833)),d=(Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return n(p).default}}),t(64111)),y=(Object.defineProperty(e,"remove",{enumerable:!0,get:function(){return n(d).default}}),t(10528)),g=(Object.defineProperty(e,"sortBy",{enumerable:!0,get:function(){return n(y).default}}),t(84306)),v=(Object.defineProperty(e,"union",{enumerable:!0,get:function(){return n(g).default}}),t(55103)),m=(Object.defineProperty(e,"uniq",{enumerable:!0,get:function(){return n(v).default}}),t(84455)),b=(Object.defineProperty(e,"valuesOfKey",{enumerable:!0,get:function(){return n(m).default}}),t(60349)),w=(Object.defineProperty(e,"head",{enumerable:!0,get:function(){return n(b).default}}),t(44553)),_=(Object.defineProperty(e,"last",{enumerable:!0,get:function(){return n(w).default}}),t(58336)),x=(Object.defineProperty(e,"startsWith",{enumerable:!0,get:function(){return n(_).default}}),t(76033)),S=(Object.defineProperty(e,"endsWith",{enumerable:!0,get:function(){return n(x).default}}),t(18227)),O=(Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return n(S).default}}),t(28390)),P=(Object.defineProperty(e,"every",{enumerable:!0,get:function(){return n(O).default}}),t(50657)),E=(Object.defineProperty(e,"some",{enumerable:!0,get:function(){return n(P).default}}),t(20138)),k=(Object.defineProperty(e,"group",{enumerable:!0,get:function(){return n(E).default}}),t(25979)),M=(Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return n(k).default}}),t(69004)),j=(Object.defineProperty(e,"groupToMap",{enumerable:!0,get:function(){return n(M).default}}),t(71931)),C=(Object.defineProperty(e,"getWrapBehavior",{enumerable:!0,get:function(){return n(j).default}}),t(76532)),T=(Object.defineProperty(e,"wrapBehavior",{enumerable:!0,get:function(){return n(C).default}}),t(63389)),A=(Object.defineProperty(e,"number2color",{enumerable:!0,get:function(){return n(T).default}}),t(88397)),I=(Object.defineProperty(e,"parseRadius",{enumerable:!0,get:function(){return n(A).default}}),t(69186)),R=(Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return n(I).default}}),t(93348)),D=(Object.defineProperty(e,"fixedBase",{enumerable:!0,get:function(){return n(R).default}}),t(32325)),B=(Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return n(D).default}}),t(6289)),F=(Object.defineProperty(e,"isEven",{enumerable:!0,get:function(){return n(B).default}}),t(56671)),G=(Object.defineProperty(e,"isInteger",{enumerable:!0,get:function(){return n(F).default}}),t(5377)),z=(Object.defineProperty(e,"isNegative",{enumerable:!0,get:function(){return n(G).default}}),t(34426)),U=(Object.defineProperty(e,"isNumberEqual",{enumerable:!0,get:function(){return n(z).default}}),t(16941)),V=(Object.defineProperty(e,"isOdd",{enumerable:!0,get:function(){return n(U).default}}),t(37192)),W=(Object.defineProperty(e,"isPositive",{enumerable:!0,get:function(){return n(V).default}}),t(15409)),Y=(Object.defineProperty(e,"max",{enumerable:!0,get:function(){return n(W).default}}),t(85118)),H=(Object.defineProperty(e,"maxBy",{enumerable:!0,get:function(){return n(Y).default}}),t(48291)),X=(Object.defineProperty(e,"min",{enumerable:!0,get:function(){return n(H).default}}),t(68187)),q=(Object.defineProperty(e,"minBy",{enumerable:!0,get:function(){return n(X).default}}),t(38841)),J=(Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return n(q).default}}),t(41092)),Z=(Object.defineProperty(e,"toDegree",{enumerable:!0,get:function(){return n(J).default}}),t(61988)),K=(Object.defineProperty(e,"toInteger",{enumerable:!0,get:function(){return n(Z).default}}),t(63645)),Q=(Object.defineProperty(e,"toRadian",{enumerable:!0,get:function(){return n(K).default}}),t(88177)),$=(Object.defineProperty(e,"forIn",{enumerable:!0,get:function(){return n(Q).default}}),t(48554)),ee=(Object.defineProperty(e,"has",{enumerable:!0,get:function(){return n($).default}}),t(73759)),te=(Object.defineProperty(e,"hasKey",{enumerable:!0,get:function(){return n(ee).default}}),t(13982)),ne=(Object.defineProperty(e,"hasValue",{enumerable:!0,get:function(){return n(te).default}}),t(31421)),re=(Object.defineProperty(e,"keys",{enumerable:!0,get:function(){return n(ne).default}}),t(22225)),oe=(Object.defineProperty(e,"isMatch",{enumerable:!0,get:function(){return n(re).default}}),t(6357)),ie=(Object.defineProperty(e,"values",{enumerable:!0,get:function(){return n(oe).default}}),t(36579)),ae=(Object.defineProperty(e,"lowerCase",{enumerable:!0,get:function(){return n(ie).default}}),t(27030)),se=(Object.defineProperty(e,"lowerFirst",{enumerable:!0,get:function(){return n(ae).default}}),t(71633)),ue=(Object.defineProperty(e,"substitute",{enumerable:!0,get:function(){return n(se).default}}),t(16707)),le=(Object.defineProperty(e,"upperCase",{enumerable:!0,get:function(){return n(ue).default}}),t(82479)),ce=(Object.defineProperty(e,"upperFirst",{enumerable:!0,get:function(){return n(le).default}}),t(35025)),fe=(Object.defineProperty(e,"getType",{enumerable:!0,get:function(){return n(ce).default}}),t(77636)),he=(Object.defineProperty(e,"isArguments",{enumerable:!0,get:function(){return n(fe).default}}),t(42970)),pe=(Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return n(he).default}}),t(347)),de=(Object.defineProperty(e,"isArrayLike",{enumerable:!0,get:function(){return n(pe).default}}),t(26302)),ye=(Object.defineProperty(e,"isBoolean",{enumerable:!0,get:function(){return n(de).default}}),t(90718)),ge=(Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return n(ye).default}}),t(9619)),ve=(Object.defineProperty(e,"isError",{enumerable:!0,get:function(){return n(ge).default}}),t(94827)),me=(Object.defineProperty(e,"isFunction",{enumerable:!0,get:function(){return n(ve).default}}),t(778)),be=(Object.defineProperty(e,"isFinite",{enumerable:!0,get:function(){return n(me).default}}),t(81937)),we=(Object.defineProperty(e,"isNil",{enumerable:!0,get:function(){return n(be).default}}),t(17129)),_e=(Object.defineProperty(e,"isNull",{enumerable:!0,get:function(){return n(we).default}}),t(76985)),xe=(Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return n(_e).default}}),t(6422)),Se=(Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return n(xe).default}}),t(50190)),Oe=(Object.defineProperty(e,"isObjectLike",{enumerable:!0,get:function(){return n(Se).default}}),t(33104)),Pe=(Object.defineProperty(e,"isPlainObject",{enumerable:!0,get:function(){return n(Oe).default}}),t(51451)),Ee=(Object.defineProperty(e,"isPrototype",{enumerable:!0,get:function(){return n(Pe).default}}),t(64977)),ke=(Object.defineProperty(e,"isRegExp",{enumerable:!0,get:function(){return n(Ee).default}}),t(69565)),Me=(Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return n(ke).default}}),t(79201)),je=(Object.defineProperty(e,"isType",{enumerable:!0,get:function(){return n(Me).default}}),t(64987)),Ce=(Object.defineProperty(e,"isUndefined",{enumerable:!0,get:function(){return n(je).default}}),t(51184)),Te=(Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return n(Ce).default}}),t(68015)),Ae=(Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return n(Te).default}}),t(88017)),Ie=(Object.defineProperty(e,"clearAnimationFrame",{enumerable:!0,get:function(){return n(Ae).default}}),t(97217)),Re=(Object.defineProperty(e,"augment",{enumerable:!0,get:function(){return n(Ie).default}}),t(61669)),Le=(Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return n(Re).default}}),t(26939)),Ne=(Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return n(Le).default}}),t(91569)),De=(Object.defineProperty(e,"memoize",{enumerable:!0,get:function(){return n(Ne).default}}),t(56403)),Be=(Object.defineProperty(e,"deepMix",{enumerable:!0,get:function(){return n(De).default}}),t(74748)),Fe=(Object.defineProperty(e,"each",{enumerable:!0,get:function(){return n(Be).default}}),t(45)),Ge=(Object.defineProperty(e,"extend",{enumerable:!0,get:function(){return n(Fe).default}}),t(55487)),ze=(Object.defineProperty(e,"indexOf",{enumerable:!0,get:function(){return n(Ge).default}}),t(46573)),Ue=(Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return n(ze).default}}),t(37987)),Ve=(Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return n(Ue).default}}),t(93299)),We=(Object.defineProperty(e,"isEqualWith",{enumerable:!0,get:function(){return n(Ve).default}}),t(12030)),Ye=(Object.defineProperty(e,"map",{enumerable:!0,get:function(){return n(We).default}}),t(40169)),L=(Object.defineProperty(e,"mapValues",{enumerable:!0,get:function(){return n(Ye).default}}),t(57022)),He=(Object.defineProperty(e,"mix",{enumerable:!0,get:function(){return n(L).default}}),Object.defineProperty(e,"assign",{enumerable:!0,get:function(){return n(L).default}}),t(47324)),Xe=(Object.defineProperty(e,"get",{enumerable:!0,get:function(){return n(He).default}}),t(20897)),qe=(Object.defineProperty(e,"set",{enumerable:!0,get:function(){return n(Xe).default}}),t(59730)),Je=(Object.defineProperty(e,"pick",{enumerable:!0,get:function(){return n(qe).default}}),t(82945)),Ze=(Object.defineProperty(e,"omit",{enumerable:!0,get:function(){return n(Je).default}}),t(29637)),Ke=(Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return n(Ze).default}}),t(46780)),Qe=(Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return n(Ke).default}}),t(57230)),$e=(Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return n(Qe).default}}),t(34128)),et=(Object.defineProperty(e,"uniqueId",{enumerable:!0,get:function(){return n($e).default}}),t(64802)),tt=(Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return n(et).default}}),t(76888)),nt=(Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return n(tt).default}}),t(93580)),rt=(Object.defineProperty(e,"size",{enumerable:!0,get:function(){return n(nt).default}}),t(29180));Object.defineProperty(e,"Cache",{enumerable:!0,get:function(){return n(rt).default}})},77636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"Arguments")}},347:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},42970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return Array.isArray?Array.isArray(e):(0,r.default)(e,"Array")}},26302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"Boolean")}},90718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"Date")}},32325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&e%1!=0}},51184:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Element||e instanceof Document}},46573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(81937)),i=(0,r.__importDefault)(n(347)),a=(0,r.__importDefault)(n(35025)),s=(0,r.__importDefault)(n(51451)),u=Object.prototype.hasOwnProperty;t.default=function(e){if(!(0,o.default)(e)){if((0,i.default)(e))return!e.length;var t,n=(0,a.default)(e);if("Map"===n||"Set"===n)return!e.size;if((0,s.default)(e))return!Object.keys(e).length;for(t in e)if(u.call(e,t))return!1}return!0}},93299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(94827)),i=(0,r.__importDefault)(n(37987));t.default=function(e,t,n){return(0,o.default)(n)?!!n(e,t):(0,i.default)(e,t)}},37987:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),s=(0,r.__importDefault)(n(50190)),u=(0,r.__importDefault)(n(347)),l=(0,r.__importDefault)(n(69565));t.default=function e(t,n){if(t===n)return!0;if(t&&n&&!(0,l.default)(t)&&!(0,l.default)(n)){if((0,u.default)(t)||(0,u.default)(n)){if(t.length!==n.length)return!1;for(var r=!0,o=0;o<t.length&&(r=e(t[o],n[o]));o++);return r}if((0,s.default)(t)||(0,s.default)(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(r=!0,o=0;o<i.length&&(r=e(t[i[o]],n[i[o]]));o++);return r}}return!1}},9619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"Error")}},6289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&e%2==0}},778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&isFinite(e)}},94827:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"function"==typeof e}},56671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985)),n=Number.isInteger||function(e){return(0,r.default)(e)&&e%1==0};t.default=n},22225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),a=(0,r.__importDefault)(n(81937)),s=(0,r.__importDefault)(n(31421));t.default=function(e,t){var n=(0,s.default)(t),r=n.length;if((0,a.default)(e))return!r;for(var o=0;o<r;o+=1){var i=n[o];if(t[i]!==e[i]||!(i in e))return!1}return!0}},5377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&e<0}},81937:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null==e}},17129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null===e}},34426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}},76985:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"Number")}},50190:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"object"===n(e)&&null!==e}},6422:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n(e);return null!==e&&"object"===t||"function"===t}},16941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&e%2!=0}},33104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(50190)),i=(0,r.__importDefault)(n(79201));t.default=function(e){if(!(0,o.default)(e)||!(0,i.default)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},37192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(76985));t.default=function(e){return(0,r.default)(e)&&0<e}},51451:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},64977:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"RegExp")}},69565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(79201));t.default=function(e){return(0,r.default)(e,"String")}},79201:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={}.toString;t.default=function(e,t){return n.call(e)==="[object "+t+"]"}},64987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e}},31421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(74748)),i=(0,r.__importDefault)(n(94827)),r=Object.keys?function(e){return Object.keys(e)}:function(n){var r=[];return(0,o.default)(n,function(e,t){(0,i.default)(n)&&"prototype"===t||r.push(t)}),r};t.default=r},44553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(347));t.default=function(e){if((0,r.default)(e))return e[e.length-1]}},36579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(57230));t.default=function(e){return(0,r.default)(e).toLowerCase()}},27030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(57230));t.default=function(e){e=(0,r.default)(e);return e.charAt(0).toLowerCase()+e.substring(1)}},40169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e){return e}var r=n(97582),i=(0,r.__importDefault)(n(81937)),a=(0,r.__importDefault)(n(6422));t.default=function(t,n){void 0===n&&(n=o);var r={};return(0,a.default)(t)&&!(0,i.default)(t)&&Object.keys(t).forEach(function(e){r[e]=n(t[e],e)}),r}},12030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(347));t.default=function(e,t){if(!(0,i.default)(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(t(o,r))}return n}},85118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),s=(0,r.__importDefault)(n(42970)),u=(0,r.__importDefault)(n(94827));t.default=function(e,t){if((0,s.default)(e)){for(var n,r=-1/0,o=0;o<e.length;o++){var i=e[o],a=(0,u.default)(t)?t(i):i[t];r<a&&(n=i,r=a)}return n}}},15409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(42970));t.default=function(e){if((0,r.default)(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},91569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(94827));t.default=function(a,s){var e;if((0,r.default)(a))return(e=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,o=s?s.apply(this,t):t[0],i=e.cache;return i.has(o)?i.get(o):(r=a.apply(this,t),i.set(o,r),r)}).cache=new Map,e;throw new TypeError("Expected a function")}},68187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),s=(0,r.__importDefault)(n(42970)),u=(0,r.__importDefault)(n(94827));t.default=function(e,t){if((0,s.default)(e)){for(var n,r=1/0,o=0;o<e.length;o++){var i=e[o],a=(0,u.default)(t)?t(i):i[t];a<r&&(n=i,r=a)}return n}}},48291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(42970));t.default=function(e){if((0,r.default)(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},57022:function(e,t){"use strict";function o(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return t&&o(e,t),n&&o(e,n),r&&o(e,r),e}},38841:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(e%t+t)%t}},64802:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},63389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};t.default=function(e){var t=o[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;o[e]=t="#"+n}return t}},82945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(0,n(97582).__importDefault)(n(98833));t.default=function(e,r){return(0,o.default)(e,function(e,t,n){return r.includes(n)||(e[n]=t),e},{})}},88397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(42970));t.default=function(e){var t=0,n=0,r=0,o=0;return(0,i.default)(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,{r1:t,r2:n,r3:r,r4:o}}},59730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(74748)),i=(0,r.__importDefault)(n(33104)),a=Object.prototype.hasOwnProperty;t.default=function(t,e){var n;return null!==t&&(0,i.default)(t)?(n={},(0,o.default)(e,function(e){a.call(t,e)&&(n[e]=t[e])}),n):{}}},69226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(0,n(97582).__importDefault)(n(347)),a=Array.prototype.splice;t.default=function(e,t){if(!(0,i.default)(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];n!==r&&void 0===o||a.call(e,o,1)}return e}},35277:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Array.prototype,a=n.splice,s=n.indexOf;t.default=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var o,i=t[r];-1<(o=s.call(e,i));)a.call(e,o,1);return e}},98833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(74748)),i=(0,r.__importDefault)(n(42970)),a=(0,r.__importDefault)(n(33104));t.default=function(e,n,t){var r;return(0,i.default)(e)||(0,a.default)(e)?(r=t,(0,o.default)(e,function(e,t){r=n(r,e,t)}),r):e}},64111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),s=(0,r.__importDefault)(n(347)),u=(0,r.__importDefault)(n(69226));t.default=function(e,t){var n=[];if((0,s.default)(e)){for(var r=-1,o=[],i=e.length;++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}(0,u.default)(e,o)}return n}},68015:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},20897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(6422)),a=(0,r.__importDefault)(n(69565)),s=(0,r.__importDefault)(n(76985));t.default=function(e,t,n){var r=e,o=(0,a.default)(t)?t.split("."):t;return o.forEach(function(e,t){t<o.length-1?((0,i.default)(r[e])||(r[e]=(0,s.default)(o[t+1])?[]:{}),r=r[e]):r[e]=n}),e}},93580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(81937)),i=(0,r.__importDefault)(n(347));t.default=function(e){return(0,o.default)(e)?0:((0,i.default)(e)?e:Object.keys(e)).length}},50657:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}},10528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),i=(0,r.__importDefault)(n(42970)),a=(0,r.__importDefault)(n(69565)),s=(0,r.__importDefault)(n(94827));t.default=function(e,n){var o,t=(0,s.default)(n)?function(e,t){return n(e)-n(t)}:(o=[],(0,a.default)(n)?o.push(n):(0,i.default)(n)&&(o=n),function(e,t){for(var n=0;n<o.length;n+=1){var r=o[n];if(e[r]>t[r])return 1;if(e[r]<t[r])return-1}return 0});return e.sort(t),e}},58336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(42970)),i=(0,r.__importDefault)(n(69565));t.default=function(e,t){return!(!(0,o.default)(e)&&!(0,i.default)(e))&&e[0]===t}},71633:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(e,t){return"\\"===e.charAt(0)?e.slice(1):void 0===n[t]?"":n[t]}):e}},29637:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,r,o){function i(){c=!1===o.leading?0:Date.now(),a=null,l=n.apply(s,u),a||(s=u=null)}function e(){var e=Date.now(),t=(c||!1!==o.leading||(c=e),r-(e-c));return s=this,u=arguments,t<=0||r<t?(a&&(clearTimeout(a),a=null),c=e,l=n.apply(s,u),a||(s=u=null)):a||!1===o.trailing||(a=setTimeout(i,t)),l}var a,s,u,l,c=0;o=o||{};return e.cancel=function(){clearTimeout(a),c=0,a=s=u=null},e}},46780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(347));t.default=function(e){return(0,r.default)(e)?Array.prototype.slice.call(e):[]}},41092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=180/Math.PI;t.default=function(e){return n*e}},61988:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=parseInt},63645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.PI/180;t.default=function(e){return n*e}},57230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(81937));t.default=function(e){return(0,r.default)(e)?"":e.toString()}},84306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(55103));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.default)([].concat.apply([],e))}},55103:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];t.has(i)||(n.push(i),t.set(i,!0))}return n}},34128:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=function(e){return n[e=e||"g"]?n[e]+=1:n[e]=1,e+n[e]}},16707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(57230));t.default=function(e){return(0,r.default)(e).toUpperCase()}},82479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(97582).__importDefault)(n(57230));t.default=function(e){e=(0,r.default)(e);return e.charAt(0).toUpperCase()+e.substring(1)}},84455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),u=(0,r.__importDefault)(n(42970)),l=(0,r.__importDefault)(n(81937));t.default=function(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o][t];if(!(0,l.default)(i)){(0,u.default)(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];r[s]||(n.push(s),r[s]=!0)}}}return n}},6357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=(0,r.__importDefault)(n(74748)),i=(0,r.__importDefault)(n(94827)),r=Object.values?function(e){return Object.values(e)}:function(n){var r=[];return(0,o.default)(n,function(e,t){(0,i.default)(n)&&"prototype"===t||r.push(e)}),r};t.default=r},76532:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n){return t["_wrap_"+n]||(t["_wrap_"+n]=function(e){t[n](e)})}},17600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPolygonsIntersect=t.isPointInPolygon=void 0;var r=n(49442),o=(Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return r.isPointInPolygon}}),n(55542));Object.defineProperty(t,"isPolygonsIntersect",{enumerable:!0,get:function(){return o.isPolygonsIntersect}})},49442:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInPolygon=void 0;function f(e){return Math.abs(e)<1e-6?0:e<0?-1:1}t.isPointInPolygon=function(e,t,n){var r=!1,o=e.length;if(o<=2)return!1;for(var i,a,s,u=0;u<o;u++){var l=e[u],c=e[(u+1)%o];if(a=c,((s=[t,n])[0]-(i=l)[0])*(a[1]-i[1])==(a[0]-i[0])*(s[1]-i[1])&&Math.min(i[0],a[0])<=s[0]&&s[0]<=Math.max(i[0],a[0])&&Math.min(i[1],a[1])<=s[1]&&s[1]<=Math.max(i[1],a[1]))return!0;0<f(l[1]-n)!=0<f(c[1]-n)&&f(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}},55542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPolygonsIntersect=void 0;function f(e,t,n){return t<=e&&e<=n}var s=n(49442);function u(e){for(var t,n,r=[],o=e.length,i=0;i<o-1;i++){var a=e[i],s=e[i+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(t=e[0],n=e[o-1],r.push({from:{x:n[0],y:n[1]},to:{x:t[0],y:t[1]}})),r}function l(e,l){var c=!1;return e.forEach(function(e){if(t=e.from,e=e.to,n=l.from,r=l.to,o=n.x-t.x,i=n.y-t.y,a=e.x-t.x,e=e.y-t.y,s=r.x-n.x,r=r.y-n.y,u=null,u=.001*(a*a+e*e)*(s*s+r*r)<(n=a*r-e*s)*n&&f(r=(o*r-i*s)/n,0,1)&&f((o*e-i*a)/n,0,1)?{x:t.x+r*a,y:t.y+r*e}:u)return!(c=!0);var t,n,r,o,i,a,s,u}),c}function c(e){var t=e.map(function(e){return e[0]}),e=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}t.isPolygonsIntersect=function(t,n){var e,r,o,i,a;return!(t.length<2||n.length<2||(e=c(t),(r=c(n)).minX>e.maxX)||r.maxX<e.minX||r.minY>e.maxY||r.maxY<e.minY)&&(o=!1,n.forEach(function(e){if((0,s.isPointInPolygon)(t,e[0],e[1]))return!(o=!0)}),!!o||(t.forEach(function(e){if((0,s.isPointInPolygon)(n,e[0],e[1]))return!(o=!0)}),!!o)||(i=u(t),a=!1,u(n).forEach(function(e){if(l(i,e))return!(a=!0)}),a))}},25494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertical=t.angleTo=t.direction=t.transform=void 0;var d=n(27018);function o(e,t){return e[0]*t[1]-t[0]*e[1]}t.transform=function(e,t){for(var n,r,o,i,a,s,u,l,c=e?[].concat(e):[1,0,0,0,1,0,0,0,1],f=0,h=t.length;f<h;f++){var p=t[f];switch(p[0]){case"t":l=s=c,a=[p[1],p[2]],d.mat3.fromTranslation(u=[0,0,0,0,0,0,0,0,0],a),d.mat3.multiply(s,u,l);break;case"s":s=a=c,u=[p[1],p[2]],l=[0,0,0,0,0,0,0,0,0],d.mat3.fromScaling(l,u),d.mat3.multiply(a,l,s);break;case"r":r=n=c,o=p[1],i=[0,0,0,0,0,0,0,0,0],d.mat3.fromRotation(i,o),d.mat3.multiply(n,i,r);break;case"m":o=p[1],d.mat3.multiply(c,o,c)}}return c},t.direction=o,t.angleTo=function(e,t,n){var r=d.vec2.angle(e,t),e=0<=o(e,t);return n?e?2*Math.PI-r:r:e?r:2*Math.PI-r},t.vertical=function(e,t,n){return n?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},67169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2Absolute=void 0;var r=n(77507),o=n(15582);t.path2Absolute=function(e){var a,s,u,l;return(0,r.isAbsoluteArray)(e)?[].concat(e):(l=u=s=a=0,o.parsePathString)(e).map(function(e){var t=e.slice(1).map(Number),e=e[0],n=e.toUpperCase();if("M"===e)return a=t[0],s=t[1],["M",u=a,l=s];if(e!==n)switch(n){case"A":o=[n,t[0],t[1],t[2],t[3],t[4],t[5]+a,t[6]+s];break;case"V":o=[n,t[0]+s];break;case"H":o=[n,t[0]+a];break;default:var r=t.map(function(e,t){return e+(t%2?s:a)}),o=[n].concat(r)}else o=[n].concat(t);var i=o.length;switch(n){case"Z":a=u,s=l;break;case"H":a=o[1];break;case"V":s=o[1];break;default:a=o[i-2],s=o[i-1],"M"===n&&(u=a,l=s)}return o})}},45708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2Curve=void 0;var h=n(97582),p=n(52338),d=n(37724),y=n(93249),g=n(25036),v=n(2407);t.path2Curve=function(e,t){var n;if(void 0===t&&(t=!1),(0,g.isCurveArray)(e))return n=[].concat(e),t?[n,[]]:n;for(var r,o=(0,y.normalizePath)(e),i=(0,h.__assign)({},p.paramsParser),a=[],s="",u=o.length,l=[],c=0;c<u;c+=1){o[c]&&(s=o[c][0]),a[c]=s;var f=(0,v.segmentToCubic)(o[c],i);o[c]=f,(0,d.fixArc)(o,a,c),u=o.length,"Z"===s&&l.push(c),r=(f=o[c]).length,i.x1=+f[r-2],i.y1=+f[r-1],i.x2=+f[r-4]||i.x1,i.y2=+f[r-3]||i.y1}return t?[o,l]:o}},59138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2String=void 0;var r=n(19492);t.path2String=function(e,t){return(0,r.roundPath)(e,t=void 0===t?"off":t).map(function(e){return e[0]+e.slice(1).join(" ")}).join("")}},28775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalizeSegments=t.distanceSquareRoot=t.isPointInStroke=t.getPointAtLength=t.getDrawDirection=t.getPathArea=t.getRotatedCurve=t.getPathBBoxTotalLength=t.getTotalLength=t.getPathBBox=t.arcToCubic=t.reverseCurve=t.normalizePath=t.clonePath=t.path2Absolute=t.path2Curve=t.path2String=void 0;var r=n(97582),o=n(59138),i=(Object.defineProperty(t,"path2String",{enumerable:!0,get:function(){return o.path2String}}),n(45708)),a=(Object.defineProperty(t,"path2Curve",{enumerable:!0,get:function(){return i.path2Curve}}),n(67169)),s=(Object.defineProperty(t,"path2Absolute",{enumerable:!0,get:function(){return a.path2Absolute}}),n(68248)),u=(Object.defineProperty(t,"clonePath",{enumerable:!0,get:function(){return s.clonePath}}),n(93249)),l=(Object.defineProperty(t,"normalizePath",{enumerable:!0,get:function(){return u.normalizePath}}),n(28453)),c=(Object.defineProperty(t,"reverseCurve",{enumerable:!0,get:function(){return l.reverseCurve}}),n(94122)),f=(Object.defineProperty(t,"arcToCubic",{enumerable:!0,get:function(){return c.arcToCubic}}),n(28447)),h=(Object.defineProperty(t,"getPathBBox",{enumerable:!0,get:function(){return f.getPathBBox}}),n(34329)),p=(Object.defineProperty(t,"getTotalLength",{enumerable:!0,get:function(){return h.getTotalLength}}),n(59141)),d=(Object.defineProperty(t,"getPathBBoxTotalLength",{enumerable:!0,get:function(){return p.getPathBBoxTotalLength}}),n(10009)),y=(Object.defineProperty(t,"getRotatedCurve",{enumerable:!0,get:function(){return d.getRotatedCurve}}),n(86114)),g=(Object.defineProperty(t,"getPathArea",{enumerable:!0,get:function(){return y.getPathArea}}),n(97242)),v=(Object.defineProperty(t,"getDrawDirection",{enumerable:!0,get:function(){return g.getDrawDirection}}),n(81830)),m=(Object.defineProperty(t,"getPointAtLength",{enumerable:!0,get:function(){return v.getPointAtLength}}),n(59104)),b=(Object.defineProperty(t,"isPointInStroke",{enumerable:!0,get:function(){return m.isPointInStroke}}),n(94725)),w=(Object.defineProperty(t,"distanceSquareRoot",{enumerable:!0,get:function(){return b.distanceSquareRoot}}),n(67803));Object.defineProperty(t,"equalizeSegments",{enumerable:!0,get:function(){return w.equalizeSegments}}),(0,r.__exportStar)(n(39921),t)},97052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeSegment=void 0;var o=n(76899);t.finalizeSegment=function(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=o.paramsCount[n]&&("m"===n&&2<r.length?(e.segments.push([t].concat(r.splice(0,2))),n="l",t="m"===t?"l":"L"):e.segments.push([t].concat(r.splice(0,o.paramsCount[n]))),o.paramsCount[n]););}},3766:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArcCommand=void 0,t.isArcCommand=function(e){return 97==(32|e)}},54211:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=t.isDigitStart=void 0,t.isDigitStart=function(e){return 48<=e&&e<=57||43===e||45===e||46===e},t.isDigit=function(e){return 48<=e&&e<=57}},72737:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPathCommand=void 0,t.isPathCommand=function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}},39372:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpace=void 0,t.isSpace=function(e){return 10===e||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}},76899:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsCount=void 0,t.paramsCount={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0}},52338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsParser=void 0,t.paramsParser={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null}},15582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePathString=void 0;var r=n(47710),o=n(89273),i=n(9363),a=n(7400);t.parsePathString=function(e){if((0,r.isPathArray)(e))return[].concat(e);var t=new a.PathParser(e);for((0,i.skipSpaces)(t);t.index<t.max&&!t.err.length;)(0,o.scanSegment)(t);return t.err||t.segments}},7400:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathParser=void 0,t.PathParser=function(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}},95338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanFlag=void 0,t.scanFlag=function(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);return 48===r?(e.param=0,void(e.index+=1)):49===r?(e.param=1,void(e.index+=1)):void(e.err='[path-util]: invalid Arc flag "'+n[t]+'", expecting 0 or 1 at index '+t)}},22357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanParam=void 0;var c=n(54211);t.scanParam=function(e){var t,n,r=e.max,o=e.pathValue,i=e.index,a=i,s=!1,u=!1,l=!1;if(r<=a)e.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';else if(43!==(t=o.charCodeAt(a))&&45!==t||(t=o.charCodeAt(a+=1)),(0,c.isDigit)(t)||46===t){if(46!==t){if(n=48===t,t=o.charCodeAt(a+=1),n&&a<r&&t&&(0,c.isDigit)(t))return void(e.err="[path-util]: Invalid path value at index "+i+', "'+o[i]+'" illegal number');for(;a<r&&(0,c.isDigit)(o.charCodeAt(a));)a+=1,s=!0;t=o.charCodeAt(a)}if(46===t){for(l=!0,a+=1;(0,c.isDigit)(o.charCodeAt(a));)a+=1,u=!0;t=o.charCodeAt(a)}if(101===t||69===t){if(l&&!s&&!u)return void(e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid float exponent');if(43!==(t=o.charCodeAt(a+=1))&&45!==t||(a+=1),!(a<r&&(0,c.isDigit)(o.charCodeAt(a))))return void(e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid integer exponent');for(;a<r&&(0,c.isDigit)(o.charCodeAt(a));)a+=1}e.index=a,e.param=+e.pathValue.slice(i,a)}else e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" is not a number'}},89273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanSegment=void 0;var s=n(97052),u=n(76899),l=n(95338),c=n(22357),f=n(9363),h=n(72737),p=n(54211),d=n(3766);t.scanSegment=function(e){var t=e.max,n=e.pathValue,r=e.index,o=n.charCodeAt(r),i=u.paramsCount[n[r].toLowerCase()];if(e.segmentStart=r,(0,h.isPathCommand)(o)){if(e.index+=1,(0,f.skipSpaces)(e),e.data=[],i)for(;;){for(var a=i;0<a;--a){if((!(0,d.isArcCommand)(o)||3!==a&&4!==a?(0,c.scanParam):(0,l.scanFlag))(e),e.err.length)return;e.data.push(e.param),(0,f.skipSpaces)(e),e.index<t&&44===n.charCodeAt(e.index)&&(e.index+=1,(0,f.skipSpaces)(e))}if(e.index>=e.max)break;if(!(0,p.isDigitStart)(n.charCodeAt(e.index)))break}(0,s.finalizeSegment)(e)}else e.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command'}},9363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipSpaces=void 0;var r=n(39372);t.skipSpaces=function(e){for(var t=e.pathValue,n=e.max;e.index<n&&(0,r.isSpace)(t.charCodeAt(e.index));)e.index+=1}},94122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arcToCubic=void 0;var P=n(75474);t.arcToCubic=function e(t,n,r,o,i,a,s,u,l,c){var f=120*Math.PI/180,h=Math.PI/180*(+i||0),p=[],d=(c?(w=c[0],_=c[1],m=c[2],b=c[3]):(t=(g=(0,P.rotateVector)(t,n,-h)).x,n=g.y,1<(d=(y=(t-(u=(g=(0,P.rotateVector)(u,l,-h)).x))/2)*y/(r*r)+(g=(n-(l=g.y))/2)*g/(o*o))&&(r*=d=Math.sqrt(d),o*=d),d=r*r,v=o*o,m=(a=(a===s?-1:1)*Math.sqrt(Math.abs((d*v-d*g*g-v*y*y)/(d*g*g+v*y*y))))*r*g/o+(t+u)/2,b=a*-o*y/r+(n+l)/2,w=Math.asin(((n-b)/o*Math.pow(10,9)>>0)/Math.pow(10,9)),_=Math.asin(((l-b)/o*Math.pow(10,9)>>0)/Math.pow(10,9)),w=t<m?Math.PI-w:w,_=u<m?Math.PI-_:_,w<0&&(w=2*Math.PI+w),_<0&&(_=2*Math.PI+_),s&&_<w&&(w-=2*Math.PI),!s&&w<_&&(_-=2*Math.PI)),_-w),y=(Math.abs(d)>f&&(v=_,g=u,a=l,_=w+f*(s&&w<_?1:-1),p=e(u=m+r*Math.cos(_),l=b+o*Math.sin(_),r,o,i,0,s,g,a,[_,v,m,b])),d=_-w,Math.cos(w)),f=Math.sin(w),i=Math.cos(_),s=Math.sin(_),g=Math.tan(d/4),a=4/3*r*g,v=4/3*o*g,m=[t,n],b=[t+a*f,n-v*y],w=[u+a*s,l-v*i],_=[u,l];if(b[0]=2*m[0]-b[0],b[1]=2*m[1]-b[1],c)return b.concat(w,_,p);for(var x=[],S=0,O=(p=b.concat(w,_,p)).length;S<O;S+=1)x[S]=S%2?(0,P.rotateVector)(p[S-1],p[S],h).y:(0,P.rotateVector)(p[S],p[S+1],h).x;return x}},68248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clonePath=void 0,t.clonePath=function(e){return e.map(function(e){return Array.isArray(e)?[].concat(e):e})}},37724:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixArc=void 0,t.fixArc=function(e,t,n){if(7<e[n].length){e[n].shift();for(var r=e[n],o=n;r.length;)t[n]="A",e.splice(o+=1,0,["C"].concat(r.splice(0,6)));e.splice(n,1)}}},69813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineToCubic=void 0;var o=n(97582),i=n(47321);t.lineToCubic=function(e,t,n,r){e=(0,i.midPoint)([e,t],[n,r],.5);return(0,o.__spreadArray)((0,o.__spreadArray)([],e,!0),[n,r,n,r],!1)}},93249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=void 0;var a=n(97582),s=n(3501),u=n(52338),l=n(67169),c=n(87473);t.normalizePath=function(e){if((0,s.isNormalizedArray)(e))return[].concat(e);for(var t=(0,l.path2Absolute)(e),n=(0,a.__assign)({},u.paramsParser),r=0;r<t.length;r+=1){t[r]=(0,c.normalizeSegment)(t[r],n);var o=t[r],i=o.length;n.x1=+o[i-2],n.y1=+o[i-1],n.x2=+o[i-4]||n.x1,n.y2=+o[i-3]||n.y1}return t}},87473:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSegment=void 0,t.normalizeSegment=function(e,t){var n=e[0],r=t.x1,o=t.y1,i=t.x2,a=t.y2,s=e.slice(1).map(Number),u=e;return"TQ".includes(n)||(t.qx=null,t.qy=null),"H"===n?u=["L",e[1],o]:"V"===n?u=["L",r,e[1]]:"S"===n?(e=2*o-a,u=["C",t.x1=2*r-i,t.y1=e].concat(s)):"T"===n?(a=2*r-t.qx,i=2*o-t.qy,u=["Q",t.qx=a,t.qy=i].concat(s)):"Q"===n&&(e=s[0],r=s[1],t.qx=e,t.qy=r),u}},83017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadToCubic=void 0,t.quadToCubic=function(e,t,n,r,o,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*o+2/3*n,1/3*i+2/3*r,o,i]}},28453:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reverseCurve=void 0,t.reverseCurve=function(r){var e=r.slice(1).map(function(e,t,n){return(t?n[t-1].slice(-2):r[0].slice(1)).concat(e.slice(1))}).map(function(n){return n.map(function(e,t){return n[n.length-t-2*(1-t%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(e){return["C"].concat(e.slice(2))}))}},19492:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.roundPath=void 0,t.roundPath=function(e,n){var r;return"off"===n?[].concat(e):(r="number"==typeof n&&1<=n?Math.pow(10,n):1,e.map(function(e){var t=e.slice(1).map(Number).map(function(e){return n?Math.round(e*r)/r:Math.round(e)});return[e[0]].concat(t)}))}},2407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentToCubic=void 0;var f=n(94122),h=n(83017),p=n(69813);t.segmentToCubic=function(e,t){var n,r=e[0],o=e.slice(1).map(Number),i=o[0],a=o[1],s=t.x1,u=t.y1,l=t.x,c=t.y;switch("TQ".includes(r)||(t.qx=null,t.qy=null),r){case"M":return t.x=i,t.y=a,e;case"A":return n=[s,u].concat(o),["C"].concat((0,f.arcToCubic)(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return t.qx=i,t.qy=a,n=[s,u].concat(o),["C"].concat((0,h.quadToCubic)(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat((0,p.lineToCubic)(s,u,i,a));case"Z":return s===l&&u===c?["C",s,u,l,c,l,c]:["C"].concat((0,p.lineToCubic)(s,u,l,c))}return e}},39921:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},94725:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distanceSquareRoot=void 0,t.distanceSquareRoot=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},67803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalizeSegments=void 0;var u=n(47321),l=n(41159);function h(e){return e.map(function(e,t,n){var r,o,i,a,n=t&&n[t-1].slice(-2).concat(e.slice(1)),s=t?(0,l.segmentCubicFactory)(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],{bbox:!1}).length:0;return{s:e,ss:t?s?(void 0===r&&(r=.5),n=(t=n).slice(0,2),o=t.slice(2,4),i=t.slice(4,6),t=t.slice(6,8),n=(0,u.midPoint)(n,o,r),o=(0,u.midPoint)(o,i,r),i=(0,u.midPoint)(i,t,r),a=(0,u.midPoint)(n,o,r),o=(0,u.midPoint)(o,i,r),r=(0,u.midPoint)(a,o,r),[["C"].concat(n,a,r),["C"].concat(o,i,t)]):[e,e]:[e],l:s}})}t.equalizeSegments=function e(t,n,r){var o,t=h(t),n=h(n),i=t.length,a=n.length,s=t.filter(function(e){return e.l}).length,u=n.filter(function(e){return e.l}).length,s=t.filter(function(e){return e.l}).reduce(function(e,t){return e+t.l},0)/s||0,u=n.filter(function(e){return e.l}).reduce(function(e,t){return e+t.l},0)/u||0,l=r||Math.max(i,a),c=[s,u],f=[l-i,l-a],r=[t,n].map(function(e,n){return e.l===l?e.map(function(e){return e.s}):e.map(function(e,t){return o=t&&f[n]&&e.l>=c[n],f[n]-=o?1:0,o?e.ss:[e.s]}).flat()});return r[0].length===r[1].length?r:e(r[0],r[1],l)}},97242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDrawDirection=void 0;var r=n(86114);t.getDrawDirection=function(e){return 0<=(0,r.getPathArea)(e)}},86114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathArea=void 0;var r=n(45708);t.getPathArea=function(e){var s,u=0,l=0;return(0,r.path2Curve)(e).map(function(e){var t,n,r,o,i,a;return"M"===e[0]?(u=e[1],l=e[2],0):(a=e.slice(1),t=a[0],n=a[1],r=a[2],o=a[3],i=a[4],a=a[5],s=3*((a-l)*(t+r)-(i-u)*(n+o)+n*(u-r)-t*(l-o)+a*(r+u/3)-i*(o+l/3))/20,n=e.slice(-2),u=n[0],l=n[1],s)}).reduce(function(e,t){return e+t},0)}},59141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathBBoxTotalLength=void 0;var a=n(97582),s=n(12983);t.getPathBBoxTotalLength=function(e,t){var n,r,o,i;return e?(t=(e=(0,s.pathLengthFactory)(e,void 0,(0,a.__assign)((0,a.__assign)({},t),{bbox:!0,length:!0}))).length,n=(r=e.min).x,r=r.y,{length:t,width:o=(e=(t=e.max).x)-n,height:i=(t=t.y)-r,x:n,y:r,x2:e,y2:t,cx:n+o/2,cy:r+i/2,cz:Math.max(o,i)+Math.min(o,i)/2}):{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0}}},28447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathBBox=void 0;var a=n(97582),s=n(12983);t.getPathBBox=function(e,t){var n,r,o,i;return e?(n=(t=(e=(0,s.pathLengthFactory)(e,void 0,(0,a.__assign)((0,a.__assign)({},t),{length:!1}))).min).x,t=t.y,{width:o=(r=(e=e.max).x)-n,height:i=(e=e.y)-t,x:n,y:t,x2:r,y2:e,cx:n+o/2,cy:t+i/2,cz:Math.max(o,i)+Math.min(o,i)/2}):{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0}}},81830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPointAtLength=void 0;var r=n(97582),o=n(12983);t.getPointAtLength=function(e,t,n){return(0,o.pathLengthFactory)(e,t,(0,r.__assign)((0,r.__assign)({},n),{bbox:!1,length:!0})).point}},52481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertiesAtLength=void 0;var c=n(15582),f=n(34329);t.getPropertiesAtLength=function(e,t){e=(0,c.parsePathString)(e);if("string"==typeof e)throw TypeError(e);var n=e.slice(),r=(0,f.getTotalLength)(n),o=n.length-1,i=0,a=0,s=e[0],u=s.slice(-2),u={x:u[0],y:u[1]};if(o<=0||!t||!Number.isFinite(t))return{segment:s,index:0,length:a,point:u,lengthAtSegment:i};if(r<=t)return n=e.slice(0,-1),a=r-(i=(0,f.getTotalLength)(n)),{segment:e[o],index:o,length:a,lengthAtSegment:i};for(var l=[];0<o;)s=n[o],n=n.slice(0,-1),a=r-(i=(0,f.getTotalLength)(n)),r=i,l.push({segment:s,index:o,length:a,lengthAtSegment:i}),--o;return l.find(function(e){return e.lengthAtSegment<=t})}},64546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertiesAtPoint=void 0;var m=n(15582),b=n(93249),w=n(81830),_=n(52481),x=n(34329);t.getPropertiesAtPoint=function(e,n){for(var t,r,o,i,a,e=(0,m.parsePathString)(e),s=(0,b.normalizePath)(e),u=(0,x.getTotalLength)(e),l=function(e){var t=e.x-n.x,e=e.y-n.y;return t*t+e*e},c=8,f=0,h=1/0,p=0;p<=u;p+=c)(a=l(t=(0,w.getPointAtLength)(s,p)))<h&&(r=t,f=p,h=a);c/=2;for(var d,y,g,v;.5<c;)g=l(o=(0,w.getPointAtLength)(s,d=f-c)),v=l(i=(0,w.getPointAtLength)(s,y=f+c)),0<=d&&g<h?(r=o,f=d,h=g):y<=u&&v<h?(r=i,f=y,h=v):c/=2;e=(0,_.getPropertiesAtLength)(e,f);return{closest:r,distance:Math.sqrt(h),segment:e}}},10009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRotatedCurve=void 0;var c=n(94725);t.getRotatedCurve=function(r,o){var i,a,s,u=r.length-1,t=[],l=0,e=(a=(i=r).length,s=a-1,i.map(function(e,r){return i.map(function(e,t){var n=r+t;return 0===t||i[n]&&"M"===i[n][0]?(t=i[n],["M"].concat(t.slice(-2))):(a<=n&&(n-=s),i[n])})}));return e.forEach(function(e,n){r.slice(1).forEach(function(e,t){l+=(0,c.distanceSquareRoot)(r[(n+t)%u].slice(-2),o[t%u].slice(-2))}),t[n]=l,l=0}),e[t.indexOf(Math.min.apply(null,t))]}},34329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalLength=void 0;var r=n(97582),o=n(12983);t.getTotalLength=function(e,t){return(0,o.pathLengthFactory)(e,void 0,(0,r.__assign)((0,r.__assign)({},t),{bbox:!1,length:!0})).length}},77507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAbsoluteArray=void 0;var r=n(47710);t.isAbsoluteArray=function(e){return(0,r.isPathArray)(e)&&e.every(function(e){e=e[0];return e===e.toUpperCase()})}},25036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCurveArray=void 0;var r=n(3501);t.isCurveArray=function(e){return(0,r.isNormalizedArray)(e)&&e.every(function(e){e=e[0];return"MC".includes(e)})}},3501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNormalizedArray=void 0;var r=n(77507);t.isNormalizedArray=function(e){return(0,r.isAbsoluteArray)(e)&&e.every(function(e){e=e[0];return"ACLMQZ".includes(e)})}},47710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPathArray=void 0;var r=n(76899);t.isPathArray=function(e){return Array.isArray(e)&&e.every(function(e){var t=e[0].toLowerCase();return r.paramsCount[t]===e.length-1&&"achlmqstvz".includes(t)})}},59104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInStroke=void 0;var r=n(64546);t.isPointInStroke=function(e,t){e=(0,r.getPropertiesAtPoint)(e,t).distance;return Math.abs(e)<.001}},47321:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.midPoint=void 0,t.midPoint=function(e,t,n){var r=e[0],e=e[1];return[r+(t[0]-r)*n,e+(t[1]-e)*n]}},12983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathLengthFactory=void 0;var S=n(93249),O=n(26864),P=n(79807),E=n(41159),k=n(65930);t.pathLengthFactory=function(e,t,n){for(var r,o,i,a=(0,S.normalizePath)(e),s="number"==typeof t,u=[],l=0,c=0,f=0,h=0,p=[],d=[],y=0,g={x:0,y:0},v=g,m=g,b=g,w=0,_=0,x=a.length;_<x;_+=1)u=(r="M"===(o=(i=a[_])[0]))?u:[l,c].concat(i.slice(1)),r?(v=g={x:f=i[1],y:h=i[2]},y=0,s&&t<.001&&(b=g)):"L"===o?(y=(r=(0,O.segmentLineFactory)(u[0],u[1],u[2],u[3],(t||0)-w)).length,g=r.min,v=r.max,m=r.point):"A"===o?(y=(r=(0,P.segmentArcFactory)(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],(t||0)-w,n||{})).length,g=r.min,v=r.max,m=r.point):"C"===o?(y=(r=(0,E.segmentCubicFactory)(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],(t||0)-w,n||{})).length,g=r.min,v=r.max,m=r.point):"Q"===o?(y=(r=(0,k.segmentQuadFactory)(u[0],u[1],u[2],u[3],u[4],u[5],(t||0)-w,n||{})).length,g=r.min,v=r.max,m=r.point):"Z"===o&&(y=(r=(0,O.segmentLineFactory)((u=[l,c,f,h])[0],u[1],u[2],u[3],(t||0)-w)).length,g=r.min,v=r.max,m=r.point),s&&w<t&&t<=w+y&&(b=m),d.push(v),p.push(g),w+=y,l=(r="Z"!==o?i.slice(-2):[f,h])[0],c=r[1];return{length:w,point:b=s&&w<=t?{x:l,y:c}:b,min:{x:Math.min.apply(null,p.map(function(e){return e.x})),y:Math.min.apply(null,p.map(function(e){return e.y}))},max:{x:Math.max.apply(null,d.map(function(e){return e.x})),y:Math.max.apply(null,d.map(function(e){return e.y}))}}}},75474:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateVector=void 0,t.rotateVector=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}},79807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentArcFactory=void 0;var G=n(26864),z=n(94725);function U(e,t){var n=e.x,e=e.y,r=t.x,t=t.y,o=n*r+e*t,i=Math.sqrt((Math.pow(n,2)+Math.pow(e,2))*(Math.pow(r,2)+Math.pow(t,2)));return(n*t-e*r<0?-1:1)*Math.acos(o/i)}t.segmentArcFactory=function(e,t,n,r,o,N,D,i,a,s,u){var l=u.bbox,B=void 0===l||l,l=u.length,F=void 0===l||l,l=u.sampleSize,c=void 0===l?30:l,f="number"==typeof s,h=e,p=t,d=0,y=[h,p,d],g=[h,p],v={x:0,y:0},m=[{x:h,y:p}];f&&s<=0&&(v={x:h,y:p});for(var b,w,_,x,S,O,P,E,k,M,j,C,T,A,I,R,L=0;L<=c;L+=1)b=e,w=t,_=n,x=r,S=o,O=N,P=D,E=i,k=a,M=L/c,C=R=I=A=T=C=j=void 0,C=Math.abs,T=Math.sin,A=Math.cos,I=Math.sqrt,R=Math.PI,_=C(_),C=C(x),x=(S%360+360)%360*(R/180),h=(j=b===E&&w===k?{x:b,y:w}:0===_||0===C?(0,G.segmentLineFactory)(b,w,E,k,M).point:(S=(b-E)/2,j=(w-k)/2,S={x:A(x)*S+T(x)*j,y:-T(x)*S+A(x)*j},1<(j=Math.pow(S.x,2)/Math.pow(_,2)+Math.pow(S.y,2)/Math.pow(C,2))&&(_*=I(j),C*=I(j)),O=(O!==P?1:-1)*I(j=(j=(Math.pow(_,2)*Math.pow(C,2)-Math.pow(_,2)*Math.pow(S.y,2)-Math.pow(C,2)*Math.pow(S.x,2))/(Math.pow(_,2)*Math.pow(S.y,2)+Math.pow(C,2)*Math.pow(S.x,2)))<0?0:j),I=_*S.y/C*O,j=-C*S.x/_*O,O=A(x)*I-T(x)*j+(b+E)/2,b=T(x)*I+A(x)*j+(w+k)/2,w=U({x:1,y:0},E={x:(S.x-I)/_,y:(S.y-j)/C}),k=U(E,{x:(-S.x-I)/_,y:(-S.y-j)/C}),!P&&0<k?k-=2*R:P&&k<0&&(k+=2*R),I=_*A(E=w+(k%=2*R)*M),S=C*T(E),{x:A(x)*I-T(x)*S+O,y:T(x)*I+A(x)*S+b})).x,p=j.y,B&&m.push({x:h,y:p}),F&&(d+=(0,z.distanceSquareRoot)(g,[h,p])),g=[h,p],f&&s<=d&&s>y[2]&&(P=(d-s)/(d-y[2]),v={x:g[0]*(1-P)+y[0]*P,y:g[1]*(1-P)+y[1]*P}),y=[h,p,d];return{length:d,point:v=f&&d<=s?{x:i,y:a}:v,min:{x:Math.min.apply(null,m.map(function(e){return e.x})),y:Math.min.apply(null,m.map(function(e){return e.y}))},max:{x:Math.max.apply(null,m.map(function(e){return e.x})),y:Math.max.apply(null,m.map(function(e){return e.y}))}}}},41159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentCubicFactory=void 0;var I=n(94725);t.segmentCubicFactory=function(e,t,n,r,o,i,a,s,u,l){var c=l.bbox,f=void 0===c||c,c=l.length,h=void 0===c||c,c=l.sampleSize,p=void 0===c?10:c,d="number"==typeof u,y=e,g=t,v=0,m=[y,g,v],b=[y,g],w={x:0,y:0},_=[{x:y,y:g}];d&&u<=0&&(w={x:y,y:g});for(var x,S,O,P,E,k,M,j,C,T,A=0;A<=p;A+=1)x=e,S=t,O=n,P=r,E=o,k=i,M=a,j=s,T=void 0,T=1-(C=A/p),y=(x={x:Math.pow(T,3)*x+3*Math.pow(T,2)*C*O+3*T*Math.pow(C,2)*E+Math.pow(C,3)*M,y:Math.pow(T,3)*S+3*Math.pow(T,2)*C*P+3*T*Math.pow(C,2)*k+Math.pow(C,3)*j}).x,g=x.y,f&&_.push({x:y,y:g}),h&&(v+=(0,I.distanceSquareRoot)(b,[y,g])),b=[y,g],d&&u<=v&&u>m[2]&&(O=(v-u)/(v-m[2]),w={x:b[0]*(1-O)+m[0]*O,y:b[1]*(1-O)+m[1]*O}),m=[y,g,v];return{length:v,point:w=d&&v<=u?{x:a,y:s}:w,min:{x:Math.min.apply(null,_.map(function(e){return e.x})),y:Math.min.apply(null,_.map(function(e){return e.y}))},max:{x:Math.max.apply(null,_.map(function(e){return e.x})),y:Math.max.apply(null,_.map(function(e){return e.y}))}}}},26864:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentLineFactory=void 0;var s=n(47321),u=n(94725);t.segmentLineFactory=function(e,t,n,r,o){var i=(0,u.distanceSquareRoot)([e,t],[n,r]),a={x:0,y:0};return{length:i,point:a="number"==typeof o?o<=0?{x:e,y:t}:i<=o?{x:n,y:r}:{x:(o=(0,s.midPoint)([e,t],[n,r],o/i))[0],y:o[1]}:a,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}},65930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentQuadFactory=void 0;var j=n(94725);t.segmentQuadFactory=function(e,t,n,r,o,i,a,s){var u=s.bbox,l=void 0===u||u,u=s.length,c=void 0===u||u,u=s.sampleSize,f=void 0===u?10:u,h="number"==typeof a,p=e,d=t,y=0,g=[p,d,y],v=[p,d],m={x:0,y:0},b=[{x:p,y:d}];h&&a<=0&&(m={x:p,y:d});for(var w,_,x,S,O,P,E,k,M=0;M<=f;M+=1)w=e,_=t,x=n,S=r,O=o,P=i,k=void 0,k=1-(E=M/f),p=(w={x:Math.pow(k,2)*w+2*k*E*x+Math.pow(E,2)*O,y:Math.pow(k,2)*_+2*k*E*S+Math.pow(E,2)*P}).x,d=w.y,l&&b.push({x:p,y:d}),c&&(y+=(0,j.distanceSquareRoot)(v,[p,d])),v=[p,d],h&&a<=y&&a>g[2]&&(x=(y-a)/(y-g[2]),m={x:v[0]*(1-x)+g[0]*x,y:v[1]*(1-x)+g[1]*x}),g=[p,d,y];return{length:y,point:m=h&&y<=a?{x:o,y:i}:m,min:{x:Math.min.apply(null,b.map(function(e){return e.x})),y:Math.min.apply(null,b.map(function(e){return e.y}))},max:{x:Math.max.apply(null,b.map(function(e){return e.x})),y:Math.max.apply(null,b.map(function(e){return e.y}))}}}},47592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(27018);function u(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromTranslation(r,n),s.mat3.multiply(e,r,t)}function l(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromRotation(r,n),s.mat3.multiply(e,r,t)}function c(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromScaling(r,n),s.mat3.multiply(e,r,t)}function o(e,t){return e[0]*t[1]-t[0]*e[1]}t.leftTranslate=u,t.leftRotate=l,t.leftScale=c,t.transform=function(e,t){for(var n,r=e?[].concat(e):[1,0,0,0,1,0,0,0,1],o=0,i=t.length;o<i;o++){var a=t[o];switch(a[0]){case"t":u(r,r,[a[1],a[2]]);break;case"s":c(r,r,[a[1],a[2]]);break;case"r":l(r,r,a[1]);break;case"m":n=a[1],s.mat3.multiply(r,n,r)}}return r},t.direction=o,t.angleTo=function(e,t,n){var r=s.vec2.angle(e,t),e=0<=o(e,t);return n?e?2*Math.PI-r:r:e?r:2*Math.PI-r},t.vertical=function(e,t,n){return n?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},43708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27018),r=(t.mat3=r.mat3,t.vec2=r.vec2,t.vec3=r.vec3,n(47592));t.ext=r},84601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var w=n(56686);t.default=function(e,t,n){void 0===n&&(n=[[0,0],[1,1]]);for(var t=!!(t=void 0===t?!1:t),r=[],o=0,i=e.length;o<i;o+=2)r.push([e[o],e[o+1]]);for(var a,s,u,l=function(e,t,n){var r,o=[],i=!!n;if(i){l=n[0],c=n[1];for(var a=0,s=e.length;a<s;a+=1)var u=e[a],l=w.vec2.min([0,0],l,u),c=w.vec2.max([0,0],c,u)}for(var f,h,p,d,y,g,v,m,a=0,b=e.length;a<b;a+=1)u=e[a],0!==a||t?a!==b-1||t?(g=w.vec2.sub(g=[0,0],h=e[t?(a+1)%b:a+1],f=e[[a?a-1:b-1,a-1][t?0:1]]),g=w.vec2.scale(g,g,.4),0!==(y=(p=w.vec2.distance(u,f))+(d=w.vec2.distance(u,h)))&&(p/=y,d/=y),y=w.vec2.scale([0,0],g,-p),g=w.vec2.scale([0,0],g,d),v=w.vec2.add([0,0],u,y),m=w.vec2.add([0,0],u,g),m=w.vec2.min([0,0],m,w.vec2.max([0,0],h,u)),m=w.vec2.max([0,0],m,w.vec2.min([0,0],h,u)),y=w.vec2.sub([0,0],m,u),y=w.vec2.scale([0,0],y,-p/d),v=w.vec2.add([0,0],u,y),v=w.vec2.min([0,0],v,w.vec2.max([0,0],f,u)),v=w.vec2.max([0,0],v,w.vec2.min([0,0],f,u)),g=w.vec2.sub([0,0],u,v),g=w.vec2.scale([0,0],g,d/p),m=w.vec2.add([0,0],u,g),i&&(v=w.vec2.max([0,0],v,l),v=w.vec2.min([0,0],v,c),m=w.vec2.max([0,0],m,l),m=w.vec2.min([0,0],m,c)),o.push(r),o.push(v),r=m):(v=u,o.push(r),o.push(v)):r=u;return t&&o.push(o.shift()),o}(r,t,n),c=r.length,f=[],o=0;o<c-1;o+=1)a=l[2*o],s=l[2*o+1],f.push(["C",a[0],a[1],s[0],s[1],(u=r[o+1])[0],u[1]]);return t&&(a=l[c],s=l[c+1],f.push(["C",a[0],a[1],s[0],s[1],(u=r[0])[0],u[1]])),f}},99753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=n(31834);t.default=function(e,t){var n=function(e,t){var n,r=e.length,o=t.length;if(0===r||0===o)return null;for(var i=[],a=0;a<=r;a++)i[a]=[],i[a][0]={min:a};for(var s,u=0;u<=o;u++)i[0][u]={min:u};for(a=1;a<=r;a++)for(n=e[a-1],u=1;u<=o;u++){var l=t[u-1],l=(0,h.isEqual)(n,l)?0:1,c=i[a-1][u].min+1,f=i[a][u-1].min+1,l=i[a-1][u-1].min+l;i[a][u]=(void 0,s=null,(f=f)<(l=l)&&(l=f,s="add"),(f=c)<l&&(l=f,s="del"),{type:s,min:l})}return i}(e,t),r=e.length,o=t.length,i=[],a=1,s=1;if(n[r][o]!==r){for(var u=1;u<=r;u++){for(var l=n[u][u].min,s=u,c=a;c<=o;c++)n[u][c].min<l&&(l=n[u][c].min,s=c);a=s,n[u][a].type&&i.push({index:u-1,type:n[u][a].type})}for(u=i.length-1;0<=u;u--)a=i[u].index,"add"===i[u].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}if((r=e.length)<o)for(u=0;u<o-r;u++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]);return e}},98716:function(e,t){"use strict";function l(u,e,l){if(1===l)return[[].concat(u)];var t=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])t=t.concat(function(e,t){var n=[[u[1],u[2]]],r=(t=l||2,[]);"A"===e[0]?(n.push(e[6]),n.push(e[7])):"C"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var o=n,i=1/t,a=0;a<t-1;a++){var s=function(e,t){var i=[],a=[];return e.length&&function e(t,n){if(1===t.length)i.push(t[0]),a.push(t[0]);else{for(var r=[],o=0;o<t.length-1;o++)0===o&&i.push(t[0]),o===t.length-2&&a.push(t[o+1]),r[o]=[(1-n)*t[o][0]+n*t[o+1][0],(1-n)*t[o][1]+n*t[o+1][1]];e(r,n)}}(e,t),{left:i,right:a.reverse()}}(o,i/(1-i*a));r.push(s.left),o=s.right}return r.push(o),r.map(function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),3<=e.length&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])})}(e));else{var n=[].concat(u);"M"===n[0]&&(n[0]="L");for(var r=0;r<=l-1;r++)t.push(n)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,e){if(1===r.length)return r;var o=r.length-1,t=e.length-1,n=o/t,i=[];if(1===r.length&&"M"===r[0][0]){for(var a=0;a<t-o;a++)r.push(r[0]);return r}for(a=0;a<t;a++){var s=Math.floor(n*a);i[s]=(i[s]||0)+1}var u=i.reduce(function(e,t,n){return n===o?e.concat(r[o]):e.concat(l(r[n],r[n+1],t))},[]);return u.unshift(r[0]),"Z"!==e[t]&&"z"!==e[t]||u.push("Z"),u}},66720:function(e,t){"use strict";function u(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}function o(e,t,n){for(var r,o=[].concat(e),i=1/(n+1),a=u(t)[0],s=1;s<=n;s++)i*=s,0===(r=Math.floor(e.length*i))?o.unshift([a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]):o.splice(r,0,[a[0]*i+e[r][0]*(1-i),a[1]*i+e[r][1]*(1-i)]);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e.length<=1))for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=u(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(0<r)){e[r]=t[r];break}n=o(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(0<r)){e[r]=t[r];break}n=o(n,e[r-1],2)}e[r]=["C"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;case"S":if(n.length<2){if(!(0<r)){e[r]=t[r];break}n=o(n,e[r-1],1)}e[r]=["S"].concat(n.reduce(function(e,t){return e.concat(t)},[]));break;default:e[r]=t[r]}return e}},71697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePoint=void 0;var y=n(31834);function r(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function g(e,t){return r(e)*r(t)?(e[0]*t[0]+e[1]*t[1])/(r(e)*r(t)):1}function v(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(g(e,t))}function m(e,t){return e[0]===t[0]&&e[1]===t[1]}t.isSamePoint=m,t.default=function(e,t){var n=t[1],r=t[2],o=(0,y.mod)((0,y.toRadian)(t[3]),2*Math.PI),i=t[4],a=t[5],s=e[0],u=e[1],l=t[6],t=t[7],c=Math.cos(o)*(s-l)/2+Math.sin(o)*(u-t)/2,f=-1*Math.sin(o)*(s-l)/2+Math.cos(o)*(u-t)/2,h=c*c/(n*n)+f*f/(r*r),h=(1<h&&(n*=Math.sqrt(h),r*=Math.sqrt(h)),n*n*(f*f)+r*r*(c*c)),h=h?Math.sqrt((n*n*(r*r)-h)/h):1,p=(i===a&&(h*=-1),isNaN(h)&&(h=0),r?h*n*f/r:0),h=n?h*-r*c/n:0,s=(s+l)/2+Math.cos(o)*p-Math.sin(o)*h,u=(u+t)/2+Math.sin(o)*p+Math.cos(o)*h,d=[(c-p)/n,(f-h)/r],c=[(-1*c-p)/n,(-1*f-h)/r],p=v([1,0],d),f=v(d,c);return g(d,c)<=-1&&(f=Math.PI),1<=g(d,c)&&(f=0),0===a&&0<f&&(f-=2*Math.PI),1===a&&f<0&&(f+=2*Math.PI),{cx:s,cy:u,rx:m(e,[l,t])?0:n,ry:m(e,[l,t])?0:r,startAngle:p,endAngle:p+f,xRotation:o,arcFlag:i,sweepFlag:a}}},8272:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function l(e,t,n){return t<=e&&e<=n}t.default=function(e,t,n,r){var o=n.x-e.x,i=n.y-e.y,a=t.x-e.x,t=t.y-e.y,s=r.x-n.x,r=r.y-n.y,n=a*r-t*s,u=null;return u=.001*(a*a+t*t)*(s*s+r*r)<n*n&&l(r=(o*r-i*s)/n,0,1)&&l((o*t-i*a)/n,0,1)?{x:e.x+r*a,y:e.y+r*t}:u}},73920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInPolygon=t.isPolygonsIntersect=t.getLineIntersect=t.path2Segments=t.getArcParams=t.reactPath=t.path2Absolute=t.path2Curve=t.parsePathString=t.parsePathArray=t.pathIntersection=t.formatPath=t.fillPathByDiff=t.fillPath=t.catmullRom2Bezier=t.parsePath=void 0;var r=n(74851),o=(Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r.default}}),n(84601)),i=(Object.defineProperty(t,"catmullRom2Bezier",{enumerable:!0,get:function(){return o.default}}),n(98716)),a=(Object.defineProperty(t,"fillPath",{enumerable:!0,get:function(){return i.default}}),n(99753)),s=(Object.defineProperty(t,"fillPathByDiff",{enumerable:!0,get:function(){return a.default}}),n(66720)),u=(Object.defineProperty(t,"formatPath",{enumerable:!0,get:function(){return s.default}}),n(14672)),l=(Object.defineProperty(t,"pathIntersection",{enumerable:!0,get:function(){return u.default}}),n(92851)),c=(Object.defineProperty(t,"parsePathArray",{enumerable:!0,get:function(){return l.default}}),n(3376)),f=(Object.defineProperty(t,"parsePathString",{enumerable:!0,get:function(){return c.default}}),n(13482)),h=(Object.defineProperty(t,"path2Curve",{enumerable:!0,get:function(){return f.default}}),n(18057)),p=(Object.defineProperty(t,"path2Absolute",{enumerable:!0,get:function(){return h.default}}),n(11183)),d=(Object.defineProperty(t,"reactPath",{enumerable:!0,get:function(){return p.default}}),n(71697)),y=(Object.defineProperty(t,"getArcParams",{enumerable:!0,get:function(){return d.default}}),n(39038)),g=(Object.defineProperty(t,"path2Segments",{enumerable:!0,get:function(){return y.default}}),n(8272)),v=(Object.defineProperty(t,"getLineIntersect",{enumerable:!0,get:function(){return g.default}}),n(36841)),m=(Object.defineProperty(t,"isPolygonsIntersect",{enumerable:!0,get:function(){return v.default}}),n(53563));Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return m.default}})},36841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(53563),u=n(8272),l=n(31834);function c(e){for(var t,n,r=[],o=e.length,i=0;i<o-1;i++){var a=e[i],s=e[i+1];r.push({from:{x:a[0],y:a[1]},to:{x:s[0],y:s[1]}})}return 1<r.length&&(t=e[0],n=e[o-1],r.push({from:{x:n[0],y:n[1]},to:{x:t[0],y:t[1]}})),r}function f(e){var t=e.map(function(e){return e[0]}),e=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}t.default=function(t,n){var e,r,o,i,a;return!(t.length<2||n.length<2||(e=f(t),(i=f(n)).minX>e.maxX)||i.maxX<e.minX||i.minY>e.maxY||i.maxY<e.minY)&&((r=!1,l.each)(n,function(e){if((0,s.default)(t,e[0],e[1]))return!(r=!0)}),!!r||((0,l.each)(t,function(e){if((0,s.default)(n,e[0],e[1]))return!(r=!0)}),!!r)||(o=c(t),i=c(n),(a=!1,l.each)(i,function(e){if(t=e,(n=!1,l.each)(o,function(e){if((0,u.default)(e.from,e.to,t.from,t.to))return!(n=!0)}),n)return!(a=!0);var t,n}),a))}},92851:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/,?([a-z]),?/gi;t.default=function(e){return e.join(",").replace(n,"$1")}},3376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31834),n="\t\n\v\f\r \u2028\u2029",o=new RegExp("([a-z])["+n+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+n+"]*,?["+n+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+n+"]*,?["+n+"]*","ig");t.default=function(e){var i,a;return e?(0,r.isArray)(e)?e:(i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[],String(e).replace(o,function(e,t,n){var r=[],o=t.toLowerCase();if(n.replace(s,function(e,t){t&&r.push(+t)}),"m"===o&&2<r.length&&(a.push([t].concat(r.splice(0,2))),o="l",t="m"===t?"l":"L"),"o"===o&&1===r.length&&a.push([t,r[0]]),"r"===o)a.push([t].concat(r));else for(;i[o]<=r.length&&(a.push([t].concat(r.splice(0,i[o]))),i[o]););return""}),a):null}},74851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31834),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;t.default=function(e){var r=e||[];return(0,o.isArray)(r)?r:(0,o.isString)(r)?(r=r.match(i),(0,o.each)(r,function(n,e){var t;1<(n=n.match(a))[0].length&&(t=n[0].charAt(0),n.splice(1,0,n[0].substr(1)),n[0]=t),(0,o.each)(n,function(e,t){isNaN(e)||(n[t]=+e)}),r[e]=n}),r):void 0}},18057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var w=n(3376),_=/[a-z]/;function x(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}t.default=function(e){var t=(0,w.default)(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var o=t[r][0];if(_.test(o)||0<=["V","H","T","S"].indexOf(o)){n=!0;break}}if(!n)return t;var i=[],a=0,s=0,u=0,l=0,e=0,c=t[0];"M"!==c[0]&&"m"!==c[0]||(u=a=+c[1],l=s=+c[2],e++,i[0]=["M",a,s]);for(var r=e,f=t.length;r<f;r++){var h=t[r],p=i[r-1],d=[],y=(o=h[0]).toUpperCase();if(o!==y)switch(d[0]=y,y){case"A":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+h[6]+a,d[7]=+h[7]+s;break;case"V":d[1]=+h[1]+s;break;case"H":d[1]=+h[1]+a;break;case"M":u=+h[1]+a,l=+h[2]+s,d[1]=u,d[2]=l;break;default:for(var g=1,v=h.length;g<v;g++)d[g]=+h[g]+(g%2?a:s)}else d=t[r];switch(y){case"Z":a=+u,s=+l;break;case"H":d=["L",a=d[1],s];break;case"V":d=["L",a,s=d[1]];break;case"T":var a=d[1],s=d[2],m=x([p[1],p[2]],[p[3],p[4]]),d=["Q",m[0],m[1],a,s];break;case"S":a=d[d.length-2],s=d[d.length-1];var m=p.length,b=x([p[m-4],p[m-3]],[p[m-2],p[m-1]]);d=["C",b[0],b[1],d[1],d[2],a,s];break;case"M":u=d[d.length-2],l=d[d.length-1];break;default:a=d[d.length-2],s=d[d.length-1]}i.push(d)}return i}},13482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=n(18057),v=n(75879);t.default=function(e,t){void 0===t&&(t=!1);for(var n,r,o=(0,g.default)(e),i={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},a=[],s="",u=o.length,l=[],c=0;c<u;c+=1){o[c]&&(s=o[c][0]),a[c]=s,o[c]=(0,v.segmentToCubic)(o[c],i);{f=void 0;h=void 0;p=void 0;d=void 0;y=void 0;var f=o;var h=a;var p=c;if(7<f[p].length){f[p].shift();for(var d=f[p],y=p;d.length;)h[p]="A",f.splice(y+=1,0,["C"].concat(d.splice(0,6)));f.splice(p,1)}}u=o.length,"Z"===s&&l.push(c),r=(n=o[c]).length,i.x1=+n[r-2],i.y1=+n[r-1],i.x2=+n[r-4]||i.x1,i.y2=+n[r-3]||i.y1}return t?[o,l]:o}},39038:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var E=n(71697),k=n(71697),M=n(74851);function j(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}t.default=function(e){for(var t=[],n=null,r=null,o=null,i=0,a=(e=(0,M.default)(e)).length,s=0;s<a;s++){var u=e[s],r=e[s+1],l=u[0],c={command:l,prePoint:n,params:u,startTangent:null,endTangent:null};switch(l){case"M":o=[u[1],u[2]],i=s;break;case"A":var f=(0,E.default)(n,u);c.arcParams=f}"Z"===l?(n=o,r=e[i+1]):n=[u[(O=u.length)-2],u[O-1]],r&&"Z"===r[0]&&(r=e[i],t[i])&&(t[i].prePoint=n),c.currentPoint=n,t[i]&&(0,k.isSamePoint)(n,t[i].currentPoint)&&(t[i].prePoint=c.prePoint);var h,p,d,y,g,v,m,b,w,_,x,S,O=r?[r[r.length-2],r[r.length-1]]:null,P=(c.nextPoint=O,c.prePoint);["L","H","V"].includes(l)?(c.startTangent=[P[0]-n[0],P[1]-n[1]],c.endTangent=[n[0]-P[0],n[1]-P[1]]):"Q"===l?(h=[u[1],u[2]],c.startTangent=[P[0]-h[0],P[1]-h[1]],c.endTangent=[n[0]-h[0],n[1]-h[1]]):"T"===l?(h=j((p=t[s-1]).currentPoint,P),"Q"===p.command?(c.command="Q",c.startTangent=[P[0]-h[0],P[1]-h[1]],c.endTangent=[n[0]-h[0],n[1]-h[1]]):(c.command="TL",c.startTangent=[P[0]-n[0],P[1]-n[1]],c.endTangent=[n[0]-P[0],n[1]-P[1]])):"C"===l?(d=[u[1],u[2]],y=[u[3],u[4]],c.startTangent=[P[0]-d[0],P[1]-d[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[d[0]-y[0],d[1]-y[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[y[0]-d[0],y[1]-d[1]])):"S"===l?(d=j((p=t[s-1]).currentPoint,P),y=[u[1],u[2]],"C"===p.command?(c.command="C",c.startTangent=[P[0]-d[0],P[1]-d[1]]):(c.command="SQ",c.startTangent=[P[0]-y[0],P[1]-y[1]]),c.endTangent=[n[0]-y[0],n[1]-y[1]]):"A"===l&&(l=.001,g=void 0===(g=(_=c.arcParams||{}).cx)?0:g,v=void 0===(v=_.cy)?0:v,x=_.rx,m=void 0===(m=_.ry)?0:m,b=_.sweepFlag,w=void 0===(w=_.startAngle)?0:w,_=void 0===(_=_.endAngle)?0:_,0===(void 0===b?0:b)&&(l*=-1),x=(b=void 0===x?0:x)*Math.cos(w-l)+g,S=m*Math.sin(w-l)+v,c.startTangent=[x-o[0],S-o[1]],x=b*Math.cos(w+_+l)+g,S=m*Math.sin(w+_-l)+v,c.endTangent=[P[0]-x,P[1]-S]),t.push(c)}return t}},14672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function g(e,t,n,r,o){return e*(e*(-3*t+9*n-9*r+3*o)+6*t-12*n+6*r)-3*t+3*n}function r(e,t,n){var r,o,i,a,s,u,l,c;e=(0,S.default)(e),t=(0,S.default)(t);for(var f=n?0:[],h=0,p=e.length;h<p;h++){var d=e[h];if("M"===d[0])r=i=d[1],y=a=d[2];else for(var y="C"===d[0]?(r=(l=[r,y].concat(d.slice(1)))[6],l[7]):(l=[r,y,r,y,i,a,i,a],r=i,a),g=0,v=t.length;g<v;g++){var m=t[g];if("M"===m[0])o=s=m[1],b=u=m[2];else{var b="C"===m[0]?(o=(c=[o,b].concat(m.slice(1)))[6],c[7]):(c=[o,b,o,b,s,u,s,u],o=s,u),w=function(e,t,n){if(r=M(e),o=M(t),r=k(r),o=k(o),!(E(o,r.x,r.y)||E(o,r.x2,r.y)||E(o,r.x,r.y2)||E(o,r.x2,r.y2)||E(r,o.x,o.y)||E(r,o.x2,o.y)||E(r,o.x,o.y2)||E(r,o.x2,o.y2)||(r.x<o.x2&&r.x>o.x||o.x<r.x2&&o.x>r.x)&&(r.y<o.y2&&r.y>o.y||o.y<r.y2&&o.y>r.y)))return n?0:[];for(var r,o,i=~~(O.apply(0,e)/8),a=~~(O.apply(0,t)/8),s=[],u=[],l={},c=n?0:[],f=0;f<1+i;f++){var h=j.apply(0,e.concat(f/i));s.push({x:h.x,y:h.y,t:f/i})}for(f=0;f<1+a;f++)h=j.apply(0,t.concat(f/a)),u.push({x:h.x,y:h.y,t:f/a});for(f=0;f<i;f++)for(var p=0;p<a;p++){var d=s[f],y=s[f+1],g=u[p],v=u[p+1],m=Math.abs(y.x-d.x)<.001?"y":"x",b=Math.abs(v.x-g.x)<.001?"y":"x",w=P(d.x,d.y,y.x,y.y,g.x,g.y,v.x,v.y);w&&l[w.x.toFixed(4)]!==w.y.toFixed(4)&&(l[w.x.toFixed(4)]=w.y.toFixed(4),m=d.t+Math.abs((w[m]-d[m])/(y[m]-d[m]))*(y.t-d.t),y=g.t+Math.abs((w[b]-g[b])/(v[b]-g[b]))*(v.t-g.t),0<=m)&&m<=1&&0<=y&&y<=1&&(n?c++:c.push({x:w.x,y:w.y,t1:m,t2:y}))}return c}(l,c,n);if(n)f+=w;else{for(var _=0,x=w.length;_<x;_++)w[_].segment1=h,w[_].segment2=g,w[_].bez1=l,w[_].bez2=c;f=f.concat(w)}}}}return f}var u=n(31834),o=n(11183),S=n(13482),O=function(e,t,n,r,o,i,a,s,u){for(var l=(u=1<(u=null===u?1:u)?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=l*c[p]+l,y=g(d,e,n,o,a),d=g(d,t,r,i,s);h+=f[p]*Math.sqrt(y*y+d*d)}return l*h},P=function(e,t,n,r,o,i,a,s){if(!(Math.max(e,n)<Math.min(o,a)||Math.min(e,n)>Math.max(o,a)||Math.max(t,r)<Math.min(i,s)||Math.min(t,r)>Math.max(i,s))){var u=(e-n)*(i-s)-(t-r)*(o-a);if(u){var l=((e*r-t*n)*(o-a)-(e-n)*(o*s-i*a))/u,u=((e*r-t*n)*(i-s)-(t-r)*(o*s-i*a))/u,c=+l.toFixed(2),f=+u.toFixed(2);if(!(c<+Math.min(e,n).toFixed(2)||c>+Math.max(e,n).toFixed(2)||c<+Math.min(o,a).toFixed(2)||c>+Math.max(o,a).toFixed(2)||f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(i,s).toFixed(2)||f>+Math.max(i,s).toFixed(2)))return{x:l,y:u}}}},E=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},k=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:(0,o.default)(e,t,n,r),vb:[e,t,n,r].join(" ")}},M=function(e,t,n,r,o,i,a,s){(0,u.isArray)(e)||(e=[e,t,n,r,o,i,a,s]);t=function(e,t,n,r,o,i,a,s){for(var u,l,c,f=[],h=[[],[]],p=0;p<2;++p)if(d=0===p?(l=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*a,3*n-3*e):(l=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*s,3*r-3*t),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;0<(c=-d/l)&&c<1&&f.push(c)}else{var d=l*l-4*d*u,y=Math.sqrt(d);d<0||(0<(d=(-l+y)/(2*u))&&d<1&&f.push(d),0<(d=(-l-y)/(2*u))&&d<1&&f.push(d))}for(var g,v=f.length,m=v;v--;)g=1-(c=f[v]),h[0][v]=g*g*g*e+3*g*g*c*n+3*g*c*c*o+c*c*c*a,h[1][v]=g*g*g*t+3*g*g*c*r+3*g*c*c*i+c*c*c*s;return h[0][m]=e,h[1][m]=t,h[0][m+1]=a,h[1][m+1]=s,h[0].length=h[1].length=m+2,{min:{x:Math.min.apply(0,h[0]),y:Math.min.apply(0,h[1])},max:{x:Math.max.apply(0,h[0]),y:Math.max.apply(0,h[1])}}}.apply(null,e);return k(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y)},j=function(e,t,n,r,o,i,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,p=h*u,d=e+2*u*(n-e)+h*(o-2*n+e),y=t+2*u*(r-t)+h*(i-2*r+t),g=n+2*u*(o-n)+h*(a-2*o+n),h=r+2*u*(i-r)+h*(s-2*i+r);return{x:c*e+3*f*u*n+3*l*u*u*o+p*a,y:c*t+3*f*u*r+3*l*u*u*i+p*s,m:{x:d,y:y},n:{x:g,y:h},start:{x:l*e+u*n,y:l*t+u*r},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*Math.atan2(d-g,y-h)/Math.PI}};t.default=function(e,t){return r(e,t)}},53563:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function f(e){return Math.abs(e)<1e-6?0:e<0?-1:1}t.default=function(e,t,n){var r=!1,o=e.length;if(o<=2)return!1;for(var i,a,s,u=0;u<o;u++){var l=e[u],c=e[(u+1)%o];if(a=c,((s=[t,n])[0]-(i=l)[0])*(a[1]-i[1])==(a[0]-i[0])*(s[1]-i[1])&&Math.min(i[0],a[0])<=s[0]&&s[0]<=Math.max(i[0],a[0])&&Math.min(i[1],a[1])<=s[1]&&s[1]<=Math.max(i[1],a[1]))return!0;0<f(l[1]-n)!=0<f(c[1]-n)&&f(t-(n-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(r=!r)}return r}},99626:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arcToCubic=void 0;function R(e,t,n,r,o,i,a){var s=e.x,e=e.y;return{x:r*(s*=t)-o*(e*=n)+i,y:o*s+r*e+a}}function L(e,t,n,r){var o=e*n+t*r;return(o=1<o?1:o)<-1&&(o=-1),(e*r-t*n<0?-1:1)*Math.acos(o)}function l(e){var t=e.px,n=e.py,r=e.cx,o=e.cy,i=e.rx,a=e.ry,s=void 0===(s=e.xAxisRotation)?0:s,u=void 0===(u=e.largeArcFlag)?0:u,e=void 0===(e=e.sweepFlag)?0:e,l=[];if(0===i||0===a)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:o}];var c=Math.sin(s*N/360),f=Math.cos(s*N/360),h=-c*(t-r)/2+f*(n-o)/2;if(0==(s=f*(t-r)/2+c*(n-o)/2)&&0==h)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:o}];var p,d,y,g,v,m,b,w,i=Math.abs(i),a=Math.abs(a),_=Math.pow(s,2)/Math.pow(i,2)+Math.pow(h,2)/Math.pow(a,2);1<_&&(i*=Math.sqrt(_),a*=Math.sqrt(_)),_=t,t=n,n=r,r=o,o=i,p=a,u=u,e=e,d=c,y=f,s=s,h=h,g=Math.pow(o,2),v=Math.pow(p,2),m=Math.pow(s,2),b=Math.pow(h,2),(w=g*v-g*b-v*m)<0&&(w=0),w/=g*b+v*m,g=(w=Math.sqrt(w)*(u===e?-1:1))*o/p*h,v=y*g-d*(b=w*-p/o*s)+(_+n)/2,m=d*g+y*b+(t+r)/2,_=(-s-g)/o,n=(-h-b)/p,d=L(1,0,u=(s-g)/o,w=(h-b)/p),y=L(u,w,_,n),0===e&&0<y&&(y-=N),1===e&&y<0&&(y+=N);var x=(t=[v,m,d,y])[0],S=t[1],O=t[2],P=t[3],r=Math.abs(P)/(N/4),E=(Math.abs(1-r)<1e-7&&(r=1),Math.max(Math.ceil(r),1));P/=E;for(var k,M,j,C,T,A,I=0;I<E;I++)l.push((k=O,A=T=C=j=void 0,j=1.5707963267948966===(M=P)?.551915024494:-1.5707963267948966===M?-.551915024494:4/3*Math.tan(M/4),C=Math.cos(k),T=Math.sin(k),A=Math.cos(k+M),k=Math.sin(k+M),[{x:C-T*j,y:T+C*j},{x:A+k*j,y:k-A*j},{x:A,y:k}])),O+=P;return l.map(function(e){var t=R(e[0],i,a,f,c,x,S),n=t.x,t=t.y,r=R(e[1],i,a,f,c,x,S),o=r.x,r=r.y,e=R(e[2],i,a,f,c,x,S);return{x1:n,y1:t,x2:o,y2:r,x:e.x,y:e.y}})}var N=2*Math.PI;t.arcToCubic=function(e,t,n,r,o,i,a,s,u){return l({px:e,py:t,cx:s,cy:u,rx:n,ry:r,xAxisRotation:o,largeArcFlag:i,sweepFlag:a}).reduce(function(e,t){var n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.x,t=t.y;return e.push(n,r,o,i,a,t),e},[])}},63786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineToCubic=void 0,t.lineToCubic=function(e,t,n,r){return[e,t,n,r,n,r]}},94973:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadToCubic=void 0,t.quadToCubic=function(e,t,n,r,o,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*o+2/3*n,1/3*i+2/3*r,o,i]}},75879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentToCubic=void 0;var i=n(99626),a=n(94973),s=n(63786);t.segmentToCubic=function(e,t){"TQ".indexOf(e[0])<0&&(t.qx=null,t.qy=null);var n=e.slice(1),r=n[0],o=n[1];switch(e[0]){case"M":return t.x=r,t.y=o,e;case"A":return["C"].concat(i.arcToCubic.apply(0,[t.x1,t.y1].concat(e.slice(1))));case"Q":return t.qx=r,t.qy=o,["C"].concat(a.quadToCubic.apply(0,[t.x1,t.y1].concat(e.slice(1))));case"L":return["C"].concat((0,s.lineToCubic)(t.x1,t.y1,e[1],e[2]));case"H":return["C"].concat((0,s.lineToCubic)(t.x1,t.y1,e[1],t.y1));case"V":return["C"].concat((0,s.lineToCubic)(t.x1,t.y1,t.x1,e[1]));case"Z":return["C"].concat((0,s.lineToCubic)(t.x1,t.y1,t.x,t.y))}return e}},11183:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){return o?[["M",+e+ +o,t],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,r-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-r],["a",o,o,0,0,1,o,-o],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]}},19690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertical=t.angleTo=t.direction=t.transform=t.leftScale=t.leftRotate=t.leftTranslate=void 0;var s=n(27018);function u(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromTranslation(r,n),s.mat3.multiply(e,r,t)}function l(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromRotation(r,n),s.mat3.multiply(e,r,t)}function c(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return s.mat3.fromScaling(r,n),s.mat3.multiply(e,r,t)}function o(e,t){return e[0]*t[1]-t[0]*e[1]}t.leftTranslate=u,t.leftRotate=l,t.leftScale=c,t.transform=function(e,t){for(var n,r=e?[].concat(e):[1,0,0,0,1,0,0,0,1],o=0,i=t.length;o<i;o++){var a=t[o];switch(a[0]){case"t":u(r,r,[a[1],a[2]]);break;case"s":c(r,r,[a[1],a[2]]);break;case"r":l(r,r,a[1]);break;case"m":n=a[1],s.mat3.multiply(r,n,r)}}return r},t.direction=o,t.angleTo=function(e,t,n){var r=s.vec2.angle(e,t),e=0<=o(e,t);return n?e?2*Math.PI-r:r:e?r:2*Math.PI-r},t.vertical=function(e,t,n){return n?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},56686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ext=t.vec3=t.vec2=t.mat3=void 0;var r=n(27018),n=(Object.defineProperty(t,"mat3",{enumerable:!0,get:function(){return r.mat3}}),Object.defineProperty(t,"vec2",{enumerable:!0,get:function(){return r.vec2}}),Object.defineProperty(t,"vec3",{enumerable:!0,get:function(){return r.vec3}}),n(19690));t.ext=n},67872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31834),o=n(94528);function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}i.prototype.translate=function(e){return e},i.prototype.change=function(e){r.assign(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var n=this;return r.map(this.ticks,function(e,t){return r.isObject(e)?e:{text:n.getText(e,t),tickValue:e,value:n.scale(e)}})},i.prototype.getText=function(e,t){var n=this.formatter,n=n?n(e,t):e;return r.isNil(n)||!r.isFunction(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){r.assign(this,this.__cfg__),this.setDomain(),r.isEmpty(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(r.isString(e)){var n=o.getTickMethod(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else r.isFunction(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,n){return r.isNumber(e)?(e-t)/(n-t):NaN},i.prototype.calcValue=function(e,t,n){return t+e*(n-t)},t.default=i},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(97582),a=n(31834),n=(o=n(67872).default,i.__extends(r,o),r.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},r.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return t=void 0===t?a.isNumber(e)?e:NaN:t},r.prototype.scale=function(e){e=this.translate(e),e=this.calcPercent(e,this.min,this.max);return this.calcValue(e,this.rangeMin(),this.rangeMax())},r.prototype.invert=function(e){var t=this.max-this.min,e=this.calcPercent(e,this.rangeMin(),this.rangeMax()),t=Math.round(t*e)+this.min;return t<this.min||t>this.max?NaN:this.values[t]},r.prototype.getText=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e;return a.isNumber(e)&&!this.values.includes(e)&&(r=this.values[r]),o.prototype.getText.apply(this,i.__spreadArrays([r],t))},r.prototype.initCfg=function(){this.tickMethod="cat"},r.prototype.setDomain=function(){var e;a.isNil(this.getConfig("min"))&&(this.min=0),a.isNil(this.getConfig("max"))&&(e=this.values.length,this.max=1<e?e-1:e),this.translateIndexMap&&(this.translateIndexMap=void 0)},r);function r(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}t.default=n},38186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),a=n(52938),n=(r=n(634).default,o.__extends(s,r),s.prototype.translate=function(e){e=a.toTimeStamp(e);var t=this.values.indexOf(e);return t=-1===t?i.isNumber(e)&&e<this.values.length?e:NaN:t},s.prototype.getText=function(e,t){var n,r=this.translate(e);return-1<r?(r=this.values[r],(n=this.formatter)?n(r,t):a.timeFormat(r,this.mask)):e},s.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},s.prototype.setDomain=function(){var n=this.values;i.each(n,function(e,t){n[t]=a.toTimeStamp(e)}),n.sort(function(e,t){return e-t}),r.prototype.setDomain.call(this)},s);function s(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="timeCat",e}t.default=n},52318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),n=(r=n(67872).default,o.__extends(a,r),a.prototype.scale=function(e){var t,n;return i.isNil(e)?NaN:(t=this.rangeMin(),n=this.rangeMax(),this.max===this.min?t:t+this.getScalePercent(e)*(n-t))},a.prototype.init=function(){r.prototype.init.call(this);var e=this.ticks,t=i.head(e),e=i.last(e);t<this.min&&(this.min=t),e>this.max&&(this.max=e),i.isNil(this.minLimit)||(this.min=t),i.isNil(this.maxLimit)||(this.max=e)},a.prototype.setDomain=function(){var e=i.getRange(this.values),t=e.min,e=e.max;i.isNil(this.min)&&(this.min=t),i.isNil(this.max)&&(this.max=e),this.min>this.max&&(this.min=t,this.max=e)},a.prototype.calculateTicks=function(){var t=this,e=r.prototype.calculateTicks.call(this);return e=this.nice?e:i.filter(e,function(e){return e>=t.min&&e<=t.max})},a.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},a.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},a);function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.isContinuous=!0,e}t.default=n},80910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),n=(r=n(52318).default,o.__extends(i,r),i.prototype.invert=function(e){e=this.getInvertPercent(e);return this.min+e*(this.max-this.min)},i.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}t.default=n},9349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),u=n(94841),n=(r=n(52318).default,o.__extends(i,r),i.prototype.invert=function(e){var t,n=this.base,r=u.log(n,this.max),o=this.rangeMin(),i=this.rangeMax()-o,a=this.positiveMin;if(a){if(0===e)return 0;var s=1/(r-(t=u.log(n,a/n)))*i;if(e<s)return e/s*a}else t=u.log(n,this.min);return Math.pow(n,(e-o)/i*(r-t)+t)},i.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},i.prototype.setDomain=function(){r.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=u.getLogPositiveMin(this.values,this.base,this.max))},i.prototype.getScalePercent=function(e){var t,n,r=this.max,o=this.min;return r===o||e<=0?0:(t=this.base,(n=this.positiveMin)&&(o=+n/t),e<n?e/n/(u.log(t,r)-u.log(t,o)):(u.log(t,e)-u.log(t,o))/(u.log(t,r)-u.log(t,o)))},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="log",e}t.default=n},21133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(94841),n=(r=n(52318).default,o.__extends(a,r),a.prototype.invert=function(e){var e=this.getInvertPercent(e),t=this.exponent,n=i.calBase(t,this.max),r=i.calBase(t,this.min),e=e*(n-r)+r,n=0<=e?1:-1;return Math.pow(e,t)*n},a.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},a.prototype.getScalePercent=function(e){var t,n=this.max,r=this.min;return n===r?0:(t=this.exponent,(i.calBase(t,e)-i.calBase(t,r))/(i.calBase(t,n)-i.calBase(t,r)))},a);function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="pow",e}t.default=n},22816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),n=(r=n(52034).default,o.__extends(i,r),i.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="quantile",e}t.default=n},52034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),n=(r=n(52318).default,o.__extends(a,r),a.prototype.invert=function(e){var t,n=this.ticks,r=n.length,e=this.getInvertPercent(e),o=Math.floor(e*(r-1));return r-1<=o?i.last(n):o<0?i.head(n):(t=n[o])+(e-(e=o/(r-1)))/((o+1)/(r-1)-e)*(n[o+1]-t)},a.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},a.prototype.calculateTicks=function(){var e=r.prototype.calculateTicks.call(this);return this.nice||(i.last(e)!==this.max&&e.push(this.max),i.head(e)!==this.min&&e.unshift(this.min)),e},a.prototype.getScalePercent=function(n){var r,e=this.ticks;return n<i.head(e)?0:n>i.last(e)?1:(r=0,i.each(e,function(e,t){if(!(e<=n))return!1;r=t}),r/(e.length-1))},a);function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="quantize",e}t.default=n},516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),s=n(31834),u=n(52938),n=(r=n(80910).default,o.__extends(i,r),i.prototype.getText=function(e,t){var e=this.translate(e),n=this.formatter;return n?n(e,t):u.timeFormat(e,this.mask)},i.prototype.scale=function(e){return(s.isString(e)||s.isDate(e))&&(e=this.translate(e)),r.prototype.scale.call(this,e)},i.prototype.translate=function(e){return u.toTimeStamp(e)},i.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},i.prototype.setDomain=function(){var n,r,o,i,e=this.values,t=this.getConfig("min"),a=this.getConfig("max");s.isNil(t)&&s.isNumber(t)||(this.min=this.translate(this.min)),s.isNil(a)&&s.isNumber(a)||(this.max=this.translate(this.max)),e&&e.length&&(n=[],o=r=1/0,i=0,s.each(e,function(e){var t=u.toTimeStamp(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");t<r?(o=r,r=t):t<o&&(o=t),i<t&&(i=t),n.push(t)}),1<e.length&&(this.minTickInterval=o-r),s.isNil(t)&&(this.min=r),s.isNil(a))&&(this.max=i)},i);function i(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="time",e}t.default=n},66200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerScale=t.getScale=t.Scale=void 0;var n=n(67872),r=(t.Scale=n.default,{});function o(e){return r[e]}t.getScale=o,t.registerScale=function(e,t){if(o(e))throw new Error("type '"+e+"' existed.");r[e]=t}},93753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(97582),i=n(31834),n=(r=n(67872).default,o.__extends(a,r),a.prototype.calculateTicks=function(){return this.values},a.prototype.scale=function(e){return this.values[0]!==e&&i.isNumber(e)?e:this.range[0]},a.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},a);function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}t.default=n},91994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=t.registerScale=t.getScale=t.Scale=t.Quantize=t.Quantile=t.TimeCat=t.Time=t.Pow=t.Log=t.Linear=t.Identity=t.Category=void 0;var r=n(67872),r=(t.Scale=r.default,n(634)),o=(t.Category=r.default,n(38186)),i=(t.TimeCat=o.default,n(80910)),a=(t.Linear=i.default,n(9349)),s=(t.Log=a.default,n(21133)),u=(t.Pow=s.default,n(516)),l=(t.Time=u.default,n(52034)),c=(t.Quantize=l.default,n(22816)),f=(t.Quantile=c.default,n(66200)),h=(Object.defineProperty(t,"getScale",{enumerable:!0,get:function(){return f.getScale}}),Object.defineProperty(t,"registerScale",{enumerable:!0,get:function(){return f.registerScale}}),n(93753)),p=(t.Identity=h.default,n(25927));Object.defineProperty(t,"getTickMethod",{enumerable:!0,get:function(){return p.getTickMethod}}),Object.defineProperty(t,"registerTickMethod",{enumerable:!0,get:function(){return p.registerTickMethod}}),f.registerScale("cat",r.default),f.registerScale("category",r.default),f.registerScale("identity",h.default),f.registerScale("linear",i.default),f.registerScale("log",a.default),f.registerScale("pow",s.default),f.registerScale("time",u.default),f.registerScale("timeCat",o.default),f.registerScale("quantize",l.default),f.registerScale("quantile",c.default)},14091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=n(31834);t.default=function(e){var t,n=e.values,r=e.tickInterval,o=e.tickCount,i=e.showLast;if(p.isNumber(r))return t=p.filter(n,function(e,t){return t%r==0}),a=p.last(n),i&&p.last(t)!==a&&t.push(a),t;var a=n.length,s=e.min,u=e.max;if(p.isNil(s)&&(s=0),p.isNil(u)&&(u=n.length-1),!p.isNumber(o)||a<=o)return n.slice(s,u+1);if(o<=0||u<=0)return[];for(var l=1===o?a:Math.floor(a/(o-1)),c=[],f=s,h=0;h<o&&!(u<=f);h++)f=Math.min(s+h*l,u),c.push(h===o-1&&i?n[u]:n[f]);return c}},99164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(31834),u=n(76951),l=n(66189),c=n(50273);t.default=function(e){var t=e.min,n=e.max,r=e.tickInterval,o=e.minLimit,i=e.maxLimit,a=u.default(e);return s.isNil(o)&&s.isNil(i)?r?l.default(t,n,r).ticks:a:c.default(e,s.head(a),s.last(a))}},25927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=void 0;var r=n(14091),o=n(99164),i=n(87159),a=n(57795),s=n(98323),u=n(85809),l=n(79821),c=n(94528),t=(Object.defineProperty(t,"getTickMethod",{enumerable:!0,get:function(){return c.getTickMethod}}),Object.defineProperty(t,"registerTickMethod",{enumerable:!0,get:function(){return c.registerTickMethod}}),n(69137)),f=n(65744),n=n(18228);c.registerTickMethod("cat",r.default),c.registerTickMethod("time-cat",f.default),c.registerTickMethod("wilkinson-extended",i.default),c.registerTickMethod("r-pretty",l.default),c.registerTickMethod("time",t.default),c.registerTickMethod("time-pretty",n.default),c.registerTickMethod("log",a.default),c.registerTickMethod("pow",s.default),c.registerTickMethod("quantile",u.default),c.registerTickMethod("d3-linear",o.default)},87159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(31834),l=n(36068),c=n(66189),f=n(50273);t.default=function(e){var t=e.min,n=e.max,r=e.tickCount,o=e.nice,i=e.tickInterval,a=e.minLimit,s=e.maxLimit,r=l.default(t,n,r,o).ticks;return u.isNil(a)&&u.isNil(s)?i?c.default(t,n,i).ticks:r:f.default(e,u.head(r),u.last(r))}},57795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(94841);t.default=function(e){var t=e.base,n=e.tickCount,r=e.min,o=e.max,e=e.values,i=l.log(t,o);o=0<r?Math.floor(l.log(t,r)):(e=l.getLogPositiveMin(e,t,o),Math.floor(l.log(t,e)));for(var a=Math.ceil((i-o)/n),s=[],u=o;u<i+a;u+=a)s.push(Math.pow(t,u));return r<=0&&s.unshift(0),s}},98323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(94841),i=n(12710);t.default=function(e){var n=e.exponent,t=e.tickCount,r=Math.ceil(o.calBase(n,e.max)),e=Math.floor(o.calBase(n,e.min));return i.default(e,r,t).ticks.map(function(e){var t=0<=e?1:-1;return Math.pow(e,n)*t})}},85809:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.tickCount,e=e.values;if(!e||!e.length)return[];for(var n,r,o,i=e.slice().sort(function(e,t){return e-t}),a=[],s=0;s<t;s++)a.push((r=s/(t-1),o=void 0,o=(n=i).length*r,1===r?n[n.length-1]:0===r?n[0]:o%1!=0?n[Math.ceil(o)-1]:n.length%2==0?(n[o-1]+n[o])/2:n[o]));return a}},79821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(31834),u=n(66189),l=n(12710),c=n(50273);t.default=function(e){var t=e.min,n=e.max,r=e.tickCount,o=e.tickInterval,i=e.minLimit,a=e.maxLimit,r=l.default(t,n,r).ticks;return s.isNil(i)&&s.isNil(a)?o?u.default(t,n,o).ticks:r:c.default(e,s.head(r),s.last(r))}},94528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=void 0;var n={};t.getTickMethod=function(e){return n[e]},t.registerTickMethod=function(e,t){n[e]=t}},65744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(97582),o=n(14091);t.default=function(e){return o.default(r.__assign({showLast:!0},e))}},18228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var j=n(52938);function C(e){return new Date(e).getFullYear()}function T(e){return new Date(e).getMonth()}t.default=function(e){var t,n=e.min,r=e.max,o=e.minTickInterval,i=e.tickCount,e=e.tickInterval,a=[],s=(e||(e=(r-n)/i,o&&e<o&&(e=o)),e=Math.max(Math.floor((r-n)/(Math.pow(2,12)-1)),e),C(n));if(e>j.YEAR)for(var u=C(r),l=Math.ceil(e/j.YEAR),c=s;c<=u+l;c+=l)a.push(new Date(c,0,1).getTime());else if(e>j.MONTH)for(var f=Math.ceil(e/j.MONTH),h=T(n),p=(i=r,t=C(o=n),P=C(i),o=T(o),12*(P-t)+(T(i)-o)%12),c=0;c<=p+f;c+=f)a.push(new Date(s,c+h,1).getTime());else if(e>j.DAY){var d=(b=new Date(n)).getFullYear(),y=b.getMonth(),g=b.getDate(),v=Math.ceil(e/j.DAY),m=Math.ceil((r-n)/j.DAY);for(c=0;c<m+v;c+=v)a.push(new Date(d,y,g+c).getTime())}else if(e>j.HOUR){var b,d=(b=new Date(n)).getFullYear(),y=b.getMonth(),v=b.getDate(),w=b.getHours(),_=Math.ceil(e/j.HOUR),x=Math.ceil((r-n)/j.HOUR);for(c=0;c<=x+_;c+=_)a.push(new Date(d,y,v,w+c).getTime())}else if(e>j.MINUTE){var S=Math.ceil((r-n)/6e4),O=Math.ceil(e/j.MINUTE);for(c=0;c<=S+O;c+=O)a.push(n+c*j.MINUTE)}else{var P=e,E=(P<j.SECOND&&(P=j.SECOND),Math.floor(n/j.SECOND)*j.SECOND),k=Math.ceil((r-n)/j.SECOND),M=Math.ceil(P/j.SECOND);for(c=0;c<k+M;c+=M)a.push(E+c*j.SECOND)}return 512<=a.length&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+e+") is too small, increase the value to solve the problem!"),a}},69137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(52938);t.default=function(e){var t=e.min,n=e.max,r=e.minTickInterval,o=e.tickInterval,e=e.tickCount;o?e=Math.ceil((n-t)/o):(1<(e=(n-t)/(o=s.getTickInterval(t,n,e)[1])/e)&&(o*=Math.ceil(e)),r&&o<r&&(o=r));for(var o=Math.max(Math.floor((n-t)/(Math.pow(2,12)-1)),o),i=[],a=t;a<n+o;a+=o)i.push(a);return i}},47023:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(31834);t.default=function(s){return function(e,t,n,r){for(var o=u.isNil(n)?0:n,i=u.isNil(r)?e.length:r;o<i;){var a=o+i>>>1;s(e[a])>t?i=a:o=1+a}return o}}},76951:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.D3Linear=void 0,t.default=function(e){var t=e.min,n=e.max,r=e.nice,e=e.tickCount,o=new a;return o.domain([t,n]),r&&o.nice(e),o.ticks(e)};var r=Math.sqrt(50),o=Math.sqrt(10),i=Math.sqrt(2),a=(n.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},n.prototype.nice=function(e){void 0===e&&(e=5);var t,n=this._domain.slice(),r=0,o=this._domain.length-1,i=this._domain[r],a=this._domain[o];return a<i&&(i=(t=[a,i])[0],a=t[1],r=(t=[o,r])[0],o=t[1]),0<(t=u(i,a,e))?t=u(i=Math.floor(i/t)*t,a=Math.ceil(a/t)*t,e):t<0&&(t=u(i=Math.ceil(i*t)/t,a=Math.floor(a*t)/t,e)),0<t?(n[r]=Math.floor(i/t)*t,n[o]=Math.ceil(a/t)*t,this.domain(n)):t<0&&(n[r]=Math.ceil(i*t)/t,n[o]=Math.floor(a*t)/t,this.domain(n)),this},n.prototype.ticks=function(e){void 0===e&&(e=5);var t,n,r,o=this._domain[0],i=this._domain[this._domain.length-1],a=void 0,s=-1;if(a=+(e||5),(o=+o)==(i=+i)&&0<a)return[o];if((e=i<o)&&(t=o,o=i,i=t),0===(r=u(o,i,a))||!isFinite(r))return[];if(0<r)for(o=Math.ceil(o/r),i=Math.floor(i/r),n=new Array(t=Math.ceil(i-o+1));++s<t;)n[s]=(o+s)*r;else for(o=Math.floor(o*r),i=Math.ceil(i*r),n=new Array(t=Math.ceil(o-i+1));++s<t;)n[s]=(o-s)/r;return e&&n.reverse(),n},n);function n(){this._domain=[0,1]}function u(e,t,n){t=(t-e)/Math.max(0,n),e=Math.floor(Math.log(t)/Math.LN10),n=t/Math.pow(10,e);return 0<=e?(r<=n?10:o<=n?5:i<=n?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(r<=n?10:o<=n?5:i<=n?2:1)}t.D3Linear=a},36068:function(e,V,t){"use strict";Object.defineProperty(V,"__esModule",{value:!0}),V.ALL_Q=V.DEFAULT_Q=void 0;var W=t(31834),Y=t(3878),H=(V.DEFAULT_Q=[1,5,2,2.5,4,3],V.ALL_Q=[1,5,2,2.5,4,3,1.5,7,6,8,9],100*Number.EPSILON);V.default=function(n,e,t,r,o,i){void 0===r&&(r=!0),void 0===o&&(o=V.DEFAULT_Q),void 0===i&&(i=[.25,.2,.5,.05]);var a,s=(t=void 0===t?5:t)<0?0:Math.round(t);if(Number.isNaN(n)||Number.isNaN(e)||"number"!=typeof n||"number"!=typeof e||!s)return{min:0,max:0,ticks:[]};if(e-n<1e-15||1===s)return{min:n,max:e,ticks:[n]};if(1e148<e-n)return a=(e-n)/(k=t||5),{min:n,max:e,ticks:Array(k).fill(null).map(function(e,t){return Y.prettyNumber(n+a*t)})};for(var u,l,c,f,h,N,p,D,d,y={score:-2,lmin:0,lmax:0,lstep:0},g=1;g<1/0;){for(var v=0;v<o.length;v+=1){var m=o[v],b=(N=m,p=o,D=g,d=void 0,d=W.size(p),1-W.indexOf(p,N)/(d-1)-D+1);if(i[0]*b+i[1]+i[2]+i[3]<y.score){g=1/0;break}for(var w=2;w<1/0;){var B=(h=s)<=(_=w)?2-(_-1)/(h-1):1;if(i[0]*b+i[1]+i[2]*B+i[3]<y.score)break;for(var _=(e-n)/(w+1)/g/m,x=Math.ceil(Math.log10(_));x<1/0;){var S=g*m*Math.pow(10,x),O=(E=e,(E-=n)<(O=S*(w-1))?1-Math.pow((O-E)/2,2)/Math.pow(.1*E,2):1);if(i[0]*b+i[1]*O+i[2]*B+i[3]<y.score)break;var P=Math.floor(e/S)*g-(w-1)*g,E=Math.ceil(n/S)*g;if(P<=E)for(var k=E-P,M=0;M<=k;M+=1){var j=(P+M)*(S/g),C=j+S*(w-1),F=S,T=(u=m,T=o,R=g,l=j,c=C,f=F,A=I=void 0,I=W.size(T),T=W.indexOf(T,u),u=0,1-T/(I-1)-R+(u=((A=(l%f+f)%f)<H||f-A<H)&&l<=0&&0<=c?1:u)),A=(I=j,R=void 0,R=e-(f=n),1-.5*(Math.pow(e-C,2)+Math.pow(f-I,2))/Math.pow(.1*R,2)),I=(l=n,c=((c=w)-1)/(C-(u=j)),f=((f=s)-1)/(Math.max(C,e)-Math.min(l,u)),2-Math.max(c/f,f/c)),R=i[0]*T+i[1]*A+i[2]*I+ +i[3];y.score<R&&(!r||j<=n&&e<=C)&&(y.lmin=j,y.lmax=C,y.lstep=F,y.score=R)}x+=1}w+=1}}g+=1}var t=Y.prettyNumber(y.lmax),G=Y.prettyNumber(y.lmin),z=Y.prettyNumber(y.lstep),U=Math.floor(Math.round((t-G)/z*1e12)/1e12)+1,L=new Array(U);for(L[0]=Y.prettyNumber(G),v=1;v<U;v++)L[v]=Y.prettyNumber(L[v-1]+z);return{min:Math.min(n,W.head(L)),max:Math.max(e,W.last(L)),ticks:L}}},66189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(31834);function l(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}t.default=function(e,t,n){for(var e=l(e,n,"floor"),r=l(t,n,"ceil"),e=u.fixedBase(e,n),r=u.fixedBase(r,n),o=[],i=Math.max((r-e)/(Math.pow(2,12)-1),n),a=e;a<=r;a+=i){var s=u.fixedBase(a,i);o.push(s)}return{min:e,max:r,ticks:o}}},94841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.precisionAdd=t.getLogPositiveMin=t.log=t.calBase=void 0;var o=n(31834);function i(e){e=e.toString().split(/[eE]/),e=(e[0].split(".")[1]||"").length-+(e[1]||0);return 0<e?e:0}t.calBase=function(e,t){var n=Math.E;return 0<=t?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)},t.log=function(e,t){return 1===e?1:Math.log(t)/Math.log(e)},t.getLogPositiveMin=function(e,t,n){var r=n=o.isNil(n)?Math.max.apply(null,e):n;return o.each(e,function(e){0<e&&e<r&&(r=e)}),r=1<(r=r===n?n/t:r)?1:r},t.precisionAdd=function(e,t){var n=i(e),r=i(t),n=Math.pow(10,Math.max(n,r));return(e*n+t*n)/n}},3878:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyNumber=void 0,t.prettyNumber=function(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}},12710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(3878);t.default=function(e,t,n){if(e===t)return{max:t,min:e,ticks:[e]};n=(n=void 0===n?5:n)<0?0:Math.round(n);if(0===n)return{max:t,min:e,ticks:[]};var n=(t-e)/n,r=Math.pow(10,Math.floor(Math.log10(n))),o=r;2*r-n<1.5*(n-o)&&5*r-n<2.75*(n-(o=2*r))&&10*r-n<1.5*(n-(o=5*r))&&(o=10*r);for(var n=Math.ceil(t/o),r=Math.floor(e/o),n=Math.max(n*o,t),i=Math.min(r*o,e),a=Math.floor((n-i)/o)+1,s=new Array(a),u=0;u<a;u++)s[u]=l.prettyNumber(i+u*o);return{min:i,max:n,ticks:s}}},50273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=n(31834);t.default=function(e,t,n){var r=e.minLimit,o=e.maxLimit,i=e.min,a=e.max,e=e.tickCount,s=void 0===e?5:e,u=h.isNil(r)?h.isNil(t)?i:t:r,e=h.isNil(o)?h.isNil(n)?a:n:o;if(e<u&&(e=(i=[u,e])[0],u=i[1]),s<=2)return[u,e];for(var l=(e-u)/(s-1),c=[],f=0;f<s;f++)c.push(u+l*f);return c}},52938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTickInterval=t.YEAR=t.MONTH=t.DAY=t.HOUR=t.MINUTE=t.SECOND=t.toTimeStamp=t.timeFormat=void 0;var r=n(31834),o=n(95676),i=n(95676),a=n(47023),s=(t.timeFormat=function(e,t){return(i.format||o.default.format)(e,t)},t.toTimeStamp=function(e){return r.isString(e)&&(e=(0<e.indexOf("T")?new Date(e):new Date(e.replace(/-/gi,"/"))).getTime()),e=r.isDate(e)?e.getTime():e},t.SECOND=1e3,t.MINUTE=6e4,t.HOUR=36e5,t.DAY=864e5,t.MONTH=26784e5,t.YEAR=31536e6,[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",36e5],["HH",216e5],["HH",432e5],["YYYY-MM-DD",864e5],["YYYY-MM-DD",3456e5],["YYYY-WW",6048e5],["YYYY-MM",26784e5],["YYYY-MM",107136e5],["YYYY-MM",160704e5],["YYYY",32832e6]]);t.getTickInterval=function(e,t,n){t=(t-e)/n,e=a.default(function(e){return e[1]})(s,t)-1,n=s[e];return e<0?n=s[0]:s.length<=e&&(n=r.last(s)),n}},8178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10014),a=n(33259);t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var o=e[r];a.default(o)&&(o=o.prototype),i.default(n.prototype,o)}}},69855:function(e,t){"use strict";function n(){this.map={}}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.has=function(e){return void 0!==this.map[e]},n.prototype.get=function(e,t){e=this.map[e];return void 0===e?t:e},n.prototype.set=function(e,t){this.map[e]=t},n.prototype.clear=function(){this.map={}},n.prototype.delete=function(e){delete this.map[e]},n.prototype.size=function(){return Object.keys(this.map).length},t.default=n},50076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return e<t?t:n<e?n:e}},27866:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},37441:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(29021);t.default=function e(t){if("object"!==a(t)||null===t)return t;if(s.default(t))for(var n=[],r=0,o=t.length;r<o;r++)"object"===a(t[r])&&null!=t[r]?n[r]=e(t[r]):n[r]=t[r];else for(var i in n={},t)"object"===a(t[i])&&null!=t[i]?n[i]=e(t[i]):n[i]=t[i];return n}},79114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69104);t.default=function(e,t){return!!r.default(e)&&-1<e.indexOf(t)}},95323:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r,o,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(e,t)},o),n&&r.apply(e,t)}}},5441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(29021),u=n(18942);t.default=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)!function e(t,n,r,o){for(var i in r=r||0,o=o||5,n){var a;n.hasOwnProperty(i)&&(null!==(a=n[i])&&u.default(a)?(u.default(t[i])||(t[i]={}),r<o?e(t[i],a,r+1,o):t[i]=n[i]):s.default(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=a))}}(e,t[r]);return e}},79627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(22330),o=n(79114);t.default=function(e,t){return void 0===t&&(t=[]),r.default(e,function(e){return!o.default(t,e)})}},9070:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29021),a=n(72886);t.default=function(e,t){if(e)if(i.default(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(a.default(e))for(var o in e)if(e.hasOwnProperty(o)&&!1===t(e[o],o))break}},44168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021),o=n(99034);t.default=function(e,t){return!(!r.default(e)&&!o.default(e))&&e[e.length-1]===t}},93744:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}},60865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(10014),s=n(33259);t.default=function(e,t,n,r){s.default(t)||(n=t,t=e,e=function(){});var o=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;e=new n;return e.constructor=t,e},i=o(t.prototype,e);return e.prototype=a.default(i,e.prototype),e.superclass=o(t.prototype,t),a.default(i,n),a.default(e,r),e}},22330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(69104);t.default=function(e,t){if(!i.default(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];t(o,r)&&n.push(o)}return n}},82301:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=n=void 0===n?0:n;r<e.length;r++)if(t(e[r],r))return r;return-1}},19776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(33259),i=n(63893),a=n(29021),s=n(18942);t.default=function(e,t){var n;if(a.default(e)&&(o.default(t)&&(n=t),n=s.default(t)?function(e){return i.default(e,t)}:n))for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}},31490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(54184),a=n(29021);t.default=function(e,t){for(var n=null,r=0;r<e.length;r++){var o=e[r][t];if(!i.default(o)){n=a.default(o)?o[0]:o;break}}return n}},38026:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var t=t.toString(),n=t.indexOf(".");return-1===n?Math.round(e):(20<(t=t.substr(n+1).length)&&(t=20),parseFloat(e.toFixed(t)))}},60089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(29021);t.default=function e(t,n){if(void 0===n&&(n=[]),o.default(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}},17513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021);t.default=function(e){if(!r.default(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},38117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(9070);t.default=n.default},79070:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(99034),f=n(90344),h=n(47696);t.default=function(e,t,n,r){var o,i,a=h.default(r=void 0===r?"...":r,n),s=c.default(e)?e:f.default(e),u=t,l=[];if(h.default(e,n)<=t)return e;for(;o=s.substr(0,16),!((i=h.default(o,n))+a>u&&u<i);)if(l.push(o),u-=i,!(s=s.substr(16)))return l.join("");for(;o=s.substr(0,1),!((i=h.default(o,n))+a>u);)if(l.push(o),u-=i,!(s=s.substr(1)))return l.join("");return""+l.join("")+r}},18008:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29021),a=n(59625),s=n(95667);t.default=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if(i.default(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var o=a.default(t);return{min:s.default(t),max:o}}},64618:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={}.toString;t.default=function(e){return n.call(e).replace(/^\[object /,"").replace(/]$/,"")}},7441:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e["_wrap_"+t]}},66908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(99034);t.default=function(e,t,n){for(var r=0,o=i.default(t)?t.split("."):t;e&&r<o.length;)e=e[o[r++]];return void 0===e||r<o.length?n:e}},81154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(29021),u=n(33259),l=Object.prototype.hasOwnProperty;t.default=function(e,t){if(!t||!s.default(e))return{};for(var n={},r=u.default(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],a=r(i);l.call(n,a)?n[a].push(i):n[a]=[i]}return n}},34135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021),i=n(33259),a=n(81154);t.default=function(e,t){var o;return t?(i.default(t)||(o=r.default(t)?t:t.replace(/\s+/g,"").split("*"),t=function(e){for(var t="_",n=0,r=o.length;n<r;n++)t+=e[o[n]]&&e[o[n]].toString();return t}),a.default(e,t)):{0:e}}},48347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(34135);t.default=function(e,t){if(!t)return[e];var n,r=i.default(e,t),o=[];for(n in r)o.push(r[n]);return o}},70396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n=n(76942);t.default=n.default},41074:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(79114),o=n(26659);t.default=function(e,t){return r.default(o.default(e),t)}},76942:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.hasOwnProperty(t)}},62848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69104);t.default=function(e){if(r.default(e))return e[0]}},50151:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},48418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(69104);t.default=function(e,t){if(!i.default(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,o=0;o<e.length;o++)if(e[o]===t){r=o;break}return r}},31834:function(N,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(79114),r=(Object.defineProperty(e,"contains",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"includes",{enumerable:!0,get:function(){return n.default}}),t(79627)),o=(Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return r.default}}),t(19776)),i=(Object.defineProperty(e,"find",{enumerable:!0,get:function(){return o.default}}),t(82301)),a=(Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return i.default}}),t(31490)),s=(Object.defineProperty(e,"firstValue",{enumerable:!0,get:function(){return a.default}}),t(17513)),u=(Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return s.default}}),t(60089)),l=(Object.defineProperty(e,"flattenDeep",{enumerable:!0,get:function(){return u.default}}),t(18008)),c=(Object.defineProperty(e,"getRange",{enumerable:!0,get:function(){return l.default}}),t(36710)),f=(Object.defineProperty(e,"pull",{enumerable:!0,get:function(){return c.default}}),t(97683)),h=(Object.defineProperty(e,"pullAt",{enumerable:!0,get:function(){return f.default}}),t(36237)),p=(Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return h.default}}),t(86790)),d=(Object.defineProperty(e,"remove",{enumerable:!0,get:function(){return p.default}}),t(74241)),y=(Object.defineProperty(e,"sortBy",{enumerable:!0,get:function(){return d.default}}),t(26622)),g=(Object.defineProperty(e,"union",{enumerable:!0,get:function(){return y.default}}),t(67919)),v=(Object.defineProperty(e,"uniq",{enumerable:!0,get:function(){return g.default}}),t(47328)),m=(Object.defineProperty(e,"valuesOfKey",{enumerable:!0,get:function(){return v.default}}),t(62848)),b=(Object.defineProperty(e,"head",{enumerable:!0,get:function(){return m.default}}),t(71049)),w=(Object.defineProperty(e,"last",{enumerable:!0,get:function(){return b.default}}),t(1828)),_=(Object.defineProperty(e,"startsWith",{enumerable:!0,get:function(){return w.default}}),t(44168)),x=(Object.defineProperty(e,"endsWith",{enumerable:!0,get:function(){return _.default}}),t(22330)),S=(Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return x.default}}),t(93744)),O=(Object.defineProperty(e,"every",{enumerable:!0,get:function(){return S.default}}),t(18830)),P=(Object.defineProperty(e,"some",{enumerable:!0,get:function(){return O.default}}),t(48347)),E=(Object.defineProperty(e,"group",{enumerable:!0,get:function(){return P.default}}),t(81154)),k=(Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return E.default}}),t(34135)),M=(Object.defineProperty(e,"groupToMap",{enumerable:!0,get:function(){return k.default}}),t(7441)),j=(Object.defineProperty(e,"getWrapBehavior",{enumerable:!0,get:function(){return M.default}}),t(14635)),C=(Object.defineProperty(e,"wrapBehavior",{enumerable:!0,get:function(){return j.default}}),t(25651)),T=(Object.defineProperty(e,"number2color",{enumerable:!0,get:function(){return C.default}}),t(18359)),A=(Object.defineProperty(e,"parseRadius",{enumerable:!0,get:function(){return T.default}}),t(50076)),I=(Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return A.default}}),t(38026)),R=(Object.defineProperty(e,"fixedBase",{enumerable:!0,get:function(){return I.default}}),t(63574)),D=(Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return R.default}}),t(17037)),B=(Object.defineProperty(e,"isEven",{enumerable:!0,get:function(){return D.default}}),t(45168)),F=(Object.defineProperty(e,"isInteger",{enumerable:!0,get:function(){return B.default}}),t(78474)),G=(Object.defineProperty(e,"isNegative",{enumerable:!0,get:function(){return F.default}}),t(36373)),z=(Object.defineProperty(e,"isNumberEqual",{enumerable:!0,get:function(){return G.default}}),t(5345)),U=(Object.defineProperty(e,"isOdd",{enumerable:!0,get:function(){return z.default}}),t(68092)),V=(Object.defineProperty(e,"isPositive",{enumerable:!0,get:function(){return U.default}}),t(59625)),W=(Object.defineProperty(e,"max",{enumerable:!0,get:function(){return V.default}}),t(87787)),Y=(Object.defineProperty(e,"maxBy",{enumerable:!0,get:function(){return W.default}}),t(95667)),H=(Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Y.default}}),t(72283)),X=(Object.defineProperty(e,"minBy",{enumerable:!0,get:function(){return H.default}}),t(25645)),q=(Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return X.default}}),t(6514)),J=(Object.defineProperty(e,"toDegree",{enumerable:!0,get:function(){return q.default}}),t(389)),Z=(Object.defineProperty(e,"toInteger",{enumerable:!0,get:function(){return J.default}}),t(76227)),K=(Object.defineProperty(e,"toRadian",{enumerable:!0,get:function(){return Z.default}}),t(38117)),Q=(Object.defineProperty(e,"forIn",{enumerable:!0,get:function(){return K.default}}),t(76942)),$=(Object.defineProperty(e,"has",{enumerable:!0,get:function(){return Q.default}}),t(70396)),ee=(Object.defineProperty(e,"hasKey",{enumerable:!0,get:function(){return $.default}}),t(41074)),te=(Object.defineProperty(e,"hasValue",{enumerable:!0,get:function(){return ee.default}}),t(95439)),ne=(Object.defineProperty(e,"keys",{enumerable:!0,get:function(){return te.default}}),t(63893)),re=(Object.defineProperty(e,"isMatch",{enumerable:!0,get:function(){return ne.default}}),t(26659)),oe=(Object.defineProperty(e,"values",{enumerable:!0,get:function(){return re.default}}),t(63026)),ie=(Object.defineProperty(e,"lowerCase",{enumerable:!0,get:function(){return oe.default}}),t(23863)),ae=(Object.defineProperty(e,"lowerFirst",{enumerable:!0,get:function(){return ie.default}}),t(57956)),se=(Object.defineProperty(e,"substitute",{enumerable:!0,get:function(){return ae.default}}),t(46981)),ue=(Object.defineProperty(e,"upperCase",{enumerable:!0,get:function(){return se.default}}),t(57880)),le=(Object.defineProperty(e,"upperFirst",{enumerable:!0,get:function(){return ue.default}}),t(64618)),ce=(Object.defineProperty(e,"getType",{enumerable:!0,get:function(){return le.default}}),t(72692)),fe=(Object.defineProperty(e,"isArguments",{enumerable:!0,get:function(){return ce.default}}),t(29021)),he=(Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return fe.default}}),t(69104)),pe=(Object.defineProperty(e,"isArrayLike",{enumerable:!0,get:function(){return he.default}}),t(12646)),de=(Object.defineProperty(e,"isBoolean",{enumerable:!0,get:function(){return pe.default}}),t(29449)),ye=(Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return de.default}}),t(79558)),ge=(Object.defineProperty(e,"isError",{enumerable:!0,get:function(){return ye.default}}),t(33259)),ve=(Object.defineProperty(e,"isFunction",{enumerable:!0,get:function(){return ge.default}}),t(88355)),me=(Object.defineProperty(e,"isFinite",{enumerable:!0,get:function(){return ve.default}}),t(54184)),be=(Object.defineProperty(e,"isNil",{enumerable:!0,get:function(){return me.default}}),t(93698)),we=(Object.defineProperty(e,"isNull",{enumerable:!0,get:function(){return be.default}}),t(82579)),_e=(Object.defineProperty(e,"isNumber",{enumerable:!0,get:function(){return we.default}}),t(72886)),xe=(Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return _e.default}}),t(4418)),Se=(Object.defineProperty(e,"isObjectLike",{enumerable:!0,get:function(){return xe.default}}),t(18942)),Oe=(Object.defineProperty(e,"isPlainObject",{enumerable:!0,get:function(){return Se.default}}),t(52242)),Pe=(Object.defineProperty(e,"isPrototype",{enumerable:!0,get:function(){return Oe.default}}),t(96308)),Ee=(Object.defineProperty(e,"isRegExp",{enumerable:!0,get:function(){return Pe.default}}),t(99034)),ke=(Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return Ee.default}}),t(9145)),Me=(Object.defineProperty(e,"isType",{enumerable:!0,get:function(){return ke.default}}),t(72491)),je=(Object.defineProperty(e,"isUndefined",{enumerable:!0,get:function(){return Me.default}}),t(10119)),Ce=(Object.defineProperty(e,"isElement",{enumerable:!0,get:function(){return je.default}}),t(59908)),Te=(Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return Ce.default}}),t(27866)),Ae=(Object.defineProperty(e,"clearAnimationFrame",{enumerable:!0,get:function(){return Te.default}}),t(8178)),Ie=(Object.defineProperty(e,"augment",{enumerable:!0,get:function(){return Ae.default}}),t(37441)),Re=(Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return Ie.default}}),t(95323)),Le=(Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return Re.default}}),t(98887)),Ne=(Object.defineProperty(e,"memoize",{enumerable:!0,get:function(){return Le.default}}),t(5441)),De=(Object.defineProperty(e,"deepMix",{enumerable:!0,get:function(){return Ne.default}}),t(9070)),Be=(Object.defineProperty(e,"each",{enumerable:!0,get:function(){return De.default}}),t(60865)),Fe=(Object.defineProperty(e,"extend",{enumerable:!0,get:function(){return Be.default}}),t(48418)),Ge=(Object.defineProperty(e,"indexOf",{enumerable:!0,get:function(){return Fe.default}}),t(725)),ze=(Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ge.default}}),t(38570)),Ue=(Object.defineProperty(e,"isEqual",{enumerable:!0,get:function(){return ze.default}}),t(75567)),Ve=(Object.defineProperty(e,"isEqualWith",{enumerable:!0,get:function(){return Ue.default}}),t(60453)),We=(Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Ve.default}}),t(54921)),L=(Object.defineProperty(e,"mapValues",{enumerable:!0,get:function(){return We.default}}),t(10014)),Ye=(Object.defineProperty(e,"mix",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(e,"assign",{enumerable:!0,get:function(){return L.default}}),t(66908)),He=(Object.defineProperty(e,"get",{enumerable:!0,get:function(){return Ye.default}}),t(13272)),Xe=(Object.defineProperty(e,"set",{enumerable:!0,get:function(){return He.default}}),t(38733)),qe=(Object.defineProperty(e,"pick",{enumerable:!0,get:function(){return Xe.default}}),t(22254)),Je=(Object.defineProperty(e,"omit",{enumerable:!0,get:function(){return qe.default}}),t(57024)),Ze=(Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Je.default}}),t(63317)),Ke=(Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Ze.default}}),t(90344)),Qe=(Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return Ke.default}}),t(80174)),$e=(Object.defineProperty(e,"uniqueId",{enumerable:!0,get:function(){return Qe.default}}),t(53589)),et=(Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return $e.default}}),t(50151)),tt=(Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return et.default}}),t(54750)),nt=(Object.defineProperty(e,"size",{enumerable:!0,get:function(){return tt.default}}),t(47696)),rt=(Object.defineProperty(e,"measureTextWidth",{enumerable:!0,get:function(){return nt.default}}),t(79070)),ot=(Object.defineProperty(e,"getEllipsisText",{enumerable:!0,get:function(){return rt.default}}),t(69855));Object.defineProperty(e,"Cache",{enumerable:!0,get:function(){return ot.default}})},72692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Arguments")}},69104:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},29021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return Array.isArray?Array.isArray(e):r.default(e,"Array")}},12646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Boolean")}},29449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Date")}},63574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&e%1!=0}},10119:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Element||e instanceof HTMLDocument}},725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54184),o=n(69104),i=n(64618),a=n(52242),s=Object.prototype.hasOwnProperty;t.default=function(e){if(!r.default(e)){if(o.default(e))return!e.length;var t,n=i.default(e);if("Map"===n||"Set"===n)return!e.size;if(a.default(e))return!Object.keys(e).length;for(t in e)if(s.call(e,t))return!1}return!0}},75567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33259),o=n(38570);t.default=function(e,t,n){return r.default(n)?!!n(e,t):o.default(e,t)}},38570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(4418),u=n(69104),l=n(99034);t.default=function e(t,n){if(t===n)return!0;if(t&&n&&!l.default(t)&&!l.default(n)){if(u.default(t)||u.default(n)){if(t.length!==n.length)return!1;for(var r=!0,o=0;o<t.length&&(r=e(t[o],n[o]));o++);return r}if(s.default(t)||s.default(n)){var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(r=!0,o=0;o<i.length&&(r=e(t[i[o]],n[i[o]]));o++);return r}}return!1}},79558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Error")}},17037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&e%2==0}},88355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&isFinite(e)}},33259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Function")}},45168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579),n=Number.isInteger||function(e){return r.default(e)&&e%1==0};t.default=n},63893:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(54184),s=n(95439);t.default=function(e,t){var n=s.default(t),r=n.length;if(a.default(e))return!r;for(var o=0;o<r;o+=1){var i=n[o];if(t[i]!==e[i]||!(i in e))return!1}return!0}},78474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&e<0}},54184:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null==e}},93698:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null===e}},36373:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}},82579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"Number")}},4418:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"object"===n(e)&&null!==e}},72886:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=n(e);return null!==e&&"object"===t||"function"===t}},5345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&e%2!=0}},18942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4418),o=n(9145);t.default=function(e){if(!r.default(e)||!o.default(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},68092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(82579);t.default=function(e){return r.default(e)&&0<e}},52242:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},96308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"RegExp")}},99034:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9145);t.default=function(e){return r.default(e,"String")}},9145:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={}.toString;t.default=function(e,t){return n.call(e)==="[object "+t+"]"}},72491:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e}},95439:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9070),i=n(33259),n=Object.keys?function(e){return Object.keys(e)}:function(n){var r=[];return o.default(n,function(e,t){i.default(n)&&"prototype"===t||r.push(t)}),r};t.default=n},71049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69104);t.default=function(e){if(r.default(e))return e[e.length-1]}},63026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90344);t.default=function(e){return r.default(e).toLowerCase()}},23863:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90344);t.default=function(e){e=r.default(e);return e.charAt(0).toLowerCase()+e.substring(1)}},54921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e){return e}var i=n(54184),a=n(72886);t.default=function(t,n){void 0===n&&(n=o);var r={};return a.default(t)&&!i.default(t)&&Object.keys(t).forEach(function(e){r[e]=n(t[e],e)}),r}},60453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(69104);t.default=function(e,t){if(!i.default(e))return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(t(o,r))}return n}},87787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(29021),u=n(33259);t.default=function(e,t){if(s.default(e)){for(var n,r=-1/0,o=0;o<e.length;o++){var i=e[o],a=u.default(t)?t(i):i[t];r<a&&(n=i,r=a)}return n}}},59625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021);t.default=function(e){if(r.default(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},47696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(97582),o=n(26659),i=n(98887),s=n(99034);t.default=i.default(function(e,t){var n=(t=void 0===t?{}:t).fontSize,r=t.fontFamily,o=t.fontWeight,i=t.fontStyle,t=t.fontVariant;return(a=a||document.createElement("canvas").getContext("2d")).font=[i,t,o,n+"px",r].join(" "),a.measureText(s.default(e)?e:"").width},function(e,t){return r.__spreadArrays([e],o.default(t=void 0===t?{}:t)).join("")})},98887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33259);t.default=function(a,s){var e;if(r.default(a))return(e=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,o=s?s.apply(this,t):t[0],i=e.cache;return i.has(o)?i.get(o):(r=a.apply(this,t),i.set(o,r),r)}).cache=new Map,e;throw new TypeError("Expected a function")}},72283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(29021),u=n(33259);t.default=function(e,t){if(s.default(e)){for(var n,r=1/0,o=0;o<e.length;o++){var i=e[o],a=u.default(t)?t(i):i[t];a<r&&(n=i,r=a)}return n}}},95667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021);t.default=function(e){if(r.default(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},10014:function(e,t){"use strict";function o(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){return t&&o(e,t),n&&o(e,n),r&&o(e,r),e}},25645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(e%t+t)%t}},53589:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},25651:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};t.default=function(e){var t=o[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;o[e]=t="#"+n}return t}},22254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(36237);t.default=function(e,r){return o.default(e,function(e,t,n){return r.includes(n)||(e[n]=t),e},{})}},18359:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29021);t.default=function(e){var t=0,n=0,r=0,o=0;return i.default(e)?1===e.length?t=n=r=o=e[0]:2===e.length?(t=r=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],o=e[3]):t=n=r=o=e,{r1:t,r2:n,r3:r,r4:o}}},38733:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9070),o=n(18942),i=Object.prototype.hasOwnProperty;t.default=function(t,e){var n;return null!==t&&o.default(t)?(n={},r.default(e,function(e){i.call(t,e)&&(n[e]=t[e])}),n):{}}},97683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(69104),a=Array.prototype.splice;t.default=function(e,t){if(!i.default(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];n!==r&&void 0===o||a.call(e,o,1)}return e}},36710:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Array.prototype,a=n.splice,s=n.indexOf;t.default=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var o,i=t[r];-1<(o=s.call(e,i));)a.call(e,o,1);return e}},36237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9070),i=n(29021),a=n(18942);t.default=function(e,n,t){var r;return i.default(e)||a.default(e)?(r=t,o.default(e,function(e,t){r=n(r,e,t)}),r):e}},86790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(69104),u=n(97683);t.default=function(e,t){var n=[];if(s.default(e)){for(var r=-1,o=[],i=e.length;++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}u.default(e,o)}return n}},59908:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},13272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(72886),a=n(99034),s=n(82579);t.default=function(e,t,n){var r=e,o=a.default(t)?t.split("."):t;return o.forEach(function(e,t){t<o.length-1?(i.default(r[e])||(r[e]=s.default(o[t+1])?[]:{}),r=r[e]):r[e]=n}),e}},54750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54184),o=n(69104);t.default=function(e){return r.default(e)?0:(o.default(e)?e:Object.keys(e)).length}},18830:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}},74241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021),i=n(99034),a=n(33259);t.default=function(e,n){var o,t=a.default(n)?function(e,t){return n(e)-n(t)}:(o=[],i.default(n)?o.push(n):r.default(n)&&(o=n),function(e,t){for(var n=0;n<o.length;n+=1){var r=o[n];if(e[r]>t[r])return 1;if(e[r]<t[r])return-1}return 0});return e.sort(t),e}},1828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(29021),o=n(99034);t.default=function(e,t){return!(!r.default(e)&&!o.default(e))&&e[0]===t}},57956:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,n){return e&&n?e.replace(/\\?\{([^{}]+)\}/g,function(e,t){return"\\"===e.charAt(0)?e.slice(1):void 0===n[t]?"":n[t]}):e}},57024:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,r,o){function i(){c=!1===o.leading?0:Date.now(),a=null,l=n.apply(s,u),a||(s=u=null)}function e(){var e=Date.now(),t=(c||!1!==o.leading||(c=e),r-(e-c));return s=this,u=arguments,t<=0||r<t?(a&&(clearTimeout(a),a=null),c=e,l=n.apply(s,u),a||(s=u=null)):a||!1===o.trailing||(a=setTimeout(i,t)),l}var a,s,u,l,c=0;o=o||{};return e.cancel=function(){clearTimeout(a),c=0,a=s=u=null},e}},63317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69104);t.default=function(e){return r.default(e)?Array.prototype.slice.call(e):[]}},6514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=180/Math.PI;t.default=function(e){return n*e}},389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=parseInt},76227:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.PI/180;t.default=function(e){return n*e}},90344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54184);t.default=function(e){return r.default(e)?"":e.toString()}},26622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(67919);t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default([].concat.apply([],e))}},67919:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++){var i=e[r];t.has(i)||(n.push(i),t.set(i,!0))}return n}},80174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=function(e){return n[e=e||"g"]?n[e]+=1:n[e]=1,e+n[e]}},46981:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90344);t.default=function(e){return r.default(e).toUpperCase()}},57880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(90344);t.default=function(e){e=r.default(e);return e.charAt(0).toUpperCase()+e.substring(1)}},47328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=n(29021),l=n(54184);t.default=function(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o][t];if(!l.default(i)){u.default(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];r[s]||(n.push(s),r[s]=!0)}}}return n}},26659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9070),i=n(33259),n=Object.values?function(e){return Object.values(e)}:function(n){var r=[];return o.default(n,function(e,t){i.default(n)&&"prototype"===t||r.push(e)}),r};t.default=n},14635:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,n){return t["_wrap_"+n]||(t["_wrap_"+n]=function(e){t[n](e)})}},48211:function(e,t,n){var r,s=n(67380),u={};for(r in s)s.hasOwnProperty(r)&&(u[s[r]]=r);var o,i=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(o in i)if(i.hasOwnProperty(o)){if(!("channels"in i[o]))throw new Error("missing channels property: "+o);if(!("labels"in i[o]))throw new Error("missing channel labels property: "+o);if(i[o].labels.length!==i[o].channels)throw new Error("channel and label counts mismatch: "+o);var a=i[o].channels,l=i[o].labels;delete i[o].channels,delete i[o].labels,Object.defineProperty(i[o],"channels",{value:a}),Object.defineProperty(i[o],"labels",{value:l})}i.rgb.hsl=function(e){var t,n=e[0]/255,r=e[1]/255,e=e[2]/255,o=Math.min(n,r,e),i=Math.max(n,r,e),a=i-o;return i===o?t=0:n===i?t=(r-e)/a:r===i?t=2+(e-n)/a:e===i&&(t=4+(n-r)/a),(t=Math.min(60*t,360))<0&&(t+=360),e=(o+i)/2,[t,100*(i===o?0:e<=.5?a/(i+o):a/(2-i-o)),100*e]},i.rgb.hsv=function(e){function t(e){return(l-e)/6/c+.5}var n,r,o,i,a,s=e[0]/255,u=e[1]/255,e=e[2]/255,l=Math.max(s,u,e),c=l-Math.min(s,u,e);return 0==c?i=a=0:(a=c/l,n=t(s),r=t(u),o=t(e),s===l?i=o-r:u===l?i=1/3+n-o:e===l&&(i=2/3+r-n),i<0?i+=1:1<i&&--i),[360*i,100*a,100*l]},i.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[i.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(1-1/255*Math.max(t,Math.max(n,r)))]},i.rgb.cmyk=function(e){var t=e[0]/255,n=e[1]/255,e=e[2]/255;return[100*((1-t-(t=Math.min(1-t,1-n,1-e)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-e-t)/(1-t)||0),100*t]},i.rgb.keyword=function(e){var t=u[e];if(t)return t;var n,r,o,i,a=1/0;for(o in s)s.hasOwnProperty(o)&&(i=e,r=s[o],(i=Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)+Math.pow(i[2]-r[2],2))<a)&&(a=i,n=o);return n},i.keyword.rgb=function(e){return s[e]},i.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,e=e[2]/255;return[100*(.4124*(t=.04045<t?Math.pow((.055+t)/1.055,2.4):t/12.92)+.3576*(n=.04045<n?Math.pow((.055+n)/1.055,2.4):n/12.92)+.1805*(e=.04045<e?Math.pow((.055+e)/1.055,2.4):e/12.92)),100*(.2126*t+.7152*n+.0722*e),100*(.0193*t+.1192*n+.9505*e)]},i.rgb.lab=function(e){var e=i.rgb.xyz(e),t=e[0],n=e[1],e=e[2];return n/=100,e/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(.008856<e?Math.pow(e,1/3):7.787*e+16/116))]},i.hsl.rgb=function(e){var t,n,r,o=e[0]/360,i=e[1]/100,e=e[2]/100;if(0==i)return[r=255*e,r,r];for(var a=2*e-(t=e<.5?e*(1+i):e+i-e*i),s=[0,0,0],u=0;u<3;u++)(n=o+1/3*-(u-1))<0&&n++,1<n&&n--,s[u]=255*(r=6*n<1?a+6*(t-a)*n:2*n<1?t:3*n<2?a+(t-a)*(2/3-n)*6:a);return s},i.hsl.hsv=function(e){var t=e[0],n=e[1]/100,e=e[2]/100,r=n,o=Math.max(e,.01);return n*=(e*=2)<=1?e:2-e,r*=o<=1?o:2-o,[t,100*(0==e?2*r/(o+r):2*n/(e+n)),(e+n)/2*100]},i.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,e=Math.floor(t)%6,t=t-Math.floor(t),o=255*r*(1-n),i=255*r*(1-n*t),a=255*r*(1-n*(1-t));switch(r*=255,e){case 0:return[r,a,o];case 1:return[i,r,o];case 2:return[o,r,a];case 3:return[o,i,r];case 4:return[a,o,r];case 5:return[r,o,i]}},i.hsv.hsl=function(e){var t=e[0],n=e[1]/100,e=e[2]/100,r=Math.max(e,.01),e=(2-n)*e;return[t,100*(n*r/((t=(2-n)*r)<=1?t:2-t)||0),100*(e/=2)]},i.hwb.rgb=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,e=e[2]/100,u=s+e;switch(1<u&&(s/=u,e/=u),t=1-e,e=6*a-(u=Math.floor(6*a)),n=s+(e=0!=(1&u)?1-e:e)*(t-s),u){default:case 6:case 0:r=t,o=n,i=s;break;case 1:r=n,o=t,i=s;break;case 2:r=s,o=t,i=n;break;case 3:r=s,o=n,i=t;break;case 4:r=n,o=s,i=t;break;case 5:r=t,o=s,i=n}return[255*r,255*o,255*i]},i.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,e=e[3]/100;return[255*(1-Math.min(1,t*(1-e)+e)),255*(1-Math.min(1,n*(1-e)+e)),255*(1-Math.min(1,r*(1-e)+e))]},i.xyz.rgb=function(e){var t=e[0]/100,n=e[1]/100,e=e[2]/100,r=-.9689*t+1.8758*n+.0415*e,o=.0557*t+-.204*n+1.057*e,t=.0031308<(t=3.2406*t+-1.5372*n+-.4986*e)?1.055*Math.pow(t,1/2.4)-.055:12.92*t;return r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:12.92*r,o=.0031308<o?1.055*Math.pow(o,1/2.4)-.055:12.92*o,[255*Math.min(Math.max(0,t),1),255*Math.min(Math.max(0,r),1),255*Math.min(Math.max(0,o),1)]},i.xyz.lab=function(e){var t=e[0],n=e[1],e=e[2];return n/=100,e/=108.883,t=.008856<(t/=95.047)?Math.pow(t,1/3):7.787*t+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(.008856<e?Math.pow(e,1/3):7.787*e+16/116))]},i.lab.xyz=function(e){var t=e[0],n=e[1]/500+(t=(t+16)/116),e=t-e[2]/200,r=Math.pow(t,3),o=Math.pow(n,3),i=Math.pow(e,3),t=.008856<r?r:(t-16/116)/7.787;return n=.008856<o?o:(n-16/116)/7.787,e=.008856<i?i:(e-16/116)/7.787,[n*=95.047,t*=100,e*=108.883]},i.lab.lch=function(e){var t,n=e[0],r=e[1],e=e[2];return(t=360*Math.atan2(e,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+e*e),t]},i.lch.lab=function(e){var t=e[0],n=e[1],e=e[2]/360*2*Math.PI;return[t,n*Math.cos(e),n*Math.sin(e)]},i.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:i.rgb.hsv(e)[2];return 0===(o=Math.round(o/50))?30:(r=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255)),2===o&&(r+=60),r)},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){var t=e[0],n=e[1],e=e[2];return t===n&&n===e?t<8?16:248<t?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(e/255*5)},i.ansi16.rgb=function(e){var t=e%10;return 0===t||7===t?(50<e&&(t+=3.5),[t=t/10.5*255,t,t]):[(1&t)*(e=.5*(1+~~(50<e)))*255,(t>>1&1)*e*255,(t>>2&1)*e*255]},i.ansi256.rgb=function(e){var t;return 232<=e?[t=10*(e-232)+8,t,t]:(e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255])},i.rgb.hex=function(e){e=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(e){var t,e=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);return e?(t=e[0],3===e[0].length&&(t=t.split("").map(function(e){return e+e}).join("")),[(e=parseInt(t,16))>>16&255,e>>8&255,255&e]):[0,0,0]},i.rgb.hcg=function(e){var t=e[0]/255,n=e[1]/255,e=e[2]/255,r=Math.max(Math.max(t,n),e),o=Math.min(Math.min(t,n),e),i=r-o;return[360*((i<=0?0:r===t?(n-e)/i%6:r===n?2+(e-t)/i:4+(t-n)/i+4)/6%1),100*i,100*(i<1?o/(1-i):0)]},i.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=0;return(t=n<.5?2*t*n:2*t*(1-n))<1&&(r=(n-.5*t)/(1-t)),[e[0],100*t,100*r]},i.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,t=t*n,n=t<1?(n-t)/(1-t):0;return[e[0],100*t,100*n]},i.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,e=e[2]/100;if(0==n)return[255*e,255*e,255*e];var r=[0,0,0],t=t%1*6,o=t%1,i=1-o;switch(Math.floor(t)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=i,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=i,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=i}return[255*(n*r[0]+(t=(1-n)*e)),255*(n*r[1]+t),255*(n*r[2]+t)]},i.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),t=0<n?t/n:0;return[e[0],100*t,100*n]},i.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return 0<n&&n<.5?r=t/(2*n):.5<=n&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},i.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,t=n-t,n=t<1?(n-t)/(1-t):0;return[e[0],100*t,100*n]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=i.gray.hsv=function(e){return[0,0,e[0]]},i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){e=255&Math.round(e[0]/100*255),e=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},98556:function(e,t,n){function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(48211),o=n(44257),l={};Object.keys(r).forEach(function(a){l[a]={},Object.defineProperty(l[a],"channels",{value:r[a].channels}),Object.defineProperty(l[a],"labels",{value:r[a].labels});var s=o(a);Object.keys(s).forEach(function(e){var t,o,n=s[e];function r(e){return null==e?e:(1<arguments.length&&(e=Array.prototype.slice.call(arguments)),t(e))}function i(e){if(null==e)return e;1<arguments.length&&(e=Array.prototype.slice.call(arguments));var t=o(e);if("object"===u(t))for(var n=t.length,r=0;r<n;r++)t[r]=Math.round(t[r]);return t}l[a][e]=("conversion"in(o=n)&&(i.conversion=o.conversion),i),l[a][e].raw=("conversion"in(t=n)&&(r.conversion=t.conversion),r)})}),e.exports=l},44257:function(e,t,n){var l=n(48211);function s(e,t){for(var n=[t[e].parent,e],r=l[t[e].parent][e],o=t[e].parent;t[o].parent;)n.unshift(t[o].parent),r=function(t,n){return function(e){return n(t(e))}}(l[t[o].parent][o],r),o=t[o].parent;return r.conversion=n,r}e.exports=function(e){for(var t=function(e){var t=function(){for(var e={},t=Object.keys(l),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),o=Object.keys(l[r]),i=o.length,a=0;a<i;a++){var s=o[a],u=t[s];-1===u.distance&&(u.distance=t[r].distance+1,u.parent=r,n.unshift(s))}return t}(e),n={},r=Object.keys(t),o=r.length,i=0;i<o;i++){var a=r[i];null!==t[a].parent&&(n[a]=s(a,t))}return n}},67380:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19289:function(e,t,n){var r,a=n(67380),o=n(5515),s=Object.hasOwnProperty,i=Object.create(null);for(r in a)s.call(a,r)&&(i[a[r]]=r);var u=e.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function c(e){e=Math.round(e).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=u.get.hsl(e),n="hsl";break;case"hwb":t=u.get.hwb(e),n="hwb";break;default:t=u.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},u.get.rgb=function(e){if(!e)return null;var t,n,r,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var i=2*n;o[n]=parseInt(t.slice(i,2+i),16)}r&&(o[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);r&&(o[3]=parseInt(r+r,16)/255)}else{if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:s.call(a,t[1])?((o=a[t[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]))}t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},u.get.hsl=function(e){var t;return(e=e&&e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(t=parseFloat(e[4]),[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(t)?1:t,0,1)]):null},u.get.hwb=function(e){var t;return(e=e&&e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(t=parseFloat(e[4]),[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(t)?1:t,0,1)]):null},u.to.hex=function(){var e=o(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},u.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},u.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},u.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},u.to.hwb=function(){var e=o(arguments),t="";return 4<=e.length&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},u.to.keyword=function(e){return i[e.slice(0,3)]}},69630:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=n(19289),l=n(98556),c=[].slice,f=["keyword","gray","hex"],h={},p=(Object.keys(l).forEach(function(e){h[c.call(l[e].labels).sort().join("")]=e}),{});function d(e,t){if(!(this instanceof d))return new d(e,t);if((t=t&&t in f?null:t)&&!(t in l))throw new Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof d)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var n=u.get(e);if(null===n)throw new Error("Unable to parse color from string: "+e);this.model=n.model,r=l[this.model].channels,this.color=n.value.slice(0,r),this.valpha="number"==typeof n.value[r]?n.value[r]:1}else if(e.length){this.model=t||"rgb";var r=l[this.model].channels,n=c.call(e,0,r);this.color=y(n,r),this.valpha="number"==typeof e[r]?e[r]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;t=Object.keys(e),n=("alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0),t.sort().join(""));if(!(n in h))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=h[n];for(var o=l[this.model].labels,i=[],a=0;a<o.length;a++)i.push(e[o[a]]);this.color=y(i)}if(p[this.model])for(r=l[this.model].channels,a=0;a<r;a++){var s=p[this.model][a];s&&(this.color[a]=s(this.color[a]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function r(n,r,o){return(n=Array.isArray(n)?n:[n]).forEach(function(e){(p[e]||(p[e]=[]))[r]=o}),n=n[0],function(e){var t;return arguments.length?(o&&(e=o(e)),(t=this[n]()).color[r]=e):(t=this[n]().color[r],o&&(t=o(t))),t}}function o(t){return function(e){return Math.max(0,Math.min(t,e))}}function y(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}d.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in u.to?this:this.rgb(),e=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return u.to[t.model](e)},percentString:function(e){e=this.rgb().round("number"==typeof e?e:1),e=1===e.valpha?e.color:e.color.concat(this.valpha);return u.to.rgb.percent(e)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=l[this.model].channels,n=l[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new d(this.color.map((t=e,function(e){return Number(e.toFixed(t))})).concat(this.valpha),this.model);var t},alpha:function(e){return arguments.length?new d(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:r("rgb",0,o(255)),green:r("rgb",1,o(255)),blue:r("rgb",2,o(255)),hue:r(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:r("hsl",1,o(100)),lightness:r("hsl",2,o(100)),saturationv:r("hsv",1,o(100)),value:r("hsv",2,o(100)),chroma:r("hcg",1,o(100)),gray:r("hcg",2,o(100)),white:r("hwb",1,o(100)),wblack:r("hwb",2,o(100)),cyan:r("cmyk",0,o(100)),magenta:r("cmyk",1,o(100)),yellow:r("cmyk",2,o(100)),black:r("cmyk",3,o(100)),x:r("xyz",0,o(100)),y:r("xyz",1,o(100)),z:r("xyz",2,o(100)),l:r("lab",0,o(100)),a:r("lab",1),b:r("lab",2),keyword:function(e){return arguments.length?new d(e):l[this.model].keyword(this.color)},hex:function(e){return arguments.length?new d(e):u.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),e=e.luminosity();return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)},level:function(e){e=this.contrast(e);return 7.1<=e?"AAA":4.5<=e?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,e=.3*e[0]+.59*e[1]+.11*e[2];return d.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),e=(e=(t.color[0]+e)%360)<0?360+e:e;return t.color[0]=e,t},mix:function(e,t){var n,r,o,i;if(e&&e.rgb)return n=e.rgb(),r=this.rgb(),i=1-(o=(1+((o=2*(t=void 0===t?.5:t)-1)*(i=n.alpha()-r.alpha())==-1?o:(o+i)/(1+o*i)))/2),d.rgb(o*n.red()+i*r.red(),o*n.green()+i*r.green(),o*n.blue()+i*r.blue(),n.alpha()*t+r.alpha()*(1-t));throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+a(e))}},Object.keys(l).forEach(function(n){var r;-1===f.indexOf(n)&&(r=l[n].channels,d.prototype[n]=function(){var e,t;return this.model===n?new d(this):arguments.length?new d(arguments,n):(t="number"==typeof arguments[r]?r:this.valpha,new d((e=l[this.model][n].raw(this.color),(Array.isArray(e)?e:[e]).concat(t)),n))},d[n]=function(e){return new d(e="number"==typeof e?y(c.call(arguments),r):e,n)})}),e.exports=d},55023:function(e,t,n){"use strict";n=n(86727);e.exports=n},93123:function(e,t,n){"use strict";n=n(8690);e.exports=n},10879:function(e,t,n){"use strict";n(47422);n=n(50097);e.exports=n.Object.assign},33723:function(e,t,n){"use strict";n(44835);n=n(98384);e.exports=n.f("asyncIterator")},45980:function(e,t,n){"use strict";var r=n(30729),o=n(48434),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not a function")}},57563:function(e,t,n){"use strict";var r=n(10691),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not an object")}},48632:function(e,t,n){"use strict";function r(s){return function(e,t,n){var r,o=u(e),i=c(o),a=l(n,i);if(s&&t!=t){for(;a<i;)if((r=o[a++])!=r)return!0}else for(;a<i;a++)if((s||a in o)&&o[a]===t)return s||a||0;return!s&&-1}}var u=n(6462),l=n(65333),c=n(6803);e.exports={includes:r(!0),indexOf:r(!1)}},22177:function(e,t,n){"use strict";var n=n(99738),r=n({}.toString),o=n("".slice);e.exports=function(e){return o(r(e),8,-1)}},19029:function(e,t,n){"use strict";var u=n(61675),l=n(89402),c=n(67238),f=n(60704);e.exports=function(e,t,n){for(var r=l(t),o=f.f,i=c.f,a=0;a<r.length;a++){var s=r[a];u(e,s)||n&&u(n,s)||o(e,s,i(t,s))}}},58268:function(e,t,n){"use strict";var r=n(96539),o=n(60704),i=n(14925);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},14925:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},27454:function(e,t,n){"use strict";var a=n(30729),s=n(60704),u=n(37948),l=n(80161);e.exports=function(e,t,n,r){var o=(r=r||{}).enumerable,i=void 0!==r.name?r.name:t;if(a(n)&&u(n,i,r),r.global)o?e[t]=n:l(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:s.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}},80161:function(e,t,n){"use strict";var r=n(75835),o=Object.defineProperty;e.exports=function(t,n){try{o(r,t,{value:n,configurable:!0,writable:!0})}catch(e){r[t]=n}return n}},96539:function(e,t,n){"use strict";n=n(56583);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},89967:function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n="object"==("undefined"==typeof document?"undefined":t(document))&&document.all;e.exports={all:n,IS_HTMLDDA:void 0===n&&void 0!==n}},13343:function(e,t,n){"use strict";var r=n(75835),n=n(10691),o=r.document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},61785:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},39282:function(e,t,n){"use strict";var r,o,i=n(75835),n=n(61785),a=i.process,i=i.Deno,a=a&&a.versions||i&&i.version,i=a&&a.v8;!(o=i?0<(r=i.split("."))[0]&&r[0]<4?1:+(r[0]+r[1]):o)&&n&&(!(r=n.match(/Edge\/(\d+)/))||74<=r[1])&&(r=n.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},68525:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},97926:function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=n(75835),f=n(67238).f,h=n(58268),p=n(27454),d=n(80161),y=n(19029),g=n(13175);e.exports=function(e,t){var n,r,o,i,a=e.target,s=e.global,u=e.stat;if(n=s?c:u?c[a]||d(a,{}):(c[a]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(i=f(n,r))&&i.value:n[r],!g(s?r:a+(u?".":"#")+r,e.forced)&&void 0!==i){if(l(o)==l(i))continue;y(o,i)}(e.sham||i&&i.sham)&&h(o,"sham",!0),p(n,r,o,e)}}},56583:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},39096:function(e,t,n){"use strict";n=n(56583);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},75057:function(e,t,n){"use strict";var n=n(39096),r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},41864:function(e,t,n){"use strict";var r=n(96539),n=n(61675),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,n=n(o,"name"),a=n&&"something"===function(){}.name,r=n&&(!r||i(o,"name").configurable);e.exports={EXISTS:n,PROPER:a,CONFIGURABLE:r}},99738:function(e,t,n){"use strict";var n=n(39096),r=Function.prototype,o=r.call,r=n&&r.bind.bind(o,o);e.exports=n?r:function(e){return function(){return o.apply(e,arguments)}}},8078:function(e,t,n){"use strict";var r=n(75835),o=n(30729);e.exports=function(e,t){return arguments.length<2?(n=r[e],o(n)?n:void 0):r[e]&&r[e][t];var n}},92337:function(e,t,n){"use strict";var r=n(45980),o=n(16254);e.exports=function(e,t){e=e[t];return o(e)?void 0:r(e)}},75835:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return e&&e.Math===Math&&e}e.exports=o("object"==("undefined"==typeof globalThis?"undefined":r(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":r(window))&&window)||o("object"==("undefined"==typeof self?"undefined":r(self))&&self)||o("object"==(void 0===n.g?"undefined":r(n.g))&&n.g)||function(){return this}()||this||Function("return this")()},61675:function(e,t,n){"use strict";var r=n(99738),o=n(5825),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},20940:function(e){"use strict";e.exports={}},2175:function(e,t,n){"use strict";var r=n(96539),o=n(56583),i=n(13343);e.exports=!r&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},55407:function(e,t,n){"use strict";var r=n(99738),o=n(56583),i=n(22177),a=Object,s=r("".split);e.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?s(e,""):a(e)}:a},86111:function(e,t,n){"use strict";var r=n(99738),o=n(30729),n=n(29700),i=r(Function.toString);o(n.inspectSource)||(n.inspectSource=function(e){return i(e)}),e.exports=n.inspectSource},44751:function(e,t,n){"use strict";var r,o,i,a,s=n(39801),u=n(75835),l=n(10691),c=n(58268),f=n(61675),h=n(29700),p=n(67307),n=n(20940),d=u.TypeError,u=u.WeakMap,y=s||h.state?((i=h.state||(h.state=new u)).get=i.get,i.has=i.has,i.set=i.set,r=function(e,t){if(i.has(e))throw d("Object already initialized");return t.facade=e,i.set(e,t),t},o=function(e){return i.get(e)||{}},function(e){return i.has(e)}):(n[a=p("state")]=!0,r=function(e,t){if(f(e,a))throw d("Object already initialized");return t.facade=e,c(e,a,t),t},o=function(e){return f(e,a)?e[a]:{}},function(e){return f(e,a)});e.exports={set:r,get:o,has:y,enforce:function(e){return y(e)?o(e):r(e,{})},getterFor:function(t){return function(e){if(l(e)&&(e=o(e)).type===t)return e;throw d("Incompatible receiver, "+t+" required")}}}},30729:function(e,t,n){"use strict";var n=n(89967),r=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},13175:function(e,t,n){"use strict";function r(e,t){return(e=u[s(e)])===c||e!==l&&(i(t)?o(t):!!t)}var o=n(56583),i=n(30729),a=/#|\.prototype\./,s=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},u=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";e.exports=r},16254:function(e){"use strict";e.exports=function(e){return null==e}},10691:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(30729),n=n(89967),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"object"==r(e)?null!==e:o(e)||e===i}:function(e){return"object"==r(e)?null!==e:o(e)}},31437:function(e){"use strict";e.exports=!1},44192:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(8078),i=n(30729),a=n(55522),n=n(77860),s=Object;e.exports=n?function(e){return"symbol"==r(e)}:function(e){var t=o("Symbol");return i(t)&&a(t.prototype,s(e))}},6803:function(e,t,n){"use strict";var r=n(85108);e.exports=function(e){return r(e.length)}},37948:function(e,t,n){"use strict";var r=n(99738),o=n(56583),i=n(30729),a=n(61675),s=n(96539),u=n(41864).CONFIGURABLE,l=n(86111),n=n(44751),c=n.enforce,f=n.get,h=String,p=Object.defineProperty,d=r("".slice),y=r("".replace),g=r([].join),v=s&&!o(function(){return 8!==p(function(){},"length",{value:8}).length}),m=String(String).split("String"),n=e.exports=function(e,t,n){"Symbol("===d(h(t),0,7)&&(t="["+y(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&a(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}n=c(e);return a(n,"source")||(n.source=g(m,"string"==typeof t?t:"")),e};Function.prototype.toString=n(function(){return i(this)&&f(this).source||l(this)},"toString")},84920:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){e=+e;return(0<e?n:t)(e)}},77328:function(e,t,n){"use strict";var h=n(96539),r=n(99738),p=n(75057),o=n(56583),d=n(35403),y=n(47485),g=n(75339),v=n(5825),m=n(55407),i=Object.assign,a=Object.defineProperty,b=r([].concat);e.exports=!i||o(function(){var e,t,n;return!(!h||1===i({b:1},i(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},(e={})[n=Symbol("assign detection")]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!==i({},e)[n])||"abcdefghijklmnopqrst"!==d(i({},t)).join("")})?function(e,t){for(var n=v(e),r=arguments.length,o=1,i=y.f,a=g.f;o<r;)for(var s,u=m(arguments[o++]),l=i?b(d(u),i(u)):d(u),c=l.length,f=0;f<c;)s=l[f++],h&&!p(a,u,s)||(n[s]=u[s]);return n}:i},60704:function(e,t,n){"use strict";var r=n(96539),o=n(2175),i=n(4821),a=n(57563),s=n(99737),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=r?i?function(e,t,n){var r;return a(e),t=s(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable&&(r=c(e,t))&&r.writable&&(e[t]=n.value,n={configurable:("configurable"in n?n:r).configurable,enumerable:("enumerable"in n?n:r).enumerable,writable:!1}),l(e,t,n)}:l:function(e,t,n){if(a(e),t=s(t),a(n),o)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},67238:function(e,t,n){"use strict";var r=n(96539),o=n(75057),i=n(75339),a=n(14925),s=n(6462),u=n(99737),l=n(61675),c=n(2175),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(e){}if(l(e,t))return a(!o(i.f,e,t),e[t])}},95454:function(e,t,n){"use strict";var r=n(70497),o=n(68525).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},47485:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},55522:function(e,t,n){"use strict";n=n(99738);e.exports=n({}.isPrototypeOf)},70497:function(e,t,n){"use strict";var r=n(99738),a=n(61675),s=n(6462),u=n(48632).indexOf,l=n(20940),c=r([].push);e.exports=function(e,t){var n,r=s(e),o=0,i=[];for(n in r)!a(l,n)&&a(r,n)&&c(i,n);for(;t.length>o;)!a(r,n=t[o++])||~u(i,n)||c(i,n);return i}},35403:function(e,t,n){"use strict";var r=n(70497),o=n(68525);e.exports=Object.keys||function(e){return r(e,o)}},75339:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){e=r(this,e);return!!e&&e.enumerable}:n},32821:function(e,t,n){"use strict";var o=n(75057),i=n(30729),a=n(10691),s=TypeError;e.exports=function(e,t){var n,r;if("string"===t&&i(n=e.toString)&&!a(r=o(n,e)))return r;if(i(n=e.valueOf)&&!a(r=o(n,e)))return r;if("string"!==t&&i(n=e.toString)&&!a(r=o(n,e)))return r;throw s("Can't convert object to primitive value")}},89402:function(e,t,n){"use strict";var r=n(8078),o=n(99738),i=n(95454),a=n(47485),s=n(57563),u=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=a.f;return n?u(t,n(e)):t}},50097:function(e,t,n){"use strict";n=n(75835);e.exports=n},71894:function(e,t,n){"use strict";var r=n(16254),o=TypeError;e.exports=function(e){if(r(e))throw o("Can't call method on "+e);return e}},67307:function(e,t,n){"use strict";var r=n(85464),o=n(16065),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},29700:function(e,t,n){"use strict";var r=n(75835),n=n(80161),r=r["__core-js_shared__"]||n("__core-js_shared__",{});e.exports=r},85464:function(e,t,n){"use strict";var r=n(31437),o=n(29700);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.2",mode:r?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},94993:function(e,t,n){"use strict";var r=n(39282),o=n(56583),i=n(75835).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},65333:function(e,t,n){"use strict";var r=n(71087),o=Math.max,i=Math.min;e.exports=function(e,t){e=r(e);return e<0?o(e+t,0):i(e,t)}},6462:function(e,t,n){"use strict";var r=n(55407),o=n(71894);e.exports=function(e){return r(o(e))}},71087:function(e,t,n){"use strict";var r=n(84920);e.exports=function(e){e=+e;return e!=e||0==e?0:r(e)}},85108:function(e,t,n){"use strict";var r=n(71087),o=Math.min;e.exports=function(e){return 0<e?o(r(e),9007199254740991):0}},5825:function(e,t,n){"use strict";var r=n(71894),o=Object;e.exports=function(e){return o(r(e))}},41044:function(e,t,n){"use strict";var r=n(75057),o=n(10691),i=n(44192),a=n(92337),s=n(32821),n=n(63121),u=TypeError,l=n("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n=a(e,l);if(n){if(n=r(n,e,t=void 0===t?"default":t),!o(n)||i(n))return n;throw u("Can't convert object to primitive value")}return s(e,t=void 0===t?"number":t)}},99737:function(e,t,n){"use strict";var r=n(41044),o=n(44192);e.exports=function(e){e=r(e,"string");return o(e)?e:e+""}},48434:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},16065:function(e,t,n){"use strict";var n=n(99738),r=0,o=Math.random(),i=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++r+o,36)}},77860:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=n(94993);e.exports=n&&!Symbol.sham&&"symbol"==r(Symbol.iterator)},4821:function(e,t,n){"use strict";var r=n(96539),n=n(56583);e.exports=r&&n(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},39801:function(e,t,n){"use strict";var r=n(75835),n=n(30729),r=r.WeakMap;e.exports=n(r)&&/native code/.test(String(r))},75336:function(e,t,n){"use strict";var r=n(50097),o=n(61675),i=n(98384),a=n(60704).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},98384:function(e,t,n){"use strict";n=n(63121);t.f=n},63121:function(e,t,n){"use strict";var r=n(75835),o=n(85464),i=n(61675),a=n(16065),s=n(94993),n=n(77860),u=r.Symbol,l=o("wks"),c=n?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return i(l,e)||(l[e]=s&&i(u,e)?u[e]:c("Symbol."+e)),l[e]}},47422:function(e,t,n){"use strict";var r=n(97926),n=n(77328);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==n},{assign:n})},44835:function(e,t,n){"use strict";n(75336)("asyncIterator")},86727:function(e,t,n){"use strict";n=n(10879);e.exports=n},8690:function(e,t,n){"use strict";n=n(33723);e.exports=n},15128:function(e,t){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(e){"use strict";var i={value:function(){}};function t(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new o(r)}function o(e){this._=e}function u(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=i,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}o.prototype=t.prototype={constructor:o,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)o[n]=u(o[n],e.name,t);else if(null==t)for(n in o)o[n]=u(o[n],e.name,null);return this}for(;++a<s;)if(n=(n=(e=i[a]).type)&&function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(o[n],e.name))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new o(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}},e.dispatch=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},3301:function(e,t){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(e){"use strict";function t(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function n(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var r=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),o=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),i=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),a=Math.PI,s=a/2;function u(e){return(1-Math.cos(a*e))/2}function l(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function c(e){return((e*=2)<=1?l(1-e):2-l(e-1))/2}function f(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var h=7.5625;function p(e){return(e=+e)<4/11?h*e*e:e<8/11?h*(e-=6/11)*e+.75:e<10/11?h*(e-=9/11)*e+.9375:h*(e-=21/22)*e+63/64}var d=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(1.70158),y=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(1.70158),g=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),v=2*Math.PI,m=function t(n,r){var o=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return n*l(- --e)*Math.sin((o-e)/r)}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3),b=function t(n,r){var o=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return 1-n*l(e=+e)*Math.sin((e+o)/r)}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3),w=function t(n,r){var o=Math.asin(1/(n=Math.max(1,n)))*(r/=v);function e(e){return((e=2*e-1)<0?n*l(-e)*Math.sin((o-e)/r):2-n*l(e)*Math.sin((o+e)/r))/2}return e.amplitude=function(e){return t(e,r*v)},e.period=function(e){return t(n,e)},e}(1,.3);e.easeBack=g,e.easeBackIn=d,e.easeBackInOut=g,e.easeBackOut=y,e.easeBounce=p,e.easeBounceIn=function(e){return 1-p(1-e)},e.easeBounceInOut=function(e){return((e*=2)<=1?1-p(1-e):p(e-1)+1)/2},e.easeBounceOut=p,e.easeCircle=f,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleInOut=f,e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCubic=n,e.easeCubicIn=function(e){return e*e*e},e.easeCubicInOut=n,e.easeCubicOut=function(e){return--e*e*e+1},e.easeElastic=b,e.easeElasticIn=m,e.easeElasticInOut=w,e.easeElasticOut=b,e.easeExp=c,e.easeExpIn=function(e){return l(1-+e)},e.easeExpInOut=c,e.easeExpOut=function(e){return 1-l(e)},e.easeLinear=function(e){return+e},e.easePoly=i,e.easePolyIn=r,e.easePolyInOut=i,e.easePolyOut=o,e.easeQuad=t,e.easeQuadIn=function(e){return e*e},e.easeQuadInOut=t,e.easeQuadOut=function(e){return e*(2-e)},e.easeSin=u,e.easeSinIn=function(e){return 1==+e?1:1-Math.cos(e*s)},e.easeSinInOut=u,e.easeSinOut=function(e){return Math.sin(e*s)},Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},56129:function(e,t,n){var r;function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(e,g,v,m){"use strict";function b(e){return function(){return e}}function w(e){return 1e-6*(e()-.5)}function _(e){return e.x+e.vx}function x(e){return e.y+e.vy}function S(e){return e.index}function O(e,t){e=e.get(t);if(e)return e;throw new Error("node not found: "+t)}function s(e){return e.x}function y(e){return e.y}var P=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(i,a){var s,u=1;function t(){for(var e,t=s.length,n=0,r=0,o=0;o<t;++o)n+=(e=s[o]).x,r+=e.y;for(n=(n/t-i)*u,r=(r/t-a)*u,o=0;o<t;++o)(e=s[o]).x-=n,e.y-=r}return null==i&&(i=0),null==a&&(a=0),t.initialize=function(e){s=e},t.x=function(e){return arguments.length?(i=+e,t):i},t.y=function(e){return arguments.length?(a=+e,t):a},t.strength=function(e){return arguments.length?(u=+e,t):u},t},e.forceCollide=function(r){var i,a,h,p=1,d=1;function t(){for(var e,t,s,u,l,c,f,n=i.length,r=0;r<d;++r)for(t=g.quadtree(i,_,x).visitAfter(y),e=0;e<n;++e)s=i[e],c=a[s.index],f=c*c,u=s.x+s.vx,l=s.y+s.vy,t.visit(o);function o(e,t,n,r,o){var i=e.data,e=e.r,a=c+e;if(!i)return u+a<t||r<u-a||l+a<n||o<l-a;i.index>s.index&&(n=(t=u-i.x-i.vx)*t+(r=l-i.y-i.vy)*r)<a*a&&(0===t&&(n+=(t=w(h))*t),0===r&&(n+=(r=w(h))*r),n=(a-(n=Math.sqrt(n)))/n*p,s.vx+=(t*=n)*(a=(e*=e)/(f+e)),s.vy+=(r*=n)*a,i.vx-=t*(a=1-a),i.vy-=r*a)}}function y(e){if(e.data)return e.r=a[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function n(){if(i){var e,t,n=i.length;for(a=new Array(n),e=0;e<n;++e)t=i[e],a[t.index]=+r(t,e,i)}}return"function"!=typeof r&&(r=b(null==r?1:+r)),t.initialize=function(e,t){i=e,h=t,n()},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(p=+e,t):p},t.radius=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),n(),t):r},t},e.forceLink=function(l){var c,f,i,a,h,p,s=S,n=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},r=b(30),d=1;function t(e){for(var t=0,n=l.length;t<d;++t)for(var r,o,i,a,s,u=0;u<n;++u)r=(o=l[u]).source,i=(o=o.target).x+o.vx-r.x-r.vx||w(p),a=o.y+o.vy-r.y-r.vy||w(p),i*=s=((s=Math.sqrt(i*i+a*a))-f[u])/s*e*c[u],a*=s,o.vx-=i*(s=h[u]),o.vy-=a*s,r.vx+=i*(s=1-s),r.vy+=a*s}function o(){if(i){var e,t=i.length,n=l.length,r=new Map(i.map(function(e,t){return[s(e,t,i),e]})),o=0;for(a=new Array(t);o<n;++o)(e=l[o]).index=o,"object"!==E(e.source)&&(e.source=O(r,e.source)),"object"!==E(e.target)&&(e.target=O(r,e.target)),a[e.source.index]=(a[e.source.index]||0)+1,a[e.target.index]=(a[e.target.index]||0)+1;for(o=0,h=new Array(n);o<n;++o)e=l[o],h[o]=a[e.source.index]/(a[e.source.index]+a[e.target.index]);c=new Array(n),u(),f=new Array(n),y()}}function u(){if(i)for(var e=0,t=l.length;e<t;++e)c[e]=+n(l[e],e,l)}function y(){if(i)for(var e=0,t=l.length;e<t;++e)f[e]=+r(l[e],e,l)}return null==l&&(l=[]),t.initialize=function(e,t){i=e,p=t,o()},t.links=function(e){return arguments.length?(l=e,o(),t):l},t.id=function(e){return arguments.length?(s=e,t):s},t.iterations=function(e){return arguments.length?(d=+e,t):d},t.strength=function(e){return arguments.length?(n="function"==typeof e?e:b(+e),u(),t):n},t.distance=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),y(),t):r},t},e.forceManyBody=function(){var o,u,l,c,f,r=b(-30),h=1,p=1/0,d=.81;function t(e){var t,n=o.length,r=g.quadtree(o,s,y).visitAfter(i);for(c=e,t=0;t<n;++t)u=o[t],r.visit(a)}function n(){if(o){var e,t,n=o.length;for(f=new Array(n),e=0;e<n;++e)t=o[e],f[t.index]=+r(t,e,o)}}function i(e){var t,n,r,o,i,a=0,s=0;if(e.length){for(r=o=i=0;i<4;++i)(t=e[i])&&(n=Math.abs(t.value))&&(a+=t.value,s+=n,r+=n*t.x,o+=n*t.y);e.x=r/s,e.y=o/s}else for((t=e).x=t.data.x,t.y=t.data.y;a+=f[t.data.index],t=t.next;);e.value=a}function a(e,t,n,r){if(!e.value)return!0;var o=e.x-u.x,i=e.y-u.y,a=r-t,s=o*o+i*i;if(a*a/d<s)return s<p&&(0===o&&(s+=(o=w(l))*o),0===i&&(s+=(i=w(l))*i),s<h&&(s=Math.sqrt(h*s)),u.vx+=o*e.value*c/s,u.vy+=i*e.value*c/s),!0;if(!(e.length||p<=s))for((e.data!==u||e.next)&&(0===o&&(s+=(o=w(l))*o),0===i&&(s+=(i=w(l))*i),s<h)&&(s=Math.sqrt(h*s));e.data!==u&&(a=f[e.data.index]*c/s,u.vx+=o*a,u.vy+=i*a),e=e.next;);}return t.initialize=function(e,t){o=e,l=t,n()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),n(),t):r},t.distanceMin=function(e){return arguments.length?(h=e*e,t):Math.sqrt(h)},t.distanceMax=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.theta=function(e){return arguments.length?(d=e*e,t):Math.sqrt(d)},t},e.forceRadial=function(n,s,u){var l,c,f,r=b(.1);function t(e){for(var t=0,n=l.length;t<n;++t){var r=l[t],o=r.x-s||1e-6,i=r.y-u||1e-6,a=Math.sqrt(o*o+i*i),a=(f[t]-a)*c[t]*e/a;r.vx+=o*a,r.vy+=i*a}}function o(){if(l){var e,t=l.length;for(c=new Array(t),f=new Array(t),e=0;e<t;++e)f[e]=+n(l[e],e,l),c[e]=isNaN(f[e])?0:+r(l[e],e,l)}}return"function"!=typeof n&&(n=b(+n)),null==s&&(s=0),null==u&&(u=0),t.initialize=function(e){l=e,o()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),o(),t):r},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:b(+e),o(),t):n},t.x=function(e){return arguments.length?(s=+e,t):s},t.y=function(e){return arguments.length?(u=+e,t):u},t},e.forceSimulation=function(u){var i,e,a=1,t=.001,s=1-Math.pow(t,1/300),l=0,c=.6,f=new Map,n=m.timer(h),r=v.dispatch("tick","end"),o=(e=1,function(){return(e=(1664525*e+1013904223)%4294967296)/4294967296});function h(){p(),r.call("tick",i),a<t&&(n.stop(),r.call("end",i))}function p(e){var t,n,r=u.length;void 0===e&&(e=1);for(var o=0;o<e;++o)for(a+=(l-a)*s,f.forEach(function(e){e(a)}),t=0;t<r;++t)null==(n=u[t]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0);return i}function d(){for(var e,t,n,r=0,o=u.length;r<o;++r)(e=u[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),(isNaN(e.x)||isNaN(e.y))&&(t=10*Math.sqrt(.5+r),n=r*P,e.x=t*Math.cos(n),e.y=t*Math.sin(n)),(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}function y(e){return e.initialize&&e.initialize(u,o),e}return null==u&&(u=[]),d(),i={tick:p,restart:function(){return n.restart(h),i},stop:function(){return n.stop(),i},nodes:function(e){return arguments.length?(u=e,d(),f.forEach(y),i):u},alpha:function(e){return arguments.length?(a=+e,i):a},alphaMin:function(e){return arguments.length?(t=+e,i):t},alphaDecay:function(e){return arguments.length?(s=+e,i):+s},alphaTarget:function(e){return arguments.length?(l=+e,i):l},velocityDecay:function(e){return arguments.length?(c=1-e,i):1-c},randomSource:function(e){return arguments.length?(o=e,f.forEach(y),i):o},force:function(e,t){return 1<arguments.length?(null==t?f.delete(e):f.set(e,y(t)),i):f.get(e)},find:function(e,t,n){var r,o,i,a=0,s=u.length;for(null==n?n=1/0:n*=n,a=0;a<s;++a)(r=(r=e-(o=u[a]).x)*r+(r=t-o.y)*r)<n&&(i=o,n=r);return i},on:function(e,t){return 1<arguments.length?(r.on(e,t),i):r.on(e)}}},e.forceX=function(n){var o,i,a,r=b(.1);function t(e){for(var t,n=0,r=o.length;n<r;++n)(t=o[n]).vx+=(a[n]-t.x)*i[n]*e}function s(){if(o){var e,t=o.length;for(i=new Array(t),a=new Array(t),e=0;e<t;++e)i[e]=isNaN(a[e]=+n(o[e],e,o))?0:+r(o[e],e,o)}}return"function"!=typeof n&&(n=b(null==n?0:+n)),t.initialize=function(e){o=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),s(),t):r},t.x=function(e){return arguments.length?(n="function"==typeof e?e:b(+e),s(),t):n},t},e.forceY=function(n){var o,i,a,r=b(.1);function t(e){for(var t,n=0,r=o.length;n<r;++n)(t=o[n]).vy+=(a[n]-t.y)*i[n]*e}function s(){if(o){var e,t=o.length;for(i=new Array(t),a=new Array(t),e=0;e<t;++e)i[e]=isNaN(a[e]=+n(o[e],e,o))?0:+r(o[e],e,o)}}return"function"!=typeof n&&(n=b(null==n?0:+n)),t.initialize=function(e){o=e,s()},t.strength=function(e){return arguments.length?(r="function"==typeof e?e:b(+e),s(),t):r},t.y=function(e){return arguments.length?(n="function"==typeof e?e:b(+e),s(),t):n},t},Object.defineProperty(e,"__esModule",{value:!0})},"object"===E(t)?r(t,n(21617),n(15128),n(42433)):(n=[t,n(21617),n(15128),n(42433)],void 0!==(t="function"==typeof(r=r)?r.apply(t,n):r)&&(e.exports=t))},21617:function(e,t){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(e){"use strict";function f(e,t,n,r){if(!isNaN(t)&&!isNaN(n)){var o,i,a,s,u,l,c,f,h,p=e._root,d={data:r},y=e._x0,g=e._y0,v=e._x1,m=e._y1;if(p){for(;p.length;)if((l=t>=(i=(y+v)/2))?y=i:v=i,(c=n>=(a=(g+m)/2))?g=a:m=a,!(p=(o=p)[f=c<<1|l]))return o[f]=d,e;if(s=+e._x.call(null,p.data),u=+e._y.call(null,p.data),t===s&&n===u)d.next=p,o?o[f]=d:e._root=d;else{for(;o=o?o[f]=new Array(4):e._root=new Array(4),(l=t>=(i=(y+v)/2))?y=i:v=i,(c=n>=(a=(g+m)/2))?g=a:m=a,(f=c<<1|l)==(h=(a<=u)<<1|i<=s););o[h]=p,o[f]=d}}else e._root=d}return e}function v(e,t,n,r,o){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=o}function r(e){return e[0]}function o(e){return e[1]}function t(e,t,n){t=new i(null==t?r:t,null==n?o:n,NaN,NaN,NaN,NaN);return null==e?t:t.addAll(e)}function i(e,t,n,r,o,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function a(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var n=t.prototype=i.prototype;n.copy=function(){var e,t,n=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var o=0;o<4;++o)(t=r.source[o])&&(t.length?e.push({source:t,target:r.target[o]=new Array(4)}):r.target[o]=a(t));else n._root=a(r);return n},n.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return f(this.cover(t,n),t,n,e)},n.addAll=function(e){for(var t,n,r=e.length,o=new Array(r),i=new Array(r),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<r;++c)isNaN(t=+this._x.call(null,n=e[c]))||isNaN(n=+this._y.call(null,n))||((o[c]=t)<a&&(a=t),u<t&&(u=t),(i[c]=n)<s&&(s=n),l<n&&(l=n));if(!(u<a||l<s))for(this.cover(a,s).cover(u,l),c=0;c<r;++c)f(this,o[c],i[c],e[c]);return this},n.cover=function(e,t){if(!isNaN(e=+e)&&!isNaN(t=+t)){var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var a,s,u=o-n||1,l=this._root;e<n||o<=e||t<r||i<=t;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:o=n+u,i=r+u;break;case 1:n=o-u,i=r+u;break;case 2:o=n+u,r=i-u;break;case 3:n=o-u,r=i-u}this._root&&this._root.length&&(this._root=l)}this._x0=n,this._y0=r,this._x1=o,this._y1=i}return this},n.data=function(){var t=[];return this.visit(function(e){if(!e.length)for(;t.push(e.data),e=e.next;);}),t},n.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(e,t,n){var r,o,i,a,s,u,l,c,f=this._x0,h=this._y0,p=this._x1,d=this._y1,y=[],g=this._root;for(g&&y.push(new v(g,f,h,p,d)),null==n?n=1/0:(f=e-n,h=t-n,p=e+n,d=t+n,n*=n);r=y.pop();)!(g=r.node)||(s=r.x0)>p||(u=r.y0)>d||(a=r.x1)<f||(o=r.y1)<h||(g.length?(y.push(new v(g[3],i=(s+a)/2,l=(u+o)/2,a,o),new v(g[2],s,l,i,o),new v(g[1],i,u,a,l),new v(g[0],s,u,i,l)),(o=(l<=t)<<1|i<=e)&&(r=y[y.length-1],y[y.length-1]=y[y.length-1-o],y[y.length-1-o]=r)):(u=(a=e-+this._x.call(null,g.data))*a+(s=t-+this._y.call(null,g.data))*s)<n&&(f=e-(l=Math.sqrt(n=u)),h=t-l,p=e+l,d=t+l,c=g.data));return c},n.remove=function(e){if(!isNaN(i=+this._x.call(null,e))&&!isNaN(a=+this._y.call(null,e))){var t,n,r,o,i,a,s,u,l,c,f,h=this._root,p=this._x0,d=this._y0,y=this._x1,g=this._y1;if(h){if(h.length)for(;;){if((u=i>=(s=(p+y)/2))?p=s:y=s,(l=a>=(s=(d+g)/2))?d=s:g=s,!(h=(t=h)[c=l<<1|u]))return this;if(!h.length)break;(t[c+1&3]||t[c+2&3]||t[c+3&3])&&(n=t,f=c)}for(;h.data!==e;)if(!(h=(r=h).next))return this;(o=h.next)&&delete h.next,r?o?r.next=o:delete r.next:t?(o?t[c]=o:delete t[c],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[f]=h:this._root=h)):this._root=o}}return this},n.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},n.root=function(){return this._root},n.size=function(){var t=0;return this.visit(function(e){if(!e.length)for(;++t,e=e.next;);}),t},n.visit=function(e){var t,n,r,o,i,a,s,u=[],l=this._root;for(l&&u.push(new v(l,this._x0,this._y0,this._x1,this._y1));i=u.pop();)!e(l=i.node,n=i.x0,r=i.y0,o=i.x1,i=i.y1)&&l.length&&(a=(n+o)/2,s=(r+i)/2,(t=l[3])&&u.push(new v(t,a,s,o,i)),(t=l[2])&&u.push(new v(t,n,s,a,i)),(t=l[1])&&u.push(new v(t,a,r,o,s)),t=l[0])&&u.push(new v(t,n,r,a,s));return this},n.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new v(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o,i,a,s,u,l,c,f=t.node;f.length&&(i=t.x0,a=t.y0,l=(i+(s=t.x1))/2,c=(a+(u=t.y1))/2,(o=f[0])&&n.push(new v(o,i,a,l,c)),(o=f[1])&&n.push(new v(o,l,a,s,c)),(o=f[2])&&n.push(new v(o,i,c,l,u)),o=f[3])&&n.push(new v(o,l,c,s,u)),r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},n.x=function(e){return arguments.length?(this._x=e,this):this._x},n.y=function(e){return arguments.length?(this._y=e,this):this._y},e.quadtree=t,Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},42433:function(e,t){var n;function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(e){"use strict";var o,i,a=0,s=0,t=0,n=1e3,u=0,l=0,c=0,f="object"===("undefined"==typeof performance?"undefined":w(performance))&&performance.now?performance:Date,r="object"===("undefined"==typeof window?"undefined":w(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return l||(r(p),l=f.now()+c)}function p(){l=0}function d(){this._call=this._time=this._next=null}function y(e,t,n){var r=new d;return r.restart(e,t,n),r}function g(){h(),++a;for(var e,t=o;t;)0<=(e=l-t._time)&&t._call.call(null,e),t=t._next;--a}function v(){l=(u=f.now())+c,a=s=0;try{g()}finally{for(var e,t,n=o,r=1/(a=0);n;)n=n._call?(r>n._time&&(r=n._time),(e=n)._next):(t=n._next,n._next=null,e?e._next=t:o=t);i=e,b(r),l=0}}function m(){var e=f.now(),t=e-u;n<t&&(c-=t,u=e)}function b(e){a||(s=s&&clearTimeout(s),24<e-l?(e<1/0&&(s=setTimeout(v,e-f.now()-c)),t=t&&clearInterval(t)):(t||(u=f.now(),t=setInterval(m,n)),a=1,r(v)))}d.prototype=y.prototype={constructor:d,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?h():+n)+(null==t?0:+t),this._next||i===this||(i?i._next=this:o=this,i=this),this._call=e,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},e.interval=function(n,r,o){var i=new d,a=r;return null==r?i.restart(n,r,o):(r=+r,o=null==o?h():+o,i.restart(function e(t){t+=a,i.restart(e,a+=r,o),n(t)},r,o)),i},e.now=h,e.timeout=function(t,n,e){var r=new d;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},e.timer=y,e.timerFlush=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"===w(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},94756:function(e,t,bi){var n;function wi(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){return(xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Si(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=o(n),t=(e=r?(e=o(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ki(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(x){"use strict";var N={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function D(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(1<arguments.length&&void 0!==arguments[1]?arguments[1]:N)),n=(null==(n=null==e?void 0:e.graph)?void 0:n.meta)||{},r=(null==(r=null==e?void 0:e.subScene)?void 0:r.meta)||{},o=(null==(o=null==e?void 0:e.nodeSize)?void 0:o.meta)||{},e=(null==(e=null==e?void 0:e.nodeSize)?void 0:e.node)||{},i=t.nodeSize.bridge;return{graph:{meta:Object.assign(t.graph.meta,n)},subScene:{meta:Object.assign(t.subScene.meta,r)},nodeSize:{meta:Object.assign(t.nodeSize.meta,o),node:Object.assign(t.nodeSize.node,e),bridge:i}}}function B(e){return"".concat(e,"")}var u=B("ROOT"),F=B("BRIDGE_GRAPH"),e=((e=x.NodeType||(x.NodeType={}))[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE",(e=x.InclusionType||(x.InclusionType={}))[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED",(e=x.GraphType||(x.GraphType={}))[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE",(e=x.HierarchyNodeType||(x.HierarchyNodeType={}))[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==bi.g?bi.g:"undefined"!=typeof self?self:{});function G(e,t){return e(t={exports:{}},t.exports),t.exports}function z(e,t){for(var n=e.length;n--;)if(b(e[n][0],t))return n;return-1}var b=function(e,t){return e===t||e!=e&&t!=t},U=Array.prototype.splice;function t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}t.prototype.clear=function(){this.__data__=[],this.size=0},t.prototype.delete=function(e){var t=this.__data__,e=z(t,e);return!(e<0||(e==t.length-1?t.pop():U.call(t,e,1),--this.size,0))},t.prototype.get=function(e){var t=this.__data__,e=z(t,e);return e<0?void 0:t[e][1]},t.prototype.has=function(e){return-1<z(this.__data__,e)},t.prototype.set=function(e,t){var n=this.__data__,r=z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function n(e,t){return e=null==e?void 0:e[t],!S(t=e)||K&&K in t||!(Z(t)?ee:$).test(i(t))?void 0:e}var V=t,W="object"==ki(e)&&e&&e.Object===Object&&e,e="object"==("undefined"==typeof self?"undefined":ki(self))&&self&&self.Object===Object&&self,o=W||e||Function("return this")(),e=o.Symbol,r=Object.prototype,Y=r.hasOwnProperty,H=r.toString,X=e?e.toStringTag:void 0,q=Object.prototype.toString,J=e?e.toStringTag:void 0,_=function(e){{if(null==e)return void 0===e?"[object Undefined]":"[object Null]";if(J&&J in Object(e)){var t=e,n=Y.call(t,X),r=t[X];try{var o=!(t[X]=void 0)}catch(t){}var i=H.call(t);return o&&(n?t[X]=r:delete t[X]),i}return q.call(e)}},S=function(e){var t=ki(e);return null!=e&&("object"==t||"function"==t)},Z=function(e){return!!S(e)&&("[object Function]"==(e=_(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},r=o["__core-js_shared__"],K=(r=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Q=Function.prototype.toString,i=function(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""},$=/^\[object .+?Constructor\]$/,r=Function.prototype,a=Object.prototype,r=r.toString,a=a.hasOwnProperty,ee=RegExp("^"+r.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=n(o,"Map"),ne=n(Object,"create"),re=Object.prototype.hasOwnProperty,oe=Object.prototype.hasOwnProperty;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},s.prototype.delete=function(e){e=this.has(e)&&delete this.__data__[e];return this.size-=e?1:0,e},s.prototype.get=function(e){var t,n=this.__data__;return ne?"__lodash_hash_undefined__"===(t=n[e])?void 0:t:re.call(n,e)?n[e]:void 0},s.prototype.has=function(e){var t=this.__data__;return ne?void 0!==t[e]:oe.call(t,e)},s.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&void 0===t?"__lodash_hash_undefined__":t,this};function ie(e,t){var n,r,e=e.__data__;return("string"==(r=ki(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}var ae=s;function se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}se.prototype.clear=function(){this.size=0,this.__data__={hash:new ae,map:new(te||V),string:new ae}},se.prototype.delete=function(e){e=ie(this,e).delete(e);return this.size-=e?1:0,e},se.prototype.get=function(e){return ie(this,e).get(e)},se.prototype.has=function(e){return ie(this,e).has(e)},se.prototype.set=function(e,t){var n=ie(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ue=se;function le(e){e=this.__data__=new V(e);this.size=e.size}le.prototype.clear=function(){this.__data__=new V,this.size=0},le.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},le.prototype.get=function(e){return this.__data__.get(e)},le.prototype.has=function(e){return this.__data__.has(e)},le.prototype.set=function(e,t){var n=this.__data__;if(n instanceof V){var r=n.__data__;if(!te||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ue(r)}return n.set(e,t),this.size=n.size,this};function ce(e,t,n,r){var o=!n;n=n||{};for(var i=-1,a=t.length;++i<a;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),(o?xe:Oe)(n,s,u)}return n}function fe(e){return O(e)&&"[object Arguments]"==_(e)}function he(){return!1}function pe(t){return function(e){return t(e)}}function de(t,n){return function(e){return t(n(e))}}function ye(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t}function ge(){return[]}function ve(e){return Je(e,g,Ye)}function me(e){return"function"!=typeof e.constructor||Le(e)?{}:dt(Xe(e))}var be=le,we=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},_e=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),xe=function(e,t,n){"__proto__"==t&&_e?_e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Se=Object.prototype.hasOwnProperty,Oe=function(e,t,n){var r=e[t];Se.call(e,t)&&b(r,n)&&(void 0!==n||t in e)||xe(e,t,n)},O=function(e){return null!=e&&"object"==ki(e)},r=Object.prototype,Pe=r.hasOwnProperty,Ee=r.propertyIsEnumerable,ke=fe(function(){return arguments}())?fe:function(e){return O(e)&&Pe.call(e,"callee")&&!Ee.call(e,"callee")},P=Array.isArray,E=G(function(e,t){var t=t&&!t.nodeType&&t,n=t&&e&&!e.nodeType&&e,n=n&&n.exports===t?o.Buffer:void 0,t=(n?n.isBuffer:void 0)||he;e.exports=t}),Me=/^(?:0|[1-9]\d*)$/,je=function(e,t){var n=ki(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Me.test(e))&&-1<e&&e%1==0&&e<t},Ce=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},l={},a=(l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,G(function(e,t){var t=t&&!t.nodeType&&t,n=t&&e&&!e.nodeType&&e,r=n&&n.exports===t&&W.process,t=function(){try{return n&&n.require&&n.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=t})),r=a&&a.isTypedArray,Te=r?pe(r):function(e){return O(e)&&Ce(e.length)&&!!l[_(e)]},Ae=Object.prototype.hasOwnProperty,Ie=function(e,t){var n,r=P(e),o=!r&&ke(e),i=!r&&!o&&E(e),a=!r&&!o&&!i&&Te(e),s=r||o||i||a,u=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=u.length;for(n in e)!t&&!Ae.call(e,n)||s&&("length"==n||i&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||je(n,l))||u.push(n);return u},Re=Object.prototype,Le=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)},Ne=de(Object.keys,Object),De=Object.prototype.hasOwnProperty,Be=function(e){if(!Le(e))return Ne(e);var t,n=[];for(t in Object(e))De.call(e,t)&&"constructor"!=t&&n.push(t);return n},c=function(e){return null!=e&&Ce(e.length)&&!Z(e)},g=function(e){return(c(e)?Ie:Be)(e)},Fe=Object.prototype.hasOwnProperty,Ge=function(e){if(S(e)){var t,n=Le(e),r=[];for(t in e)("constructor"!=t||!n&&Fe.call(e,t))&&r.push(t);return r}var o=[];if(null!=e)for(var i in Object(e))o.push(i);return o},k=function(e){return c(e)?Ie(e,!0):Ge(e)},ze=G(function(e,t){var t=t&&!t.nodeType&&t,n=t&&e&&!e.nodeType&&e,n=n&&n.exports===t?o.Buffer:void 0,r=n?n.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}}),Ue=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},Ve=Object.prototype.propertyIsEnumerable,We=Object.getOwnPropertySymbols,Ye=We?function(t){return null==t?[]:(t=Object(t),Ue(We(t),function(e){return Ve.call(t,e)}))}:ge,He=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},Xe=de(Object.getPrototypeOf,Object),qe=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)He(t,Ye(e)),e=Xe(e);return t}:ge,Je=function(e,t,n){t=t(e);return P(e)?t:He(t,n(e))},r=n(o,"DataView"),f=n(o,"Promise"),Ze=n(o,"Set"),h=n(o,"WeakMap"),Ke="[object Map]",Qe="[object Promise]",$e="[object Set]",et="[object WeakMap]",tt="[object DataView]",nt=i(r),rt=i(te),ot=i(f),it=i(Ze),at=i(h),p=_,w=p=r&&p(new r(new ArrayBuffer(1)))!=tt||te&&p(new te)!=Ke||f&&p(f.resolve())!=Qe||Ze&&p(new Ze)!=$e||h&&p(new h)!=et?function(e){var t=_(e),e="[object Object]"==t?e.constructor:void 0,e=e?i(e):"";if(e)switch(e){case nt:return tt;case rt:return Ke;case ot:return Qe;case it:return $e;case at:return et}return t}:p,st=Object.prototype.hasOwnProperty,ut=o.Uint8Array,lt=function(e){var t=new e.constructor(e.byteLength);return new ut(t).set(new ut(e)),t},ct=/\w*$/,r=e?e.prototype:void 0,ft=r?r.valueOf:void 0,ht=function(e,t){t=t?lt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)},pt=Object.create,dt=function(e){if(!S(e))return{};if(pt)return pt(e);wt.prototype=e;e=new wt;return wt.prototype=void 0,e},f=a&&a.isMap,yt=f?pe(f):function(e){return O(e)&&"[object Map]"==w(e)},h=a&&a.isSet,gt=h?pe(h):function(e){return O(e)&&"[object Set]"==w(e)},vt="[object Arguments]",mt="[object Function]",bt="[object Object]",v={};function wt(){}v[vt]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object DataView]"]=v["[object Boolean]"]=v["[object Date]"]=v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Map]"]=v["[object Number]"]=v[bt]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object Symbol]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v["[object Error]"]=v[mt]=v["[object WeakMap]"]=!1;function _t(n,r,o,e,t,i){var a,s=1&r,u=2&r,l=4&r;if(void 0===(a=o?t?o(n,e,t,i):o(n):a)){if(!S(n))return n;var c,f,e=P(n);if(e){if(h=(p=n).length,f=new p.constructor(h),h&&"string"==typeof p[0]&&st.call(p,"index")&&(f.index=p.index,f.input=p.input),a=f,!s)return ye(n,a)}else{var h=w(n),p=h==mt||"[object GeneratorFunction]"==h;if(E(n))return ze(n,s);if(h==bt||h==vt||p&&!t){if(a=u||p?{}:me(n),!s)return u?(f=n,c=(c=a)&&ce(n,k(n),c),ce(f,qe(f),c)):(c=n,d=(d=a)&&ce(n,g(n),d),ce(c,Ye(c),d))}else{if(!v[h])return t?n:{};a=function(e,t,n){var r,o,i=e.constructor;switch(t){case"[object ArrayBuffer]":return lt(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return r=e,o=n?lt(r.buffer):r.buffer,new r.constructor(o,r.byteOffset,r.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ht(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(r=new(o=e).constructor(o.source,ct.exec(o))).lastIndex=o.lastIndex,r;case"[object Set]":return new i;case"[object Symbol]":return ft?Object(ft.call(e)):{}}}(n,h,s)}}var d=(i=i||new be).get(n);if(d)return d;i.set(n,a),gt(n)?n.forEach(function(e){a.add(_t(e,r,o,e,n,i))}):yt(n)&&n.forEach(function(e,t){a.set(t,_t(e,r,o,t,n,i))});var y=e?void 0:(l?u?function(e){return Je(e,k,qe)}:ve:u?k:g)(n);we(y||n,function(e,t){y&&(e=n[t=e]),Oe(a,t,_t(e,r,o,t,n,i))})}return a}function xt(e){return function(){return e}}function St(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var s=i[++r];if(!1===t(o[s],s,o))break}return e}function Ot(e){return"function"==typeof e?e:d}function Pt(e,t){return(P(e)?we:Mt)(e,Ot(t))}var Et,kt=function(e,t){return e&&St(e,t,g)},Mt=(Et=kt,function(e,t){if(null!=e){if(!c(e))return Et(e,t);for(var n=e.length,r=-1,o=Object(e);++r<n&&!1!==t(o[r],r,o););}return e}),d=function(e){return e},p=Pt;function jt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ue;++t<n;)this.add(e[t])}jt.prototype.add=jt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},jt.prototype.has=function(e){return this.__data__.has(e)};function Ct(e,t){return e.has(t)}function Tt(e,t,n,r,o,i){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&s<u))return!1;var u=i.get(e),l=i.get(t);if(u&&l)return u==t&&l==e;var c=-1,f=!0,h=2&n?new Bt:void 0;for(i.set(e,t),i.set(t,e);++c<s;){var p,d=e[c],y=t[c];if(void 0!==(p=r?a?r(y,d,c,t,e,i):r(d,y,c,e,t,i):p)){if(p)continue;f=!1;break}if(h){if(!function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}(t,function(e,t){return!Ct(h,t)&&(d===e||o(d,e,n,r,i))&&h.push(t)})){f=!1;break}}else if(d!==y&&!o(d,y,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function At(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function It(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Rt(e,t,n,r,o,i){var a=P(e),s=P(t),u=a?Ut:w(e),s=s?Ut:w(t),l=(u=u==zt?Vt:u)==Vt,c=(s=s==zt?Vt:s)==Vt;if((s=u==s)&&E(e)){if(!E(t))return!1;l=!(a=!0)}if(s&&!l){i=i||new be;if(a||Te(e))return Tt(e,t,n,r,o,i);else{var f=e;var h=t;a=u;var p=n;var d=r;var y=o;var g=i;switch(a){case"[object DataView]":if(f.byteLength!=h.byteLength||f.byteOffset!=h.byteOffset)return!1;f=f.buffer,h=h.buffer;case"[object ArrayBuffer]":return!(f.byteLength!=h.byteLength||!y(new ut(f),new ut(h)));case"[object Boolean]":case"[object Date]":case"[object Number]":return b(+f,+h);case"[object Error]":return f.name==h.name&&f.message==h.message;case"[object RegExp]":case"[object String]":return f==h+"";case"[object Map]":var v=At;case"[object Set]":v=v||It;if(f.size!=h.size&&!(1&p))return!1;var m=g.get(f);if(m)return m==h;p|=2,g.set(f,h);m=Tt(v(f),v(h),p,d,y,g);return g.delete(f),m;case"[object Symbol]":if(Ft)return Ft.call(f)==Ft.call(h)}return!1;return}}if(!(1&n)){u=l&&Wt.call(e,"__wrapped__"),a=c&&Wt.call(t,"__wrapped__");if(u||a)return o(u?e.value():e,a?t.value():t,n,r,i=i||new be)}return!!s&&function(e,t,n,r,o,i){var a=1&n,s=ve(e),u=s.length;if(u!=ve(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:Gt.call(t,c)))return!1}var f=i.get(e),h=i.get(t);if(f&&h)return f==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var d=a;++l<u;){var y,g=e[c=s[l]],v=t[c];if(!(void 0===(y=r?a?r(v,g,c,t,e,i):r(g,v,c,e,t,i):y)?g===v||o(g,v,n,r,i):y)){p=!1;break}d=d||"constructor"==c}return p&&!d&&(f=e.constructor)!=(h=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof f&&f instanceof f&&"function"==typeof h&&h instanceof h)&&(p=!1),i.delete(e),i.delete(t),p}(e,t,n,r,o,i=i||new be)}function Lt(e,t,n,r,o){return e===t||(null==e||null==t||!O(e)&&!O(t)?e!=e&&t!=t:Rt(e,t,n,r,Lt,o))}function Nt(e){return e==e&&!S(e)}function Dt(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}}var Bt=jt,r=e?e.prototype:void 0,Ft=r?r.valueOf:void 0,Gt=Object.prototype.hasOwnProperty,zt="[object Arguments]",Ut="[object Array]",Vt="[object Object]",Wt=Object.prototype.hasOwnProperty,Yt=function(e){var t=function(e){for(var t=g(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Nt(o)]}return t}(e);return 1==t.length&&t[0][2]?Dt(t[0][0],t[0][1]):function(c){return c===e||function(e,t,n){var r=t.length,o=r;if(null==c)return!o;for(e=Object(c);r--;){var i=t[r];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++r<o;){var a=(i=t[r])[0],s=e[a],u=i[1];if(i[2]){if(void 0===s&&!(a in e))return!1}else{var l,a=new be;if(!(void 0===l?Lt(u,s,3,n,a):l))return!1}}return!0}(0,t)}},y=function(e){return"symbol"==ki(e)||O(e)&&"[object Symbol]"==_(e)},Ht=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xt=/^\w*$/,qt=function(e,t){var n;return!P(e)&&(!("number"!=(n=ki(e))&&"symbol"!=n&&"boolean"!=n&&null!=e&&!y(e))||Xt.test(e)||!Ht.test(e)||null!=t&&e in Object(t))};function Jt(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var e=arguments,t=o?o.apply(this,e):e[0],n=i.cache;return n.has(t)?n.get(t):(e=r.apply(this,e),i.cache=n.set(t,e)||n,e)}return i.cache=new(Jt.Cache||ue),i}Jt.Cache=ue;function Zt(e,t){for(var n=0,r=(t=kn(t,e)).length;null!=e&&n<r;)e=e[Mn(t[n++])];return n&&n==r?e:void 0}function Kt(e,t){return null!=e&&Cn(e,t,jn)}function Qt(t){return function(e){return null==e?void 0:e[t]}}function m(e){return"function"==typeof e?e:null==e?d:"object"==ki(e)?P(e)?Tn(e[0],e[1]):Yt(e):An(e)}function $t(e,t){return(P(e)?Ue:function(e,r){var o=[];return Mt(e,function(e,t,n){r(e,t,n)&&o.push(e)}),o})(e,m(t))}function en(e,t){return null!=e&&In.call(e,t)}function tn(e,t){return null!=e&&Cn(e,t,en)}function nn(e){return void 0===e}function rn(e,t){return(P(e)?On:Ln)(e,m(t))}function on(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function an(e,r,o,i,t){return t(e,function(e,t,n){o=i?(i=!1,e):r(o,e,t,n)}),o}function sn(e,t,n){var r=P(e)?on:an,o=arguments.length<3;return r(e,m(t),n,o,Mt)}function un(e){return P(e)||ke(e)||!!(zn&&e&&e[zn])}function ln(e,t,n,r,o){var i=-1,a=e.length;for(n=n||un,o=o||[];++i<a;){var s=e[i];0<t&&n(s)?1<t?ln(s,t-1,n,r,o):He(o,s):r||(o[o.length]=s)}return o}function cn(u,l,c){return l=Un(void 0===l?u.length-1:l,0),function(){for(var e=arguments,t=-1,n=Un(e.length-l,0),r=Array(n);++t<n;)r[t]=e[l+t];for(var t=-1,o=Array(l+1);++t<l;)o[t]=e[t];o[l]=c(r);var i=u,a=this,s=o;switch(s.length){case 0:return i.call(a);case 1:return i.call(a,s[0]);case 2:return i.call(a,s[0],s[1]);case 3:return i.call(a,s[0],s[1],s[2])}return i.apply(a,s)}}function fn(e,t){return Wn(cn(e,t,d),e+"")}function hn(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function pn(e){return e!=e}function dn(e,t){return!(null==e||!e.length)&&-1<function(e,t){if(t!=t)return hn(e,pn,0);for(var n=e,r=t,o=-1,i=n.length;++o<i;)if(n[o]===r)return o;return-1}(e,t)}function yn(e){return O(e)&&c(e)}function gn(e){return null==e?[]:(e=g(t=e),On(e,function(e){return t[e]}));var t}var vn,mn,bn,wn,_n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/\\(\\)?/g,Sn=(wn=(f=Jt(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(_n,function(e,t,n,r){o.push(n?r.replace(xn,"$1"):t||e)}),o},function(e){return 500===wn.size&&wn.clear(),e})).cache,f),On=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},a=e?e.prototype:void 0,Pn=a?a.toString:void 0,En=function(e){return null==e?"":function e(t){var n;return"string"==typeof t?t:P(t)?On(t,e)+"":y(t)?Pn?Pn.call(t):"":"0"==(n=t+"")&&1/t==-1/0?"-0":n}(e)},kn=function(e,t){return P(e)?e:qt(e,t)?[e]:Sn(En(e))},Mn=function(e){var t;return"string"==typeof e||y(e)?e:"0"==(t=e+"")&&1/e==-1/0?"-0":t},jn=function(e,t){return null!=e&&t in Object(e)},Cn=function(e,t,n){for(var r=-1,o=(t=kn(t,e)).length,i=!1;++r<o;){var a=Mn(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ce(o)&&je(a,o)&&(P(e)||ke(e))},Tn=function(n,r){return qt(n)&&Nt(r)?Dt(Mn(n),r):function(e){var t=void 0===(t=null==e?void 0:Zt(e,n))?void 0:t;return void 0===t&&t===r?Kt(e,n):Lt(r,t,3)}},An=function(e){return qt(e)?Qt(Mn(e)):(t=e,function(e){return Zt(e,t)});var t},In=Object.prototype.hasOwnProperty,Rn=Object.prototype.hasOwnProperty,Ln=function(e,r){var o=-1,i=c(e)?Array(e.length):[];return Mt(e,function(e,t,n){i[++o]=r(e,t,n)}),i},Nn=Qt("length"),Dn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),h="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",f="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",Bn="[\\ud800-\\udbff][\\udc00-\\udfff]",M="(?:"+h+"|"+r+")?",Fn="[\\ufe0e\\ufe0f]?",Fn=Fn+M+"(?:\\u200d(?:"+[f,a,Bn].join("|")+")"+Fn+M+")*",M="(?:"+[f+h+"?",h,a,Bn,"[\\ud800-\\udfff]"].join("|")+")",Gn=RegExp(r+"(?="+r+")|"+M+Fn,"g"),zn=e?e.isConcatSpreadable:void 0,Un=Math.max,f=_e?function(e,t){return _e(e,"toString",{configurable:!0,enumerable:!1,value:xt(t),writable:!0})}:d,Vn=Date.now,Wn=(vn=f,bn=mn=0,function(){var e=Vn(),t=16-(e-bn);if(bn=e,0<t){if(800<=++mn)return arguments[0]}else mn=0;return vn.apply(void 0,arguments)}),Yn=Ze&&1/It(new Ze([,-0]))[1]==1/0?function(e){return new Ze(e)}:function(){},h=fn(function(e){var t=ln(e,1,yn,!0),n=-1,r=dn,o=t.length,i=!0,a=[],s=a;if(200<=o){e=Yn(t);if(e)return It(e);i=!1,r=Ct,s=new Bt}else s=a;e:for(;++n<o;){var u=l=t[n],l=0!==l?l:0;if(i&&u==u){for(var c=s.length;c--;)if(s[c]===u)continue e;a.push(l)}else r(s,u,void 0)||(s!==a&&s.push(u),a.push(l))}return a});try{br={clone:function(e){return _t(e,4)},constant:xt,each:p,filter:$t,has:tn,isArray:P,isEmpty:function(e){if(null!=e){if(c(e)&&(P(e)||"string"==typeof e||"function"==typeof e.splice||E(e)||Te(e)||ke(e)))return!e.length;var t,n=w(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if(Le(e))return!Be(e).length;for(t in e)if(Rn.call(e,t))return!1}return!0},isFunction:Z,isUndefined:nn,keys:g,map:rn,reduce:sn,size:function(e){var t;return null==e?0:c(e)?"string"==typeof(t=e)||!P(t)&&O(t)&&"[object String]"==_(t)?(t=e,(Dn.test(t)?function(e){for(var t=Gn.lastIndex=0;Gn.test(e);)++t;return t}:Nn)(t)):e.length:"[object Map]"==(t=w(e))||"[object Set]"==t?e.size:Be(e).length},transform:function(e,r,o){var t,n=P(e),i=n||E(e)||Te(e);return r=m(r),null==o&&(t=e&&e.constructor,o=i?n?new t:[]:S(e)&&Z(t)?dt(Xe(e)):{}),(i?we:kt)(e,function(e,t,n){return r(o,e,t,n)}),o},union:h,values:gn}}catch(x){}var j=br=br||window._,Hn=C;function C(e){this._isDirected=!j.has(e,"directed")||e.directed,this._isMultigraph=!!j.has(e,"multigraph")&&e.multigraph,this._isCompound=!!j.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=j.constant(void 0),this._defaultEdgeLabelFn=j.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Xn(e,t){e[t]?e[t]++:e[t]=1}function qn(e,t){--e[t]||delete e[t]}function Jn(e,t,n,r){t=""+t,n=""+n;return!e&&n<t&&(e=t,t=n,n=e),t+""+n+""+(j.isUndefined(r)?"\0":r)}function Zn(e,t){return Jn(e,t.v,t.w,t.name)}C.prototype._nodeCount=0,C.prototype._edgeCount=0,C.prototype.isDirected=function(){return this._isDirected},C.prototype.isMultigraph=function(){return this._isMultigraph},C.prototype.isCompound=function(){return this._isCompound},C.prototype.setGraph=function(e){return this._label=e,this},C.prototype.graph=function(){return this._label},C.prototype.setDefaultNodeLabel=function(e){return j.isFunction(e)||(e=j.constant(e)),this._defaultNodeLabelFn=e,this},C.prototype.nodeCount=function(){return this._nodeCount},C.prototype.nodes=function(){return j.keys(this._nodes)},C.prototype.sources=function(){var t=this;return j.filter(this.nodes(),function(e){return j.isEmpty(t._in[e])})},C.prototype.sinks=function(){var t=this;return j.filter(this.nodes(),function(e){return j.isEmpty(t._out[e])})},C.prototype.setNodes=function(e,t){var n=arguments,r=this;return j.each(e,function(e){1<n.length?r.setNode(e,t):r.setNode(e)}),this},C.prototype.setNode=function(e,t){return j.has(this._nodes,e)?1<arguments.length&&(this._nodes[e]=t):(this._nodes[e]=1<arguments.length?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},C.prototype.node=function(e){return this._nodes[e]},C.prototype.hasNode=function(e){return j.has(this._nodes,e)},C.prototype.removeNode=function(e){var t,n=this;return j.has(this._nodes,e)&&(t=function(e){n.removeEdge(n._edgeObjs[e])},delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],j.each(this.children(e),function(e){n.setParent(e)}),delete this._children[e]),j.each(j.keys(this._in[e]),t),delete this._in[e],delete this._preds[e],j.each(j.keys(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount),this},C.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(j.isUndefined(t))t="\0";else{for(var n=t+="";!j.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},C.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},C.prototype.parent=function(e){if(this._isCompound){e=this._parent[e];if("\0"!==e)return e}},C.prototype.children=function(e){var t;return j.isUndefined(e)&&(e="\0"),this._isCompound?(t=this._children[e])?j.keys(t):void 0:"\0"===e?this.nodes():this.hasNode(e)?[]:void 0},C.prototype.predecessors=function(e){e=this._preds[e];if(e)return j.keys(e)},C.prototype.successors=function(e){e=this._sucs[e];if(e)return j.keys(e)},C.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return j.union(t,this.successors(e))},C.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},C.prototype.filterNodes=function(n){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),o=(r.setGraph(this.graph()),this),i=(j.each(this._nodes,function(e,t){n(t)&&r.setNode(t,e)}),j.each(this._edgeObjs,function(e){r.hasNode(e.v)&&r.hasNode(e.w)&&r.setEdge(e,o.edge(e))}),{});return this._isCompound&&j.each(r.nodes(),function(e){r.setParent(e,function e(t){var n=o.parent(t);return void 0===n||r.hasNode(n)?i[t]=n:n in i?i[n]:e(n)}(e))}),r},C.prototype.setDefaultEdgeLabel=function(e){return j.isFunction(e)||(e=j.constant(e)),this._defaultEdgeLabelFn=e,this},C.prototype.edgeCount=function(){return this._edgeCount},C.prototype.edges=function(){return j.values(this._edgeObjs)},C.prototype.setPath=function(e,n){var r=this,o=arguments;return j.reduce(e,function(e,t){return 1<o.length?r.setEdge(e,t,n):r.setEdge(e,t),t}),this},C.prototype.setEdge=function(){var e,t=!1,n=arguments[0],n=("object"==ki(n)&&null!==n&&"v"in n?(i=n.v,a=n.w,e=n.name,2===arguments.length&&(r=arguments[1],t=!0)):(i=n,a=arguments[1],e=arguments[3],2<arguments.length&&(r=arguments[2],t=!0)),i=""+i,a=""+a,j.isUndefined(e)||(e=""+e),Jn(this._isDirected,i,a,e));if(j.has(this._edgeLabels,n))t&&(this._edgeLabels[n]=r);else{if(!j.isUndefined(e)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(a),this._edgeLabels[n]=t?r:this._defaultEdgeLabelFn(i,a,e);t=this._isDirected,r=""+i,o=""+a,!t&&o<r&&(t=r,r=o,o=t),t={v:r,w:o},(o=e)&&(t.name=o);var r,o=t,i=o.v,a=o.w;Object.freeze(o),this._edgeObjs[n]=o,Xn(this._preds[a],i),Xn(this._sucs[i],a),this._in[a][n]=o,this._out[i][n]=o,this._edgeCount++}return this},C.prototype.edge=function(e,t,n){e=1===arguments.length?Zn(this._isDirected,e):Jn(this._isDirected,e,t,n);return this._edgeLabels[e]},C.prototype.hasEdge=function(e,t,n){e=1===arguments.length?Zn(this._isDirected,e):Jn(this._isDirected,e,t,n);return j.has(this._edgeLabels,e)},C.prototype.removeEdge=function(e,t,n){var n=1===arguments.length?Zn(this._isDirected,arguments[0]):Jn(this._isDirected,e,t,n),r=this._edgeObjs[n];return r&&(e=r.v,t=r.w,delete this._edgeLabels[n],delete this._edgeObjs[n],qn(this._preds[t],e),qn(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},C.prototype.inEdges=function(e,t){var e=this._in[e];if(e)return e=j.values(e),t?j.filter(e,function(e){return e.v===t}):e},C.prototype.outEdges=function(e,t){var e=this._out[e];if(e)return e=j.values(e),t?j.filter(e,function(e){return e.w===t}):e},C.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var a={Graph:Hn,version:"2.1.8"},Bn={write:function(e){var r,o,t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(o=e,j.map(o.nodes(),function(e){var t=o.node(e),n=o.parent(e),e={v:e};return j.isUndefined(t)||(e.value=t),j.isUndefined(n)||(e.parent=n),e})),edges:(r=e,j.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return j.isUndefined(e.name)||(n.name=e.name),j.isUndefined(t)||(n.value=t),n}))};return j.isUndefined(e.graph())||(t.value=j.clone(e.graph())),t},read:function(e){var t=new Hn(e.options).setGraph(e.value);return j.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),j.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}},Kn=T;function T(){this._arr=[],this._keyIndices={}}T.prototype.size=function(){return this._arr.length},T.prototype.keys=function(){return this._arr.map(function(e){return e.key})},T.prototype.has=function(e){return j.has(this._keyIndices,e)},T.prototype.priority=function(e){e=this._keyIndices[e];if(void 0!==e)return this._arr[e].priority},T.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},T.prototype.add=function(e,t){var n,r,o=this._keyIndices;return e=String(e),!j.has(o,e)&&(r=(n=this._arr).length,o[e]=r,n.push({key:e,priority:t}),this._decrease(r),!0)},T.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},T.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},T.prototype._heapify=function(e){var t=this._arr,n=2*e,r=1+n,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,(o=r<t.length?t[r].priority<t[o].priority?r:o:o)!==e)&&(this._swap(e,o),this._heapify(o))},T.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},T.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],i=n[t];n[e]=i,n[t]=o,r[i.key]=e,r[o.key]=t};function Qn(t,e,n,r){var o=t,i=String(e),a=n||er,s=r||function(e){return t.outEdges(e)};function u(e){var t=e.v!==l?e.v:e.w,n=f[t],r=a(e),o=c.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+r);o<n.distance&&(n.distance=o,n.predecessor=l,h.decrease(t,o))}var l,c,f={},h=new Kn;for(o.nodes().forEach(function(e){var t=e===i?0:Number.POSITIVE_INFINITY;f[e]={distance:t},h.add(e,t)});0<h.size()&&(l=h.removeMin(),(c=f[l]).distance!==Number.POSITIVE_INFINITY);)s(l).forEach(u);return f}function $n(i){var a=0,s=[],u={},l=[];return i.nodes().forEach(function(e){j.has(u,e)||function t(e){var n=u[e]={onStack:!0,lowlink:a,index:a++};if(s.push(e),i.successors(e).forEach(function(e){j.has(u,e)?u[e].onStack&&(n.lowlink=Math.min(n.lowlink,u[e].index)):(t(e),n.lowlink=Math.min(n.lowlink,u[e].lowlink))}),n.lowlink===n.index){for(var r,o=[];r=s.pop(),u[r].onStack=!1,o.push(r),e!==r;);l.push(o)}}(e)}),l}var er=j.constant(1),tr=j.constant(1),nr=rr;function rr(n){var r={},o={},i=[];if(j.each(n.sinks(),function e(t){if(j.has(o,t))throw new or;j.has(r,t)||(o[t]=!0,r[t]=!0,j.each(n.predecessors(t),e),delete o[t],i.push(t))}),j.size(r)!==n.nodeCount())throw new or;return i}function or(){}(rr.CycleException=or).prototype=new Error;function ir(t,e,n){j.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],i={};return j.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(n,e,r,o,i,a){j.has(o,e)||(o[e]=!0,r||a.push(e),j.each(i(e),function(e){t(n,e,r,o,i,a)}),r&&a.push(e))}(t,e,"post"===n,i,r,o)}),o}r={Graph:a.Graph,json:Bn,alg:{components:function(t){var n,r={},o=[];function i(e){j.has(r,e)||(r[e]=!0,n.push(e),j.each(t.successors(e),i),j.each(t.predecessors(e),i))}return j.each(t.nodes(),function(e){n=[],i(e),n.length&&o.push(n)}),o},dijkstra:Qn,dijkstraAll:function(n,r,o){return j.transform(n.nodes(),function(e,t){e[t]=Qn(n,t,r,o)},{})},findCycles:function(t){return j.filter($n(t),function(e){return 1<e.length||1===e.length&&t.hasEdge(e[0],e[0])})},floydWarshall:function(t,e,n){return r=e||tr,o=n||function(e){return t.outEdges(e)},a={},(s=t.nodes()).forEach(function(n){a[n]={},a[n][n]={distance:0},s.forEach(function(e){n!==e&&(a[n][e]={distance:Number.POSITIVE_INFINITY})}),o(n).forEach(function(e){var t=e.v===n?e.w:e.v,e=r(e);a[n][t]={distance:e,predecessor:n}})}),s.forEach(function(o){var i=a[o];s.forEach(function(e){var r=a[e];s.forEach(function(e){var t=r[o],n=i[e],e=r[e],t=t.distance+n.distance;t<e.distance&&(e.distance=t,e.predecessor=n.predecessor)})})}),a;var r,o,a,s},isAcyclic:function(e){try{nr(e)}catch(e){if(e instanceof nr.CycleException)return!1;throw e}return!0},postorder:function(e,t){return ir(e,t,"post")},preorder:function(e,t){return ir(e,t,"pre")},prim:function(e,r){var o,t=new Hn,i={},a=new Kn;function n(e){var t=e.v===o?e.w:e.v,n=a.priority(t);void 0!==n&&(e=r(e))<n&&(i[t]=o,a.decrease(t,e))}if(0!==e.nodeCount()){j.each(e.nodes(),function(e){a.add(e,Number.POSITIVE_INFINITY),t.setNode(e)}),a.decrease(e.nodes()[0],0);for(var s=!1;0<a.size();){if(o=a.removeMin(),j.has(i,o))t.setEdge(o,i[o]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(o).forEach(n)}}return t},tarjan:$n,topsort:nr},version:a.version};try{mr=r}catch(x){}function ar(e,t,n){var r;return!!S(n)&&!!("number"==(r=ki(t))?c(n)&&je(t,n.length):"string"==r&&t in n)&&b(n[t],e)}function sr(e){return e?(e=function(e){if("number"==typeof e)return e;if(y(e))return NaN;if(S(e)&&(t="function"==typeof e.valueOf?e.valueOf():e,e=S(t)?t+"":t),"string"!=typeof e)return 0===e?e:+e;e=e.replace(Sr,"");var t=Pr.test(e);return t||Er.test(e)?kr(e.slice(2),t?2:8):Or.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ur(e,t,n){var r,o,i,a,s=Object(e);return c(e)||(r=m(t),e=g(e),t=function(e){return r(s[e],e,s)}),t=t,n=n,-1<(n=(i=null==(o=e)?0:o.length)?((a=null!=n&&(n=sr(n),a=n%1,n==n)?a?n-a:n:0)<0&&(a=Mr(i+a,0)),hn(o,m(t),a)):-1)?s[r?e[n]:n]:void 0}function lr(e){return null!=e&&e.length?ln(e,1):[]}function cr(e,t,n){for(var r=-1,o=e.length;++r<o;){var i,a,s=e[r],u=t(s);null!=u&&(void 0===i?u==u&&!y(u):n(u,i))&&(i=u,a=s)}return a}function fr(e,t){return t<e}function hr(e,t,n){(void 0===n||b(e[t],n))&&(void 0!==n||t in e)||xe(e,t,n)}function pr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function dr(e,t){return e<t}function yr(e,t){for(var n=e,r=t,o=-1,i=r.length,a={};++o<i;){var s=r[o],u=Zt(n,s);Kt(e,s)&&function(e,t,n,r){if(S(e))for(var o=-1,i=(t=kn(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var u,l=Mn(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return;o!=a&&(u=s[l],void 0===(c=r?r(u,l,s):void 0))&&(c=S(u)?u:je(t[o+1])?[]:{}),Oe(s,l,c),s=s[l]}}(a,kn(s,n),u)}return a}function gr(e,t){if(e!==t){var n=void 0!==e,r=null===e,o=e==e,i=y(e),a=void 0!==t,s=null===t,u=t==t,l=y(t);if(!s&&!l&&!i&&t<e||i&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!u)return-1}return 0}function vr(e,r,f){r=r.length?On(r,function(t){return P(t)?function(e){return Zt(e,1===t.length?t[0]:t)}:t}):[d];var o=-1,t=(r=On(r,pe(m)),Ln(e,function(t,e,n){return{criteria:On(r,function(e){return e(t)}),index:++o,value:t}})),n=t.length;for(t.sort(function(e,t){for(var n=e,r=t,o=f,i=-1,a=n.criteria,s=r.criteria,u=a.length,l=o.length;++i<u;){var c=gr(a[i],s[i]);if(c)return i>=l?c:c*("desc"==o[i]?-1:1)}return n.index-r.index});n--;)t[n]=t[n].value;return t}var mr,br,wr,M=mr=mr||window.graphlib,_r=Object.prototype,xr=_r.hasOwnProperty,Fn=fn(function(e,t){e=Object(e);var n=-1,r=t.length,o=2<r?t[2]:void 0;for(o&&ar(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=k(i),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(void 0===c||b(c,_r[l])&&!xr.call(e,l))&&(e[l]=i[l])}return e}),Sr=/^\s+|\s+$/g,Or=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,Er=/^0o[0-7]+$/i,kr=parseInt,Mr=Math.max,e=Function.prototype,f=Object.prototype,jr=e.toString,Cr=f.hasOwnProperty,Tr=jr.call(Object),h=(wr=function(e,t,n){!function y(g,v,m,b,w){g!==v&&St(v,function(e,t){var n,r,o,i,a,s,u,l,c,f,h,p,d;w=w||new be,S(e)?(r=v,i=m,a=y,s=b,u=w,h=pr(n=g,o=t),p=pr(r,o),(d=u.get(p))?hr(n,o,d):((r=void 0===(d=s?s(h,p,o+"",n,r,u):void 0))&&(c=!(l=P(p))&&E(p),f=!l&&!c&&Te(p),d=p,l||c||f?d=P(h)?h:yn(h)?ye(h):c?ze(p,!(r=!1)):f?ht(p,!(r=!1)):[]:function(e){if(O(e)&&"[object Object]"==_(e))return null===(e=Xe(e))||"function"==typeof(e=Cr.call(e,"constructor")&&e.constructor)&&e instanceof e&&jr.call(e)==Tr}(p)||ke(p)?ke(d=h)?d=ce(h,k(h)):S(h)&&!Z(h)||(d=me(p)):r=!1),r&&(u.set(p,d),a(d,p,i,s,u),u.delete(p)),hr(n,o,d))):(l=b?b(pr(g,t),e,t+"",g,v,w):void 0,hr(g,t,l=void 0===l?e:l))},k)}(e,t,n)},fn(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:void 0,i=2<r?t[2]:void 0,o=3<wr.length&&"function"==typeof o?(r--,o):void 0;for(i&&ar(t[0],t[1],i)&&(r=1),e=Object(e);++n<r;){var a=t[n];a&&wr(e,a,n)}return e})),Bn=Wn(cn(br=function(e,t){return null==e?{}:yr(e,t)},void 0,lr),br+""),Ar=Math.ceil,Ir=Math.max,a=fn(function(e,t){var n;return null==e?[]:(1<(n=t.length)&&ar(e,t[0],t[1])?t=[]:2<n&&ar(t[0],t[1],t[2])&&(t=[t[0]]),vr(e,ln(t,1),[]))}),Rr=0;try{Lr={cloneDeep:function(e){return _t(e,5)},constant:xt,defaults:Fn,each:p,filter:$t,find:ur,flatten:lr,forEach:Pt,forIn:function(e,t){return null==e?e:St(e,Ot(t),k)},has:tn,isUndefined:nn,last:function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},map:rn,mapValues:function(e,r){var o={};return r=m(r),kt(e,function(e,t,n){xe(o,t,r(e,t,n))}),o},max:function(e){return e&&e.length?cr(e,d,fr):void 0},merge:h,min:function(e){return e&&e.length?cr(e,d,dr):void 0},minBy:function(e,t){return e&&e.length?cr(e,m(t),dr):void 0},now:function(){return o.Date.now()},pick:Bn,range:function(e,t,n){n&&"number"!=typeof n&&ar(e,t,n)&&(t=n=void 0),e=sr(e),void 0===t?(t=e,e=0):t=sr(t);for(var r=e,o=t,i=n=void 0===n?e<t?1:-1:sr(n),a=-1,s=Ir(Ar((o-r)/(i||1)),0),u=Array(s);s--;)u[++a]=r,r+=i;return u},reduce:sn,sortBy:a,uniqueId:function(e){var t=++Rr;return En(e)+t},values:gn,zipObject:function(e,t){for(var n=e||[],r=t||[],o=Oe,i=-1,a=n.length,s=r.length,u={};++i<a;){var l=i<s?r[i]:void 0;o(u,n[i],l)}return u}}}catch(x){}var Lr,A=Lr=Lr||window._,Nr=Dr;function Dr(){var e={};e._next=e._prev=e,this._sentinel=e}function Br(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Fr(e,t){if("_next"!==e&&"_prev"!==e)return t}Dr.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Br(t),t},Dr.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Br(e),e._next=t._next,t._next._prev=e,(t._next=e)._prev=t},Dr.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Fr)),n=n._prev;return"["+e.join(", ")+"]"};var Gr=M.Graph,zr=A.constant(1);function Ur(r,o,i,e,a){var s=a?[]:void 0;return A.forEach(r.inEdges(e.v),function(e){var t=r.edge(e),n=r.node(e.v);a&&s.push({v:e.v,w:e.w}),n.out-=t,Vr(o,i,n)}),A.forEach(r.outEdges(e.v),function(e){var t=r.edge(e),e=e.w,e=r.node(e);e.in-=t,Vr(o,i,e)}),r.removeNode(e.v),s}function Vr(e,t,n){(n.out?n.in?e[n.out-n.in+t]:e[e.length-1]:e[0]).enqueue(n)}var Wr=M.Graph,I={addDummyNode:Yr,simplify:function(r){var o=(new Wr).setGraph(r.graph());return A.forEach(r.nodes(),function(e){o.setNode(e,r.node(e))}),A.forEach(r.edges(),function(e){var t=o.edge(e.v,e.w)||{weight:0,minlen:1},n=r.edge(e);o.setEdge(e.v,e.w,{weight:t.weight+n.weight,minlen:Math.max(t.minlen,n.minlen)})}),o},asNonCompoundGraph:function(t){var n=new Wr({multigraph:t.isMultigraph()}).setGraph(t.graph());return A.forEach(t.nodes(),function(e){t.children(e).length||n.setNode(e,t.node(e))}),A.forEach(t.edges(),function(e){n.setEdge(e,t.edge(e))}),n},successorWeights:function(n){var e=A.map(n.nodes(),function(e){var t={};return A.forEach(n.outEdges(e),function(e){t[e.w]=(t[e.w]||0)+n.edge(e).weight}),t});return A.zipObject(n.nodes(),e)},predecessorWeights:function(n){var e=A.map(n.nodes(),function(e){var t={};return A.forEach(n.inEdges(e),function(e){t[e.v]=(t[e.v]||0)+n.edge(e).weight}),t});return A.zipObject(n.nodes(),e)},intersectRect:function(e,t){var n,r=e.x,o=e.y,i=t.x-r,t=t.y-o,a=e.width/2,e=e.height/2;if(i||t)return e=Math.abs(t)*a>Math.abs(i)*e?(n=(e=t<0?-e:e)*i/t,e):(n=a=i<0?-a:a)*t/i,{x:r+n,y:o+e};throw new Error("Not possible to find intersection inside of the rectangle")},buildLayerMatrix:function(r){var o=A.map(A.range(Hr(r)+1),function(){return[]});return A.forEach(r.nodes(),function(e){var t=r.node(e),n=t.rank;A.isUndefined(n)||(o[n][t.order]=e)}),o},normalizeRanks:function(t){var n=A.min(A.map(t.nodes(),function(e){return t.node(e).rank}));A.forEach(t.nodes(),function(e){e=t.node(e);A.has(e,"rank")&&(e.rank-=n)})},removeEmptyRanks:function(n){var r=A.min(A.map(n.nodes(),function(e){return n.node(e).rank})),o=[],i=(A.forEach(n.nodes(),function(e){var t=n.node(e).rank-r;o[t]||(o[t]=[]),o[t].push(e)}),0),a=n.graph().nodeRankFactor;A.forEach(o,function(e,t){A.isUndefined(e)&&t%a!=0?--i:i&&A.forEach(e,function(e){n.node(e).rank+=i})})},addBorderNode:function(e,t,n,r){var o={width:0,height:0};return 4<=arguments.length&&(o.rank=n,o.order=r),Yr(e,"border",o,t)},maxRank:Hr,partition:function(e,t){var n={lhs:[],rhs:[]};return A.forEach(e,function(e){(t(e)?n.lhs:n.rhs).push(e)}),n},time:function(e,t){var n=A.now();try{return t()}finally{console.log(e+" time: "+(A.now()-n)+"ms")}},notime:function(e,t){return t()}};function Yr(e,t,n,r){for(var o;o=A.uniqueId(r),e.hasNode(o););return n.dummy=t,e.setNode(o,n),o}function Hr(t){return A.max(A.map(t.nodes(),function(e){e=t.node(e).rank;if(!A.isUndefined(e))return e}))}function Xr(h){h.graph().dummyChains=[],A.forEach(h.edges(),function(e){var t,n,r,o=h,i=e,a=i.v,s=o.node(a).rank,e=i.w,u=o.node(e).rank,l=i.name,c=o.edge(i),f=c.labelRank;if(u!==s+1){for(o.removeEdge(i),r=0,++s;s<u;++r,++s)c.points=[],t=I.addDummyNode(o,"edge",n={width:0,height:0,edgeLabel:c,edgeObj:i,rank:s},"_d"),s===f&&(n.width=c.width,n.height=c.height,n.dummy="edge-label",n.labelpos=c.labelpos),o.setEdge(a,t,{weight:c.weight},l),0===r&&o.graph().dummyChains.push(t),a=t;o.setEdge(a,e,{weight:c.weight},l)}})}function qr(r){var o={};A.forEach(r.sources(),function t(e){var n=r.node(e);if(A.has(o,e))return n.rank;o[e]=!0;e=A.min(A.map(r.outEdges(e),function(e){return t(e.w)-r.edge(e).minlen}));return e!==Number.POSITIVE_INFINITY&&null!=e||(e=0),n.rank=e})}function Jr(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function Zr(e){var t,n=new Kr({directed:!1}),r=e.nodes()[0],o=e.nodeCount();for(n.setNode(r,{});function(o,i){return A.forEach(o.nodes(),function n(r){A.forEach(i.nodeEdges(r),function(e){var t=e.v,t=r===t?e.w:t;o.hasNode(t)||Qr(i,e)||(o.setNode(t,{}),o.setEdge(r,t,{}),n(t))})}),o.nodeCount()}(n,e)<o;)t=function(t,n){return A.minBy(n.edges(),function(e){if(t.hasNode(e.v)!==t.hasNode(e.w))return Qr(n,e)})}(n,e),function(e,t,n){A.forEach(e.nodes(),function(e){t.node(e).rank+=n})}(n,e,n.hasNode(t.v)?Qr(e,t):-Qr(e,t));return n}var Kr=M.Graph,Qr=Jr;var $r=Jr,eo=qr,to=M.alg.preorder,no=M.alg.postorder,ro=I.simplify,oo=R;function R(e){e=ro(e),eo(e);var t,n=Zr(e);for(so(n),io(n,e);t=uo(n);)co(n,e,t,lo(n,e,t))}function io(o,i){var e=(e=no(o,o.nodes())).slice(0,e.length-1);A.forEach(e,function(e){var t,n,r;n=i,e=e,r=(t=o).node(e).parent,t.edge(e,r).cutvalue=ao(t,n,e)})}function ao(r,o,i){var a=r.node(i).parent,s=!0,e=o.edge(i,a),u=0;return e||(s=!1,e=o.edge(a,i)),u=e.weight,A.forEach(o.nodeEdges(i),function(e){var t=e.v===i,n=t?e.w:e.v;n!==a&&(t=t===s,e=o.edge(e).weight,u+=t?e:-e,r.hasEdge(i,n))&&(e=r.edge(i,n).cutvalue,u+=t?-e:e)}),u}function so(e,t){arguments.length<2&&(t=e.nodes()[0]),function t(n,r,o,i,e){var a=o,s=n.node(i);return r[i]=!0,A.forEach(n.neighbors(i),function(e){A.has(r,e)||(o=t(n,r,o,e,i))}),s.low=a,s.lim=o++,e?s.parent=e:delete s.parent,o}(e,{},1,t)}function uo(t){return A.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function lo(t,n,e){var r=e.v,o=e.w,e=(n.hasEdge(r,o)||(r=e.w,o=e.v),t.node(r)),r=t.node(o),i=e,a=!1,o=(e.lim>r.lim&&(i=r,a=!0),A.filter(n.edges(),function(e){return a===fo(0,t.node(e.v),i)&&a!==fo(0,t.node(e.w),i)}));return A.minBy(o,function(e){return $r(n,e)})}function co(e,t,n,r){var o,i,a=n.v,n=n.w;e.removeEdge(a,n),e.setEdge(r.v,r.w,{}),so(e),io(e,t),o=e,i=t,a=A.find(o.nodes(),function(e){return!i.node(e).parent}),a=(a=to(o,a)).slice(1),A.forEach(a,function(e){var t=o.node(e).parent,n=i.edge(e,t),r=!1;n||(n=i.edge(t,e),r=!0),i.node(e).rank=i.node(t).rank+(r?n.minlen:-n.minlen)})}function fo(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}R.initLowLimValues=so,R.initCutValues=io,R.calcCutValue=ao,R.leaveEdge=uo,R.enterEdge=lo,R.exchangeEdges=co;var ho=qr,po=ho;function yo(e){oo(e)}function go(t){var o,i,n,r=I.addDummyNode(t,"root",{},"_root"),a=(o=t,i={},A.forEach(o.children(),function(e){!function t(e,n){var r=o.children(e);r&&r.length&&A.forEach(r,function(e){t(e,n+1)}),i[e]=n}(e,1)}),i),s=A.max(A.values(a))-1,u=2*s+1,l=(t.graph().nestingRoot=r,A.forEach(t.edges(),function(e){t.edge(e).minlen*=u}),n=t,A.reduce(n.edges(),function(e,t){return e+n.edge(t).weight},0)+1);A.forEach(t.children(),function(e){!function o(i,a,s,u,l,c,f){var h,p,e,t=i.children(f);t.length?(h=I.addBorderNode(i,"_bt"),p=I.addBorderNode(i,"_bb"),e=i.node(f),i.setParent(h,f),e.borderTop=h,i.setParent(p,f),e.borderBottom=p,A.forEach(t,function(e){o(i,a,s,u,l,c,e);var t=i.node(e),n=t.borderTop||e,e=t.borderBottom||e,t=t.borderTop?u:2*u,r=n!==e?1:l-c[f]+1;i.setEdge(h,n,{weight:t,minlen:r,nestingEdge:!0}),i.setEdge(e,p,{weight:t,minlen:r,nestingEdge:!0})}),i.parent(f)||i.setEdge(a,h,{weight:0,minlen:l+c[f]})):f!==a&&i.setEdge(a,f,{weight:0,minlen:s})}(t,r,u,l,s,a,e)}),t.graph().nodeRankFactor=u}function vo(e,t,n,r,o,i){var a=o[t][i-1],n=I.addDummyNode(e,"border",{width:0,height:0,rank:i,borderType:t},n);o[t][i]=n,e.setParent(n,r),a&&e.setEdge(a,n,{weight:1})}function mo(t){A.forEach(t.nodes(),function(e){bo(t.node(e))}),A.forEach(t.edges(),function(e){bo(t.edge(e))})}function bo(e){var t=e.width;e.width=e.height,e.height=t}function wo(e){e.y=-e.y}function _o(e){var t=e.x;e.x=e.y,e.y=t}function xo(e,t){for(var n=0,r=1;r<t.length;++r)n+=function(t,e,n){for(var r=A.zipObject(n,A.map(n,function(e,t){return t})),e=A.flatten(A.map(e,function(e){return A.sortBy(A.map(t.outEdges(e),function(e){return{pos:r[e.w],weight:t.edge(e).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var i=2*o-1,a=(--o,A.map(new Array(i),function(){return 0})),s=0;return A.forEach(e.forEach(function(e){var t=e.pos+o;a[t]+=e.weight;for(var n=0;0<t;)t%2&&(n+=a[t+1]),a[t=t-1>>1]+=e.weight;s+=e.weight*n})),s}(e,t[r-1],t[r]);return n}function So(e,t,n){for(var r;t.length&&(r=A.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function Oo(e){var r,o,t,i,n=I.maxRank(e),a=Co(e,A.range(1,n+1),"inEdges"),s=Co(e,A.range(n-1,-1,-1),"outEdges");r=e,o={},n=A.filter(r.nodes(),function(e){return!r.children(e).length}),t=A.max(A.map(n,function(e){return r.node(e).rank})),i=A.map(A.range(t+1),function(){return[]}),t=A.sortBy(n,function(e){return r.node(e).rank}),A.forEach(t,function e(t){var n;A.has(o,t)||(o[t]=!0,n=r.node(t),i[n.rank].push(t),A.forEach(r.successors(t),e))}),To(e,i);for(var u,l=Number.POSITIVE_INFINITY,c=0,f=0;f<4;++c,++f){(function(e,t){var r=new jo;A.forEach(e,function(n){var e=n.graph().root,e=Po(n,e,r,t);A.forEach(e.vs,function(e,t){n.node(e).order=t}),Mo(n,r,e.vs)})})(c%2?a:s,2<=c%4);var h=I.buildLayerMatrix(e),p=xo(e,h);p<l&&(f=0,u=A.cloneDeep(h),l=p)}To(e,u)}var Po=function n(r,e,o,i){var a,t,s,u,l,c,f,h,p,d=r.children(e),e=r.node(e),y=e?e.borderLeft:void 0,g=e?e.borderRight:void 0,v={},m=(y&&(d=A.filter(d,function(e){return e!==y&&e!==g})),a=r,e=d,A.map(e,function(e){var t=a.inEdges(e);return t.length?{v:e,barycenter:(t=A.reduce(t,function(e,t){var n=a.edge(t),t=a.node(t.v);return{sum:e.sum+n.weight*t.order,weight:e.weight+n.weight}},{sum:0,weight:0})).sum/t.weight,weight:t.weight}:{v:e}})),d=(A.forEach(m,function(e){var t;r.children(e.v).length&&(t=n(r,e.v,o,i),v[e.v]=t,A.has(t,"barycenter"))&&(t=t,A.isUndefined((e=e).barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight))}),function(e){var r={},n=(A.forEach(m,function(e,t){t=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};A.isUndefined(e.barycenter)||(t.barycenter=e.barycenter,t.weight=e.weight)}),A.forEach(e.edges(),function(e){var t=r[e.v],n=r[e.w];A.isUndefined(t)||A.isUndefined(n)||(n.indegree++,t.out.push(r[e.w]))}),A.filter(r,function(e){return!e.indegree})),t=[];function o(o){return function(e){var t,n,r;e.merged||(A.isUndefined(e.barycenter)||A.isUndefined(o.barycenter)||e.barycenter>=o.barycenter)&&(e=e,r=n=0,(t=o).weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0)}}for(;n.length;){var i=n.pop();t.push(i),A.forEach(i.in.reverse(),o(i)),A.forEach(i.out,function(t){return function(e){e.in.push(t),0==--e.indegree&&n.push(e)}}(i))}return A.map(A.filter(t,function(e){return!e.merged}),function(e){return A.pick(e,["vs","i","barycenter","weight"])})}(o)),e=(t=v,A.forEach(d,function(e){e.vs=A.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)}),e=i,d=I.partition(d,function(e){return A.has(e,"barycenter")}),p=d.lhs,u=A.sortBy(d.rhs,function(e){return-e.i}),l=[],h=f=c=0,p.sort((s=!!e,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:s?t.i-e.i:e.i-t.i})),h=So(l,u,h),A.forEach(p,function(e){h+=e.vs.length,l.push(e.vs),c+=e.barycenter*e.weight,f+=e.weight,h=So(l,u,h)}),d={vs:A.flatten(l,!0)},f&&(d.barycenter=c/f,d.weight=f),d);return y&&(e.vs=A.flatten([y,e.vs,g],!0),r.predecessors(y).length)&&(p=r.node(r.predecessors(y)[0]),d=r.node(r.predecessors(g)[0]),A.has(e,"barycenter")||(e.barycenter=0,e.weight=0),e.barycenter=(e.barycenter*e.weight+p.order+d.order)/(e.weight+2),e.weight+=2),e},Eo=M.Graph,ko=function(o,n,i){var a=function(e){for(var t;e.hasNode(t=A.uniqueId("_root")););return t}(o),s=new Eo({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(e){return o.node(e)});return A.forEach(o.nodes(),function(r){var e=o.node(r),t=o.parent(r);(e.rank===n||e.minRank<=n&&n<=e.maxRank)&&(s.setNode(r),s.setParent(r,t||a),A.forEach(o[i](r),function(e){var t=e.v===r?e.w:e.v,n=s.edge(t,r),n=A.isUndefined(n)?0:n.weight;s.setEdge(t,r,{weight:o.edge(e).weight+n})}),A.has(e,"minRank"))&&s.setNode(r,{borderLeft:e.borderLeft[n],borderRight:e.borderRight[n]})}),s},Mo=function(o,i,e){var a,s={};A.forEach(e,function(e){for(var t,n,r=o.parent(e);r;){if((t=o.parent(r))?(n=s[t],s[t]=r):(n=a,a=r),n&&n!==r)return void i.setEdge(n,r);r=t}})},jo=M.Graph;function Co(t,e,n){return A.map(e,function(e){return ko(t,e,n)})}function To(n,e){A.forEach(e,function(e){A.forEach(e,function(e,t){n.node(e).order=t})})}var Ao=M.Graph;function Io(e,t,n){n<t&&(r=t,t=n,n=r);var r=e[t];r||(e[t]=r={}),r[n]=!0}function Ro(P){var E,s,a,l,c,e=I.buildLayerMatrix(P),k=A.merge((l=P,c={},A.reduce(e,function(e,r){var i=0,a=0,s=e.length,u=A.last(r);return A.forEach(r,function(e,t){var n=function(t,e){if(t.node(e).dummy)return A.find(t.predecessors(e),function(e){return t.node(e).dummy})}(l,e),o=n?l.node(n).order:s;!n&&e!==u||(A.forEach(r.slice(a,t+1),function(r){A.forEach(l.predecessors(r),function(e){var t=l.node(e),n=t.order;!(n<i||o<n)||t.dummy&&l.node(r).dummy||Io(c,e,r)})}),a=t+1,i=o)}),r}),c),(s=P,a={},A.reduce(e,function(n,r){var o,i=-1,a=0;return A.forEach(r,function(e,t){"border"===s.node(e).dummy&&(e=s.predecessors(e)).length&&(o=s.node(e[0]).order,u(r,a,t,i,o),a=t,i=o),u(r,a,r.length,o,n.length)}),r}),a)),M={};function u(t,e,n,r,o){var i;A.forEach(A.range(e,n),function(e){i=t[e],s.node(i).dummy&&A.forEach(s.predecessors(i),function(e){var t=s.node(e);t.dummy&&(t.order<r||t.order>o)&&Io(a,e,i)})})}A.forEach(["u","d"],function(O){E="u"===O?e:A.values(e).reverse(),A.forEach(["l","r"],function(e){"r"===e&&(E=A.map(E,function(e){return A.values(e).reverse()}));var r,t,n,i,a,o,s,u,l,c,f,h,p,d,y,g,v,m,b,w,_=("u"===O?P.predecessors:P.successors).bind(P),_=(y=E,g=k,v=_,m={},b={},w={},A.forEach(y,function(e){A.forEach(e,function(e,t){w[b[m[e]=e]=e]=t})}),A.forEach(y,function(e){var l=-1;A.forEach(e,function(e){var t,n,r,o=v(e);if(o.length)for(var i=((o=A.sortBy(o,function(e){return w[e]})).length-1)/2,a=Math.floor(i),s=Math.ceil(i);a<=s;++a){var u=o[a];b[e]===e&&l<w[u]&&(r=void 0,(n=u)<(t=e)&&(r=t,t=n,n=r),!A.has(g[t],n))&&(b[u]=e,b[e]=m[e]=m[u],l=w[u])}})}),{root:m,align:b}),x=(r=P,y=E,n=_.align,h={},i=r,y=y,a=t=_.root,o=_="r"===e,c=new Ao,x=i.graph(),s=x.nodesep,u=x.edgesep,l=o,f=function(e,t,n){var r,o=e.node(t),i=e.node(n),t=0;if(t+=o.width/2,A.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":r=-o.width/2;break;case"r":r=o.width/2}if(r&&(t+=l?r:-r),r=0,t=(t=(t+=(o.dummy?u:s)/2)+(i.dummy?u:s)/2)+i.width/2,A.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":r=i.width/2;break;case"r":r=-i.width/2}return r&&(t+=l?r:-r),r=0,t},A.forEach(y,function(e){var o;A.forEach(e,function(e){var t,n,r=a[e];c.setNode(r),o&&(t=a[o],n=c.edge(t,r),c.setEdge(t,r,Math.max(f(i,e,o),n||0))),o=e})}),d=_?"borderLeft":"borderRight",S(function(e){h[e]=p.inEdges(e).reduce(function(e,t){return Math.max(e,h[t.v]+p.edge(t))},0)},(p=c).predecessors.bind(p)),S(function(e){var t=p.outEdges(e).reduce(function(e,t){return Math.min(e,h[t.w]-p.edge(t))},Number.POSITIVE_INFINITY),n=r.node(e);t!==Number.POSITIVE_INFINITY&&n.borderType!==d&&(h[e]=Math.max(h[e],t))},p.successors.bind(p)),A.forEach(n,function(e){h[e]=h[t[e]]}),h);function S(e,t){for(var n=p.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}"r"===e&&(x=A.mapValues(x,function(e){return-e})),M[O+e]=x})}),o=P;var o,n,r,f,h,p,d,t=A.minBy(A.values(M),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return A.forIn(e,function(e,t){t=o.node(t).width/2;n=Math.max(e+t,n),r=Math.min(e-t,r)}),n-r});return f=M,h=t,t=A.values(h),p=A.min(t),d=A.max(t),A.forEach(["u","d"],function(i){A.forEach(["l","r"],function(e){var t,n,r=i+e,o=f[r];o!==h&&(n=A.values(o),t="l"===e?p-A.min(n):d-A.max(n))&&(f[r]=A.mapValues(o,function(e){return e+t}))})}),n=M,r=P.graph().align,A.mapValues(n.ul,function(e,t){return r?n[r.toLowerCase()][t]:((t=A.sortBy(A.map(n,t)))[1]+t[2])/2})}var Lo=I.normalizeRanks,No=I.removeEmptyRanks,L=I,Do=M.Graph,Bo=["nodesep","edgesep","ranksep","marginx","marginy"],Fo={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Go=["acyclicer","ranker","rankdir","align"],zo=["width","height"],Uo={width:0,height:0},Vo=["minlen","weight","width","height","labeloffset"],Wo={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Yo=["labelpos"];function Ho(e,t){return A.mapValues(A.pick(e,t),Number)}function Xo(e){var n={};return A.forEach(e,function(e,t){n[t.toLowerCase()]=e}),n}var qo=M.Graph,r={graphlib:M,layout:function(i,e){var n=e&&e.debugTiming?L.time:L.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return n=i,r=new Do({multigraph:!0,compound:!0}),e=Xo(n.graph()),r.setGraph(A.merge({},Fo,Ho(e,Bo),A.pick(e,Go))),A.forEach(n.nodes(),function(e){var t=Xo(n.node(e));r.setNode(e,A.defaults(Ho(t,zo),Uo)),r.setParent(e,n.parent(e))}),A.forEach(n.edges(),function(e){var t=Xo(n.edge(e));r.setEdge(e,A.merge({},Wo,Ho(t,Vo),A.pick(t,Yo)))}),r;var n,r,e});n("  runLayout",function(){var y,e;y=t,(e=n)("    makeSpaceForEdgeLabels",function(){var t,n;(n=(t=y).graph()).ranksep/=2,A.forEach(t.edges(),function(e){e=t.edge(e);e.minlen*=2,"c"!==e.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?e.width+=e.labeloffset:e.height+=e.labeloffset)})}),e("    removeSelfEdges",function(){var n;n=y,A.forEach(n.edges(),function(e){var t;e.v===e.w&&((t=n.node(e.v)).selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:e,label:n.edge(e)}),n.removeEdge(e))})}),e("    acyclic",function(){var n,r,o,i,a,t,e,s,u,l,c,f,h,p,d;d="greedy"===(n=y).graph().acyclicer?(p=t=n,d=function(e){return p.edge(e).weight},t.nodeCount()<=1?[]:(e=t,s=d||zr,u=new Gr,c=l=0,A.forEach(e.nodes(),function(e){u.setNode(e,{v:e,in:0,out:0})}),A.forEach(e.edges(),function(e){var t=u.edge(e.v,e.w)||0,n=s(e);u.setEdge(e.v,e.w,t+n),c=Math.max(c,u.node(e.v).out+=n),l=Math.max(l,u.node(e.w).in+=n)}),f=A.range(c+l+3).map(function(){return new Nr}),h=l+1,A.forEach(u.nodes(),function(e){Vr(f,h,u.node(e))}),e=function(e,t,n){for(var r,o=[],i=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)Ur(e,t,n,r);for(;r=i.dequeue();)Ur(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;0<s;--s)if(r=t[s].dequeue()){o=o.concat(Ur(e,t,n,r,!0));break}}return o}((d={graph:u,buckets:f,zeroIdx:h}).graph,d.buckets,d.zeroIdx),A.flatten(A.map(e,function(e){return t.outEdges(e.v,e.w)}),!0))):(r=n,o=[],i={},a={},A.forEach(r.nodes(),function t(e){A.has(a,e)||(a[e]=!0,i[e]=!0,A.forEach(r.outEdges(e),function(e){A.has(i,e.w)?o.push(e):t(e.w)}),delete i[e])}),o),A.forEach(d,function(e){var t=n.edge(e);n.removeEdge(e),t.forwardName=e.name,t.reversed=!0,n.setEdge(e.w,e.v,t,A.uniqueId("rev"))})}),e("    nestingGraph.run",function(){go(y)}),e("    rank",function(){var e,t=L.asNonCompoundGraph(y);switch(t.graph().ranker){case"network-simplex":yo(t);break;case"tight-tree":ho(e=t),Zr(e);break;case"longest-path":po(t);break;default:yo(t)}}),e("    injectEdgeLabelProxies",function(){var n;n=y,A.forEach(n.edges(),function(e){var t=n.edge(e);t.width&&t.height&&(t=n.node(e.v),t={rank:(n.node(e.w).rank-t.rank)/2+t.rank,e:e},L.addDummyNode(n,"edge-proxy",t,"_ep"))})}),e("    removeEmptyRanks",function(){No(y)}),e("    nestingGraph.cleanup",function(){var t,e;e=(t=y).graph(),t.removeNode(e.nestingRoot),delete e.nestingRoot,A.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}),e("    normalizeRanks",function(){Lo(y)}),e("    assignRankMinMax",function(){var t,n;t=y,n=0,A.forEach(t.nodes(),function(e){e=t.node(e);e.borderTop&&(e.minRank=t.node(e.borderTop).rank,e.maxRank=t.node(e.borderBottom).rank,n=A.max(n,e.maxRank))}),t.graph().maxRank=n}),e("    removeEdgeLabelProxies",function(){var n;n=y,A.forEach(n.nodes(),function(e){var t=n.node(e);"edge-proxy"===t.dummy&&(n.edge(t.e).labelRank=t.rank,n.removeNode(e))})}),e("    normalize.run",function(){Xr(y)}),e("    parentDummyChains",function(){var l,r,o,i,c;r=l=y,o={},i=0,A.forEach(r.children(),function e(t){var n=i;A.forEach(r.children(t),e),o[t]={low:n,lim:i++}}),c=o,A.forEach(l.graph().dummyChains,function(e){for(var t,n=l.node(e).edgeObj,r=function(e,t,n,r){for(var o,i=[],a=[],s=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim),l=n;l=e.parent(l),i.push(l),l&&(t[l].low>s||u>t[l].lim););for(o=l,l=r;(l=e.parent(l))!==o;)a.push(l);return{path:i.concat(a.reverse()),lca:o}}(l,c,n.v,n.w),o=r.path,i=r.lca,a=0,s=o[a],u=!0;e!==n.w;){if(t=l.node(e),u){for(;(s=o[a])!==i&&l.node(s).maxRank<t.rank;)a++;s===i&&(u=!1)}if(!u){for(;a<o.length-1&&l.node(s=o[a+1]).minRank<=t.rank;)a++;s=o[a]}l.setParent(e,s),e=l.successors(e)[0]}})}),e("    addBorderSegments",function(){var a;a=y,A.forEach(a.children(),function e(t){var n=a.children(t),r=a.node(t);if(n.length&&A.forEach(n,e),A.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var o=r.minRank,i=r.maxRank+1;o<i;++o)vo(a,"borderLeft","_bl",t,r,o),vo(a,"borderRight","_br",t,r,o)}})}),e("    order",function(){Oo(y)}),e("    insertSelfEdges",function(){var o,e;o=y,e=L.buildLayerMatrix(o),A.forEach(e,function(e){var r=0;A.forEach(e,function(e,t){var n=o.node(e);n.order=t+r,A.forEach(n.selfEdges,function(e){L.addDummyNode(o,"selfedge",{width:e.label.width,height:e.label.height,rank:n.rank,order:t+ ++r,e:e.e,label:e.label},"_se")}),delete n.selfEdges})})}),e("    adjustCoordinateSystem",function(){var e,t;"lr"!==(t=(e=y).graph().rankdir.toLowerCase())&&"rl"!==t||mo(e)}),e("    position",function(){var n,r,e,o,i;n=y,r=n=I.asNonCompoundGraph(n),e=I.buildLayerMatrix(r),o=r.graph().ranksep,i=0,A.forEach(e,function(e){var t=A.max(A.map(e,function(e){return r.node(e).height}));A.forEach(e,function(e){r.node(e).y=i+t/2}),i+=t+o}),A.forEach(Ro(n),function(e,t){n.node(t).x=e})}),e("    positionSelfEdges",function(){var a;a=y,A.forEach(a.nodes(),function(e){var t,n,r,o,i=a.node(e);"selfedge"===i.dummy&&(t=(o=a.node(i.e.v)).x+o.width/2,n=o.y,r=i.x-t,o=o.height/2,a.setEdge(i.e,i.label),a.removeNode(e),i.label.points=[{x:t+2*r/3,y:n-o},{x:t+5*r/6,y:n-o},{x:t+r,y:n},{x:t+5*r/6,y:n+o},{x:t+2*r/3,y:n+o}],i.label.x=i.x,i.label.y=i.y)})}),e("    removeBorderNodes",function(){var i;i=y,A.forEach(i.nodes(),function(e){var t,n,r,o;i.children(e).length&&(e=i.node(e),t=i.node(e.borderTop),n=i.node(e.borderBottom),r=i.node(A.last(e.borderLeft)),o=i.node(A.last(e.borderRight)),e.width=Math.abs(o.x-r.x),e.height=Math.abs(n.y-t.y),e.x=r.x+e.width/2,e.y=t.y+e.height/2)}),A.forEach(i.nodes(),function(e){"border"===i.node(e).dummy&&i.removeNode(e)})}),e("    normalize.undo",function(){var o;o=y,A.forEach(o.graph().dummyChains,function(e){var t,n=o.node(e),r=n.edgeLabel;for(o.setEdge(n.edgeObj,r);n.dummy;)t=o.successors(e)[0],o.removeNode(e),r.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),n=o.node(e=t)})}),e("    fixupEdgeLabelCoords",function(){var n;n=y,A.forEach(n.edges(),function(e){var t=n.edge(e);if(A.has(t,"x"))switch("l"!==t.labelpos&&"r"!==t.labelpos||(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset}})}),e("    undoCoordinateSystem",function(){var e,t,n,r;"bt"!==(r=(e=y).graph().rankdir.toLowerCase())&&"rl"!==r||(n=e,A.forEach(n.nodes(),function(e){wo(n.node(e))}),A.forEach(n.edges(),function(e){e=n.edge(e);A.forEach(e.points,wo),A.has(e,"y")&&wo(e)})),"lr"!==r&&"rl"!==r||(t=e,A.forEach(t.nodes(),function(e){_o(t.node(e))}),A.forEach(t.edges(),function(e){e=t.edge(e);A.forEach(e.points,_o),A.has(e,"x")&&_o(e)}),mo(e))}),e("    translateGraph",function(){function t(e){var t=e.x,n=e.y,r=e.width,e=e.height;o=Math.min(o,t-r/2),i=Math.max(i,t+r/2),a=Math.min(a,n-e/2),s=Math.max(s,n+e/2)}var n,o,i,a,s,e,r,u;n=y,o=Number.POSITIVE_INFINITY,i=0,a=Number.POSITIVE_INFINITY,s=0,e=n.graph(),r=e.marginx||0,u=e.marginy||0,A.forEach(n.nodes(),function(e){t(n.node(e))}),A.forEach(n.edges(),function(e){e=n.edge(e);A.has(e,"x")&&t(e)}),o-=r,a-=u,A.forEach(n.nodes(),function(e){e=n.node(e);e.x-=o,e.y-=a}),A.forEach(n.edges(),function(e){e=n.edge(e);A.forEach(e.points,function(e){e.x-=o,e.y-=a}),A.has(e,"x")&&(e.x-=o),A.has(e,"y")&&(e.y-=a)}),e.width=i-o+r,e.height=s-a+u}),e("    assignNodeIntersects",function(){var i;i=y,A.forEach(i.edges(),function(e){var t,n=i.edge(e),r=i.node(e.v),e=i.node(e.w),o=n.points?(t=n.points[0],n.points[n.points.length-1]):(n.points=[],t=e,r);n.points.unshift(L.intersectRect(r,t)),n.points.push(L.intersectRect(e,o))})}),e("    reversePoints",function(){var t;t=y,A.forEach(t.edges(),function(e){e=t.edge(e);e.reversed&&e.points.reverse()})}),e("    acyclic.undo",function(){var r;r=y,A.forEach(r.edges(),function(e){var t,n=r.edge(e);n.reversed&&(r.removeEdge(e),t=n.forwardName,delete n.reversed,delete n.forwardName,r.setEdge(e.w,e.v,n,t))})})}),n("  updateInputGraph",function(){var r,o;r=i,o=t,A.forEach(r.nodes(),function(e){var t=r.node(e),n=o.node(e);t&&(t.x=n.x,t.y=n.y,o.children(e).length)&&(t.width=n.width,t.height=n.height)}),A.forEach(r.edges(),function(e){var t=r.edge(e),e=o.edge(e);t.points=e.points,A.has(e,"x")&&(t.x=e.x,t.y=e.y)}),r.graph().width=o.graph().width,r.graph().height=o.graph().height})})},debug:{debugOrdering:function(t){var e=I.buildLayerMatrix(t),n=new qo({compound:!0,multigraph:!0}).setGraph({});return A.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),A.forEach(t.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),A.forEach(e,function(e,t){n.setNode("layer"+t,{rank:"same"}),A.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}},util:{time:I.time,notime:I.notime},version:"0.8.5"},Jo=r.graphlib,Zo=r.layout,Ko=Pi(function e(t){Ei(this,e),this.cardinality=1,this.include=x.InclusionType.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=x.NodeType.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}),Qo=Pi(function e(){Ei(this,e),this.nodes={},this.edges=[],this.nodes={},this.edges=[]}),$o=(Pi(ni,[{key:"getFirstChild",value:function(){return this.metaGraph.node(this.metaGraph.nodes()[0])}},{key:"getChildren",value:function(){var t=this;return this.metaGraph.nodes().map(function(e){return t.metaGraph.node(e)})}},{key:"leaves",value:function(){for(var t,e=[],n=[this];n.length;){var r=n.shift();r.isGroupNode?(t=r.metaGraph).nodes().forEach(function(e){return n.push(t.node(e))}):e.push(r.name)}return e}}]),ni),ei=(Pi(ti,[{key:"addBaseEdge",value:function(e,t){this.baseEdgeList.push(e)}}]),ti);function ti(e,t){Ei(this,ti),this.v=e,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}function ni(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ei(this,ni),this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=x.InclusionType.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=x.NodeType.META,this.path=[],this.name=e,this.metaGraph=ii(e,x.GraphType.META,t)}function ri(e,t){return new $o(e,1<arguments.length&&void 0!==t?t:{})}function oi(e,t){return new ei(e,t)}function ii(e,t,n){var n=n||{},r=new Jo.Graph(n);return r.setGraph({name:e,rankdir:n.rankdir,type:t,align:n.align}),r}Pi(si,[{key:"getNodeMap",value:function(){return this.index}},{key:"node",value:function(e){return this.index[e]}},{key:"setNode",value:function(e,t){this.index[e]=t}},{key:"getBridgeGraph",value:function(i){var a,e,s=this,t=this.index[i];if(t)return"metaGraph"in t?(e=t).bridgeGraph||(a=ii(F,x.GraphType.BRIDGE,this.graphOptions),e.bridgeGraph=a,t.parentNode&&"metaGraph"in t.parentNode&&[(e=t.parentNode).metaGraph,this.getBridgeGraph(e.name)].forEach(function(e){e.edges().filter(function(e){return e.v===i||e.w===i}).forEach(function(r){var o=r.w===i;e.edge(r).baseEdgeList.forEach(function(e){var t=Oi(o?[e.w,r.v]:[e.v,r.w],2),n=t[0],t=t[1],n=s.getChildName(i,n),n={v:o?t:n,w:o?n:t},t=a.edge(n);t||((t=oi(n.v,n.w)).inbound=o,a.setEdge(n.v,n.w,t)),t.addBaseEdge(e,s)})})}),a):null;throw Error("Could not find node in hierarchy: "+i)}},{key:"getChildName",value:function(e,t){for(var n=this.index[t];n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+t)}},{key:"getPredecessors",value:function(e){var t=this.index[e];if(t)return this.getOneWayEdges(t,!0);throw Error("Could not find node with name: "+e)}},{key:"getSuccessors",value:function(e){var t=this.index[e];if(t)return this.getOneWayEdges(t,!1);throw Error("Could not find node with name: "+e)}},{key:"getOneWayEdges",value:function(e,t){var n,r,o=[];return e.parentNode&&e.parentNode.isGroupNode&&(n=(r=e.parentNode).metaGraph,r=this.getBridgeGraph(r.name),ui(n,e,t,o),ui(r,e,t,o)),o}}]);var ai=si;function si(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Ei(this,si),this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=ri(u,this.graphOptions),this.index[u]=this.root}function ui(t,e,n,r){(n?t.inEdges(e.name):t.outEdges(e.name)).forEach(function(e){e=t.edge(e);r.push(e)})}Pi(pi,[{key:"getRenderInfoNodes",value:function(){return Object.values(this.index)}},{key:"getSubHierarchy",value:function(){return this.hasSubHierarchy}},{key:"buildSubHierarchy",value:function(c){var e,f,h,p,d,y,g,v=this;c in this.hasSubHierarchy||(this.hasSubHierarchy[c]=!0,(e=this.index[c]).node.type===x.NodeType.META&&(f=(e=e).node.metaGraph,h=e.coreGraph,f.nodes().forEach(function(e){var t=v.getOrCreateRenderNodeByName(e);h.setNode(e,t)}),f.edges().forEach(function(e){var t=f.edge(e),t=new fi(t);h.setEdge(e.v,e.w,t)}),p=e.node.parentNode)&&(d=this.getRenderNodeByName(p.name),y=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.concat([e?"IN":"OUT"]).join("~~")},(g=this.hierarchy.getBridgeGraph(c)).edges().forEach(function(e){function t(e){return d.coreGraph.edge(o?{v:e,w:c}:{v:c,w:e})}var n,r=g.edge(e),o=!!f.node(e.w),e=Oi(o?[e.w,e.v]:[e.v,e.w],2),i=e[0],e=e[1],a=(a=t(e))||t(y(o,e,p.name)),s=y(o,c),e=y(o,e,c),u=h.node(e),l=(u||((n=h.node(s))||(l={name:s,type:x.NodeType.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:x.InclusionType.UNSPECIFIED,inbound:o,attr:{}},n=new ci(l),v.index[s]=n,h.setNode(s,n)),l={name:e,type:x.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:x.InclusionType.UNSPECIFIED,inbound:o,attr:{}},u=new ci(l),v.index[e]=u,h.setNode(e,u),h.setParent(e,s),n.node.cardinality++),new fi(r));l.adjoiningMetaEdge=a,o?h.setEdge(e,i,l):h.setEdge(i,e,l)})))}},{key:"getOrCreateRenderNodeByName",value:function(e){var t;return e?e in this.index?this.index[e]:(t=this.getNodeByName(e))?(this.index[e]=t.isGroupNode?new hi(t,this.hierarchy.graphOptions):new ci(t),this.index[e]):null:null}},{key:"getRenderNodeByName",value:function(e){return this.index[e]}},{key:"getNodeByName",value:function(e){return this.hierarchy.node(e)}}]);var li=pi,ci=Pi(function e(t){Ei(this,e),this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}),fi=Pi(function e(t){Ei(this,e),this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}),hi=function(){var e=o,t=ci;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xi(e,t);var r=Si(o);function o(e,t){Ei(this,o),n=r.call(this,e);var n,e=e.metaGraph.graph();return t.compound=!0,n.coreGraph=ii(e.name,x.GraphType.CORE,t),n}return Pi(o)}();function pi(e){Ei(this,pi),this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new hi(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}function di(e,t){var n=t.x-e.x,t=t.y-e.y;return 180*Math.atan(t/n)/Math.PI}function yi(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function gi(e,t){var n,r=t.expanded?t.x:yi(t),o=t.y,i=e.x-r,e=e.y-o,a=(t.expanded?t:t.coreBox).width,t=(t.expanded?t:t.coreBox).height,t=Math.abs(e)*a/2>Math.abs(i)*t/2?(e<0&&(t=-t),n=0==e?0:t/2*i/e,t/2):(n=(a=i<0?-a:a)/2,0==i?0:a/2*e/i);return{x:r+n,y:o+t}}function vi(t){var u,e=t.coreGraph.nodes().map(function(e){return t.coreGraph.node(e)});return Object.assign(Object.assign({},mi(t)),{expanded:t.expanded,nodes:t.expanded?e.map(function(e){return(e.node.type===x.NodeType.META?vi:mi)(e)}):[],edges:t.expanded?(u=t).coreGraph.edges().map(function(e){return{renderInfoEdge:u.coreGraph.edge(e),edge:e}}).filter(function(e){return e.renderInfoEdge.metaEdge}).map(function(e){var t,n,r,o,i,a=e.edge,e=e.renderInfoEdge,s=(t=u,i=(n=e).points.map(function(e){return Object.assign({},e)}),n.adjoiningMetaEdge&&(r=n.adjoiningMetaEdge.points,r=(n=n.metaEdge.inbound)?r[r.length-1]:r[0],n=i[n?0:i.length-1],s=t.x-t.width/2,o=t.y-t.height/2,s=r.x-s,r=r.y-o,o=-t.paddingLeft,t=-(t.paddingTop+t.labelHeight),n.x=s+o,n.y=r+t),i);return{adjoiningEdge:e.adjoiningMetaEdge?{w:e.adjoiningMetaEdge.metaEdge.w,v:e.adjoiningMetaEdge.metaEdge.v}:null,inbound:e.metaEdge.inbound,w:a.w,v:a.v,points:s,weight:e.weight,baseEdgeList:e.metaEdge.baseEdgeList,parentNodeName:u.node.name}}):[]})}function mi(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}x.BRIDGE_GRAPH_NAME=F,x.LAYOUT_CONFIG=N,x.ROOT_NAME=u,x.buildGraph=function(e,t,n){var r=e.nodes.filter(function(t,e,n){return n.findIndex(function(e){return e.id===t.id})!==e}).map(function(e){return e.id});if(r.length)throw new Error("Duplicated ids found: ".concat(r.join(", ")));y={nodes:[]},g=(d=e).compound,v=Object.keys(g||{}),m=new Map,d.nodes.forEach(function(e){var t,n=e.id,r=[].concat(_i(_(n)),[n]),o=(t=n,d.edges.filter(function(e){return e.w===t}).map(function(e){return{name:e.v}}));y.nodes.push({name:n,path:r,inputs:o,width:e.width,height:e.height,attr:Object.assign({},e)})});var o,s,u,l,c,f,h,p,i,a,d,y,g,v,m,b,r=y,e=(e=e.compound||{},a=(null==t?void 0:t.expanded)||[],function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(0===Object.keys(t).length)return _i(new Set(n));var r,o=new Map(Object.keys(t).map(function(e){return[e,t[e]]})),i={},a=wi(o);try{for(a.s();!(r=a.n()).done;){var s=Oi(r.value,2),u=s[0],l=s[1];!function(e,t){var n,r=wi(t.values());try{for(r.s();!(n=r.n()).done;)if(n.value.includes(e))return!0}catch(e){r.e(e)}finally{r.f()}return!1}(u,o)?n=n.concat(u,l):i[u]=l}}catch(e){a.e(e)}finally{a.f()}return e(i,n)}(e).filter(function(e){return a.includes(e)})),r=(o={rankDirection:(null==(o=null==(o=null==n?void 0:n.graph)?void 0:o.meta)?void 0:o.rankDir)||(null==t?void 0:t.rankDirection)||N.graph.meta.rankDir,align:(null==(t=null==(o=null==n?void 0:n.graph)?void 0:o.meta)?void 0:t.align)||N.graph.meta.align},t=r,i=new Qo,t.nodes.map(function(e){return new Ko(e)}).forEach(function(r){(i.nodes[r.name]=r).inputs.forEach(function(e){var t,n;t=i,n=r,(e=e).name!==n.name&&t.edges.push(Object.assign(Object.assign({},e.attr),{v:e.name,w:n.name}))})}),t=i,o=new ai({rankdir:o.rankDirection,align:o.align}),h=o,p=t,Object.keys(p.nodes).forEach(function(e){var t=p.nodes[e],n=t.path,r=h.root;r.depth=Math.max(n.length,r.depth);for(var o=0;o<n.length&&(r.depth=Math.max(r.depth,n.length-o),r.cardinality+=t.cardinality,o!==n.length-1);o++){var i=n[o],a=h.node(i);a||((a=ri(i,h.graphOptions)).path=t.path.slice(0,o+1),a.parentNode=r,h.setNode(i,a),r.metaGraph.setNode(i,a)),r=a}h.setNode(t.name,t),(t.parentNode=r).metaGraph.setNode(t.name,t)}),u=t,f=(s=o).getNodeMap(),u.edges.forEach(function(e){l=[],c=[];for(var t=w(u.nodes[e.v],l),n=w(u.nodes[e.w],c);l[t]===c[n];)if(n--,--t<0||n<0)throw Error("No difference found between ancestor paths.");var r=f[l[t+1]],o=l[t],i=c[n],a=r.metaGraph.edge(o,i);a||(a=oi(o,i),r.metaGraph.setEdge(o,i,a)),a.addBaseEdge(e,s)}),new li(o));function w(e,t){for(var n=0;e;)t[n++]=e.name,e=e.parentNode;return n-1}function _(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(m.has(e))return m.get(e);for(var n=0;n<v.length;n++){var r=v[n];if(g&&-1!==g[r].indexOf(e))return t.unshift(r),_(r,t)}return 0===t.length&&m.set(e,t),t}return b=r,e.forEach(function(t){var e=b.getRenderInfoNodes().find(function(e){return e.displayName===t}),e=e&&e.node&&e.node.name||"",n=b.getRenderNodeByName(e);if(!n)throw new Error("No nodes found: ".concat(e));n.expanded=!0,b.buildSubHierarchy(e)}),function i(e,t){var n,c,r,a,s;e.node.isGroupNode&&(r=e,s=D(a=t),r.coreGraph.nodes().map(function(e){return r.coreGraph.node(e)}).forEach(function(e){var t,n,r=e.height,o=e.width;switch(e.node.type){case x.NodeType.NODE:Object.assign(e,s.nodeSize.node),e.height=r||s.nodeSize.node.height,e.width=o||s.nodeSize.node.width;break;case x.NodeType.BRIDGE:Object.assign(e,s.nodeSize.bridge);break;case x.NodeType.META:e.expanded?i(e,a):(Object.assign(e,s.nodeSize.meta),e.height=s.nodeSize.meta.height,e.width=s.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+e.node.type)}e.expanded||(n=e.attr,function(e,t){t=1<arguments.length&&void 0!==t&&t;e.coreBox.width=e.width,e.coreBox.height=e.height,t||(t="".concat(e.displayName).length,e.width=Math.max(e.coreBox.width,3*t))}(e,a&&(0===e.node.type&&!(null==(t=null==(t=null==a?void 0:a.nodeSize)?void 0:t.meta)||!t.width)||1===e.node.type&&(!(null==(t=null==(t=null==a?void 0:a.nodeSize)?void 0:t.node)||!t.width)||!!n.width)||2===e.node.type&&!(null==(n=null==(t=null==a?void 0:a.nodeSize)?void 0:t.bridge)||!n.width))))})),e.node.type===x.NodeType.META&&(t=D(t),n=t.subScene.meta,Object.assign(e,n),t=t.graph.meta,c={nodesep:t.nodeSep,ranksep:t.rankSep,edgesep:t.edgeSep,align:t.align},Object.assign(e.coreBox,function(o){var e=c.ranksep,t=c.nodesep,n=c.edgesep,r=c.align,i=(Object.assign(o.graph(),{ranksep:e,nodesep:t,edgesep:n,align:r}),[]);if(o.nodes().forEach(function(e){o.node(e).node.type!==x.NodeType.BRIDGE&&i.push(e)}),!i.length)return{width:0,height:0};Zo(o);var a=1/0,s=1/0,u=-1/0,l=-1/0;return i.forEach(function(e){var t=.5*(e=o.node(e)).width,n=e.x-t,t=e.x+t,n=(a=n<a?n:a,u=u<t?t:u,.5*e.height),t=e.y-n,e=e.y+n;s=t<s?t:s,l=l<e?e:l}),o.edges().forEach(function(e){var e=o.edge(e),t=o.node(e.metaEdge.v),n=o.node(e.metaEdge.w),r=(3===e.points.length&&function(e){for(var t=di(e[0],e[1]),n=1;n<e.length-1;n++){var r=di(e[n],e[n+1]);if(1<Math.abs(r-t))return;t=r}return 1}(e.points)&&(null!=t&&(r=t.expanded?t.x:yi(t),e.points[0].x=r),null!=n&&(r=n.expanded?n.x:yi(n),e.points[2].x=r),e.points=[e.points[0],e.points[1]]),e.points[e.points.length-2]),r=(null!=n&&(e.points[e.points.length-1]=gi(r,n)),e.points[1]);null!=t&&(e.points[0]=gi(r,t)),e.points.forEach(function(e){a=e.x<a?e.x:a,u=e.x>u?e.x:u,s=e.y<s?e.y:s,l=e.y>l?e.y:l})}),o.nodes().forEach(function(e){(e=o.node(e)).x-=a,e.y-=s}),o.edges().forEach(function(e){o.edge(e).points.forEach(function(e){e.x-=a,e.y-=s})}),{width:u-a,height:l-s}}(e.coreGraph)),(t=0)<e.coreGraph.nodeCount()&&t++,t=t<=1?0:t,e.coreBox.width+=t+t,e.coreBox.height=n.labelHeight+e.coreBox.height,e.width=e.coreBox.width+n.paddingLeft+n.paddingRight,e.height=e.paddingTop+e.coreBox.height+e.paddingBottom)}(r.root,n),vi(r.root)},x.flatGraph=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=JSON.parse(JSON.stringify(e)),o={nodes:[e],edges:_i(e.edges)};return e.nodes.forEach(function e(t){0!==t.type&&1!==t.type||o.nodes.push(t),0===t.type&&(o.edges=o.edges.concat(t.edges)),Array.isArray(t.nodes)&&t.nodes.forEach(e)}),t&&o.nodes.forEach(function(t){var e,n,r=o.nodes.find(function(e){return e.id===t.parentNodeName});r&&(e=r.x-r.width/2+r.paddingLeft,n=r.y-r.height/2+r.labelHeight+r.paddingTop,r.id!==u&&(t.x+=e,t.y+=n),0===t.type)&&t.edges.forEach(function(e){e.points.forEach(function(e){e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop})})}),o},x.getEdges=function(n,r,o,i){var a=[],e=(null==(e=o.find(function(e){return e.id===n}))?void 0:e.path)||[],t=(null==(t=o.find(function(e){return e.id===r}))?void 0:t.path)||[],s=[u].concat(_i(e)).slice(0,e.length).reverse(),e=[u].concat(_i(t)).slice(0,t.length);return s.forEach(function(t){var e=o.find(function(e){return e.id===t});a=a.concat(e.edges.filter(function(e){return e.baseEdgeList.some(function(e){return e.v===((null==i?void 0:i.v)||n)&&e.w===((null==i?void 0:i.w)||r)})}))}),e.filter(function(e){return!s.includes(e)}).forEach(function(t){var e=o.find(function(e){return e.id===t});a=a.concat(e.edges.filter(function(e){return e.baseEdgeList.some(function(e){return e.v===((null==i?void 0:i.v)||n)&&e.w===((null==i?void 0:i.w)||r)})}))}),a},x.mergeConfig=D,Object.defineProperty(x,"__esModule",{value:!0})},"object"==ki(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},81758:function(e,t){"use strict";var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVersion=t.detectOS=t.parseUserAgent=t.browserName=t.detect=t.ReactNativeInfo=t.BotInfo=t.SearchBotDeviceInfo=t.NodeInfo=t.BrowserInfo=void 0,function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}),n=(t.BrowserInfo=i,function(e){this.version=e,this.type="node",this.name="node",this.os=g.platform}),a=(t.NodeInfo=n,function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"}),s=(t.SearchBotDeviceInfo=a,function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}),r=(t.BotInfo=s,function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}),u=(t.ReactNativeInfo=r,/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/),l=3,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(r){return""!==r&&c.reduce(function(e,t){var n=t[0],t=t[1];return e||!!(e=t.exec(r))&&[n,e]},!1)}function p(e){var t,n,r=h(e);return r?(t=r[0],r=r[1],"searchbot"===t?new s:((r=r[1]&&r[1].split(".").join("_").split("_").slice(0,3))?r.length<l&&(r=o(o([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(l-r.length),!0)):r=[],r=r.join("."),n=d(e),(e=u.exec(e))&&e[1]?new a(t,r,n,e[1]):new i(t,r,n))):null}function d(e){for(var t=0,n=f.length;t<n;t++){var r=f[t],o=r[0];if(r[1].exec(e))return o}return null}function y(){return void 0!==g&&g.version?new n(g.version.slice(1)):null}t.detect=function(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new r:"undefined"!=typeof navigator?p(navigator.userAgent):y()},t.browserName=function(e){e=h(e);return e?e[0]:null},t.parseUserAgent=p,t.detectOS=d,t.getNodeVersion=y},95676:function(e,t){var n;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(e){"use strict";var g=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,t="[^\\s]+",v=/\[([^]*?)\]/gm;function n(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push(e[r].substr(0,t));return n}function r(n){return function(e,t){t=t[n].map(function(e){return e.toLowerCase()}).indexOf(e.toLowerCase());return-1<t?t:null}}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i,a=o[r];for(i in a)e[i]=a[i]}return e}function o(e){return w=m(w,e)}function b(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function i(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e}function a(e){return+e-1}function s(e){return m(x,e)}function u(t,e,n){if(void 0===e&&(e=x.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var r=[],o=(e=(e=x[e]||e).replace(v,function(e,t){return r.push(t),"@@@"}),m(m({},w),n));return(e=e.replace(g,function(e){return h[e](t,o)})).replace(/@@@/g,function(){return r.shift()})}var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"],f=n(c,3),l={dayNamesShort:n(l,3),dayNames:l,monthNamesShort:f,monthNames:c,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][3<e%10?0:(e-e%10!=10?1:0)*e%10]}},w=m({},l),h={D:function(e){return String(e.getDate())},DD:function(e){return i(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return i(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return i(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return i(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return i(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return i(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return i(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return i(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return i(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return i(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return i(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return(e.getHours()<12?t.amPm[0]:t.amPm[1]).toUpperCase()},ZZ:function(e){e=e.getTimezoneOffset();return(0<e?"-":"+")+i(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(e){e=e.getTimezoneOffset();return(0<e?"-":"+")+i(Math.floor(Math.abs(e)/60),2)+":"+i(Math.abs(e)%60,2)}},f=[null,"\\d\\d?"],c=[null,t],p=["isPm",t,function(e,t){e=e.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],d=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t,e=(e+"").match(/([+-]|\d\d)/gi);return e?(t=60*+e[1]+parseInt(e[2],10),"+"===e[0]?t:-t):0}],_={D:["day","\\d\\d?"],DD:["day","\\d\\d"],Do:["day","\\d\\d?"+t,function(e){return parseInt(e,10)}],M:["month","\\d\\d?",a],MM:["month","\\d\\d",a],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(68<+e?t-1:t)+e)}],h:["hour","\\d\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","\\d\\d?"],HH:["hour","\\d\\d"],m:["minute","\\d\\d?"],mm:["minute","\\d\\d"],s:["second","\\d\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:f,dd:f,ddd:c,dddd:c,MMM:["month",t,r("monthNamesShort")],MMMM:["month",t,r("monthNames")],a:p,A:p,ZZ:d,Z:d},x={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};function y(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=x[t]||t,1e3<e.length)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],i=[],t=t.replace(v,function(e,t){return i.push(b(t)),"@@@"}),a={},s={},t=b(t).replace(g,function(e){var e=_[e],t=e[0],n=e[1],r=e[3];if(a[t])throw new Error("Invalid format. "+t+" specified twice in format");return a[t]=!0,r&&(s[r]=!0),o.push(e),"("+n+")"}),u=(Object.keys(s).forEach(function(e){if(!a[e])throw new Error("Invalid format. "+e+" is required in specified format")}),t=t.replace(/@@@/g,function(){return i.shift()}),e.match(new RegExp(t,"i")));if(!u)return null;for(var l=m(m({},w),n),c=1;c<u.length;c++){var f=o[c-1],h=f[0],f=f[2],f=f?f(u[c],l):+u[c];if(null==f)return null;r[h]=f}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){for(var p=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),d=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(c=0,d.length);c<y;c++)if(a[d[c][0]]&&r[d[c][0]]!==p[d[c][1]]())return null}else if(p=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),11<r.month||r.month<0||31<r.day||r.day<1||23<r.hour||r.hour<0||59<r.minute||r.minute<0||59<r.second||r.second<0)return null;return p}f={format:u,parse:y,defaultI18n:l,setGlobalDateI18n:o,setGlobalDateMasks:s};e.assign=m,e.default=f,e.format=u,e.parse=y,e.defaultI18n=l,e.setGlobalDateI18n=o,e.setGlobalDateMasks=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)?n(t):void 0!==(t="function"==typeof(n=n)?n.apply(t,[t]):n)&&(e.exports=t)},95937:function(g){!function(e){"use strict";var u,n,r,o,i;function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return e="string"!=typeof e?String(e):e}function l(t){this.map={},t instanceof l?t.forEach(function(e,t){this.append(t,e)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function t(e){var t=new FileReader;return t.readAsArrayBuffer(e),f(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e,t){if("string"==typeof(this._bodyInit=e))this._bodyText=e;else if(u&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(n&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},u?(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(t)},this.text=function(){var e,t,n,r=c(this);if(r)return r;if(this._bodyBlob)return r=this._bodyBlob,t=this._options,e=new FileReader,t=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",t=r.type.match(n=/charset\=[0-9a-zA-Z\-\_]*;?/)||t.match(n),n=[r],t&&n.push(t[0].replace(/^charset\=/,"").replace(/;$/,"")),e.readAsText.apply(e,n),f(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){return c(this)||Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e,t){var n,r=(t=t||{}).body;if(p.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=(n=(e=t.method||this.method||"GET").toUpperCase(),-1<o.indexOf(n)?n:e),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r,t)}function d(e){var n=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(t=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function y(e,t){this._initBody(e,t=t||{}),this.type="default",this.status=t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof l?t.headers:new l(t.headers),this.url=t.url||""}!e.__disableNativeFetch&&e.fetch||(l.prototype.append=function(e,t){e=a(e),t=s(t);var n=this.map[e];n||(this.map[e]=n=[]),n.push(t)},l.prototype.delete=function(e){delete this.map[a(e)]},l.prototype.get=function(e){e=this.map[a(e)];return e?e[0]:null},l.prototype.getAll=function(e){return this.map[a(e)]||[]},l.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},l.prototype.set=function(e,t){this.map[a(e)]=[s(t)]},l.prototype.forEach=function(n,r){Object.getOwnPropertyNames(this.map).forEach(function(t){this.map[t].forEach(function(e){n.call(r,e,t,this)},this)},this)},u="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),n="FormData"in e,r="ArrayBuffer"in e,o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],p.prototype.clone=function(){return new p(this)},h.call(p.prototype),h.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e},i=[301,302,303,307,308],y.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=p,e.Response=y,e.fetch=function(n,s){return new Promise(function(r,o){var e=p.prototype.isPrototypeOf(n)&&!s?n:new p(n,s),i=new XMLHttpRequest,a=!1;function t(){if(4===i.readyState){var e=1223===i.status?204:i.status;if(e<100||599<e)return a?void 0:(a=!0,void o(new TypeError("Network request failed")));var e={status:e,statusText:i.statusText,headers:(e=i,n=new l,e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var e=e.trim().split(":"),t=e.shift().trim(),e=e.join(":").trim();n.append(t,e)}),n),url:"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0},t="response"in i?i.response:i.responseText;a||(a=!0,r(new y(t,e)))}var n}i.onreadystatechange=t,i.onload=t,i.onerror=function(){a||(a=!0,o(new TypeError("Network request failed")))},i.open(e.method,e.url,!0);try{"include"===e.credentials&&("withCredentials"in i?i.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in i&&u&&(i.responseType="blob"),e.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},e.fetch.polyfill=!0,g.exports&&(g.exports=e.fetch))}("undefined"!=typeof self?self:this)},54238:function(e,t){var n;void 0!==(t="function"==typeof(n=function(e,t){"use strict";var n=5e3,r="callback";function f(t){try{delete window[t]}catch(e){window[t]=void 0}}function h(e){e=document.getElementById(e);e&&document.getElementsByTagName("head")[0].removeChild(e)}t.exports=function(i){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=i,u=a.timeout||n,l=a.jsonpCallback||r,c=void 0;return new Promise(function(t,e){var n=a.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),r=l+"_"+n,o=(window[n]=function(e){t({ok:!0,json:function(){return Promise.resolve(e)}}),c&&clearTimeout(c),h(r),f(n)},s+=-1===s.indexOf("?")?"?":"&",document.createElement("script"));o.setAttribute("src",""+s+l+"="+n),a.charset&&o.setAttribute("charset",a.charset),o.id=r,document.getElementsByTagName("head")[0].appendChild(o),c=setTimeout(function(){e(new Error("JSONP request to "+i+" timed out")),f(n),h(r),window[n]=function(){f(n)}},u),o.onerror=function(){e(new Error("JSONP request to "+i+" failed")),f(n),h(r),c&&clearTimeout(c)}})}})?n.apply(t,[t,e]):n)&&(e.exports=t)},64634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;var o=n(51603),u=n(1083);function i(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.bb=o.ByteBuffer.allocate(e=e||1024),this.space=e}i.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},i.prototype.forceDefaults=function(e){this.force_defaults=e},i.prototype.dataBuffer=function(){return this.bb},i.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},i.prototype.prep=function(e,t){e>this.minalign&&(this.minalign=e);for(var n=1+~(this.bb.capacity()-this.space+t)&e-1;this.space<n+e+t;){var r=this.bb.capacity();this.bb=i.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)},i.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},i.prototype.writeInt8=function(e){this.bb.writeInt8(--this.space,e)},i.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},i.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},i.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},i.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},i.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},i.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},i.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},i.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},i.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},i.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},i.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},i.prototype.addFieldInt8=function(e,t,n){!this.force_defaults&&t==n||(this.addInt8(t),this.slot(e))},i.prototype.addFieldInt16=function(e,t,n){!this.force_defaults&&t==n||(this.addInt16(t),this.slot(e))},i.prototype.addFieldInt32=function(e,t,n){!this.force_defaults&&t==n||(this.addInt32(t),this.slot(e))},i.prototype.addFieldInt64=function(e,t,n){!this.force_defaults&&t===n||(this.addInt64(t),this.slot(e))},i.prototype.addFieldFloat32=function(e,t,n){!this.force_defaults&&t==n||(this.addFloat32(t),this.slot(e))},i.prototype.addFieldFloat64=function(e,t,n){!this.force_defaults&&t==n||(this.addFloat64(t),this.slot(e))},i.prototype.addFieldOffset=function(e,t,n){!this.force_defaults&&t==n||(this.addOffset(t),this.slot(e))},i.prototype.addFieldStruct=function(e,t,n){t!=n&&(this.nested(t),this.slot(e))},i.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},i.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},i.prototype.slot=function(e){null!==this.vtable&&(this.vtable[e]=this.offset())},i.prototype.offset=function(){return this.bb.capacity()-this.space},i.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=t<<1,r=o.ByteBuffer.allocate(n);return r.setPosition(n-t),r.bytes().set(e.bytes(),n-t),r},i.prototype.addOffset=function(e){this.prep(u.SIZEOF_INT,0),this.writeInt32(this.offset()-e+u.SIZEOF_INT)},i.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},i.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;0<=t&&0==this.vtable[t];t--);for(var n=t+1;0<=t;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var r=(n+2)*u.SIZEOF_SHORT,o=(this.addInt16(r),0),i=this.space;e:for(t=0;t<this.vtables.length;t++){var a=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(a)){for(var s=u.SIZEOF_SHORT;s<r;s+=u.SIZEOF_SHORT)if(this.bb.readInt16(i+s)!=this.bb.readInt16(a+s))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},i.prototype.finish=function(e,t,n){n=n?u.SIZE_PREFIX_LENGTH:0;if(t){var r=t;if(this.prep(this.minalign,u.SIZEOF_INT+u.FILE_IDENTIFIER_LENGTH+n),r.length!=u.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+u.FILE_IDENTIFIER_LENGTH);for(var o=u.FILE_IDENTIFIER_LENGTH-1;0<=o;o--)this.writeInt8(r.charCodeAt(o))}this.prep(this.minalign,u.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},i.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},i.prototype.requiredField=function(e,t){e=this.bb.capacity()-e,e-=this.bb.readInt32(e);if(0==this.bb.readInt16(e+t))throw new Error("FlatBuffers: field "+t+" must be set")},i.prototype.startVector=function(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(u.SIZEOF_INT,e*t),this.prep(n,e*t)},i.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},i.prototype.createSharedString=function(e){var t;return e?(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e)?this.string_maps.get(e):(t=this.createString(e),this.string_maps.set(e,t),t)):0},i.prototype.createString=function(e){if(null==e)return 0;if(e instanceof Uint8Array)t=e;else for(var t=[],n=0;n<e.length;){var r=void 0,o=e.charCodeAt(n++);(r=o<55296||56320<=o?o:(o<<10)+e.charCodeAt(n++)+-56613888)<128?t.push(r):(r<2048?t.push(r>>6&31|192):(r<65536?t.push(r>>12&15|224):t.push(r>>18&7|240,r>>12&63|128),t.push(r>>6&63|128)),t.push(63&r|128))}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(var n=0,i=this.space,a=this.bb.bytes();n<t.length;n++)a[i++]=t[n];return this.endVector()},i.prototype.createObjectOffset=function(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)},i.prototype.createObjectOffsetList=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(r))}return t},i.prototype.createStructOffsetList=function(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()},t.Builder=i},51603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var l=n(1083),r=n(28700),c=n(31958);function o(e){this.bytes_=e,this.position_=0}o.allocate=function(e){return new o(new Uint8Array(e))},o.prototype.clear=function(){this.position_=0},o.prototype.bytes=function(){return this.bytes_},o.prototype.position=function(){return this.position_},o.prototype.setPosition=function(e){this.position_=e},o.prototype.capacity=function(){return this.bytes_.length},o.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},o.prototype.readUint8=function(e){return this.bytes_[e]},o.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},o.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},o.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},o.prototype.readUint32=function(e){return this.readInt32(e)>>>0},o.prototype.readInt64=function(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},o.prototype.readUint64=function(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},o.prototype.readFloat32=function(e){return r.int32[0]=this.readInt32(e),r.float32[0]},o.prototype.readFloat64=function(e){return r.int32[r.isLittleEndian?0:1]=this.readInt32(e),r.int32[r.isLittleEndian?1:0]=this.readInt32(e+4),r.float64[0]},o.prototype.writeInt8=function(e,t){this.bytes_[e]=t},o.prototype.writeUint8=function(e,t){this.bytes_[e]=t},o.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},o.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},o.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},o.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},o.prototype.writeInt64=function(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))},o.prototype.writeUint64=function(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))},o.prototype.writeFloat32=function(e,t){r.float32[0]=t,this.writeInt32(e,r.int32[0])},o.prototype.writeFloat64=function(e,t){r.float64[0]=t,this.writeInt32(e,r.int32[r.isLittleEndian?0:1]),this.writeInt32(e+4,r.int32[r.isLittleEndian?1:0])},o.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+l.SIZEOF_INT+l.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<l.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+l.SIZEOF_INT+t));return e},o.prototype.__offset=function(e,t){e-=this.readInt32(e);return t<this.readInt16(e)?this.readInt16(e+t):0},o.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},o.prototype.__string=function(e,t){e+=this.readInt32(e);var n=this.readInt32(e),r="",o=0;if(e+=l.SIZEOF_INT,t===c.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+n);for(;o<n;){var i,a,s=void 0,u=this.readUint8(e+o++);(s=u<192?u:(i=this.readUint8(e+o++),u<224?(31&u)<<6|63&i:(a=this.readUint8(e+o++),u<240?(15&u)<<12|(63&i)<<6|63&a:(7&u)<<18|(63&i)<<12|(63&a)<<6|63&this.readUint8(e+o++))))<65536?r+=String.fromCharCode(s):(s-=65536,r+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return r},o.prototype.__union_with_string=function(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)},o.prototype.__indirect=function(e){return e+this.readInt32(e)},o.prototype.__vector=function(e){return e+this.readInt32(e)+l.SIZEOF_INT},o.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},o.prototype.__has_identifier=function(e){if(e.length!=l.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+l.FILE_IDENTIFIER_LENGTH);for(var t=0;t<l.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+l.SIZEOF_INT+t))return!1;return!0},o.prototype.createScalarList=function(e,t){for(var n=[],r=0;r<t;++r)null!==e(r)&&n.push(e(r));return n},o.prototype.createObjList=function(e,t){for(var n=[],r=0;r<t;++r){var o=e(r);null!==o&&n.push(o.unpack())}return n},t.ByteBuffer=o},1083:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0,t.SIZEOF_SHORT=2,t.SIZEOF_INT=4,t.FILE_IDENTIFIER_LENGTH=4,t.SIZE_PREFIX_LENGTH=4},31958:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Encoding=void 0,(t=t.Encoding||(t.Encoding={}))[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"},61095:function(e,t,n){"use strict";t.cZ=t.XU=void 0;n(1083),n(1083),n(1083);var r=n(1083),o=(Object.defineProperty(t,"XU",{enumerable:!0,get:function(){return r.SIZE_PREFIX_LENGTH}}),n(28700),n(31958),n(64634),n(51603));Object.defineProperty(t,"cZ",{enumerable:!0,get:function(){return o.ByteBuffer}})},28700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLittleEndian=t.float64=t.float32=t.int32=void 0,t.int32=new Int32Array(2),t.float32=new Float32Array(t.int32.buffer),t.float64=new Float64Array(t.int32.buffer),t.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},52105:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=r=e},t.toRadian=function(e){return e*i},t.equals=function(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))},t.RANDOM=t.ARRAY_TYPE=t.EPSILON=void 0;var n=1e-6,r=(t.EPSILON=n,"undefined"!=typeof Float32Array?Float32Array:Array),o=(t.ARRAY_TYPE=r,Math.random),i=(t.RANDOM=o,Math.PI/180);Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},27018:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var r=o(n(52105)),r=(t.glMatrix=r,o(n(75352))),r=(t.mat2=r,o(n(21967))),r=(t.mat2d=r,o(n(96081))),r=(t.mat3=r,o(n(92956))),r=(t.mat4=r,o(n(2774))),r=(t.quat=r,o(n(73195))),r=(t.quat2=r,o(n(49679))),r=(t.vec2=r,o(n(7157))),r=(t.vec3=r,o(n(21020)));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}t.vec4=r},75352:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,n,r){var o=new u.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o},t.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},t.transpose=function(e,t){var n;return e===t?(n=t[1],e[1]=t[2],e[2]=n):(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3]),e},t.invert=function(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=n*t-o*r;return i?(e[0]=t*(i=1/i),e[1]=-r*i,e[2]=-o*i,e[3]=n*i,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=r,t.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=Math.sin(n),n=Math.cos(n);return e[0]=r*n+i*a,e[1]=o*n+t*a,e[2]=r*-a+i*n,e[3]=o*-a+t*n,e},t.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=n[0],n=n[1];return e[0]=r*a,e[1]=o*a,e[2]=i*n,e[3]=t*n,e},t.fromRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=-n,e[3]=t,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},t.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=o,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],e=e[3],i=t[0],a=t[1],s=t[2],t=t[3];return Math.abs(n-i)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(e-t)<=u.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.sub=t.mul=void 0;var u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=n[0],s=n[1],u=n[2],n=n[3];return e[0]=r*a+i*s,e[1]=o*a+t*s,e[2]=r*u+i*n,e[3]=o*u+t*n,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}t.mul=r;n=o;t.sub=n},21967:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new h.ARRAY_TYPE(6);return h.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new h.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,n,r,o,i){var a=new h.ARRAY_TYPE(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a},t.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},t.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],t=t[5],s=n*i-r*o;return s?(e[0]=i*(s=1/s),e[1]=-r*s,e[2]=-o*s,e[3]=n*s,e[4]=(o*t-i*a)*s,e[5]=(r*a-n*t)*s,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=r,t.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],t=t[5],u=Math.sin(n),n=Math.cos(n);return e[0]=r*n+i*u,e[1]=o*n+a*u,e[2]=r*-u+i*n,e[3]=o*-u+a*n,e[4]=s,e[5]=t,e},t.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],t=t[5],u=n[0],n=n[1];return e[0]=r*u,e[1]=o*u,e[2]=i*n,e[3]=a*n,e[4]=s,e[5]=t,e},t.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],t=t[5],u=n[0],n=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*u+i*n+s,e[5]=o*u+a*n+t,e},t.fromRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=-n,e[3]=t,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},t.subtract=o,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],e=e[5],s=t[0],u=t[1],l=t[2],c=t[3],f=t[4],t=t[5];return Math.abs(n-s)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=h.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(e-t)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.sub=t.mul=void 0;var h=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],t=t[5],u=n[0],l=n[1],c=n[2],f=n[3],h=n[4],n=n[5];return e[0]=r*u+i*l,e[1]=o*u+a*l,e[2]=r*c+i*f,e[3]=o*c+a*f,e[4]=r*h+i*n+s,e[5]=o*h+a*n+t,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}t.mul=r;n=o;t.sub=n},96081:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new m.ARRAY_TYPE(9);return m.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new m.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,n,r,o,i,a,s,u){var l=new m.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=o,l[5]=i,l[6]=a,l[7]=s,l[8]=u,l},t.set=function(e,t,n,r,o,i,a,s,u,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){var n,r,o;return e===t?(n=t[1],r=t[2],o=t[5],e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o):(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]),e},t.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],t=t[8],c=t*a-s*l,f=-t*i+s*u,h=l*i-a*u,p=n*c+r*f+o*h;return p?(e[0]=c*(p=1/p),e[1]=(-t*r+o*l)*p,e[2]=(s*r-o*a)*p,e[3]=f*p,e[4]=(t*n-o*u)*p,e[5]=(-s*n+o*i)*p,e[6]=h*p,e[7]=(-l*n+r*u)*p,e[8]=(a*n-r*i)*p,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],t=t[8];return e[0]=a*t-s*l,e[1]=o*l-r*t,e[2]=r*s-o*a,e[3]=s*u-i*t,e[4]=n*t-o*u,e[5]=o*i-n*s,e[6]=i*l-a*u,e[7]=r*u-n*l,e[8]=n*a-r*i,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],e=e[8];return t*(e*i-a*u)+n*(-e*o+a*s)+r*(u*o-i*s)},t.multiply=r,t.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],t=t[8],f=n[0],n=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=u,e[6]=f*r+n*a+l,e[7]=f*o+n*s+c,e[8]=f*i+n*u+t,e},t.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],t=t[8],f=Math.sin(n),n=Math.cos(n);return e[0]=n*r+f*a,e[1]=n*o+f*s,e[2]=n*i+f*u,e[3]=n*a-f*r,e[4]=n*s-f*o,e[5]=n*u-f*i,e[6]=l,e[7]=c,e[8]=t,e},t.scale=function(e,t,n){var r=n[0],n=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=-n,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=n+n,a=r+r,s=o+o,n=n*i,u=r*i,r=r*a,l=o*i,c=o*a,o=o*s,i=t*i,a=t*a,t=t*s;return e[0]=1-r-o,e[3]=u-t,e[6]=l+a,e[1]=u+t,e[4]=1-n-o,e[7]=c-i,e[2]=l-a,e[5]=c+i,e[8]=1-n-r,e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],g=t[14],t=t[15],v=n*s-r*a,m=n*u-o*a,b=n*l-i*a,w=r*u-o*s,_=r*l-i*s,x=o*l-i*u,S=c*y-f*d,O=c*g-h*d,c=c*t-p*d,P=f*g-h*y,f=f*t-p*y,h=h*t-p*g,p=v*h-m*f+b*P+w*c-_*O+x*S;return p?(e[0]=(s*h-u*f+l*P)*(p=1/p),e[1]=(u*c-a*h-l*O)*p,e[2]=(a*f-s*c+l*S)*p,e[3]=(o*f-r*h-i*P)*p,e[4]=(n*h-o*c+i*O)*p,e[5]=(r*c-n*f-i*S)*p,e[6]=(y*x-g*_+t*w)*p,e[7]=(g*b-d*x-t*m)*p,e[8]=(d*_-y*b+t*v)*p,e):null},t.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},t.subtract=o,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],e=e[8],c=t[0],f=t[1],h=t[2],p=t[3],d=t[4],y=t[5],g=t[6],v=t[7],t=t[8];return Math.abs(n-c)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=m.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-p)<=m.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-y)<=m.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-g)<=m.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-v)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(e-t)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.sub=t.mul=void 0;var m=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],t=t[8],f=n[0],h=n[1],p=n[2],d=n[3],y=n[4],g=n[5],v=n[6],m=n[7],n=n[8];return e[0]=f*r+h*a+p*l,e[1]=f*o+h*s+p*c,e[2]=f*i+h*u+p*t,e[3]=d*r+y*a+g*l,e[4]=d*o+y*s+g*c,e[5]=d*i+y*u+g*t,e[6]=v*r+m*a+n*l,e[7]=v*o+m*s+n*c,e[8]=v*i+m*u+n*t,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}t.mul=r;n=o;t.sub=n},92956:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new A.ARRAY_TYPE(16);return A.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new A.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,n,r,o,i,a,s,u,l,c,f,h,p,d,y){var g=new A.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=o,g[5]=i,g[6]=a,g[7]=s,g[8]=u,g[9]=l,g[10]=c,g[11]=f,g[12]=h,g[13]=p,g[14]=d,g[15]=y,g},t.set=function(e,t,n,r,o,i,a,s,u,l,c,f,h,p,d,y,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=f,e[11]=h,e[12]=p,e[13]=d,e[14]=y,e[15]=g,e},t.identity=d,t.transpose=function(e,t){var n,r,o,i,a,s;return e===t?(n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]),e},t.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],g=t[14],t=t[15],v=n*s-r*a,m=n*u-o*a,b=n*l-i*a,w=r*u-o*s,_=r*l-i*s,x=o*l-i*u,S=c*y-f*d,O=c*g-h*d,P=c*t-p*d,E=f*g-h*y,k=f*t-p*y,M=h*t-p*g,j=v*M-m*k+b*E+w*P-_*O+x*S;return j?(e[0]=(s*M-u*k+l*E)*(j=1/j),e[1]=(o*k-r*M-i*E)*j,e[2]=(y*x-g*_+t*w)*j,e[3]=(h*_-f*x-p*w)*j,e[4]=(u*P-a*M-l*O)*j,e[5]=(n*M-o*P+i*O)*j,e[6]=(g*b-d*x-t*m)*j,e[7]=(c*x-h*b+p*m)*j,e[8]=(a*k-s*P+l*S)*j,e[9]=(r*P-n*k-i*S)*j,e[10]=(d*_-y*b+t*v)*j,e[11]=(f*b-c*_-p*v)*j,e[12]=(s*O-a*E-u*S)*j,e[13]=(n*E-r*O+o*S)*j,e[14]=(y*m-d*w-g*v)*j,e[15]=(c*w-f*m+h*v)*j,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],g=t[14],t=t[15];return e[0]=s*(h*t-p*g)-f*(u*t-l*g)+y*(u*p-l*h),e[1]=-(r*(h*t-p*g)-f*(o*t-i*g)+y*(o*p-i*h)),e[2]=r*(u*t-l*g)-s*(o*t-i*g)+y*(o*l-i*u),e[3]=-(r*(u*p-l*h)-s*(o*p-i*h)+f*(o*l-i*u)),e[4]=-(a*(h*t-p*g)-c*(u*t-l*g)+d*(u*p-l*h)),e[5]=n*(h*t-p*g)-c*(o*t-i*g)+d*(o*p-i*h),e[6]=-(n*(u*t-l*g)-a*(o*t-i*g)+d*(o*l-i*u)),e[7]=n*(u*p-l*h)-a*(o*p-i*h)+c*(o*l-i*u),e[8]=a*(f*t-p*y)-c*(s*t-l*y)+d*(s*p-l*f),e[9]=-(n*(f*t-p*y)-c*(r*t-i*y)+d*(r*p-i*f)),e[10]=n*(s*t-l*y)-a*(r*t-i*y)+d*(r*l-i*s),e[11]=-(n*(s*p-l*f)-a*(r*p-i*f)+c*(r*l-i*s)),e[12]=-(a*(f*g-h*y)-c*(s*g-u*y)+d*(s*h-u*f)),e[13]=n*(f*g-h*y)-c*(r*g-o*y)+d*(r*h-o*f),e[14]=-(n*(s*g-u*y)-a*(r*g-o*y)+d*(r*u-o*s)),e[15]=n*(s*h-u*f)-a*(r*h-o*f)+c*(r*u-o*s),e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],y=e[14],e=e[15];return(t*a-n*i)*(f*e-h*y)-(t*s-r*i)*(c*e-h*d)+(t*u-o*i)*(c*y-f*d)+(n*s-r*a)*(l*e-h*p)-(n*u-o*a)*(l*y-f*p)+(r*u-o*s)*(l*d-c*p)},t.multiply=r,t.translate=function(e,t,n){var r,o,i,a,s,u,l,c,f,h,p,d,y=n[0],g=n[1],n=n[2];return t===e?(e[12]=t[0]*y+t[4]*g+t[8]*n+t[12],e[13]=t[1]*y+t[5]*g+t[9]*n+t[13],e[14]=t[2]*y+t[6]*g+t[10]*n+t[14],e[15]=t[3]*y+t[7]*g+t[11]*n+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=r*y+s*g+f*n+t[12],e[13]=o*y+u*g+h*n+t[13],e[14]=i*y+l*g+p*n+t[14],e[15]=a*y+c*g+d*n+t[15]),e},t.scale=function(e,t,n){var r=n[0],o=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,n,r){var o,i,a,s,u,l,c,f,h,p,d,y,g,v,m,b,w,_,x,S,O=r[0],P=r[1],r=r[2],E=Math.hypot(O,P,r);return E<A.EPSILON?null:(O*=E=1/E,P*=E,r*=E,E=Math.sin(n),n=Math.cos(n),i=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7],p=t[8],d=t[9],y=t[10],g=t[11],m=O*P*(o=1-n)-r*E,b=P*P*o+n,w=r*P*o+O*E,_=O*r*o+P*E,x=P*r*o-O*E,S=r*r*o+n,e[0]=i*(n=O*O*o+n)+l*(v=P*O*o+r*E)+p*(r=r*O*o-P*E),e[1]=a*n+c*v+d*r,e[2]=s*n+f*v+y*r,e[3]=u*n+h*v+g*r,e[4]=i*m+l*b+p*w,e[5]=a*m+c*b+d*w,e[6]=s*m+f*b+y*w,e[7]=u*m+h*b+g*w,e[8]=i*_+l*x+p*S,e[9]=a*_+c*x+d*S,e[10]=s*_+f*x+y*S,e[11]=u*_+h*x+g*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),o=t[4],i=t[5],a=t[6],s=t[7],u=t[8],l=t[9],c=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*r,e[5]=i*n+l*r,e[6]=a*n+c*r,e[7]=s*n+f*r,e[8]=u*n-o*r,e[9]=l*n-i*r,e[10]=c*n-a*r,e[11]=f*n-s*r,e},t.rotateY=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),o=t[0],i=t[1],a=t[2],s=t[3],u=t[8],l=t[9],c=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-u*r,e[1]=i*n-l*r,e[2]=a*n-c*r,e[3]=s*n-f*r,e[8]=o*r+u*n,e[9]=i*r+l*n,e[10]=a*r+c*n,e[11]=s*r+f*n,e},t.rotateZ=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),o=t[0],i=t[1],a=t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*r,e[1]=i*n+l*r,e[2]=a*n+c*r,e[3]=s*n+f*r,e[4]=u*n-o*r,e[5]=l*n-i*r,e[6]=c*n-a*r,e[7]=f*n-s*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,n){var r,o=n[0],i=n[1],n=n[2],a=Math.hypot(o,i,n);return a<A.EPSILON?null:(o*=a=1/a,i*=a,n*=a,a=Math.sin(t),t=Math.cos(t),e[0]=o*o*(r=1-t)+t,e[1]=i*o*r+n*a,e[2]=n*o*r-i*a,e[3]=0,e[4]=o*i*r-n*a,e[5]=i*i*r+t,e[6]=n*i*r+o*a,e[7]=0,e[8]=o*n*r+i*a,e[9]=i*n*r-o*a,e[10]=n*n*r+t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=h,t.fromQuat2=function(e,t){var n=new A.ARRAY_TYPE(3),r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=r*r+o*o+i*i+a*a;return 0<f?(n[0]=2*(s*a+c*r+u*i-l*o)/f,n[1]=2*(u*a+c*o+l*r-s*i)/f,n[2]=2*(l*a+c*i+s*o-u*r)/f):(n[0]=2*(s*a+c*r+u*i-l*o),n[1]=2*(u*a+c*o+l*r-s*i),n[2]=2*(l*a+c*i+s*o-u*r)),h(e,t,n),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=p,t.getRotation=function(e,t){var n=new A.ARRAY_TYPE(3),r=(p(n,t),1/n[0]),o=1/n[1],n=1/n[2],i=t[0]*r,a=t[1]*o,s=t[2]*n,u=t[4]*r,l=t[5]*o,c=t[6]*n,r=t[8]*r,o=t[9]*o,t=t[10]*n,n=i+l+t,f=0;return 0<n?(f=2*Math.sqrt(1+n),e[3]=.25*f,e[0]=(c-o)/f,e[1]=(r-s)/f,e[2]=(a-u)/f):l<i&&t<i?(f=2*Math.sqrt(1+i-l-t),e[3]=(c-o)/f,e[0]=.25*f,e[1]=(a+u)/f,e[2]=(r+s)/f):t<l?(f=2*Math.sqrt(1+l-i-t),e[3]=(r-s)/f,e[0]=(a+u)/f,e[1]=.25*f,e[2]=(c+o)/f):(f=2*Math.sqrt(1+t-i-l),e[3]=(a-u)/f,e[0]=(r+s)/f,e[1]=(c+o)/f,e[2]=.25*f),e},t.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],t=t[3],s=o+o,u=i+i,l=a+a,c=o*s,f=o*u,o=o*l,h=i*u,i=i*l,a=a*l,s=t*s,u=t*u,t=t*l,l=r[0],p=r[1],r=r[2];return e[0]=(1-(h+a))*l,e[1]=(f+t)*l,e[2]=(o-u)*l,e[3]=0,e[4]=(f-t)*p,e[5]=(1-(c+a))*p,e[6]=(i+s)*p,e[7]=0,e[8]=(o+u)*r,e[9]=(i-s)*r,e[10]=(1-(c+h))*r,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],s=t[2],t=t[3],u=i+i,l=a+a,c=s+s,f=i*u,h=i*l,i=i*c,p=a*l,a=a*c,s=s*c,u=t*u,l=t*l,t=t*c,c=r[0],d=r[1],r=r[2],y=o[0],g=o[1],o=o[2],v=(1-(p+s))*c,m=(h+t)*c,c=(i-l)*c,h=(h-t)*d,t=(1-(f+s))*d,s=(a+u)*d,d=(i+l)*r,i=(a-u)*r,l=(1-(f+p))*r;return e[0]=v,e[1]=m,e[2]=c,e[3]=0,e[4]=h,e[5]=t,e[6]=s,e[7]=0,e[8]=d,e[9]=i,e[10]=l,e[11]=0,e[12]=n[0]+y-(v*y+h*g+d*o),e[13]=n[1]+g-(m*y+t*g+i*o),e[14]=n[2]+o-(c*y+s*g+l*o),e[15]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=n+n,a=r+r,s=o+o,n=n*i,u=r*i,r=r*a,l=o*i,c=o*a,o=o*s,i=t*i,a=t*a,t=t*s;return e[0]=1-r-o,e[1]=u+t,e[2]=l-a,e[3]=0,e[4]=u-t,e[5]=1-n-o,e[6]=c+i,e[7]=0,e[8]=l+a,e[9]=c-i,e[10]=1-n-r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,n,r,o,i,a){var s=1/(n-t),u=1/(o-r),l=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*u,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*l,e[15]=0,e},t.perspectiveNO=o,t.perspectiveZO=function(e,t,n,r,o){t=1/Math.tan(t/2);return e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(e[10]=o*(n=1/(r-o)),e[14]=o*r*n):(e[10]=-1,e[14]=-r),e},t.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),t=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+t),u=2/(o+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(a-t)*s*.5,e[9]=(o-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.orthoNO=i,t.orthoZO=function(e,t,n,r,o,i,a){var s=1/(t-n),u=1/(r-o),a=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=a,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*u,e[14]=i*a,e[15]=1,e},t.lookAt=function(e,t,n,r){var o,i,a,s,u=t[0],l=t[1],t=t[2],c=r[0],f=r[1],r=r[2],h=n[0],p=n[1],n=n[2];return Math.abs(u-h)<A.EPSILON&&Math.abs(l-p)<A.EPSILON&&Math.abs(t-n)<A.EPSILON?d(e):(h=u-h,p=l-p,n=t-n,o=f*(n*=s=1/Math.hypot(h,p,n))-r*(p*=s),r=r*(h*=s)-c*n,c=c*p-f*h,(s=Math.hypot(o,r,c))?(o*=s=1/s,r*=s,c*=s):c=r=o=0,f=p*c-n*r,i=n*o-h*c,a=h*r-p*o,(s=Math.hypot(f,i,a))?(f*=s=1/s,i*=s,a*=s):a=i=f=0,e[0]=o,e[1]=f,e[2]=h,e[3]=0,e[4]=r,e[5]=i,e[6]=p,e[7]=0,e[8]=c,e[9]=a,e[10]=n,e[11]=0,e[12]=-(o*u+r*l+c*t),e[13]=-(f*u+i*l+a*t),e[14]=-(h*u+p*l+n*t),e[15]=1,e)},t.targetTo=function(e,t,n,r){var o=t[0],i=t[1],t=t[2],a=r[0],s=r[1],r=r[2],u=o-n[0],l=i-n[1],n=t-n[2],c=u*u+l*l+n*n,f=(0<c&&(u*=c=1/Math.sqrt(c),l*=c,n*=c),s*n-r*l),r=r*u-a*n,a=a*l-s*u;return 0<(c=f*f+r*r+a*a)&&(f*=c=1/Math.sqrt(c),r*=c,a*=c),e[0]=f,e[1]=r,e[2]=a,e[3]=0,e[4]=l*a-n*r,e[5]=n*f-u*a,e[6]=u*r-l*f,e[7]=0,e[8]=u,e[9]=l,e[10]=n,e[11]=0,e[12]=o,e[13]=i,e[14]=t,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=u,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],e=e[15],v=t[0],m=t[1],b=t[2],w=t[3],_=t[4],x=t[5],S=t[6],O=t[7],P=t[8],E=t[9],k=t[10],M=t[11],j=t[12],C=t[13],T=t[14],t=t[15];return Math.abs(n-v)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-m)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(o-b)<=A.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-w)<=A.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-_)<=A.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-x)<=A.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-S)<=A.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-O)<=A.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-P)<=A.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-E)<=A.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(h-k)<=A.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(p-M)<=A.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(d-j)<=A.EPSILON*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(y-C)<=A.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-T)<=A.EPSILON*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(e-t)<=A.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.sub=t.mul=t.ortho=t.perspective=void 0;var A=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function d(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],y=t[12],g=t[13],v=t[14],t=t[15],m=n[0],b=n[1],w=n[2],_=n[3];return e[0]=m*r+b*s+w*f+_*y,e[1]=m*o+b*u+w*h+_*g,e[2]=m*i+b*l+w*p+_*v,e[3]=m*a+b*c+w*d+_*t,m=n[4],b=n[5],w=n[6],_=n[7],e[4]=m*r+b*s+w*f+_*y,e[5]=m*o+b*u+w*h+_*g,e[6]=m*i+b*l+w*p+_*v,e[7]=m*a+b*c+w*d+_*t,m=n[8],b=n[9],w=n[10],_=n[11],e[8]=m*r+b*s+w*f+_*y,e[9]=m*o+b*u+w*h+_*g,e[10]=m*i+b*l+w*p+_*v,e[11]=m*a+b*c+w*d+_*t,m=n[12],b=n[13],w=n[14],_=n[15],e[12]=m*r+b*s+w*f+_*y,e[13]=m*o+b*u+w*h+_*g,e[14]=m*i+b*l+w*p+_*v,e[15]=m*a+b*c+w*d+_*t,e}function h(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=r+r,s=o+o,u=i+i,l=r*a,c=r*s,r=r*u,f=o*s,o=o*u,i=i*u,a=t*a,s=t*s,t=t*u;return e[0]=1-(f+i),e[1]=c+t,e[2]=r-s,e[3]=0,e[4]=c-t,e[5]=1-(l+i),e[6]=o+a,e[7]=0,e[8]=r+s,e[9]=o-a,e[10]=1-(l+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function p(e,t){var n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],u=t[8],l=t[9],t=t[10];return e[0]=Math.hypot(n,r,o),e[1]=Math.hypot(i,a,s),e[2]=Math.hypot(u,l,t),e}function o(e,t,n,r,o){t=1/Math.tan(t/2);return e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(e[10]=(o+r)*(n=1/(r-o)),e[14]=2*o*r*n):(e[10]=-1,e[14]=-2*r),e}function i(e,t,n,r,o,i,a){var s=1/(t-n),u=1/(r-o),l=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*u,e[14]=(a+i)*l,e[15]=1,e}function u(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}t.perspective=o,t.ortho=i;t.mul=r;n=u;t.sub=n},2774:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=u,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=l,t.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>p.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},t.getAngle=function(e,t){e=m(e,t);return Math.acos(2*e*e-1)},t.multiply=c,t.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],t=t[3],a=Math.sin(n),n=Math.cos(n);return e[0]=r*n+t*a,e[1]=o*n+i*a,e[2]=i*n-o*a,e[3]=t*n-r*a,e},t.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],t=t[3],a=Math.sin(n),n=Math.cos(n);return e[0]=r*n-i*a,e[1]=o*n+t*a,e[2]=i*n+r*a,e[3]=t*n-o*a,e},t.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],t=t[3],a=Math.sin(n),n=Math.cos(n);return e[0]=r*n+o*a,e[1]=o*n-r*a,e[2]=i*n+t*a,e[3]=t*n-i*a,e},t.calculateW=function(e,t){var n=t[0],r=t[1],t=t[2];return e[0]=n,e[1]=r,e[2]=t,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-t*t)),e},t.exp=f,t.ln=h,t.pow=function(e,t,n){return h(e,t),v(e,e,n),f(e,e),e},t.slerp=d,t.random=function(e){var t=p.RANDOM(),n=p.RANDOM(),r=p.RANDOM(),o=Math.sqrt(1-t),t=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=t*Math.sin(2*Math.PI*r),e[3]=t*Math.cos(2*Math.PI*r),e},t.invert=function(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=n*n+r*r+o*o+t*t,i=i?1/i:0;return e[0]=-n*i,e[1]=-r*i,e[2]=-o*i,e[3]=t*i,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=y,t.fromEuler=function(e,t,n,r){var o=.5*Math.PI/180,o=(t*=o,n*=o,r*=o,Math.sin(t)),t=Math.cos(t),i=Math.sin(n),n=Math.cos(n),a=Math.sin(r),r=Math.cos(r);return e[0]=o*n*r-t*i*a,e[1]=t*i*r+o*n*a,e[2]=t*n*a-o*i*r,e[3]=t*n*r+o*i*a,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0;var p=i(n(52105)),r=i(n(96081)),o=i(n(7157)),n=i(n(21020));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function u(){var e=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function l(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function c(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=n[0],s=n[1],u=n[2],n=n[3];return e[0]=r*n+t*a+o*u-i*s,e[1]=o*n+t*s+i*a-r*u,e[2]=i*n+t*u+r*s-o*a,e[3]=t*n-r*a-o*s-i*u,e}function f(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=Math.sqrt(n*n+r*r+o*o),t=Math.exp(t),a=0<i?t*Math.sin(i)/i:0;return e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=t*Math.cos(i),e}function h(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=Math.sqrt(n*n+r*r+o*o),i=0<i?Math.atan2(i,t)/i:0;return e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=.5*Math.log(n*n+r*r+o*o+t*t),e}function d(e,t,n,r){var o,i,a,s=t[0],u=t[1],l=t[2],t=t[3],c=n[0],f=n[1],h=n[2],n=n[3];return(a=s*c+u*f+l*h+t*n)<0&&(a=-a,c=-c,f=-f,h=-h,n=-n),a=1-a>p.EPSILON?(a=Math.acos(a),o=Math.sin(a),i=Math.sin((1-r)*a)/o,Math.sin(r*a)/o):(i=1-r,r),e[0]=i*s+a*c,e[1]=i*u+a*f,e[2]=i*l+a*h,e[3]=i*t+a*n,e}function y(e,t){var n,r,o,i=t[0]+t[4]+t[8];return 0<i?(o=Math.sqrt(i+1),e[3]=.5*o,e[0]=(t[5]-t[7])*(o=.5/o),e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o):(t[4]>t[i=0]&&(i=1),n=((i=t[8]>t[3*i+i]?2:i)+1)%3,r=(i+2)%3,o=Math.sqrt(t[3*i+i]-t[3*n+n]-t[3*r+r]+1),e[i]=.5*o,e[3]=(t[3*n+r]-t[3*r+n])*(o=.5/o),e[n]=(t[3*n+i]+t[3*i+n])*o,e[r]=(t[3*r+i]+t[3*i+r])*o),e}var g=n.clone,g=(t.clone=g,n.fromValues),g=(t.fromValues=g,n.copy),g=(t.copy=g,n.set),g=(t.set=g,n.add),g=(t.add=g,c),v=(t.mul=g,n.scale),m=(t.scale=v,n.dot),g=(t.dot=m,n.lerp),g=(t.lerp=g,n.length),g=t.length=g,g=(t.len=g,n.squaredLength),g=t.squaredLength=g,b=(t.sqrLen=g,n.normalize),g=(t.normalize=b,n.exactEquals),g=(t.exactEquals=g,n.equals);t.equals=g;var w,_,x;w=o.create(),_=o.fromValues(1,0,0),x=o.fromValues(0,1,0);t.rotationTo=function(e,t,n){var r=o.dot(t,n);return r<-.999999?(o.cross(w,_,t),o.len(w)<1e-6&&o.cross(w,x,t),o.normalize(w,w),l(e,w,Math.PI),e):.999999<r?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(w,t,n),e[0]=w[0],e[1]=w[1],e[2]=w[2],e[3]=1+r,b(e,e))};var S,O;S=u(),O=u();t.sqlerp=function(e,t,n,r,o,i){return d(S,t,o,i),d(O,n,r,i),d(e,S,O,2*i*(1-i)),e};var P;P=r.create();t.setAxes=function(e,t,n,r){return P[0]=n[0],P[3]=n[1],P[6]=n[2],P[1]=r[0],P[4]=r[1],P[7]=r[2],P[2]=-t[0],P[5]=-t[1],P[8]=-t[2],b(e,y(e,P))}},73195:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new g.ARRAY_TYPE(8);return g.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new g.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,n,r,o,i,a,s){var u=new g.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u},t.fromRotationTranslationValues=function(e,t,n,r,o,i,a){var s=new g.ARRAY_TYPE(8),o=(s[0]=e,s[1]=t,s[2]=n,s[3]=r,.5*o),i=.5*i,a=.5*a;return s[4]=o*r+i*n-a*t,s[5]=i*r+a*e-o*n,s[6]=a*r+o*t-i*e,s[7]=-o*e-i*t-a*n,s},t.fromRotationTranslation=i,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var n=d.create(),r=(o.getRotation(n,t),new g.ARRAY_TYPE(3));return o.getTranslation(r,t),i(e,n,r),e},t.copy=c,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,n,r,o,i,a,s,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var n=t[4],r=t[5],o=t[6],i=t[7],a=-t[0],s=-t[1],u=-t[2],t=t[3];return e[0]=2*(n*t+i*a+r*u-o*s),e[1]=2*(r*t+i*s+o*a-n*u),e[2]=2*(o*t+i*u+n*s-r*a),e},t.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=.5*n[0],u=.5*n[1],n=.5*n[2],l=t[4],c=t[5],f=t[6],t=t[7];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=a*s+o*n-i*u+l,e[5]=a*u+i*s-r*n+c,e[6]=a*n+r*u-o*s+f,e[7]=-r*s-o*u-i*n+t,e},t.rotateX=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=s*a+c*r+u*i-l*o,h=u*a+c*o+l*r-s*i,p=l*a+c*i+s*o-u*r,c=c*a-s*r-u*o-l*i;return d.rotateX(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=f*a+c*r+h*i-p*o,e[5]=h*a+c*o+p*r-f*i,e[6]=p*a+c*i+f*o-h*r,e[7]=c*a-f*r-h*o-p*i,e},t.rotateY=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=s*a+c*r+u*i-l*o,h=u*a+c*o+l*r-s*i,p=l*a+c*i+s*o-u*r,c=c*a-s*r-u*o-l*i;return d.rotateY(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=f*a+c*r+h*i-p*o,e[5]=h*a+c*o+p*r-f*i,e[6]=p*a+c*i+f*o-h*r,e[7]=c*a-f*r-h*o-p*i,e},t.rotateZ=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=s*a+c*r+u*i-l*o,h=u*a+c*o+l*r-s*i,p=l*a+c*i+s*o-u*r,c=c*a-s*r-u*o-l*i;return d.rotateZ(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=f*a+c*r+h*i-p*o,e[5]=h*a+c*o+p*r-f*i,e[6]=p*a+c*i+f*o-h*r,e[7]=c*a-f*r-h*o-p*i,e},t.rotateByQuatAppend=function(e,t,n){var r=n[0],o=n[1],i=n[2],n=n[3],a=t[0],s=t[1],u=t[2],l=t[3];return e[0]=a*n+l*r+s*i-u*o,e[1]=s*n+l*o+u*r-a*i,e[2]=u*n+l*i+a*o-s*r,e[3]=l*n-a*r-s*o-u*i,a=t[4],s=t[5],u=t[6],l=t[7],e[4]=a*n+l*r+s*i-u*o,e[5]=s*n+l*o+u*r-a*i,e[6]=u*n+l*i+a*o-s*r,e[7]=l*n-a*r-s*o-u*i,e},t.rotateByQuatPrepend=function(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3],a=n[0],s=n[1],u=n[2],l=n[3];return e[0]=r*l+t*a+o*u-i*s,e[1]=o*l+t*s+i*a-r*u,e[2]=i*l+t*u+r*s-o*a,e[3]=t*l-r*a-o*s-i*u,a=n[4],s=n[5],u=n[6],l=n[7],e[4]=r*l+t*a+o*u-i*s,e[5]=o*l+t*s+i*a-r*u,e[6]=i*l+t*u+r*s-o*a,e[7]=t*l-r*a-o*s-i*u,e},t.rotateAroundAxis=function(e,t,n,r){var o,i,a,s,u,l;return Math.abs(r)<g.EPSILON?c(e,t):(u=Math.hypot(n[0],n[1],n[2]),r*=.5,o=(a=Math.sin(r))*n[0]/u,i=a*n[1]/u,a=a*n[2]/u,n=Math.cos(r),u=t[0],r=t[1],l=t[2],s=t[3],e[0]=u*n+s*o+r*a-l*i,e[1]=r*n+s*i+l*o-u*a,e[2]=l*n+s*a+u*i-r*o,e[3]=s*n-u*o-r*i-l*a,s=t[4],u=t[5],r=t[6],l=t[7],e[4]=s*n+l*o+u*a-r*i,e[5]=u*n+l*i+r*o-s*a,e[6]=r*n+l*a+s*i-u*o,e[7]=l*n-s*o-u*i-r*a,e)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},t.multiply=u,t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},t.lerp=function(e,t,n,r){var o=1-r;return l(t,n)<0&&(r=-r),e[0]=t[0]*o+n[0]*r,e[1]=t[1]*o+n[1]*r,e[2]=t[2]*o+n[2]*r,e[3]=t[3]*o+n[3]*r,e[4]=t[4]*o+n[4]*r,e[5]=t[5]*o+n[5]*r,e[6]=t[6]*o+n[6]*r,e[7]=t[7]*o+n[7]*r,e},t.invert=function(e,t){var n=f(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var n,r,o,i,a,s,u,l,c=f(t);return 0<c&&(c=Math.sqrt(c),n=t[0]/c,r=t[1]/c,o=t[2]/c,i=t[3]/c,l=n*(a=t[4])+r*(s=t[5])+o*(u=t[6])+i*(t=t[7]),e[0]=n,e[1]=r,e[2]=o,e[3]=i,e[4]=(a-n*l)/c,e[5]=(s-r*l)/c,e[6]=(u-o*l)/c,e[7]=(t-i*l)/c),e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],e=e[7],l=t[0],c=t[1],f=t[2],h=t[3],p=t[4],d=t[5],y=t[6],t=t[7];return Math.abs(n-l)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-f)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-p)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-d)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-y)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(e-t)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0;var g=r(n(52105)),d=r(n(2774)),o=r(n(92956));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};t=s(t);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}function i(e,t,n){var r=.5*n[0],o=.5*n[1],n=.5*n[2],i=t[0],a=t[1],s=t[2],t=t[3];return e[0]=i,e[1]=a,e[2]=s,e[3]=t,e[4]=r*t+o*s-n*a,e[5]=o*t+n*i-r*s,e[6]=n*t+r*a-o*i,e[7]=-r*i-o*a-n*s,e}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}n=d.copy,t.getReal=n,n=d.copy;function u(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[4],u=n[5],l=n[6],c=n[7],f=t[4],h=t[5],p=t[6],t=t[7],d=n[0],y=n[1],g=n[2],n=n[3];return e[0]=r*n+a*d+o*g-i*y,e[1]=o*n+a*y+i*d-r*g,e[2]=i*n+a*g+r*y-o*d,e[3]=a*n-r*d-o*y-i*g,e[4]=r*c+a*s+o*l-i*u+f*n+t*d+h*g-p*y,e[5]=o*c+a*u+i*s-r*l+h*n+t*y+p*d-f*g,e[6]=i*c+a*l+r*u-o*s+p*n+t*g+f*y-h*d,e[7]=a*c-r*s-o*u-i*l+t*n-f*d-h*y-p*g,e}t.setReal=n;t.mul=u;var l=d.dot,n=(t.dot=l,d.length),n=t.length=n,f=(t.len=n,d.squaredLength),n=t.squaredLength=f;t.sqrLen=n},49679:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new o.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.subtract=i,t.multiply=u,t.divide=l,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},t.distance=c,t.squaredDistance=f,t.length=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],n=n*n+r*r;return 0<n&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){t=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=t,e},t.lerp=function(e,t,n,r){var o=t[0],t=t[1];return e[0]=o+r*(n[0]-o),e[1]=t+r*(n[1]-t),e},t.random=function(e,t){t=t||1;var n=2*o.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},t.transformMat2=function(e,t,n){var r=t[0],t=t[1];return e[0]=n[0]*r+n[2]*t,e[1]=n[1]*r+n[3]*t,e},t.transformMat2d=function(e,t,n){var r=t[0],t=t[1];return e[0]=n[0]*r+n[2]*t+n[4],e[1]=n[1]*r+n[3]*t+n[5],e},t.transformMat3=function(e,t,n){var r=t[0],t=t[1];return e[0]=n[0]*r+n[3]*t+n[6],e[1]=n[1]*r+n[4]*t+n[7],e},t.transformMat4=function(e,t,n){var r=t[0],t=t[1];return e[0]=n[0]*r+n[4]*t+n[12],e[1]=n[1]*r+n[5]*t+n[13],e},t.rotate=function(e,t,n,r){var o=t[0]-n[0],t=t[1]-n[1],i=Math.sin(r),r=Math.cos(r);return e[0]=o*r-t*i+n[0],e[1]=o*i+t*r+n[1],e},t.angle=function(e,t){var n=e[0],e=e[1],r=t[0],t=t[1],o=Math.sqrt(n*n+e*e)*Math.sqrt(r*r+t*t);return Math.acos(Math.min(Math.max(o&&(n*r+e*t)/o,-1),1))},t.zero=function(e){return e[0]=0,e[1]=0,e},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var n=e[0],e=e[1],r=t[0],t=t[1];return Math.abs(n-r)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(e-t)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(){var e=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function c(e,t){var n=t[0]-e[0],t=t[1]-e[1];return Math.hypot(n,t)}function f(e,t){var n=t[0]-e[0],t=t[1]-e[1];return n*n+t*t}function h(e){var t=e[0],e=e[1];return Math.hypot(t,e)}function p(e){var t=e[0],e=e[1];return t*t+e*e}t.len=h;n=i,t.sub=n,n=u,t.mul=n,n=l,t.div=n,n=c,t.dist=n,n=f,t.sqrDist=n,n=p;t.sqrLen=n;var d;d=r();t.forEach=function(e,t,n,r,o,i){var a,s;for(t=t||2,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)d[0]=e[a],d[1]=e[a+1],o(d,d,i),e[a]=d[0],e[a+1]=d[1];return e}},7157:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){var t=new s.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=o,t.fromValues=function(e,t,n){var r=new s.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},t.subtract=i,t.multiply=l,t.divide=c,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},t.distance=f,t.squaredDistance=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],n=n*n+r*r+o*o;return 0<n&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.dot=d,t.cross=function(e,t,n){var r=t[0],o=t[1],t=t[2],i=n[0],a=n[1],n=n[2];return e[0]=o*n-t*a,e[1]=t*i-r*n,e[2]=r*a-o*i,e},t.lerp=function(e,t,n,r){var o=t[0],i=t[1],t=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=t+r*(n[2]-t),e},t.hermite=function(e,t,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,l=a*(i-1),a=a*(3-2*i);return e[0]=t[0]*s+n[0]*u+r[0]*l+o[0]*a,e[1]=t[1]*s+n[1]*u+r[1]*l+o[1]*a,e[2]=t[2]*s+n[2]*u+r[2]*l+o[2]*a,e},t.bezier=function(e,t,n,r,o,i){var a=1-i,s=a*a,u=i*i,l=s*a,s=3*i*s,a=3*u*a,u=u*i;return e[0]=t[0]*l+n[0]*s+r[0]*a+o[0]*u,e[1]=t[1]*l+n[1]*s+r[1]*a+o[1]*u,e[2]=t[2]*l+n[2]*s+r[2]*a+o[2]*u,e},t.random=function(e,t){t=t||1;var n=2*s.RANDOM()*Math.PI,r=2*s.RANDOM()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e},t.transformMat4=function(e,t,n){var r=t[0],o=t[1],t=t[2],i=n[3]*r+n[7]*o+n[11]*t+n[15];return e[0]=(n[0]*r+n[4]*o+n[8]*t+n[12])/(i=i||1),e[1]=(n[1]*r+n[5]*o+n[9]*t+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*t+n[14])/i,e},t.transformMat3=function(e,t,n){var r=t[0],o=t[1],t=t[2];return e[0]=r*n[0]+o*n[3]+t*n[6],e[1]=r*n[1]+o*n[4]+t*n[7],e[2]=r*n[2]+o*n[5]+t*n[8],e},t.transformQuat=function(e,t,n){var r=n[0],o=n[1],i=n[2],n=n[3],a=t[0],s=t[1],t=t[2],u=o*t-i*s,l=i*a-r*t,c=r*s-o*a,f=o*c-i*l,i=i*u-r*c,r=r*l-o*u,o=2*n;return l*=o,c*=o,i*=2,r*=2,e[0]=a+(u*=o)+(f*=2),e[1]=s+l+i,e[2]=t+c+r,e},t.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.angle=function(e,t){var n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],s=t[2],n=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+s*s),r=n&&d(e,t)/n;return Math.acos(Math.min(Math.max(r,-1),1))},t.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var n=e[0],r=e[1],e=e[2],o=t[0],i=t[1],t=t[2];return Math.abs(n-o)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-t)<=s.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0;var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function u(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(u=function(e){return e?n:t})(e))}function r(){var e=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o(e){var t=e[0],n=e[1],e=e[2];return Math.hypot(t,n,e)}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],t=t[2]-e[2];return Math.hypot(n,r,t)}function h(e,t){var n=t[0]-e[0],r=t[1]-e[1],t=t[2]-e[2];return n*n+r*r+t*t}function p(e){var t=e[0],n=e[1],e=e[2];return t*t+n*n+e*e}function d(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.sub=i;n=l,t.mul=n,n=c,t.div=n,n=f,t.dist=n,n=h,t.sqrDist=n,n=o,t.len=n,n=p;t.sqrLen=n;var y;y=r();t.forEach=function(e,t,n,r,o,i){var a,s;for(t=t||3,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)y[0]=e[a],y[1]=e[a+1],y[2]=e[a+2],o(y,y,i),e[a]=y[0],e[a+1]=y[1],e[a+2]=y[2];return e}},21020:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){var t=new l.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,n,r){var o=new l.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=o,t.multiply=i,t.divide=u,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=c,t.squaredDistance=f,t.length=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],t=t[3],i=n*n+r*r+o*o+t*t;return 0<i&&(i=1/Math.sqrt(i)),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=t*i,e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.cross=function(e,t,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],n=n[2]*r[3]-n[3]*r[2],r=t[0],l=t[1],c=t[2],t=t[3];return e[0]=l*n-c*u+t*s,e[1]=-r*n+c*a-t*i,e[2]=r*u-l*a+t*o,e[3]=-r*s+l*i-c*o,e},t.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],t=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=t+r*(n[3]-t),e},t.random=function(e,t){var n,r,o,i,a,s;for(t=t||1;1<=(a=(n=2*l.RANDOM()-1)*n+(r=2*l.RANDOM()-1)*r););for(;1<=(s=(o=2*l.RANDOM()-1)*o+(i=2*l.RANDOM()-1)*i););var u=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*o*u,e[3]=t*i*u,e},t.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],t=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*t,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*t,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*t,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*t,e},t.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],u=n[2],n=n[3],l=n*r+s*i-u*o,c=n*o+u*r-a*i,f=n*i+a*o-s*r,r=-a*r-s*o-u*i;return e[0]=l*n+r*-a+c*-u-f*-s,e[1]=c*n+r*-s+f*-a-l*-u,e[2]=f*n+r*-u+l*-s-c*-a,e[3]=t[3],e},t.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],r=e[1],o=e[2],e=e[3],i=t[0],a=t[1],s=t[2],t=t[3];return Math.abs(n-i)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(e-t)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0;var l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s(void 0);if(t&&t.has(e))return t.get(e);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}(n(52105));function s(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(s=function(e){return e?n:t})(e))}function r(){var e=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function u(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],t=t[3]-e[3];return Math.hypot(n,r,o,t)}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],t=t[3]-e[3];return n*n+r*r+o*o+t*t}function h(e){var t=e[0],n=e[1],r=e[2],e=e[3];return Math.hypot(t,n,r,e)}function p(e){var t=e[0],n=e[1],r=e[2],e=e[3];return t*t+n*n+r*r+e*e}t.sub=o;n=i,t.mul=n,n=u,t.div=n,n=c,t.dist=n,n=f,t.sqrDist=n,n=h,t.len=n,n=p;t.sqrLen=n;var d;d=r();t.forEach=function(e,t,n,r,o,i){var a,s;for(t=t||4,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)d[0]=e[a],d[1]=e[a+1],d[2]=e[a+2],d[3]=e[a+3],o(d,d,i),e[a]=d[0],e[a+1]=d[1],e[a+2]=d[2],e[a+3]=d[3];return e}},28813:function(e){var i=[],a=[];function t(e,t){if(t=t||{},void 0===e)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var n,r=!0===t.prepend?"prepend":"append",t=void 0!==t.container?t.container:document.querySelector("head"),o=i.indexOf(t);return-1===o&&(o=i.push(t)-1,a[o]={}),void 0!==a[o]&&void 0!==a[o][r]?n=a[o][r]:(n=a[o][r]=((o=document.createElement("style")).setAttribute("type","text/css"),o),"prepend"==r?t.insertBefore(n,t.childNodes[0]):t.appendChild(n)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),n.styleSheet?n.styleSheet.cssText+=e:n.textContent+=e,n}e.exports=t,e.exports.insertCss=t},88370:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnyArray=void 0;var n=Object.prototype.toString;t.isAnyArray=function(e){e=n.call(e);return e.endsWith("Array]")&&!e.includes("Big")}},56730:function(e){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||0<=e.length&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},42138:function(e,t,n){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e);var _="__lodash_hash_undefined__",x=9007199254740991,O="[object Arguments]",F="[object Boolean]",G="[object Date]",P="[object Function]",z="[object GeneratorFunction]",E="[object Map]",U="[object Number]",k="[object Object]",V="[object RegExp]",M="[object Set]",W="[object String]",Y="[object Symbol]",H="[object ArrayBuffer]",j="[object DataView]",X="[object Float32Array]",q="[object Float64Array]",J="[object Int8Array]",Z="[object Int16Array]",K="[object Int32Array]",Q="[object Uint8Array]",$="[object Uint8ClampedArray]",ee="[object Uint16Array]",te="[object Uint32Array]",ne=/\w*$/,S=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,C={},n=(C[O]=C["[object Array]"]=C[H]=C[j]=C[F]=C[G]=C[X]=C[q]=C[J]=C[Z]=C[K]=C[E]=C[U]=C[k]=C[V]=C[M]=C[W]=C[Y]=C[Q]=C[$]=C[ee]=C[te]=!0,C["[object Error]"]=C[P]=C["[object WeakMap]"]=!1,"object"==(void 0===n.g?"undefined":c(n.g))&&n.g&&n.g.Object===Object&&n.g),r="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,n=n||r||Function("return this")(),r="object"==c(t)&&t&&!t.nodeType&&t,t=r&&"object"==c(e)&&e&&!e.nodeType&&e,t=t&&t.exports===r;function oe(e,t){return e.set(t[0],t[1]),e}function ie(e,t){return e.add(t),e}function ae(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function se(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function ue(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function o(t,n){return function(e){return t(n(e))}}function le(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var r=Array.prototype,i=Function.prototype,a=Object.prototype,s=n["__core-js_shared__"],ce=(s=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",fe=i.toString,T=a.hasOwnProperty,f=a.toString,he=RegExp("^"+fe.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s=t?n.Buffer:void 0,i=n.Symbol,pe=n.Uint8Array,de=o(Object.getPrototypeOf,Object),ye=Object.create,ge=a.propertyIsEnumerable,ve=r.splice,t=Object.getOwnPropertySymbols,r=s?s.isBuffer:void 0,me=o(Object.keys,Object),s=b(n,"DataView"),u=b(n,"Map"),l=b(n,"Promise"),h=b(n,"Set"),n=b(n,"WeakMap"),p=b(Object,"create"),be=w(s),we=w(u),_e=w(l),xe=w(h),Se=w(n),i=i?i.prototype:void 0,Oe=i?i.valueOf:void 0;function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){this.__data__=new y(e)}function Pe(e,t){var n,r,o,i,a,s=N(e)||(r=n=e)&&"object"==c(r)&&Te(r)&&T.call(n,"callee")&&(!ge.call(n,"callee")||f.call(n)==O)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length,l=!!u;for(o in e)!t&&!T.call(e,o)||l&&("length"==o||(i=o,a=u,(a=null==a?x:a)&&("number"==typeof i||re.test(i))&&-1<i&&i%1==0&&i<a))||s.push(o);return s}function Ee(e,t,n){var r=e[t];T.call(e,t)&&Ce(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function v(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function I(u,e,t,n,r,o,i){var a;if(void 0===(a=n?o?n(u,r,o,i):n(u):a)){if(!D(u))return u;var s,l,c,r=N(u);if(r){if(g=(l=u).length,c=l.constructor(g),g&&"string"==typeof l[0]&&T.call(l,"index")&&(c.index=l.index,c.input=l.input),a=c,!e){var f=u;var h=a;var p=-1,d=f.length;for(h=h||Array(d);++p<d;)h[p]=f[p];return h;return}}else{var y=L(u),g=y==P||y==z;if(Ae(u))return l=u,e?l.slice():(c=new l.constructor(l.length),l.copy(c),c);if(y==k||y==O||g&&!o){if(se(u))return o?u:{};if(a="function"==typeof(m=g?{}:u).constructor&&!je(m)&&D(m=de(m))?ye(m):{},!e)return m=u,s=(s=a)&&ke(u,B(u),s),ke(m,Me(m),s)}else{if(!C[y])return o?u:{};a=function(e,t,n){var r,o,i,a,s=e.constructor;switch(y){case H:return R(e);case F:case G:return new s(+e);case j:return r=e,o=n?R(r.buffer):r.buffer,new r.constructor(o,r.byteOffset,r.byteLength);case X:case q:case J:case Z:case K:case Q:case $:case ee:case te:return o=e,r=n?R(o.buffer):o.buffer,new o.constructor(r,o.byteOffset,o.length);case E:return i=e,ae(n?t(ue(i),!0):ue(i),oe,new i.constructor);case U:case W:return new s(e);case V:return(a=new(i=e).constructor(i.source,ne.exec(i))).lastIndex=i.lastIndex,a;case M:return a=e,ae(n?t(le(a),!0):le(a),ie,new a.constructor);case Y:return Oe?Object(Oe.call(e)):{}}}(u,I,e)}}var v,m=(i=i||new A).get(u);if(m)return m;i.set(u,a);for(var b,w,_=(v=r?v:t?function(){var e=u,t=Me,n=B(e);if(N(e))return n;for(var r=n,o=t(e),i=-1,a=o.length,s=r.length;++i<a;)r[s+i]=o[i];return r}():B(u))||u,x=-1,S=_?_.length:0;++x<S&&!1!==(b=_[x],w=x,v&&(b=u[w=b]),void Ee(a,w,I(b,e,t,n,w,u,i))););}return a}function R(e){var t=new e.constructor(e.byteLength);return new pe(t).set(new pe(e)),t}function ke(e,t,n,r){n=n||{};for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;Ee(n,a,void 0===s?e[a]:s)}return n}function m(e,t){var n,r,e=e.__data__;return("string"==(r=c(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}function b(e,t){e=null==e?void 0:e[t];return!D(t=e)||ce&&ce in t||!(Ie(t)||se(t)?he:S).test(w(t))?void 0:e}d.prototype.clear=function(){this.__data__=p?p(null):{}},d.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},d.prototype.get=function(e){var t,n=this.__data__;return p?(t=n[e])===_?void 0:t:T.call(n,e)?n[e]:void 0},d.prototype.has=function(e){var t=this.__data__;return p?void 0!==t[e]:T.call(t,e)},d.prototype.set=function(e,t){return this.__data__[e]=p&&void 0===t?_:t,this},y.prototype.clear=function(){this.__data__=[]},y.prototype.delete=function(e){var t=this.__data__,e=v(t,e);return!(e<0||(e==t.length-1?t.pop():ve.call(t,e,1),0))},y.prototype.get=function(e){var t=this.__data__,e=v(t,e);return e<0?void 0:t[e][1]},y.prototype.has=function(e){return-1<v(this.__data__,e)},y.prototype.set=function(e,t){var n=this.__data__,r=v(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},g.prototype.clear=function(){this.__data__={hash:new d,map:new(u||y),string:new d}},g.prototype.delete=function(e){return m(this,e).delete(e)},g.prototype.get=function(e){return m(this,e).get(e)},g.prototype.has=function(e){return m(this,e).has(e)},g.prototype.set=function(e,t){return m(this,e).set(e,t),this},A.prototype.clear=function(){this.__data__=new y},A.prototype.delete=function(e){return this.__data__.delete(e)},A.prototype.get=function(e){return this.__data__.get(e)},A.prototype.has=function(e){return this.__data__.has(e)},A.prototype.set=function(e,t){var n=this.__data__;if(n instanceof y){var r=n.__data__;if(!u||r.length<199)return r.push([e,t]),this;n=this.__data__=new g(r)}return n.set(e,t),this};var Me=t?o(t,Object):function(){return[]},L=function(e){return f.call(e)};function je(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||a)}function w(e){if(null!=e){try{return fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ce(e,t){return e===t||e!=e&&t!=t}(s&&L(new s(new ArrayBuffer(1)))!=j||u&&L(new u)!=E||l&&"[object Promise]"!=L(l.resolve())||h&&L(new h)!=M||n&&"[object WeakMap]"!=L(new n))&&(L=function(e){var t=f.call(e),e=t==k?e.constructor:void 0,e=e?w(e):void 0;if(e)switch(e){case be:return j;case we:return E;case _e:return"[object Promise]";case xe:return M;case Se:return"[object WeakMap]"}return t});var N=Array.isArray;function Te(e){return null!=e&&"number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=x&&!Ie(e);var t}var Ae=r||function(){return!1};function Ie(e){e=D(e)?f.call(e):"";return e==P||e==z}function D(e){var t=c(e);return e&&("object"==t||"function"==t)}function B(e){return(Te(e)?Pe:function(e){if(!je(e))return me(e);var t,n=[];for(t in Object(e))T.call(e,t)&&"constructor"!=t&&n.push(t);return n})(e)}e.exports=function(e){return I(e,!0,!0)}},77820:function(e,N,t){function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=9007199254740991,h="[object Arguments]",n="[object Function]",r="[object GeneratorFunction]",s="[object Map]",u="[object Set]",o=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,t="object"==(void 0===t.g?"undefined":c(t.g))&&t.g&&t.g.Object===Object&&t.g,i="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,t=t||i||Function("return this")();function l(e,t){for(var n,r=t,o=-1,i=r?r.length:0,a=Array(i);++o<i;)a[o]=[n=r[o],e[n]];return a}var a,d,i=Function.prototype,y=Object.prototype,g=t["__core-js_shared__"],v=(g=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",m=i.toString,b=y.hasOwnProperty,w=y.toString,_=RegExp("^"+m.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=y.propertyIsEnumerable,S=(a=Object.keys,d=Object,function(e){return a(d(e))}),g=j(t,"DataView"),i=j(t,"Map"),O=j(t,"Promise"),P=j(t,"Set"),t=j(t,"WeakMap"),E=T(g),k=T(i),M=T(O),D=T(P),B=T(t);function F(e,t){var n,r,o,i,a,s=G(e)||(r=n=e)&&"object"==c(r)&&A(r)&&b.call(n,"callee")&&(!x.call(n,"callee")||w.call(n)==h)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length,l=!!u;for(o in e)!t&&!b.call(e,o)||l&&("length"==o||(i=o,a=u,(a=null==a?f:a)&&("number"==typeof i||p.test(i))&&-1<i&&i%1==0&&i<a))||s.push(o);return s}function j(e,t){e=null==e?void 0:e[t];return!R(t=e)||v&&v in t||!(I(t)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(t)?_:o).test(T(t))?void 0:e}var C=function(e){return w.call(e)};function T(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(g&&"[object DataView]"!=C(new g(new ArrayBuffer(1)))||i&&C(new i)!=s||O&&"[object Promise]"!=C(O.resolve())||P&&C(new P)!=u||t&&"[object WeakMap]"!=C(new t))&&(C=function(e){var t=w.call(e),e="[object Object]"==t?e.constructor:void 0,e=e?T(e):void 0;if(e)switch(e){case E:return"[object DataView]";case k:return s;case M:return"[object Promise]";case D:return u;case B:return"[object WeakMap]"}return t});var G=Array.isArray;function A(e){return null!=e&&"number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=f&&!I(e);var t}function I(e){e=R(e)?w.call(e):"";return e==n||e==r}function R(e){var t=c(e);return e&&("object"==t||"function"==t)}var L;L=function(e){return(A(e)?F:function(e){if(e!==("function"==typeof(t=e&&e.constructor)&&t.prototype||y))return S(e);var t,n,r=[];for(n in Object(e))b.call(e,n)&&"constructor"!=n&&r.push(n);return r})(e)};e.exports=function(e){var n,r,t,o,i,a=C(e);return a==s?(t=e,n=-1,r=Array(t.size),t.forEach(function(e,t){r[++n]=[t,e]}),r):a==u?(t=e,o=-1,i=Array(t.size),t.forEach(function(e){i[++o]=[e,e]}),i):l(e,L(e))}},29819:function(e,t,n){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e);var P="__lodash_hash_undefined__",k=1,M=2,E=1/0,B=9007199254740991,j="[object Arguments]",F="[object Array]",G="[object Boolean]",z="[object Date]",U="[object Error]",V="[object Function]",W="[object GeneratorFunction]",C="[object Map]",Y="[object Number]",T="[object Object]",H="[object RegExp]",A="[object Set]",X="[object String]",q="[object Symbol]",J="[object ArrayBuffer]",I="[object DataView]",Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,Q=/^\./,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/\\(\\)?/g,te=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,r={},n=(r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r[j]=r[F]=r[J]=r[G]=r[I]=r[z]=r[U]=r[V]=r[C]=r[Y]=r[T]=r[H]=r[A]=r[X]=r["[object WeakMap]"]=!1,"object"==(void 0===n.g?"undefined":s(n.g))&&n.g&&n.g.Object===Object&&n.g),o="object"==("undefined"==typeof self?"undefined":s(self))&&self&&self.Object===Object&&self,o=n||o||Function("return this")(),t="object"==s(t)&&t&&!t.nodeType&&t,i=t&&"object"==s(e)&&e&&!e.nodeType&&e,re=i&&i.exports===t&&n.process,i=function(){try{return re&&re.binding("util")}catch(e){}}(),t=i&&i.isTypedArray;function oe(e,t){return!(!e||!e.length)&&-1<function(e,t){if(t!=t){for(var n=e,r=ie,o=n.length,i=-1;++i<o;)if(r(n[i],i,n))return i}else for(var a=-1,s=e.length;++a<s;)if(e[a]===t)return a;return-1}(e,t)}function ie(e){return e!=e}function ae(e,t){return e.has(t)}function se(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function ue(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function le(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var ce,fe,n=Array.prototype,i=Function.prototype,a=Object.prototype,u=o["__core-js_shared__"],he=(u=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",pe=i.toString,R=a.hasOwnProperty,l=a.toString,de=RegExp("^"+pe.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),u=o.Symbol,ye=o.Uint8Array,ge=a.propertyIsEnumerable,ve=n.splice,me=(ce=Object.keys,fe=Object,function(e){return ce(fe(e))}),i=b(o,"DataView"),c=b(o,"Map"),n=b(o,"Promise"),f=b(o,"Set"),o=b(o,"WeakMap"),h=b(Object,"create"),be=x(i),we=x(c),_e=x(n),xe=x(f),Se=x(o),u=u?u.prototype:void 0,Oe=u?u.valueOf:void 0,Pe=u?u.toString:void 0;function p(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function y(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(e){var t=-1,n=e?e.length:0;for(this.__data__=new y;++t<n;)this.add(e[t])}function L(e){this.__data__=new d(e)}function v(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function Ee(e,t){for(var n=0,r=(t=w(t,e)?[t]:Ce(t)).length;null!=e&&n<r;)e=e[_(t[n++])];return n&&n==r?e:void 0}function ke(e,t){return null!=e&&t in Object(e)}function Me(e,t,n,r,o){return e===t||(null==e||null==t||!S(e)&&!O(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=D(e),s=D(t),u=F,l=F,s=(a||(u=(u=N(e))==j?T:u),s||(l=(l=N(t))==j?T:l),u==T&&!se(e)),c=l==T&&!se(t),l=u==l;if(l&&!s)return i=i||new L,(a||Ye(e)?Ae:function(e,t,n,r,o,i){switch(u){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case J:return!(e.byteLength!=t.byteLength||!n(new ye(e),new ye(t)));case G:case z:case Y:return Be(+e,+t);case U:return e.name==t.name&&e.message==t.message;case H:case X:return e==t+"";case C:var a=ue;case A:a=a||le;if(e.size!=t.size&&!(o&M))return!1;var s=i.get(e);if(s)return s==t;o|=k,i.set(e,t);s=Ae(a(e),a(t),n,r,o,i);return i.delete(e),s;case q:if(Oe)return Oe.call(e)==Oe.call(t)}return!1})(e,t,n,r,o,i);if(!(o&M)){a=s&&R.call(e,"__wrapped__"),s=c&&R.call(t,"__wrapped__");if(a||s)return n(a?e.value():e,s?t.value():t,r,o,i=i||new L)}if(l){i=i||new L;var f=e,h=t,p=n,d=r,y=o,g=i,v=y&M,m=He(f),b=m.length;if(b!=He(h).length&&!v)return!1;for(var w=b;w--;){var _=m[w];if(!(v?_ in h:R.call(h,_)))return!1}c=g.get(f);if(c&&g.get(h))return c==h;var x=!0;g.set(f,h),g.set(h,f);for(var S=v;++w<b;){var O,P=f[_=m[w]],E=h[_];if(!(void 0===(O=d?v?d(E,P,_,h,f,g):d(P,E,_,f,h,g):O)?P===E||p(P,E,d,y,g):O)){x=!1;break}S=S||"constructor"==_}return x&&!S&&(c=f.constructor)!=(a=h.constructor)&&"constructor"in f&&"constructor"in h&&!("function"==typeof c&&c instanceof c&&"function"==typeof a&&a instanceof a)&&(x=!1),g.delete(f),g.delete(h),x}return!1}(e,t,Me,n,r,o))}function je(e){return"function"==typeof e?e:null==e?Xe:"object"==s(e)?D(e)?(o=e[0],i=e[1],w(o)&&Re(i)?Le(_(o),i):function(e){var t=void 0===(t=null==e?void 0:Ee(e,o))?void 0:t;return void 0===t&&t===i?null!=e&&function(e,t,n){for(var r,o=-1,i=(t=w(t,e)?[t]:Ce(t)).length;++o<i;){var a=_(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(i=e?e.length:0)&&Ue(i)&&Ie(a,i)&&(D(e)||Fe(e))}(e,o,ke):Me(i,t,void 0,k|M)}):1==(r=function(e){for(var t=He(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Re(o)]}return t}(n=e)).length&&r[0][2]?Le(r[0][0],r[0][1]):function(c){return c===n||function(e,t,n){var r=t.length,o=r;if(null==c)return!o;for(e=Object(c);r--;){var i=t[r];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++r<o;){var a=(i=t[r])[0],s=e[a],u=i[1];if(i[2]){if(void 0===s&&!(a in e))return!1}else{var l,a=new L;if(!(void 0===l?Me(u,s,n,k|M,a):l))return!1}}return!0}(0,r)}:w(e=e)?(a=_(e),function(e){return null==e?void 0:e[a]}):(t=e,function(e){return Ee(e,t)});var t,n,r,o,i,a}function Ce(e){return D(e)?e:Ne(e)}p.prototype.clear=function(){this.__data__=h?h(null):{}},p.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},p.prototype.get=function(e){var t,n=this.__data__;return h?(t=n[e])===P?void 0:t:R.call(n,e)?n[e]:void 0},p.prototype.has=function(e){var t=this.__data__;return h?void 0!==t[e]:R.call(t,e)},p.prototype.set=function(e,t){return this.__data__[e]=h&&void 0===t?P:t,this},d.prototype.clear=function(){this.__data__=[]},d.prototype.delete=function(e){var t=this.__data__,e=v(t,e);return!(e<0||(e==t.length-1?t.pop():ve.call(t,e,1),0))},d.prototype.get=function(e){var t=this.__data__,e=v(t,e);return e<0?void 0:t[e][1]},d.prototype.has=function(e){return-1<v(this.__data__,e)},d.prototype.set=function(e,t){var n=this.__data__,r=v(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},y.prototype.clear=function(){this.__data__={hash:new p,map:new(c||d),string:new p}},y.prototype.delete=function(e){return m(this,e).delete(e)},y.prototype.get=function(e){return m(this,e).get(e)},y.prototype.has=function(e){return m(this,e).has(e)},y.prototype.set=function(e,t){return m(this,e).set(e,t),this},g.prototype.add=g.prototype.push=function(e){return this.__data__.set(e,P),this},g.prototype.has=function(e){return this.__data__.has(e)},L.prototype.clear=function(){this.__data__=new d},L.prototype.delete=function(e){return this.__data__.delete(e)},L.prototype.get=function(e){return this.__data__.get(e)},L.prototype.has=function(e){return this.__data__.has(e)},L.prototype.set=function(e,t){var n=this.__data__;if(n instanceof d){var r=n.__data__;if(!c||r.length<199)return r.push([e,t]),this;n=this.__data__=new y(r)}return n.set(e,t),this};var Te=f&&1/le(new f([,-0]))[1]==E?function(e){return new f(e)}:function(){};function Ae(e,t,n,r,o,i){var a=o&M,s=e.length,u=t.length;if(s!=u&&!(a&&s<u))return!1;u=i.get(e);if(u&&i.get(t))return u==t;var l=-1,c=!0,f=o&k?new g:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var h,p=e[l],d=t[l];if(void 0!==(h=r?a?r(d,p,l,t,e,i):r(p,d,l,e,t,i):h)){if(h)continue;c=!1;break}if(f){if(!function(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return 1}(t,function(e,t){return!f.has(t)&&(p===e||n(p,e,r,o,i))&&f.add(t)})){c=!1;break}}else if(p!==d&&!n(p,d,r,o,i)){c=!1;break}}return i.delete(e),i.delete(t),c}function m(e,t){var n,r,e=e.__data__;return("string"==(r=s(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e["string"==typeof t?"string":"hash"]:e.map}function b(e,t){e=null==e?void 0:e[t];return!S(t=e)||he&&he in t||!(ze(t)||se(t)?de:te).test(x(t))?void 0:e}var N=function(e){return l.call(e)};function Ie(e,t){return!!(t=null==t?B:t)&&("number"==typeof e||ne.test(e))&&-1<e&&e%1==0&&e<t}function w(e,t){var n;if(!D(e))return"number"==(n=s(e))||"symbol"==n||"boolean"==n||null==e||Ve(e)||K.test(e)||!Z.test(e)||null!=t&&e in Object(t)}function Re(e){return e==e&&!S(e)}function Le(t,n){return function(e){return null!=e&&e[t]===n&&(void 0!==n||t in Object(e))}}(i&&N(new i(new ArrayBuffer(1)))!=I||c&&N(new c)!=C||n&&"[object Promise]"!=N(n.resolve())||f&&N(new f)!=A||o&&"[object WeakMap]"!=N(new o))&&(N=function(e){var t=l.call(e),e=t==T?e.constructor:void 0,e=e?x(e):void 0;if(e)switch(e){case be:return I;case we:return C;case _e:return"[object Promise]";case xe:return A;case Se:return"[object WeakMap]"}return t});var Ne=De(function(e){e=null==e?"":"string"==typeof(t=e)?t:Ve(t)?Pe?Pe.call(t):"":"0"==(n=t+"")&&1/t==-E?"-0":n;var t,n,o=[];return Q.test(e)&&o.push(""),e.replace($,function(e,t,n,r){o.push(n?r.replace(ee,"$1"):t||e)}),o});function _(e){var t;return"string"==typeof e||Ve(e)?e:"0"==(t=e+"")&&1/e==-E?"-0":t}function x(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function De(r,o){if("function"!=typeof r||o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var e=arguments,t=o?o.apply(this,e):e[0],n=i.cache;return n.has(t)?n.get(t):(e=r.apply(this,e),i.cache=n.set(t,e),e)}return i.cache=new(De.Cache||y),i}function Be(e,t){return e===t||e!=e&&t!=t}function Fe(e){return O(t=e)&&Ge(t)&&R.call(e,"callee")&&(!ge.call(e,"callee")||l.call(e)==j);var t}De.Cache=y;var D=Array.isArray;function Ge(e){return null!=e&&Ue(e.length)&&!ze(e)}function ze(e){e=S(e)?l.call(e):"";return e==V||e==W}function Ue(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=B}function S(e){var t=s(e);return e&&("object"==t||"function"==t)}function O(e){return!!e&&"object"==s(e)}function Ve(e){return"symbol"==s(e)||O(e)&&l.call(e)==q}var We,Ye=t?(We=t,function(e){return We(e)}):function(e){return O(e)&&Ue(e.length)&&!!r[l.call(e)]};function He(e){return(Ge(e)?function(e,t){var n,r=D(e)||Fe(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=r.length,i=!!o;for(n in e)!t&&!R.call(e,n)||i&&("length"==n||Ie(n,o))||r.push(n);return r}:function(e){if(e!==("function"==typeof(t=e&&e.constructor)&&t.prototype||a))return me(e);var t,n,r=[];for(n in Object(e))R.call(e,n)&&"constructor"!=n&&r.push(n);return r})(e)}function Xe(e){return e}e.exports=function(e,t){if(e&&e.length){var n=e,r=je(t),o=-1,i=oe,a=n.length,s=!0,u=[],l=u;if(200<=a){e=r?null:Te(n);if(e)return le(e);s=!1,i=ae,l=new g}else l=r?[]:u;e:for(;++o<a;){var c=n[o],f=r?r(c):c,c=0!==c?c:0;if(s&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;r&&l.push(f),u.push(c)}else i(l,f,void 0)||(l!==u&&l.push(f),u.push(c))}return u}return[]}},80442:function(e,t,n){n=n(91203).Symbol;e.exports=n},15244:function(e,t,n){var r=n(80442),o=n(64384),i=n(49671),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":(a&&a in Object(e)?o:i)(e)}},14323:function(e,t,n){var r=n(15244),o=n(80501),i=n(88223),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},19679:function(e){e.exports=function(t){return function(e){return t(e)}}},59747:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n="object"==(void 0===n.g?"undefined":r(n.g))&&n.g&&n.g.Object===Object&&n.g;e.exports=n},72264:function(e,t,n){n=n(71182)(Object.getPrototypeOf,Object);e.exports=n},64384:function(e,t,n){var n=n(80442),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{var r=!(e[s]=void 0)}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},35684:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e);var n=n(59747),t="object"==r(t)&&t&&!t.nodeType&&t,o=t&&"object"==r(e)&&e&&!e.nodeType&&e,i=o&&o.exports===t&&n.process,t=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=t},49671:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},71182:function(e){e.exports=function(t,n){return function(e){return t(n(e))}}},91203:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=n(59747),o="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,n=n||o||Function("return this")();e.exports=n},43936:function(e){var t=Array.isArray;e.exports=t},80501:function(e){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},39505:function(e,t,n){var r=n(15244),o=n(88223);e.exports=function(e){return"number"==typeof e||o(e)&&"[object Number]"==r(e)}},88223:function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null!=e&&"object"==t(e)}},4361:function(e,t,n){var r=n(15244),o=n(72264),i=n(88223),n=Function.prototype,a=Object.prototype,s=n.toString,u=a.hasOwnProperty,l=s.call(Object);e.exports=function(e){return!(!i(e)||"[object Object]"!=r(e))&&(null===(e=o(e))||"function"==typeof(e=u.call(e,"constructor")&&e.constructor)&&e instanceof e&&s.call(e)==l)}},34587:function(e,t,n){var r=n(14323),o=n(19679),n=n(35684),n=n&&n.isTypedArray,o=n?o(n):r;e.exports=o},49860:function(e,t,n){"use strict";var a=n(88370);e.exports=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!a.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,n=void 0===n?0:n,t=t.toIndex,r=void 0===t?e.length:t;if(n<0||n>=e.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>e.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[n],i=n+1;i<r;i++)e[i]>o&&(o=e[i]);return o}},10617:function(e,t,n){"use strict";var a=n(88370);e.exports=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!a.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,n=void 0===n?0:n,t=t.toIndex,r=void 0===t?e.length:t;if(n<0||n>=e.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>e.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[n],i=n+1;i<r;i++)e[i]<o&&(o=e[i]);return o}},94202:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=n(88370),o=n(49860),n=n(10617);function i(e){return e&&"object"===r(e)&&"default"in e?e:{default:e}}var c=i(o),f=i(n);e.exports=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!l.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!l.isAnyArray(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=f.default(e),o=c.default(e);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,i=n.max,n=void 0===i?n.autoMinMax?o:1:i;if(n<=a)throw new RangeError("min option must be smaller than max option");for(var s=(n-a)/(o-r),u=0;u<e.length;u++)t[u]=(e[u]-r)*s+a;return t}},92686:function(C,e,t){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=I(n);return A(this,r?(e=I(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function A(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0});var F=t(88370),L=(t=t(94202))&&"object"===B(t)&&"default"in t?t:{default:t},i=" ".repeat(2),N=" ".repeat(4);function D(e,t){var t=1<arguments.length&&void 0!==t?t:{},n=t.maxRows,n=void 0===n?15:n,r=t.maxColumns,r=void 0===r?10:r,o=t.maxNumSize,o=void 0===o?8:o,t=t.padMinus,t=void 0===t?"auto":t;return"".concat(e.constructor.name," {\n").concat(i,"[\n").concat(N).concat(function(e,t,n,r,o){var i=e.rows,a=e.columns,s=Math.min(i,t),u=Math.min(a,n),l=[];if("auto"===o){o=!1;e:for(var c=0;c<s;c++)for(var f=0;f<u;f++)if(e.get(c,f)<0){o=!0;break e}}for(var h,p,d,y=0;y<s;y++){for(var g=[],v=0;v<u;v++)g.push((h=e.get(y,v),p=r,d=o,(0<=h&&d?" ".concat(G(h,p-1)):G(h,p)).padEnd(p)));l.push("".concat(g.join(" ")))}return u!==a&&(l[l.length-1]+=" ... ".concat(a-n," more columns")),s!==i&&l.push("... ".concat(i-t," more rows")),l.join("\n".concat(N))}(e,n,r,o,t),"\n").concat(i,"]\n").concat(i,"rows: ").concat(e.rows,"\n").concat(i,"columns: ").concat(e.columns,"\n}")}function G(e,t){var n=e.toString();return n.length<=t||(n=(n=e.toFixed(t)).length>t?e.toFixed(Math.max(0,t-(n.length-t))):n).length<=t&&!n.startsWith("0.000")&&!n.startsWith("-0.000")?n:(n=(n=e.toExponential(t)).length>t?e.toExponential(Math.max(0,t-(n.length-t))):n).slice(0)}function a(e,t,n){n=n?e.rows:e.rows-1;if(t<0||n<t)throw new RangeError("Row index out of range")}function s(e,t,n){n=n?e.columns:e.columns-1;if(t<0||n<t)throw new RangeError("Column index out of range")}function u(e,t){if((t=t.to1DArray?t.to1DArray():t).length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function l(e,t){if((t=t.to1DArray?t.to1DArray():t).length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function z(e,t){if(!F.isAnyArray(t))throw new TypeError("row indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function U(e,t){if(!F.isAnyArray(t))throw new TypeError("column indices must be an array");for(var n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function V(e,t,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(c("startRow",t),c("endRow",n),c("startColumn",r),c("endColumn",o),n<t||o<r||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function p(e,t){for(var n=1<arguments.length&&void 0!==t?t:0,r=[],o=0;o<e;o++)r.push(n);return r}function c(e,t){if("number"!=typeof t)throw new TypeError("".concat(e," must be a number"))}function f(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}o(b,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.call(this,t,n);return this}},{key:"to1DArray",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"to2DArray",value:function(){for(var e=[],t=0;t<this.rows;t++){e.push([]);for(var n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,o=!1;e<this.rows&&r;){for(t=0,o=!1;t<this.columns&&!1===o;)0===this.get(e,t)?t++:1===this.get(e,t)&&n<t?(o=!0,n=t):o=!(r=!1);e++}return r}},{key:"isReducedEchelonForm",value:function(){for(var e=0,t=0,n=-1,r=!0,o=!1;e<this.rows&&r;){for(t=0,o=!1;t<this.columns&&!1===o;)0===this.get(e,t)?t++:1===this.get(e,t)&&n<t?(o=!0,n=t):o=!(r=!1);for(var i=t+1;i<this.rows;i++)0!==this.get(e,i)&&(r=!1);e++}return r}},{key:"echelonForm",value:function(){for(var e=this.clone(),t=0,n=0;t<e.rows&&n<e.columns;){for(var r=t,o=t;o<e.rows;o++)e.get(o,n)>e.get(r,n)&&(r=o);if(0!==e.get(r,n)){e.swapRows(t,r);for(var i=e.get(t,n),a=n;a<e.columns;a++)e.set(t,a,e.get(t,a)/i);for(var s=t+1;s<e.rows;s++){var u=e.get(s,n)/e.get(t,n);e.set(s,n,0);for(var l=n+1;l<e.columns;l++)e.set(s,l,e.get(s,l)-e.get(t,l)*u)}t++}n++}return e}},{key:"reducedEchelonForm",value:function(){for(var e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;0<=r;){if(0!==e.maxRow(r)){for(var o=0,i=!1;o<n&&!1===i;)1===e.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var s=e.get(a,o),u=o;u<t;u++){var l=e.get(a,u)-s*e.get(r,u);e.set(a,u,l)}}r--}return e}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("object"!==B(e))throw new TypeError("options must be an object");var t=e.rows,n=void 0===t?1:t,t=e.columns,r=void 0===t?1:t;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");for(var o=new Fe(this.rows*n,this.columns*r),i=0;i<n;i++)for(var a=0;a<r;a++)o.setSubMatrix(this,this.rows*i,this.columns*a);return o}},{key:"fill",value:function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,e);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(e){a(this,e);for(var t=[],n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"getRowVector",value:function(e){return Fe.rowVector(this.getRow(e))}},{key:"setRow",value:function(e,t){a(this,e),t=u(this,t);for(var n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}},{key:"swapRows",value:function(e,t){a(this,e),a(this,t);for(var n=0;n<this.columns;n++){var r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}},{key:"getColumn",value:function(e){s(this,e);for(var t=[],n=0;n<this.rows;n++)t.push(this.get(n,e));return t}},{key:"getColumnVector",value:function(e){return Fe.columnVector(this.getColumn(e))}},{key:"setColumn",value:function(e,t){s(this,e),t=l(this,t);for(var n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}},{key:"swapColumns",value:function(e,t){s(this,e),s(this,t);for(var n=0;n<this.rows;n++){var r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}},{key:"addRowVector",value:function(e){e=u(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}},{key:"subRowVector",value:function(e){e=u(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}},{key:"mulRowVector",value:function(e){e=u(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}},{key:"divRowVector",value:function(e){e=u(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}},{key:"addColumnVector",value:function(e){e=l(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}},{key:"subColumnVector",value:function(e){e=l(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}},{key:"mulColumnVector",value:function(e){e=l(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}},{key:"divColumnVector",value:function(e){e=l(this,e);for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}},{key:"mulRow",value:function(e,t){a(this,e);for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}},{key:"mulColumn",value:function(e,t){s(this,e);for(var n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}},{key:"max",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var o=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)>o[a]&&(o[a]=this.get(i,a));return o;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)>s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"maxIndex",value:function(){f(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"min",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t[n]&&(t[n]=this.get(n,r));return t;case"column":for(var o=new Array(this.columns).fill(Number.POSITIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)<o[a]&&(o[a]=this.get(i,a));return o;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)<s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"minIndex",value:function(){f(this);for(var e=this.get(0,0),t=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}},{key:"maxRow",value:function(e){if(a(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxRowIndex",value:function(e){a(this,e),f(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}},{key:"minRow",value:function(e){if(a(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minRowIndex",value:function(e){a(this,e),f(this);for(var t=this.get(e,0),n=[e,0],r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}},{key:"maxColumn",value:function(e){if(s(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}},{key:"maxColumnIndex",value:function(e){s(this,e),f(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}},{key:"minColumn",value:function(e){if(s(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}},{key:"minColumnIndex",value:function(e){s(this,e),f(this);for(var t=this.get(0,e),n=[0,e],r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}},{key:"diag",value:function(){for(var e=Math.min(this.rows,this.columns),t=[],n=0;n<e;n++)t.push(this.get(n,n));return t}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"frobenius",t=0;if("max"===e)return this.max();if("frobenius"!==e)throw new RangeError("unknown norm type: ".concat(e));for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)t+=this.get(n,r)*this.get(n,r);return Math.sqrt(t)}},{key:"cumulativeSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}},{key:"dot",value:function(e){b.isMatrix(e)&&(e=e.to1DArray());var t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}},{key:"mmul",value:function(e){e=Fe.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.columns,o=new Fe(t,r),i=new Float64Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)i[s]=e.get(s,a);for(var u=0;u<t;u++){for(var l=0,c=0;c<n;c++)l+=this.get(u,c)*i[c];o.set(u,a,l)}}return o}},{key:"strassen2x2",value:function(e){e=Fe.checkMatrix(e);var t=new Fe(2,2),n=this.get(0,0),r=e.get(0,0),o=this.get(0,1),i=e.get(0,1),a=this.get(1,0),s=e.get(1,0),u=this.get(1,1),e=e.get(1,1),l=(n+u)*(r+e),c=(a+u)*r,f=n*(i-e),h=u*(s-r),p=(n+o)*e,d=f+p,y=c+h,c=l-c+f+(a-n)*(r+i);return t.set(0,0,l+h-p+(o-u)*(s+e)),t.set(0,1,d),t.set(1,0,y),t.set(1,1,c),t}},{key:"strassen3x3",value:function(e){e=Fe.checkMatrix(e);var t=new Fe(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),f=e.get(0,0),h=e.get(0,1),p=e.get(0,2),d=e.get(1,0),y=e.get(1,1),g=e.get(1,2),v=e.get(2,0),m=e.get(2,1),e=e.get(2,2),b=(n-i)*(-h+y),w=(-n+i+a)*(f-h+y),_=(i+a)*(-f+h),x=n*f,S=(-n+u+l)*(f-p+g),O=(-n+u)*(p-g),P=(u+l)*(-f+p),E=(-o+l+c)*(y+v-m),k=(o-c)*(y-m),M=o*v,j=(l+c)*(-v+m),C=(-o+a+s)*(g+v-e),T=(o-s)*(g-e),A=(a+s)*(-v+e),I=(n+r+o-i-a-l-c)*y+w+_+x+E+M+j,n=x+S+P+(n+r+o-a-s-u-l)*g+M+C+A,o=b+a*(-f+h+d-y-g-v+e)+w+x+M+C+T,a=b+w+_+x+s*m,b=M+C+T+A+i*p,w=x+S+O+l*(-f+p+d-y-g-v+m)+E+k+M,_=E+k+M+j+u*h,s=x+S+O+P+c*e;return t.set(0,0,x+M+r*d),t.set(0,1,I),t.set(0,2,n),t.set(1,0,o),t.set(1,1,a),t.set(1,2,b),t.set(2,0,w),t.set(2,1,_),t.set(2,2,s),t}},{key:"mmulStrassen",value:function(e){e=Fe.checkMatrix(e);var t=this.clone(),n=t.rows,r=t.columns,o=e.rows,i=e.columns;function m(e,t,n){var r=e.rows,o=e.columns;return r===t&&o===n?e:b.zeros(t,n).setSubMatrix(e,0,0)}r!==o&&console.warn("Multiplying ".concat(n," x ").concat(r," and ").concat(o," x ").concat(i," matrix: dimensions do not match."));n=Math.max(n,o),o=Math.max(r,i);return function e(t,n,r,o){if(r<=512||o<=512)return t.mmul(n);r%2==1&&o%2==1?(t=m(t,r+1,o+1),n=m(n,r+1,o+1)):r%2==1?(t=m(t,r+1,o),n=m(n,r+1,o)):o%2==1&&(t=m(t,r,o+1),n=m(n,r,o+1));var i=parseInt(t.rows/2,10),a=parseInt(t.columns/2,10),s=t.subMatrix(0,i-1,0,a-1),u=n.subMatrix(0,i-1,0,a-1),l=t.subMatrix(0,i-1,a,t.columns-1),c=n.subMatrix(0,i-1,a,n.columns-1),f=t.subMatrix(i,t.rows-1,0,a-1),h=n.subMatrix(i,n.rows-1,0,a-1),t=t.subMatrix(i,t.rows-1,a,t.columns-1),n=n.subMatrix(i,n.rows-1,a,n.columns-1),p=e(b.add(s,t),b.add(u,n),i,a),d=e(b.add(f,t),u,i,a),y=e(s,b.sub(c,n),i,a),g=e(t,b.sub(h,u),i,a),v=e(b.add(s,l),n,i,a),f=e(b.sub(f,s),b.add(u,c),i,a),s=e(b.sub(l,t),b.add(h,n),i,a),u=b.add(p,g),c=(u.sub(v),u.add(s),b.add(y,v)),l=b.add(d,g),t=b.sub(p,d);return t.add(y),t.add(f),b.zeros(2*u.rows,2*u.columns).setSubMatrix(u,0,0).setSubMatrix(c,u.rows,0).setSubMatrix(l,0,u.columns).setSubMatrix(t,u.rows,u.columns).subMatrix(0,r-1,0,o-1)}(m(t,n,o),e=m(e,n,o),n,o)}},{key:"scaleRows",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("object"!==B(e))throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,t=e.max,r=void 0===t?1:t;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(r<=n)throw new RangeError("min must be smaller than max");for(var o=new Fe(this.rows,this.columns),i=0;i<this.rows;i++){var a=this.getRow(i);0<a.length&&L.default(a,{min:n,max:r,output:a}),o.setRow(i,a)}return o}},{key:"scaleColumns",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("object"!==B(e))throw new TypeError("options must be an object");var t=e.min,n=void 0===t?0:t,t=e.max,r=void 0===t?1:t;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(r<=n)throw new RangeError("min must be smaller than max");for(var o=new Fe(this.rows,this.columns),i=0;i<this.columns;i++){var a=this.getColumn(i);a.length&&L.default(a,{min:n,max:r,output:a}),o.setColumn(i,a)}return o}},{key:"flipRows",value:function(){for(var e=Math.ceil(this.columns/2),t=0;t<this.rows;t++)for(var n=0;n<e;n++){var r=this.get(t,n),o=this.get(t,this.columns-1-n);this.set(t,n,o),this.set(t,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var e=Math.ceil(this.rows/2),t=0;t<this.columns;t++)for(var n=0;n<e;n++){var r=this.get(n,t),o=this.get(this.rows-1-n,t);this.set(n,t,o),this.set(this.rows-1-n,t,r)}return this}},{key:"kroneckerProduct",value:function(e){e=Fe.checkMatrix(e);for(var t=this.rows,n=this.columns,r=e.rows,o=e.columns,i=new Fe(t*r,n*o),a=0;a<t;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var l=0;l<o;l++)i.set(r*a+u,o*s+l,this.get(a,s)*e.get(u,l));return i}},{key:"kroneckerSum",value:function(e){var t,n;if(e=Fe.checkMatrix(e),this.isSquare()&&e.isSquare())return n=this.rows,t=e.rows,t=this.kroneckerProduct(Fe.eye(t,t)),n=Fe.eye(n,n).kroneckerProduct(e),t.add(n);throw new Error("Kronecker Sum needs two Square Matrices")}},{key:"transpose",value:function(){for(var e=new Fe(this.columns,this.rows),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}},{key:"sortRows",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:W,t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}},{key:"sortColumns",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:W,t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}},{key:"subMatrix",value:function(e,t,n,r){V(this,e,t,n,r);for(var o=new Fe(t-e+1,r-n+1),i=e;i<=t;i++)for(var a=n;a<=r;a++)o.set(i-e,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(e,t,n){if((n=void 0===n?this.columns-1:n)<(t=void 0===t?0:t)||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new Fe(e.length,n-t+1),o=0;o<e.length;o++)for(var i=t;i<=n;i++){if(e[o]<0||e[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[o]));r.set(o,i-t,this.get(e[o],i))}return r}},{key:"subMatrixColumn",value:function(e,t,n){if((n=void 0===n?this.rows-1:n)<(t=void 0===t?0:t)||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new Fe(n-t+1,e.length),o=0;o<e.length;o++)for(var i=t;i<=n;i++){if(e[o]<0||e[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[o]));r.set(i-t,o,this.get(i,e[o]))}return r}},{key:"setSubMatrix",value:function(e,t,n){if(!(e=Fe.checkMatrix(e)).isEmpty()){V(this,t,t+e.rows-1,n,n+e.columns-1);for(var r=0;r<e.rows;r++)for(var o=0;o<e.columns;o++)this.set(t+r,n+o,e.get(r,o))}return this}},{key:"selection",value:function(e,t){z(this,e),U(this,t);for(var n=new Fe(e.length,t.length),r=0;r<e.length;r++)for(var o=e[r],i=0;i<t.length;i++){var a=t[i];n.set(r,i,this.get(o,a))}return n}},{key:"trace",value:function(){for(var e=Math.min(this.rows,this.columns),t=0,n=0;n<e;n++)t+=this.get(n,n);return t}},{key:"clone",value:function(){for(var e=new Fe(this.rows,this.columns),t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}},{key:"sum",value:function(e){switch(e){case"row":for(var t=this,n=p(t.rows),r=0;r<t.rows;++r)for(var o=0;o<t.columns;++o)n[r]+=t.get(r,o);return n;case"column":for(var i=this,a=p(i.columns),s=0;s<i.rows;++s)for(var u=0;u<i.columns;++u)a[u]+=i.get(s,u);return a;case void 0:for(var l=this,c=0,f=0;f<l.rows;f++)for(var h=0;h<l.columns;h++)c+=l.get(f,h);return c;default:throw new Error("invalid option: ".concat(e))}}},{key:"product",value:function(e){switch(e){case"row":for(var t=this,n=p(t.rows,1),r=0;r<t.rows;++r)for(var o=0;o<t.columns;++o)n[r]*=t.get(r,o);return n;case"column":for(var i=this,a=p(i.columns,1),s=0;s<i.rows;++s)for(var u=0;u<i.columns;++u)a[u]*=i.get(s,u);return a;case void 0:for(var l=this,c=1,f=0;f<l.rows;f++)for(var h=0;h<l.columns;h++)c*=l.get(f,h);return c;default:throw new Error("invalid option: ".concat(e))}}},{key:"mean",value:function(e){var t=this.sum(e);switch(e){case"row":for(var n=0;n<this.rows;n++)t[n]/=this.columns;return t;case"column":for(var r=0;r<this.columns;r++)t[r]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}},{key:"variance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("object"===B(e)&&(t=e,e=void 0),"object"!==B(t))throw new TypeError("options must be an object");var n=t.unbiased,r=void 0===n||n,n=t.mean,o=void 0===n?this.mean(e):n;if("boolean"!=typeof r)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(F.isAnyArray(o)){for(var i=this,a=r,s=o,u=i.rows,l=i.columns,c=[],f=0;f<u;f++){for(var h,p=0,d=0,y=0;y<l;y++)p+=h=i.get(f,y)-s[f],d+=h*h;c.push(a?(d-p*p/l)/(l-1):(d-p*p/l)/l)}return c}throw new TypeError("mean must be an array");case"column":if(F.isAnyArray(o)){for(var g=this,v=r,m=o,b=g.rows,L=g.columns,w=[],_=0;_<L;_++){for(var x,S=0,O=0,P=0;P<b;P++)S+=x=g.get(P,_)-m[_],O+=x*x;w.push(v?(O-S*S/b)/(b-1):(O-S*S/b)/b)}return w}throw new TypeError("mean must be an array");case void 0:if("number"!=typeof o)throw new TypeError("mean must be a number");for(var E,k=this,N=r,D=o,M=k.rows,j=k.columns,C=M*j,T=0,A=0,I=0;I<M;I++)for(var R=0;R<j;R++)T+=E=k.get(I,R)-D,A+=E*E;return N?(A-T*T/C)/(C-1):(A-T*T/C)/C;default:throw new Error("invalid option: ".concat(e))}}},{key:"standardDeviation",value:function(e,t){"object"===B(e)&&(t=e,e=void 0);var n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("object"===B(e)&&(t=e,e=void 0),"object"!==B(t))throw new TypeError("options must be an object");var t=t.center,n=void 0===t?this.mean(e):t;switch(e){case"row":if(F.isAnyArray(n)){for(var r=this,o=n,i=0;i<r.rows;i++)for(var a=0;a<r.columns;a++)r.set(i,a,r.get(i,a)-o[i]);return this}throw new TypeError("center must be an array");case"column":if(F.isAnyArray(n)){for(var s=this,u=n,l=0;l<s.rows;l++)for(var c=0;c<s.columns;c++)s.set(l,c,s.get(l,c)-u[c]);return this}throw new TypeError("center must be an array");case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");for(var f=this,h=n,p=0;p<f.rows;p++)for(var d=0;d<f.columns;d++)f.set(p,d,f.get(p,d)-h);return this;default:throw new Error("invalid option: ".concat(e))}}},{key:"scale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("object"===B(e)&&(t=e,e=void 0),"object"!==B(t))throw new TypeError("options must be an object");var n=t.scale;switch(e){case"row":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.rows;n++){for(var r=0,o=0;o<e.columns;o++)r+=Math.pow(e.get(n,o),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}(this);else if(!F.isAnyArray(n))throw new TypeError("scale must be an array");for(var r=this,o=n,i=0;i<r.rows;i++)for(var a=0;a<r.columns;a++)r.set(i,a,r.get(i,a)/o[i]);return this;case"column":if(void 0===n)n=function(e){for(var t=[],n=0;n<e.columns;n++){for(var r=0,o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}(this);else if(!F.isAnyArray(n))throw new TypeError("scale must be an array");for(var s=this,u=n,l=0;l<s.rows;l++)for(var c=0;c<s.columns;c++)s.set(l,c,s.get(l,c)/u[c]);return this;case void 0:if(void 0===n)n=function(e){for(var t=e.size-1,n=0,r=0;r<e.columns;r++)for(var o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/t;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");for(var f=this,h=n,p=0;p<f.rows;p++)for(var d=0;d<f.columns;d++)f.set(p,d,f.get(p,d)/h);return this;default:throw new Error("invalid option: ".concat(e))}}},{key:"toString",value:function(e){return D(this,e)}}],[{key:"from1DArray",value:function(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new Fe(e,t),o=0;o<e;o++)for(var i=0;i<t;i++)r.set(o,i,n[o*t+i]);return r}},{key:"rowVector",value:function(e){for(var t=new Fe(1,e.length),n=0;n<e.length;n++)t.set(0,n,e[n]);return t}},{key:"columnVector",value:function(e){for(var t=new Fe(e.length,1),n=0;n<e.length;n++)t.set(n,0,e[n]);return t}},{key:"zeros",value:function(e,t){return new Fe(e,t)}},{key:"ones",value:function(e,t){return new Fe(e,t).fill(1)}},{key:"rand",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("object"!==B(n))throw new TypeError("options must be an object");for(var n=n.random,r=void 0===n?Math.random:n,o=new Fe(e,t),i=0;i<e;i++)for(var a=0;a<t;a++)o.set(i,a,r());return o}},{key:"randInt",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if("object"!==B(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,r=n.max,r=void 0===r?1e3:r,n=n.random,i=void 0===n?Math.random:n;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(r))throw new TypeError("max must be an integer");if(r<=o)throw new RangeError("min must be smaller than max");for(var a=r-o,s=new Fe(e,t),u=0;u<e;u++)for(var l=0;l<t;l++){var c=o+Math.round(i()*a);s.set(u,l,c)}return s}},{key:"eye",value:function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);for(var r=Math.min(e,t),o=this.zeros(e,t),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(e,t,n){var r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);for(var o=Math.min(r,t,n),i=this.zeros(t,n),a=0;a<o;a++)i.set(a,a,e[a]);return i}},{key:"min",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,o=new Fe(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(e.get(i,a),t.get(i,a)));return o}},{key:"max",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var n=e.rows,r=e.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(e.get(i,a),t.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return b.isMatrix(e)?e:new Fe(e)}},{key:"isMatrix",value:function(e){return null!=e&&"Matrix"===e.klass}}]);t=b;function b(){Be(this,b)}function W(e,t){return e-t}t.prototype.klass="Matrix","undefined"!=typeof Symbol&&(t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return D(this)}),t.random=t.rand,t.randomInt=t.randInt,t.diagonal=t.diag,t.prototype.diagonal=t.prototype.diag,t.identity=t.eye,t.prototype.negate=t.prototype.neg,t.prototype.tensorProduct=t.prototype.kroneckerProduct;n(d,t),Y=r(d),o(d,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return a(this,e),this.data.splice(e,1),--this.rows,this}},{key:"addRow",value:function(e,t){return void 0===t&&(t=e,e=this.rows),a(this,e,!0),t=Float64Array.from(u(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){s(this,e);for(var t=0;t<this.rows;t++){for(var n=new Float64Array(this.columns-1),r=0;r<e;r++)n[r]=this.data[t][r];for(var o=e+1;o<this.columns;o++)n[o-1]=this.data[t][o];this.data[t]=n}return--this.columns,this}},{key:"addColumn",value:function(e,t){void 0===t&&(t=e,e=this.columns),s(this,e,!0),t=l(this,t);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<e;o++)r[o]=this.data[n][o];for(r[o++]=t[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]);var Y,h,Fe=d;function d(e,t){var n;if(Be(this,d),n=Y.call(this),d.isMatrix(e))return A(n,e.clone());if(Number.isInteger(e)&&0<=e){if(n.data=[],!(Number.isInteger(t)&&0<=t))throw new TypeError("nColumns must be a positive integer");for(var r=0;r<e;r++)n.data.push(new Float64Array(t))}else{if(!F.isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");var o=e;if("number"!=typeof(t=(e=o.length)?o[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");n.data=[];for(var i=0;i<e;i++){if(o[i].length!==t)throw new RangeError("Inconsistent array dimensions");if(!o[i].every(function(e){return"number"==typeof e}))throw new TypeError("Input data contains non-numeric values");n.data.push(Float64Array.from(o[i]))}}return n.rows=e,n.columns=t,n}h=Fe,(y=t).prototype.add=function(e){return"number"==typeof e?this.addS(e):this.addM(e)},y.prototype.addS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},y.prototype.addM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},y.add=function(e,t){return new h(e).add(t)},y.prototype.sub=function(e){return"number"==typeof e?this.subS(e):this.subM(e)},y.prototype.subS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},y.prototype.subM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},y.sub=function(e,t){return new h(e).sub(t)},y.prototype.subtract=y.prototype.sub,y.prototype.subtractS=y.prototype.subS,y.prototype.subtractM=y.prototype.subM,y.subtract=y.sub,y.prototype.mul=function(e){return"number"==typeof e?this.mulS(e):this.mulM(e)},y.prototype.mulS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},y.prototype.mulM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},y.mul=function(e,t){return new h(e).mul(t)},y.prototype.multiply=y.prototype.mul,y.prototype.multiplyS=y.prototype.mulS,y.prototype.multiplyM=y.prototype.mulM,y.multiply=y.mul,y.prototype.div=function(e){return"number"==typeof e?this.divS(e):this.divM(e)},y.prototype.divS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},y.prototype.divM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},y.div=function(e,t){return new h(e).div(t)},y.prototype.divide=y.prototype.div,y.prototype.divideS=y.prototype.divS,y.prototype.divideM=y.prototype.divM,y.divide=y.div,y.prototype.mod=function(e){return"number"==typeof e?this.modS(e):this.modM(e)},y.prototype.modS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},y.prototype.modM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},y.mod=function(e,t){return new h(e).mod(t)},y.prototype.modulus=y.prototype.mod,y.prototype.modulusS=y.prototype.modS,y.prototype.modulusM=y.prototype.modM,y.modulus=y.mod,y.prototype.and=function(e){return"number"==typeof e?this.andS(e):this.andM(e)},y.prototype.andS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},y.prototype.andM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},y.and=function(e,t){return new h(e).and(t)},y.prototype.or=function(e){return"number"==typeof e?this.orS(e):this.orM(e)},y.prototype.orS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},y.prototype.orM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},y.or=function(e,t){return new h(e).or(t)},y.prototype.xor=function(e){return"number"==typeof e?this.xorS(e):this.xorM(e)},y.prototype.xorS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},y.prototype.xorM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},y.xor=function(e,t){return new h(e).xor(t)},y.prototype.leftShift=function(e){return"number"==typeof e?this.leftShiftS(e):this.leftShiftM(e)},y.prototype.leftShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},y.prototype.leftShiftM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},y.leftShift=function(e,t){return new h(e).leftShift(t)},y.prototype.signPropagatingRightShift=function(e){return"number"==typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},y.prototype.signPropagatingRightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},y.prototype.signPropagatingRightShiftM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},y.signPropagatingRightShift=function(e,t){return new h(e).signPropagatingRightShift(t)},y.prototype.rightShift=function(e){return"number"==typeof e?this.rightShiftS(e):this.rightShiftM(e)},y.prototype.rightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},y.prototype.rightShiftM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},y.rightShift=function(e,t){return new h(e).rightShift(t)},y.prototype.zeroFillRightShift=y.prototype.rightShift,y.prototype.zeroFillRightShiftS=y.prototype.rightShiftS,y.prototype.zeroFillRightShiftM=y.prototype.rightShiftM,y.zeroFillRightShift=y.rightShift,y.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},y.not=function(e){return new h(e).not()},y.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},y.abs=function(e){return new h(e).abs()},y.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},y.acos=function(e){return new h(e).acos()},y.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},y.acosh=function(e){return new h(e).acosh()},y.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},y.asin=function(e){return new h(e).asin()},y.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},y.asinh=function(e){return new h(e).asinh()},y.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},y.atan=function(e){return new h(e).atan()},y.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},y.atanh=function(e){return new h(e).atanh()},y.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},y.cbrt=function(e){return new h(e).cbrt()},y.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},y.ceil=function(e){return new h(e).ceil()},y.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},y.clz32=function(e){return new h(e).clz32()},y.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},y.cos=function(e){return new h(e).cos()},y.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},y.cosh=function(e){return new h(e).cosh()},y.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},y.exp=function(e){return new h(e).exp()},y.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},y.expm1=function(e){return new h(e).expm1()},y.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},y.floor=function(e){return new h(e).floor()},y.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},y.fround=function(e){return new h(e).fround()},y.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},y.log=function(e){return new h(e).log()},y.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},y.log1p=function(e){return new h(e).log1p()},y.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},y.log10=function(e){return new h(e).log10()},y.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},y.log2=function(e){return new h(e).log2()},y.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},y.round=function(e){return new h(e).round()},y.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},y.sign=function(e){return new h(e).sign()},y.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},y.sin=function(e){return new h(e).sin()},y.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},y.sinh=function(e){return new h(e).sinh()},y.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},y.sqrt=function(e){return new h(e).sqrt()},y.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},y.tan=function(e){return new h(e).tan()},y.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},y.tanh=function(e){return new h(e).tanh()},y.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},y.trunc=function(e){return new h(e).trunc()},y.pow=function(e,t){return new h(e).pow(t)},y.prototype.pow=function(e){return"number"==typeof e?this.powS(e):this.powM(e)},y.prototype.powS=function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},y.prototype.powM=function(e){if(e=h.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e.get(t,n)));return this};n(he,t),re=r(he);var H,X,q,J,Z,K,Q,$,ee,te,ne,re,y=o(he),oe=(n(M,y),ne=r(M),o(M,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.column,n),this}},{key:"get",value:function(e){return this.matrix.get(e,this.column)}}]),M),ie=(n(k,y),te=r(k),o(k,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columnIndices[t])}}]),k),ae=(n(E,y),ee=r(E),o(E,[{key:"set",value:function(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columns-t-1)}}]),E),se=(n(P,y),$=r(P),o(P,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rows-e-1,t)}}]),P),ue=(n(O,y),Q=r(O),o(O,[{key:"set",value:function(e,t,n){return this.matrix.set(this.row,t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.row,t)}}]),O),le=(n(S,y),K=r(S),o(S,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],t)}}]),S),g=(n(x,y),Z=r(x),o(x,[{key:"set",value:function(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}]),x),ce=(n(_,y),J=r(_),o(_,[{key:"set",value:function(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}},{key:"get",value:function(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}]),_),y=(n(w,y),q=r(w),o(w,[{key:"set",value:function(e,t,n){return this.matrix.set(t,e,n),this}},{key:"get",value:function(e,t){return this.matrix.get(t,e)}}]),w),fe=(n(m,t),X=r(m),o(m,[{key:"set",value:function(e,t,n){e=this._calculateIndex(e,t);return this.data[e]=n,this}},{key:"get",value:function(e,t){e=this._calculateIndex(e,t);return this.data[e]}},{key:"_calculateIndex",value:function(e,t){return e*this.columns+t}}]),m),Ge=(n(v,t),H=r(v),o(v,[{key:"set",value:function(e,t,n){return this.data[e][t]=n,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),v);function v(e){var t;return Be(this,v),(t=H.call(this)).data=e,t.rows=e.length,t.columns=e[0].length,t}function m(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(Be(this,m),n.rows),n=void 0===n?1:n;if(e.length%n!=0)throw new Error("the data length is not divisible by the number of rows");return(t=X.call(this)).rows=n,t.columns=e.length/n,t.data=e,t}function w(e){return Be(this,w),q.call(this,e,e.columns,e.rows)}function _(e,t,n,r,o){return Be(this,_),V(e,t,n,r,o),(e=J.call(this,e,n-t+1,o-r+1)).startRow=t,e.startColumn=r,e}function x(e,t,n){return Be(this,x),z(e,t),U(e,n),(e=Z.call(this,e,t.length,n.length)).rowIndices=t,e.columnIndices=n,e}function S(e,t){return Be(this,S),z(e,t),(e=K.call(this,e,t.length,e.columns)).rowIndices=t,e}function O(e,t){return Be(this,O),a(e,t),(e=Q.call(this,e,1,e.columns)).row=t,e}function P(e){return Be(this,P),$.call(this,e,e.rows,e.columns)}function E(e){return Be(this,E),ee.call(this,e,e.rows,e.columns)}function k(e,t){return Be(this,k),U(e,t),(e=te.call(this,e,e.rows,t.length)).columnIndices=t,e}function M(e,t){return Be(this,M),s(e,t),(e=ne.call(this,e,e.rows,1)).column=t,e}function he(e,t,n){var r;return Be(this,he),(r=re.call(this)).matrix=e,r.rows=t,r.columns=n,r}o(de,[{key:"isSingular",value:function(){for(var e=this.LU,t=e.columns,n=0;n<t;n++)if(0===e.get(n,n))return!0;return!1}},{key:"solve",value:function(e){e=Fe.checkMatrix(e);var t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");for(var n,r,o=e.columns,i=e.subMatrixRow(this.pivotVector,0,o-1),a=t.columns,s=0;s<a;s++)for(n=s+1;n<a;n++)for(r=0;r<o;r++)i.set(n,r,i.get(n,r)-i.get(s,r)*t.get(n,s));for(s=a-1;0<=s;s--){for(r=0;r<o;r++)i.set(s,r,i.get(s,r)/t.get(s,s));for(n=0;n<s;n++)for(r=0;r<o;r++)i.set(n,r,i.get(n,r)-i.get(s,r)*t.get(n,s))}return i}},{key:"determinant",get:function(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,n=e.columns,r=0;r<n;r++)t*=e.get(r,r);return t}},{key:"lowerTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new Fe(t,n),o=0;o<t;o++)for(var i=0;i<n;i++)i<o?r.set(o,i,e.get(o,i)):o===i?r.set(o,i,1):r.set(o,i,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,n=e.columns,r=new Fe(t,n),o=0;o<t;o++)for(var i=0;i<n;i++)o<=i?r.set(o,i,e.get(o,i)):r.set(o,i,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]);var pe=de;function de(e){Be(this,de);for(var t,n,r,o,i,a,s,u,l=(e=Ge.checkMatrix(e)).clone(),c=l.rows,f=l.columns,h=new Float64Array(c),p=1,d=0;d<c;d++)h[d]=d;for(s=new Float64Array(c),t=0;t<f;t++){for(d=0;d<c;d++)s[d]=l.get(d,t);for(d=0;d<c;d++){for(u=Math.min(d,t),n=o=0;n<u;n++)o+=l.get(d,n)*s[n];s[d]-=o,l.set(d,t,s[d])}for(d=(r=t)+1;d<c;d++)Math.abs(s[d])>Math.abs(s[r])&&(r=d);if(r!==t){for(n=0;n<f;n++)i=l.get(r,n),l.set(r,n,l.get(t,n)),l.set(t,n,i);a=h[r],h[r]=h[t],h[t]=a,p=-p}if(t<c&&0!==l.get(t,t))for(d=t+1;d<c;d++)l.set(d,t,l.get(d,t)/l.get(t,t))}this.LU=l,this.pivotVector=h,this.pivotSign=p}function ze(e,t){var n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}o(ge,[{key:"solve",value:function(e){e=Fe.checkMatrix(e);var t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");for(var r,o,i,a=e.columns,s=e.clone(),u=t.columns,l=0;l<u;l++)for(o=0;o<a;o++){for(i=0,r=l;r<n;r++)i+=t.get(r,l)*s.get(r,o);for(i=-i/t.get(l,l),r=l;r<n;r++)s.set(r,o,s.get(r,o)+i*t.get(r,l))}for(l=u-1;0<=l;l--){for(o=0;o<a;o++)s.set(l,o,s.get(l,o)/this.Rdiag[l]);for(r=0;r<l;r++)for(o=0;o<a;o++)s.set(r,o,s.get(r,o)-s.get(l,o)*t.get(r,l))}return s.subMatrix(0,u-1,0,a-1)}},{key:"isFullRank",value:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){for(var e,t=this.QR,n=t.columns,r=new Fe(n,n),o=0;o<n;o++)for(e=0;e<n;e++)o<e?r.set(o,e,t.get(o,e)):o===e?r.set(o,e,this.Rdiag[o]):r.set(o,e,0);return r}},{key:"orthogonalMatrix",get:function(){for(var e,t,n,r=this.QR,o=r.rows,i=r.columns,a=new Fe(o,i),s=i-1;0<=s;s--){for(e=0;e<o;e++)a.set(e,s,0);for(a.set(s,s,1),t=s;t<i;t++)if(0!==r.get(s,s)){for(n=0,e=s;e<o;e++)n+=r.get(e,s)*a.get(e,t);for(n=-n/r.get(s,s),e=s;e<o;e++)a.set(e,t,a.get(e,t)+n*r.get(e,s))}}return a}}]);var ye=ge,j=(o(Ue,[{key:"solve",value:function(e){for(var t=this.threshold,n=this.s.length,r=Fe.zeros(n,n),o=0;o<n;o++)Math.abs(this.s[o])<=t?r.set(o,o,0):r.set(o,o,1/this.s[o]);for(var i=this.U,a=this.rightSingularVectors,s=a.mmul(r),u=a.rows,l=i.rows,c=Fe.zeros(u,l),f=0;f<u;f++)for(var h=0;h<l;h++){for(var p=0,d=0;d<n;d++)p+=s.get(f,d)*i.get(h,d);c.set(f,h,p)}return c.mmul(e)}},{key:"solveForDiagonal",value:function(e){return this.solve(Fe.diag(e))}},{key:"inverse",value:function(){for(var e=this.V,t=this.threshold,n=e.rows,r=e.columns,o=new Fe(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>t&&o.set(i,a,e.get(i,a)/this.s[a]);for(var s=this.U,u=s.rows,l=s.columns,c=new Fe(n,u),f=0;f<n;f++)for(var h=0;h<u;h++){for(var p=0,d=0;d<l;d++)p+=o.get(f,d)*s.get(h,d);c.set(f,h,p)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>e&&t++;return t}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Fe.diag(this.s)}}]),Ue);function Ue(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(Be(this,Ue),(e=Ge.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var n,r=e.rows,o=e.columns,N=t.computeLeftSingularVectors,D=t.computeRightSingularVectors,D=void 0===D||D,t=t.autoTranspose,t=void 0!==t&&t,i=Boolean(void 0===N||N),a=Boolean(D),N=!1;r<o?t?(r=(n=e.transpose()).rows,o=n.columns,N=!0,D=i,i=a,a=D):(n=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose")):n=e.clone();for(var B=Math.min(r,o),F=Math.min(r+1,o),s=new Float64Array(F),u=new Fe(r,B),l=new Fe(o,o),c=new Float64Array(o),G=new Float64Array(r),z=new Float64Array(F),U=0;U<F;U++)z[U]=U;for(var f=Math.min(r-1,o),h=Math.max(0,Math.min(o-2,r)),V=Math.max(f,h),p=0;p<V;p++){if(p<f){s[p]=0;for(var W=p;W<r;W++)s[p]=ze(s[p],n.get(W,p));if(0!==s[p]){n.get(p,p)<0&&(s[p]=-s[p]);for(var Y=p;Y<r;Y++)n.set(Y,p,n.get(Y,p)/s[p]);n.set(p,p,n.get(p,p)+1)}s[p]=-s[p]}for(var d=p+1;d<o;d++){if(p<f&&0!==s[p]){for(var H=0,X=p;X<r;X++)H+=n.get(X,p)*n.get(X,d);for(var H=-H/n.get(p,p),q=p;q<r;q++)n.set(q,d,n.get(q,d)+H*n.get(q,p))}c[d]=n.get(p,d)}if(i&&p<f)for(var J=p;J<r;J++)u.set(J,p,n.get(J,p));if(p<h){c[p]=0;for(var Z=p+1;Z<o;Z++)c[p]=ze(c[p],c[Z]);if(0!==c[p]){c[p+1]<0&&(c[p]=0-c[p]);for(var K=p+1;K<o;K++)c[K]/=c[p];c[p+1]+=1}if(c[p]=-c[p],p+1<r&&0!==c[p]){for(var Q=p+1;Q<r;Q++)G[Q]=0;for(var $=p+1;$<r;$++)for(var ee=p+1;ee<o;ee++)G[$]+=c[ee]*n.get($,ee);for(var te=p+1;te<o;te++)for(var ne=-c[te]/c[p+1],re=p+1;re<r;re++)n.set(re,te,n.get(re,te)+ne*G[re])}if(a)for(var oe=p+1;oe<o;oe++)l.set(oe,p,c[oe])}}var y=Math.min(o,r+1);if(f<o&&(s[f]=n.get(f,f)),r<y&&(s[y-1]=0),h+1<y&&(c[h]=n.get(h,y-1)),c[y-1]=0,i){for(var ie=f;ie<B;ie++){for(var ae=0;ae<r;ae++)u.set(ae,ie,0);u.set(ie,ie,1)}for(var g=f-1;0<=g;g--)if(0!==s[g]){for(var se=g+1;se<B;se++){for(var ue=0,le=g;le<r;le++)ue+=u.get(le,g)*u.get(le,se);for(var ue=-ue/u.get(g,g),ce=g;ce<r;ce++)u.set(ce,se,u.get(ce,se)+ue*u.get(ce,g))}for(var fe=g;fe<r;fe++)u.set(fe,g,-u.get(fe,g));u.set(g,g,1+u.get(g,g));for(var he=0;he<g-1;he++)u.set(he,g,0)}else{for(var pe=0;pe<r;pe++)u.set(pe,g,0);u.set(g,g,1)}}if(a)for(var v=o-1;0<=v;v--){if(v<h&&0!==c[v])for(var de=v+1;de<o;de++){for(var ye=0,ge=v+1;ge<o;ge++)ye+=l.get(ge,v)*l.get(ge,de);for(var ye=-ye/l.get(v+1,v),ve=v+1;ve<o;ve++)l.set(ve,de,l.get(ve,de)+ye*l.get(ve,v))}for(var me=0;me<o;me++)l.set(me,v,0);l.set(v,v,1)}for(var be=y-1,we=Number.EPSILON;0<y;){for(var m=void 0,_e=void 0,m=y-2;-1<=m&&-1!==m;m--){var xe=Number.MIN_VALUE+we*Math.abs(s[m]+Math.abs(s[m+1]));if(Math.abs(c[m])<=xe||Number.isNaN(c[m])){c[m]=0;break}}if(m===y-2)_e=4;else{for(var b=void 0,b=y-1;m<=b&&b!==m;b--){var Se=(b!==y?Math.abs(c[b]):0)+(b!==m+1?Math.abs(c[b-1]):0);if(Math.abs(s[b])<=we*Se){s[b]=0;break}}b===m?_e=3:b===y-1?_e=1:(_e=2,m=b)}switch(m++,_e){case 1:var Oe=c[y-2];c[y-2]=0;for(var w=y-2;m<=w;w--){var Pe=ze(s[w],Oe),Ee=s[w]/Pe,ke=Oe/Pe;if(s[w]=Pe,w!==m&&(Oe=-ke*c[w-1],c[w-1]=Ee*c[w-1]),a)for(var _=0;_<o;_++)Pe=Ee*l.get(_,w)+ke*l.get(_,y-1),l.set(_,y-1,-ke*l.get(_,w)+Ee*l.get(_,y-1)),l.set(_,w,Pe)}break;case 2:var Me=c[m-1];c[m-1]=0;for(var x=m;x<y;x++){var je=ze(s[x],Me),Ce=s[x]/je,Te=Me/je;if(s[x]=je,Me=-Te*c[x],c[x]=Ce*c[x],i)for(var S=0;S<r;S++)je=Ce*u.get(S,x)+Te*u.get(S,m-1),u.set(S,m-1,-Te*u.get(S,x)+Ce*u.get(S,m-1)),u.set(S,x,je)}break;case 3:for(var O=Math.max(Math.abs(s[y-1]),Math.abs(s[y-2]),Math.abs(c[y-2]),Math.abs(s[m]),Math.abs(c[m])),P=s[y-1]/O,E=s[y-2]/O,k=c[y-2]/O,Ae=s[m]/O,O=c[m]/O,E=((E+P)*(E-P)+k*k)/2,k=P*k*(P*k),Ie=0,M=(Ae+P)*(Ae-P)+(Ie=0==E&&0==k?Ie:k/(E+(E<0?0-Math.sqrt(E*E+k):Math.sqrt(E*E+k)))),j=Ae*O,C=m;C<y-1;C++){var T=ze(M,j),A=M/(T=0===T?Number.MIN_VALUE:T),I=j/T;if(C!==m&&(c[C-1]=T),M=A*s[C]+I*c[C],c[C]=A*c[C]-I*s[C],j=I*s[C+1],s[C+1]=A*s[C+1],a)for(var R=0;R<o;R++)T=A*l.get(R,C)+I*l.get(R,C+1),l.set(R,C+1,-I*l.get(R,C)+A*l.get(R,C+1)),l.set(R,C,T);if(A=M/(T=0===(T=ze(M,j))?Number.MIN_VALUE:T),I=j/T,s[C]=T,M=A*c[C]+I*s[C+1],s[C+1]=-I*c[C]+A*s[C+1],j=I*c[C+1],c[C+1]=A*c[C+1],i&&C<r-1)for(var L=0;L<r;L++)T=A*u.get(L,C)+I*u.get(L,C+1),u.set(L,C+1,-I*u.get(L,C)+A*u.get(L,C+1)),u.set(L,C,T)}c[y-2]=M;break;case 4:if(s[m]<=0&&(s[m]=s[m]<0?-s[m]:0,a))for(var Re=0;Re<=be;Re++)l.set(Re,m,-l.get(Re,m));for(;m<be&&!(s[m]>=s[m+1]);){var Le=s[m];if(s[m]=s[m+1],s[m+1]=Le,a&&m<o-1)for(var Ne=0;Ne<o;Ne++)Le=l.get(Ne,m+1),l.set(Ne,m+1,l.get(Ne,m)),l.set(Ne,m,Le);if(i&&m<r-1)for(var De=0;De<r;De++)Le=u.get(De,m+1),u.set(De,m+1,u.get(De,m)),u.set(De,m,Le);m++}y--}}N&&(t=l,l=u,u=t),this.m=r,this.n=o,this.s=s,this.U=u,this.V=l}function ge(e){Be(this,ge);for(var t,n,r=(e=Ge.checkMatrix(e)).clone(),o=e.rows,i=e.columns,a=new Float64Array(i),s=0;s<i;s++){for(var u=0,l=s;l<o;l++)u=ze(u,r.get(l,s));if(0!==u){for(r.get(s,s)<0&&(u=-u),l=s;l<o;l++)r.set(l,s,r.get(l,s)/u);for(r.set(s,s,r.get(s,s)+1),t=s+1;t<i;t++){for(n=0,l=s;l<o;l++)n+=r.get(l,s)*r.get(l,t);for(n=-n/r.get(s,s),l=s;l<o;l++)r.set(l,t,r.get(l,t)+n*r.get(l,s))}}a[s]=-u}this.QR=r,this.Rdiag=a}function ve(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return e=Ge.checkMatrix(e),t=Ge.checkMatrix(t),new(n?j:e.isSquare()?pe:ye)(e).solve(t)}o(Re,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){for(var e,t=this.n,n=this.e,r=this.d,o=new Fe(t,t),i=0;i<t;i++){for(e=0;e<t;e++)o.set(i,e,0);o.set(i,i,r[i]),0<n[i]?o.set(i,i+1,n[i]):n[i]<0&&o.set(i,i-1,n[i])}return o}}]);var me=Re;function Re(N){var D=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},D=(Be(this,Re),D.assumeSymmetric),D=void 0!==D&&D;if(!(N=Ge.checkMatrix(N)).isSquare())throw new Error("Matrix is not a square matrix");if(N.isEmpty())throw new Error("Matrix must be non-empty");var B,e=N.columns,F=new Fe(e,e),G=new Float64Array(e),z=new Float64Array(e),U=N;if(D||N.isSymmetric()){for(B=0;B<e;B++)for(he=0;he<e;he++)F.set(B,he,U.get(B,he));for(var t,n,V,r,o,W,Y,H=e,X=z,i=G,a=F,s=0;s<H;s++)i[s]=a.get(H-1,s);for(r=H-1;0<r;r--){for(o=V=Y=0;o<r;o++)Y+=Math.abs(i[o]);if(0===Y)for(X[r]=i[r-1],s=0;s<r;s++)i[s]=a.get(r-1,s),a.set(r,s,0),a.set(s,r,0);else{for(o=0;o<r;o++)i[o]/=Y,V+=i[o]*i[o];for(t=i[r-1],n=Math.sqrt(V),X[r]=Y*(n=0<t?-n:n),V-=t*n,i[r-1]=t-n,s=0;s<r;s++)X[s]=0;for(s=0;s<r;s++){for(t=i[s],a.set(s,r,t),n=X[s]+a.get(s,s)*t,o=s+1;o<=r-1;o++)n+=a.get(o,s)*i[o],X[o]+=a.get(o,s)*t;X[s]=n}for(s=t=0;s<r;s++)X[s]/=V,t+=X[s]*i[s];for(W=t/(V+V),s=0;s<r;s++)X[s]-=W*i[s];for(s=0;s<r;s++){for(t=i[s],n=X[s],o=s;o<=r-1;o++)a.set(o,s,a.get(o,s)-(t*X[o]+n*i[o]));i[s]=a.get(r-1,s),a.set(r,s,0)}}i[r]=V}for(r=0;r<H-1;r++){if(a.set(H-1,r,a.get(r,r)),a.set(r,r,1),0!==(V=i[r+1])){for(o=0;o<=r;o++)i[o]=a.get(o,r+1)/V;for(s=0;s<=r;s++){for(o=n=0;o<=r;o++)n+=a.get(o,r+1)*a.get(o,s);for(o=0;o<=r;o++)a.set(o,s,a.get(o,s)-n*i[o])}}for(o=0;o<=r;o++)a.set(o,r+1,0)}for(s=0;s<H;s++)i[s]=a.get(H-1,s),a.set(H-1,s,0);a.set(H-1,H-1,1),X[0]=0;for(var q,J,Z,u,K,l,Q,$,ee,te,ne,re,oe,ie,ae=e,c=z,f=G,se=F,h=1;h<ae;h++)c[h-1]=c[h];for(var ue=c[ae-1]=0,le=0,ce=Number.EPSILON,p=0;p<ae;p++){for(le=Math.max(le,Math.abs(f[p])+Math.abs(c[p])),K=p;K<ae&&!(Math.abs(c[K])<=ce*le);)K++;if(p<K)do{for(q=f[p],Q=ze(l=(f[p+1]-q)/(2*c[p]),1),f[p]=c[p]/(l+(Q=l<0?-Q:Q)),f[p+1]=c[p]*(l+Q),$=f[p+1],J=q-f[p],h=p+2;h<ae;h++)f[h]-=J;for(ue+=J,l=f[K],te=ee=1,ne=ee,re=c[p+1],ie=oe=0,h=K-1;p<=h;h--)for(ne=te,ie=oe,q=(te=ee)*c[h],J=ee*l,Q=ze(l,c[h]),c[h+1]=oe*Q,oe=c[h]/Q,l=(ee=l/Q)*f[h]-oe*q,f[h+1]=J+oe*(ee*q+oe*f[h]),u=0;u<ae;u++)J=se.get(u,h+1),se.set(u,h+1,oe*se.get(u,h)+ee*J),se.set(u,h,ee*se.get(u,h)-oe*J)}while(l=-oe*ie*ne*re*c[p]/$,c[p]=oe*l,f[p]=ee*l,Math.abs(c[p])>ce*le);f[p]=f[p]+ue,c[p]=0}for(h=0;h<ae-1;h++){for(l=f[u=h],Z=h+1;Z<ae;Z++)f[Z]<l&&(l=f[u=Z]);if(u!==h)for(f[u]=f[h],f[h]=l,Z=0;Z<ae;Z++)l=se.get(Z,h),se.set(Z,h,se.get(Z,u)),se.set(Z,u,l)}}else{for(var fe=new Fe(e,e),D=new Float64Array(e),he=0;he<e;he++)for(B=0;B<e;B++)fe.set(B,he,U.get(B,he));for(var pe,de,ye,d,y,ge,ve=e,me=fe,g=D,be=F,we=ve-1,v=1;v<=we-1;v++){for(ge=0,d=v;d<=we;d++)ge+=Math.abs(me.get(d,v-1));if(0!==ge){for(ye=0,d=we;v<=d;d--)g[d]=me.get(d,v-1)/ge,ye+=g[d]*g[d];for(de=Math.sqrt(ye),0<g[v]&&(de=-de),ye-=g[v]*de,g[v]=g[v]-de,y=v;y<ve;y++){for(pe=0,d=we;v<=d;d--)pe+=g[d]*me.get(d,y);for(pe/=ye,d=v;d<=we;d++)me.set(d,y,me.get(d,y)-pe*g[d])}for(d=0;d<=we;d++){for(pe=0,y=we;v<=y;y--)pe+=g[y]*me.get(d,y);for(pe/=ye,y=v;y<=we;y++)me.set(d,y,me.get(d,y)-pe*g[y])}g[v]=ge*g[v],me.set(v,v-1,ge*de)}}for(d=0;d<ve;d++)for(y=0;y<ve;y++)be.set(d,y,d===y?1:0);for(v=we-1;1<=v;v--)if(0!==me.get(v,v-1)){for(d=v+1;d<=we;d++)g[d]=me.get(d,v-1);for(y=v;y<=we;y++){for(de=0,d=v;d<=we;d++)de+=g[d]*be.get(d,y);for(de=de/g[v]/me.get(v,v-1),d=v;d<=we;d++)be.set(d,y,be.get(d,y)+de*g[d])}}for(var m,b,w,_,_e,x,S,O,xe,Se,Oe,Pe,Ee,ke,Me=e,P=z,E=G,k=F,M=fe,j=Me-1,je=Me-1,Ce=Number.EPSILON,Te=0,Ae=0,C=0,T=0,A=0,I=0,R=0,Ie=0,L=0;L<Me;L++)for((L<0||je<L)&&(E[L]=M.get(L,L),P[L]=0),m=Math.max(L-1,0);m<Me;m++)Ae+=Math.abs(M.get(L,m));for(;0<=j;){for(w=j;0<w&&(0===(I=Math.abs(M.get(w-1,w-1))+Math.abs(M.get(w,w)))&&(I=Ae),!(Math.abs(M.get(w,w-1))<Ce*I));)w--;if(w===j)M.set(j,j,M.get(j,j)+Te),E[j]=M.get(j,j),P[j]=0,j--,Ie=0;else if(w===j-1){if(x=M.get(j,j-1)*M.get(j-1,j),T=(C=(M.get(j-1,j-1)-M.get(j,j))/2)*C+x,R=Math.sqrt(Math.abs(T)),M.set(j,j,M.get(j,j)+Te),M.set(j-1,j-1,M.get(j-1,j-1)+Te),S=M.get(j,j),0<=T){for(E[j-1]=S+(R=0<=C?C+R:C-R),E[j]=E[j-1],0!==R&&(E[j]=S-x/R),P[j-1]=0,P[j]=0,C=(S=M.get(j,j-1))/(I=Math.abs(S)+Math.abs(R)),T=R/I,C/=A=Math.sqrt(C*C+T*T),T/=A,m=j-1;m<Me;m++)R=M.get(j-1,m),M.set(j-1,m,T*R+C*M.get(j,m)),M.set(j,m,T*M.get(j,m)-C*R);for(L=0;L<=j;L++)R=M.get(L,j-1),M.set(L,j-1,T*R+C*M.get(L,j)),M.set(L,j,T*M.get(L,j)-C*R);for(L=0;L<=je;L++)R=k.get(L,j-1),k.set(L,j-1,T*R+C*k.get(L,j)),k.set(L,j,T*k.get(L,j)-C*R)}else E[j-1]=S+C,E[j]=S+C,P[j-1]=R,P[j]=-R;j-=2,Ie=0}else{if(S=M.get(j,j),x=O=0,w<j&&(O=M.get(j-1,j-1),x=M.get(j,j-1)*M.get(j-1,j)),10===Ie){for(Te+=S,L=0;L<=j;L++)M.set(L,L,M.get(L,L)-S);S=O=.75*(I=Math.abs(M.get(j,j-1))+Math.abs(M.get(j-1,j-2))),x=-.4375*I*I}if(30===Ie&&0<(I=(I=(O-S)/2)*I+x)){for(I=Math.sqrt(I),I=S-x/((O-S)/2+(I=O<S?-I:I)),L=0;L<=j;L++)M.set(L,L,M.get(L,L)-I);Te+=I,S=O=x=.964}for(Ie+=1,_=j-2;w<=_&&(C=((A=S-(R=M.get(_,_)))*(I=O-R)-x)/M.get(_+1,_)+M.get(_,_+1),T=M.get(_+1,_+1)-R-A-I,A=M.get(_+2,_+1),C/=I=Math.abs(C)+Math.abs(T)+Math.abs(A),T/=I,A/=I,_!==w)&&!(Math.abs(M.get(_,_-1))*(Math.abs(T)+Math.abs(A))<Ce*(Math.abs(C)*(Math.abs(M.get(_-1,_-1))+Math.abs(R)+Math.abs(M.get(_+1,_+1)))));)_--;for(L=_+2;L<=j;L++)M.set(L,L-2,0),_+2<L&&M.set(L,L-3,0);for(b=_;b<=j-1&&(Ee=b!==j-1,b!==_&&(C=M.get(b,b-1),T=M.get(b+1,b-1),A=Ee?M.get(b+2,b-1):0,0!==(S=Math.abs(C)+Math.abs(T)+Math.abs(A)))&&(C/=S,T/=S,A/=S),0!==S);b++)if(I=Math.sqrt(C*C+T*T+A*A),0!==(I=C<0?-I:I)){for(b!==_?M.set(b,b-1,-I*S):w!==_&&M.set(b,b-1,-M.get(b,b-1)),S=(C+=I)/I,O=T/I,R=A/I,T/=C,A/=C,m=b;m<Me;m++)C=M.get(b,m)+T*M.get(b+1,m),Ee&&(C+=A*M.get(b+2,m),M.set(b+2,m,M.get(b+2,m)-C*R)),M.set(b,m,M.get(b,m)-C*S),M.set(b+1,m,M.get(b+1,m)-C*O);for(L=0;L<=Math.min(j,b+3);L++)C=S*M.get(L,b)+O*M.get(L,b+1),Ee&&(C+=R*M.get(L,b+2),M.set(L,b+2,M.get(L,b+2)-C*A)),M.set(L,b,M.get(L,b)-C),M.set(L,b+1,M.get(L,b+1)-C*T);for(L=0;L<=je;L++)C=S*k.get(L,b)+O*k.get(L,b+1),Ee&&(C+=R*k.get(L,b+2),k.set(L,b+2,k.get(L,b+2)-C*A)),k.set(L,b,k.get(L,b)-C),k.set(L,b+1,k.get(L,b+1)-C*T)}}}if(0!==Ae){for(j=Me-1;0<=j;j--)if(C=E[j],0===(T=P[j]))for(w=j,M.set(j,j,1),L=j-1;0<=L;L--){for(x=M.get(L,L)-C,A=0,m=w;m<=j;m++)A+=M.get(L,m)*M.get(m,j);if(P[L]<0)R=x,I=A;else if(0===P[w=L]?M.set(L,j,0!==x?-A/x:-A/(Ce*Ae)):(S=M.get(L,L+1),O=M.get(L+1,L),T=(E[L]-C)*(E[L]-C)+P[L]*P[L],M.set(L,j,_e=(S*I-R*A)/T),M.set(L+1,j,Math.abs(S)>Math.abs(R)?(-A-x*_e)/S:(-I-O*_e)/R)),1<Ce*(_e=Math.abs(M.get(L,j)))*_e)for(m=L;m<=j;m++)M.set(m,j,M.get(m,j)/_e)}else if(T<0)for(w=j-1,Math.abs(M.get(j,j-1))>Math.abs(M.get(j-1,j))?(M.set(j-1,j-1,T/M.get(j,j-1)),M.set(j-1,j,-(M.get(j,j)-C)/M.get(j,j-1))):(ke=Le(0,-M.get(j-1,j),M.get(j-1,j-1)-C,T),M.set(j-1,j-1,ke[0]),M.set(j-1,j,ke[1])),M.set(j,j-1,0),M.set(j,j,1),L=j-2;0<=L;L--){for(Se=xe=0,m=w;m<=j;m++)xe+=M.get(L,m)*M.get(m,j-1),Se+=M.get(L,m)*M.get(m,j);if(x=M.get(L,L)-C,P[L]<0)R=x,A=xe,I=Se;else if(0===P[w=L]?(ke=Le(-xe,-Se,x,T),M.set(L,j-1,ke[0]),M.set(L,j,ke[1])):(S=M.get(L,L+1),O=M.get(L+1,L),Oe=(E[L]-C)*(E[L]-C)+P[L]*P[L]-T*T,Pe=2*(E[L]-C)*T,ke=Le(S*A-R*xe+T*Se,S*I-R*Se-T*xe,Oe=0===Oe&&0==Pe?Ce*Ae*(Math.abs(x)+Math.abs(T)+Math.abs(S)+Math.abs(O)+Math.abs(R)):Oe,Pe),M.set(L,j-1,ke[0]),M.set(L,j,ke[1]),Math.abs(S)>Math.abs(R)+Math.abs(T)?(M.set(L+1,j-1,(-xe-x*M.get(L,j-1)+T*M.get(L,j))/S),M.set(L+1,j,(-Se-x*M.get(L,j)-T*M.get(L,j-1))/S)):(ke=Le(-A-O*M.get(L,j-1),-I-O*M.get(L,j),R,T),M.set(L+1,j-1,ke[0]),M.set(L+1,j,ke[1]))),1<Ce*(_e=Math.max(Math.abs(M.get(L,j-1)),Math.abs(M.get(L,j))))*_e)for(m=L;m<=j;m++)M.set(m,j-1,M.get(m,j-1)/_e),M.set(m,j,M.get(m,j)/_e)}for(L=0;L<Me;L++)if(L<0||je<L)for(m=L;m<Me;m++)k.set(L,m,M.get(L,m));for(m=Me-1;0<=m;m--)for(L=0;L<=je;L++){for(b=R=0;b<=Math.min(m,je);b++)R+=k.get(L,b)*M.get(b,m);k.set(L,m,R)}}}this.n=e,this.e=z,this.d=G,this.V=F}function Le(e,t,n,r){var o,i;return Math.abs(n)>Math.abs(r)?[(e+(o=r/n)*t)/(i=n+o*r),(t-o*e)/i]:[((o=n/r)*e+t)/(i=r+o*n),(o*t-e)/i]}o(_e,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(e){e=Ge.checkMatrix(e);var t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");for(var r,o,i=e.columns,a=e.clone(),s=0;s<n;s++)for(o=0;o<i;o++){for(r=0;r<s;r++)a.set(s,o,a.get(s,o)-a.get(r,o)*t.get(s,r));a.set(s,o,a.get(s,o)/t.get(s,s))}for(s=n-1;0<=s;s--)for(o=0;o<i;o++){for(r=s+1;r<n;r++)a.set(s,o,a.get(s,o)-a.get(r,o)*t.get(r,s));a.set(s,o,a.get(s,o)/t.get(s,s))}return a}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]);var be=_e,we=o(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Be(this,e),t=Ge.checkMatrix(t);var r,o=n.Y,i=n.scaleScores,i=void 0!==i&&i,a=n.maxIterations,s=void 0===a?1e3:a,a=n.terminationCriteria,u=void 0===a?1e-10:a;if(o){if((o=F.isAnyArray(o)&&"number"==typeof o[0]?Fe.columnVector(o):Ge.checkMatrix(o)).rows!==t.rows)throw new Error("Y should have the same number of rows as X");r=o.getColumnVector(0)}else r=t.getColumnVector(0);for(var l,c,f,h,p,d,y=1,g=0;g<s&&u<y;g++)f=(f=t.transpose().mmul(r).div(r.transpose().mmul(r).get(0,0))).div(f.norm()),l=t.mmul(f).div(f.transpose().mmul(f).get(0,0)),0<g&&(y=l.clone().sub(h).pow(2).sum()),h=l.clone(),r=o?(c=(c=o.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0))).div(c.norm()),o.mmul(c).div(c.transpose().mmul(c).get(0,0))):l;o?(n=(n=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0))).div(n.norm()),a=t.clone().sub(l.clone().mmul(n.transpose())),p=r.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),d=o.clone().sub(l.clone().mulS(p.get(0,0)).mmul(c.transpose())),this.t=l,this.p=n.transpose(),this.w=f.transpose(),this.q=c,this.u=r,this.s=l.transpose().mmul(l),this.xResidual=a,this.yResidual=d,this.betas=p):(this.w=f.transpose(),this.s=l.transpose().mmul(l).sqrt(),this.t=i?l.clone().div(this.s.get(0,0)):l,this.xResidual=t.sub(l.mmul(f.transpose())))});function _e(e){if(Be(this,_e),!(e=Ge.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");for(var t=e,n=t.rows,r=new Fe(n,n),o=!0,i=0;i<n;i++){for(var a=0,s=0;s<i;s++){for(var u=0,l=0;l<s;l++)u+=r.get(s,l)*r.get(i,l);u=(t.get(i,s)-u)/r.get(s,s),r.set(i,s,u),a+=u*u}for(o&=0<(a=t.get(i,i)-a),r.set(i,i,Math.sqrt(Math.max(a,0))),s=i+1;s<n;s++)r.set(i,s,0)}this.L=r,this.positiveDefinite=Boolean(o)}e.AbstractMatrix=t,e.CHO=be,e.CholeskyDecomposition=be,e.EVD=me,e.EigenvalueDecomposition=me,e.LU=pe,e.LuDecomposition=pe,e.Matrix=Fe,e.MatrixColumnSelectionView=ie,e.MatrixColumnView=oe,e.MatrixFlipColumnView=ae,e.MatrixFlipRowView=se,e.MatrixRowSelectionView=le,e.MatrixRowView=ue,e.MatrixSelectionView=g,e.MatrixSubView=ce,e.MatrixTransposeView=y,e.NIPALS=we,e.Nipals=we,e.QR=ye,e.QrDecomposition=ye,e.SVD=j,e.SingularValueDecomposition=j,e.WrapperMatrix1D=fe,e.WrapperMatrix2D=Ge,e.correlation=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=(e=new Fe(e),!1);if("object"!==B(t)||Fe.isMatrix(t)||F.isAnyArray(t)?t=new Fe(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var o=n.center,n=n.scale,n=void 0===n||n;void 0!==o&&!o||(e.center("column"),r)||t.center("column"),n&&(e.scale("column"),r||t.scale("column"));for(var i=e.standardDeviation("column",{unbiased:!0}),a=r?i:t.standardDeviation("column",{unbiased:!0}),s=e.transpose().mmul(t),u=0;u<s.rows;u++)for(var l=0;l<s.columns;l++)s.set(u,l,s.get(u,l)*(1/(i[u]*a[l]))*(1/(e.rows-1)));return s},e.covariance=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=(e=new Fe(e),!1);if("object"!==B(t)||Fe.isMatrix(t)||F.isAnyArray(t)?t=new Fe(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");n=n.center;void 0!==n&&!n||(e=e.center("column"),r)||(t=t.center("column"));for(var o=e.transpose().mmul(t),i=0;i<o.rows;i++)for(var a=0;a<o.columns;a++)o.set(i,a,o.get(i,a)*(1/(e.rows-1)));return o},e.default=Fe,e.determinant=function e(t){if((t=Fe.checkMatrix(t)).isSquare())return 0===t.columns?1:2===t.columns?(n=t.get(0,0),r=t.get(0,1),o=t.get(1,0),n*t.get(1,1)-r*o):3===t.columns?(i=new g(t,[1,2],[1,2]),a=new g(t,[1,2],[0,2]),s=new g(t,[1,2],[0,1]),n=t.get(0,0),r=t.get(0,1),o=t.get(0,2),n*e(i)-r*e(a)+o*e(s)):new pe(t).determinant;throw Error("determinant can only be calculated for a square matrix");var n,r,o,i,a,s},e.inverse=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return e=Ge.checkMatrix(e),t?new j(e).inverse():ve(e,Fe.eye(e.rows))},e.linearDependencies=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.thresholdValue,r=void 0===n?1e-9:n,n=t.thresholdError,o=void 0===n?1e-9:n,i=(e=Fe.checkMatrix(e)).rows,a=new Fe(i,i),s=0;s<i;s++){var u=Fe.columnVector(e.getRow(s)),l=e.subMatrixRow(function(e,t){for(var n=[],r=0;r<e;r++)r!==t&&n.push(r);return n}(i,s)).transpose(),c=new j(l).solve(u),u=Fe.sub(u,l.mmul(c)).abs().max();a.setRow(s,function(e,t,n,r,o){var i=3<arguments.length&&void 0!==r?r:1e-9;if((4<arguments.length&&void 0!==o?o:1e-9)<e)return new Array(t.rows+1).fill(0);for(var a=t.addRow(n,[0]),s=0;s<a.rows;s++)Math.abs(a.get(s,0))<i&&a.set(s,0,0);return a.to1DArray()}(u,c,s,r,o))}return a},e.pseudoInverse=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((e=Fe.checkMatrix(e)).isEmpty())return e.transpose();for(var e=new j(e,{autoTranspose:!0}),n=e.leftSingularVectors,r=e.rightSingularVectors,o=e.diagonal,i=0;i<o.length;i++)Math.abs(o[i])>t?o[i]=1/o[i]:o[i]=0;return r.mmul(Fe.diag(o).mmul(n.transpose()))},e.solve=ve,e.wrap=function(e,t){if(F.isAnyArray(e))return e[0]&&F.isAnyArray(e[0])?new Ge(e):new fe(e,t);throw new Error("the argument is not an array")}},19957:function(e,t,h){var n;function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=function(){"use strict";function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}function t(n){return new this(function(o,e){if(!n||void 0===n.length)return e(new TypeError(p(n)+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(0===i.length)return o([]);var a=i.length;for(var t=0;t<i.length;t++)!function t(n,e){if(e&&("object"===p(e)||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},function(e){i[n]={status:"rejected",reason:e},0==--a&&o(i)})}i[n]={status:"fulfilled",value:e},0==--a&&o(i)}(t,i[t])})}var n=setTimeout;function u(e){return Boolean(e&&void 0!==e.length)}function o(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,i._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void l(r.promise,e)}s(r.promise,e)}else(1===n._state?s:l)(r.promise,n._value)})):n._deferreds.push(r)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===p(t)||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,c(e);if("function"==typeof n)return f((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){l(e,t)}var r,o}function l(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){n||(n=!0,l(t,e))}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(r,e){var t=new this.constructor(o);return a(this,new function(e,t,n){this.onFulfilled="function"==typeof r?r:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(0,e,t)),t},i.prototype.finally=e,i.all=function(t){return new i(function(o,i){if(!u(t))return i(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return o([]);var s=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"===p(e)||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},i)}a[n]=e,0==--s&&o(a)}catch(n){i(n)}}(e,a[e])})},i.allSettled=t,i.resolve=function(t){return t&&"object"===p(t)&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.race=function(o){return new i(function(e,t){if(!u(o))return t(new TypeError("Promise.race accepts an array"));for(var n=0,r=o.length;n<r;n++)i.resolve(o[n]).then(e,t)})},i._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){n(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==h.g)return h.g;throw new Error("unable to locate global object")}();"function"!=typeof r.Promise?r.Promise=i:(r.Promise.prototype.finally||(r.Promise.prototype.finally=e),r.Promise.allSettled||(r.Promise.allSettled=t))},"object"===p(t)?n():void 0!==(t="function"==typeof(n=n)?n.call(t,h,t,e):n)&&(e.exports=t)},21441:function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){"use strict";function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t){return e<t?-1:t<e?1:0}return function(e,t,n,r,o){!function e(t,n,r,o,i){for(;r<o;){600<o-r&&(a=o-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1),e(t,n,Math.max(r,Math.floor(n-s*u/a+l)),Math.min(o,Math.floor(n+(a-s)*u/a+l)),i));var a,s,u,l,c=t[n],f=r,h=o;for(p(t,r,n),0<i(t[o],c)&&p(t,r,o);f<h;){for(p(t,f,h),f++,h--;i(t[f],c)<0;)f++;for(;0<i(t[h],c);)h--}0===i(t[r],c)?p(t,r,h):p(t,++h,o),h<=n&&(r=h+1),n<=h&&(o=h-1)}}(e,t,n||0,r||e.length-1,o||i)}},"object"===o(t)?e.exports=r():void 0!==(n="function"==typeof(r=r)?r.call(t,n,t,e):r)&&(e.exports=n)},43861:function(e,t,n){"use strict";e.exports=r,e.exports.default=r;var s=n(21441);function r(e,t){if(!(this instanceof r))return new r(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function p(e,t){d(e,0,e.children.length,t,e)}function d(e,t,n,r,o){(o=o||g(null)).minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<n;a++)i=e.children[a],c(o,e.leaf?r(i):i);return o}function c(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function i(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function l(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,n,r,o){for(var i,a=[t,n];a.length;)(n=a.pop())-(t=a.pop())<=r||(i=t+Math.ceil((n-t)/r/2)*r,s(e,i,t,n,o),a.push(t,i,i,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],r=this.toBBox;if(l(e,t))for(var o,i,a,s,u=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],l(e,s=t.leaf?r(a):a)&&(t.leaf?n.push(a):h(e,s)?this._all(a,n):u.push(a));t=u.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(l(e,t))for(var r,o,i,a,s=[];t;){for(r=0,o=t.children.length;r<o;r++)if(i=t.children[r],l(e,a=t.leaf?n(i):i)){if(t.leaf||h(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(e&&e.length)if(e.length<this._minEntries)for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);else{var r,o=this._build(e.slice(),0,e.length-1,0);this.data.children.length?this.data.height===o.height?this._splitRoot(this.data,o):(this.data.height<o.height&&(r=this.data,this.data=o,o=r),this._insert(o,this.data.height-o.height-1,!0)):this.data=o}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(e,t){if(e)for(var n,r,o,i,a=this.data,s=this.toBBox(e),u=[],l=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=l.pop(),i=!0),a.leaf&&-1!==(o=function(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}(e,a.children,t)))return a.children.splice(o,1),u.push(a),this._condense(u),this;i||a.leaf||!h(a,s)?r?(n++,a=r.children[n],i=!1):a=null:(u.push(a),l.push(n),a=(r=a).children[n=0])}return this},toBBox:function(e){return e},compareMinX:i,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,r){var o,i=n-t+1,a=this._maxEntries;if(i<=a)p(o=g(e.slice(t,n+1)),this.toBBox);else{r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/Math.pow(a,r-1))),(o=g([])).leaf=!1,o.height=r;var s,u,l,c,f=Math.ceil(i/a),h=f*Math.ceil(Math.sqrt(a));for(v(e,t,n,h,this.compareMinX),s=t;s<=n;s+=h)for(v(e,s,l=Math.min(s+h-1,n),f,this.compareMinY),u=s;u<=l;u+=f)c=Math.min(u+f-1,l),o.children.push(this._build(e,u,c,r-1));p(o,this.toBBox)}return o},_chooseSubtree:function(e,t,n,r){for(var o,i,a,s,u,l,c,f,h;r.push(t),!t.leaf&&r.length-1!==n;){for(l=c=1/0,o=0,i=t.children.length;o<i;o++)u=y(a=t.children[o]),f=e,h=a,(h=(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-u)<c?(c=h,l=u<l?u:l,s=a):h===c&&u<l&&(l=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,n){var r=this.toBBox,n=n?e:r(e),o=[],r=this._chooseSubtree(n,this.data,t,o);for(r.children.push(e),c(r,n);0<=t&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(n,o,t)},_split:function(e,t){var n=e[t],r=n.children.length,o=this._minEntries,o=(this._chooseSplitAxis(n,o,r),this._chooseSplitIndex(n,o,r)),r=g(n.children.splice(o,n.children.length-o));r.height=n.height,r.leaf=n.leaf,p(n,this.toBBox),p(r,this.toBBox),t?e[t-1].children.push(r):this._splitRoot(n,r)},_splitRoot:function(e,t){this.data=g([e,t]),this.data.height=e.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){for(var r,o,i,a,s,u,l,c,f,h=i=1/0,p=t;p<=n-t;p++)f=r=d(e,0,p,this.toBBox),s=o=d(e,p,n,this.toBBox),u=Math.max(f.minX,s.minX),l=Math.max(f.minY,s.minY),c=Math.min(f.maxX,s.maxX),f=Math.min(f.maxY,s.maxY),s=Math.max(0,c-u)*Math.max(0,f-l),c=y(r)+y(o),s<h?(h=s,a=p,i=c<i?c:i):s===h&&c<i&&(i=c,a=p);return a},_chooseSplitAxis:function(e,t,n){var r=e.leaf?this.compareMinX:i,o=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,o)&&e.children.sort(r)},_allDistMargin:function(e,t,n,r){e.children.sort(r);for(var o,i=this.toBBox,a=d(e,0,t,i),s=d(e,n-t,n,i),u=f(a)+f(s),l=t;l<n-t;l++)o=e.children[l],c(a,e.leaf?i(o):o),u+=f(a);for(l=n-t-1;t<=l;l--)o=e.children[l],c(s,e.leaf?i(o):o),u+=f(s);return u},_adjustParentBBoxes:function(e,t,n){for(var r=n;0<=r;r--)c(t[r],e)},_condense:function(e){for(var t,n=e.length-1;0<=n;n--)0===e[n].children.length?0<n?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():p(e[n],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},44934:function(e,t,n){var r;function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){"use strict";function St(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e}var Ot=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray};function r(e){e=new Error("(regl) "+e);throw console.error(e),e}function d(e,t){e||r(t)}function o(e){return e?": "+e:""}function s(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"===Nn(e);case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"===Nn(e)}}function c(e,t,n){t.indexOf(e)<0&&r("invalid value"+o(n)+". must be one of: "+t)}var t=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(e,t){for(e+="";e.length<t;)e=" "+e;return e}function h(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function p(e,t){this.number=e,this.line=t,this.errors=[]}function y(e,t,n){this.file=e,this.line=t,this.message=n}function f(){var e=new Error,e=(e.stack||e).toString(),t=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);return(t=t||/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e))?t[1]:"unknown"}function g(){var e=new Error,e=(e.stack||e).toString(),t=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);return(t=t||/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e))?t[1]:"unknown"}function v(e,t){var n,r=e.split("\n"),o=1,i=0,a={unknown:new h,0:new h};a.unknown.name=a[0].name=t||f(),a.unknown.lines.push(new p(0,""));for(var s=0;s<r.length;++s){var u=r[s],l=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(o=0|c[1],c[2])&&((i=0|c[2])in a||(a[i]=new h));break;case"define":c=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);c&&(a[i].name=c[1]?(n=c[2],"undefined"!=typeof atob?atob(n):"base64:"+n):c[2])}a[i].lines.push(new p(o++,u))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function m(e){e._commandRef=f()}function b(e,t){var n=g();r(e+" in command "+(t||f())+("unknown"===n?"":" called from "+n))}function w(e,t,n,r){s(e,t)||b("invalid parameter type"+o(n)+". expected "+t+", got "+Nn(e),r||f())}var n={};function _(e,t){return 32820===e||32819===e||33635===e?2:34042===e?4:n[e]*t}function x(e){return!(e&e-1||!e)}n[5120]=n[5121]=1,n[5122]=n[5123]=n[36193]=n[33635]=n[32819]=n[32820]=2,n[5124]=n[5125]=n[5126]=n[34042]=4;var Pt=St(d,{optional:function(e){e()},raise:r,commandRaise:b,command:function(e,t,n){e||b(t,n||f())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||b("unknown parameter ("+e+")"+o(n)+". possible values: "+Object.keys(t).join(),r||f())},constructor:function(e){Object.keys(e).forEach(function(e){t.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+t)})},type:function(e,t,n){s(e,t)||r("invalid parameter type"+o(n)+". expected "+t+", got "+Nn(e))},commandType:w,isTypedArray:function(e,t){Ot(e)||r("invalid parameter type"+o(t)+". must be a typed array")},nni:function(e,t){0<=e&&(0|e)===e||r("invalid parameter type, ("+e+")"+o(t)+". must be a nonnegative integer")},oneOf:c,shaderError:function(e,t,n,r,o){var a,i,s;e.getShaderParameter(t,e.COMPILE_STATUS)||(t=e.getShaderInfoLog(t),w(n,"string",(r=r===e.FRAGMENT_SHADER?"fragment":"vertex")+" shader source must be a string",o),a=v(n,o),s=[],t.split("\n").forEach(function(e){var t;e.length<5||((t=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e))?s.push(new y(0|t[1],0|t[2],t[3].trim())):0<e.length&&s.push(new y("unknown",0,e)))}),i=a,s.forEach(function(e){var t=i[e.file];if(t){var n=t.index[e.line];if(n)return n.errors.push(e),void(t.hasErrors=!0)}i.unknown.hasErrors=!0,i.unknown.lines[0].errors.push(e)}),Object.keys(a).forEach(function(e){var n,r,t=a[e];function i(e,t){n.push(e),r.push(t||"")}t.hasErrors&&(n=[""],r=[""],i("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach(function(r){var o;0<r.errors.length?(i(u(r.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(r.line+"\n","color:red; background-color:yellow; font-weight:bold"),o=0,r.errors.forEach(function(e){var t,e=e.message,n=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);o=n?(t=n[1],"assign"===(e=n[2],t)&&(t="="),Math.max(r.line.indexOf(t,o),0)):0,i(u("| ",6)),i(u("^^^",o+3)+"\n","font-weight:bold"),i(u("| ",6)),i(e+"\n","font-weight:bold")}),i(u("| ",6)+"\n")):(i(u(r.number,4)+"|  "),i(r.line+"\n","color:red"))}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r)))}),d.raise("Error compiling "+r+" shader, "+a[0].name))},linkError:function(e,t,n,r,o){e.getProgramParameter(t,e.LINK_STATUS)||(e=e.getProgramInfoLog(t),t=v(n,o),n='Error linking program with vertex shader, "'+v(r,o)[0].name+'", and fragment shader "'+t[0].name+'"',"undefined"!=typeof document?console.log("%c"+n+"\n%c"+e,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(n+"\n"+e),d.raise(n))},callSite:g,saveCommandRef:m,saveDrawInfo:function(e,t,n,r){function o(e){return e?r.id(e):0}function i(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}m(e),e._fragId=o(e.static.frag),e._vertId=o(e.static.vert);var a=e._uniformSet={},a=(i(a,t.static),i(a,t.dynamic),e._attributeSet={});i(a,n.static),i(a,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?c(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):c(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:f,texture2D:function(e,t,n){for(var r,o,i,a=t.width,s=t.height,u=t.channels,l=(d(0<a&&a<=n.maxTextureSize&&0<s&&s<=n.maxTextureSize,"invalid texture shape"),33071===e.wrapS&&33071===e.wrapT||d(x(a)&&x(s),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==a&&1!==s&&d(9984!==e.minFilter&&9986!==e.minFilter&&9985!==e.minFilter&&9987!==e.minFilter,"min filter requires mipmap"):(d(x(a)&&x(s),"texture must be a square power of 2 to support mipmapping"),d(t.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),5126===t.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&d(9728===e.minFilter&&9728===e.magFilter,"filter not supported, must enable oes_texture_float_linear"),d(!e.genMipmaps,"mipmap generation not supported with float textures")),t.images),c=0;c<16;++c)l[c]?(i=a>>c,r=s>>c,d(t.mipmask&1<<c,"missing mipmap data"),o=l[c],d(o.width===i&&o.height===r,"invalid shape for mip images"),d(o.format===t.format&&o.internalformat===t.internalformat&&o.type===t.type,"incompatible type for mip image"),o.compressed||(o.data?(i=Math.ceil(_(o.type,u)*i/o.unpackAlignment)*o.unpackAlignment,d(o.data.byteLength===i*r,"invalid data for image, buffer size is inconsistent with image format")):o.element||o.copy)):e.genMipmaps||d(0==(t.mipmask&1<<c),"extra mipmap data");t.compressed&&d(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var o=e.width,i=e.height,a=e.channels;d(0<o&&o<=r.maxTextureSize&&0<i&&i<=r.maxTextureSize,"invalid texture shape"),d(o===i,"cube map must be square"),d(33071===t.wrapS&&33071===t.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var u=n[s];d(u.width===o&&u.height===i,"inconsistent cube map face shape"),t.genMipmaps&&(d(!u.compressed,"can not generate mipmap for compressed textures"),d(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=u.images,c=0;c<16;++c){var f,h,p=l[c];p&&(f=o>>c,h=i>>c,d(u.mipmask&1<<c,"missing mipmap data"),d(p.width===f&&p.height===h,"invalid shape for mip images"),d(p.format===e.format&&p.internalformat===e.internalformat&&p.type===e.type,"incompatible type for mip image"),p.compressed||(p.data?d(p.data.byteLength===f*h*Math.max(_(p.type,a),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):p.element||p.copy))}}}}),S=0;function i(e,t){this.id=S++,this.type=e,this.data=t}function O(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function P(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(1<t.length&&n===r&&('"'===n||"'"===n))return['"'+O(t.substr(1,t.length-2))+'"'];r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return e(t.substr(0,r.index)).concat(e(r[1])).concat(e(t.substr(r.index+r[0].length)));var o=t.split(".");if(1===o.length)return['"'+O(t)+'"'];for(var i=[],a=0;a<o.length;++a)i=i.concat(e(o[a]));return i}(e).join("][")+"]"}var Et={DynamicVariable:i,define:function(e,t){return new i(e,P(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof i},unbox:function n(e,r){return"function"==typeof e?new i(0,e):"number"==typeof e||"boolean"==typeof e?new i(5,e):Array.isArray(e)?new i(6,e.map(function(e,t){return n(e,r+"["+t+"]")})):e instanceof i?e:void Pt(!1,"invalid option type in uniform "+r)},accessor:P},Rt={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},Lt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function Nt(e){return"string"==typeof e?e.split():(Pt(Array.isArray(e),"invalid extension array"),e)}function Dt(e){return"string"==typeof e?(Pt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function Ze(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function E(e){var t,n=(65535<e)<<4;return(n|=t=(255<(e>>>=n))<<3)|(t=(15<(e>>>=t))<<2)|(t=(3<(e>>>=t))<<1)|e>>>t>>1}function e(){var n=Ze(8,function(){return[]});function r(e){var e=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(e),t=n[E(e)>>2];return 0<t.length?t.pop():new ArrayBuffer(e)}function t(e){n[E(e.byteLength)>>2].push(e)}return{alloc:r,free:t,allocType:function(e,t){var n=null;switch(e){case 5120:n=new Int8Array(r(t),0,t);break;case 5121:n=new Uint8Array(r(t),0,t);break;case 5122:n=new Int16Array(r(2*t),0,t);break;case 5123:n=new Uint16Array(r(2*t),0,t);break;case 5124:n=new Int32Array(r(4*t),0,t);break;case 5125:n=new Uint32Array(r(4*t),0,t);break;case 5126:n=new Float32Array(r(4*t),0,t);break;default:return null}return n.length!==t?n.subarray(0,t):n},freeType:function(e){t(e.buffer)}}}var kt=e();kt.zero=e();function Mt(e){return!!e&&"object"===Nn(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||Ot(e.data))}function jt(t){return Object.keys(t).map(function(e){return t[e]})}var $=function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},ee=function(e,t,n,r){var o=1;if(t.length)for(var i=0;i<t.length;++i)o*=t[i];else o=0;var a=r||kt.allocType(n,o);switch(t.length){case 0:break;case 1:for(var s=e,u=t[0],l=a,c=0;c<u;++c)l[c]=s[c];break;case 2:for(var f=e,h=t[0],p=t[1],d=a,y=0,g=0;g<h;++g)for(var v=f[g],m=0;m<p;++m)d[y++]=v[m];break;case 3:k(e,t[0],t[1],t[2],a,0);break;default:!function e(t,n,r,o,i){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var u=n[r];if(n.length-r==4)for(var l=n[r+1],c=n[r+2],f=n[r+3],s=0;s<u;++s)k(t[s],l,c,f,o,i),i+=a;else for(s=0;s<u;++s)e(t[s],n,r+1,o,i),i+=a}(e,t,0,a,0)}return a};function k(e,t,n,r,o,i){for(var a=i,s=0;s<t;++s)for(var u=e[s],l=0;l<n;++l)for(var c=u[l],f=0;f<r;++f)o[a++]=c[f]}var M={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ct={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Bt={dynamic:35048,stream:35040,static:35044},Ft=ee,Gt=$,Tt=[];function zt(e){return 0|M[Object.prototype.toString.call(e)]}function Ut(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function Vt(e,t,n,r,o,i,a){for(var s=0,u=0;u<n;++u)for(var l=0;l<r;++l)e[s++]=t[o*u+i*l+a]}Tt[5120]=1,Tt[5122]=2,Tt[5124]=4,Tt[5121]=1,Tt[5123]=2,Tt[5125]=4;var Wt={points:0,point:0,lines:1,line:1,triangles:Tt[5126]=4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},j=new Float32Array(1),C=new Uint32Array(j.buffer),T=5123;function te(e){for(var t,n,r,o=kt.allocType(T,e.length),i=0;i<e.length;++i)isNaN(e[i])?o[i]=65535:e[i]===1/0?o[i]=31744:e[i]===-1/0?o[i]=64512:(j[0]=e[i],t=(n=C[0])>>>31<<15,r=n>>13&1023,o[i]=(n=(n<<1>>>24)-127)<-24?t:n<-14?t+(1024+r>>-14-n):15<n?31744+t:t+(15+n<<10)+r);return o}function Ke(e){return Array.isArray(e)||Ot(e)}function ne(e){return!(e&e-1||!e)}var Z=3553,re=36193,oe=5126,ie=[9984,9986,9985,9987],ae=[0,6409,6410,6407,6408],K={};function A(e){return"[object "+e+"]"}K[6409]=K[6406]=K[6402]=1,K[34041]=K[6410]=2,K[6407]=K[35904]=3,K[6408]=K[35906]=4;var I=A("HTMLCanvasElement"),R=A("OffscreenCanvas"),se=A("CanvasRenderingContext2D"),ue=A("ImageBitmap"),le=A("HTMLImageElement"),ce=A("HTMLVideoElement"),L=Object.keys(M).concat([I,R,se,ue,le,ce]),N=[],l=(N[5121]=1,N[oe]=4,N[re]=2,N[5123]=2,N[5125]=4,[]);function fe(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function he(e){return!!Array.isArray(e)&&!(0===e.length||!Ke(e[0]))}function Q(e){return Object.prototype.toString.call(e)}function pe(e){return Q(e)===I}function de(e){return Q(e)===R}function ye(e){var t;if(e)return t=Q(e),0<=L.indexOf(t)||fe(e)||he(e)||Mt(e)}function ge(e){return 0|M[Object.prototype.toString.call(e)]}function ve(e,t){return kt.allocType(e.type===re?oe:e.type,t)}function me(e,t){e.type===re?(e.data=te(t),kt.freeType(t)):e.data=t}function be(e,t,n,r,o,i){var a=void 0!==l[e]?l[e]:K[e]*N[t];if(i&&(a*=6),o){for(var s=0,u=n;1<=u;)s+=a*u*u,u/=2;return s}return a*n*r}function Yt(d,a,j,y,C,l,p){var s={"don't care":4352,"dont care":4352,nice:4354,fast:4353},u={repeat:10497,clamp:33071,mirror:33648},c={nearest:9728,linear:9729},f=St({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},c),h={none:0,browser:37444},g={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},v={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},m={},i=(a.ext_srgb&&(v.srgb=35904,v.srgba=35906),a.oes_texture_float&&(g.float32=g.float=oe),a.oes_texture_half_float&&(g.float16=g["half float"]=re),a.webgl_depth_texture&&(St(v,{depth:6402,"depth stencil":34041}),St(g,{uint16:5123,uint32:5125,"depth stencil":34042})),a.webgl_compressed_texture_s3tc&&St(m,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),a.webgl_compressed_texture_atc&&St(m,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),a.webgl_compressed_texture_pvrtc&&St(m,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),a.webgl_compressed_texture_etc1&&(m["rgb etc1"]=36196),Array.prototype.slice.call(d.getParameter(34467))),e=(Object.keys(m).forEach(function(e){var t=m[e];0<=i.indexOf(t)&&(v[e]=t)}),Object.keys(v)),b=(j.textureFormats=e,[]),w=(Object.keys(v).forEach(function(e){var t=v[e];b[t]=e}),[]),_=(Object.keys(g).forEach(function(e){var t=g[e];w[t]=e}),[]),x=(Object.keys(c).forEach(function(e){var t=c[e];_[t]=e}),[]),S=(Object.keys(f).forEach(function(e){var t=f[e];x[t]=e}),[]),F=(Object.keys(u).forEach(function(e){var t=u[e];S[t]=e}),e.reduce(function(e,t){var n=v[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||a.ext_srgb&&(35904===n||35906===n)?e[n]=n:32855===n||0<=t.indexOf("rgba")?e[n]=6408:e[n]=6407,e},{}));function n(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function O(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function T(e,t){var n,r,o,i;"object"===Nn(t)&&t&&("premultiplyAlpha"in t&&(Pt.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(Pt.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(Pt.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(Pt.parameter(t.colorSpace,h,"invalid colorSpace"),e.colorSpace=h[t.colorSpace]),"type"in t&&(r=t.type,Pt(a.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),Pt(a.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Pt(a.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Pt.parameter(r,g,"invalid texture type"),e.type=g[r]),r=e.width,o=e.height,i=e.channels,n=!1,"shape"in t?(Pt(Array.isArray(t.shape)&&2<=t.shape.length,"shape must be an array"),r=t.shape[0],o=t.shape[1],3===t.shape.length&&(i=t.shape[2],Pt(0<i&&i<=4,"invalid number of channels"),n=!0),Pt(0<=r&&r<=j.maxTextureSize,"invalid width"),Pt(0<=o&&o<=j.maxTextureSize,"invalid height")):("radius"in t&&(r=o=t.radius,Pt(0<=r&&r<=j.maxTextureSize,"invalid radius")),"width"in t&&(r=t.width,Pt(0<=r&&r<=j.maxTextureSize,"invalid width")),"height"in t&&(o=t.height,Pt(0<=o&&o<=j.maxTextureSize,"invalid height")),"channels"in t&&(i=t.channels,Pt(0<i&&i<=4,"invalid number of channels"),n=!0)),e.width=0|r,e.height=0|o,e.channels=0|i,r=!1,"format"in t&&(o=t.format,Pt(a.webgl_depth_texture||!("depth"===o||"depth stencil"===o),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Pt.parameter(o,v,"invalid texture format"),i=e.internalformat=v[o],e.format=F[i],o in g&&("type"in t||(e.type=g[o])),o in m&&(e.compressed=!0),r=!0),!n&&r?e.channels=K[e.format]:n&&!r?e.channels!==ae[e.format]&&(e.format=e.internalformat=ae[e.channels]):r&&n&&Pt(e.channels===K[e.format],"number of channels inconsistent with specified format"))}function G(e){d.pixelStorei(37440,e.flipY),d.pixelStorei(37441,e.premultiplyAlpha),d.pixelStorei(37443,e.colorSpace),d.pixelStorei(3317,e.unpackAlignment)}function t(){n.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function P(e,t){var n=null;if(ye(t)?n=t:t&&(Pt.type(t,"object","invalid pixel data type"),T(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),ye(t.data))&&(n=t.data),Pt(!e.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),t.copy){Pt(!n,"can not specify copy and data field for the same texture");var r=C.viewportWidth,o=C.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||o-e.yOffset,e.needsCopy=!0,Pt(0<=e.xOffset&&e.xOffset<r&&0<=e.yOffset&&e.yOffset<o&&0<e.width&&e.width<=r&&0<e.height&&e.height<=o,"copy texture read out of bounds")}else if(n){if(Ot(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=ge(n));else if(fe(n)){e.channels=e.channels||4;{var i=e;var a=n;var s=a.length;switch(i.type){case 5121:case 5123:case 5125:case oe:var u=kt.allocType(i.type,s);u.set(a),i.data=u;break;case re:i.data=te(a);break;default:Pt.raise("unsupported texture type, must specify a typed array")}}e.alignment=1,e.needsFree=!0}else if(Mt(n)){r=n.data;Array.isArray(r)||5121!==e.type||(e.type=ge(r));var o=n.shape,t=n.stride,l=3===o.length?(P=o[2],t[2]):(Pt(2===o.length,"invalid ndarray pixel data, must be 2 or 3D"),P=1),c=o[0],o=o[1],f=t[0],t=t[1];e.alignment=1,e.width=c,e.height=o,e.channels=P,e.format=e.internalformat=ae[P],e.needsFree=!0;for(var c=e,h=r,p=f,d=t,y=l,g=n.offset,v=c.width,m=c.height,b=c.channels,w=ve(c,v*m*b),_=0,x=0;x<m;++x)for(var S=0;S<v;++S)for(var O=0;O<b;++O)w[_++]=h[p*S+d*x+y*O+g];me(c,w)}else if(pe(n)||de(n)||Q(n)===se)pe(n)||de(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Q(n)===ue)e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(Q(n)===le)e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(Q(n)===ce)e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(he(n)){for(var o=e.width||n[0].length,P=e.height||n.length,r=e.channels,r=Ke(n[0][0])?r||n[0][0].length:r||1,E=$(n),k=1,M=0;M<E.length;++M)k*=E[M];f=ve(e,k);ee(n,E,"",f),me(e,f),e.alignment=1,e.width=o,e.height=P,e.channels=r,e.format=e.internalformat=ae[r],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===oe?Pt(0<=j.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):e.type===re&&Pt(0<=j.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function z(e,t,n,r,o){var i=e.element,a=e.data,s=e.internalformat,u=e.format,l=e.type,c=e.width,f=e.height;G(e),i?d.texSubImage2D(t,o,n,r,u,l,i):e.compressed?d.compressedTexSubImage2D(t,o,n,r,s,c,f,a):e.needsCopy?(y(),d.copyTexSubImage2D(t,o,n,r,e.xOffset,e.yOffset,c,f)):d.texSubImage2D(t,o,n,r,c,f,u,l,a)}var U=[];function E(){return U.pop()||new t}function k(e){e.needsFree&&kt.freeType(e.data),t.call(e),U.push(e)}function M(e,t,n){var r=e.images[0]=E();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function A(e,t){var n=null;if(ye(t))O(n=e.images[0]=E(),e),P(n,t),e.mipmask=1;else if(T(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,o=0;o<r.length;++o)O(n=e.images[o]=E(),e),n.width>>=o,n.height>>=o,P(n,r[o]),e.mipmask|=1<<o;else O(n=e.images[0]=E(),e),P(n,t),e.mipmask=1;O(e,e.images[0]),!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==e.internalformat&&33779!==e.internalformat||Pt(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function V(e,t){for(var n,r,o,i,a,s,u,l,c,f,h=e.images,p=0;p<h.length;++p){if(!h[p])return;n=h[p],r=t,o=p,f=c=l=u=s=a=i=void 0,i=n.element,a=n.data,s=n.internalformat,u=n.format,l=n.type,c=n.width,f=n.height,G(n),i?d.texImage2D(r,o,u,u,l,i):n.compressed?d.compressedTexImage2D(r,o,s,c,f,0,a):n.needsCopy?(y(),d.copyTexImage2D(r,o,u,n.xOffset,n.yOffset,c,f,0)):d.texImage2D(r,o,u,c,f,0,u,l,a||null)}}var W=[];function Y(){var e=W.pop()||new function(){n.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};n.call(e);for(var t=e.mipmask=0;t<16;++t)e.images[t]=null;return e}function H(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&k(t[n]),t[n]=null;W.push(e)}function I(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function X(e,t){"min"in t&&(r=t.min,Pt.parameter(r,f),e.minFilter=f[r],0<=ie.indexOf(e.minFilter))&&!("faces"in t)&&(e.genMipmaps=!0),"mag"in t&&(r=t.mag,Pt.parameter(r,c),e.magFilter=c[r]);var n,r=e.wrapS,o=e.wrapT;if("wrap"in t?"string"==typeof(n=t.wrap)?(Pt.parameter(n,u),r=o=u[n]):Array.isArray(n)&&(Pt.parameter(n[0],u),Pt.parameter(n[1],u),r=u[n[0]],o=u[n[1]]):("wrapS"in t&&(n=t.wrapS,Pt.parameter(n,u),r=u[n]),"wrapT"in t&&(n=t.wrapT,Pt.parameter(n,u),o=u[n])),e.wrapS=r,e.wrapT=o,"anisotropic"in t&&(n=t.anisotropic,Pt("number"==typeof n&&1<=n&&n<=j.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic),"mipmap"in t){var i=!1;switch(Nn(t.mipmap)){case"string":Pt.parameter(t.mipmap,s,"invalid mipmap hint"),e.mipmapHint=s[t.mipmap],i=e.genMipmaps=!0;break;case"boolean":i=e.genMipmaps=t.mipmap;break;case"object":Pt(Array.isArray(t.mipmap),"invalid mipmap type"),i=!(e.genMipmaps=!1);break;default:Pt.raise("invalid mipmap type")}!i||"min"in t||(e.minFilter=9984)}}function R(e,t){d.texParameteri(t,10241,e.minFilter),d.texParameteri(t,10240,e.magFilter),d.texParameteri(t,10242,e.wrapS),d.texParameteri(t,10243,e.wrapT),a.ext_texture_filter_anisotropic&&d.texParameteri(t,34046,e.anisotropic),e.genMipmaps&&(d.hint(33170,e.mipmapHint),d.generateMipmap(t))}var q=0,L={},r=j.maxTextureUnits,o=Array(r).map(function(){return null});function N(e){n.call(this),this.mipmask=0,this.internalformat=6408,this.id=q++,this.refCount=1,this.target=e,this.texture=d.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new I,p.profile&&(this.stats={size:0})}function D(e){d.activeTexture(33984),d.bindTexture(e.target,e.texture)}function B(){var e=o[0];e?d.bindTexture(e.target,e.texture):d.bindTexture(Z,null)}function J(e){var t=e.texture,n=(Pt(t,"must not double destroy texture"),e.unit),r=e.target;0<=n&&(d.activeTexture(33984+n),d.bindTexture(r,null),o[n]=null),d.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete L[e.id],l.textureCount--}return St(N.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var t=0;t<r;++t){var n=o[t];if(n){if(0<n.bindCount)continue;n.unit=-1}o[t]=this,e=t;break}r<=e&&Pt.raise("insufficient number of texture units"),p.profile&&l.maxTextureUnits<e+1&&(l.maxTextureUnits=e+1),this.unit=e,d.activeTexture(33984+e),d.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){--this.refCount<=0&&J(this)}}),p.profile&&(l.getTotalTextureSize=function(){var t=0;return Object.keys(L).forEach(function(e){t+=L[e].stats.size}),t}),{create2D:function(e,t){var s=new N(Z);function u(e,t){var n=s.texInfo,r=(I.call(n),Y());return"number"==typeof e?M(r,0|e,"number"==typeof t?0|t:0|e):e?(Pt.type(e,"object","invalid arguments to regl.texture"),X(n,e),A(r,e)):M(r,1,1),n.genMipmaps&&(r.mipmask=(r.width<<1)-1),s.mipmask=r.mipmask,O(s,r),Pt.texture2D(n,r,j),s.internalformat=r.internalformat,u.width=r.width,u.height=r.height,D(s),V(r,Z),R(n,Z),B(),H(r),p.profile&&(s.stats.size=be(s.internalformat,s.type,r.width,r.height,n.genMipmaps,!1)),u.format=b[s.internalformat],u.type=w[s.type],u.mag=_[n.magFilter],u.min=x[n.minFilter],u.wrapS=S[n.wrapS],u.wrapT=S[n.wrapT],u}return L[s.id]=s,l.textureCount++,u(e,t),u.subimage=function(e,t,n,r){Pt(!!e,"must specify image data");var t=0|t,n=0|n,r=0|r,o=E();return O(o,s),o.width=0,o.height=0,P(o,e),o.width=o.width||(s.width>>r)-t,o.height=o.height||(s.height>>r)-n,Pt(s.type===o.type&&s.format===o.format&&s.internalformat===o.internalformat,"incompatible format for texture.subimage"),Pt(0<=t&&0<=n&&t+o.width<=s.width&&n+o.height<=s.height,"texture.subimage write out of bounds"),Pt(s.mipmask&1<<r,"missing mipmap data"),Pt(o.data||o.element||o.needsCopy,"missing image data"),D(s),z(o,Z,t,n,r),B(),k(o),u},u.resize=function(e,t){var n=0|e,r=0|t||n;if(n!==s.width||r!==s.height){u.width=s.width=n,u.height=s.height=r,D(s);for(var o=0;s.mipmask>>o;++o){var i=n>>o,a=r>>o;if(!i||!a)break;d.texImage2D(Z,o,s.format,i,a,0,s.format,s.type,null)}B(),p.profile&&(s.stats.size=be(s.internalformat,s.type,n,r,!1,!1))}return u},u._reglType="texture2d",u._texture=s,p.profile&&(u.stats=s.stats),u.destroy=function(){s.decRef()},u},createCube:function(e,t,n,r,o,i){var c=new N(34067),f=(L[c.id]=c,l.cubeCount++,new Array(6));function h(e,t,n,r,o,i){var a=c.texInfo;for(I.call(a),l=0;l<6;++l)f[l]=Y();if("number"!=typeof e&&e)if("object"===Nn(e))if(t)A(f[0],e),A(f[1],t),A(f[2],n),A(f[3],r),A(f[4],o),A(f[5],i);else if(X(a,e),T(c,e),"faces"in e){var s=e.faces;for(Pt(Array.isArray(s)&&6===s.length,"cube faces must be a length 6 array"),l=0;l<6;++l)Pt("object"===Nn(s[l])&&!!s[l],"invalid input for cube map face"),O(f[l],c),A(f[l],s[l])}else for(l=0;l<6;++l)A(f[l],e);else Pt.raise("invalid arguments to cube map");else for(var u=0|e||1,l=0;l<6;++l)M(f[l],u,u);for(O(c,f[0]),j.npotTextureCube||Pt(ne(c.width)&&ne(c.height),"your browser does not support non power or two texture dimensions"),a.genMipmaps?c.mipmask=(f[0].width<<1)-1:c.mipmask=f[0].mipmask,Pt.textureCube(c,a,f,j),c.internalformat=f[0].internalformat,h.width=f[0].width,h.height=f[0].height,D(c),l=0;l<6;++l)V(f[l],34069+l);for(R(a,34067),B(),p.profile&&(c.stats.size=be(c.internalformat,c.type,h.width,h.height,a.genMipmaps,!0)),h.format=b[c.internalformat],h.type=w[c.type],h.mag=_[a.magFilter],h.min=x[a.minFilter],h.wrapS=S[a.wrapS],h.wrapT=S[a.wrapT],l=0;l<6;++l)H(f[l]);return h}return h(e,t,n,r,o,i),h.subimage=function(e,t,n,r,o){Pt(!!t,"must specify image data"),Pt("number"==typeof e&&e===(0|e)&&0<=e&&e<6,"invalid face");var n=0|n,r=0|r,o=0|o,i=E();return O(i,c),i.width=0,i.height=0,P(i,t),i.width=i.width||(c.width>>o)-n,i.height=i.height||(c.height>>o)-r,Pt(c.type===i.type&&c.format===i.format&&c.internalformat===i.internalformat,"incompatible format for texture.subimage"),Pt(0<=n&&0<=r&&n+i.width<=c.width&&r+i.height<=c.height,"texture.subimage write out of bounds"),Pt(c.mipmask&1<<o,"missing mipmap data"),Pt(i.data||i.element||i.needsCopy,"missing image data"),D(c),z(i,34069+e,n,r,o),B(),k(i),h},h.resize=function(e){var t=0|e;if(t!==c.width){h.width=c.width=t,h.height=c.height=t,D(c);for(var n=0;n<6;++n)for(var r=0;c.mipmask>>r;++r)d.texImage2D(34069+n,r,c.format,t>>r,t>>r,0,c.format,c.type,null);return B(),p.profile&&(c.stats.size=be(c.internalformat,c.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=c,p.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h},clear:function(){for(var e=0;e<r;++e)d.activeTexture(33984+e),d.bindTexture(Z,null),o[e]=null;jt(L).forEach(J),l.cubeCount=0,l.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<r;++e){var t=o[e];t&&(t.bindCount=0,t.unit=-1,o[e]=null)}jt(L).forEach(function(e){e.texture=d.createTexture(),d.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===Z)d.texImage2D(Z,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)d.texImage2D(34069+n,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);R(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<r;++e){var t=o[e];t&&(t.bindCount=0,t.unit=-1,o[e]=null),d.activeTexture(33984+e),d.bindTexture(Z,null),d.bindTexture(34067,null)}}}}l[32854]=2,l[32855]=2,l[36194]=2,l[34041]=4,l[33776]=.5,l[33777]=.5,l[33778]=1,l[33779]=1,l[35986]=.5,l[35987]=1,l[34798]=1,l[35840]=.5,l[35841]=.25,l[35842]=.5,l[35843]=.25,l[36196]=.5;var At=36161,a=[];function Ht(e,t,n){return a[e]*t*n}a[32854]=2,a[32855]=2,a[36194]=2,a[33189]=2,a[36168]=1,a[34041]=4,a[35907]=4,a[34836]=16,a[34842]=8,a[34843]=6;var It=36160,Xt=[6407,6408],qt=[],Jt=(qt[6408]=4,qt[6407]=3,[]),Zt=(Jt[5121]=1,Jt[5126]=4,Jt[36193]=2,[32854,32855,36194,35907,34842,34843,34836]),Kt={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};function Qt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function $t(s,u,l,c,f,h,p){function r(e){null===u.next?(Pt(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),t=5121):(Pt(null!==u.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),t=u.next.colorAttachments[0].texture._texture.type,h.oes_texture_float?(Pt(5121===t||5126===t,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===t&&Pt(p.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Pt(5121===t,"Reading from a framebuffer is only allowed for the type 'uint8'"));var t,n=0,r=0,o=c.framebufferWidth,i=c.framebufferHeight,a=null,e=(Ot(e)?a=e:e&&(Pt.type(e,"object","invalid arguments to regl.read()"),n=0|e.x,r=0|e.y,Pt(0<=n&&n<c.framebufferWidth,"invalid x offset for regl.read"),Pt(0<=r&&r<c.framebufferHeight,"invalid y offset for regl.read"),o=0|(e.width||c.framebufferWidth-n),i=0|(e.height||c.framebufferHeight-r),a=e.data||null),a&&(5121===t?Pt(a instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===t&&Pt(a instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Pt(0<o&&o+n<=c.framebufferWidth,"invalid width for read pixels"),Pt(0<i&&i+r<=c.framebufferHeight,"invalid height for read pixels"),l(),o*i*4);return a||(5121===t?a=new Uint8Array(e):5126===t&&(a=a||new Float32Array(e))),Pt.isTypedArray(a,"data buffer for regl.read() must be a typedarray"),Pt(a.byteLength>=e,"data buffer for regl.read() too small"),s.pixelStorei(3333,4),s.readPixels(n,r,o,i,6408,t,a),a}return function(e){return e&&"framebuffer"in e?(t=e,u.setFBO({framebuffer:t.framebuffer},function(){n=r(t)}),n):r(e);var t,n}}function D(e){return Array.prototype.slice.call(e)}function B(e){return D(e).join("")}var lt="xyzw".split(""),F=0,G=1,z=2,U=3,V=4,W=5,Y=6,ct="blend.enable",ft="blend.color",ht="blend.equation",pt="blend.func",dt="depth.enable",yt="depth.func",gt="depth.range",vt="depth.mask",mt="colorMask",bt="cull.enable",wt="frontFace",_t="lineWidth",xt="polygonOffset.enable",en="polygonOffset.offset",tn="sample.alpha",nn="sample.enable",rn="sample.coverage",on="stencil.enable",an="stencil.mask",sn="stencil.func",un="stencil.opFront",ln="stencil.opBack",cn="scissor.enable",fn="scissor.box",Qe="viewport",hn="profile",$e="framebuffer",pn="vert",dn="frag",et="elements",tt="primitive",nt="count",yn="offset",gn="instances",vn=$e+"Width",mn=$e+"Height",bn=Qe+"Width",wn=Qe+"Height",_n="drawingBufferWidth",xn="drawingBufferHeight",Sn=[pt,ht,sn,un,ln,rn,Qe,fn,en],On=34962,rt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pn=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],En={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ot={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},kn={frag:35632,vert:35633},Mn={cw:2304,ccw:2305};function jn(e){return Array.isArray(e)||Ot(e)||Mt(e)}function Cn(e){return e.sort(function(e,t){return e===Qe||t!==Qe&&e<t?-1:1})}function it(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function at(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function st(e){return new it(!1,!1,!1,e)}function ut(e,t){var n,r=e.type;if(r===F)return new it(!0,1<=(n=e.data.length),2<=n,t);if(r===V)return new it((n=e.data).thisDep,n.contextDep,n.propDep,t);if(r===W)return new it(!1,!1,!1,t);if(r!==Y)return new it(r===U,r===z,r===G,t);for(var o=!1,i=!1,a=!1,s=0;s<e.data.length;++s){var u,l=e.data[s];l.type===G?a=!0:l.type===z?i=!0:l.type===U?o=!0:l.type===F?(o=!0,1<=(u=l.data)&&(i=!0),2<=u&&(a=!0)):l.type===V&&(o=o||l.data.thisDep,i=i||l.data.contextDep,a=a||l.data.propDep)}return new it(o,i,a,t)}var H=new it(!1,!1,!1,function(){});function Tn(e,Ee,ke,Me,je,Ce,r,Te,i,Ae,Ie,a,s,g,u){var Re=Ae.Record,Le={add:32774,subtract:32778,"reverse subtract":32779},Ne=(ke.ext_blend_minmax&&(Le.min=32775,Le.max=32776),ke.angle_instanced_arrays),l=ke.webgl_draw_buffers,v={dirty:!0,profile:u.profile},o={},De=[],p={},m={};function Be(e){return e.replace(".","_")}function t(e,t,n){var r=Be(e);De.push(e),o[r]=v[r]=!!n,p[r]=t}function n(e,t,n){var r=Be(e);De.push(e),Array.isArray(n)?(v[r]=n.slice(),o[r]=n.slice()):v[r]=o[r]=n,m[r]=t}t("dither",3024),t(ct,3042),n(ft,"blendColor",[0,0,0,0]),n(ht,"blendEquationSeparate",[32774,32774]),n(pt,"blendFuncSeparate",[1,0,1,0]),t(dt,2929,!0),n(yt,"depthFunc",513),n(gt,"depthRange",[0,1]),n(vt,"depthMask",!0),n(mt,mt,[!0,!0,!0,!0]),t(bt,2884),n("cull.face","cullFace",1029),n(wt,wt,2305),n(_t,_t,1),t(xt,32823),n(en,"polygonOffset",[0,0]),t(tn,32926),t(nn,32928),n(rn,"sampleCoverage",[1,!1]),t(on,2960),n(an,"stencilMask",-1),n(sn,"stencilFunc",[519,0,-1]),n(un,"stencilOpSeparate",[1028,7680,7680,7680]),n(ln,"stencilOpSeparate",[1029,7680,7680,7680]),t(cn,3089),n(fn,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),n(Qe,Qe,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var b={gl:e,context:s,strings:Ee,next:o,current:v,draw:a,elements:Ce,buffer:je,shader:Ie,attributes:Ae.state,vao:Ae,uniforms:i,framebuffer:Te,extensions:ke,timer:g,isBufferArgs:jn},w={primTypes:Wt,compareFuncs:En,blendFuncs:rt,blendEquations:Le,stencilOps:ot,glTypes:Ct,orientationType:Mn},_=(Pt.optional(function(){b.isArrayLike=Ke}),l&&(w.backBuffer=[1029],w.drawBuffer=Ze(Me.maxDrawbuffers,function(e){return 0===e?[0]:Ze(e,function(e){return 36064+e})})),0);function Fe(){r=0,o=[],i=[],n=l(),s={};var r,o,i,n,s,a={global:n,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return o[t];var n="g"+r++;return o.push(n),i.push(e),n},block:l,proc:function(e,t){var n=[];function r(){var e="a"+n.length;return n.push(e),e}t=t||0;for(var o=0;o<t;++o)r();var i=c(),a=i.toString;return s[e]=St(i,{arg:r,toString:function(){return B(["function(",n.join(),"){",a(),"}"])}})},scope:c,cond:function(){var t=B(arguments),e=c(),n=c(),r=e.toString,o=n.toString;return St(e,{then:function(){return e.apply(e,D(arguments)),this},else:function(){return n.apply(n,D(arguments)),this},toString:function(){var e=(e=o())&&"else{"+e+"}";return B(["if(",t,"){",r(),"}",e])}})},compile:function(){var t=['"use strict";',n,"return {"],e=(Object.keys(s).forEach(function(e){t.push('"',e,'":',s[e].toString(),",")}),t.push("}"),B(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"));return Function.apply(null,o.concat(e)).apply(null,i)}},u=a.link,t=a.global;function l(){var t=[],n=[];return St(function(){t.push.apply(t,D(arguments))},{def:function(){var e="v"+r++;return n.push(e),0<arguments.length&&(t.push(e,"="),t.push.apply(t,D(arguments)),t.push(";")),e},toString:function(){return B([0<n.length?"var "+n.join(",")+";":"",B(t)])}})}function c(){var r=l(),n=l(),e=r.toString,t=n.toString;function o(e,t){n(e,t,"=",r.def(e,t),";")}return St(function(){r.apply(r,D(arguments))},{def:r.def,entry:r,exit:n,save:o,set:function(e,t,n){o(e,t),r(e,t,"=",n,";")},toString:function(){return e()+t()}})}a.id=_++,a.batchId="0";var f=u(b),h=a.shared={props:"a0"},p=(Object.keys(b).forEach(function(e){h[e]=t.def(f,".",e)}),Pt.optional(function(){a.CHECK=u(Pt),a.commandStr=Pt.guessCommand(),a.command=u(a.commandStr),a.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",u(n),",",this.command,");")},w.invalidBlendCombinations=Pn}),a.next={}),d=a.current={},y=(Object.keys(m).forEach(function(e){Array.isArray(v[e])&&(p[e]=t.def(h.next,".",e),d[e]=t.def(h.current,".",e))}),a.constants={}),g=(Object.keys(w).forEach(function(e){y[e]=t.def(JSON.stringify(w[e]))}),a.invoke=function(t,e){switch(e.type){case F:var n=["this",h.context,h.props,a.batchId];return t.def(u(e.data),".call(",n.slice(0,Math.max(e.data.length+1,4)),")");case G:return t.def(h.props,e.data);case z:return t.def(h.context,e.data);case U:return t.def("this",e.data);case V:return e.data.append(a,t),e.data.ref;case W:return e.data.toString();case Y:return e.data.map(function(e){return a.invoke(t,e)})}},a.attribCache={},{});return a.scopeAttrib=function(e){var t,e=Ee.id(e);return e in g?g[e]:(t=(t=Ae.scope[e])||(Ae.scope[e]=new Re),g[e]=u(t))},a}function Ge(n,r,o){var i=n.shared.context,a=n.scope();Object.keys(o).forEach(function(e){r.save(i,"."+e);var t=o[e].append(n,r);Array.isArray(t)?a(i,".",e,"=[",t.join(),"];"):a(i,".",e,"=",t,";")}),r(a)}function ze(e,t,n,r){var o,i=e.shared,a=i.gl,s=i.framebuffer;l&&(o=t.def(i.extensions,".webgl_draw_buffers"));var i=e.constants,u=i.drawBuffer,i=i.backBuffer,n=n?n.append(e,t):t.def(s,".next");r||t("if(",n,"!==",s,".cur){"),t("if(",n,"){",a,".bindFramebuffer(",36160,",",n,".framebuffer);"),l&&t(o,".drawBuffersWEBGL(",u,"[",n,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",36160,",null);"),l&&t(o,".drawBuffersWEBGL(",i,");"),t("}",s,".cur=",n,";"),r||t("}")}function Ue(o,e,i){var t=o.shared,a=t.gl,s=o.current,u=o.next,l=t.current,c=t.next,f=o.cond(l,".dirty");De.forEach(function(e){var t,n,r,e=Be(e);e in i.state||(e in u?(t=u[e],n=s[e],r=Ze(v[e].length,function(e){return f.def(t,"[",e,"]")}),f(o.cond(r.map(function(e,t){return e+"!=="+n+"["+t+"]"}).join("||")).then(a,".",m[e],"(",r,");",r.map(function(e,t){return n+"["+t+"]="+e}).join(";"),";"))):(t=f.def(c,".",e),r=o.cond(t,"!==",l,".",e),f(r),e in p?r(o.cond(t).then(a,".enable(",p[e],");").else(a,".disable(",p[e],");"),l,".",e,"=",t,";"):r(a,".",m[e],"(",t,");",l,".",e,"=",t,";")))}),0===Object.keys(i.state).length&&f(l,".dirty=false;"),e(f)}function Ve(i,a,s,u){var e=i.shared,l=i.current,c=e.current,f=e.gl;Cn(Object.keys(s)).forEach(function(e){var t,n,r,o=s[e];u&&!u(o)||(t=o.append(i,a),p[e]?(n=p[e],at(o)?a(f,t?".enable(":".disable(",n,");"):a(i.cond(t).then(f,".enable(",n,");").else(f,".disable(",n,");")),a(c,".",e,"=",t,";")):Ke(t)?(r=l[e],a(f,".",m[e],"(",t,");",t.map(function(e,t){return r+"["+t+"]="+e}).join(";"),";")):a(f,".",m[e],"(",t,");",c,".",e,"=",t,";"))})}function We(e,t){Ne&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function Ye(e,n,t,r,o){var i,a,s,u=e.shared,l=e.stats,c=u.current,f=u.timer,u=t.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(e){e(i=n.def(),"=",h(),";"),"string"==typeof o?e(l,".count+=",o,";"):e(l,".count++;"),g&&(r?e(a=n.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",l,");"))}function d(e){e(l,".cpuTime+=",h(),"-",i,";"),g&&(r?e(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",l,");"):e(f,".endQuery();"))}function y(e){var t=n.def(c,".profile");n(c,".profile=",e,";"),n.exit(c,".profile=",t,";")}if(u){if(at(u))return u.enable?(p(n),d(n.exit),y("true")):y("false");y(s=u.append(e,n))}else s=n.def(c,".profile");t=e.block(),p(t),n("if(",s,"){",t,"}"),u=e.block();d(u),n.exit("if(",s,"){",u,"}")}function f(y,g,v,e,m){var b=y.shared;e.forEach(function(e){var t,n,r,o,i,a,s,u,l,c=e.name,f=v.attributes[c];if(f){if(!m(f))return;t=f.append(y,g)}else{if(!m(H))return;var h=y.scopeAttrib(c);Pt.optional(function(){y.assert(g,h+".state","missing attribute "+c)}),t={},Object.keys(new Re).forEach(function(e){t[e]=g.def(h,".",e)})}function p(){g("if(!",a,".buffer){",o,".enableVertexAttribArray(",i,");}");var e=r.type,t=r.size?g.def(r.size,"||",n):n;g("if(",a,".type!==",e,"||",a,".size!==",t,"||",l.map(function(e){return a+"."+e+"!=="+r[e]}).join("||"),"){",o,".bindBuffer(",On,",",s,".buffer);",o,".vertexAttribPointer(",[i,t,e,r.normalized,r.stride,r.offset],");",a,".type=",e,";",a,".size=",t,";",l.map(function(e){return a+"."+e+"="+r[e]+";"}).join(""),"}"),Ne&&(e=r.divisor,g("if(",a,".divisor!==",e,"){",y.instancing,".vertexAttribDivisorANGLE(",[i,e],");",a,".divisor=",e,";}"))}function d(){g("if(",a,".buffer){",o,".disableVertexAttribArray(",i,");",a,".buffer=null;","}if(",lt.map(function(e,t){return a+"."+e+"!=="+u[t]}).join("||"),"){",o,".vertexAttrib4f(",i,",",u,");",lt.map(function(e,t){return a+"."+e+"="+u[t]+";"}).join(""),"}")}f=y.link(e),n=function(){switch(e.info.type){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(),r=t,o=b.gl,i=g.def(f,".location"),a=g.def(b.attributes,"[",i,"]"),f=r.state,s=r.buffer,u=[r.x,r.y,r.z,r.w],l=["buffer","normalized","offset","stride"],1===f?p():2===f?d():(g("if(",f,"===",1,"){"),p(),g("}else{"),d(),g("}"))})}function h(o,i,e,t,n){for(var r,a=o.shared,s=a.gl,u=0;u<t.length;++u){var l,c=t[u],f=c.name,h=c.info.type,p=e.uniforms[f],d=o.link(c)+".location";if(p){if(!n(p))continue;if(at(p)){var y=p.value;if(Pt.command(null!=y,'missing uniform "'+f+'"',o.commandStr),35678===h||35680===h){Pt.command("function"==typeof y&&(35678===h&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||35680===h&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+f,o.commandStr);c=o.link(y._texture||y.color[0]._texture);i(s,".uniform1i(",d,",",c+".bind());"),i.exit(c,".unbind();")}else if(35674===h||35675===h||35676===h){Pt.optional(function(){Pt.command(Ke(y),"invalid matrix for uniform "+f,o.commandStr),Pt.command(35674===h&&4===y.length||35675===h&&9===y.length||35676===h&&16===y.length,"invalid length for matrix uniform "+f,o.commandStr)});var c=o.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),g=2;35675===h?g=3:35676===h&&(g=4),i(s,".uniformMatrix",g,"fv(",d,",false,",c,");")}else{switch(h){case 5126:Pt.commandType(y,"number","uniform "+f,o.commandStr),r="1f";break;case 35664:Pt.command(Ke(y)&&2===y.length,"uniform "+f,o.commandStr),r="2f";break;case 35665:Pt.command(Ke(y)&&3===y.length,"uniform "+f,o.commandStr),r="3f";break;case 35666:Pt.command(Ke(y)&&4===y.length,"uniform "+f,o.commandStr),r="4f";break;case 35670:Pt.commandType(y,"boolean","uniform "+f,o.commandStr),r="1i";break;case 5124:Pt.commandType(y,"number","uniform "+f,o.commandStr),r="1i";break;case 35671:case 35667:Pt.command(Ke(y)&&2===y.length,"uniform "+f,o.commandStr),r="2i";break;case 35672:case 35668:Pt.command(Ke(y)&&3===y.length,"uniform "+f,o.commandStr),r="3i";break;case 35673:case 35669:Pt.command(Ke(y)&&4===y.length,"uniform "+f,o.commandStr),r="4i"}i(s,".uniform",r,"(",d,",",Ke(y)?Array.prototype.slice.call(y):y,");")}continue}l=p.append(o,i)}else{if(!n(H))continue;l=i.def(a.uniforms,"[",Ee.id(f),"]")}35678===h?(Pt(!Array.isArray(l),"must specify a scalar prop for textures"),i("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}")):35680===h&&(Pt(!Array.isArray(l),"must specify a scalar prop for cube maps"),i("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}")),Pt.optional(function(){function t(e,t){o.assert(i,e,'bad data or missing for uniform "'+f+'".  '+t)}function e(e){Pt(!Array.isArray(l),"must not specify an array type for uniform"),t("typeof "+l+'==="'+e+'"',"invalid type, expected "+e)}function n(e){Array.isArray(l)?Pt(l.length===e,"must have length "+e):t(a.isArrayLike+"("+l+")&&"+l+".length==="+e,"invalid vector, should have length "+e,o.commandStr)}function r(e){Pt(!Array.isArray(l),"must not specify a value type"),t("typeof "+l+'==="function"&&'+l+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",o.commandStr)}switch(h){case 5124:e("number");break;case 35667:n(2);break;case 35668:n(3);break;case 35669:n(4);break;case 5126:e("number");break;case 35664:n(2);break;case 35665:n(3);break;case 35666:n(4);break;case 35670:e("boolean");break;case 35671:n(2);break;case 35672:n(3);break;case 35673:case 35674:n(4);break;case 35675:n(9);break;case 35676:n(16);break;case 35678:r(3553);break;case 35680:r(34067)}});var v,m=1;switch(h){case 35678:case 35680:var b=i.def(l,"._texture");i(s,".uniform1i(",d,",",b,".bind());"),i.exit(b,".unbind();");continue;case 5124:case 35670:r="1i";break;case 35667:case 35671:r="2i",m=2;break;case 35668:case 35672:r="3i",m=3;break;case 35669:case 35673:r="4i",m=4;break;case 5126:r="1f";break;case 35664:r="2f",m=2;break;case 35665:r="3f",m=3;break;case 35666:r="4f",m=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";break;case 35676:r="Matrix4fv"}i(s,".uniform",r,"(",d,","),"M"===r.charAt(0)?(g=Math.pow(h-35674+2,2),v=o.global.def("new Float32Array(",g,")"),Array.isArray(l)?i("false,(",Ze(g,function(e){return v+"["+e+"]="+l[e]}),",",v,")"):i("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",Ze(g,function(e){return v+"["+e+"]="+l+"["+e+"]"}),",",v,")")):1<m?i(Ze(m,function(e){return Array.isArray(l)?l[e]:l+"["+e+"]"})):(Pt(!Array.isArray(l),"uniform value must not be an array"),i(l)),i(");")}}function d(n,r,o,i){var e,t=n.shared,a=t.gl,s=t.draw,u=i.draw,l=(t=u.elements,e=r,(t=t?((t.contextDep&&i.contextDynamic||t.propDep)&&(e=o),t.append(n,e)):e.def(s,".",et))&&e("if("+t+")"+a+".bindBuffer(34963,"+t+".buffer.buffer);"),t);function c(e){var t=u[e];return t?t.contextDep&&i.contextDynamic||t.propDep?t.append(n,o):t.append(n,r):r.def(s,".",e)}var f,h,p,d,y,g=c(tt),v=c(yn),m=(d=u.count,y=r,d?((d.contextDep&&i.contextDynamic||d.propDep)&&(y=o),p=d.append(n,y),Pt.optional(function(){d.MISSING&&n.assert(r,"false","missing vertex count"),d.DYNAMIC&&n.assert(y,p+">=0","missing vertex count")})):(p=y.def(s,".",nt),Pt.optional(function(){n.assert(y,p+">=0","missing vertex count")})),p);if("number"==typeof m){if(0===m)return}else o("if(",m,"){"),o.exit("}");Ne&&(f=c(gn),h=n.instancing);var b=l+".type",w=u.elements&&at(u.elements);function _(){function e(){o(h,".drawElementsInstancedANGLE(",[g,m,b,v+"<<(("+b+"-5121)>>1)",f],");")}function t(){o(h,".drawArraysInstancedANGLE(",[g,v,m,f],");")}l?w?e():(o("if(",l,"){"),e(),o("}else{"),t(),o("}")):t()}function x(){function e(){o(a+".drawElements("+[g,m,b,v+"<<(("+b+"-5121)>>1)"]+");")}function t(){o(a+".drawArrays("+[g,v,m]+");")}l?w?e():(o("if(",l,"){"),e(),o("}else{"),t(),o("}")):t()}Ne&&("number"!=typeof f||0<=f)?"string"==typeof f?(o("if(",f,">0){"),_(),o("}else if(",f,"<0){"),x(),o("}")):_():x()}function He(e,t,n,r,o){var i=Fe(),o=i.proc("body",o);return Pt.optional(function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr)}),Ne&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays")),e(i,o,n,r),i.compile().body}function qe(e,t,n,r){We(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),f(e,t,n,r.attributes,function(){return 1})),h(e,t,n,r.uniforms,function(){return 1}),d(e,t,t,n)}function y(e,t,n,r){function o(){return!0}e.batchId="a1",We(e,t),f(e,t,n,r.attributes,o),h(e,t,n,r.uniforms,o),d(e,t,t,n)}function Xe(t,e,n,r){We(t,e);var o=n.contextDep,i=e.def(),a=e.def(),s=(t.shared.props=a,t.batchId=i,t.scope()),u=t.scope();function l(e){return e.contextDep&&o||e.propDep}function c(e){return!l(e)}e(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",u,"}",s.exit),n.needsContext&&Ge(t,u,n.context),n.needsFramebuffer&&ze(t,u,n.framebuffer),Ve(t,u,n.state,l),n.profile&&l(n.profile)&&Ye(t,u,n,!1,!0),r?(n.useVAO?n.drawVAO?l(n.drawVAO)?u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):s(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(s(t.shared.vao,".setVAO(null);"),f(t,s,n,r.attributes,c),f(t,u,n,r.attributes,l)),h(t,s,n,r.uniforms,c),h(t,u,n,r.uniforms,l),d(t,s,u,n)):(e=t.global.def("{}"),a=n.shader.progVar.append(t,u),r=u.def(a,".id"),s=u.def(e,"[",r,"]"),u(t.shared.gl,".useProgram(",a,".program);","if(!",s,"){",s,"=",e,"[",r,"]=",t.link(function(e){return He(y,t,n,e,2)}),"(",a,");}",s,".call(this,a0[",i,"],",i,");"))}function Je(r,e,t){var o,i,a,s,u,l,c=e.static[t];c&&function(e){if("object"===Nn(e)&&!Ke(e))for(var t=Object.keys(e),n=0;n<t.length;++n)if(Et.isDynamic(e[t[n]]))return 1}(c)&&(o=r.global,i=Object.keys(c),u=s=a=!1,l=r.global.def("{}"),i.forEach(function(e){var t=c[e];if(Et.isDynamic(t)){var n=ut(t="function"==typeof t?c[e]=Et.unbox(t):t,null);a=a||n.thisDep,u=u||n.propDep,s=s||n.contextDep}else{switch(o(l,".",e,"="),Nn(t)){case"number":o(t);break;case"string":o('"',t,'"');break;case"object":Array.isArray(t)&&o("[",t.join(),"]");break;default:o(r.link(t))}o(";")}}),e.dynamic[t]=new Et.DynamicVariable(V,{thisDep:a,contextDep:s,propDep:u,ref:l,append:function(n,r){i.forEach(function(e){var t=c[e];Et.isDynamic(t)&&(t=n.invoke(r,t),r(l,".",e,"=",t,";"))})}}),delete e.static[t])}return{next:o,current:v,procs:function(){var a=Fe(),s=a.proc("poll"),u=a.proc("refresh"),l=a.block();s(l),u(l);var e,t=a.shared,c=t.gl,f=t.next,h=t.current;l(h,".dirty=false;"),ze(a,s),ze(a,u,null,!0),Ne&&(e=a.link(Ne)),ke.oes_vertex_array_object&&u(a.link(ke.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<Me.maxAttributes;++n){var r=u.def(t.attributes,"[",n,"]"),o=a.cond(r,".buffer");o.then(c,".enableVertexAttribArray(",n,");",c,".bindBuffer(",On,",",r,".buffer.buffer);",c,".vertexAttribPointer(",n,",",r,".size,",r,".type,",r,".normalized,",r,".stride,",r,".offset);").else(c,".disableVertexAttribArray(",n,");",c,".vertexAttrib4f(",n,",",r,".x,",r,".y,",r,".z,",r,".w);",r,".buffer=null;"),u(o),Ne&&u(e,".vertexAttribDivisorANGLE(",n,",",r,".divisor);")}return u(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"),Object.keys(p).forEach(function(e){var t=p[e],n=l.def(f,".",e),r=a.block();r("if(",n,"){",c,".enable(",t,")}else{",c,".disable(",t,")}",h,".",e,"=",n,";"),u(r),s("if(",n,"!==",h,".",e,"){",r,"}")}),Object.keys(m).forEach(function(e){var t,n,r=m[e],o=v[e],i=a.block();i(c,".",r,"("),Ke(o)?(r=o.length,t=a.global.def(f,".",e),n=a.global.def(h,".",e),i(Ze(r,function(e){return t+"["+e+"]"}),");",Ze(r,function(e){return n+"["+e+"]="+t+"["+e+"];"}).join("")),s("if(",Ze(r,function(e){return t+"["+e+"]!=="+n+"["+e+"]"}).join("||"),"){",i,"}")):(t=l.def(f,".",e),n=l.def(h,".",e),i(t,");",h,".",e,"=",t,";"),s("if(",t,"!==",n,"){",i,"}")),u(i)}),a.compile()}(),compile:function(N,D,e,t,n){var a,r,o,B,F,i,s,u,c,G,z,f,l,h,U,p,d,y,V,W,Y,H,X,q,g,v,J,Z,K,Q,m,$,ee,te,ne,re,oe,ie,b,ae,se,ue,le,ce,fe,he,w,pe,de,ye,_,ge,ve,me,x,S,O,P,E,k,M,j,C,T,A,I,R,L=Fe(),be=(L.stats=L.link(n),Object.keys(D.static).forEach(function(e){Je(L,D,e)}),Sn.forEach(function(e){Je(L,N,e)}),r=D,n=e,e=t,o=L,ee=(a=N).static,te=a.dynamic,Pt.optional(function(){var t=[$e,pn,dn,et,tt,yn,nt,gn,hn,"vao"].concat(De);function e(e){Object.keys(e).forEach(function(e){Pt.command(0<=t.indexOf(e),'unknown parameter "'+e+'"',o.commandStr)})}e(ee),e(te)}),t=function(e){var t=a.static;if("string"==typeof t.frag&&"string"==typeof t.vert){if(0<Object.keys(e.dynamic).length)return null;var n=e.static,r=Object.keys(n);if(0<r.length&&"number"==typeof n[r[0]]){for(var o=[],i=0;i<r.length;++i)Pt("number"==typeof n[r[i]],"must specify all vertex attribute locations when using vaos"),o.push([0|n[r[i]],r[i]]);return o}}return null}(r),O=a.static,R=a.dynamic,O=$e in O?(m=O[$e])?(m=Te.getFramebuffer(m),Pt.command(m,"invalid framebuffer object"),st(function(e,t){var n=e.link(m),e=e.shared,e=(t.set(e.framebuffer,".next",n),e.context);return t.set(e,"."+vn,n+".width"),t.set(e,"."+mn,n+".height"),n})):st(function(e,t){e=e.shared,t.set(e.framebuffer,".next","null"),e=e.context;return t.set(e,"."+vn,e+"."+_n),t.set(e,"."+mn,e+"."+xn),"null"}):$e in R?ut($=R[$e],function(e,t){var n=e.invoke(t,$),r=e.shared,o=r.framebuffer,i=t.def(o,".getFramebuffer(",n,")"),o=(Pt.optional(function(){e.assert(t,"!"+n+"||"+i,"invalid framebuffer object")}),t.set(o,".next",i),r.context);return t.set(o,"."+vn,i+"?"+i+".width:"+o+"."+_n),t.set(o,"."+mn,i+"?"+i+".height:"+o+"."+xn),i}):null,v=O,J=o,Z=a.static,K=a.dynamic,ne={viewport:R=(R=xe(Qe))?new it((Q=R).thisDep,R.contextDep,R.propDep,function(e,t){var n=Q.append(e,t),e=e.shared.context;return t.set(e,"."+bn,n[2]),t.set(e,"."+wn,n[3]),n}):R,scissor_box:xe(fn)},l=o,p=a.static,d=a.dynamic,y=et in p?(jn(h=p[et])?h=Ce.getElements(Ce.create(h,!0)):h&&(h=Ce.getElements(h),Pt.command(h,"invalid elements",l.commandStr)),(g=st(function(e,t){var n;return h?(n=e.link(h),e.ELEMENTS=n):e.ELEMENTS=null})).value=h,g):et in d?ut(U=d[et],function(e,t){var n=e.shared,r=n.isBufferArgs,n=n.elements,o=e.invoke(t,U),i=t.def("null"),r=t.def(r,"(",o,")"),a=e.cond(r).then(i,"=",n,".createStream(",o,");").else(i,"=",n,".getElements(",o,");");return Pt.optional(function(){e.assert(a.else,"!"+o+"||"+i,"invalid elements")}),t.entry(a),t.exit(e.cond(r).then(n,".destroyStream(",i,");")),e.ELEMENTS=i}):null,g=_e(yn,!0),R={elements:y,primitive:tt in p?(X=p[tt],Pt.commandParameter(X,Wt,"invalid primitve",l.commandStr),st(function(e,t){return Wt[X]})):tt in d?ut(q=d[tt],function(e,t){var n=e.constants.primTypes,r=e.invoke(t,q);return Pt.optional(function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Wt))}),t.def(n,"[",r,"]")}):y?at(y)?y.value?st(function(e,t){return t.def(e.ELEMENTS,".primType")}):st(function(){return 4}):new it(y.thisDep,y.contextDep,y.propDep,function(e,t){e=e.ELEMENTS;return t.def(e,"?",e,".primType:",4)}):null,count:nt in p?(V=0|p[nt],Pt.command("number"==typeof V&&0<=V,"invalid vertex count",l.commandStr),st(function(){return V})):nt in d?ut(W=d[nt],function(e,t){var n=e.invoke(t,W);return Pt.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n}):y?at(y)?y?g?new it(g.thisDep,g.contextDep,g.propDep,function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return Pt.optional(function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")}),n}):st(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):(Y=st(function(){return-1}),Pt.optional(function(){Y.MISSING=!0}),Y):(H=new it(y.thisDep||g.thisDep,y.contextDep||g.contextDep,y.propDep||g.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}),Pt.optional(function(){H.DYNAMIC=!0}),H):null,instances:_e(gn,!1),offset:g},c=o,G=a.static,z=a.dynamic,f={},De.forEach(function(l){var o=Be(l);function e(e,n){var t,r;l in G?(t=e(G[l]),f[o]=st(function(){return t})):l in z&&(r=z[l],f[o]=ut(r,function(e,t){return n(e,t,e.invoke(t,r))}))}switch(l){case bt:case ct:case"dither":case on:case dt:case cn:case xt:case tn:case nn:case vt:return e(function(e){return Pt.commandType(e,"boolean",l,c.commandStr),e},function(e,t,n){return Pt.optional(function(){e.assert(t,"typeof "+n+'==="boolean"',"invalid flag "+l,e.commandStr)}),n});case yt:return e(function(e){return Pt.commandParameter(e,En,"invalid "+l,c.commandStr),En[e]},function(e,t,n){var r=e.constants.compareFuncs;return Pt.optional(function(){e.assert(t,n+" in "+r,"invalid "+l+", must be one of "+Object.keys(En))}),t.def(r,"[",n,"]")});case gt:return e(function(e){return Pt.command(Ke(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",c.commandStr),e},function(e,t,n){return Pt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]});case pt:return e(function(e){Pt.commandType(e,"object","blend.func",c.commandStr);var t="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,r="dstRGB"in e?e.dstRGB:e.dst,e="dstAlpha"in e?e.dstAlpha:e.dst;return Pt.commandParameter(t,rt,o+".srcRGB",c.commandStr),Pt.commandParameter(n,rt,o+".srcAlpha",c.commandStr),Pt.commandParameter(r,rt,o+".dstRGB",c.commandStr),Pt.commandParameter(e,rt,o+".dstAlpha",c.commandStr),Pt.command(-1===Pn.indexOf(t+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+t+", "+r+")",c.commandStr),[rt[t],rt[r],rt[n],rt[e]]},function(r,o,i){var a=r.constants.blendFuncs;function e(e,t){var n=o.def('"',e,t,'" in ',i,"?",i,".",e,t,":",i,".",e);return Pt.optional(function(){r.assert(o,n+" in "+a,"invalid "+l+"."+e+t+", must be one of "+Object.keys(rt))}),n}Pt.optional(function(){r.assert(o,i+"&&typeof "+i+'==="object"',"invalid blend func, must be an object")});var t=e("src","RGB"),n=e("dst","RGB"),s=(Pt.optional(function(){var e=r.constants.invalidBlendCombinations;r.assert(o,e+".indexOf("+t+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}),o.def(a,"[",t,"]")),u=o.def(a,"[",e("src","Alpha"),"]");return[s,o.def(a,"[",n,"]"),u,o.def(a,"[",e("dst","Alpha"),"]")]});case ht:return e(function(e){return"string"==typeof e?(Pt.commandParameter(e,Le,"invalid "+l,c.commandStr),[Le[e],Le[e]]):"object"===Nn(e)?(Pt.commandParameter(e.rgb,Le,l+".rgb",c.commandStr),Pt.commandParameter(e.alpha,Le,l+".alpha",c.commandStr),[Le[e.rgb],Le[e.alpha]]):void Pt.commandRaise("invalid blend.equation",c.commandStr)},function(r,e,t){var o=r.constants.blendEquations,n=e.def(),i=e.def(),a=r.cond("typeof ",t,'==="string"');return Pt.optional(function(){function e(e,t,n){r.assert(e,n+" in "+o,"invalid "+t+", must be one of "+Object.keys(Le))}e(a.then,l,t),r.assert(a.else,t+"&&typeof "+t+'==="object"',"invalid "+l),e(a.else,l+".rgb",t+".rgb"),e(a.else,l+".alpha",t+".alpha")}),a.then(n,"=",i,"=",o,"[",t,"];"),a.else(n,"=",o,"[",t,".rgb];",i,"=",o,"[",t,".alpha];"),e(a),[n,i]});case ft:return e(function(t){return Pt.command(Ke(t)&&4===t.length,"blend.color must be a 4d array",c.commandStr),Ze(4,function(e){return+t[e]})},function(e,t,n){return Pt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),Ze(4,function(e){return t.def("+",n,"[",e,"]")})});case an:return e(function(e){return Pt.commandType(e,"number",o,c.commandStr),0|e},function(e,t,n){return Pt.optional(function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")}),t.def(n,"|0")});case sn:return e(function(e){Pt.commandType(e,"object",o,c.commandStr);var t=e.cmp||"keep",n=e.ref||0,e="mask"in e?e.mask:-1;return Pt.commandParameter(t,En,l+".cmp",c.commandStr),Pt.commandType(n,"number",l+".ref",c.commandStr),Pt.commandType(e,"number",l+".mask",c.commandStr),[En[t],n,e]},function(t,n,r){var o=t.constants.compareFuncs;return Pt.optional(function(){function e(){t.assert(n,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(r+"&&typeof ",r,'==="object"'),e('!("cmp" in ',r,")||(",r,".cmp in ",o,")")}),[n.def('"cmp" in ',r,"?",o,"[",r,".cmp]",":",7680),n.def(r,".ref|0"),n.def('"mask" in ',r,"?",r,".mask|0:-1")]});case un:case ln:return e(function(e){Pt.commandType(e,"object",o,c.commandStr);var t=e.fail||"keep",n=e.zfail||"keep",e=e.zpass||"keep";return Pt.commandParameter(t,ot,l+".fail",c.commandStr),Pt.commandParameter(n,ot,l+".zfail",c.commandStr),Pt.commandParameter(e,ot,l+".zpass",c.commandStr),[l===ln?1029:1028,ot[t],ot[n],ot[e]]},function(t,n,r){var o=t.constants.stencilOps;function e(e){return Pt.optional(function(){t.assert(n,'!("'+e+'" in '+r+")||("+r+"."+e+" in "+o+")","invalid "+l+"."+e+", must be one of "+Object.keys(ot))}),n.def('"',e,'" in ',r,"?",o,"[",r,".",e,"]:",7680)}return Pt.optional(function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+l)}),[l===ln?1029:1028,e("fail"),e("zfail"),e("zpass")]});case en:return e(function(e){Pt.commandType(e,"object",o,c.commandStr);var t=0|e.factor,e=0|e.units;return Pt.commandType(t,"number",o+".factor",c.commandStr),Pt.commandType(e,"number",o+".units",c.commandStr),[t,e]},function(e,t,n){return Pt.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid "+l)}),[t.def(n,".factor|0"),t.def(n,".units|0")]});case"cull.face":return e(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),Pt.command(!!t,o,c.commandStr),t},function(e,t,n){return Pt.optional(function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),t.def(n,'==="front"?',1028,":",1029)});case _t:return e(function(e){return Pt.command("number"==typeof e&&e>=Me.lineWidthDims[0]&&e<=Me.lineWidthDims[1],"invalid line width, must be a positive number between "+Me.lineWidthDims[0]+" and "+Me.lineWidthDims[1],c.commandStr),e},function(e,t,n){return Pt.optional(function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+Me.lineWidthDims[0]+"&&"+n+"<="+Me.lineWidthDims[1],"invalid line width")}),n});case wt:return e(function(e){return Pt.commandParameter(e,Mn,o,c.commandStr),Mn[e]},function(e,t,n){return Pt.optional(function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(n+'==="cw"?2304:2305')});case mt:return e(function(e){return Pt.command(Ke(e)&&4===e.length,"color.mask must be length 4 array",c.commandStr),e.map(function(e){return!!e})},function(e,t,n){return Pt.optional(function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),Ze(4,function(e){return"!!"+n+"["+e+"]"})});case rn:return e(function(e){Pt.command("object"===Nn(e)&&e,o,c.commandStr);var t="value"in e?e.value:1,e=!!e.invert;return Pt.command("number"==typeof t&&0<=t&&t<=1,"sample.coverage.value must be a number between 0 and 1",c.commandStr),[t,e]},function(e,t,n){return Pt.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]})}}),re=f,I=t,B=a.static,F=a.dynamic,i=we(dn),s=we(pn),u=null,I=at(i)&&at(s)?(u=Ie.program(s.id,i.id,null,I),st(function(e,t){return e.link(u)})):new it(i&&i.thisDep||s&&s.thisDep,i&&i.contextDep||s&&s.contextDep,i&&i.propDep||s&&s.propDep,function(e,t){var n=e.shared.shader,r=i?i.append(e,t):t.def(n,".",dn),o=n+".program("+(s?s.append(e,t):t.def(n,".",pn))+","+r;return Pt.optional(function(){o+=","+e.command}),t.def(o+")")}),I={frag:i,vert:s,progVar:I,program:u},Se(Qe),Se(Be(fn)),A=0<Object.keys(re).length,(O={framebuffer:O,draw:R,shader:I,state:re,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=(R=a.static,A=a.dynamic,hn in R?(fe=!!R[hn],(w=st(function(e,t){return fe})).enable=fe):hn in A&&(w=ut(he=A[hn],function(e,t){return e.invoke(t,he)})),w),O.uniforms=(se=o,ue=n.static,le=n.dynamic,ce={},Object.keys(ue).forEach(function(n){var e,t,r=ue[n];"number"==typeof r||"boolean"==typeof r?e=st(function(){return r}):"function"==typeof r?"texture2d"===(t=r._reglType)||"textureCube"===t?e=st(function(e){return e.link(r)}):"framebuffer"===t||"framebufferCube"===t?(Pt.command(0<r.color.length,'missing color attachment for framebuffer sent to uniform "'+n+'"',se.commandStr),e=st(function(e){return e.link(r.color[0])})):Pt.commandRaise('invalid data for uniform "'+n+'"',se.commandStr):Ke(r)?e=st(function(t){return t.global.def("[",Ze(r.length,function(e){return Pt.command("number"==typeof r[e]||"boolean"==typeof r[e],"invalid uniform "+n,t.commandStr),r[e]}),"]")}):Pt.commandRaise('invalid or missing data for uniform "'+n+'"',se.commandStr),e.value=r,ce[n]=e}),Object.keys(le).forEach(function(e){var n=le[e];ce[e]=ut(n,function(e,t){return e.invoke(t,n)})}),ce),O.drawVAO=O.scopeVAO=(R=a.static,A=a.dynamic,"vao"in R?(null!==(b=R.vao)&&null===Ae.getVAO(b)&&(b=Ae.createVAO(b)),st(function(e){return e.link(Ae.getVAO(b))})):"vao"in A?ut(ae=A.vao,function(e,t){var n=e.invoke(t,ae);return t.def(e.shared.vao+".getVAO("+n+")")}):null),!O.drawVAO&&I.program&&!t&&ke.angle_instanced_arrays&&(oe=!0,w=I.program.attributes.map(function(e){e=r.static[e];return oe=oe&&!!e,e}),oe)&&0<w.length&&(ie=Ae.getVAO(Ae.createVAO(w)),O.drawVAO=new it(null,null,null,function(e,t){return e.link(ie)}),O.useVAO=!0),t?O.useVAO=!0:O.attributes=(_=o,ge=r.static,ve=r.dynamic,me={},Object.keys(ge).forEach(function(r){var e,n,t,o,i,a,s,u,l=ge[r],c=Ee.id(r),f=new Re;jn(l)?(f.state=1,f.buffer=je.getBuffer(je.create(l,On,!1,!0)),f.type=0):(e=je.getBuffer(l))?(f.state=1,f.buffer=e,f.type=0):(Pt.command("object"===Nn(l)&&l,"invalid data for attribute "+r,_.commandStr),"constant"in l?(n=l.constant,f.buffer="null",f.state=2,"number"==typeof n?f.x=n:(Pt.command(Ke(n)&&0<n.length&&n.length<=4,"invalid constant for attribute "+r,_.commandStr),lt.forEach(function(e,t){t<n.length&&(f[e]=n[t])}))):(e=jn(l.buffer)?je.getBuffer(je.create(l.buffer,On,!1,!0)):je.getBuffer(l.buffer),Pt.command(!!e,'missing buffer for attribute "'+r+'"',_.commandStr),t=0|l.offset,Pt.command(0<=t,'invalid offset for attribute "'+r+'"',_.commandStr),o=0|l.stride,Pt.command(0<=o&&o<256,'invalid stride for attribute "'+r+'", must be integer betweeen [0, 255]',_.commandStr),i=0|l.size,Pt.command(!("size"in l)||0<i&&i<=4,'invalid size for attribute "'+r+'", must be 1,2,3,4',_.commandStr),a=!!l.normalized,s=0,"type"in l&&(Pt.commandParameter(l.type,Ct,"invalid type for attribute "+r,_.commandStr),s=Ct[l.type]),u=0|l.divisor,"divisor"in l&&(Pt.command(0==u||Ne,'cannot specify divisor for attribute "'+r+'", instancing not supported',_.commandStr),Pt.command(0<=u,'invalid divisor for attribute "'+r+'"',_.commandStr)),Pt.optional(function(){var t=_.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(l).forEach(function(e){Pt.command(0<=n.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+r+'" (valid parameters are '+n+")",t)})}),f.buffer=e,f.state=1,f.size=i,f.normalized=a,f.type=s||e.dtype,f.offset=t,f.stride=o,f.divisor=u)),me[r]=st(function(e,t){var n,r=e.attribCache;return c in r?r[c]:(n={isStream:!1},Object.keys(f).forEach(function(e){n[e]=f[e]}),f.buffer&&(n.buffer=e.link(f.buffer),n.type=n.type||n.buffer+".dtype"),r[c]=n)})}),Object.keys(ve).forEach(function(h){var p=ve[h];me[h]=ut(p,function(e,t){var n=e.invoke(t,p),r=e.shared,o=e.constants,i=r.isBufferArgs,a=r.buffer,s=(Pt.optional(function(){e.assert(t,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+i+"("+n+")||"+a+".getBuffer("+n+")||"+a+".getBuffer("+n+".buffer)||"+i+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+r.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+h+'"')}),{isStream:t.def(!1)}),u=new Re,l=(u.state=1,Object.keys(u).forEach(function(e){s[e]=t.def(""+u[e])}),s.buffer),c=s.type;function f(e){t(s[e],"=",n,".",e,"|0;")}return t("if(",i,"(",n,")){",s.isStream,"=true;",l,"=",a,".createStream(",On,",",n,");",c,"=",l,".dtype;","}else{",l,"=",a,".getBuffer(",n,");","if(",l,"){",c,"=",l,".dtype;",'}else if("constant" in ',n,"){",s.state,"=",2,";","if(typeof "+n+'.constant === "number"){',s[lt[0]],"=",n,".constant;",lt.slice(1).map(function(e){return s[e]}).join("="),"=0;","}else{",lt.map(function(e,t){return s[e]+"="+n+".constant.length>"+t+"?"+n+".constant["+t+"]:0;"}).join(""),"}}else{","if(",i,"(",n,".buffer)){",l,"=",a,".createStream(",On,",",n,".buffer);","}else{",l,"=",a,".getBuffer(",n,".buffer);","}",c,'="type" in ',n,"?",o.glTypes,"[",n,".type]:",l,".dtype;",s.normalized,"=!!",n,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),t("}}"),t.exit("if(",s.isStream,"){",a,".destroyStream(",l,");","}"),s})}),me),O.context=(pe=e.static,de=e.dynamic,ye={},Object.keys(pe).forEach(function(e){var n=pe[e];ye[e]=st(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(de).forEach(function(e){var n=de[e];ye[e]=ut(n,function(e,t){return e.invoke(t,n)})}),ye),O);function we(o){var e,t,i;return o in B?(e=Ee.id(B[o]),Pt.optional(function(){Ie.shader(kn[o],e,Pt.guessCommand())}),(t=st(function(){return e})).id=e,t):o in F?ut(i=F[o],function(e,t){var n=e.invoke(t,i),r=t.def(e.shared.strings,".id(",n,")");return Pt.optional(function(){t(e.shared.shader,".shader(",kn[o],",",r,",",e.command,");")}),r}):null}function _e(r,o){var n,i;return r in p?(n=0|p[r],Pt.command(!o||0<=n,"invalid "+r,l.commandStr),st(function(e,t){return o&&(e.OFFSET=n),n})):r in d?ut(i=d[r],function(e,t){var n=e.invoke(t,i);return o&&(e.OFFSET=n,Pt.optional(function(){e.assert(t,n+">=0","invalid "+r)})),n}):o&&y?st(function(e,t){return e.OFFSET="0",0}):null}function xe(u){var o,i,a,s,l,c,e;return u in Z?(o=Z[u],Pt.commandType(o,"object","invalid "+u,J.commandStr),e=!0,s=0|o.x,l=0|o.y,"width"in o?(i=0|o.width,Pt.command(0<=i,"invalid "+u,J.commandStr)):e=!1,"height"in o?(a=0|o.height,Pt.command(0<=a,"invalid "+u,J.commandStr)):e=!1,new it(!e&&v&&v.thisDep,!e&&v&&v.contextDep,!e&&v&&v.propDep,function(e,t){var e=e.shared.context,n=i,r=("width"in o||(n=t.def(e,".",vn,"-",s)),a);return"height"in o||(r=t.def(e,".",mn,"-",l)),[s,l,n,r]})):u in K?(e=ut(c=K[u],function(e,t){var n=e.invoke(t,c),r=(Pt.optional(function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid "+u)}),e.shared.context),o=t.def(n,".x|0"),i=t.def(n,".y|0"),a=t.def('"width" in ',n,"?",n,".width|0:","(",r,".",vn,"-",o,")"),s=t.def('"height" in ',n,"?",n,".height|0:","(",r,".",mn,"-",i,")");return Pt.optional(function(){e.assert(t,a+">=0&&"+s+">=0","invalid "+u)}),[o,i,a,s]}),v&&(e.thisDep=e.thisDep||v.thisDep,e.contextDep=e.contextDep||v.contextDep,e.propDep=e.propDep||v.propDep),e):v?new it(v.thisDep,v.contextDep,v.propDep,function(e,t){e=e.shared.context;return[0,0,t.def(e,".",vn),t.def(e,".",mn)]}):null}function Se(e){var t=ne[e];t&&(re[e]=t)}return T=be,n=(C=L).proc("draw",1),We(C,n),Ge(C,n,T.context),ze(C,n,T.framebuffer),Ue(C,n,T),Ve(C,n,T.state),Ye(C,n,T,!1,!0),R=T.shader.progVar.append(C,n),n(C.shared.gl,".useProgram(",R,".program);"),T.shader.program?qe(C,n,T,T.shader.program):(n(C.shared.vao,".setVAO(null);"),A=C.global.def("{}"),I=n.def(R,".id"),t=n.def(A,"[",I,"]"),n(C.cond(t).then(t,".call(this,a0);").else(t,"=",A,"[",I,"]=",C.link(function(e){return He(qe,C,T,e,1)}),"(",R,");",t,".call(this,a0);"))),0<Object.keys(T.state).length&&n(C.shared.current,".dirty=true;"),k=be,M=(E=L).proc("scope",3),E.batchId="a2",j=E.shared,e=j.current,Ge(E,M,k.context),k.framebuffer&&k.framebuffer.append(E,M),Cn(Object.keys(k.state)).forEach(function(n){var e=k.state[n].append(E,M);Ke(e)?e.forEach(function(e,t){M.set(E.next[n],"["+t+"]",e)}):M.set(j.next,"."+n,e)}),Ye(E,M,k,!0,!0),[et,yn,nt,gn,tt].forEach(function(e){var t=k.draw[e];t&&M.set(j.draw,"."+e,""+t.append(E,M))}),Object.keys(k.uniforms).forEach(function(e){var t=k.uniforms[e].append(E,M);Array.isArray(t)&&(t="["+t.join()+"]"),M.set(j.uniforms,"["+Ee.id(e)+"]",t)}),Object.keys(k.attributes).forEach(function(e){var t=k.attributes[e].append(E,M),n=E.scopeAttrib(e);Object.keys(new Re).forEach(function(e){M.set(n,"."+e,t[e])})}),k.scopeVAO&&M.set(j.vao,".targetVAO",k.scopeVAO.append(E,M)),Pe(pn),Pe(dn),0<Object.keys(k.state).length&&(M(e,".dirty=true;"),M.exit(e,".dirty=true;")),M("a1(",E.shared.context,",a0,",E.batchId,");"),S=be,O=(x=L).proc("batch",2),x.batchId="0",We(x,O),A=!(P=!1),Object.keys(S.context).forEach(function(e){P=P||S.context[e].propDep}),P||(Ge(x,O,S.context),A=!1),I=S.framebuffer,R=!1,I?(I.propDep?P=R=!0:I.contextDep&&P&&(R=!0),R||ze(x,O,I)):ze(x,O,null),S.state.viewport&&S.state.viewport.propDep&&(P=!0),Ue(x,O,S),Ve(x,O,S.state,function(e){return!Oe(e)}),S.profile&&Oe(S.profile)||Ye(x,O,S,!1,"a1"),S.contextDep=P,S.needsContext=A,S.needsFramebuffer=R,(I=S.shader.progVar).contextDep&&P||I.propDep?Xe(x,O,S,null):(A=I.append(x,O),O(x.shared.gl,".useProgram(",A,".program);"),S.shader.program?Xe(x,O,S,S.shader.program):(O(x.shared.vao,".setVAO(null);"),R=x.global.def("{}"),I=O.def(A,".id"),t=O.def(R,"[",I,"]"),O(x.cond(t).then(t,".call(this,a0,a1);").else(t,"=",R,"[",I,"]=",x.link(function(e){return He(Xe,x,S,e,2)}),"(",A,");",t,".call(this,a0,a1);")))),0<Object.keys(S.state).length&&O(x.shared.current,".dirty=true;"),St(L.compile(),{destroy:function(){be.shader.program.destroy()}});function Oe(e){return e.contextDep&&P||e.propDep}function Pe(e){var t=k.shader[e];t&&M.set(j.shader,"."+e,t.append(E,M))}}}}function An(e,u){var l,c,f,h,p,d;return u.ext_disjoint_timer_query?(l=[],c=[],f=[],h=[],p=[],d=[],{beginQuery:function(e){var t=l.pop()||u.ext_disjoint_timer_query.createQueryEXT();u.ext_disjoint_timer_query.beginQueryEXT(35007,t),c.push(t),n(c.length-1,c.length,e)},endQuery:function(){u.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e=c.length;if(0!==e){d.length=Math.max(d.length,e+1),p.length=Math.max(p.length,e+1);for(var t=d[p[0]=0]=0,n=0,r=0;r<c.length;++r){var o=c[r];u.ext_disjoint_timer_query.getQueryObjectEXT(o,34919)?(t+=u.ext_disjoint_timer_query.getQueryObjectEXT(o,34918),l.push(o)):c[n++]=o,p[r+1]=t,d[r+1]=n}for(c.length=n,r=n=0;r<h.length;++r){var i=h[r],a=i.startQueryIndex,s=i.endQueryIndex,a=(i.sum+=p[s]-p[a],d[a]),s=d[s];s===a?(i.stats.gpuTime+=i.sum/1e6,f.push(i)):(i.startQueryIndex=a,i.endQueryIndex=s,h[n++]=i)}h.length=n}},getNumPendingQueries:function(){return c.length},clear:function(){l.push.apply(l,c);for(var e=0;e<l.length;e++)u.ext_disjoint_timer_query.deleteQueryEXT(l[e]);l.length=c.length=0},restore:function(){l.length=c.length=0}}):null;function n(e,t,n){var r=f.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,h.push(r)}}var In="webglcontextlost",Rn="webglcontextrestored";function Ln(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(e){e=(e=e)||{},_={},M=[],v=[],m="undefined"==typeof window?1:window.devicePixelRatio,Se=!1,w=function(e){e&&Pt.raise(e)},b=function(){},"string"==typeof e?(Pt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(e),Pt(t,"invalid query string for element")):"object"===Nn(e)?"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect?t=e:"function"!=typeof e.drawArrays&&"function"!=typeof e.drawElements?(Pt.constructor(e),"gl"in e?O=e.gl:"canvas"in e?P=Dt(e.canvas):"container"in e&&(k=Dt(e.container)),"attributes"in e&&(_=e.attributes,Pt.type(_,"object","invalid context attributes")),"extensions"in e&&(M=Nt(e.extensions)),"optionalExtensions"in e&&(v=Nt(e.optionalExtensions)),"onDone"in e&&(Pt.type(e.onDone,"function","invalid or missing onDone callback"),w=e.onDone),"profile"in e&&(Se=!!e.profile),"pixelRatio"in e&&(m=+e.pixelRatio,Pt(0<m,"invalid pixel ratio"))):P=(O=e).canvas:Pt.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?P=t:k=t),O||(P||(Pt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments"),r=k||document.body,B=m,o=document.createElement("canvas"),St(o.style,{border:0,margin:0,padding:0,top:0,left:0}),r.appendChild(o),r===document.body&&(o.style.position="absolute",St(r.style,{margin:0,padding:0})),r!==document.body&&"function"==typeof ResizeObserver?(F=new ResizeObserver(function(){setTimeout(z)})).observe(r):window.addEventListener("resize",z,!1),z(),P=(e={canvas:o,onDestroy:function(){F?F.disconnect():window.removeEventListener("resize",z),r.removeChild(o)}}).canvas,b=e.onDestroy),void 0===_.premultipliedAlpha&&(_.premultipliedAlpha=!0),N=P,D=_,O=G("webgl")||G("experimental-webgl")||G("webgl-experimental"));var N,D,r,B,F,o,t=O?{gl:O,canvas:P,container:k,extensions:M,optionalExtensions:v,pixelRatio:m,profile:Se,onDone:w,onDestroy:b}:(b(),w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null);function G(e){try{return N.getContext(e,D)}catch(e){return null}}function z(){var e,t=window.innerWidth,n=window.innerHeight;r!==document.body&&(t=(e=r.getBoundingClientRect()).right-e.left,n=e.bottom-e.top),o.width=B*t,o.height=B*n,St(o.style,{width:t+"px",height:n+"px"})}if(!t)return null;var i=t.gl,e=i.getContextAttributes(),U=i.isContextLost(),V=function(n,e){var r={};function t(e){Pt.type(e,"string","extension name must be string");var t,e=e.toLowerCase();try{t=r[e]=n.getExtension(e)}catch(e){}return!!t}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!t(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(t),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!t(e))throw new Error("(regl): error restoring extension "+e)})}}}(i,t);if(!V)return null;W={"":0},Y=[""];var W,Y,a,x,H,X,q,J,S,Z,K,Q,$,ee,l,te,ne,re,c,oe,ie,n,y,g,ae,se,s,u,f,h,ue,le,ce,fe,he,pe,de,ye,ge,p,ve,me,be,we,d,_e,v,xe,m,Se,b,w,Oe,_={id:function(e){var t;return W[e]||(t=W[e]=Y.length,Y.push(e),t)},str:function(e){return Y[e]}},O={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},P=V.extensions,E=An(0,P),Pe=Lt(),k=i.drawingBufferWidth,M=i.drawingBufferHeight,j={tick:0,time:0,viewportWidth:k,viewportHeight:M,framebufferWidth:k,framebufferHeight:M,drawingBufferWidth:k,drawingBufferHeight:M,pixelRatio:t.pixelRatio},C=(v=i,m=1,(xe=P).ext_texture_filter_anisotropic&&(m=v.getParameter(34047)),b=Se=1,xe.webgl_draw_buffers&&(Se=v.getParameter(34852),b=v.getParameter(36063)),(w=!!xe.oes_texture_float)&&(L=v.createTexture(),v.bindTexture(3553,L),v.texImage2D(3553,0,6408,1,1,0,6408,5126,null),Oe=v.createFramebuffer(),v.bindFramebuffer(36160,Oe),v.framebufferTexture2D(36160,36064,3553,L,0),v.bindTexture(3553,null),36053!==v.checkFramebufferStatus(36160)?w=!1:(v.viewport(0,0,1,1),v.clearColor(1,0,0,1),v.clear(16384),I=kt.allocType(5126,4),v.readPixels(0,0,1,1,6408,5126,I),w=!v.getError()&&(v.deleteFramebuffer(Oe),v.deleteTexture(L),1===I[0]),kt.freeType(I))),Oe=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(L=v.createTexture(),I=kt.allocType(5121,36),v.activeTexture(33984),v.bindTexture(34067,L),v.texImage2D(34069,0,6408,3,3,0,6408,5121,I),kt.freeType(I),v.bindTexture(34067,null),v.deleteTexture(L),Oe=!v.getError()),{colorBits:[v.getParameter(3410),v.getParameter(3411),v.getParameter(3412),v.getParameter(3413)],depthBits:v.getParameter(3414),stencilBits:v.getParameter(3415),subpixelBits:v.getParameter(3408),extensions:Object.keys(xe).filter(function(e){return!!xe[e]}),maxAnisotropic:m,maxDrawbuffers:Se,maxColorAttachments:b,pointSizeDims:v.getParameter(33901),lineWidthDims:v.getParameter(33902),maxViewportDims:v.getParameter(3386),maxCombinedTextureUnits:v.getParameter(35661),maxCubeMapSize:v.getParameter(34076),maxRenderbufferSize:v.getParameter(34024),maxTextureUnits:v.getParameter(34930),maxTextureSize:v.getParameter(3379),maxAttributes:v.getParameter(34921),maxVertexUniforms:v.getParameter(36347),maxVertexTextureUnits:v.getParameter(35660),maxVaryingVectors:v.getParameter(36348),maxFragmentUniforms:v.getParameter(36349),glsl:v.getParameter(35724),renderer:v.getParameter(7937),vendor:v.getParameter(7936),version:v.getParameter(7938),readFloat:w,npotTextureCube:Oe}),Ee=(p=i,ve=O,me=t,be=function(e){ke.destroyBuffer(e)},we=0,d={},at.prototype.bind=function(){p.bindBuffer(this.type,this.buffer)},at.prototype.destroy=function(){lt(this)},_e=[],me.profile&&(ve.getTotalBufferSize=function(){var t=0;return Object.keys(d).forEach(function(e){t+=d[e].stats.size}),t}),{create:function(e,t,n,a){ve.bufferCount++;var u=new at(t);function l(e){var t=35044,n=null,r=0,o=0,i=1;return Array.isArray(e)||Ot(e)||Mt(e)||e instanceof ArrayBuffer?n=e:"number"==typeof e?r=0|e:e&&(Pt.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(Pt(null===n||Array.isArray(n)||Ot(n)||Mt(n),"invalid data for buffer"),n=e.data),"usage"in e&&(Pt.parameter(e.usage,Bt,"invalid buffer usage"),t=Bt[e.usage]),"type"in e&&(Pt.parameter(e.type,Ct,"invalid buffer type"),o=Ct[e.type]),"dimension"in e&&(Pt.type(e.dimension,"number","invalid dimension"),i=0|e.dimension),"length"in e)&&(Pt.nni(r,"buffer length must be a nonnegative integer"),r=0|e.length),u.bind(),n?ut(u,n,t,o,i,a):(r&&p.bufferData(u.type,r,t),u.dtype=o||5121,u.usage=t,u.dimension=i,u.byteLength=r),me.profile&&(u.stats.size=u.byteLength*Tt[u.dtype]),l}function c(e,t){Pt(t+e.byteLength<=u.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+t+" to a buffer of size "+u.byteLength),p.bufferSubData(u.type,t,e)}return d[u.id]=u,n||l(e),l._reglType="buffer",l._buffer=u,l.subdata=function(e,t){var n,r,o,i,a,s,t=0|(t||0);return u.bind(),Ot(e)||e instanceof ArrayBuffer?c(e,t):Array.isArray(e)?0<e.length&&("number"==typeof e[0]?(Ut(s=kt.allocType(u.dtype,e.length),e),c(s,t),kt.freeType(s)):Array.isArray(e[0])||Ot(e[0])?(a=Gt(e),c(s=Ft(e,a,u.dtype),t),kt.freeType(s)):Pt.raise("invalid buffer data")):Mt(e)?(a=e.shape,s=e.stride,i=o=r=n=0,1===a.length?(n=a[0],r=1,o=s[0],i=0):2===a.length?(n=a[0],r=a[1],o=s[0],i=s[1]):Pt.raise("invalid shape"),a=Array.isArray(e.data)?u.dtype:zt(e.data),Vt(s=kt.allocType(a,n*r),e.data,n,r,o,i,e.offset),c(s,t),kt.freeType(s)):Pt.raise("invalid data for buffer subdata"),l},me.profile&&(l.stats=u.stats),l.destroy=function(){lt(u)},l},createStream:function(e,t){var n=_e.pop();return(n=n||new at(e)).bind(),ut(n,t,35040,0,1,!1),n},destroyStream:function(e){_e.push(e)},clear:function(){jt(d).forEach(lt),_e.forEach(lt)},getBuffer:function(e){return e&&e._buffer instanceof at?e._buffer:null},restore:function(){jt(d).forEach(function(e){e.buffer=p.createBuffer(),p.bindBuffer(e.type,e.buffer),p.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:ut}),ke=function(i,f,t,h){for(var p=C.maxAttributes,o=new Array(p),e=0;e<p;++e)o[e]=new Qt;var n=0,r={},a={Record:Qt,scope:{},state:o,currentVAO:null,targetVAO:null,restore:s()?function(){s()&&jt(r).forEach(function(e){e.refresh()})}:function(){},createVAO:function(e){var l=new d;function c(e){Pt(Array.isArray(e),"arguments to vertex array constructor must be an array"),Pt(e.length<p,"too many attributes"),Pt(0<e.length,"must specify at least one attribute");var t={},n=l.attributes;n.length=e.length;for(var r=0;r<e.length;++r){var o,i=e[r],a=n[r]=new Qt,s=i.data||i;Array.isArray(s)||Ot(s)||Mt(s)?(l.buffers[r]&&(o=l.buffers[r],Ot(s)&&o._buffer.byteLength>=s.byteLength?o.subdata(s):(o.destroy(),l.buffers[r]=null)),l.buffers[r]||(o=l.buffers[r]=h.create(i,34962,!1,!0)),a.buffer=h.getBuffer(o),a.size=0|a.buffer.dimension,a.normalized=!1,a.type=a.buffer.dtype,a.offset=0,a.stride=0,a.divisor=0,a.state=1,t[r]=1):h.getBuffer(i)?(a.buffer=h.getBuffer(i),a.size=0|a.buffer.dimension,a.normalized=!1,a.type=a.buffer.dtype,a.offset=0,a.stride=0,a.divisor=0,a.state=1):h.getBuffer(i.buffer)?(a.buffer=h.getBuffer(i.buffer),a.size=0|(+i.size||a.buffer.dimension),a.normalized=!!i.normalized||!1,"type"in i?(Pt.parameter(i.type,Ct,"invalid buffer type"),a.type=Ct[i.type]):a.type=a.buffer.dtype,a.offset=0|(i.offset||0),a.stride=0|(i.stride||0),a.divisor=0|(i.divisor||0),a.state=1,Pt(1<=a.size&&a.size<=4,"size must be between 1 and 4"),Pt(0<=a.offset,"invalid offset"),Pt(0<=a.stride&&a.stride<=255,"stride must be between 0 and 255"),Pt(0<=a.divisor,"divisor must be positive"),Pt(!a.divisor||!!f.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in i?(Pt(0<r,"first attribute must not be a constant"),a.x=+i.x||0,a.y=+i.y||0,a.z=+i.z||0,a.w=+i.w||0,a.state=2):Pt(!1,"invalid attribute spec for location "+r)}for(var u=0;u<l.buffers.length;++u)!t[u]&&l.buffers[u]&&(l.buffers[u].destroy(),l.buffers[u]=null);return l.refresh(),c}return t.vaoCount+=1,c.destroy=function(){for(var e=0;e<l.buffers.length;++e)l.buffers[e]&&l.buffers[e].destroy();l.buffers.length=0,l.destroy()},c._vao=l,c._reglType="vao",c(e)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var t=0;t<o.length;++t){var n=o[t];n.buffer===e&&(i.disableVertexAttribArray(t),n.buffer=null)}},setVAO:s()?function(e){var t;e!==a.currentVAO&&(t=s(),e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),a.currentVAO=e)}:function(e){if(e!==a.currentVAO){if(e)e.bindAttrs();else for(var t=u(),n=0;n<o.length;++n){var r=o[n];r.buffer?(i.enableVertexAttribArray(n),i.vertexAttribPointer(n,r.size,r.type,r.normalized,r.stride,r.offfset),t&&r.divisor&&t.vertexAttribDivisorANGLE(n,r.divisor)):(i.disableVertexAttribArray(n),i.vertexAttrib4f(n,r.x,r.y,r.z,r.w))}a.currentVAO=e}},clear:s()?function(){jt(r).forEach(function(e){e.destroy()})}:function(){}};function s(){return f.oes_vertex_array_object}function u(){return f.angle_instanced_arrays}function d(){this.id=++n,this.attributes=[];var e=s();this.vao=e?e.createVertexArrayOES():null,(r[this.id]=this).buffers=[]}return d.prototype.bindAttrs=function(){for(var e=u(),t=this.attributes,n=0;n<t.length;++n){var r=t[n];r.buffer?(i.enableVertexAttribArray(n),i.bindBuffer(34962,r.buffer.buffer),i.vertexAttribPointer(n,r.size,r.type,r.normalized,r.stride,r.offset),e&&r.divisor&&e.vertexAttribDivisorANGLE(n,r.divisor)):(i.disableVertexAttribArray(n),i.vertexAttrib4f(n,r.x,r.y,r.z,r.w))}for(var o=t.length;o<p;++o)i.disableVertexAttribArray(o)},d.prototype.refresh=function(){var e=s();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),a.currentVAO=this)},d.prototype.destroy=function(){var e;this.vao&&(e=s(),this===a.currentVAO&&(a.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null),r[this.id]&&(delete r[this.id],--t.vaoCount)},a}(i,P,O,Ee),Me=(le=i,fe=Ee,he=O,pe={},de=0,ye={uint8:5121,uint16:5123},(ce=P).oes_element_index_uint&&(ye.uint32=5125),rt.prototype.bind=function(){this.buffer.bind()},ge=[],{create:function(e,t){var s=fe.create(null,34963,!0),u=new rt(s._buffer);function l(e){var t,n,r,o,i,a;return e?"number"==typeof e?(s(e),u.primType=4,u.vertCount=0|e,u.type=5121):(t=null,n=35044,o=r=-1,a=i=0,Array.isArray(e)||Ot(e)||Mt(e)?t=e:(Pt.type(e,"object","invalid arguments for elements"),"data"in e&&(t=e.data,Pt(Array.isArray(t)||Ot(t)||Mt(t),"invalid data for element buffer")),"usage"in e&&(Pt.parameter(e.usage,Bt,"invalid element buffer usage"),n=Bt[e.usage]),"primitive"in e&&(Pt.parameter(e.primitive,Wt,"invalid element buffer primitive"),r=Wt[e.primitive]),"count"in e&&(Pt("number"==typeof e.count&&0<=e.count,"invalid vertex count for elements"),o=0|e.count),"type"in e&&(Pt.parameter(e.type,ye,"invalid buffer type"),a=ye[e.type]),"length"in e?i=0|e.length:(i=o,5123===a||5122===a?i*=2:5125!==a&&5124!==a||(i*=4))),ot(u,t,n,r,o,i,a)):(s(),u.primType=4,u.vertCount=0,u.type=5121),l}return he.elementsCount++,l(e),l._reglType="elements",l._elements=u,l.subdata=function(e,t){return s.subdata(e,t),l},l.destroy=function(){it(u)},l},createStream:function(e){var t=ge.pop();return ot(t=t||new rt(fe.create(null,34963,!0,!1)._buffer),e,35040,-1,-1,0,0),t},destroyStream:function(e){ge.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof rt?e._elements:null},clear:function(){jt(pe).forEach(it)}}),je=(y=i,g=_,ae=O,s={},u={},f={},h=[],ue=0,(se=t).profile&&(ae.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},ae.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=y.deleteShader.bind(y);jt(s).forEach(e),s={},jt(u).forEach(e),u={},h.forEach(function(e){y.deleteProgram(e.program)}),h.length=0,f={},ae.shaderCount=0},program:function(e,t,n,r){Pt.command(0<=e,"missing vertex shader",n),Pt.command(0<=t,"missing fragment shader",n);var o,i=f[t],a=(i=i||(f[t]={}))[e];return a&&(a.refCount++,!r)?a:(o=new function(e,t){this.id=ue++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,se.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(t,e),ae.shaderCount++,nt(o,n,r),a||(i[e]=o),h.push(o),St(o,{destroy:function(){var e;o.refCount--,o.refCount<=0&&(y.deleteProgram(o.program),e=h.indexOf(o),h.splice(e,1),ae.shaderCount--),i[o.vertId].refCount<=0&&(y.deleteShader(u[o.vertId]),delete u[o.vertId],delete f[o.fragId][o.vertId]),Object.keys(f[o.fragId]).length||(y.deleteShader(s[o.fragId]),delete s[o.fragId],delete f[o.fragId])}}))},restore:function(){s={},u={};for(var e=0;e<h.length;++e)nt(h[e],null,h[e].attributes.map(function(e){return[e.location,e.name]}))},shader:tt,frag:-1,vert:-1}),Ce=Yt(i,P,C,function(){A.procs.poll()},j,O,t),Te=(l=i,te=C,ne=O,re=t,c={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041},(M=P).ext_srgb&&(c.srgba=35907),M.ext_color_buffer_half_float&&(c.rgba16f=34842,c.rgb16f=34843),M.webgl_color_buffer_float&&(c.rgba32f=34836),oe=[],Object.keys(c).forEach(function(e){oe[c[e]]=e}),ie=0,n={},Ke.prototype.decRef=function(){--this.refCount<=0&&Qe(this)},re.profile&&(ne.getTotalRenderbufferSize=function(){var t=0;return Object.keys(n).forEach(function(e){t+=n[e].stats.size}),t}),{create:function(e,t){var s=new Ke(l.createRenderbuffer());function u(e,t){var n,r,o=0,i=0,a=32854;if("object"===Nn(e)&&e?("shape"in(n=e)?(r=n.shape,Pt(Array.isArray(r)&&2<=r.length,"invalid renderbuffer shape"),o=0|r[0],i=0|r[1]):("radius"in n&&(o=i=0|n.radius),"width"in n&&(o=0|n.width),"height"in n&&(i=0|n.height)),"format"in n&&(Pt.parameter(n.format,c,"invalid renderbuffer format"),a=c[n.format])):"number"==typeof e?(o=0|e,i="number"==typeof t?0|t:o):e?Pt.raise("invalid arguments to renderbuffer constructor"):o=i=1,Pt(0<o&&0<i&&o<=te.maxRenderbufferSize&&i<=te.maxRenderbufferSize,"invalid renderbuffer size"),o!==s.width||i!==s.height||a!==s.format)return u.width=s.width=o,u.height=s.height=i,s.format=a,l.bindRenderbuffer(At,s.renderbuffer),l.renderbufferStorage(At,a,o,i),Pt(0===l.getError(),"invalid render buffer format"),re.profile&&(s.stats.size=Ht(s.format,s.width,s.height)),u.format=oe[s.format],u}return n[s.id]=s,ne.renderbufferCount++,u(e,t),u.resize=function(e,t){e|=0,t=0|t||e;return e===s.width&&t===s.height||(Pt(0<e&&0<t&&e<=te.maxRenderbufferSize&&t<=te.maxRenderbufferSize,"invalid renderbuffer size"),u.width=s.width=e,u.height=s.height=t,l.bindRenderbuffer(At,s.renderbuffer),l.renderbufferStorage(At,s.format,e,t),Pt(0===l.getError(),"invalid render buffer format"),re.profile&&(s.stats.size=Ht(s.format,s.width,s.height))),u},u._reglType="renderbuffer",u._renderbuffer=s,re.profile&&(u.stats=s.stats),u.destroy=function(){s.decRef()},u},clear:function(){jt(n).forEach(Qe)},restore:function(){jt(n).forEach(function(e){e.renderbuffer=l.createRenderbuffer(),l.bindRenderbuffer(At,e.renderbuffer),l.renderbufferStorage(At,e.format,e.width,e.height)}),l.bindRenderbuffer(At,null)}}),T=(a=i,H=C,X=Ce,q=Te,J=O,S={cur:null,next:null,dirty:!1,setFBO:null},Z=["rgba"],K=["rgba4","rgb565","rgb5 a1"],(x=P).ext_srgb&&K.push("srgba"),x.ext_color_buffer_half_float&&K.push("rgba16f","rgb16f"),x.webgl_color_buffer_float&&K.push("rgba32f"),Q=["uint8"],x.oes_texture_half_float&&Q.push("half float","float16"),x.oes_texture_float&&Q.push("float","float32"),$=0,ee={},St(S,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){e=e._framebuffer;if(e instanceof He)return e}return null},create:Ze,createCube:function(e){var p=Array(6);function d(e){Pt(p.indexOf(S.next)<0,"can not update framebuffer which is currently in use");var t,n={color:null},r=0,o=null,i="rgba",a="uint8",s=1;if("number"==typeof e?r=0|e:e?(Pt.type(e,"object","invalid arguments for framebuffer"),"shape"in(e=e)?(t=e.shape,Pt(Array.isArray(t)&&2<=t.length,"invalid shape for framebuffer"),Pt(t[0]===t[1],"cube framebuffer must be square"),r=t[0]):("radius"in e&&(r=0|e.radius),"width"in e?(r=0|e.width,"height"in e&&Pt(e.height===r,"must be square")):"height"in e&&(r=0|e.height)),("color"in e||"colors"in e)&&(o=e.color||e.colors,Array.isArray(o))&&Pt(1===o.length||x.webgl_draw_buffers,"multiple render targets not supported"),o||("colorCount"in e&&(s=0|e.colorCount,Pt(0<s,"invalid color buffer count")),"colorType"in e&&(Pt.oneOf(e.colorType,Q,"invalid color type"),a=e.colorType),"colorFormat"in e&&(i=e.colorFormat,Pt.oneOf(e.colorFormat,Z,"invalid color format for texture"))),"depth"in e&&(n.depth=e.depth),"stencil"in e&&(n.stencil=e.stencil),"depthStencil"in e&&(n.depthStencil=e.depthStencil)):r=1,o)if(Array.isArray(o))for(u=[],c=0;c<o.length;++c)u[c]=o[c];else u=[o];else for(var u=Array(s),l={radius:r,format:i,type:a},c=0;c<s;++c)u[c]=X.createCube(l);for(n.color=Array(u.length),c=0;c<u.length;++c){var f=u[c];Pt("function"==typeof f&&"textureCube"===f._reglType,"invalid cube map"),r=r||f.width,Pt(f.width===r&&f.height===r,"invalid cube map shape"),n.color[c]={target:34069,data:u[c]}}for(c=0;c<6;++c){for(var h=0;h<u.length;++h)n.color[h].target=34069+c;0<c&&(n.depth=p[0].depth,n.stencil=p[0].stencil,n.depthStencil=p[0].depthStencil),p[c]?p[c](n):p[c]=Ze(n)}return St(d,{width:r,height:r,color:u})}return d(e),St(d,{faces:p,resize:function(e){var t=0|e;if(Pt(0<t&&t<=H.maxCubeMapSize,"invalid radius for cube fbo"),t!==d.width){for(var n=d.color,r=0;r<n.length;++r)n[r].resize(t);for(r=0;r<6;++r)p[r].resize(t);d.width=d.height=t}return d},_reglType:"framebufferCube",destroy:function(){p.forEach(function(e){e.destroy()})}})},clear:function(){jt(ee).forEach(qe)},restore:function(){S.cur=null,S.next=null,S.dirty=!0,jt(ee).forEach(function(e){e.framebuffer=a.createFramebuffer(),Je(e)})}})),A=Tn(i,_,P,C,Ee,Me,0,T,{},ke,je,{elements:null,primitive:4,count:-1,offset:0,instances:-1},j,E,t),I=$t(i,T,A.procs.poll,j,e,P,C),Ae=A.next,Ie=i.canvas,R=[],Re=[],Le=[],Ne=[t.onDestroy],De=null;function Be(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var e=0,r=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function Fe(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer)&&e.renderbuffer._renderbuffer.decRef()}function Ge(e,t,n){var r,o,i;e&&(e.texture?(r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height),Pt(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1):(i=e.renderbuffer._renderbuffer,Pt(i.width===t&&i.height===n,"inconsistent width/height for renderbuffer"),i.refCount+=1))}function ze(e,t){t&&(t.texture?a.framebufferTexture2D(It,e,t.target,t.texture._texture.texture,0):a.framebufferRenderbuffer(It,e,36161,t.renderbuffer._renderbuffer.renderbuffer))}function Ue(e){var t=3553,n=null,r=null,o=e,e=("object"===Nn(e)&&(o=e.data,"target"in e)&&(t=0|e.target),Pt.type(o,"function","invalid attachment data"),o._reglType);return"texture2d"===e?(n=o,Pt(3553===t)):"textureCube"===e?(n=o,Pt(34069<=t&&t<34075,"invalid cube map target")):"renderbuffer"===e?(r=o,t=36161):Pt.raise("invalid regl object for attachment"),new Be(t,n,r)}function Ve(e,t,n,r,o){return n?((n=X.create2D({width:e,height:t,format:r,type:o}))._texture.refCount=0,new Be(3553,n,null)):((o=q.create({width:e,height:t,format:r}))._renderbuffer.refCount=0,new Be(36161,null,o))}function We(e){return e&&(e.texture||e.renderbuffer)}function Ye(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}function He(){this.id=$++,(ee[this.id]=this).framebuffer=a.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Xe(e){e.colorAttachments.forEach(Fe),Fe(e.depthAttachment),Fe(e.stencilAttachment),Fe(e.depthStencilAttachment)}function qe(e){var t=e.framebuffer;Pt(t,"must not double destroy framebuffer"),a.deleteFramebuffer(t),e.framebuffer=null,J.framebufferCount--,delete ee[e.id]}function Je(e){a.bindFramebuffer(It,e.framebuffer);for(var t=e.colorAttachments,n=0;n<t.length;++n)ze(36064+n,t[n]);for(n=t.length;n<H.maxColorAttachments;++n)a.framebufferTexture2D(It,36064+n,3553,null,0);a.framebufferTexture2D(It,33306,3553,null,0),a.framebufferTexture2D(It,36096,3553,null,0),a.framebufferTexture2D(It,36128,3553,null,0),ze(36096,e.depthAttachment),ze(36128,e.stencilAttachment),ze(33306,e.depthStencilAttachment);e=a.checkFramebufferStatus(It);a.isContextLost()||36053===e||Pt.raise("framebuffer configuration not supported, status = "+Kt[e]),a.bindFramebuffer(It,S.next?S.next.framebuffer:null),S.cur=S.next,a.getError()}function Ze(e,t){var w=new He;function _(e,t){Pt(S.next!==w,"can not update framebuffer which is currently in use");var n=0,r=0,o=!0,i=!0,a=null,s=!0,u="rgba",l="uint8",c=1,f=null,h=null,p=null,d=!1,y=("number"==typeof e?(n=0|e,r=0|t||n):e?(Pt.type(e,"object","invalid arguments for framebuffer"),"shape"in(t=e)?(e=t.shape,Pt(Array.isArray(e)&&2<=e.length,"invalid shape for framebuffer"),n=e[0],r=e[1]):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height)),("color"in t||"colors"in t)&&(a=t.color||t.colors,Array.isArray(a))&&Pt(1===a.length||x.webgl_draw_buffers,"multiple render targets not supported"),a||("colorCount"in t&&(c=0|t.colorCount,Pt(0<c,"invalid color buffer count")),"colorTexture"in t&&(s=!!t.colorTexture,u="rgba4"),"colorType"in t&&(l=t.colorType,s?(Pt(x.oes_texture_float||!("float"===l||"float32"===l),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Pt(x.oes_texture_half_float||!("half float"===l||"float16"===l),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===l||"float16"===l?(Pt(x.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),u="rgba16f"):"float"!==l&&"float32"!==l||(Pt(x.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),u="rgba32f"),Pt.oneOf(l,Q,"invalid color type")),"colorFormat"in t&&(u=t.colorFormat,0<=Z.indexOf(u)?s=!0:0<=K.indexOf(u)?s=!1:s?Pt.oneOf(t.colorFormat,Z,"invalid color format for texture"):Pt.oneOf(t.colorFormat,K,"invalid color format for renderbuffer"))),("depthTexture"in t||"depthStencilTexture"in t)&&(d=!(!t.depthTexture&&!t.depthStencilTexture),Pt(!d||x.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in t&&("boolean"==typeof t.depth?o=t.depth:(f=t.depth,i=!1)),"stencil"in t&&("boolean"==typeof t.stencil?i=t.stencil:(h=t.stencil,o=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?o=i=t.depthStencil:(p=t.depthStencil,i=o=!1))):n=r=1,null),e=null,t=null,g=null;if(Array.isArray(a))y=a.map(Ue);else if(a)y=[Ue(a)];else for(y=new Array(c),b=0;b<c;++b)y[b]=Ve(n,r,s,u,l);Pt(x.webgl_draw_buffers||y.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Pt(y.length<=H.maxColorAttachments,"too many color attachments, not supported"),n=n||y[0].width,r=r||y[0].height,f?e=Ue(f):o&&!i&&(e=Ve(n,r,d,"depth","uint32")),h?t=Ue(h):i&&!o&&(t=Ve(n,r,!1,"stencil","uint8")),p?g=Ue(p):!f&&!h&&i&&o&&(g=Ve(n,r,d,"depth stencil","depth stencil")),Pt(!!f+!!h+!!p<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");for(var v,m=null,b=0;b<y.length;++b)Ge(y[b],n,r),Pt(!y[b]||y[b].texture&&0<=Xt.indexOf(y[b].texture._texture.format)||y[b].renderbuffer&&0<=Zt.indexOf(y[b].renderbuffer._renderbuffer.format),"framebuffer color attachment "+b+" is invalid"),y[b]&&y[b].texture&&(v=qt[y[b].texture._texture.format]*Jt[y[b].texture._texture.type],null===m?m=v:Pt(m===v,"all color attachments much have the same number of bits per pixel."));return Ge(e,n,r),Pt(!e||e.texture&&6402===e.texture._texture.format||e.renderbuffer&&33189===e.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),Ge(t,n,r),Pt(!t||t.renderbuffer&&36168===t.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),Ge(g,n,r),Pt(!g||g.texture&&34041===g.texture._texture.format||g.renderbuffer&&34041===g.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),Xe(w),w.width=n,w.height=r,w.colorAttachments=y,w.depthAttachment=e,w.stencilAttachment=t,w.depthStencilAttachment=g,_.color=y.map(We),_.depth=We(e),_.stencil=We(t),_.depthStencil=We(g),_.width=w.width,_.height=w.height,Je(w),_}return J.framebufferCount++,_(e,t),St(_,{resize:function(e,t){Pt(S.next!==w,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n!==w.width||r!==w.height){for(var o=w.colorAttachments,i=0;i<o.length;++i)Ye(o[i],n,r);Ye(w.depthAttachment,n,r),Ye(w.stencilAttachment,n,r),Ye(w.depthStencilAttachment,n,r),w.width=_.width=n,w.height=_.height=r,Je(w)}return _},_reglType:"framebuffer",_framebuffer:w,destroy:function(){qe(w),Xe(w)},use:function(e){S.setFBO({framebuffer:_},e)}})}function Ke(e){this.id=ie++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.width=0,this.height=0,re.profile&&(this.stats={size:0})}function Qe(e){var t=e.renderbuffer;Pt(t,"must not double destroy renderbuffer"),l.bindRenderbuffer(At,null),l.deleteRenderbuffer(t),e.renderbuffer=null,e.refCount=0,delete n[e.id],ne.renderbufferCount--}function $e(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function et(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return e[n].location=t.location;e.push(t)}function tt(e,t,n){var r,o=35632===e?s:u,i=o[t];return i||(r=g.str(t),i=y.createShader(e),y.shaderSource(i,r),y.compileShader(i),Pt.shaderError(y,i,r,e,n),o[t]=i),i}function nt(e,t,n){var r,o=tt(35632,e.fragId),i=tt(35633,e.vertId),a=e.program=y.createProgram();if(y.attachShader(a,o),y.attachShader(a,i),n)for(c=0;c<n.length;++c){var s=n[c];y.bindAttribLocation(a,s[0],s[1])}y.linkProgram(a),Pt.linkError(y,a,g.str(e.fragId),g.str(e.vertId),t);for(var u=y.getProgramParameter(a,35718),l=(se.profile&&(e.stats.uniformsCount=u),e.uniforms),c=0;c<u;++c)if(r=y.getActiveUniform(a,c))if(1<r.size)for(var f=0;f<r.size;++f){var h=r.name.replace("[0]","["+f+"]");et(l,new $e(h,g.id(h),y.getUniformLocation(a,h),r))}else et(l,new $e(r.name,g.id(r.name),y.getUniformLocation(a,r.name),r));var p=y.getProgramParameter(a,35721),d=(se.profile&&(e.stats.attributesCount=p),e.attributes);for(c=0;c<p;++c)(r=y.getActiveAttrib(a,c))&&et(d,new $e(r.name,g.id(r.name),y.getAttribLocation(a,r.name),r))}function rt(e){this.id=de++,(pe[this.id]=this).buffer=e,this.primType=4,this.vertCount=0,this.type=0}function ot(e,t,n,r,o,i,a){var s;if(e.buffer.bind(),t?((u=a)||Ot(t)&&(!Mt(t)||Ot(t.data))||(u=ce.oes_element_index_uint?5125:5123),fe._initBuffer(e.buffer,t,n,u,3)):(le.bufferData(34963,i,n),e.buffer.dtype=s||5121,e.buffer.usage=n,e.buffer.dimension=3,e.buffer.byteLength=i),!(s=a)){switch(e.buffer.dtype){case 5121:case 5120:s=5121;break;case 5123:case 5122:s=5123;break;case 5125:case 5124:s=5125;break;default:Pt.raise("unsupported type for element array")}e.buffer.dtype=s}e.type=s,Pt(5125!==s||!!ce.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var t=o,u=(t<0&&(t=e.buffer.byteLength,5123===s?t>>=1:5125===s&&(t>>=2)),e.vertCount=t,r);r<0&&(u=4,1===(n=e.buffer.dimension)&&(u=0),2===n&&(u=1),3===n)&&(u=4),e.primType=u}function it(e){he.elementsCount--,Pt(null!==e.buffer,"must not double destroy elements"),delete pe[e.id],e.buffer.destroy(),e.buffer=null}function at(e){this.id=we++,this.buffer=p.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,me.profile&&(this.stats={size:0})}function st(e,t,n){e.byteLength=t.byteLength,p.bufferData(e.type,t,n)}function ut(e,t,n,r,o,i){var a,s,u,l,c,f;if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){for(var h=Gt(t),p=1,d=1;d<h.length;++d)p*=h[d];e.dimension=p,st(e,a=Ft(t,h,e.dtype),n),i?e.persistentData=a:kt.freeType(a)}else"number"==typeof t[0]?(e.dimension=o,Ut(f=kt.allocType(e.dtype,t.length),t),st(e,f,n),i?e.persistentData=f:kt.freeType(f)):Ot(t[0])?(e.dimension=t[0].length,e.dtype=r||zt(t[0])||5126,st(e,a=Ft(t,[t.length,t[0].length],e.dtype),n),i?e.persistentData=a:kt.freeType(a)):Pt.raise("invalid buffer data")}else Ot(t)?(e.dtype=r||zt(t),e.dimension=o,st(e,t,n),i&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)))):Mt(t)?(h=t.shape,f=t.stride,a=t.offset,c=l=u=s=0,1===h.length?(s=h[0],u=1,l=f[0],c=0):2===h.length?(s=h[0],u=h[1],l=f[0],c=f[1]):Pt.raise("invalid shape"),e.dtype=r||zt(t.data)||5126,e.dimension=u,Vt(f=kt.allocType(e.dtype,s*u),t.data,s,u,l,c,a),st(e,f,n),i?e.persistentData=f:kt.freeType(f)):t instanceof ArrayBuffer?(e.dtype=5121,e.dimension=o,st(e,t,n),i&&(e.persistentData=new Uint8Array(new Uint8Array(t)))):Pt.raise("invalid buffer data")}function lt(e){ve.bufferCount--,be(e);var t=e.buffer;Pt(t,"buffer must not be deleted already"),p.deleteBuffer(t),e.buffer=null,delete d[e.id]}function ct(){if(0===R.length)E&&E.update(),De=null;else{De=Rt.next(ct),wt();for(var e=R.length-1;0<=e;--e){var t=R[e];t&&t(j,null,0)}i.flush(),E&&E.update()}}function ft(){!De&&0<R.length&&(De=Rt.next(ct))}function ht(){De&&(Rt.cancel(ct),De=null)}function pt(e){e.preventDefault(),U=!0,ht(),Re.forEach(function(e){e()})}function dt(e){i.getError(),U=!1,V.restore(),je.restore(),Ee.restore(),Ce.restore(),Te.restore(),T.restore(),ke.restore(),E&&E.restore(),A.procs.refresh(),ft(),Le.forEach(function(e){e()})}function yt(e){function t(r,o){var i={},a={};return Object.keys(r).forEach(function(e){var t=r[e];if(Et.isDynamic(t))a[e]=Et.unbox(t,e);else{if(o&&Array.isArray(t))for(var n=0;n<t.length;++n)if(Et.isDynamic(t[n]))return void(a[e]=Et.unbox(t,e));i[e]=t}}),{dynamic:a,static:i}}Pt(!!e,"invalid args to regl({...})"),Pt.type(e,"object","invalid args to regl({...})");var r,n=t(e.context||{},!0),o=t(e.uniforms||{},!0),i=t(e.attributes||{},!1),e=t((delete(r=St({},e=e)).uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),h("blend"),h("depth"),h("cull"),h("stencil"),h("polygonOffset"),h("scissor"),h("sample"),"vao"in e&&(r.vao=e.vao),r),!1),a={gpuTime:0,cpuTime:0,count:0},s=A.compile(e,i,o,n,a),u=s.draw,l=s.batch,c=s.scope,f=[];function h(t){var n;t in r&&(n=r[t],delete r[t],Object.keys(n).forEach(function(e){r[t+"."+e]=n[e]}))}return St(function(e,t){var n;if(U&&Pt.raise("context lost"),"function"==typeof e)return c.call(this,null,e,0);if("function"!=typeof t)return"number"!=typeof e?Array.isArray(e)?e.length?l.call(this,e,e.length):void 0:u.call(this,e):0<e?l.call(this,function(e){for(;f.length<e;)f.push(null);return f}(0|e),0|e):void 0;if("number"==typeof e)for(n=0;n<e;++n)c.call(this,null,t,n);else{if(!Array.isArray(e))return c.call(this,e,t,0);for(n=0;n<e.length;++n)c.call(this,e[n],t,n)}},{stats:a,destroy:function(){s.destroy()}})}Ie&&(Ie.addEventListener(In,pt,!1),Ie.addEventListener(Rn,dt,!1));var gt=T.setFBO=yt({framebuffer:Et.define.call(null,1,"framebuffer")});function vt(e,t){var n=0,r=(A.procs.poll(),t.color);r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(i.clearDepth(+t.depth),n|=256),"stencil"in t&&(i.clearStencil(0|t.stencil),n|=1024),Pt(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function mt(t){return Pt.type(t,"function","regl.frame() callback must be a function"),R.push(t),ft(),{cancel:function(){var e=Ln(R,t);Pt(0<=e,"cannot cancel a frame twice"),R[e]=function e(){var t=Ln(R,e);R[t]=R[R.length-1],--R.length,R.length<=0&&ht()}}}}function bt(){var e=Ae.viewport,t=Ae.scissor_box;e[0]=e[1]=t[0]=t[1]=0,j.viewportWidth=j.framebufferWidth=j.drawingBufferWidth=e[2]=t[2]=i.drawingBufferWidth,j.viewportHeight=j.framebufferHeight=j.drawingBufferHeight=e[3]=t[3]=i.drawingBufferHeight}function wt(){j.tick+=1,j.time=xt(),bt(),A.procs.poll()}function _t(){Ce.refresh(),bt(),A.procs.refresh(),E&&E.update()}function xt(){return(Lt()-Pe)/1e3}_t();var L=St(yt,{clear:function(e){if(Pt("object"===Nn(e)&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;t<6;++t)gt(St({framebuffer:e.framebuffer.faces[t]},e),vt);else gt(e,vt);else vt(0,e)},prop:Et.define.bind(null,1),context:Et.define.bind(null,2),this:Et.define.bind(null,3),draw:yt({}),buffer:function(e){return Ee.create(e,34962,!1,!1)},elements:function(e){return Me.create(e,!1)},texture:Ce.create2D,cube:Ce.createCube,renderbuffer:Te.create,framebuffer:T.create,framebufferCube:T.createCube,vao:ke.createVAO,attributes:e,frame:mt,on:function(e,t){var n;switch(Pt.type(t,"function","listener callback must be a function"),e){case"frame":return mt(t);case"lost":n=Re;break;case"restore":n=Le;break;case"destroy":n=Ne;break;default:Pt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:C,hasExtension:function(e){return 0<=C.extensions.indexOf(e.toLowerCase())},read:I,destroy:function(){R.length=0,ht(),Ie&&(Ie.removeEventListener(In,pt),Ie.removeEventListener(Rn,dt)),je.clear(),T.clear(),Te.clear(),Ce.clear(),Me.clear(),Ee.clear(),ke.clear(),E&&E.clear(),Ne.forEach(function(e){e()})},_gl:i,_refresh:_t,poll:function(){wt(),E&&E.update()},now:xt,stats:O});return t.onDone(null,L),L}},"object"===Nn(t)?e.exports=r():void 0!==(n="function"==typeof(r=r)?r.call(t,n,t,e):r)&&(e.exports=n)},5515:function(e,t,n){"use strict";var i=n(56730),a=Array.prototype.concat,s=Array.prototype.slice,r=e.exports=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];i(o)?t=a.call(t,s.call(o)):t.push(o)}return t};r.wrap=function(e){return function(){return e(r(arguments))}}},43425:function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){"use strict";var a=new Uint8Array(0);function t(e){this._source=e,this._array=a,this._index=0}return t.prototype.read=function(){var r=this,o=r._array.subarray(r._index);return r._source.read().then(function(e){return r._array=a,r._index=0,e.done?0<o.length?{done:!1,value:o}:{done:!0,value:void 0}:{done:!1,value:(t=o,e=e.value,t.length?e.length?((n=new Uint8Array(t.length+e.length)).set(t),n.set(e,t.length),n):t:e)};var t,n})},t.prototype.slice=function(n){if((n|=0)<0)throw new Error("invalid length");var r,o=this,i=this._array.length-this._index;return this._index+n<=this._array.length?Promise.resolve(this._array.subarray(this._index,this._index+=n)):((r=new Uint8Array(n)).set(this._array.subarray(this._index)),function t(){return o._source.read().then(function(e){return e.done?(o._array=a,(o._index=0)<i?r.subarray(0,i):null):i+e.value.length>=n?(o._array=e.value,o._index=n-i,r.set(e.value.subarray(0,n-i),i),r):(r.set(e.value,i),i+=e.value.length,t())})}())},t.prototype.cancel=function(){return this._source.cancel()},function(e){return"function"==typeof e.slice?e:new t("function"==typeof e.read?e:e.getReader())}},"object"===o(t)?e.exports=r():void 0!==(n="function"==typeof(r=r)?r.call(t,n,t,e):r)&&(e.exports=n)},3679:function(){},55984:function(N,D,e){"use strict";var B=mapboxgl,l=e.n(B);function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}l().Map.prototype.overlayLayersManager={},void 0===l().Map.prototype.addLayerBak&&(l().Map.prototype.addLayerBak=l().Map.prototype.addLayer,l().Map.prototype.addLayer=function(e,t){return e.source||"custom"===e.type||"background"===e.type?(this.addLayerBak(e,t),e.overlay&&!this.overlayLayersManager[e.id]&&(this.overlayLayersManager[e.id]=e),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(t=this,(n=e).onAdd&&n.onAdd(t),this.overlayLayersManager[e.id]=e,this);var n}),l().Map.prototype.getLayer=function(e){return this.overlayLayersManager[e]||this.style.getLayer(e)},l().Map.prototype.moveLayer=function(e,t){return this.overlayLayersManager[e]?(this.overlayLayersManager[e].moveLayer?this.overlayLayersManager[e].moveLayer(e,t):(n=t,o=document.getElementById(e),n&&!(r=document.getElementById(n))&&l().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(n,'" does not exist on this document.'))}),o&&r?r.parentNode.insertBefore(o,r):o.parentNode.appendChild(o)),this):this.style._layers[e]?(this.style.moveLayer(e,t),this._update(!0),this):void 0;var n,r,o},l().Map.prototype.removeLayer=function(e){return this.overlayLayersManager[e]&&delete this.overlayLayersManager[e],this.style.removeLayer(e),this._update(!0),this},l().Map.prototype.setLayoutProperty=function(e,t,n){return this.overlayLayersManager[e]?"visibility"===t&&(o=n="visible"===n,(r=this.overlayLayersManager[e]).setVisibility&&r.setVisibility(o),this.style.fire("data",{dataType:"style"})):(this.style.setLayoutProperty(e,t,n),this._update(!0)),this;var r,o},l().Map.prototype.updateTransform=function(e,n,r,t,o,i,a){this.transform.units=e;var s=this.mercatorZfromAltitude;l().MercatorCoordinate.fromLngLat=function(e,t){t=t||0;e=l().LngLat.convert(e);return new(l().MercatorCoordinate)((e.lng-n)/i,(r-e.lat)/a,s(t,e.lat))},l().MercatorCoordinate.prototype.toLngLat=function(){return new(l().LngLat)(this.x*i+n,r-this.y*a)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+t+") / "+i+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))};F((B=G).prototype,[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t,e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=",n=(this.imageUrl&&(e=this.imageUrl),this.alt),r="width:94px;height:29px;",o=(this.imageUrl&&(r="width:"+(o=this.width)+";height:"+(t=this.height)+";",o&&t||(r="")),this.link);return this._container.innerHTML="<a href='"+o+"' target='_blank'><img src="+e+" alt='"+n+"' style='"+r+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e}}]),Object.defineProperty(B,"prototype",{writable:!1});B=G;function G(e){if(!(this instanceof G))throw new TypeError("Cannot call a class as a function");this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}z((K=V).prototype,[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new V(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return t=null!=e?this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h):t}},{key:"destroy",value:function(){this.w=null,this.h=null}}]),Object.defineProperty(K,"prototype",{writable:!1});var U=V;function V(e,t){if(!(this instanceof V))throw new TypeError("Cannot call a class as a function");this.w=e?parseFloat(e):0,this.h=e?parseFloat(t):0,this.CLASS_NAME="SuperMap.Size"}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}W((K=H).prototype,[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new H(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return t=null!=e?this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y):t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new H(this.x+e,this.y+t)}},{key:"offset",value:function(e){var t=this.clone();return t=e?this.add(e.x,e.y):t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}]),Object.defineProperty(K,"prototype",{writable:!1});var Y=H;function H(e,t,n){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");this.x=e?parseFloat(e):0,this.y=t?parseFloat(t):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}Y.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};function X(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];n=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");for(var n=0;n<r.length;n++)s(this,new r[n](t))},Object.defineProperty(n,"prototype",{writable:!1});for(var n,o=n,i=0;i<r.length;i++){var a=r[i];s(o,a),s(o.prototype,a.prototype),s(o.prototype,new a)}return o;function s(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var o,i=n[r];"constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i&&(o=Object.getOwnPropertyDescriptor(t,i),window.ActiveXObject?Object.defineProperty(e,i,o||{}):Object.defineProperty(e,i,o))}}}var q={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,o=t.length;r<o;r++){var i=t[r];n+=i.charAt(0).toUpperCase()+i.substring(1)}return n},format:function(e,i,a){return i=i||window,e.replace(q.tokenRegEx,function(e,t){for(var n,r=t.split(/\.+/),o=0;o<r.length;o++)n=(n=0==o?i:n)[r[o]];return void 0===(n="function"==typeof n?a?n.apply(null,a):n():n)?"undefined":n})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return q.numberRegEx.test(e)},numericIf:function(e){return q.isNumeric(e)?parseFloat(e):e}},J={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return n=0<t?parseFloat(e.toPrecision(t)):n},format:function(e,t,n,r){n=void 0!==n?n:J.thousandsSeparator,r=void 0!==r?r:J.decimalSeparator;e=(e=null!=(t=void 0!==t?t:0)?parseFloat(e.toFixed(t)):e).toString().split(".");1===e.length&&null==t&&(t=0);var o=e[0];if(n)for(var i=/(-?[0-9]+)([0-9]{3})/;i.test(o);)o=o.replace(i,"$1"+n+"$2");return 0==t?o:(e=1<e.length?e[1]:"0",null!=t&&(e+=new Array(t-e.length+1).join("0")),o+r+e)}},Z=(Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return J.limitSigDigs(this,e)}),{bind:function(t,n){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var e=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(n,e)}},bindAsEventListener:function(t,n){return function(e){return t.call(n,e||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}}),K={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i,a=0;a<o;a++)a in e&&(i=e[a],t.call(n,i,a,e))&&r.push(i)}return r}};function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Q((t=ee).prototype,[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new ee}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}]),Object.defineProperty(t,"prototype",{writable:!1});var $=ee;function ee(){if(!(this instanceof ee))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="SuperMap.Geometry",this.id=L.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=t="",re="pc",-1<(o=navigator.userAgent.toLowerCase()).indexOf("msie")||-1<o.indexOf("trident")&&-1<o.indexOf("rv")?(t="msie",n=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):-1<o.indexOf("chrome")?(t="chrome",n=o.match(/chrome\/([\d.]+)/)):-1<o.indexOf("firefox")?(t="firefox",n=o.match(/firefox\/([\d.]+)/)):-1<o.indexOf("opera")?(t="opera",n=o.match(/version\/([\d.]+)/)):-1<o.indexOf("safari")&&(t="safari",n=o.match(/version\/([\d.]+)/)),i=n?n[1]:"",-1<o.indexOf("ipad")||-1<o.indexOf("ipod")||-1<o.indexOf("iphone")?re="apple":-1<o.indexOf("android")&&(i=(n=o.match(/version\/([\d.]+)/))?n[1]:"",re="android");var ne={name:t,version:i,device:re},t=(o=!0,n=ne,o=!document.createElement("canvas").getContext||("firefox"===n.name&&parseFloat(n.version)<5&&(o=!1),"safari"===n.name&&parseFloat(n.version)<4&&(o=!1),"opera"===n.name&&parseFloat(n.version)<10&&(o=!1),"msie"===n.name&&parseFloat(n.version)<9)?!1:o),re=-1===(i=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==i.indexOf("gecko"),L={assign:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e},extend:function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}"function"==typeof window.Event&&t instanceof window.Event||!t.hasOwnProperty||!t.hasOwnProperty("toString")||(e.toString=t.toString)}return e},copy:function(e,t){var n;if(e=e||{},t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},reset:function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===te(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===te(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},getElement:function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},removeItem:function(e,t){for(var n=e.length-1;0<=n;n--)e[n]===t&&e.splice(n,1);return e},indexOf:function(e,t){if(null!=e){if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1},modifyDOMElement:function(e,t,n,r,o,i,a,s){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),0<=parseFloat(s)&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},applyDefaults:function(e,t){e=e||{};var n,r="function"==typeof window.Event&&t instanceof window.Event;for(n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},getParameterString:function(e){var t,n=[];for(t in e){var r=e[t];null!=r&&"function"!=typeof r&&(r=Array.isArray(r)||"[object Object]"===r.toString()?encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),n.push(encodeURIComponent(t)+"="+r))}return n.join("&")},urlAppend:function(e,t){var n=e;return t&&(0===t.indexOf("?")&&(t=t.substring(1)),n+=" "===(e=(e+" ").split(/[?&]/)).pop()?t:e.length?"&"+t:"?"+t),n},urlPathAppend:function(e,t){var n=e;if(!t)return n;0===t.indexOf("/")&&(t=t.substring(1));n=e.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),"".concat(n[0]).concat(t).concat(1<n.length?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(e,t){return null==t&&(t=L.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},rad:function(e){return e*Math.PI/180},getParameters:function(e){e=null==e?window.location.href:e;var t,n,r="";q.contains(e,"?")&&(t=e.indexOf("?")+1,n=q.contains(e,"#")?e.indexOf("#"):e.length,r=e.substring(t,n));for(var o={},i=r.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}u=(u[1]||"").replace(/\+/g," ");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}1==(u=u.split(",")).length&&(u=u[0]),o[l]=u}}return o},lastSeqID:0,createUniqueID:function(e){return null==e&&(e="id_"),L.lastSeqID+=1,e+L.lastSeqID},normalizeScale:function(e){return 1<e?1/e:e},getResolutionFromScale:function(e,t){var n;return e&&(null==t&&(t="degrees"),n=1/(L.normalizeScale(e)*r[t]*96)),n},getScaleFromResolution:function(e,t){return e*r[t=null==t?"degrees":t]*96},getBrowser:function(){return ne},isSupportCanvas:t,supportCanvas:function(){return L.isSupportCanvas},isInTheSameDomain:function(e){var t,n,r,o,i,a,s;return!e||(i=e.indexOf("//"),s=(r=document.location.toString()).indexOf("//"),-1===i)||(n=t=e.substring(0,i),s=(r=r.substring(s+2)).indexOf("/"),o=r.indexOf(":"),r=r.substring(0,s),s=document.location.protocol,-1===o&&(r+=":"+("http:"===s.toLowerCase()?80:443)),s.toLowerCase()===n.toLowerCase()&&(o=(n=e.substring(i+2)).indexOf(":"),i=n.indexOf("/"),s=n.substring(0,i),-1!==o?a=n.substring(0,o):(a=n.substring(0,i),s+=":"+("http:"===t.toLowerCase()?80:443)),a===document.domain)&&s===r)},calculateDpi:function(e,t,n,r,o){var i,a;if(e&&t&&n)return i=e.getWidth(),e=e.getHeight(),a=t.w,t=t.h,o=o||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/((r=e/t)<(e=i/a)?e:r)/n/(2*Math.PI*o/360)/1e4:254/(i/a)/n/1e4},toJSON:function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n="",r=0,o=t.length;r<o;r++)n+=L.toJSON(t[r]),r!==t.length-1&&(n+=",");return"["+n+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"!==te(t))return t.toString();if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(L.toJSON(t[a]));return"["+i.join(",")+"]"}var u,l=[];for(u in t)"function"!=typeof t[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+L.toJSON(t[u]));return 0<l.length?"{"+l.join(",")+"}":"{}"}},getResolutionFromScaleDpi:function(e,t,n,r){return r=r||6378137,n=n||"",0<e&&0<t?(e=L.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4):-1},getScaleFromResolutionDpi:function(e,t,n,r){return r=r||6378137,n=n||"",0<e&&0<t?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},transformResult:function(e){return e=e.responseText&&"string"==typeof e.responseText?JSON.parse(e.responseText):e},copyAttributes:function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},copyAttributesWithClip:function(e,t,n){if(e=e||{},t)for(var r in t){var o,i=!1;if(n&&n.length)for(var a=0,s=n.length;a<s;a++)if(r===n[a]){i=!0;break}!0!==i&&void 0!==(o=t[r])&&"CLASS_NAME"!==r&&"function"!=typeof o&&(e[r]=o)}return e},cloneObject:function(e){if(null===e||"object"!==te(e))return e;var t;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array)return e.slice(0);if(e instanceof Object){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=L.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(e,t,n,r){var o,i=(r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x),a=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),s=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);return 0!=s?(o=a/s,0<=(s=i/s)&&o<=1&&s<=1&&0<=o?new $.Point(e.x+s*(t.x-e.x),e.y+s*(t.y-e.y)):"No Intersection"):0==i&&0==a&&(o=Math.max(e.y,t.y),s=Math.min(e.y,t.y),i=Math.max(e.x,t.x),a=Math.min(e.x,t.x),(n.y>=s&&n.y<=o||r.y>=s&&r.y<=o)&&n.x>=a&&n.x<=i||r.x>=a&&r.x<=i)?"Coincident":"Parallel"},getTextBounds:function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;e=n.clientWidth,t=n.clientHeight;return document.body.removeChild(n),{textWidth:e,textHeight:t}},convertPath:function(e,n){return n?e.replace(/\{([\w-\.]+)\}/g,function(e,t){t=n.hasOwnProperty(t)?null==(t=n[t])?"":t instanceof Date?t.toJSON():function(e){if("string"==typeof e||"object"===te(e))try{var t=e.toString();return"[object Object]"===t||"[object Array]"===t}catch(e){}}(t)?JSON.stringify(t):t.toString():e;return encodeURIComponent(t)}):e}},r={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};r.in=r.inches,r.degrees=r.dd,r.nmi=1852*r.m;function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}L.extend(r,{Inch:r.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),L.extend(r,{mm:r.Meter/1e3,cm:r.Meter/100,dm:100*r.Meter,km:1e3*r.Meter,kmi:r.nmi,fath:r.Fathom,ch:r.IntnlChain,link:r.IntnlLink,"us-in":r.inches,"us-ft":r.Foot,"us-yd":r.Yard,"us-ch":r.GunterChain,"us-mi":r.Mile,"ind-yd":r.IndianYd37,"ind-ft":r.IndianFt37,"ind-ch":791.9942845122}),r.degree=r.dd,r.meter=r.m,r.foot=r.ft,r.inch=r.inches,r.mile=r.mi,r.kilometer=r.km,r.yard=r.yd;n=[{key:"fromString",value:function(e){e=e.split(",");return new ae(e[0],e[1])}},{key:"fromArray",value:function(e){var t=L.isArray(e);return new ae(t&&e[0],t&&e[1])}}],oe((o=ae).prototype,[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new ae(this.lon,this.lat)}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new ae(this.lon+L.toFloat(e),this.lat+L.toFloat(t))}},{key:"equals",value:function(e){var t=!1;return t=null!=e?this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat):t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}]),oe(o,n),Object.defineProperty(o,"prototype",{writable:!1});var n,ie=ae;function ae(e,t){if(!(this instanceof ae))throw new TypeError("Cannot call a class as a function");L.isArray(e)&&(t=e[1],e=e[0]),this.lon=e?L.toFloat(e):0,this.lat=t?L.toFloat(t):0,this.CLASS_NAME="SuperMap.LonLat"}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i=[{key:"fromString",value:function(e,t){e=e.split(",");return ue.fromArray(e,t)}},{key:"fromArray",value:function(e,t){return!0===t?new ue(e[1],e[0],e[3],e[2]):new ue(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new ue(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return(t+="t"===e.charAt(0)?"b":"t")+("l"===e.charAt(1)?"r":"l")}}],se((t=ue).prototype,[{key:"clone",value:function(){return new ue(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return t=null!=e?this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom:t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var e=Math.pow(10,e),n=Math.round(this.left*e)/e,r=Math.round(this.bottom*e)/e,o=Math.round(this.right*e)/e,e=Math.round(this.top*e)/e;return!0===t?r+","+n+","+e+","+o:n+","+r+","+o+","+e}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new U(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new Y((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new ie((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,t){var n;return e=e||1,t="SuperMap.LonLat"===(t=null==t?this.getCenterLonLat():t).CLASS_NAME?(n=t.lon,t.lat):(n=t.x,t.y),new ue((this.left-n)*e+n,(this.bottom-t)*e+t,(this.right-n)*e+n,(this.top-t)*e+t)}},{key:"add",value:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new ue(this.left+e,this.bottom+t,this.right+e,this.top+t)}},{key:"extend",value:function(e){var t=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":t=new ue(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":t=new ue(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":t=e}t&&(((this.centerLonLat=null)==this.left||t.left<this.left)&&(this.left=t.left),(null==this.bottom||t.bottom<this.bottom)&&(this.bottom=t.bottom),(null==this.right||t.right>this.right)&&(this.right=t.right),null==this.top||t.top>this.top)&&(this.top=t.top)}}},{key:"containsLonLat",value:function(e,t){var n,r=this.contains(e.lon,e.lat,(t=(t="boolean"==typeof t?{inclusive:t}:t)||{}).inclusive),o=t.worldBounds;return o&&!r&&(n=o.getWidth(),o=(o.left+o.right)/2,o=Math.round((e.lon-o)/n),r=this.containsLonLat({lon:e.lon-o*n,lat:e.lat},{inclusive:t.inclusive})),r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,n){return null==n&&(n=!0),null!=e&&null!=t&&(n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top)}},{key:"intersectsBounds",value:function(e,t){(t=(t="boolean"==typeof t?{inclusive:t}:t)||{}).worldBounds?(n=this.wrapDateLine(t.worldBounds),e=e.wrapDateLine(t.worldBounds)):n=this,null==t.inclusive&&(t.inclusive=!0);var n,r,o,i,a=!1,s=n.left===e.right||n.right===e.left||n.top===e.bottom||n.bottom===e.top;return!t.inclusive&&s||(s=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,r=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,o=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,i=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right,a=(s||r)&&(o||i)),t.worldBounds&&!a&&(r=(s=t.worldBounds).getWidth(),o=!s.containsBounds(n),i=!s.containsBounds(e),o&&!i?(e=e.add(-r,0),a=n.intersectsBounds(e,{inclusive:t.inclusive})):i&&!o&&(n=n.add(-r,0),a=e.intersectsBounds(n,{inclusive:t.inclusive}))),a}},{key:"containsBounds",value:function(e,t,n){null==t&&(t=!1);var r=this.contains(e.left,e.bottom,n=null==n?!0:n),o=this.contains(e.right,e.bottom,n),i=this.contains(e.left,e.top,n),e=this.contains(e.right,e.top,n);return t?r||o||i||e:r&&o&&i&&e}},{key:"determineQuadrant",value:function(e){var t="",n=this.getCenterLonLat();return(t+=e.lat<n.lat?"b":"t")+(e.lon<n.lon?"l":"r")}},{key:"wrapDateLine",value:function(e,t){var n=(t=t||{}).leftTolerance||0,r=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-r<=e.left;)o=o.add(i,0);for(;o.left+n>=e.right&&o.right>e.right;)o=o.add(-i,0);t=o.left+n;t<e.right&&t>e.left&&o.right-r>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}]),se(t,i),Object.defineProperty(t,"prototype",{writable:!1});var O=ue;function ue(e,t,n,r){if(!(this instanceof ue))throw new TypeError("Cannot call a class as a function");L.isArray(e)&&(r=e[3],n=e[2],t=e[1],e=e[0]),this.left=null!=e?L.toFloat(e):this.left,this.bottom=null!=t?L.toFloat(t):this.bottom,this.right=null!=n?L.toFloat(n):this.right,this.top=null!=r?L.toFloat(r):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(){var e=a,t=$;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=pe(n),t=(e=r?(e=pe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==le(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r){var o;if(this instanceof a)return(o=i.call(this,e,t,n,r)).x=parseFloat(e),o.y=parseFloat(t),o.tag=r||0==r?parseFloat(r):null,o.type=n||"Point",o.CLASS_NAME="SuperMap.Geometry.Point",o.geometryType="Point",o;throw new TypeError("Cannot call a class as a function")}return ce((e=a).prototype,[{key:"clone",value:function(e){return null==e&&(e=new a(this.x,this.y)),L.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new O(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return t=null!=e?this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y):t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,fe(pe(a.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(){return(ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ve(e,t){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(){var e=i,t=$;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=me(n),t=(e=r?(e=me(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==de(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this)).components=[],(t.componentTypes=null)!=e&&t.addComponents(e),t.CLASS_NAME="SuperMap.Geometry.Collection",t.geometryType="Collection",t;throw new TypeError("Cannot call a class as a function")}return ye((e=i).prototype,[{key:"destroy",value:function(){this.components.length=0,this.components=null,ge(me(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new i,t=0,n=this.components.length;t<n;t++)e.addComponent(this.components[t].clone());return L.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new O,t=this.components;if(t)for(var n=0,r=t.length;n<r;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){for(var t=0,n=(e=L.isArray(e)?e:[e]).length;t<n;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var n,r=!1;return e&&(null==this.componentTypes||-1<L.indexOf(this.componentTypes,e.CLASS_NAME))&&(null!=t&&t<this.components.length?(n=this.components.slice(0,t),t=this.components.slice(t,this.components.length),n.push(e),this.components=n.concat(t)):this.components.push(e),(e.parent=this).clearBounds(),r=!0),r}},{key:"removeComponents",value:function(e){for(var t=!1,n=(e=L.isArray(e)?e:[e]).length-1;0<=n;--n)t=this.removeComponent(e[n])||t;return t}},{key:"removeComponent",value:function(e){return L.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(L.isArray(e.components)&&e.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return(xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(){var e=i,t=be;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Se(n),t=(e=r?(e=Se(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==we(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.MultiPoint",e.geometryType="MultiPoint",e;throw new TypeError("Cannot call a class as a function")}return _e((e=i).prototype,[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(){var e=i,t=Oe;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ke(n),t=(e=r?(e=ke(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Pe(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],e.CLASS_NAME="SuperMap.Geometry.Curve",e.geometryType="Curve",e;throw new TypeError("Cannot call a class as a function")}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(){return(Te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ie(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ae(e,t){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(){var e=s,t=Me;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ie(n),t=(e=r?(e=Ie(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==je(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e){if(this instanceof s)return(e=o.call(this,e)).CLASS_NAME="SuperMap.Geometry.LineString",e.geometryType="LineString",e;throw new TypeError("Cannot call a class as a function")}return e=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t,n={},r=e[0],o=e[1],e=e[2],i=!0,a=0,s=[],u=(e.y-r.y)/(e.x-r.x),l=e.y-u*e.x;if(e.x!=r.x&&e.y!=r.y&&o.y==u*o.x+l||e.x==r.x&&o.x==r.x||e.y==r.y&&o.y==r.y||e.x==r.x&&e.y==r.y||e.x==o.x&&e.y==o.y||r.x==o.x&&r.y==o.y)s.push(r),s.push(o);else{var c=(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(e.y-r.y))-(e.x*e.x+e.y*e.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y)),f=2*(o.x-r.x)*(e.x*e.x+e.y*e.y-(r.x*r.x+r.y*r.y))-2*(e.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y)),h=4*((o.x-r.x)*(e.y-r.y)-(e.x-r.x)*(o.y-r.y));n.x=c/h,n.y=f/h;var c=(c=1<=(c=(2*(t=Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)))*t-((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))/(2*t*t))?1:c)<=-1?-1:c,f=180*Math.acos(c)/Math.PI,p=(e.x==r.x?n.x>r.x&&o.x>r.x||n.x<r.x&&o.x<r.x?360-f:f:u*n.x+l<n.y&&o.y>u*o.x+l||n.y<u*n.x+l&&o.y<u*o.x+l?360-f:f)/72,d=(e.y!=r.y?e.x==r.x?e.y>r.y?o.x<r.x&&(i=!1):o.x>r.x&&(i=!1):e.x<r.x?o.y<u*o.x+l&&(i=!1):o.y>u*o.x+l&&(i=!1):e.x>r.x?o.y>r.y&&(i=!1):o.y<r.y&&(i=!1),(r.y-n.y)/(r.x-n.x)),y=0<=d?180*Math.atan(d)/Math.PI:Math.abs(180*Math.atan(d)/Math.PI)+90,h=Math.abs(n.y),g=(r.y==h&&h==e.y&&r.x<e.x&&(y+=180),r.y-n.y);s.push(r);for(var v=1;v<72;v++){m=p*v,a=y,i?0<=g?0<=d?a+=m:a=180-(a-90)+m:a=0<d?a-180+m:90-a+m:0<=g?0<=d?a-=m:a=180-(a-90)-m:a=0<=d?a-180-m:90-a-m;var a=a*Math.PI/180,m=n.x+t*Math.cos(a),b=n.y+t*Math.sin(a);s.push(new j(m,b))}}return s.push(e),s}},{key:"createLineEPS",value:function(e){var t=[],n=e.length;if(n<2)return e;for(var r,o=0;o<n;)"LTypeArc"==e[o].type?(t=(r=s.createLineArc(t,o,n,e))[0],o=r[1]):(t.push(e[o]),o++);return t}},{key:"createLineArc",value:function(e,t,n,r){var o;return 0==t?(o=s.addPointEPS(r,t,n,"LTypeArc"),Array.prototype.push.apply(e,o[0]),t=o[1]+1):t==n-1?(o=[r[t-1],r[t]],o=s.calculateCircle(o),Array.prototype.push.apply(e,o),t++):(o=s.addPointEPS(r,t,n,"LTypeArc"),e.pop(),Array.prototype.push.apply(e,o[0]),t=o[1]+1),[e,t]}},{key:"addPointEPS",value:function(e,t,n,r){var o,i=[],a=t+1;return 0==t?Array.prototype.push.apply(i,[e[t],e[t+1]]):t==n-1?Array.prototype.push.apply(i,[e[t-1],e[t]]):Array.prototype.push.apply(i,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==r?o=s.calculatePointsFBZN(i):"LTypeArc"==r&&(o=s.calculateCircle(i)),[o,a]}}],Ce((t=s).prototype,[{key:"removeComponent",value:function(e){var t=this.components&&2<this.components.length;return t&&Te(Ie(s.prototype),"removeComponent",this).apply(this,arguments),t}},{key:"getSortedSegments",value:function(){for(var e,t,n=this.components.length-1,r=new Array(n),o=0;o<n;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?r[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:r[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return r.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}]),Ce(t,e),Object.defineProperty(t,"prototype",{writable:!1}),s}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(){return(De="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fe(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Be(e,t){return(Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ge=function(){var e=i,t=Re;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Fe(n),t=(e=r?(e=Fe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Le(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.LinearRing",e.geometryType="LinearRing",e;throw new TypeError("Cannot call a class as a function")}return Ne((e=i).prototype,[{key:"addComponent",value:function(e,t){var n=!1,r=this.components.pop(),t=(null==t&&e.equals(r)||(n=De(Fe(i.prototype),"addComponent",this).apply(this,arguments)),this.components[0]);return De(Fe(i.prototype),"addComponent",this).apply(this,[t]),n}},{key:"removeComponent",value:function(e){var t,n=this.components&&3<this.components.length;return n&&(this.components.pop(),De(Fe(i.prototype),"removeComponent",this).apply(this,arguments),t=this.components[0],De(Fe(i.prototype),"addComponent",this).apply(this,[t])),n}},{key:"getArea",value:function(){var e=0;if(this.components&&2<this.components.length){for(var t=0,n=0,r=this.components.length;n<r-1;n++){var o=this.components[n],i=this.components[n+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(){var e=i,t=be;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=We(n),t=(e=r?(e=We(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ze(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.LinearRing"],e.CLASS_NAME="SuperMap.Geometry.Polygon",e.geometryType="Polygon",e;throw new TypeError("Cannot call a class as a function")}return Ue((e=i).prototype,[{key:"getArea",value:function(){var e=0;if(this.components&&0<this.components.length){e+=Math.abs(this.components[0].getArea());for(var t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea())}return e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}He((o=qe).prototype,[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}]),Object.defineProperty(o,"prototype",{writable:!1});var Xe=qe;function qe(e,t,n){if(!(this instanceof qe))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=L.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=t,this.data=null!=n?n:{}}function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$e(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Qe(e,t){return(Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et="Unknown",tt="Delete",nt=function(){var e=i,t=Xe;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Qe(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$e(n),t=(e=r?(e=$e(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Je(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){var r;if(this instanceof i)return(r=o.call(this,null,null,t)).fid=null,r.geometry=e||null,r.attributes={},t&&(r.attributes=L.extend(r.attributes,t)),r.bounds=null,r.state=null,r.style=n||null,r.url=null,r.lonlat=null,r.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},r;throw new TypeError("Cannot call a class as a function")}return Ze((e=i).prototype,[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Ke($e(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if("Update"===e)switch(this.state){case et:case tt:this.state=e}else if("Insert"===e)this.state!==et&&(this.state=e);else if(e===tt)switch(this.state){case"Insert":case tt:break;case et:case"Update":this.state=e}else e===et&&(this.state=e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rt((i=it).prototype,[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}]),Object.defineProperty(i,"prototype",{writable:!1});var ot=it;function it(e){if(!(this instanceof it))throw new TypeError("Cannot call a class as a function");this.data=null,this.keepData=!1,L.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ut(e,t){return(ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ct=function(){var e=i,t=ot;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ut(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=lt(n),t=(e=r?(e=lt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==at(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).indent="    ",e.space=" ",e.newline="\n",e.level=0,e.pretty=!1,e.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),e.CLASS_NAME="SuperMap.Format.JSON",e.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,n,r,o=["{"],i=(this.level+=1,!1);for(t in e)e.hasOwnProperty(t)&&(n=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=n)&&null!=r&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),i=!0);return--this.level,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,o=e.length;r<o;++r)null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(0<r&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return--this.level,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,t){return n[t]||(t=t.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},e;throw new TypeError("Cannot call a class as a function")}return st((e=i).prototype,[{key:"read",value:function(e,t){var n;if(this.nativeJSON)try{n=JSON.parse(e,t)}catch(t){return{data:e}}return this.keepData&&(this.data=n),n}},{key:"write",value:function(e,t){this.pretty=!!t;var t=null,n=at(e);if(this.serialize[n])try{t=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return t}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){return(ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=function(){var e=i,t=be;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=pt(n),t=(e=r?(e=pt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ft(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.LineString"],e.CLASS_NAME="SuperMap.Geometry.MultiLineString",e.geometryType="MultiLineString",e;throw new TypeError("Cannot call a class as a function")}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}();function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(){var e=i,t=be;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vt(n),t=(e=r?(e=vt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==yt(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).componentTypes=["SuperMap.Geometry.Polygon"],e.CLASS_NAME="SuperMap.Geometry.MultiPolygon",e.geometryType="MultiPolygon",e;throw new TypeError("Cannot call a class as a function")}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}();function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t=[{key:"fromJson",value:function(e){var t,n;if(e)return t=new wt,n=255,null!==e.red&&(n=Number(e.red)),t.red=n,n=0,null!==e.green&&(n=Number(e.green)),t.green=n,n=0,null!==e.blue&&(n=Number(e.blue)),t.blue=n,t}}],bt((o=wt).prototype,[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}]),bt(o,t),Object.defineProperty(o,"prototype",{writable:!1});var u=wt;function wt(e,t,n){if(!(this instanceof wt))throw new TypeError("Cannot call a class as a function");this.red=e||0==e?e:255,this.green=t||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i=[{key:"fromJson",value:function(e){if(e)return new xt({fillBackColor:u.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:u.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:u.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],_t((t=xt).prototype,[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){return L.copyAttributes({},this)}}]),_t(t,i),Object.defineProperty(t,"prototype",{writable:!1});var c=xt;function xt(e){if(!(this instanceof xt))throw new TypeError("Cannot call a class as a function");this.fillBackColor=new u(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new u(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new u(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(){var e=i,t=j;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=kt(n),t=(e=r?(e=kt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===St(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Et(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).measure=null,e&&L.extend(Et(t),e),t.CLASS_NAME="SuperMap.PointWithMeasure",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromJson",value:function(e){if(e)return new i({x:e.x,y:e.y,measure:e.measure})}}],Ot((t=i).prototype,[{key:"equals",value:function(e){var t,n,r=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),e=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure),r=t||n&&e),r}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&null!=this.measure&&(e+='"measure":'+this.measure+","),(e=(e+='"x":'+this.x+",")+('"y":'+this.y))+"}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}]),Ot(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function At(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rt=function(){var e=l,t=be;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t);n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=It(n),t=(e=r?(e=It(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return At(t)};function l(e,t){if(this instanceof l)return(e=o.call(this,e,t)).id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.parts=null,e.points=null,e.type=null,e.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&L.extend(At(e),t),e.CLASS_NAME="SuperMap.Route",e.geometryType="LINEM",e;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromJson",value:function(e){if(e){var t=e.parts||[],n=e.points||[],r=t.length,o=[];if(!(0<r))return null;for(var i=0,a=0,s=[];i<r;i++){for(var u=0;u<t[i];u++)s.push(Mt.fromJson(n[a+u]));a+=t[i],s[0].equals(s[t[i]-1])?o.push(new Ge(s)):o.push(new Re(s)),s=[]}return new l(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],Ct((t=l).prototype,[{key:"toJson",value:function(){var e="{";if(null!=this.id&&null!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&null!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&null!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&null!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&null!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&null!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&null!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&null!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&0<this.components.length){e+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var o=0,i=this.components[n].components.length;o<i;o++)e+=this.components[n].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return(e=e.replace(/,$/g,""))+"}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}]),Ct(t,e),Object.defineProperty(t,"prototype",{writable:!1}),l}(),a={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},Lt={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},Nt={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},Dt={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},Bt={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},Ft={DISTANCE:"DISTANCE",AREA:"AREA"},Gt={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},zt={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},Ut={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},Vt={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},Wt={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},Yt={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},Ht={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Xt={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},qt={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},Jt={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Zt={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Kt={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},Qt={FLAT:"FLAT",ROUND:"ROUND"},$t={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},en={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},tn={BSPLINE:"BSPLINE",POLISH:"POLISH"},nn={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},rn={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},on={ADD:"add",UPDATE:"update",DELETE:"delete"},an={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},sn={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},un={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},ln={EXP1:"EXP1",EXP2:"EXP2"},cn={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},fn={CLIP:"clip",INTERSECT:"intersect"},hn={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},pn={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},dn={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},yn={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},gn={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},vn={GEOHASH_GRID:"geohash_grid"},mn={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},bn={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}o=[{key:"fromJson",value:function(e){if(e)return new _n({id:e.id,style:c.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var t=0,n=[],r=[],o=null,i=e.components,a=e.CLASS_NAME,s={epsgCode:e.SRID};if(isNaN(e.id)||(t=e.id),"SuperMap.Geometry.LinearRing"!=a&&"SuperMap.Geometry.LineString"!=a&&(e instanceof Oe||e instanceof dt)){for(var u=i.length,l=0;l<u;l++){var c=i[l].getVertices(),f=c.length;n.push(f);for(var h=0;h<f;h++)r.push(new j(c[h].x,c[h].y))}o="SuperMap.Geometry.MultiPoint"==a?Nt.POINT:Nt.LINE}else if(e instanceof mt){for(var p=i.length,d=0;d<p;d++)for(var y=i[d].components,g=y.length,v=0;v<g;v++){var m=y[v].getVertices(),b=m.length+1;n.push(b);for(var w=0;w<b-1;w++)r.push(new j(m[w].x,m[w].y));r.push(new j(m[0].x,m[0].y))}o=Nt.REGION}else if(e instanceof Ye){for(var _=i.length,x=0;x<_;x++){var S=i[x].getVertices(),O=S.length+1;n.push(O);for(var P=0;P<O-1;P++)r.push(new j(S[P].x,S[P].y));r.push(new j(S[0].x,S[0].y))}o=Nt.REGION}else{for(var E=e.getVertices(),k=E.length,M=0;M<k;M++)r.push(new j(E[M].x,E[M].y));e instanceof Ge&&(r.push(new j(E[0].x,E[0].y)),k++),n.push(k),o=e instanceof j?Nt.POINT:Nt.LINE}return new _n({id:t,style:null,parts:n,points:r,type:o,prjCoordSys:s})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var n=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++)n+=e[r].y*(e[r-1].x-e[r+1].x);return.5*n}},{key:"bubbleSort",value:function(e,t,n,r){for(var o,i=0;i<e.length;i++)for(var a=0;a<e.length;a++)e[i]>e[a]&&(o=e[a],e[a]=e[i],e[i]=o,o=t[a],t[a]=t[i],t[i]=o,n&&0<n.length&&(o=n[a],n[a]=n[i],n[i]=o),r)&&0<r.length&&(o=r[a],r[a]=r[i],r[i]=o)}}],wn((i=_n).prototype,[{key:"destroy",value:function(){this.id=null,this.style=null,this.parts=null,this.partTopo=null,this.points=null,this.type=null,this.prjCoordSys=null}},{key:"toGeometry",value:function(){switch(this.type.toUpperCase()){case Nt.POINT:return this.toGeoPoint();case Nt.LINE:return this.toGeoLine();case Nt.LINEM:return this.toGeoLinem();case Nt.REGION:return this.toGeoRegion();case Nt.POINTEPS:return this.toGeoPoint();case Nt.LINEEPS:return this.toGeoLineEPS();case Nt.REGIONEPS:return this.toGeoRegionEPS();case Nt.GEOCOMPOUND:return this.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(0<n){if(1===n)return new j(t[0].x,t[0].y);for(var r=[],o=0;o<n;o++)r.push(new j(t[o].x,t[o].y));return new Oe(r)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(0<n){if(1===n){for(var r=[],o=0;o<e[0];o++)r.push(new j(t[o].x,t[o].y));return new(r[0].equals(r[e[0]-1])?Ge:Re)(r)}for(var i=[],a=0;a<n;a++){for(var s=[],u=0;u<e[a];u++)s.push(new j(t[u].x,t[u].y));i.push(new Re(s)),t.splice(0,e[a])}return new dt(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,n,r,o,i=this.parts||[],a=this.points||[],s=i.length;if(0<s){if(1===s){for(e=0,n=[];e<i[0];e++)n.push(new j(a[e].x,a[e].y,a[e].type));return new(n[0].equals(n[i[0]-1])?(o=Re.createLineEPS(n),Ge):(o=Re.createLineEPS(n),Re))(o)}for(e=0,r=[];e<s;e++){for(t=0,n=[];t<i[e];t++)n.push(new j(a[t].x,a[t].y));o=Re.createLineEPS(n),r.push(new Re(o)),a.splice(0,i[e])}return new dt(r)}return null}},{key:"toGeoLinem",value:function(){return Rt.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],t=this.partTopo||[],n=this.points||[],r=e.length;if(r<=0)return null;var o=[],i=[];if(1==r){for(var a=0;a<n.length;a++)i.push(new j(n[a].x,n[a].y));o.push(new Ye([new Ge(i)]))}else{for(var s=[],u=[],l=[],c=[],f=[],h=0,p=0;h<r;h++){for(var d=0;d<e[h];d++)i.push(new j(n[p+d].x,n[p+d].y));p+=e[h];var y=new Ye([new Ge(i)]),i=[];l.push(y),0===t.length&&c.push(y.getBounds()),f.push(1),u.push(y.getArea())}if(0===t.length){_n.bubbleSort(u,l,t,c);for(var g=[],v=1;v<l.length;v++)for(var m=v-1;0<=m;m--)if(g[v]=-1,c[m].containsBounds(c[v])){f[v]=-1*f[m],f[v]<0&&(g[v]=m);break}for(var b=0;b<l.length;b++)0<f[b]?o.push(l[b]):(o[g[b]].components=o[g[b]].components.concat(l[b].components),o.push(""))}else for(var o=new Array,w=0;w<l.length;w++)if(t[w]&&-1==t[w]?s=s.concat(l[w].components):(0<s.length&&0<o.length&&(o[o.length-1].components=o[o.length-1].components.concat(s),s=[]),o.push(l[w])),w==r-1){var _=o.length;if(_)o[_-1].components=o[_-1].components.concat(s);else for(var x=0,S=s.length;x<S;x++)o.push(new Ye(s))}}return new mt(o)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],t=this.partTopo||[],n=this.points||[],r=e.length;if(r<=0)return null;var o=[],i=[];if(1==r){for(var a=0;a<n.length;a++)i.push(new j(n[a].x,n[a].y));y=Re.createLineEPS(i),o.push(new Ye([new Ge(y)]))}else{for(var s=[],u=[],l=[],c=[],f=[],h=0,p=0;h<r;h++){for(var d=0;d<e[h];d++)i.push(new j(n[p+d].x,n[p+d].y));p+=e[h];var y=Re.createLineEPS(i),g=new Ye([new Ge(y)]),i=[];l.push(g),0===t.length&&c.push(g.getBounds()),f.push(1),u.push(g.getArea())}if(0===t.length){_n.bubbleSort(u,l,t,c);for(var v=[],m=1;m<l.length;m++)for(var b=m-1;0<=b;b--)if(v[m]=-1,c[b].containsBounds(c[m])){f[m]=-1*f[b],f[m]<0&&(v[m]=b);break}for(var w=0;w<l.length;w++)0<f[w]?o.push(l[w]):(o[v[w]].components=o[v[w]].components.concat(l[w].components),o.push(""))}else for(var o=new Array,_=0;_<l.length;_++)if(t[_]&&-1==t[_]?s=s.concat(l[_].components):(0<s.length&&0<o.length&&(o[o.length-1].components=o[o.length-1].components.concat(s),s=[]),o.push(l[_])),_==r-1){var x=o.length;if(x)o[x-1].components=o[x-1].components.concat(s);else for(var S=0,O=s.length;S<O;S++)o.push(new Ye(s))}}return new mt(o)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],t=e.length;if(t<=0)return null;for(var n=[],r=0;r<t;r++){var o=e[r];n.push(new _n(o).toGeometry())}return new be(n)}}]),wn(i,o),Object.defineProperty(i,"prototype",{writable:!1});var s=_n;function _n(e){if(!(this instanceof _n))throw new TypeError("Cannot call a class as a function");this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}function xn(e){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(){return(On="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=En(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Pn(e,t){return(Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e){return"[object Array]"==Object.prototype.toString.call(e)}function Mn(e){return"string"==typeof e&&e.constructor===String}var jn=function(){var e=u,t=ct;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pn(e,t);n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=En(n),t=(e=r?(e=En(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==xn(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function u(e){if(this instanceof u)return(e=o.call(this,e)).ignoreExtraDims=!0,e.CLASS_NAME="SuperMap.Format.GeoJSON",e.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new j(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Oe(t)},linestring:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Re(t)},multilinestring:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new dt(t)},polygon:function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o){try{n=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new Ge(n.components),r.push(t)}return new Ye(r)},multipolygon:function(e){for(var t=[],n=null,r=0,o=e.length;r<o;++r){try{n=this.parseCoords.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new mt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Ye([new Ge([new j(e[0][0],e[0][1]),new j(e[1][0],e[0][1]),new j(e[1][0],e[1][1]),new j(e[0][0],e[1][1]),new j(e[0][0],e[0][1])])])}},e.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),t={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(t.properties.texts=e.geometry.texts,t.properties.textStyle=e.geometry.textStyle),e.fid&&(t.id=e.fid),e.ID&&(t.id=e.ID),t},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var e=!e.hasOwnProperty("geometryType")&&new s(e).toGeometry()||e,t=e.geometryType||e.type,e=this.extract[(t="LINEM"===(t="LinearRing"===t?"LineString":t)?"MultiLineString":t).toLowerCase()].apply(this,[e]);return"Collection"===(t="TEXT"===t?"Point":t)?{type:"GeometryCollection",geometries:e}:{type:t,coordinates:e}},point:function(e){var t,n=[e.x,e.y];for(t in e)"x"===t||"y"===t||null===e[t]||isNaN(e[t])||n.push(e[t]);return n},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=new Array(t),r=0;r<t;++r)n[r]=this.extract.geometry.apply(this,[e.components[r]]);return n}},e;throw new TypeError("Cannot call a class as a function")}return Sn((e=u).prototype,[{key:"read",value:function(e,t,n){t=t||"FeatureCollection";var r,o=null;if((r="string"==typeof e?On(En(u.prototype),"read",this).call(this,e,n):e)&&"string"==typeof r.type&&this.isValidType(r,t))switch(t){case"Geometry":try{o=this.parseGeometry(r)}catch(e){}break;case"Feature":try{(o=this.parseFeature(r)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(o=[],r.type){case"Feature":try{o.push(this.parseFeature(r))}catch(e){o=null}break;case"FeatureCollection":for(var i=0,a=r.features.length;i<a;++i)try{o.push(this.parseFeature(r.features[i]))}catch(e){o=null}break;default:try{var s=this.parseGeometry(r);o.push(new nt(s))}catch(e){o=null}}}return o}},{key:"write",value:function(e,t){return On(En(u.prototype),"write",this).call(this,this.toGeoJSON(e),t)}},{key:"fromGeoJSON",value:function(e,t,n){var r=this,e=this.read(e,t,n);return L.isArray(e)?e.map(function(e){return r._toiSevrerFeature(e)}):this._toiSevrerFeature(e)}},{key:"toGeoJSON",value:function(e){var t,n={type:null};if(L.isArray(e)){n.type="FeatureCollection";var r=e.length;n.features=new Array(r);for(var o=0;o<r;++o){var i,a=e[o];s(a)?((i={}).geometry=a,n.features[o]=this.extract.feature.apply(this,[i])):n.features[o]=this.extract.feature.apply(this,[a])}}else n=s(e)?((t={}).geometry=e,this.extract.feature.apply(this,[t])):this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return n}},{key:"isValidType",value:function(e,t){var n=!1;switch(t){case"Geometry":-1!=L.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)&&(n=!0);break;case"FeatureCollection":n=!0;break;default:e.type==t&&(n=!0)}return n}},{key:"parseFeature",value:function(e){var t,n=e.properties||{},r=e.geometry&&e.geometry.bbox||e.bbox;try{t=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new nt(t,n),r&&(t.bounds=O.fromArray(r)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!L.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var n=e.geometries.length,r=new Array(n),o=0;o<n;++o)r[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new be(r)}else{if(!L.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var e=e.layer.projection.toString(),t={};return t=e.match(/epsg:/i)?4326==(e=parseInt(e.substring(e.indexOf(":")+1)))?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+e}}:t}},{key:"_toiSevrerFeature",value:function(e){var t,n=e.attributes,r=[],o=[];for(t in n)r.push(t),o.push(n[t]);var i={fieldNames:r,fieldValues:o,geometry:s.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={},n=e,r=t;if(n.hasOwnProperty("fieldNames")&&n.hasOwnProperty("fieldValues")){var o,i=n.fieldNames,a=n.fieldValues;for(o in i)r[i[o]]=a[o]}var s,u=["fieldNames","fieldValues","geometry","stringID","ID"];for(s in e)-1<u.indexOf(s)||(t[s]=e[s]);return t}}]),Object.defineProperty(e,"prototype",{writable:!1}),u}(),_={toSuperMapGeometry:function(e){if(e&&e.type)return(new jn).read(e,"FeatureCollection")[0].geometry},toSuperMapBounds:function(e){return kn(e)?new O(e[0],e[1],e[2],e[3]):new O(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},toSuperMapPoint:function(e){return kn(e)?new j(e[0],e[1]):e.lng&&e.lat?new j(e.lng,e.lat):new j(e.geometry.coordinates[0],e.geometry.coordinates[1])},toSuperMapPolygon:function(e){var t=e.getWest(),n=e.getEast(),r=e.getSouth(),e=e.getNorth();return new Ye([new Ge([new j(t,r),new j(n,r),new j(n,e),new j(t,e)])])},isArray:kn,toGeoJSON:function(e){if(e)return(new jn).toGeoJSON(e)},toProcessingParam:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var o={};o.x=e[r][0],o.y=e[r][1],n.push(o)}t.type="REGION",t.points=n}return t},extend:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e},isNumber:function(e){return""!==e&&(0===(e=Number(e))||!isNaN(e))},isString:Mn,newGuid:function(e){for(var t=e||32,n="",r=1;r<t;r++)n+=Math.floor(16*Math.random()).toString(16);return n},hexToRgba:function(e,t){var n=[],r=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)n[a]="0x"+e.substr(a,2),r.push(parseInt(Number(n[a])));return r.push(t),"rgba("+r.join(",")+")"},isMatchAdministrativeName:function(e,t){var n;return!!Mn(t)&&(""===(n=e.substr(0,2))&&(n=e.substr(0,3)),!!t.match(new RegExp(n)))}};function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(){return(An="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rn(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function In(e,t){return(In=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ln=function(){var e=i,t=$;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&In(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Rn(n),t=(e=r?(e=Rn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Cn(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){var r;if(this instanceof i)return(r=o.call(this,e,t,n)).x=parseFloat(e),r.y=parseFloat(t),r.text=n.toString(),r.bsInfo={h:null,w:null},r.element=document.createElement("span"),r.CLASS_NAME="SuperMap.Geometry.GeoText",r.geometryType="GeoText",r;throw new TypeError("Cannot call a class as a function")}return Tn((e=i).prototype,[{key:"destroy",value:function(){An(Rn(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new j(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y,this.text)),L.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new O(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,n,r){var o,i,a=L.cloneObject(e),e=(r.label||this.text).split("\n").length;if(t=parseFloat(t),n=parseFloat(n),1<e&&(n=parseFloat(n)*e),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":a.x+=t/2,a.y+=n/2;break;case"lm":a.x+=t/2;break;case"lb":a.x+=t/2,a.y-=n/2;break;case"ct":a.y+=n/2;break;case"cb":a.y-=n/2;break;case"rt":a.x-=t/2,a.y+=n/2;break;case"rm":a.x-=t/2;break;case"rb":a.x-=t/2,a.y-=n/2}return this.bsInfo.h=n,this.bsInfo.w=t,e=a.x-parseFloat(t)/2,r=a.y+parseFloat(n)/2,i=a.x+parseFloat(t)/2,o=a.y-parseFloat(n)/2,new O(e,r,i,o)}},{key:"getLabelPxBoundsByText",value:function(e,t){var n,r,o=this.getLabelPxSize(t),i=L.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":i.x+=o.w/2,i.y+=o.h/2;break;case"lm":i.x+=o.w/2;break;case"lb":i.x+=o.w/2,i.y-=o.h/2;break;case"ct":i.y+=o.h/2;break;case"cb":i.y-=o.h/2;break;case"rt":i.x-=o.w/2,i.y+=o.h/2;break;case"rm":i.x-=o.w/2;break;case"rb":i.x-=o.w/2,i.y-=o.h/2}return this.bsInfo.h=o.h,this.bsInfo.w=o.w,e=i.x-o.w/2,n=i.y+o.h/2,t=t.fontStyle&&"italic"===t.fontStyle?i.x+o.w/2+parseInt(parseFloat(t.fontSize)/2):i.x+o.w/2,r=i.y-o.h/2,new O(e,n,t,r)}},{key:"getLabelPxSize",value:function(e){var t=parseFloat(e.strokeWidth),n=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px"),o=n.split("\n"),i=o.length,n=1<i?r*i+i+t+.2*r:r+t+.2*r+1,a=0;this.labelWTmp&&a<this.labelWTmp&&(a=this.labelWTmp);for(var s=0;s<i;s++){var u=this.getTextCount(o[s]),u=this.labelWTmp=L.getTextBounds(e,o[s],this.element).textWidth+ +u.textC+t;a<u&&(a=u)}r=new Object;return r.h=n,r.w=a,r}},{key:"getTextCount",value:function(e){for(var t={},n=0,r=0,o=0;o<e.length;o++)255<e.charCodeAt(o)?n++:r++;return t.cnC=n,t.enC=r,t.textC=e.length,t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Nn((t=Bn).prototype,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),n=this.layer.map.getExtent();return e instanceof j||e instanceof Ln?[e.x/t+-n.left/t,n.top/t-e.y/t]:e instanceof ie?[e.lon/t+-n.left/t,n.top/t-e.lat/t]:null}}]),Object.defineProperty(t,"prototype",{writable:!1});var Dn=Bn;function Bn(e,t){if(!(this instanceof Bn))throw new TypeError("Cannot call a class as a function");e&&t&&t.map&&t.renderer&&(this.id=L.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=t,this.CLASS_NAME="SuperMap.Feature.Theme")}function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Fn((o=zn).prototype,[{key:"toFeature",value:function(){var e=_.toSuperMapGeometry(this.geometry),t=[];return this.geometry instanceof l().LngLat?t=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof l().Point?t=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new Ln(this.geometry[0],this.geometry[1],this.geometry[2])),1<t.length&&(e=new j(t[0],t[1])),new nt(e,this.attributes)}}]),Object.defineProperty(o,"prototype",{writable:!1});var Gn=zn;function zn(e,t){if(!(this instanceof zn))throw new TypeError("Cannot call a class as a function");this.geometry=e,this.attributes=t}function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Vn((i=Yn).prototype,[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"!=Un(e)||null===e)return e;var n=e;if(e instanceof Array)for(var n=[],r=0,o=e.length;r<o;r++)n[r]=this.clone(e[r]);else if(!t[Object.prototype.toString.call(e)])for(var i in n={},e)e.hasOwnProperty(i)&&(n[i]=this.clone(e[i]));return n}},{key:"mergeItem",value:function(e,t,n,r){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(n)&&("object"!=Un(e[n])||o[Object.prototype.toString.call(e[n])]?!r&&n in e||(e[n]=t[n]):this.merge(e[n],t[n],r))}},{key:"merge",value:function(e,t,n){for(var r in t)this.mergeItem(e,t,r,n);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var n,r=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;i<e+s&&(r.width=i=e+s+100,n=!0),a<t+u&&(r.height=a=t+u+100,n=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),r.width=i,n=!0),t<-u&&(a+=u=100*Math.ceil(-t/100),r.height=a,n=!0),n&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}},{key:"inherits",value:function(e,t){var n,r=e.prototype;function o(){}for(n in o.prototype=t.prototype,e.prototype=new o,r)e.prototype[n]=r[n];e.constructor=e}}]),Object.defineProperty(i,"prototype",{writable:!1});var Wn=Yn;function Yn(){if(!(this instanceof Yn))throw new TypeError("Cannot call a class as a function");this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Hn((t=qn).prototype,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,n){var r=this._handlers;return t&&e&&(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this})),this}},{key:"bind",value:function(e,t,n){var r=this._handlers;return t&&e&&(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this})),this}},{key:"unbind",value:function(e,t){var n=this._handlers;if(e)if(t){if(n[e]){for(var r=[],o=0,i=n[e].length;o<i;o++)n[e][o].h!=t&&r.push(n[e][o]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];else this._handlers={};return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;3<n&&(t=Array.prototype.slice.call(t,1));for(var r=this._handlers[e],o=r.length,i=0;i<o;){switch(n){case 1:r[i].h.call(r[i].ctx);break;case 2:r[i].h.call(r[i].ctx,t[1]);break;case 3:r[i].h.call(r[i].ctx,t[1],t[2]);break;default:r[i].h.apply(r[i].ctx,t)}r[i].one?(r.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e])for(var t=arguments,n=t.length,r=(t=4<n?Array.prototype.slice.call(t,1,t.length-1):t)[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(n){case 1:o[a].h.call(r);break;case 2:o[a].h.call(r,t[1]);break;case 3:o[a].h.call(r,t[1],t[2]);break;default:o[a].h.apply(r,t)}o[a].one?(o.splice(a,1),i--):a++}return this}}]),Object.defineProperty(t,"prototype",{writable:!1});var Xn=qn;function qn(){if(!(this instanceof qn))throw new TypeError("Cannot call a class as a function");this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Jn((o=Kn).prototype,[{key:"create",value:function(e,t){var n=new this.ArrayCtor(2);return n[0]=e||0,n[1]=t||0,n}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,n){return e[0]=t,e[1]=n,e}},{key:"add",value:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},{key:"scaleAndAdd",value:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},{key:"sub",value:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},{key:"div",value:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},{key:"normalize",value:function(e,t){var n=this.len(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,n){var r=t[0],t=t[1];return e[0]=n[0]*r+n[2]*t+n[4],e[1]=n[1]*r+n[3]*t+n[5],e}},{key:"min",value:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},{key:"max",value:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}]),Object.defineProperty(o,"prototype",{writable:!1});var Zn=Kn;function Kn(){if(!(this instanceof Kn))throw new TypeError("Cannot call a class as a function");this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Qn((i=er).prototype,[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,n,r,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*r+3*i*n)}},{key:"cubicDerivativeAt",value:function(e,t,n,r,o){var i=1-o;return 3*(((t-e)*i+2*(n-t)*o)*i+(r-n)*o*o)}},{key:"cubicRootAt",value:function(e,t,n,r,o,i){var a,r=r+3*(t-n)-e,n=3*(n-2*t+e),t=3*(t-e),e=e-o,o=n*n-3*r*t,s=n*t-9*r*e,e=t*t-3*n*e,u=0;return this.isAroundZero(o)&&this.isAroundZero(s)?this.isAroundZero(n)?i[0]=0:0<=(t=-t/n)&&t<=1&&(i[u++]=t):this.isAroundZero(t=s*s-4*o*e)?(a=-(e=s/o)/2,0<=(e=-n/r+e)&&e<=1&&(i[u++]=e),0<=a&&a<=1&&(i[u++]=a)):0<t?(a=o*n+1.5*r*(-s-(e=Math.sqrt(t))),0<=(e=(-n-((t=(t=o*n+1.5*r*(-s+e))<0?-Math.pow(-t,this.ONE_THIRD):Math.pow(t,this.ONE_THIRD))+(a=a<0?-Math.pow(-a,this.ONE_THIRD):Math.pow(a,this.ONE_THIRD))))/(3*r))&&e<=1&&(i[u++]=e)):(t=(2*o*n-3*r*s)/(2*Math.sqrt(o*o*o)),a=Math.acos(t)/3,t=(-n-2*(e=Math.sqrt(o))*(s=Math.cos(a)))/(3*r),o=(-n+e*(s+this.THREE_SQRT*Math.sin(a)))/(3*r),n=(-n+e*(s-this.THREE_SQRT*Math.sin(a)))/(3*r),0<=t&&t<=1&&(i[u++]=t),0<=o&&o<=1&&(i[u++]=o),0<=n&&n<=1&&(i[u++]=n)),u}},{key:"cubicExtrema",value:function(e,t,n,r,o){var i=6*n-12*t+6*e,r=9*t+3*r-3*e-9*n,n=3*t-3*e,t=0;return this.isAroundZero(r)?this.isNotAroundZero(i)&&0<=(e=-n/i)&&e<=1&&(o[t++]=e):this.isAroundZero(e=i*i-4*r*n)?o[0]=-i/(2*r):0<e&&(e=(-i-(n=Math.sqrt(e)))/(2*r),0<=(i=(-i+n)/(2*r))&&i<=1&&(o[t++]=i),0<=e)&&e<=1&&(o[t++]=e),t}},{key:"cubicSubdivide",value:function(e,t,n,r,o,i){var a=(t-e)*o+e,t=(n-t)*o+t,n=(r-n)*o+n,s=(t-a)*o+a,t=(n-t)*o+t,o=(t-s)*o+s;i[0]=e,i[1]=a,i[2]=s,i[3]=o,i[4]=o,i[5]=t,i[6]=n,i[7]=r}},{key:"cubicProjectPoint",value:function(e,t,n,r,o,i,a,s,u,l,c){var f,h=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,g=1/0;h[0]=u,h[1]=l;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(e,n,o,a,v),p[1]=this.cubicAt(t,r,i,s,v);var m=this.vector.distSquare(h,p);m<g&&(f=v,g=m)}for(var g=1/0,b=0;b<32&&!(y<this.EPSILON);b++){var w=f-y,_=f+y,x=(p[0]=this.cubicAt(e,n,o,a,w),p[1]=this.cubicAt(t,r,i,s,w),this.vector.distSquare(p,h));0<=w&&x<g?(f=w,g=x):(d[0]=this.cubicAt(e,n,o,a,_),d[1]=this.cubicAt(t,r,i,s,_),w=this.vector.distSquare(d,h),_<=1&&w<g?(f=_,g=w):y*=.5)}return c&&(c[0]=this.cubicAt(e,n,o,a,f),c[1]=this.cubicAt(t,r,i,s,f)),Math.sqrt(g)}},{key:"quadraticAt",value:function(e,t,n,r){var o=1-r;return o*(o*e+2*r*t)+r*r*n}},{key:"quadraticDerivativeAt",value:function(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}},{key:"quadraticRootAt",value:function(e,t,n,r,o){var i,n=e-2*t+n,t=2*(t-e),e=e-r,r=0;return this.isAroundZero(n)?this.isNotAroundZero(t)&&0<=(i=-e/t)&&i<=1&&(o[r++]=i):this.isAroundZero(i=t*t-4*n*e)?0<=(e=-t/(2*n))&&e<=1&&(o[r++]=e):0<i&&(i=(-t-(e=Math.sqrt(i)))/(2*n),0<=(t=(-t+e)/(2*n))&&t<=1&&(o[r++]=t),0<=i)&&i<=1&&(o[r++]=i),r}},{key:"quadraticExtremum",value:function(e,t,n){n=e+n-2*t;return 0==n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,n,r,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,d=1/0;c[0]=a,c[1]=s;for(var y=0;y<1;y+=.05){f[0]=this.quadraticAt(e,n,o,y),f[1]=this.quadraticAt(t,r,i,y);var g=this.vector.distSquare(c,f);g<d&&(l=y,d=g)}for(var d=1/0,v=0;v<32&&!(p<this.EPSILON);v++){var m=l-p,b=l+p,w=(f[0]=this.quadraticAt(e,n,o,m),f[1]=this.quadraticAt(t,r,i,m),this.vector.distSquare(f,c));0<=m&&w<d?(l=m,d=w):(h[0]=this.quadraticAt(e,n,o,b),h[1]=this.quadraticAt(t,r,i,b),m=this.vector.distSquare(h,c),b<=1&&m<d?(l=b,d=m):p*=.5)}return u&&(u[0]=this.quadraticAt(e,n,o,l),u[1]=this.quadraticAt(t,r,i,l)),Math.sqrt(d)}}]),Object.defineProperty(i,"prototype",{writable:!1});var $n=er;function er(){if(!(this instanceof er))throw new TypeError("Cannot call a class as a function");this.vector=new Zn,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}tr((t=nr).prototype,[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,n,r){if(!t||!e)return!1;var o=e.type,i=(this._ctx=this._ctx||this.util.getContext(),this._mathMethod(e,t,n,r));if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,n,r);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,n,r,a);case"rose":return this.isInsideCircle(t,n,r,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,n,r){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,n,r):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,n,r);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,n,r);case"smicbroken-line":var o=n,i=r;return e.refOriginalPosition&&(o=n-e.refOriginalPosition[0],i=r-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,n,r);case"smicring":o=t.x,i=t.y;return e.refOriginalPosition&&(o=t.x+e.refOriginalPosition[0],i=t.y+e.refOriginalPosition[1]),this.isInsideRing(o,i,t.r0,t.r,n,r);case"circle":return this.isInsideCircle(t.x,t.y,t.r,n,r);case"smicpoint":o=n,i=r;return e.refOriginalPosition&&(o=n-e.refOriginalPosition[0],i=r-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,o,i);case"sector":o=t.startAngle*Math.PI/180,i=t.endAngle*Math.PI/180;return t.clockWise||(o=-o,i=-i),this.isInsideSector(t.x,t.y,t.r0,t.r,o,i,!t.clockWise,n,r);case"smicsector":var o=t.startAngle*Math.PI/180,i=t.endAngle*Math.PI/180,a=(t.clockWise||(o=-o,i=-i),t.x),s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideSector(a,s,t.r0,t.r,o,i,!t.clockWise,n,r);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,n,r);case"smicpolygon":var u=n,l=r;if(e.refOriginalPosition&&(u=n-e.refOriginalPosition[0],l=r-e.refOriginalPosition[1]),e.holePolygonPointLists&&0<e.holePolygonPointLists.length){for(var a=this.isInsidePolygon(t.pointList,u,l),c=e.holePolygonPointLists,f=!1,h=0,p=c.length;h<p;h++){var d=c[h];!0===this.isInsidePolygon(d,u,l)&&(f=!0)}return!0===a&&!1===f}return this.isInsidePolygon(t.pointList,u,l);case"text":s=t.__rect||e.getRect(t);return this.isInsideRect(s.x,s.y,s.width,s.height,n,r);case"smictext":o=e.getTextBackground(t);return this.isInsidePolygon(o,n,r);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,n,r);case"smicimage":i=t.x,a=t.y;return e.refOriginalPosition&&(i=t.x+e.refOriginalPosition[0],a=t.y+e.refOriginalPosition[1]),this.isInsideRect(i,a,t.width,t.height,n,r)}}},{key:"_buildPathMethod",value:function(e,t,n,r,o){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,o)}},{key:"isOutside",value:function(e,t,n,r){return!this.isInside(e,t,n,r)}},{key:"isInsideLine",value:function(e,t,n,r,o,i,a){var s;return 0!==o&&(s=0,!(t+(o=Math.max(o,5))<a&&r+o<a||a<t-o&&a<r-o||e+o<i&&n+o<i||i<e-o&&i<n-o))&&(e===n?Math.abs(i-e)<=o/2:(i=(s=(t-r)/(e-n))*i-a+(e*r-n*t)/(e-n))*i/(s*s+1)<=o/2*o/2)}},{key:"isInsideCubicStroke",value:function(e,t,n,r,o,i,a,s,u,l,c){return 0!==u&&!(t+(u=Math.max(u,5))<c&&r+u<c&&i+u<c&&s+u<c||c<t-u&&c<r-u&&c<i-u&&c<s-u||e+u<l&&n+u<l&&o+u<l&&a+u<l||l<e-u&&l<n-u&&l<o-u&&l<a-u)&&this.curve.cubicProjectPoint(e,t,n,r,o,i,a,s,l,c,null)<=u/2}},{key:"isInsideQuadraticStroke",value:function(e,t,n,r,o,i,a,s,u){return 0!==a&&!(t+(a=Math.max(a,5))<u&&r+a<u&&i+a<u||u<t-a&&u<r-a&&u<i-a||e+a<s&&n+a<s&&o+a<s||s<e-a&&s<n-a&&s<o-a)&&this.curve.quadraticProjectPoint(e,t,n,r,o,i,s,u,null)<=a/2}},{key:"isInsideArcStroke",value:function(e,t,n,r,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;a=Math.max(a,5),s-=e,u-=t,e=Math.sqrt(s*s+u*u);if(n<e-a||e+a<n)return!1;if(Math.abs(r-o)>=l)return!0;(o=i?(t=r,r=this.normalizeRadian(o),this.normalizeRadian(t)):(r=this.normalizeRadian(r),this.normalizeRadian(o)))<r&&(o+=l);e=Math.atan2(u,s);return e<0&&(e+=l),r<=e&&e<=o||r<=e+l&&e+l<=o}},{key:"isInsideBrokenLine",value:function(e,t,n,r){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],u=e[i][1],l=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,u,l,c,o,n,r))return!0}return!1}},{key:"isInsideRing",value:function(e,t,n,r,o,i){o=(o-e)*(o-e)+(i-t)*(i-t);return o<r*r&&n*n<o}},{key:"isInsideRect",value:function(e,t,n,r,o,i){return e<=o&&o<=e+n&&t<=i&&i<=t+r}},{key:"isInsideCircle",value:function(e,t,n,r,o){return(r-e)*(r-e)+(o-t)*(o-t)<n*n}},{key:"isInsideSector",value:function(e,t,n,r,o,i,a,s,u){return this.isInsideArcStroke(e,t,(n+r)/2,o,i,a,r-n,s,u)}},{key:"isInsidePolygon",value:function(e,t,n){for(var r=e.length,o=0,i=0,a=r-1;i<r;i++){var s=e[a][0],u=e[a][1],l=e[i][0],c=e[i][1];o+=this.windingLine(s,u,l,c,t,n),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,n,r,o,i){return!(t<i&&r<i||i<t&&i<r)&&r!=t&&o<(i-t)/(r-t)*(n-e)+e?r<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,n,r,o,i,a,s,u,l){var c=this.curve,f=this.roots,h=this.extrema;if(t<l&&r<l&&i<l&&s<l||l<t&&l<r&&l<i&&l<s)return 0;var p=c.cubicRootAt(t,r,i,s,l,f);if(0===p)return 0;for(var d,y,g=0,v=-1,m=0;m<p;m++){var b=f[m];c.cubicAt(e,n,o,a,b)<u||(v<0&&(v=c.cubicExtrema(t,r,i,s,h),h[1]<h[0]&&1<v&&this.swapExtrema(),d=c.cubicAt(t,r,i,s,h[0]),1<v)&&(y=c.cubicAt(t,r,i,s,h[1])),2==v?b<h[0]?g+=d<t?1:-1:b<h[1]?g+=y<d?1:-1:g+=s<y?1:-1:b<h[0]?g+=d<t?1:-1:g+=s<d?1:-1)}return g}},{key:"windingQuadratic",value:function(e,t,n,r,o,i,a,s){var u=this.curve,l=this.roots;if(t<s&&r<s&&i<s||s<t&&s<r&&s<i)return 0;var c=u.quadraticRootAt(t,r,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(t,r,i);if(0<=f&&f<=1){for(var h=0,p=u.quadraticAt(t,r,i,f),d=0;d<c;d++)u.quadraticAt(e,n,o,l[d])>a||(l[d]<f?h+=p<t?1:-1:h+=i<p?1:-1);return h}return u.quadraticAt(e,n,o,l[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,n,r,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=t)>n||s<-n)return 0;t=Math.sqrt(n*n-s*s);if(u[0]=-t,u[1]=t,Math.abs(r-o)>=l)return o=l,a>=u[r=0]+e&&a<=u[1]+e?i?1:-1:0;(o=i?(n=r,r=this.normalizeRadian(o),this.normalizeRadian(n)):(r=this.normalizeRadian(r),this.normalizeRadian(o)))<r&&(o+=l);for(var c=0,f=0;f<2;f++){var h,p=u[f];a<p+e&&(h=i?1:-1,r<=(p=(p=Math.atan2(s,p))<0?l+p:p)&&p<=o||r<=p+l&&p+l<=o)&&(c+=h=p>Math.PI/2&&p<1.5*Math.PI?-h:h)}return c}},{key:"isInsidePath",value:function(e,t,n,r,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,h="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,d=0;d<e.length;d++){var y=e[d],g=y.points;if(c||"M"===y.command){if(0<d&&(p&&(i+=this.windingLine(a,s,u,l,r,o)),0!==i))return!0;u=g[g.length-2],l=g[g.length-1],c=!1,f&&"A"!==y.command&&(f=!1,a=u,s=l)}switch(y.command){case"M":a=g[0],s=g[1];break;case"L":if(h&&this.isInsideLine(a,s,g[0],g[1],t,r,o))return!0;p&&(i+=this.windingLine(a,s,g[0],g[1],r,o)),a=g[0],s=g[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,g[0],g[1],g[2],g[3],g[4],g[5],t,r,o))return!0;p&&(i+=this.windingCubic(a,s,g[0],g[1],g[2],g[3],g[4],g[5],r,o)),a=g[4],s=g[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,g[0],g[1],g[2],g[3],t,r,o))return!0;p&&(i+=this.windingQuadratic(a,s,g[0],g[1],g[2],g[3],r,o)),a=g[2],s=g[3];break;case"A":var v=g[0],m=g[1],b=g[2],w=g[3],_=g[4],x=g[5],S=Math.cos(_)*b+v,O=Math.sin(_)*w+m,S=(f?(f=!1,u=S,l=O):i+=this.windingLine(a,s,S,O),(r-v)*w/b+v);if(h&&this.isInsideArcStroke(v,m,w,_,_+x,1-g[7],t,S,o))return!0;p&&(i+=this.windingArc(v,m,w,_,_+x,1-g[7],S,o)),a=Math.cos(_+x)*b+v,s=Math.sin(_+x)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,u,l,t,r,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,u,l,r,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var n=e+":"+t;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var r=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)r=Math.max(this._ctx.measureText(e[o]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(e,t){var n=e+":"+t;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");t=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[n]=t,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),t}}]),Object.defineProperty(t,"prototype",{writable:!1});var o=nr;function nr(){if(!(this instanceof nr))throw new TypeError("Cannot call a class as a function");this.util=new Wn,this.curve=new $n,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rr((i=ir).prototype,[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return(t=t||this.palette)[(e|=0)%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,n,r,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(e,t,n,r,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(e,t,n,r,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,n,r),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,n){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var r=[],o=((t=this.getData(t))[0]-e[0])/n,i=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,u=0,l=e[0],c=e[1],f=e[2],h=e[3];u<n;u++)r[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),+h.toFixed(4)],"rgba"),l+=o,c+=i,f+=a,h+=s;return l=t[0],c=t[1],f=t[2],h=t[3],r[u]=this.toColor([l,c,f,h],"rgba"),r}},{key:"getGradientColors",value:function(e,t){var n=[],r=e.length;if(void 0===t&&(t=20),1===r)n=this.getStepColors(e[0],e[0],t);else if(1<r)for(var o=0,i=r-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),n=n.concat(a)}return n}},{key:"toColor",value:function(e,t){var n;if(t=t||"rgb",e&&(3===e.length||4===e.length))return e=this.map(e,function(e){return 1<e?Math.ceil(e):e}),-1<t.indexOf("hex")?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1):(-1<t.indexOf("hs")&&(n=this.map(e.slice(1,3),function(e){return e+"%"}),e[1]=n[0],e[2]=n[1]),-1<t.indexOf("a")?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")")}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}},{key:"convert",value:function(e,t){var n,r;return this.isCalculableColor(e)?(void 0===(r=(n=this.getData(e))[3])&&(r=1),-1<e.indexOf("hsb")?n=this._HSV_2_RGB(n):-1<e.indexOf("hsl")&&(n=this._HSL_2_RGB(n)),-1<t.indexOf("hsb")||-1<t.indexOf("hsv")?n=this._RGB_2_HSB(n):-1<t.indexOf("hsl")&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,t)):e}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){var t;return this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),e=/^#[\da-f]{3}$/i.test(e)?"#"+((1<<24)+((t=(3840&(e=parseInt(e.slice(1),16)))<<8)<<4)+t+((t=(240&e)<<4)<<4)+t+((t=15&e)<<4)+t).toString(16).slice(1):e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=0<t?1:-1;void 0===t&&(t=0),t=1<Math.abs(t)?1:Math.abs(t),e=this.toRGB(e);for(var r=this.getData(e),o=0;o<3;o++)r[o]=1==n?r[o]*(1-t)|0:(255-r[o])*t+r[o]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(e){var t;return this.isCalculableColor(e)?(t=this.getData(this.toRGBA(e)),t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")):e}},{key:"mix",value:function(e,t,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;for(var r=2*(n=1-this.adjust(n=void 0===n?.5:n,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),e=o[3]-i[3],a=(1+(r*e==-1?r:(r+e)/(1+r*e)))/2,s=1-a,u=[],l=0;l<3;l++)u[l]=o[l]*a+i[l]*s;t=o[3]*n+i[3]*(1-n),t=Math.max(0,Math.min(1,t));return 1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=t,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){e=(e=this.normalize(e)).match(this.colorRegExp);if(null===e)throw new Error("The color format error");var t,n,r,o,i=[];return e[2]?(r=[(r=e[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],i=this.map(r,function(e){return ir.prototype.adjust.call(this,parseInt(e,16),[0,255])})):e[4]?(t=(n=e[4].split(","))[3],r=n.slice(0,3),i=this.map(r,function(e){return e=Math.floor(0<e.indexOf("%")?2.55*parseInt(e,0):e),ir.prototype.adjust.call(this,e,[0,255])}),void 0!==t&&i.push(this.adjust(parseFloat(t),[0,1]))):(e[5]||e[6])&&(n=(e[5]||e[6]).split(","),r=parseInt(n[0],0)/360,e=n[1],o=n[2],t=n[3],(i=this.map([e,o],function(e){return ir.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(r),void 0!==t)&&i.push(this.adjust(parseFloat(t),[0,1])),i}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);e=this.getData(this.toRGBA(e));return e[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(e,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var n=e?e.length:0,r=0;r<n;r++)e[r]=t(e[r]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,n,r,o,i,a,s,u=e[0],l=e[1],e=e[2];return s=0===l?a=i=255*e:(s=0|(u=6===(u=6*u)?0:u),t=e*(1-l),n=e*(1-l*(u-s)),l=e*(1-l*(1-(u-s))),o=(o=r=u=0)==s?(u=e,r=l,t):1==s?(u=n,r=e,t):2==s?(u=t,r=e,l):3==s?(u=t,r=n,e):4==s?(u=l,r=t,e):(u=e,r=t,n),i=255*u,a=255*r,255*o),[i,a,s]}},{key:"_HSL_2_RGB",value:function(e){var t,n,r=e[0],o=e[1],e=e[2];return e=0===o?n=t=255*e:(e=2*e-(o=e<.5?e*(1+o):e+o-o*e),t=255*this._HUE_2_RGB(e,o,r+1/3),n=255*this._HUE_2_RGB(e,o,r),255*this._HUE_2_RGB(e,o,r-1/3)),[t,n,e]}},{key:"_HUE_2_RGB",value:function(e,t,n){return n<0&&(n+=1),1<n&&--n,6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,n,r,o,i=e[0]/255,a=e[1]/255,e=e[2]/255,s=Math.min(i,a,e),u=Math.max(i,a,e),s=u-s,l=u;return 0==s?n=t=0:(n=s/u,r=((u-i)/6+s/2)/s,o=((u-a)/6+s/2)/s,s=((u-e)/6+s/2)/s,i===u?t=s-o:a===u?t=1/3+r-s:e===u&&(t=2/3+o-r),t<0&&(t+=1),1<t&&--t),[t*=360,n*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,n,r,o=e[0]/255,i=e[1]/255,e=e[2]/255,a=Math.min(o,i,e),s=Math.max(o,i,e),u=s-a,l=(s+a)/2;return 0==u?n=t=0:(n=l<.5?u/(s+a):u/(2-s-a),a=((s-o)/6+u/2)/u,r=((s-i)/6+u/2)/u,u=((s-e)/6+u/2)/u,o===s?t=u-r:i===s?t=1/3+a-u:e===s&&(t=2/3+r-a),t<0&&(t+=1),1<t&&--t),[t*=360,n*=100,l*=100]}}]),Object.defineProperty(i,"prototype",{writable:!1});var or=ir;function ir(){if(!(this instanceof ir))throw new TypeError("Cannot call a class as a function");this.util=new Wn,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ar((t=sr).prototype,[{key:"computeBoundingBox",value:function(e,t,n){if(0!==e.length){for(var r=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var u=e[s];u[0]<r&&(r=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}t[0]=r,t[1]=i,n[0]=o,n[1]=a}}},{key:"cubeBezier",value:function(e,t,n,r,o,i){var a=new $n,s=[];a.cubicExtrema(e[0],t[0],n[0],r[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(e[0],t[0],n[0],r[0],s[u]);var l=[];a.cubicExtrema(e[1],t[1],n[1],r[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(e[1],t[1],n[1],r[1],l[c]);s.push(e[0],r[0]),l.push(e[1],r[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,l),d=Math.max.apply(null,l);o[0]=f,o[1]=p,i[0]=h,i[1]=d}},{key:"quadraticBezier",value:function(e,t,n,r,o){var i=new $n,a=i.quadraticExtremum(e[0],t[0],n[0]),i=i.quadraticExtremum(e[1],t[1],n[1]),s=1-(a=Math.max(Math.min(a,1),0)),u=1-(i=Math.max(Math.min(i,1),0)),l=s*s*e[0]+2*s*a*t[0]+a*a*n[0],s=s*s*e[1]+2*s*a*t[1]+a*a*n[1],a=u*u*e[0]+2*u*i*t[0]+i*i*n[0],u=u*u*e[1]+2*u*i*t[1]+i*i*n[1];r[0]=Math.min(e[0],n[0],l,a),r[1]=Math.min(e[1],n[1],s,u),o[0]=Math.max(e[0],n[0],l,a),o[1]=Math.max(e[1],n[1],s,u)}},{key:"arc",value:function(e,t,n,r,o,i,a,s){var u=new Zn,l=u.create(),c=u.create(),f=u.create();l[0]=Math.cos(r)*n+e,l[1]=Math.sin(r)*n+t,c[0]=Math.cos(o)*n+e,c[1]=Math.sin(o)*n+t,u.min(a,l,c),u.max(s,l,c),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),o<r&&!i?o+=2*Math.PI:r<o&&i&&(r+=2*Math.PI),i&&(l=o,o=r,r=l);for(var h=0;h<o;h+=Math.PI/2)r<h&&(f[0]=Math.cos(h)*n+e,f[1]=Math.sin(h)*n+t,u.min(a,f,a),u.max(s,f,s))}}]),Object.defineProperty(t,"prototype",{writable:!1});var i=sr;function sr(){var e=this;if(!(e instanceof sr))throw new TypeError("Cannot call a class as a function");3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ur((t=lr).prototype,[{key:"destory",value:function(){return!0}}]),Object.defineProperty(t,"prototype",{writable:!1});t=lr;function lr(){if(!(this instanceof lr))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e=navigator.userAgent,t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=e.match(/(Android);?[\s\/]+([\d.]+)?/),i=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=!i&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=u&&e.match(/TouchPad/),c=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),v=e.match(/Firefox\/([\d.]+)/),m=e.match(/MSIE ([\d.]+)/),b=r&&e.match(/Mobile\//)&&!g,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g;return(n.webkit=!!r)&&(n.version=r[1]),o&&(t.android=!0,t.version=o[2]),s&&!a&&(t.ios=t.iphone=!0,t.version=s[2].replace(/_/g,".")),i&&(t.ios=t.ipad=!0,t.version=i[2].replace(/_/g,".")),a&&(t.ios=t.ipod=!0,t.version=a[3]?a[3].replace(/_/g,"."):null),u&&(t.webos=!0,t.version=u[2]),l&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),p&&(t.bb10=!0,t.version=p[2]),d&&(t.rimtabletos=!0,t.version=d[2]),y&&(n.playbook=!0),c&&(t.kindle=!0,t.version=c[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),v&&(n.firefox=!0,n.version=v[1]),m&&(n.ie=!0,n.version=m[1]),b&&(e.match(/Safari/)||t.ios)&&(n.safari=!0),w&&(n.webview=!0),m&&(n.ie=!0,n.version=m[1]),t.tablet=!!(i||y||o&&!e.match(/Mobile/)||v&&e.match(/Tablet/)||m&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(o||s||u||h||p||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||v&&e.match(/Mobile/)||m&&e.match(/Touch/))),{browser:n,os:t,canvasSupported:!!document.createElement("canvas").getContext}}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}cr((fr=hr).prototype,[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}]),Object.defineProperty(fr,"prototype",{writable:!1});var fr=hr;function hr(){if(!(this instanceof hr))throw new TypeError("Cannot call a class as a function");this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}dr((yr=gr).prototype,[{key:"get",value:function(e,t,n){"object"===pr(e)&&(e=(r=e).url,t=r.onsuccess,n=r.onerror);var r,o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(200<=o.status&&o.status<300||304===o.status?t&&t(o.responseText):n&&n(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),Object.defineProperty(yr,"prototype",{writable:!1});var yr=gr;function gr(){if(!(this instanceof gr))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}mr=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")},Object.defineProperty(mr,"prototype",{writable:!1});var d=mr;function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}d.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},d.catchBrushException=!1,d.debugMode=0;vr((mr=br).prototype,[{key:"destory",value:function(){return!0}}]),Object.defineProperty(mr,"prototype",{writable:!1});var mr=br;function br(){if(this instanceof br)return this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+d.debugMode)if(1==+d.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(1<+d.debugMode)for(var t in arguments)console.log(arguments[t])};throw new TypeError("Cannot call a class as a function")}function wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}wr((_r=xr).prototype,[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}]),Object.defineProperty(_r,"prototype",{writable:!1});var _r=xr;function xr(){if(!(this instanceof xr))throw new TypeError("Cannot call a class as a function");this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Sr((Or=Pr).prototype,[{key:"create",value:function(){var e=new this.ArrayCtor(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e}},{key:"translate",value:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}},{key:"rotate",value:function(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],t=t[5],u=Math.sin(n),n=Math.cos(n);return e[0]=r*n+a*u,e[1]=-r*u+a*n,e[2]=o*n+s*u,e[3]=-o*u+n*s,e[4]=n*i+u*t,e[5]=n*t-u*i,e}},{key:"scale",value:function(e,t,n){var r=n[0],n=n[1];return e[0]=t[0]*r,e[1]=t[1]*n,e[2]=t[2]*r,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*n,e}},{key:"invert",value:function(e,t){var n=t[0],r=t[2],o=t[4],i=t[1],a=t[3],t=t[5],s=n*a-i*r;return s?(e[0]=a*(s=1/s),e[1]=-i*s,e[2]=-r*s,e[3]=n*s,e[4]=(r*t-a*o)*s,e[5]=(i*o-n*t)*s,e):null}},{key:"mulVector",value:function(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],t=t[5];return e[0]=n[0]*r+n[1]*o+i,e[1]=n[0]*a+n[1]*s+t,e}}]),Object.defineProperty(Or,"prototype",{writable:!1});var Or=Pr;function Pr(){if(!(this instanceof Pr))throw new TypeError("Cannot call a class as a function");this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Au=kr,Ms=[{key:"SUtil_smoothBezier",value:function(e,t,n,r,o){var i=o=o&&2===o.length?o:[0,0],a=[],s=[],u=[],l=[],c=!!r;if(c){for(var f=[1/0,1/0],h=[-1/0,-1/0],p=e.length,d=0;d<p;d++)kr.Util_vector.min(f,f,[e[d][0]+i[0],e[d][1]+i[1]]),kr.Util_vector.max(h,h,[e[d][0]+i[0],e[d][1]+i[1]]);kr.Util_vector.min(f,f,r[0]),kr.Util_vector.max(h,h,r[1])}for(var y=e.length,g=0;g<y;g++){var v=[e[g][0]+i[0],e[g][1]+i[1]],m=void 0,b=void 0;if(n)m=[e[g?g-1:y-1][0]+i[0],e[g?g-1:y-1][1]+i[1]],b=[e[(g+1)%y][0]+i[0],e[(g+1)%y][1]+i[1]];else{if(0===g||g===y-1){a.push([e[g][0]+i[0],e[g][1]+i[1]]);continue}m=[e[g-1][0]+i[0],e[g-1][1]+i[1]],b=[e[g+1][0]+i[0],e[g+1][1]+i[1]]}kr.Util_vector.sub(s,b,m),kr.Util_vector.scale(s,s,t);var m=kr.Util_vector.distance(v,m),b=kr.Util_vector.distance(v,b),w=m+b,w=(0!==w&&(m/=w,b/=w),kr.Util_vector.scale(u,s,-m),kr.Util_vector.scale(l,s,b),kr.Util_vector.add([],v,u)),m=kr.Util_vector.add([],v,l);c&&(kr.Util_vector.max(w,w,f),kr.Util_vector.min(w,w,h),kr.Util_vector.max(m,m,f),kr.Util_vector.min(m,m,h)),a.push(w),a.push(m)}return n&&a.push(a.shift()),a}},{key:"SUtil_smoothSpline",value:function(e,t,n,r){for(var o=r=r&&2===r.length?r:[0,0],i=e.length,a=[],s=0,u=1;u<i;u++)s+=kr.Util_vector.distance([e[u-1][0]+o[0],e[u-1][1]+o[1]],[e[u][0]+o[0],e[u][1]+o[1]]);for(var l=(l=s/5)<i?i:l,c=0;c<l;c++){var f=c/(l-1)*(t?i:i-1),h=Math.floor(f),f=f-h,p=void 0,d=[e[h%i][0]+o[0],e[h%i][1]+o[1]],y=void 0,g=void 0,g=t?(p=[e[(h-1+i)%i][0]+o[0],e[(h-1+i)%i][1]+o[1]],y=[e[(h+1)%i][0]+o[0],e[(h+1)%i][1]+o[1]],[e[(h+2)%i][0]+o[0],e[(h+2)%i][1]+o[1]]):(p=[e[0===h?h:h-1][0]+o[0],e[0===h?h:h-1][1]+o[1]],y=[e[i-2<h?i-1:h+1][0]+o[0],e[i-2<h?i-1:h+1][1]+o[1]],[e[i-3<h?i-1:h+2][0]+o[0],e[i-3<h?i-1:h+2][1]+o[1]]),h=f*f,v=f*h;a.push([m(p[0],d[0],y[0],g[0],f,h,v),m(p[1],d[1],y[1],g[1],f,h,v)])}return a;function m(e,t,n,r,o,i,a){e=.5*(n-e),r=.5*(r-t);return(2*(t-n)+e+r)*a+(-3*(t-n)-2*e-r)*i+e*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,n,r,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,n);else{var u=r-t,l=o-n,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,n):e.lineTo(t,n),f=!f,t+=u,n+=l}e.lineTo(r,o)}}],null&&Er(Au.prototype,null),Er(Au,Ms),Object.defineProperty(Au,"prototype",{writable:!1});var M=kr;function kr(){if(!(this instanceof kr))throw new TypeError("Cannot call a class as a function")}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}M.Util_area=new o,M.Util_color=new or,M.Util_computeBoundingBox=new i,M.Util_curve=new $n,M.Util_env=new t,M.Util_event=new fr,M.Util_http=new yr,M.Util_log=new mr,M.Util_math=new _r,M.Util_matrix=new Or,M.Util=new Wn,M.Util_vector=new Zn;Mr((Ms=Cr).prototype,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return 5e-5<e||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){var e,t,n;function r(e){return 5e-5<e||e<-5e-5}this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform&&(e=[0,0],t=this.transform||M.Util_matrix.create(),M.Util_matrix.identity(t),this.needLocalTransform&&((r(this.scale[0])||r(this.scale[1]))&&(e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0,(n=r(e[0])||r(e[1]))&&M.Util_matrix.translate(t,t,e),M.Util_matrix.scale(t,t,this.scale),n)&&(e[0]=-e[0],e[1]=-e[1],M.Util_matrix.translate(t,t,e)),this.rotation instanceof Array?0!==this.rotation[0]&&(e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0,(n=r(e[0])||r(e[1]))&&M.Util_matrix.translate(t,t,e),M.Util_matrix.rotate(t,t,this.rotation[0]),n)&&(e[0]=-e[0],e[1]=-e[1],M.Util_matrix.translate(t,t,e)):0!=+this.rotation&&M.Util_matrix.rotate(t,t,this.rotation),r(this.position[0])||r(this.position[1]))&&M.Util_matrix.translate(t,t,this.position),this.transform=t,this.parent)&&this.parent.needTransform&&(this.needLocalTransform?M.Util_matrix.mul(this.transform,this.parent.transform,this.transform):M.Util_matrix.copy(this.transform,this.parent.transform))}},{key:"setTransform",value:function(e){var t;this.needTransform&&(t=this.transform,e.transform(t[0],t[1],t[2],t[3],t[4],t[5]))}},{key:"decomposeTransform",value:function(){var e,t,n,r,o,i;function a(e){return 5e-5<e||e<-5e-5}this.transform&&(t=(e=this.transform)[0]*e[0]+e[1]*e[1],n=this.position,r=this.scale,o=this.rotation,a(t-1)&&(t=Math.sqrt(t)),a((i=e[2]*e[2]+e[3]*e[3])-1)&&(i=Math.sqrt(i)),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=i,o[r[2]=r[3]=0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0)}}]),Object.defineProperty(Ms,"prototype",{writable:!1});var jr=Cr;function Cr(){var r;if(!(this instanceof Cr))throw new TypeError("Cannot call a class as a function");this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(r=M.Util_vector.create(),function(e){this.transform||(this.transform=M.Util_matrix.create());var t=this.transform;function n(e){return-5e-5<e&&e<5e-5}M.Util_vector.sub(r,e,this.position),n(r[0])&&n(r[1])||(M.Util_vector.normalize(r,r),t[2]=r[0]*this.scale[1],t[3]=r[1]*this.scale[1],t[0]=r[1]*this.scale[0],t[1]=-r[0]*this.scale[0],t[4]=this.position[0],t[5]=this.position[1],this.decomposeTransform())})}function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(){return(Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nr(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Rr(e,t){return(Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dr=function(){var e=i,t=X(Xn,jr);if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rr(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Nr(n),t=(e=r?(e=Nr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lr(t)};function i(e){var t;if(this instanceof i)return t=o.call(this,e),e=e||{},t.id=null,t.type="group",t.clipShape=null,t._children=[],t._storage=null,t.__dirty=!0,t.ignore=!1,L.extend(Lr(t),e),t.id=t.id||L.createUniqueID("smShapeGroup_"),t.CLASS_NAME="SuperMap.LevelRenderer.Group",t;throw new TypeError("Cannot call a class as a function")}return Ar((e=i).prototype,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,Ir(Nr(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),(e.parent=this)._storage)&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof i)&&e.addChildrenToStorage(this._storage)}},{key:"removeChild",value:function(e){var t=L.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof i)&&e.delChildrenFromStorage(this._storage)}},{key:"eachChild",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var o=this._children[r];n?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var o=this._children[r];n?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),"group"===n.type&&n.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Au=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],Br((o=Gr).prototype,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if((t=t||{hover:!1,normal:"down",update:!1}).hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var o=this._hoverElements[n];if(o.updateTransform(),e(o))return this}if("down"===(t.update&&this.updateShapeList(),t.normal)){for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this}else for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this;return this}},{key:"getHoverShapes",value:function(e){for(var t=[],n=this._hoverElements.length,r=0;r<n;r++){t.push(this._hoverElements[r]);var o=this._hoverElements[r].hoverConnect;if(o)for(var i,a=0,s=(o=o instanceof Array?o:[o]).length;a<s;a++)(i=o[a].id?o[a]:this.get(o[a]))&&t.push(i)}if(t.sort(Gr.shapeCompareFunc),e)for(var u=0,l=t.length;u<l;u++)t[u].updateTransform();return t}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,t=0;t<e;t++){var n=this._roots[t];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var r=this._shapeList.length,o=0;o<r;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(Gr.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&((e.clipShape.parent=e).clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){e=this._elements[e];if(e&&(e.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n,r={};for(n in t)"parent"!=n&&"_storage"!=n&&"__startClip"!=n&&t.hasOwnProperty(n)&&(r[n]=t[n]);(new Wn).merge(e,r,!0)}else(new Wn).merge(e,t,!0);return this}},{key:"drift",value:function(e,t,n){e=this._elements[e];return e&&(e.needTransform=!0,"horizontal"===e.draggable?n=0:"vertical"===e.draggable&&(t=0),!e.ondrift||e.ondrift&&!e.ondrift(t,n))&&e.drift(t,n),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return 0<this._hoverElements.length}},{key:"addRoot",value:function(e){e instanceof Dr&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof Dr&&n.delChildrenFromStorage(this)}this._elements={},this._hoverElements=[],this._roots=[]}else if(e instanceof Array)for(var r=e.length,o=0;o<r;o++)this.delRoot(e[o]);else{var i="string"==typeof e?this._elements[e]:e,a=(new Wn).indexOf(this._roots,i);0<=a&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof Dr)&&i.delChildrenFromStorage(this)}}},{key:"addToMap",value:function(e){return e instanceof Dr&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof Dr)&&(t._storage=null),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}]),Br(o,Au),Object.defineProperty(o,"prototype",{writable:!1});var Fr=Gr;function Gr(){if(!(this instanceof Gr))throw new TypeError("Cannot call a class as a function");this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t){return(Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr=function(){var e=a,t=$;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vr(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=Wr(n),t=(e=r?(e=Wr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==zr(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r){var o;if(this instanceof a)return(o=i.call(this,e,t,n,r)).x=e,o.y=t,o.width=n,o.height=r,o.CLASS_NAME="SuperMap.Geometry.Rectangle",o.geometryType="Rectangle",o;throw new TypeError("Cannot call a class as a function")}return Ur((e=a).prototype,[{key:"calculateBounds",value:function(){this.bounds=new O(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Hr((i=qr).prototype,[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}]),Object.defineProperty(i,"prototype",{writable:!1});var Xr=qr;function qr(e,t){if(!(this instanceof qr))throw new TypeError("Cannot call a class as a function");this.value=e||"",this.name=t||"token",this.CLASS_NAME="SuperMap.Credential"}Xr.CREDENTIAL=null;var Jr,t={toISOString:"toISOString"in Date.prototype?function(e){return e.toISOString()}:(Jr=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+Jr(e.getUTCMonth()+1,2)+"-"+Jr(e.getUTCDate(),2)+"T"+Jr(e.getUTCHours(),2)+":"+Jr(e.getUTCMinutes(),2)+":"+Jr(e.getUTCSeconds(),2)+"."+Jr(e.getUTCMilliseconds(),3)+"Z"}),parse:function(e){var t,n,r,o,i,a,e=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);return e&&(e[1]||e[7])?(a=parseInt(e[1],10)||0,t=parseInt(e[2],10)-1||0,i=parseInt(e[3],10)||1,a=new Date(Date.UTC(a,t,i)),(t=e[7])&&(i=parseInt(e[4],10),n=parseInt(e[5],10),r=0|(o=parseFloat(e[6])),o=Math.round(1e3*(o-r)),a.setUTCHours(i,n,r,o),"Z"!==t)&&(i=-1e3*(60*parseInt(t,10)*60+60*(parseInt(e[8],10)||0)),a=new Date(a.getTime()+i))):a=new Date("invalid"),a}},f={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&1<e.touches.length},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=f.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var e=L.getElement(e),o=(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),e._eventCacheID||(o="eventCacheID_",e.id&&(o=e.id+"_"+o),e._eventCacheID=L.createUniqueID(o)),e._eventCacheID);this.observers[o]||(this.observers[o]=[]),this.observers[o].push({element:e,name:t,observer:n,useCapture:r}),e.addEventListener?"mousewheel"===t?e.addEventListener(t,n,{useCapture:r,passive:!1}):e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},stopObservingElement:function(e){e=L.getElement(e)._eventCacheID;this._removeElementObservers(f.observers[e])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;0<=t;t--){var n=e[t],n=new Array(n.element,n.name,n.observer,n.useCapture);f.stopObserving.apply(this,n)}},stopObserving:function(e,t,n,r){r=r||!1;var e=L.getElement(e),o=e._eventCacheID,i=("keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown"),!1),a=f.observers[o];if(a)for(var s=0;!i&&s<a.length;){var u=a[s];if(u.name===t&&u.observer===n&&u.useCapture===r){a.splice(s,1),0==a.length&&delete f.observers[o],i=!0;break}s++}return i&&(e.removeEventListener?e.removeEventListener(t,n,r):e&&e.detachEvent&&e.detachEvent("on"+t,n)),i},unloadCache:function(){if(f&&f.observers){for(var e in f.observers){e=f.observers[e];f._removeElementObservers.apply(this,[e])}f.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}f.observe(window,"resize",f.unloadCache,!1);Kr((fr=$r).prototype,[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(f.stopObservingElement(this.element),this.element.hasScrollEvent)&&f.stopObserving(window,"scroll",this.clearMouseListener),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?f.stopObservingElement(this.element):(this.eventHandler=Z.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=Z.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),f.observe(e,r,this.eventHandler)}f.observe(e,"dragstart",f.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(e,t,n,r){var o;e in $r&&!this.extensions[e]&&(this.extensions[e]=new $r[e](this)),null!=n&&-1!==L.indexOf(this.eventTypes,e)&&(null==t&&(t=this.object),(o=this.listeners[e])||(this.listeners[e]=o=[],this.extensionCount[e]=0),t={obj:t,func:n},r?(o.splice(this.extensionCount[e],0,t),"object"===Zr(r)&&r.extension&&this.extensionCount[e]++):o.push(t))}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var o=0,i=r.length;o<i;o++)if(r[o].obj===t&&r[o].func===n){r.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n,r=this.listeners[e];if(r&&0!=r.length){(t=null==t?{}:t).object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(null!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||f.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var o,i=0,a=0,s=r.length,u=0;u<s;++u)i+=(o=r[u]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){var t;return this.includeXY?this.element.hasScrollEvent||(f.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),this.element.scrolls||(t=L.getViewportElement(),this.element.scrolls=[t.scrollLeft,t.scrollTop]),this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=L.pagePosition(this.element)),new Y(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}]),Object.defineProperty(fr,"prototype",{writable:!1});var Qr=$r;function $r(e,t,n,r,o){if(!(this instanceof $r))throw new TypeError("Cannot call a class as a function");if(this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=r,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,L.extend(this,o),null!=n)for(var i=0,a=n.length;i<a;i++)this.addEventType(n[i]);null!=t&&this.attachToElement(t),this.CLASS_NAME="SuperMap.Events"}function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(){return(no="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=io(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ro(e,t){return(ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Qr.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var ao=function(){var e=v,t=X(Xn,jr);if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ro(e,t);n=v,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=io(n),t=(e=r?(e=io(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===eo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oo(t)};function v(e){var t,r;if(this instanceof v)return t=o.call(this,e),e=e||{},t.id=null,t.style={},t.highlightStyle=null,t.parent=null,t.__dirty=!0,t.__clipShapes=[],t.invisible=!1,t.ignore=!1,t.zlevel=0,t.draggable=!1,t.clickable=!1,t.hoverable=!0,t.z=0,t.refOriginalPosition=[0,0],t.refDataID=null,t.isHoverByRefDataID=!1,t.refDataHoverGroup=null,t.dataInfo=null,L.extend(oo(t),e),t.id=t.id||L.createUniqueID("smShape_"),t.CLASS_NAME="SuperMap.LevelRenderer.Shape",t.getTansform=(r=[],function(e,t){var n=[e,t];return this.needTransform&&this.transform&&(M.Util_matrix.invert(r,this.transform),M.Util_matrix.mulVector(n,r,[e,t,1]),e==n[0])&&t==n[1]&&this.updateNeedTransform(),n}),t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"_fillText",value:function(e,t,n,r,o,i,a){o&&(e.font=o),e.textAlign=i,e.textBaseline=a;var s=v._getTextRect(t,n,r,o,i,a),u=(t=(t+"").split("\n"),M.Util_area.getTextHeight("ZH",o));switch(a){case"top":r=s.y;break;case"bottom":r=s.y+u;break;default:r=s.y+u/2}for(var l=0,c=t.length;l<c;l++)e.fillText(t[l],n,r),r+=u}},{key:"_getTextRect",value:function(e,t,n,r,o,i){var a=M.Util_area.getTextWidth(e,r),s=M.Util_area.getTextHeight("ZH",r);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":n-=s*e.length;break;default:n-=s*e.length/2}return{x:t,y:n,width:a,height:s*e.length}}}],to((t=v).prototype,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,no(io(v.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var n=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,n),n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n),e.fill(),0<n.lineWidth&&(this.setCtxGlobalAlpha(e,"stroke",n),e.stroke()),this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),0<n.lineWidth&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,o=n.length;r<o;r++){var i=t[n[r][0]],a=n[r][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=M.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r,o=this.__clipShapes[n];o.needTransform&&(r=o.transform,M.Util_matrix.invert(t,r),e.transform(r[0],r[1],r[2],r[3],r[4],r[5])),e.beginPath(),o.buildPath(e,o.style),e.clip(),o.needTransform&&e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"getHighlightStyle",value:function(e,t,n){var r,o={};for(r in e)o[r]=e[r];var i,a=M.Util_color.getHighlightColor();for(i in"stroke"!=e.brushType?(o.strokeColor=a,o.lineWidth=e.lineWidth||1,o.brushType="both"):"stroke"!=n?(o.strokeColor=a,o.lineWidth=e.lineWidth||1):o.strokeColor=t.strokeColor||M.Util_color.mix(e.strokeColor,M.Util_color.toRGB(a)),t)void 0!==t[i]&&(o[i]=t[i]);return o}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){M.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){M.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var n=this.getTansform(e,t),n=(e=n[0],t=n[1],this.style.__rect);return e>=(n=n||(this.style.__rect=this.getRect(this.style))).x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&M.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,t,n){if(void 0!==t.text&&!1!==t.text){var r=t.textColor||t.color||t.strokeColor;e.fillStyle=r;var o,i,a,s,u=t.textPosition||this.textPosition||"top",l=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0];switch(u){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var c=(n||t).__rect||this.getRect(n||t);switch(u){case"inside":a=c.x+c.width/2,s=c.y+c.height/2,o="center",i="middle","stroke"!=t.brushType&&r==t.color&&(e.fillStyle="#fff");break;case"left":a=c.x-10,s=c.y+c.height/2,o="end",i="middle";break;case"right":a=c.x+c.width+10,s=c.y+c.height/2,o="start",i="middle";break;case"top":a=c.x+c.width/2,s=c.y-10,o="center",i="bottom";break;case"bottom":a=c.x+c.width/2,s=c.y+c.height+10,o="center",i="top"}}break;case"start":case"end":var f=0,h=0,p=0,d=0;if(void 0!==t.pointList){var y=t.pointList;if(y.length<2)return;var g=y.length;switch(u){case"start":f=y[0][0]+l[0],h=y[1][0]+l[0],p=y[0][1]+l[1],d=y[1][1]+l[1];break;case"end":f=y[g-2][0]+l[0],h=y[g-1][0]+l[0],p=y[g-2][1]+l[1],d=y[g-1][1]+l[1]}}else f=t.xStart+l[0]||0,h=t.xEnd+l[0]||0,p=t.yStart+l[1]||0,d=t.yEnd+l[1]||0;switch(u){case"start":o=f<h?"end":"start",i=p<d?"bottom":"top",a=f,s=p;break;case"end":o=f<h?"start":"end",i=p<d?"top":"bottom",a=h,s=d}f&&h&&f!=h?a-="end"==o?6:-6:o="center",p!=d?s-="bottom"==i?6:-6:i="middle";break;case"specific":a=t.textX||0,s=t.textY||0,o="start",i="middle"}t.labelXOffset&&!isNaN(t.labelXOffset)&&(a+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(s+=t.labelYOffset),null!=a&&null!=s&&v._fillText(e,t.text,a,s,t.textFont,t.textAlign||o,t.textBaseline||i)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,n){e.globalAlpha="fill"===t?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"!==t||void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity}}]),to(t,e),Object.defineProperty(t,"prototype",{writable:!1}),v}();function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(){return(lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fo(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function co(e,t){return(co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ho=function(){var e=h,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&co(e,t);n=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=fo(n),t=(e=r?(e=fo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==so(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function h(e){if(this instanceof h)return(e=o.call(this,e)).type="smicimage",e._imageCache={},e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",e;throw new TypeError("Cannot call a class as a function")}return uo((e=h).prototype,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,lo(fo(h.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,o=this.style||{},i=(o=t?this.getHighlightStyle(o,this.highlightStyle||{}):o).image,a=this;if("string"==typeof i&&(t=i,this._imageCache[t]?i=this._imageCache[t]:((i=new Image).onload=function(){i.onload=null,clearTimeout(h._refreshTimeout),h._needsRefresh.push(a),h._refreshTimeout=setTimeout(function(){n&&n(h._needsRefresh),h._needsRefresh=[]},10)},i.src=t,this._imageCache[t]=i)),i){if("IMG"==i.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=i.readyState)return}else if(!i.complete)return;var s,u,t=o.width||i.width,l=o.height||i.height,c=o.x+r[0],f=o.y+r[1];i.width&&i.height&&(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight?(s=o.sx+r[0]||0,u=o.sy+r[1]||0,e.drawImage(i,s,u,o.sWidth,o.sHeight,c,f,t,l)):o.sx&&o.sy?(s=o.sx+r[0],u=o.sy+r[1],e.drawImage(i,s,u,t-s,l-u,c,f,t,l)):e.drawImage(i,c,f,t,l),o.width||(o.width=t),o.height||(o.height=l),this.style.width||(this.style.width=t),this.style.height||(this.style.height=l),this.drawText(e,o,this.style),e.restore())}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),Object.defineProperty(e,"prototype",{writable:!1}),h}();function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yo(e,t){return(yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bo(e,t,n){t&&mo(e.prototype,t),n&&mo(e,n),Object.defineProperty(e,"prototype",{writable:!1})}ho._needsRefresh=[],ho._refreshTimeout=null;bo(_o,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var n=this.storage.getShapeList(!0);return this._paintList(n,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var n,r,o,i;for(i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a,s,u=[],l=0,c=e.length;l<c;l++){var f,h,p=e[l];if(r!==p.zlevel&&(n&&n.needTransform&&o.restore(),o=(n=this.getLayer(p.zlevel)).ctx,r=p.zlevel,n.unusedCount=0,(n.dirty||t)&&n.clear(),n.needTransform)&&(o.save(),n.setTransform(o)),o&&p.__startClip&&(f=p.__startClip,o.save(),f.needTransform&&(h=f.transform,M.Util_matrix.invert(u,h),o.transform(h[0],h[1],h[2],h[3],h[4],h[5])),o.beginPath(),f.buildPath(o,f.style),o.clip(),f.needTransform)&&o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),(n&&n.dirty||t)&&!p.invisible&&(!p.onbrush||p.onbrush&&!p.onbrush(o,!1)))if(d.catchBrushException)try{p.brush(o,!1,this.updatePainter)}catch(e){M.Util_log(e,"brush error of "+p.type,p)}else p.brush(o,!1,this.updatePainter);o&&p.__stopClip&&o.restore(),p.__dirty=!1}for(a in o&&n&&n.needTransform&&o.restore(),this._layers)"hover"!==a&&((s=this._layers[a]).dirty=!1,1==s.unusedCount)&&s.clear()}},{key:"getLayer",value:function(e){if(!(o=this._layers[e])){var t=this._zlevelList.length,n=null,r=-1;if(0<t&&e>this._zlevelList[0]){for(r=0;r<t-1&&!(this._zlevelList[r]<e&&this._zlevelList[r+1]>e);r++);n=this._layers[this._zlevelList[r]]}this._zlevelList.splice(r+1,0,e);var o=new wo(L.createUniqueID("_levelLayer_"+e),this),n=n?n.dom:this._bgDom;n.nextSibling?n.parentNode.insertBefore(o.dom,n.nextSibling):n.parentNode.appendChild(o.dom),o.initContext(),this._layers[e]=o,this._layerConfig[e]&&(new Wn).merge(o,this._layerConfig[e],!0),o.updateTransform()}return o}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t,n=this._layers,r={};for(t in n)"hover"!==t&&(r[t]=n[t].elCount,n[t].elCount=0);for(var o,i=0;i<e.length;i++){var a=e[i],s=n[a.zlevel];s&&(s.elCount++,s.dirty||(s.dirty=a.__dirty))}for(o in n)"hover"!==o&&r[o]!==n[o].elCount&&(n[o].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){t&&(this._layerConfig[e]?(new Wn).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t,t=this._layers[e])&&(new Wn).merge(t,this._layerConfig[e],!0)}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new Wn).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot,t=(e.style.display="none",this._getWidth()),n=this._getHeight();if(e.style.display="",this._width!=t||n!=this._height){for(var r in this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px",this._layers)this._layers[r].resize(t,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){e=this._layers[e];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,t,n){var r=_o.createDom(L.createUniqueID("SuperMap.Theme.image_"),"canvas",this),o=(this._bgDom.appendChild(r),r.getContext("2d")),i=(1!=_o.devicePixelRatio&&o.scale(_o.devicePixelRatio,_o.devicePixelRatio),o.fillStyle=t||"#fff",o.rect(0,0,this._width*_o.devicePixelRatio,this._height*_o.devicePixelRatio),o.fill(),this),t=(this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(o,!1)))if(d.catchBrushException)try{t.brush(o,!1,i.updatePainter)}catch(e){M.Util_log(e,"brush error of "+t.type,t)}else t.brush(o,!1,i.updatePainter)},{normal:"up",update:!0}),r.toDataURL(e,n)),o=null;return this._bgDom.removeChild(r),t}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return+((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return+((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var n=this.getLayer(e.zlevel);if(n.needTransform&&(t.save(),n.setTransform(t)),d.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){M.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);n.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,n,r,o){var i=document.createElement("canvas"),a=i.getContext("2d"),o=o||window.devicePixelRatio||1,n=(i.style.width=n+"px",i.style.height=r+"px",i.setAttribute("width",n*o),i.setAttribute("height",r*o),a.clearRect(0,0,n*o,r*o),{position:t.position,rotation:t.rotation,scale:t.scale}),r=(t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1),new ho({id:e,style:{x:0,y:0,image:i}}));return null!=n.position&&(r.position=t.position=n.position),null!=n.rotation&&(r.rotation=t.rotation=n.rotation),null!=n.scale&&(r.scale=t.scale=n.scale),r}},{key:"_createShapeToImageProcessor",value:function(){var o=this;return function(e,t,n,r){return o._shapeToImage(e,t,n,r,_o.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(e,t,n){var t=document.createElement(t),r=n._width,n=n._height;return t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width=r+"px",t.style.height=n+"px",t.setAttribute("width",r*_o.devicePixelRatio),t.setAttribute("height",n*_o.devicePixelRatio),t.setAttribute("id",e),t}}]);var h=_o,wo=function(){var e=i,t=jr;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yo(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=go(n),t=(e=r?(e=go(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==po(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;return vo(this,i),(n=o.call(this,e,t)).dom=null,n.domBack=null,n.ctxBack=null,n.painter=t,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=h.createDom(L.createUniqueID("SuperMap.Theme"+e),"canvas",t),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return bo(i,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,jr.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=h.devicePixelRatio&&this.ctx.scale(h.devicePixelRatio,h.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=h.createDom(L.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=h.devicePixelRatio&&this.ctxBack.scale(h.devicePixelRatio,h.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*h.devicePixelRatio),this.dom.setAttribute("height",t*h.devicePixelRatio),1!=h.devicePixelRatio&&this.ctx.scale(h.devicePixelRatio,h.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*h.devicePixelRatio),this.domBack.setAttribute("height",t*h.devicePixelRatio),1!=h.devicePixelRatio)&&this.ctxBack.scale(h.devicePixelRatio,h.devicePixelRatio)}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,n=e.width,r=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/h.devicePixelRatio,r/h.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,n/h.devicePixelRatio,r/h.devicePixelRatio),t.restore()):t.clearRect(0,0,n/h.devicePixelRatio,r/h.devicePixelRatio),i&&(e=this.domBack,t.save(),t.globalAlpha=a,t.drawImage(e,0,0,n/h.devicePixelRatio,r/h.devicePixelRatio),t.restore())}}]),i}();function _o(e,t){vo(this,_o),this.root=e,this.storage=t,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,_o.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var e=document.createElement("div"),t=((this._domRoot=e).style.position="relative",e.style.overflow="hidden",e.style.width=this._width+"px",e.style.height=this._height+"px",this.root.appendChild(e),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=_o.createDom(L.createUniqueID("SuperMap.Theme_background_"),"div",this),e.appendChild(this._bgDom),this._bgDom.onselectstart=r,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none",new wo(L.createUniqueID("_highLightLayer_"),this)),n=(this._layers.hover=t,e.appendChild(t.dom),t.initContext(),t.dom.onselectstart=r,t.dom.style["-webkit-user-select"]="none",t.dom.style["user-select"]="none",t.dom.style["-webkit-touch-callout"]="none",this);function r(){return!1}this.updatePainter=function(e,t){n.refreshShapes(e,t)}}function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oo(e,t){return(Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ko=function(){var e=h,t=Xn;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oo(e,t);n=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,f=function(){var e,t=Eo(n),t=(e=r?(e=Eo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Po(t)};function h(e,t,n){var r,o,i;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");(r=f.call(this,e,t,n)).root=e,r.storage=t,r.painter=n,r._lastX=0,r._lastY=0,r._mouseX=0,r._mouseY=0,r._findHover=null,r._domHover=null,r._findHover=(o=function(e,t,n){var r=this;if(!(r._draggingTarget&&r._draggingTarget.id==e.id||e.isSilent())){var o=r._event;if(e.isCover(t,n)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=r.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(!a||c.refDataHoverGroup&&a===c.refDataHoverGroup)&&r.storage.addHover(c)}}}else r.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(r._mouseX,r._mouseY))return!1;f=f.parent}return r._lastHover!=e&&(r._processOutShape(o),r._processDragLeave(o),r._lastHover=e,r._processDragEnter(o)),r._processOverShape(o),r._processDragOver(o),r._hasfound=1,!0}}return!1},i=Po(r),function(e,t,n){return o.call(i,e,t,n)}),r._domHover=n.getDomHover(),r.CLASS_NAME="SuperMap.LevelRenderer.Handler";var a={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(d.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,d.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,d.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t,n,r,o,i=0<((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)?1.1:1/1.1,a=this.painter.getLayers(),s=!1;for(t in a)"hover"!==t&&(r=(n=a[t]).position,n.zoomable)&&(n.__zoom=n.__zoom||1,o=n.__zoom,o*=i,i=(o=Math.max(Math.min(n.maxZoom,o),n.minZoom))/n.__zoom,n.__zoom=o,r[0]-=(this._mouseX-r[0])*(i-1),r[1]-=(this._mouseY-r[1])*(i-1),n.scale[0]*=i,n.scale[1]*=i,s=n.dirty=!0);s&&this.painter.refresh(),this._dispatchAgency(this._lastHover,d.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=M.Util_event.getX(e),this._mouseY=M.Util_event.getY(e);var t=this._mouseX-this._lastX,n=this._mouseY-this._lastY,r=(this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover()),"");if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o,i,a=this.painter.getLayers(),s=!1;for(o in a)"hover"!==o&&(i=a[o]).panable&&(r="move",i.position[0]+=t,i.position[1]+=n,i.dirty=s=!0);s&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,d.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(d.EVENT.GLOBALOUT,e)},mousedown:function(e){this._clickThreshold=0,2==this._lastDownButton?(this._lastDownButton=e.button,this._mouseDownTarget=null):(this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,d.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button)},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,d.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&M.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<d.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<d.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover)&&this._lastHover.clickable&&M.Util_event.stop(e),this._lastClickMoment=t),this.painter.clearHover()}};for(var s=Po(r),u=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],l=u.length;l--;){var c=u[l];s["_"+c+"Handler"]=function(t,n){return function(e){return t.call(n,e)}}(a[c],s)}return window.addEventListener?(window.addEventListener("resize",r._resizeHandler),M.Util_env.os.tablet||M.Util_env.os.phone?(e.addEventListener("touchstart",r._touchstartHandler),e.addEventListener("touchmove",r._touchmoveHandler),e.addEventListener("touchend",r._touchendHandler)):(e.addEventListener("click",r._clickHandler),e.addEventListener("dblclick",r._dblclickHandler),e.addEventListener("mousewheel",r._mousewheelHandler),e.addEventListener("mousemove",r._mousemoveHandler),e.addEventListener("mousedown",r._mousedownHandler),e.addEventListener("mouseup",r._mouseupHandler)),e.addEventListener("DOMMouseScroll",r._mousewheelHandler),e.addEventListener("mouseout",r._mouseoutHandler)):(window.attachEvent("onresize",r._resizeHandler),e.attachEvent("onclick",r._clickHandler),e.ondblclick=r._dblclickHandler,e.attachEvent("onmousewheel",r._mousewheelHandler),e.attachEvent("onmousemove",r._mousemoveHandler),e.attachEvent("onmouseout",r._mouseoutHandler),e.attachEvent("onmousedown",r._mousedownHandler),e.attachEvent("onmouseup",r._mouseupHandler)),r}return So((e=h).prototype,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Xn.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var n=d.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),M.Util_env.os.tablet||M.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t&&(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime||(this._draggingTarget=t=t,this._isDragging=1,t.invisible=!0,this.storage.mod(t.id),this._dispatchAgency(t,d.EVENT.DRAGSTART,e),this.painter.refresh()))}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,d.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,d.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,d.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,d.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,d.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,d.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,d.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,n,r){var o="on"+t,i={type:t,event:n,target:e,cancelBubble:!1},a=e;for(r&&(i.dragged=r);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):r||this.dispatch(t,{type:t,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=M.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],o=n.length-1;0<=o;o--){var i=n[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),r[0]=this._mouseX,r[1]=this._mouseY,e.needTransform)&&(M.Util_matrix.invert(t,e.transform),M.Util_vector.applyTransform(r,r,t)),this._findHover(i,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<t.length;n++){var r=t[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){var n;return e.zrenderFixed||(t?(t=("touchend"!=e.type?e.targetTouches:e.changedTouches)[0])&&(n=this.root.getBoundingClientRect(),e.zrenderX=t.clientX-n.left,e.zrenderY=t.clientY-n.top):(t=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target)&&t!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+t.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+t.offsetTop),e.zrenderFixed=1),e}},{key:"getLastHoverOne",value:function(){return this._lastHover||null}}]),Object.defineProperty(e,"prototype",{writable:!1}),h}();function Mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Mo((yr=Co).prototype,[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*--e)*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*--e)*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*--e)*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){return e*e*(2.70158*e-1.70158)}},{key:"BackOut",value:function(e){return--e*e*(2.70158*e+1.70158)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}]),Object.defineProperty(yr,"prototype",{writable:!1});var jo=Co;function Co(){if(!(this instanceof Co))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}To((mr=Io).prototype,[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new jo,e=(e-this._startTime)/this._life;if(!(e<0))return e=Math.min(e,1),t="function"==typeof(t="string"==typeof this.easing?t[this.easing]:this.easing)?t(e):e,this.fire("frame",t),1==e?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)}}]),Object.defineProperty(mr,"prototype",{writable:!1});var Ao=Io;function Io(e){if(!(this instanceof Io))throw new TypeError("Cannot call a class as a function");this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t,n){t&&No(e.prototype,t),n&&No(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function Bo(e,t){return(Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zo=function(){var e=d,t=Xn;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bo(e,t);n=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Go(n),t=(e=r?(e=Go(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fo(t)};function d(e){var t;return Lo(this,d),t=o.call(this,e),e=e||{},t.stage={},t.onframe=function(){},t._clips=[],t._running=!1,t._time=0,L.extend(Fo(t),e),t.CLASS_NAME="SuperMap.LevelRenderer.Animation",t}return Do(d,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){e=(new Wn).indexOf(this._clips,e);0<=e&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,o=[],i=[],a=0;a<r;a++){var s=n[a],u=s.step(e);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<r;)n[l]._needsRemove?(n[l]=n[r-1],n.pop(),r--):l++;for(var r=o.length,c=0;c<r;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},n=this;this._running=!0,this._time=(new Date).getTime(),t(function e(){n._running&&(n._update(),t(e))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){e=new Uo(e,(t=t||{}).loop,t.getter,t.setter);return e.animation=this,e}}],[{key:"_interpolateNumber",value:function(e,t,n){return(t-e)*n+e}},{key:"_interpolateArray",value:function(e,t,n,r,o){var i=e.length;if(1==o)for(var a=0;a<i;a++)r[a]=d._interpolateNumber(e[a],t[a],n);else for(var s=e[0].length,u=0;u<i;u++)for(var l=0;l<s;l++)r[u][l]=d._interpolateNumber(e[u][l],t[u][l],n)}},{key:"_isArrayLike",value:function(e){switch(Ro(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,t,n,r,o,i,a,s,u){var l=e.length;if(1==u)for(var c=0;c<l;c++)s[c]=d._catmullRomInterpolate(e[c],t[c],n[c],r[c],o,i,a);else for(var f=e[0].length,h=0;h<l;h++)for(var p=0;p<f;p++)s[h][p]=d._catmullRomInterpolate(e[h][p],t[h][p],n[h][p],r[h][p],o,i,a)}},{key:"_catmullRomInterpolate",value:function(e,t,n,r,o,i,a){e=.5*(n-e),r=.5*(r-t);return(2*(t-n)+e+r)*a+(-3*(t-n)-2*e-r)*i+e*o+t}},{key:"_cloneValue",value:function(e){var t=Array.prototype.slice;if(d._isArrayLike(e)){var n=e.length;if(d._isArrayLike(e[0])){for(var r=[],o=0;o<n;o++)r.push(t.call(e[o]));return r}return t.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),d}(),Uo=(Do(Vo,[{key:"when",value:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],0!==e&&this._tracks[n].push({time:0,value:zo._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(_){function x(){if(S._clipCount--,0===S._clipCount){S._tracks={};for(var e=S._doneList.length,t=0;t<e;t++)S._doneList[t].call(S)}}var e,S=this,O=this._setter,P=this._getter,E=S._onframeList.length,k="spline"===_;for(e in this._tracks)!function(e,r){var o=e.length;if(o){var t=e[0].value,i=zo._isArrayLike(t),a=!1,s=i&&zo._isArrayLike(t[0])?2:1;e.sort(function(e,t){return e.time-t.time});for(var n=e[o-1].time,u=[],l=[],c=0;c<o;c++){u.push(e[c].time/n);var f=e[c].value;"string"==typeof f&&(0===(f=M.Util_color.toArray(f)).length&&(f[0]=f[1]=f[2]=0,f[3]=1),a=!0),l.push(f)}var h,p,d,y,g,v,m,b=0,w=0,t=(a&&(m=[0,0,0,0]),new Ao({target:S._target,life:n,loop:S._loop,delay:S._delay,onframe:function(e,t){if(t<w){for(p=Math.min(b+1,o-1),h=p;0<=h&&!(u[h]<=t);h--);h=Math.min(h,o-2)}else{for(h=b;h<o&&!(t<u[h]);h++);h=Math.min(h-1,o-2)}w=t;var n=u[(b=h)+1]-u[h];if(0!=n)for(p=(t-u[h])/n,k?(y=l[h],d=l[0===h?h:h-1],g=l[o-2<h?o-1:h+1],v=l[o-3<h?o-1:h+2],i?zo._catmullRomInterpolateArray(d,y,g,v,p,p*p,p*p*p,P(e,r),s):(n=a?zo.rgba2String(m):zo._catmullRomInterpolate(d,y,g,v,p,p*p,p*p*p),O(e,r,n))):i?zo._interpolateArray(l[h],l[h+1],p,P(e,r),s):(n=a?(zo._interpolateArray(l[h],l[h+1],p,m,1),zo.rgba2String(m)):zo._interpolateNumber(l[h],l[h+1],p),O(e,r,n)),h=0;h<E;h++)S._onframeList[h](e,t)},ondestroy:x}));_&&"spline"!==_&&(t.easing=_),S._clipList.push(t),S._clipCount++,S.animation.add(t)}}(this._tracks[e],e);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),Vo);function Vo(e,t,n,r){Lo(this,Vo),this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||function(e,t){return e[t]},this._setter=r||function(e,t,n){e[t]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_r=[{key:"getFrameCallback",value:function(r){return function(){var e=r.animatingElements;if(e instanceof Array){for(var t=0,n=e.length;t<n;t++)r.storage.mod(e[t].id);(e.length||r._needsRefreshNextFrame)&&r.refresh()}}}}],Wo((Or=Ho).prototype,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,n){if(t="string"==typeof t?this.storage.get(t):t){var r,o;if(e){for(var i=e.split("."),a=t,s=0,u=i.length;s<u;s++)a=a&&a[i[s]];a&&(r=a)}else r=t;return r?(o=this.animatingElements,void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&o.push(t),t.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){var e;t.__aniCount--,0===t.__aniCount&&(e=(new Wn).indexOf(o,t),o.splice(e,1))})):void M.Util_log('Property "'+e+'" is not existed in element '+t.id)}M.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,n){return this.painter.toDataURL(e,t,n)}},{key:"shapeToImage",value:function(e,t,n){var r=L.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,e,t,n)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}]),Wo(Or,_r),Object.defineProperty(Or,"prototype",{writable:!1});var Yo=Ho;function Ho(e,t){if(!(this instanceof Ho))throw new TypeError("Cannot call a class as a function");this.id=e,this.storage=new Fr,this.painter=new h(t,this.storage),this.handler=new ko(t,this.storage,this.painter),this.animatingElements=[],this.animation=new zo({stage:{update:Ho.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Xo((Ms=Jo).prototype,[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){e=new Yo(L.createUniqueID("LRenderer_"),e);return Jo._instances[e.id]=e}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var t in Jo._instances)Jo._instances[t].dispose();Jo._instances={}}return this}},{key:"getInstance",value:function(e){return Jo._instances[e]}},{key:"delInstance",value:function(e){return delete Jo._instances[e],this}}]),Object.defineProperty(Ms,"prototype",{writable:!1});var qo=Jo;function Jo(){if(!(this instanceof Jo))throw new TypeError("Cannot call a class as a function");Jo._instances={},Jo.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Au=[{key:"fromJson",value:function(e){var t=null;if(e)return t=(t=e.geometry)&&s.fromJson(t),new Qo({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:t})}}],Zo((o=Qo).prototype,[{key:"destroy",value:function(){this.fieldNames=null,this.fieldValues=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}},{key:"toFeature",value:function(){var e,t,n={},r=this.fieldNames,o=this.fieldValues;for(t in r)n[r[t]]=o[t];return this.geometry&&(e=this.geometry.toGeometry()),e=new nt(e,n),this.geometry&&this.geometry.id&&(e.fid=this.geometry.id),e}}]),Zo(o,Au),Object.defineProperty(o,"prototype",{writable:!1});var Ko=Qo;function Qo(e){if(!(this instanceof Qo))throw new TypeError("Cannot call a class as a function");this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$o((i=ti).prototype,[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new qo,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(e=void 0===e?this.features:e){this.removeFeatures(e);for(var t=(e=Array.isArray(e)?e:[e]).length-1;0<=t;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){var t;e!==this.opacity&&(this.opacity=e,t=this.div,L.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map)&&l().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){if(e){if(e===this.features)return this.removeAllFeatures();L.isArray(e)||"function"==typeof e||(e=[e]);for(var t=[],n=0;n<this.features.length;n++){var r=this.features[n];e&&"function"==typeof e?e(r)&&this.features.splice(n--,1):-1===L.indexOf(e,r)?t.push(r):this.features.splice(n--,1)}for(var o=[],i=0,a=this.features.length;i<a;i++)r=this.features[i],o.push(r);this.features=[],this.addFeatures(o),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var s=0==t.length;l().Evented.prototype.fire("featuresremoved",{features:t,succeed:s})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],l().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(e){for(var t=this.features.length,n=[],r=0;r<t;++r)(!e||"function"==typeof e&&e(this.features[r]))&&n.push(this.features[r]);return n}},{key:"getFeatureBy",value:function(e,t){var n,r=null;for(n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var n,r,o=[];for(r in this.features)(n=this.features[r])&&n.attributes&&n.attributes[e]===t&&o.push(n);return o}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,n){return(this.renderer||this.map).on(e,t),this}},{key:"off",value:function(e,t,n){return this.renderer?this.renderer.un(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,n=0;n<t;n++)this.renderer.on(e[n][0],e[n][1])}},{key:"getLocalXY",value:function(e){var t,n=this.map;return(e instanceof j||e instanceof Ln)&&(t=[(t=n.project(new(l().LngLat)(e.x,e.y))).x,t.y]),t=e instanceof ie?[(n=n.project(new(l().LngLat)(e.lon,e.lat))).x,n.y]:t}},{key:"toiClientFeature",value:function(e){L.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof Gn)t.push(e[n].toFeature());else if(e[n]instanceof nt)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type))var r=new jn,t=t.concat(r.read(e[n]));else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("features's type is not be supported.");t.push(Ko.fromJson(e[n]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){var e;!this.loadWhileAnimating&&this.visibility&&(this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing(),e=this.map.project(new(l().LngLat)(0,0)),this.startMoveX=e.x,this.startMoveY=e.y)}},{key:"moveEvent",value:function(){var e,t,n,r;!this.loadWhileAnimating&&this.visibility?this.rotating||this.zooming||(0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,n=(r=this.map.project(new(l().LngLat)(0,0))).x-this.startMoveX,r=r.y-this.startMoveY,this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+r+"px, 0px)"):this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){var e,t;!this.loadWhileAnimating&&this.visibility&&(0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)")}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.div.id);(t=void 0===t||t)?(t=document.getElementById(e),n&&t&&t.parentNode.insertBefore(n,t)):(t=document.getElementById(e),n&&(t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)))}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}]),Object.defineProperty(i,"prototype",{writable:!1});var ei=ti;function ti(e,t){if(!(this instanceof ti))throw new TypeError("Cannot call a class as a function");t=t||{};this.name=e,this.id=t.id||L.createUniqueID("themeLayer_"),this.opacity=t.opacity||1,this.visibility=!0,this.loadWhileAnimating=void 0===t.loadWhileAnimating||t.loadWhileAnimating,this.map=t.map||null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(){return(oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ai(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ii(e,t){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var si=function(){var e=i,t=ei;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ii(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ai(n),t=(e=r?(e=ai(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ni(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){if(this instanceof i)return(e=o.call(this,e,n)).chartsSetting=n.chartsSetting||{},e.themeFields=n.themeFields||null,e.overlayWeightField=n.overlayWeightField||null,e.isOverLay=void 0===n.isOverLay||n.isOverLay,e.charts=n.charts||[],e.cache=n.cache||{},e.chartsType=t,e;throw new TypeError("Cannot call a class as a function")}return ri((e=i).prototype,[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==l().Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer)&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var e=this.features,t=0,n=e.length;t<n;t++){var r=e[t],o=this.cache,i=r.id;o[i]||(o[i]=i,(o=this.createThematicFeature(r))&&this.overlayWeightField&&r.attributes[this.overlayWeightField]&&!isNaN(r.attributes[this.overlayWeightField])&&(o.__overlayWeight=r.attributes[this.overlayWeightField]),o&&this.charts.push(o))}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return!!(t=Dn[this.chartsType]&&this.themeFields&&this.chartsSetting?new Dn[this.chartsType](e,this,this.themeFields,this.chartsSetting):t)&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],u=!1;if(0!==n)for(var l=0;l<t.length;l++)if(this.isQuadrilateralOverLap(s,t[l])){u=!0;break}if(!u){t.push(s);for(var c=o.shapes,f=0,h=c.length;f<h;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var p=0,d=e.length;p<d;p++)for(var y=e[p],g=y.resetLocation(),v=y.shapes,m=0,b=v.length;m<b;m++)v[m].refOriginalPosition=g,this.renderer.addShape(v[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,o=n.length;r<o;r++){var i=n[r];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var o=!1,i=0;i<n;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<n-1&&!o;s++)for(var u=0;u<r-1;u++)if("SuperMap.Geometry.Point"===L.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}return o}},{key:"isPointInPoly",value:function(e,t){for(var n=!1,r=-1,o=t.length,i=o-1;++r<o;i=r)(t[r].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[r].y)&&e.x<(t[i].x-t[r].x)*(e.y-t[r].y)/(t[i].y-t[r].y)+t[r].x&&(n=!n);return n}},{key:"isChartInMap",value:function(e,t){for(var n=e,r=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=n.left&&a.x<=n.right&&a.y>=n.top&&a.y<=n.bottom){r=!0;break}}return r}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),oi(ai(i.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),oi(ai(i.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ui((fr=ci).prototype,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),Object.defineProperty(fr,"prototype",{writable:!1});var li=ci;function ci(){if(!(this instanceof ci))throw new TypeError("Cannot call a class as a function");this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}function fi(e){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(){return(pi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yi(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function di(e,t){return(di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yi(e){return(yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gi=function(){var e=i,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),di(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=yi(n),t=(e=r?(e=yi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==fi(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t)).x=isNaN(e)?0:e,n.y=isNaN(t)?0:t,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n;throw new TypeError("Cannot call a class as a function")}return hi((e=i).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,pi(yi(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function vi(e){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(){return(bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_i(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function wi(e,t){return(wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xi=function(){var e=i,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),wi(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=_i(n),t=(e=r?(e=_i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==vi(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).pointList=e,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",t;throw new TypeError("Cannot call a class as a function")}return mi((e=i).prototype,[{key:"destroy",value:function(){this.pointList=null,bi(_i(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(){return(Pi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ki(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ei(e,t){return(Ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mi=function(){var e=i,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ei(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ki(n),t=(e=r?(e=ki(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Si(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).pointList=e,t.holePolygonPointLists=null,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",t;throw new TypeError("Cannot call a class as a function")}return Oi((e=i).prototype,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,Pi(ki(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ti(){return(Ti="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ii(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ai(e,t){return(Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ri=function(){var e=a,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ai(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=Ii(n),t=(e=r?(e=Ii(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ji(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r){var o;if(this instanceof a)return(o=i.call(this,e,t,n,r)).x=isNaN(e)?0:e,o.y=isNaN(e)?0:t,o.width=isNaN(n)?0:n,o.height=isNaN(r)?0:r,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",o;throw new TypeError("Cannot call a class as a function")}return Ci((e=a).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,Ti(Ii(a.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(){return(Di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fi(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Bi(e,t){return(Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gi=function(){var e=l,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Bi(e,t);n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,u=function(){var e,t=Fi(n),t=(e=r?(e=Fi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Li(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function l(e,t,n,r,o,i,a){var s;if(this instanceof l)return(s=u.call(this,e,t,n,r,o,i,a)).x=isNaN(e)?0:e,s.y=isNaN(t)?0:t,s.r=isNaN(n)?0:n,s.startAngle=isNaN(r)?0:r,s.endAngle=isNaN(o)?0:o,s.r0=isNaN(i)?0:i,s.clockWise=a,s.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",s;throw new TypeError("Cannot call a class as a function")}return Ni((e=l).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,Di(Fi(l.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),l}();function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vi(){return(Vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yi(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Wi(e,t){return(Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hi=function(){var e=i,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Wi(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Yi(n),t=(e=r?(e=Yi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==zi(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){var r;if(this instanceof i)return(r=o.call(this,e,t,n)).x=e,r.y=t,r.text=n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",r;throw new TypeError("Cannot call a class as a function")}return Ui((e=i).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,Vi(Yi(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xi(e){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ji(){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ki(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Zi(e,t){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qi=function(){var e=f,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Zi(e,t);n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,c=function(){var e,t=Ki(n),t=(e=r?(e=Ki(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Xi(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function f(e,t,n,r,o,i,a,s,u){var l;if(this instanceof f)return(l=c.call(this,e,t,n,r,o,i,a,s,u)).x=e,l.y=t,l.image=n,l.width=r,l.height=o,l.sx=i,l.sy=a,l.sWidth=s,l.sHeight=u,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",l;throw new TypeError("Cannot call a class as a function")}return qi((e=f).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Ji(Ki(f.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),f}();function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ta(){return(ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ra(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function na(e,t){return(na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oa=function(){var e=i,t=li;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),na(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ra(n),t=(e=r?(e=ra(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==$i(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){var r;if(this instanceof i)return(r=o.call(this,e,t,n)).x=isNaN(e)?0:e,r.y=isNaN(t)?0:t,r.r=isNaN(n)?0:n,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",r;throw new TypeError("Cannot call a class as a function")}return ea((e=i).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,ta(ra(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sa(){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=la(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ua(e,t){return(ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ca=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ua(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=la(n),t=(e=r?(e=la(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ia(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smicpoint",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",e;throw new TypeError("Cannot call a class as a function")}return aa((e=i).prototype,[{key:"destroy",value:function(){this.type=null,sa(la(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.arc(t.x+n[0],t.y+n[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect||(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-e.r-t/2),y:Math.round(e.y+n[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pa(){return(pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ya(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function da(e,t){return(da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ga=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&da(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ya(n),t=(e=r?(e=ya(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==fa(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smictext",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",e;throw new TypeError("Cannot call a class as a function")}return ha((e=i).prototype,[{key:"destroy",value:function(){this.type=null,pa(ya(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(void 0!==(r=t?this.getHighlightStyle(r,this.highlightStyle||{}):r).text&&!1!==r.text){e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";for(var o=(r.text+"").split("\n"),i=M.Util_area.getTextHeight("ZH",r.textFont),a=this.getRectNoRotation(r),s=r.x+n[0],u="top"==r.textBaseline?a.y:"bottom"==r.textBaseline?a.y+i:a.y+i/2,l=r.x+n[0],c=r.y+n[1],f=0,h=o.length;f<h;f++){switch(r.labelRect&&(e.fillRect(a.x-2,a.y,a.width+4,a.height),e.fillStyle=r.strokeColor,e.strokeRect(a.x-2,a.y,a.width+4,a.height),e.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(l,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,i*f,r.maxWidth):e.strokeText(o[f],0,i*f):"bottom"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,i*(f+1)-a.height,r.maxWidth):e.strokeText(o[f],0,i*(f+1)-a.height):r.maxWidth?e.strokeText(o[f],0,i*(f+1)-a.height/2-i/2,r.maxWidth):e.strokeText(o[f],0,i*(f+1)-a.height/2-i/2),e.restore()):r.maxWidth?e.strokeText(o[f],s,u,r.maxWidth):e.strokeText(o[f],s,u),this.setCtxGlobalAlpha(e,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(e.save(),e.translate(l,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*f,r.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*f),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*f)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*(f+1)-a.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*(f+1)-a.height,r.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*(f+1)-a.height),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*(f+1)-a.height)):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*(f+1)-a.height/2-i/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*(f+1)-a.height/2-i/2,r.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,i*(f+1)-a.height/2-i/2),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,i*(f+1)-a.height/2-i/2)),this.setCtxGlobalAlpha(e,"reset",r),e.restore()):(r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],s,u,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],s,u,r.maxWidth)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],s,u),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],s,u)),this.setCtxGlobalAlpha(e,"reset",r));break;default:this.setCtxGlobalAlpha(e,"fill",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(l,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,i*f,r.maxWidth):e.fillText(o[f],0,i*f):"bottom"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,i*(f+1)-a.height,r.maxWidth):e.fillText(o[f],0,i*(f+1)-a.height):r.maxWidth?e.fillText(o[f],0,i*(f+1)-a.height/2-i/2,r.maxWidth):e.fillText(o[f],0,i*(f+1)-a.height/2-i/2),e.restore()):r.maxWidth?e.fillText(o[f],s,u,r.maxWidth):e.fillText(o[f],s,u),this.setCtxGlobalAlpha(e,"reset",r)}u+=i}e.restore()}}},{key:"getRect",value:function(e){if(!e.__rect){for(var t,n,r,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(t=u[0],r=u[0],n=u[1],o=u[1]):(u[0]<t&&(t=u[0]),u[0]>r&&(r=u[0]),u[1]<n&&(n=u[1]),u[1]>o&&(o=u[1]))}e.__rect={x:t,y:n,width:r-t,height:o-n}}return e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n,r=this.refOriginalPosition,o=M.Util_area.getTextHeight("ZH",e.textFont),i=M.Util_area.getTextWidth(e.text,e.textFont),a=M.Util_area.getTextHeight(e.text,e.textFont),s=e.x+r[0],u=("end"==e.textAlign||"right"==e.textAlign?s-=i:"center"==e.textAlign&&(s-=i/2),"top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-a:e.y+r[1]-a/2),l=!1;return e.maxWidth&&((n=parseInt(e.maxWidth))<i&&(t=i,l=!0,i=n),s=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?s-=i:"center"==e.textAlign&&(s-=i/2)),e.textFont&&-1<e.textFont.toLowerCase().indexOf("italic")&&(i+=!0===l?o/3*(i/t):o/3),{x:s,y:u,width:i,height:a}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,o,i,a,s,u=this.refOriginalPosition;return!t&&e.__textBackground||(t=this.getRectNoRotation(e),o=e.x+u[0],u=e.y+u[1],n=[],e.textRotation&&0!==e.textRotation?(i=e.textRotation,a=this.getRotatedLocation(t.x,t.y,o,u,i),s=this.getRotatedLocation(t.x+t.width,t.y,o,u,i),r=this.getRotatedLocation(t.x+t.width,t.y+t.height,o,u,i),o=this.getRotatedLocation(t.x,t.y+t.height,o,u,i),n.push(a),n.push(s),n.push(r),n.push(o)):(u=[t.x,t.y],i=[t.x+t.width,t.y],a=[t.x+t.width,t.y+t.height],s=[t.x,t.y+t.height],n.push(u),n.push(i),n.push(a),n.push(s)),e.__textBackground=n),e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,n,r,o){var i,a=new Array;return t=-t,r=-r,o=-o,i=(e-n)*Math.cos(o/180*Math.PI)-(t-r)*Math.sin(o/180*Math.PI)+n,e=(e-n)*Math.sin(o/180*Math.PI)+(t-r)*Math.cos(o/180*Math.PI)+r,a[0]=i,a[1]=-e,a}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ba(){return(ba="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_a(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function wa(e,t){return(wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xa=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=_a(n),t=(e=r?(e=_a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==va(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smiccircle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",e;throw new TypeError("Cannot call a class as a function")}return ma((e=i).prototype,[{key:"destroy",value:function(){this.type=null,ba(_a(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],n=t.y+n[1];return e.moveTo(r+t.r,n),e.arc(r,n,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){var t,n,r,o;return e.__rect||(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition,t=e.x+n[0],n=e.y+n[1],r=e.r,o="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(t-r-o/2),y:Math.round(n-r-o/2),width:2*r+o,height:2*r+o}),e.__rect}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pa(){return(Pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ka(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ea(e,t){return(Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ma=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ea(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ka(n),t=(e=r?(e=ka(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Sa(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smicpolygon",e.holePolygonPointLists=null,e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",e;throw new TypeError("Cannot call a class as a function")}return Oa((e=i).prototype,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,Pa(ka(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style,r=(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),e.save(),this.setContext(e,n),this.setTransform(e),!1),o=("fill"!=n.brushType&&"both"!=n.brushType&&void 0!==n.brushType||(e.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(e,n),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)),0<n.lineWidth&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(e.beginPath(),this.buildPath(e,n)),this.setCtxGlobalAlpha(e,"stroke",n),e.stroke(),this.setCtxGlobalAlpha(e,"reset",n)),this.drawText(e,n,this.style),L.cloneObject(n));if(o.pointList&&this.holePolygonPointLists&&0<this.holePolygonPointLists.length)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,r=!(e.globalCompositeOperation="destination-out"),"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),0<o.lineWidth&&("stroke"==o.brushType||"both"==o.brushType)?(r||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=M.SUtil_smoothBezier(r,t.smooth,!0,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=r.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[r[(l+1)%u][0]+n[0],r[(l+1)%u][1]+n[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(r=M.SUtil_smoothSpline(r,!0,null,n)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1),f=(t._dashLength=c,t.lineWidth||1),h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap)&&"butt"!==t.lineCap&&(h-=f,p+=f),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap)&&"butt"!==t.lineCap&&(h=1,p+=f),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap)&&"butt"!==t.lineCap&&(h-=f,p+=f),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap)&&"butt"!==t.lineCap&&(h-=f,p+=f),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var d=1;d<r.length;d++)M.SUtil_dashedLineTo(e,r[d-1][0]+n[0],r[d-1][1]+n[1],r[d][0]+n[0],r[d][1]+n[1],f,[h,p]);M.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1),y=(t._dashLength=c,t.lineWidth||1),g=y,v=y,m=y,b=y;"dashdot"===t.lineType&&(g*=4,v*=4,b*=4,t.lineCap)&&"butt"!==t.lineCap&&(g-=y,v+=y,m=1,b+=y),"longdashdot"===t.lineType&&(g*=8,v*=4,b*=4,t.lineCap)&&"butt"!==t.lineCap&&(g-=y,v+=y,m=1,b+=y),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<r.length;w++)M.SUtil_dashedLineTo(e,r[w-1][0]+n[0],r[w-1][1]+n[1],r[w][0]+n[0],r[w][1]+n[1],y,[g,v,m,b]);M.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],y,[g,v,m,b])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var _=1;_<r.length;_++)e.lineTo(r[_][0]+n[0],r[_][1]+n[1]);e.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(e,t){var n=t||(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),this.refOriginalPosition);if(!e.__rect){for(var r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,s=e.pointList,u=0,l=s.length;u<l;u++)s[u][0]+n[0]<r&&(r=s[u][0]+n[0]),s[u][0]+n[0]>o&&(o=s[u][0]+n[0]),s[u][1]+n[1]<i&&(i=s[u][1]+n[1]),s[u][1]+n[1]>a&&(a=s[u][1]+n[1]);t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(r-t/2),y:Math.round(i-t/2),width:o-r+t,height:a-i+t}}return e.__rect}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(){return(Ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ia(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Aa(e,t){return(Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ia(e){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ra=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aa(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ia(n),t=(e=r?(e=Ia(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==ja(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).brushTypeOnly="stroke",e.textPosition="end",e.type="smicbroken-line",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",e;throw new TypeError("Cannot call a class as a function")}return Ca((e=i).prototype,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,Ta(Ia(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,u=M.SUtil_smoothBezier(r,t.smooth,!1,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[r[l+1][0]+n[0],r[l+1][1]+n[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(r=M.SUtil_smoothSpline(r,null,null,n)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap)&&"butt"!==t.lineCap&&(f-=c,h+=c),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap)&&"butt"!==t.lineCap&&(f=1,h+=c),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap)&&"butt"!==t.lineCap&&(f-=c,h+=c),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap)&&"butt"!==t.lineCap&&(f-=c,h+=c),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var p=1;p<o;p++)M.SUtil_dashedLineTo(e,r[p-1][0]+n[0],r[p-1][1]+n[1],r[p][0]+n[0],r[p][1]+n[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t.lineWidth||1,y=d,g=d,v=d,m=d;"dashdot"===t.lineType&&(y*=4,g*=4,m*=4,t.lineCap)&&"butt"!==t.lineCap&&(y-=d,g+=d,v=1,m+=d),"longdashdot"===t.lineType&&(y*=8,g*=4,m*=4,t.lineCap)&&"butt"!==t.lineCap&&(y-=d,g+=d,v=1,m+=d),d=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<o;b++)M.SUtil_dashedLineTo(e,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],d,[y,g,v,m])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<o;w++)e.lineTo(r[w][0]+n[0],r[w][1]+n[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return Ma.prototype.getRect.apply(this,[e,t])}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function La(e){return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Da(){return(Da="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fa(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ba(e,t){return(Ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ga=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ba(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Fa(n),t=(e=r?(e=Fa(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==La(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smicrectangle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",e;throw new TypeError("Cannot call a class as a function")}return Na((e=i).prototype,[{key:"destroy",value:function(){this.type=null,Da(Fa(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,o,i,a,s=this.refOriginalPosition,u=t.x+s[0],s=t.y+s[1],l=t.width,c=t.height,t=t.radius;"number"==typeof t?n=r=o=i=t:t instanceof Array?1===t.length?n=r=o=i=t[0]:2===t.length?(n=o=t[0],r=i=t[1]):3===t.length?(n=t[0],r=i=t[1],o=t[2]):(n=t[0],r=t[1],o=t[2],i=t[3]):n=r=o=i=0,l<n+r&&(n*=l/(a=n+r),r*=l/a),l<o+i&&(o*=l/(a=o+i),i*=l/a),c<r+o&&(r*=c/(a=r+o),o*=c/a),c<n+i&&(n*=c/(a=n+i),i*=c/a),e.moveTo(u+n,s),e.lineTo(u+l-r,s),0!==r&&e.quadraticCurveTo(u+l,s,u+l,s+r),e.lineTo(u+l,s+c-o),0!==o&&e.quadraticCurveTo(u+l,s+c,u+l-o,s+c),e.lineTo(u+i,s+c),0!==i&&e.quadraticCurveTo(u,s+c,u,s+c-i),e.lineTo(u,s+n),0!==n&&e.quadraticCurveTo(u,s,u+n,s)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+n[0],t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect||(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-t/2),y:Math.round(e.y+n[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(){return(Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ya(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Wa(e,t){return(Wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ha=function(){var e=i,t=ao;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wa(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ya(n),t=(e=r?(e=Ya(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==za(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).type="smicsector",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",e;throw new TypeError("Cannot call a class as a function")}return Ua((e=i).prototype,[{key:"destroy",value:function(){this.type=null,Va(Ya(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],n=t.y+n[1],o=t.r0||0,i=t.r,a=t.startAngle,s=t.endAngle,t=t.clockWise||!1,a=M.Util_math.degreeToRadian(a),s=M.Util_math.degreeToRadian(s),u=(t||(a=-a,s=-s),M.Util_math.cos(a)),l=M.Util_math.sin(a);e.moveTo(u*o+r,l*o+n),e.lineTo(u*i+r,l*i+n),e.arc(r,n,i,a,s,!t),e.lineTo(M.Util_math.cos(s)*o+r,M.Util_math.sin(s)*o+n),0!==o&&e.arc(r,n,o,s,a,t),e.closePath()}},{key:"getRect",value:function(e){var t,n,r,o,i,a,s,u,l,c,f;return e.__rect||(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),a=this.refOriginalPosition,t=M.Util_vector.create(),n=M.Util_vector.create(),r=M.Util_vector.create(),o=M.Util_vector.create(),i=e.x+a[0],a=e.y+a[1],s=e.r0||0,u=e.r,l=M.Util_math.degreeToRadian(e.startAngle),c=M.Util_math.degreeToRadian(e.endAngle),(f=e.clockWise)||(l=-l,c=-c),1<s?M.Util_computeBoundingBox.arc(i,a,s,l,c,!f,t,r):(t[0]=r[0]=i,t[1]=r[1]=a),M.Util_computeBoundingBox.arc(i,a,u,l,c,!f,n,o),M.Util_vector.min(t,t,n),M.Util_vector.max(r,r,o),e.__rect={x:t[0],y:t[1],width:r[0]-t[0],height:r[1]-t[1]}),e.__rect}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}yr=[{key:"transformStyle",value:function(e){var t,n={},r=["normal","normal","normal","12","arial,sans-serif"],o=[!0,!1];for(t in e)switch(t){case"fill":o[0]=e[t];break;case"fillColor":n.color=e[t];break;case"stroke":o[1]=e[t];break;case"strokeWidth":n.lineWidth=e[t];break;case"strokeLinecap":n.lineCap=e[t];break;case"strokeLineJoin":n.lineJoin=e[t];break;case"strokeDashstyle":n.lineType=e[t];break;case"pointRadius":n.r=e[t];break;case"label":n.text=e[t];break;case"labelRect":n.labelRect=e[t];break;case"fontColor":n.textColor=e[t];break;case"fontStyle":r[0]=e[t];break;case"fontVariant":r[1]=e[t];break;case"fontWeight":r[2]=e[t];break;case"fontSize":var i="";e[t]&&e[t].toString().indexOf("px")<0&&(i="px"),r[3]=e[t]+i;break;case"fontFamily":r[4]=e[t];break;case"fontOpacity":n.opacity=e[t];break;case"labelPosition":n.textPosition=e[t];break;case"labelAlign":n.textAlign=e[t];break;case"labelBaseline":n.textBaseline=e[t];break;case"labelRotation":n.textRotation=e[t];break;default:n[t]=e[t]}return n.textFont=r.join(" "),n.brushType=!0===o[0]&&!1===o[1]?"fill":!1===o[0]&&!0===o[1]?"stroke":!0===o[0]&&!0===o[1]?"both":"fill",null==n.lineWidth&&(n.lineWidth=1),n}},{key:"Background",value:function(e,t,n){n=n||{},t=new Ri(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return t.style={fillColor:"#f3f3f3"},n.backgroundStyle&&L.copyAttributesWithClip(t.style,n.backgroundStyle),n.backgroundRadius&&(t.style.radius=n.backgroundRadius),t.clickable=!1,t.hoverable=!1,e.createShape(t)}},{key:"GraphAxis",value:function(e,t,n,r){var o=t,i=n||{},a=[],t=[],s=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,n=[],l=[];if(0==u)l.push([o[0],o[3]-5]),l.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&15<=i.axis3DParameter&&(d=parseInt(i.axis3DParameter),d=[o[0]-d,o[1]+d],i.axisUseArrow&&(n.push([d[0]+1.5,d[1]-7.5]),n.push([d[0]-1,d[1]+1]),n.push([d[0]+7.5,d[1]-1.5])),l.push([d[0],d[1]]),l.push([o[0],o[1]]));else{var c=Math.abs(o[1]-o[3])/u,f=o[3];l.push([o[0],f-5]);for(var h,p=0;p<u;p++)l.push([o[0],f]),l.push([o[0]-5,f]),l.push([o[0],f]),s&&((h=new xi([[o[0],f],[o[2],f]])).style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},h.clickable=!1,h.hoverable=!1,i.xReferenceLineStyle&&L.copyAttributesWithClip(h.style,i.xReferenceLineStyle),a.push(e.createShape(h))),f+=c;l.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&15<=i.axis3DParameter&&(d=parseInt(i.axis3DParameter),d=[o[0]-d,o[1]+d],i.axisUseArrow&&(n.push([d[0]+1.5,d[1]-7.5]),n.push([d[0]-1,d[1]+1]),n.push([d[0]+7.5,d[1]-1.5])),l.push([d[0],d[1]]),l.push([o[0],o[1]]))}l.push([o[2]+5,o[1]]),i.axisUseArrow&&(d=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],b=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],(d=new Mi(d)).style={fillColor:"#008acd"},L.copyAttributesWithClip(d.style,i.axisStyle),t.push(e.createShape(d)),(d=new Mi(b)).style={fillColor:"#008acd"},L.copyAttributesWithClip(d.style,i.axisStyle),t.push(e.createShape(d)),i.axis3DParameter)&&!isNaN(i.axis3DParameter)&&15<=i.axis3DParameter&&((b=new Mi(n)).style={fillColor:"#008acd"},L.copyAttributesWithClip(b.style,i.axisStyle),t.push(e.createShape(b)));var d=new xi(l),n=(d.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&L.copyAttributesWithClip(d.style,i.axisStyle),d.clickable=!1,d.hoverable=!1,[e.createShape(d)]),y=[];if(i.axisYLabels&&i.axisYLabels.length&&0<i.axisYLabels.length){var g=i.axisYLabels,v=g.length,m=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(m=i.axisYLabelsOffset),1==v){var b=new Hi(o[0]-5+m[0],o[3]+m[1],g[0]);b.style={labelAlign:"right"},i.axisYLabelsStyle&&L.copyAttributesWithClip(b.style,i.axisYLabelsStyle),b.clickable=!1,b.hoverable=!1,y.push(e.createShape(b))}else for(var w=o[3],_=Math.abs(o[1]-o[3])/(v-1),x=0;x<v;x++){var S=new Hi(o[0]-5+m[0],w+m[1],g[x]);S.style={labelAlign:"right"},i.axisYLabelsStyle&&L.copyAttributesWithClip(S.style,i.axisYLabelsStyle),S.clickable=!1,S.hoverable=!1,y.push(e.createShape(S)),w+=_}}var O=[];if(i.axisXLabels&&i.axisXLabels.length&&0<i.axisXLabels.length){var P=i.axisXLabels,E=P.length,k=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(k=i.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==E)for(var M=r.xPositions,j=0;j<E;j++){var C=new Hi(M[j]+k[0],o[1]+k[1],P[j]);C.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&L.copyAttributesWithClip(C.style,i.axisXLabelsStyle),C.clickable=!1,C.hoverable=!1,O.push(e.createShape(C))}else if(1==E){d=new Hi(o[0]-5+k[0],o[1]+k[0],P[0]);d.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&L.copyAttributesWithClip(d.style,i.axisXLabelsStyle),d.clickable=!1,d.hoverable=!1,O.push(e.createShape(d))}else for(var T=o[0],A=Math.abs(o[2]-o[0])/(E-1),I=0;I<E;I++){var R=new Hi(T+k[0],o[1]+k[1],P[I]);R.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&L.copyAttributesWithClip(R.style,i.axisXLabelsStyle),R.clickable=!1,R.hoverable=!1,O.push(e.createShape(R)),T+=A}}return a.concat(n).concat(y).concat(O).concat(t)}},{key:"ShapeStyleTool",value:function(e,t,n,r,o,i){var a=e||{};if(t&&L.copyAttributesWithClip(a,t),n&&n.length&&void 0!==o&&!isNaN(o)&&0<=o&&n[o]&&L.copyAttributesWithClip(a,n[o]),r&&r.length&&void 0!==i)for(var s=r,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){L.copyAttributesWithClip(a,s[c].style);break}return a}}],Xa((mr=qa).prototype,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){var t,n;return e&&(this.shapeParameters=e),this.shapeParameters?(e=this.shapeParameters)instanceof gi?((t=new Object).x=e.x,t.y=e.y,t.r=e.r,t=L.copyAttributesWithClip(t,e.style,["x","y"]),(n=new ca).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","style","highlightStyle"]),n):e instanceof xi?e.pointList?((t=new Object).pointList=e.pointList,t=L.copyAttributesWithClip(t,e.style,["pointList"]),(n=new Ra).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["pointList","style","highlightStyle"]),n):null:e instanceof Mi?e.pointList?((t=new Object).pointList=e.pointList,t=L.copyAttributesWithClip(t,e.style,["pointList"]),(n=new Ma).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["pointList","style","highlightStyle"]),n):null:e instanceof Ri?!e.x&&!e.y&!e.width&!e.height?null:((t=new Object).x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t=L.copyAttributesWithClip(t,e.style,["x","y","width","height"]),(n=new Ga).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","width","height","style","highlightStyle"]),n):e instanceof Gi?((t=new Object).x=e.x,t.y=e.y,t.r=e.r,t.startAngle=e.startAngle,t.endAngle=e.endAngle,e.r0&&(t.r0=e.r0),e.clockWise&&(t.clockWise=e.clockWise),t=L.copyAttributesWithClip(t,e.style,["x","y","r","startAngle","endAngle","r0","endAngle"]),(n=new Ha).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),n):e instanceof Hi?((t=new Object).x=e.x,t.y=e.y,t.text=e.text,t=L.copyAttributesWithClip(t,e.style,["x","y","text"]),(n=new ga).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","text","style","highlightStyle"]),n):e instanceof Qi?((t=new Object).x=e.x,t.y=e.y,e.image&&(t.image=e.image),e.width&&(t.width=e.width),e.height&&(t.height=e.height),e.sx&&(t.sx=e.sx),e.sy&&(t.sy=e.sy),e.sWidth&&(t.sWidth=e.sWidth),e.sHeight&&(t.sHeight=e.sHeight),t=L.copyAttributesWithClip(t,e.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]),(n=new ho).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","image","width","height","style","highlightStyle"]),n):e instanceof oa?((t=new Object).x=e.x,t.r=e.r,t.y=e.y,t=L.copyAttributesWithClip(t,e.style,["x","y","r"]),(n=new xa).style=qa.transformStyle(t),n.highlightStyle=qa.transformStyle(e.highlightStyle),L.copyAttributesWithClip(n,e,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),n):null:null}}]),Xa(mr,yr),Object.defineProperty(mr,"prototype",{writable:!1});var v=qa;function qa(e){if(!(this instanceof qa))throw new TypeError("Cannot call a class as a function");this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ka(){return(Ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ts(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Qa(e,t){return(Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $a(e,t){if(t&&("object"===Ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return es(e)}function es(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ts(e){return(ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ns=function(){var e=a,t=Dn;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qa(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=ts(n);return $a(this,r?(e=ts(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,n,r,o){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if(t=i.call(this,e,t),!e.geometry)return $a(t);if(!(e.geometry instanceof $))return $a(t);t.dataBounds=e.geometry.getBounds(),t.nodesClipPixel=2,t.isHoverAble=!0,t.isMultiHover=!0,t.isClickAble=!0,t.highlightStyle=null,t.shapeOptions={},t.style=n||{},t.CLASS_NAME="SuperMap.Feature.Theme.Vector",t.style=n||{},r&&L.copyAttributesWithClip(es(t),r,["shapeOptions","dataBounds"]),o&&L.copyAttributesWithClip(t.shapeOptions,o);n=e.geometry;return t.lonlat=t.dataBounds.getCenterLonLat(),t.location=t.getLocalXY(t.lonlat),n instanceof Ge||n instanceof Re?t.lineToTF(n):n instanceof Me||(n instanceof Oe?t.multiPointToTF(n):n instanceof dt?t.multiLineStringToTF(n):n instanceof mt?t.multiPolygonToTF(n):n instanceof Ye?t.polygonToTF(n):n instanceof be||(n instanceof j?t.pointToTF(n):n instanceof Yr?t.rectangleToTF(n):n instanceof Ln&&t.geoTextToTF(n))),t}return Za((e=a).prototype,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,Ka(ts(a.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,n=[],r=this.location,o=[],i=this.nodesClipPixel,a=0;a<t.length;a++){var s=t[a],n=[],s=this.getLocalXY(s);if(n[0]=s[0]-r[0],n[1]=s[1]-r[1],0<o.length){s=o[o.length-1];if(Math.abs(s[0]-n[0])<=i&&Math.abs(s[1]-n[1])<=i)continue}o.push(n)}if(o.length<2)return null;e=new Object,(e=L.copyAttributesWithClip(e,this.style,["pointList"])).pointList=o,e=new Ra({style:e,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(e.highlightStyle=this.highlightStyle),e.refOriginalPosition=this.location,e.refDataID=this.data.id,e.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&L.copyAttributesWithClip(e,this.shapeOptions),this.shapes.push(e)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,n=[],r=this.location,o=[],i=this.nodesClipPixel,a=0;a<t.length;a++){var s=t[a],n=[],s=this.getLocalXY(s);if(n[0]=s[0]-r[0],n[1]=s[1]-r[1],0<o.length){s=o[o.length-1];if(Math.abs(s[0]-n[0])<=i&&Math.abs(s[1]-n[1])<=i)continue}o.push(n);s=new Object,s=(s.r=6,(s=L.copyAttributesWithClip(s,this.style)).x=n[0],s.y=n[1],new ca({style:s,clickable:this.isClickAble,hoverable:this.isHoverAble}));this.highlightStyle&&(s.highlightStyle=this.highlightStyle),s.refOriginalPosition=r,s.refDataID=this.data.id,s.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&L.copyAttributesWithClip(s,this.shapeOptions),this.shapes.push(s)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.lineToTF(r)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.polygonToTF(r)}}},{key:"pointToTF",value:function(e){var t=this.location,e=this.getLocalXY(e),n=new Object,e=(n.r=6,(n=L.copyAttributesWithClip(n,this.style)).x=e[0]-t[0],n.y=e[1]-t[1],new ca({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble}));this.highlightStyle&&(e.highlightStyle=this.highlightStyle),e.refOriginalPosition=t,e.refDataID=this.data.id,e.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&L.copyAttributesWithClip(e,this.shapeOptions),this.shapes.push(e)}},{key:"polygonToTF",value:function(e){for(var t=e.components,n=[],r=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<t.length;l++){var c=t[l].components;if(0===l)for(var i=[],f=0;f<c.length;f++){if(r=[],n=this.getLocalXY(c[f]),r[0]=n[0]-o[0],r[1]=n[1]-o[1],0<i.length){var h=i[i.length-1];if(Math.abs(h[0]-r[0])<=u&&Math.abs(h[1]-r[1])<=u)continue}i.push(r)}else for(var a=[],p=0;p<c.length;p++){if(r=[],n=this.getLocalXY(c[p]),r[0]=n[0]-o[0],r[1]=n[1]-o[1],0<a.length){var d=a[a.length-1];if(Math.abs(d[0]-r[0])<=u&&Math.abs(d[1]-r[1])<=u)continue}a.push(r)}a.length<2||s.push(a)}i.length<2||((e=L.copyAttributesWithClip(e={},this.style,["pointList"])).pointList=i,e=new Ma({style:e,clickable:this.isClickAble,hoverable:this.isHoverAble}),this.highlightStyle&&(e.highlightStyle=this.highlightStyle),e.refOriginalPosition=this.location,e.refDataID=this.data.id,e.isHoverByRefDataID=this.isMultiHover,0<s.length&&(e.holePolygonPointLists=s),this.shapeOptions&&L.copyAttributesWithClip(e,this.shapeOptions),this.shapes.push(e))}},{key:"rectangleToTF",value:function(e){var t=this.location,n=new ie(e.x,e.y),r=this.layer.map.getResolution(),n=this.getLocalXY(n),o=new Object,n=(o.r=6,(o=L.copyAttributesWithClip(o,this.style)).x=n[0]-t[0],o.y=n[1]-t[1]-2*e.width/r,o.width=e.width/r,o.height=e.height/r,new Ga({style:o,clickable:this.isClickAble,hoverable:this.isHoverAble}));this.highlightStyle&&(n.highlightStyle=this.highlightStyle),n.refOriginalPosition=t,n.refDataID=this.data.id,n.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&L.copyAttributesWithClip(n,this.shapeOptions),this.shapes.push(n)}},{key:"geoTextToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object,n=(r.r=6,(r=L.copyAttributesWithClip(r,this.style,["x","y","text"])).x=n[0]-t[0],r.y=n[1]-t[1],r.text=e.text,new ga({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble}));this.highlightStyle&&(n.highlightStyle=this.highlightStyle),n.refOriginalPosition=t,n.refDataID=this.data.id,n.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&L.copyAttributesWithClip(n,this.shapeOptions),this.shapes.push(n)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var o=this.shapes[n];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function rs(e){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function is(e,t){return(is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function as(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var us=function(){var e=i,t=ei;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&is(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ss(n),t=(e=r?(e=ss(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===rs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return as(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).name=null,e.style=null,e.highlightStyle=null,e.nodesClipPixel=2,e.isHoverAble=!1,e.isMultiHover=!1,e.isClickAble=!0,e.isAllowFeatureStyle=!1,L.extend(as(e),t),e.cache=t.cache||{},e.cacheFields=t.cacheFields||[],e.maxCacheCount=t.maxCacheCount||0,e.isCustomSetMaxCacheCount=void 0!==t.isCustomSetMaxCacheCount&&t.isCustomSetMaxCacheCount,e;throw new TypeError("Cannot call a class as a function")}return os((e=i).prototype,[{key:"addFeatures",value:function(e){l().Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),ei.prototype.removeFeatures.call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),ei.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),n=null;t&&t.refDataID&&(n=t.refDataID),this.renderer.clearAll();for(var r=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,u=0,l=r.length;u<l;u++){var c,f=r[u].id+"_zoom_"+a.toString();o[f]?o[f].updateAndAddShapes():(c=this.createThematicFeature(r[u])).getShapesCount()<1||(o[f]=c,i.push(f),i.length>s&&(c=i[0],i.splice(0,1),delete o[c]))}this.renderer.render(),n&&this.isHoverAble&&this.isMultiHover&&(t=this.getShapesByFeatureID(n),this.renderer.updateHoverShapes(t))}},{key:"createThematicFeature",value:function(e){var t=L.copyAttributesWithClip(this.style),n=(e.style&&!0===this.isAllowFeatureStyle&&(t=L.copyAttributesWithClip(e.style)),{});n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=v.transformStyle(this.highlightStyle);for(var r=new ns(e,this,v.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,o=n.length;r<o;r++){var i=n[r];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fs(){return(fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ds(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function hs(e,t){return(hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _r=function(){var e=i,t=us;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hs(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ds(n),t=(e=r?(e=ds(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ls(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ps(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).isOverLay=!0,e.isAvoid=!0,e.themeField=null,e.styleGroups=null,L.extend(ps(e),t),e.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},e.getPxBoundsMode=0,e.labelFeatures=[],e;throw new TypeError("Cannot call a class as a function")}return cs((e=i).prototype,[{key:"redrawThematicFeatures",value:function(e){if(0<this.features.length&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),n=0,r=t.length;n<r;n++)this.labelFeatures.push(t[n]);this.features=this.getDrawnLabels(this.labelFeatures),fs(ds(i.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],fs(ds(i.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],fs(ds(i.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=v.transformStyle(this.highlightStyle);for(var r=new ns(e,this,v.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getDrawnLabels",value:function(e){for(var t,n=[],r=[],o={labelAlign:"cm",labelXOffset:0,labelYOffset:0},i=this.map,a=i.getZoom(),s=i.getCanvas(),u={x:parseFloat(s.style.width),y:parseFloat(s.style.height)},l=0,c=e.length;l<c;l++){!(t=e[l]).isStyleChange&&void 0!==t.isStyleChange||(t=this.setStyle(t));var f=this.getLabelPxLocation(t);if(0<=f.x&&f.x<=u.x&&0<=f.y&&f.y<=u.y&&!(-1<t.style.minZoomLevel&&a<=t.style.minZoomLevel||-1<t.style.maxZoomLevel&&a>t.style.maxZoomLevel)){var h=null,h=t.isStyleChange?(t.isStyleChange=null,this.calculateLabelBounds(t,f)):t.geometry.bsInfo.w&&t.geometry.bsInfo.h?this.calculateLabelBounds2(t,f):this.calculateLabelBounds(t,f),f=new O(0,u.y,u.x,0),p=h.length;if(this.isAvoid){var d=this.getAvoidInfo(f,h);if(d){if("left"===d.aspectW){t.style.labelXOffset+=d.offsetX;for(var y=0;y<p;y++)h[y].x+=d.offsetX}else if("right"===d.aspectW){t.style.labelXOffset+=-d.offsetX;for(var g=0;g<p;g++)h[g].x+=-d.offsetX}if("top"===d.aspectH){t.style.labelYOffset+=d.offsetY;for(var v=0;v<p;v++)h[v].y+=d.offsetY}else if("bottom"===d.aspectH){t.style.labelYOffset+=-d.offsetY;for(var m=0;m<p;m++)h[m].y+=-d.offsetY}t.isStyleChange=!0}}if(this.isOverLay){var b=!1;if(0!=l)for(var w=0;w<r.length;w++)if(this.isQuadrilateralOverLap(h,r[w])){b=!0;break}if(b)continue;r.push(h)}for(var _=[],x=0;x<p-1;x++)_.push(i.unproject(h[x]));var f=_[3],S=_[1],f=new O(f.lng,f.lat,S.lng,S.lat).getCenterLonLat(),S=new Ln(f.lon,f.lat,t.attributes[this.themeField]);S.calculateBounds(),f=L.cloneObject(t.style),f=L.cloneObject(L.copyAttributes(f,o)),(S=new nt(S,t.attributes,f)).id=t.id,S.fid=t.fid,n.push(S)}}return n}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=L.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=L.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var n,r,o=this.themeField,i=t.attributes,a=this.styleGroups,s=!1,u=null;for(n in i)if(o===n){s=!0,u=i[n];break}if(s)for(var l=0,c=a.length;l<c;l++)u>=a[l].start&&u<a[l].end&&((r=a[l].style)&&r.fontSize&&parseFloat(r.fontSize)<12&&(r.fontSize="12px"),t.style=L.copyAttributes(t.style,r));t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];if("SuperMap.Geometry.GeoText"!==o.geometry.CLASS_NAME)return e;(o.geometry.bsInfo.w||o.geometry.bsInfo.h)&&(o.geometry.bsInfo.w=null,o.geometry.bsInfo.h=null,o.geometry.labelWTmp=null),(o=this.setStyle(o)).layer=this.layer,t.push(o)}return t}},{key:"setStyle",value:function(e){var t=e;if(t.style=L.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=L.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var n,r,o=this.groupField,i=t.attributes,a=this.styleGroups,s=!1,u=null;for(n in i)if(o===n){s=!0,u=i[n];break}if(s)for(var l=0,c=a.length;l<c;l++)u>=a[l].start&&u<a[l].end&&((r=a[l].style)&&r.fontSize&&parseFloat(r.fontSize)<12&&(r.fontSize="12px"),t.style=L.copyAttributes(t.style,r))}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t,n=e.geometry,e=e.style,n=n.getCentroid(),n=this.map.project(new(l().LngLat)(n.x,n.y)),n=new(l().Point)(n.x,n.y);return e.labelXOffset||e.labelYOffset?(t=isNaN(e.labelXOffset)?0:e.labelXOffset,e=isNaN(e.labelYOffset)?0:e.labelYOffset,t=n.add(new(l().Point)(t,-e)),new(l().Point)(t.x,t.y)):new(l().Point)(n.x,n.y)}},{key:"calculateLabelBounds",value:function(e,t){var n=e.geometry,r=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),r=n.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var o=e.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,e.style.labelRotation);return n.bounds=new O(o[1].x,o[3].y,o[2].x,o[4].y),o}},{key:"calculateLabelBounds2",value:function(e,t){var n=e.geometry.bsInfo,r=e.style,o=L.cloneObject(t);if(r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":o.x+=n.w/2,o.y+=n.h/2;break;case"lm":o.x+=n.w/2;break;case"lb":o.x+=n.w/2,o.y-=n.h/2;break;case"ct":o.y+=n.h/2;break;case"cb":o.y-=n.h/2;break;case"rt":o.x-=n.w/2,o.y+=n.h/2;break;case"rm":o.x-=n.w/2;break;case"rb":o.x-=n.w/2,o.y-=n.h/2}var i=o.x-n.w/2,a=o.y+n.h/2,s=r.fontStyle&&"italic"===r.fontStyle?o.x+n.w/2+parseInt(parseFloat(r.fontSize)/2):o.x+n.w/2,u=o.y-n.h/2,i=new O(i,a,s,u),a=r.labelRotation%180==0?[{x:i.left,y:i.top},{x:i.right,y:i.top},{x:i.right,y:i.bottom},{x:i.left,y:i.bottom},{x:i.left,y:i.top}]:this.rotationBounds(i,t,r.labelRotation);return e.geometry.bounds=new O(a[1].x,a[3].y,a[2].x,a[4].y),a}},{key:"getLabelInfo",value:function(e,t){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1},e=(t=L.extend({fontColor:"#000000",labelAlign:"cm"},t),this.getLocalXY(e)),o=0,i=((t.labelXOffset||t.labelYOffset)&&(i=isNaN(t.labelXOffset)?0:t.labelXOffset,c=isNaN(t.labelYOffset)?0:t.labelYOffset,e[0]+=i,e[1]-=c),document.createElement("canvas")),a=(i.globalAlpha=0,i.lineWidth=1,i.getContext("2d"));a.fillStyle=t.fontColor,a.globalAlpha=t.fontOpacity||1;var s,u,l,c=[t.fontStyle||"normal","normal",t.fontWeight||"normal",t.fontSize||"1em",t.fontFamily||"sans-serif"].join(" "),f=t.label.split("\n"),h=f.length;if(a.fillText){a.font=c,a.textAlign=n[t.labelAlign[0]]||"center",a.textBaseline=n[t.labelAlign[1]]||"middle",null==(s=r[t.labelAlign[1]])&&(s=-.5),u=a.measureText("Mg").height||a.measureText("xx").width,e[1]+=u*s*(h-1);for(var p=0;p<h;p++)o<(l=a.measureText(f[p]).width)&&(o=l)}else if(a.mozDrawText){a.mozTextStyle=c,null==(s=r[t.labelAlign[1]])&&(s=-.5),u=a.mozMeasureText("xx"),e[1]+=u*(1+s*h);for(var d=0;d<h;d++)o<(l=a.measureText(f[d]).width)&&(o=l)}i={};return o?(i.w=o,i.h=t.fontSize,i.rows=f.length,i):null}},{key:"rotationBounds",value:function(e,t,n){var r=new(l().Point)(e.left,e.top),o=new(l().Point)(e.right,e.top),i=new(l().Point)(e.right,e.bottom),e=new(l().Point)(e.left,e.bottom),a=[];a.push(this.getRotatedLocation(r.x,r.y,t.x,t.y,n)),a.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,n)),a.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,n)),a.push(this.getRotatedLocation(e.x,e.y,t.x,t.y,n));for(var s=[],u=0;u<a.length;u++)s.push({x:a[u].x,y:a[u].y});return s.push({x:a[0].x,y:a[0].y}),s}},{key:"getRotatedLocation",value:function(e,t,n,r,o){var i,a={};return t=-t,r=-r,o=-o,i=(e-n)*Math.cos(o/180*Math.PI)-(t-r)*Math.sin(o/180*Math.PI)+n,e=(e-n)*Math.sin(o/180*Math.PI)+(t-r)*Math.cos(o/180*Math.PI)+r,a.x=i,a.y=-e,a}},{key:"getAvoidInfo",value:function(n,e){if(5!==e.length)return null;for(var t=[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}],r=!1,o=t.length,i=e.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++)"SuperMap.Geometry.Point"===L.lineIntersection(t[c],t[c+1],e[f],e[f+1]).CLASS_NAME&&(h(e[f]),h(e[f+1]),r=!0);return r?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function h(e){var t;n.contains(e.x,e.y)||(e.y<n.top&&(t=Math.abs(n.top-e.y),s<t)&&(s=t,u="top"),e.y>n.bottom&&(t=Math.abs(e.y-n.bottom),s<t)&&(s=t,u="bottom"),e.x<n.left&&(t=Math.abs(n.left-e.x),a<t)&&(a=t,l="left"),e.x>n.right&&(t=Math.abs(e.x-n.right),a<t)&&(a=t,l="right"))}}},{key:"isQuadrilateralOverLap",value:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var o=!1,i=0;i<n;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<n-1&&!o;s++)for(var u=0;u<r-1;u++)if("SuperMap.Geometry.Point"===L.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}return o}},{key:"isPointInPoly",value:function(e,t){for(var n=!1,r=-1,o=t.length,i=o-1;++r<o;i=r)(t[r].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[r].y)&&e.x<(t[i].x-t[r].x)*(e.y-t[r].y)/(t[i].y-t[r].y)+t[r].x&&(n=!n);return n}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}(),ys=function(){try{return mapv}catch(e){return{}}}();function gs(e){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ms(){return(ms="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xs(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function bs(e,t){return(bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ws(e,t){if(t&&("object"===gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _s(e)}function _s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xs(e){return(xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ss=ys.baiduMapLayer?ys.baiduMapLayer.__proto__:Function,Os=function(){var e=a,t=Ss;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bs(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=xs(n);return ws(this,r?(e=xs(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function a(e,t,n,r,o){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");if(e=i.call(this,e,t,n),!Ss)return ws(e);e.options=n||{},e.transferCoordinate=r.transferCoordinate,e.getCenterPixel=r.getCenterPixel,e.getResolution=r.getResolution,e.validZoom=r.validZoom;t=o.mapElement,r=o.targetElement,o=o.id;return e.targetElement=r,e.canvas=e._createCanvas(o,t),e.canvasLayer={canvas:e.canvas,devicePixelRatio:e.devicePixelRatio},e.init(n),e.argCheck(n),e.stopAniamation=!1,e.animation=n.animation,e.clickEvent=e.clickEvent.bind(_s(e)),e.mousemoveEvent=e.mousemoveEvent.bind(_s(e)),e._canvasUpdate(),e.targetElement.appendChild(e.canvas),e._expectShow=!0,e.isShow=!0,e}return vs((e=a).prototype,[{key:"clickEvent",value:function(e){var t=e.point;ms(xs(a.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.point;ms(xs(a.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"update",value:function(e){var e=e||{},t=e.data;null!=(t=t&&t.get?t.get():t)&&this.dataSet.set(t),ms(xs(a.prototype),"update",this).call(this,{options:e.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){var e;this.dataSet&&(e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}}),this.dataSet.set(e),this.update({options:null}))}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_createCanvas",value:function(e,t){var t=t.style,n=t.width,t=t.height,r=document.createElement("canvas"),e=(r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.id=e,"undefined"==typeof window?{}:window),e=this.devicePixelRatio=e.devicePixelRatio||1;return r.width=parseInt(n)*e,r.height=parseInt(t)*e,this.options.context&&"2d"!=this.options.context||r.getContext("2d").scale(e,e),r.style.width=n,r.style.height=t,r}},{key:"_canvasUpdate",value:function(n){if(!this.stopAniamation){var e,t,r=this.options.animation,o=this.getContext();if(this.isEnabledTime()){if(void 0===n)return void this.clear(o);"2d"===this.context&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if("2d"===this.context)for(var i in this.options)o[i]=this.options[i];else o.clear(o.COLOR_BUFFER_BIT);this.validZoom()&&(e={transferCoordinate:this.transferCoordinate()},t=this.getResolution(),void 0!==n&&(e.filter=function(e){var t=r.trails||10;return n&&e.time>n-t&&e.time<n}),e=this.dataSet.get(e),this.processData(e),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/t),this.options.width&&(this.options._width=this.options.width/t),this.options.height&&(this.options._height=this.options.height/t)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),t=this.getCenterPixel(),this.drawContext(o,e,this.options,t),this.options.updateCallback)&&this.options.updateCallback(n)}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ps(e,t,n,r){var t=!(1<arguments.length&&void 0!==t)||t,n=!(2<arguments.length&&void 0!==n)||n,r=3<arguments.length&&void 0!==r?r:[-180,180],o=r[1],r=r[0],i=o-r;return e===o&&t||e===r&&n?e:0==((e-r)%i+i)%i&&t?o:((e-r)%i+i)%i+r}function Es(e){var t=parseInt(e),n=parseInt(60*(e-t)),e=parseInt(60*(60*(e-t)-n)),n=0===parseInt(n/10)?"0".concat(n):n,e=0===parseInt(e/10)?"0".concat(e):e;return"".concat(t,"").concat(n,"'").concat(e)}function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ks((Or=js).prototype,[{key:"onAdd",value:function(e){this.map=e,this.mapContainer=e.getCanvasContainer(),this.renderer=new Os(e,this.dataSet,this.mapVOptions,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.mapContainer,id:this.id}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this.unbindEvent()}},{key:"render",value:function(){this.renderer&&this.renderer.draw()}},{key:"_transferCoordinate",value:function(){var n=this.map,e=n.getBounds(),t=e.getEast()-e.getWest(),e=e.getNorth()-e.getSouth(),r=n.getCanvas().getBoundingClientRect(),o=t/r.width,i=e/r.height,a=n.getCenter(),s=n.project(a),u=this;return function(e){var t;return n.transform.rotationMatrix||"2d"===u.context?[(t=n.project(new(l().LngLat)(e[0],e[1]))).x,t.y]:[(t=[(e[0]-a.lng)/o,(a.lat-e[1])/i])[0]+s.x,t[1]+s.y]}}},{key:"_validZoom",value:function(){return!(this.mapVOptions.minZoom&&this.map.getZoom()<this.mapVOptions.minZoom||this.mapVOptions.maxZoom&&this.map.getZoom()>this.mapVOptions.maxZoom)}},{key:"_getResolution",value:function(){var e=this.map.getBounds(),e=(e.getEast()-e.getWest())/this.map.getCanvas().getBoundingClientRect().width;return function(e){var t;if(e===Gt.METER)t=1;else if(e===Gt.DEGREE)t=2*Math.PI*6378137/360;else if(e===Gt.KILOMETER)t=.001;else if(e===Gt.INCH)t=1/.025399999918;else{if(e!==Gt.FOOT)return t;t=.3048}return t}("DEGREE")*e}},{key:"_getCenterPixel",value:function(){return this.map.project(new(l().LngLat)(0,0))}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"getTopLeft",value:function(){var e,t=this.map;return e=t?t.getBounds().getNorthWest():e}},{key:"bindEvent",value:function(){var e=this.map;this.mapVOptions.methods&&(this.mapVOptions.methods.click&&e.on("click",this.renderer.clickEvent),this.mapVOptions.methods.mousemove)&&e.on("mousemove",this.renderer.mousemoveEvent)}},{key:"unbindEvent",value:function(){var e=this.map;this.mapvOptions.methods&&(this.mapvOptions.methods.click&&e.off("click",this.clickEvent),this.mapvOptions.methods.mousemove)&&e.off("mousemove",this.mousemoveEvent)}},{key:"setVisibility",value:function(e){e!==this.visibility&&((this.visibility=e)?this.show():this.hide())}},{key:"setZIndex",value:function(e){this.renderer.setZIndex(e)}}]),Object.defineProperty(Or,"prototype",{writable:!1});var Ms=js;function js(e,t,n){var r=this;if(!(r instanceof js))throw new TypeError("Cannot call a class as a function");3===arguments.length?(this.map=e,delete n.layerID,this.mapVOptions=n,this.dataSet=t):(this.dataSet=e,delete t.layerID,this.mapVOptions=t),this.id=this.mapVOptions.layerID||L.createUniqueID("mapvLayer_"),this.type="custom",this.visibility=!0,this.renderingMode="3d",this.overlay=!0,this.context=this.mapVOptions.context||"2d",this.map&&this.map.addLayer(this)}function Cs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Cs((Au=As).prototype,[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var n=this;return n.data=e,null!=t&&(n.parseNumber=t),n.parseNumber&&n.data&&n.data.features&&n.data.features.map(function(e){return n.baseHeightField&&e.properties[n.baseHeightField]&&(e.properties[n.baseHeightField]=parseFloat(e.properties[n.baseHeightField])),n.heightField&&e.properties[n.heightField]&&(e.properties[n.heightField]=parseFloat(e.properties[n.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map&&this.show(),this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){var e;return this.map&&(e=this.id||"theme3DLayer",this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend)&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(n){var r=this;function e(){}return e.prototype.onAdd=function(e){this._map=e,this._container=document.createElement("div");var e="legend-light",t=("dark"===r.legendTheme&&(e="legend-dark")," legend-horizontal");return"vertical"===r.legendOrientation&&(t=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+e+t,n?this._container.innerHTML=n:(e=" <div class='legend-title'>"+(r.legendTitle||"")+"</div>",t="<div class='legend-content'>"+(r._createLegendElement.call(r)||"")+"</div>",this._container.innerHTML=e+t),r._appendLegendCSSStyle(),this._container},e.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new e}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id||"theme3DLayer",n=this.sourceId=t+"Source";this.map.getSource(n)&&this.map.removeSource(n),this.map.addSource(n,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:n,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){var e;this.map&&((e=this.map).addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this)))}},{key:"_onMouseMove",value:function(e){var t=this,n=this.map,r=n.queryRenderedFeatures(e.point,{layers:[t.id]});t.highlight&&t.highlight.callback&&t.highlight.callback(r,e),!r||r.length<1?(t._clearHighlight.call(t),t._selectFeatureId=null):(e=r[0].id,t._selectFeatureId!==e&&(t._selectFeatureId=e,n.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId])))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var n=Object.getOwnPropertyNames(arguments)[t];if("caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n){var r=arguments[n];if(r)for(var o=0;o<Object.getOwnPropertyNames(r).length;o++){var i=Object.getOwnPropertyNames(r)[o];"caller"!=n&&"callee"!=n&&"length"!=n&&"arguments"!=n&&(e[i]=r[i])}}}return e}}]),Object.defineProperty(Au,"prototype",{writable:!1});var Ts=As;function As(e,t){if(!(this instanceof As))throw new TypeError("Cannot call a class as a function");this.id=e,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,t)}function Is(e){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return(Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ds(e){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o=function(){var e=i,t=Ts;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ls(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ds(n),t=(e=r?(e=Ds(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Is(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ns(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).heightStops=null,e.colorStops=null,e.base=null,e.legendRatio=1,e._extend(Ns(e),t),e;throw new TypeError("Cannot call a class as a function")}return Rs((e=i).prototype,[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity,e=isNaN(parseFloat(e))?1:parseFloat(e),t=/^[0-9]+.?[0-9]*$/,e={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?e["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?e["fill-extrusion-height"]=this.height:e["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(e["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),e}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){for(var e=this.colorStops&&this.colorStops.length||0,t="<ul>",n=0;n<e;n++){var r=this.colorStops[n][0],r=this._getWrapperText(r),r=n===e-1?"> "+r:r+"-"+this._getWrapperText(this.colorStops[n+1][0]);t+="<li><span style='background-color:"+this.colorStops[n][1]+";'></span><span>"+r+"</span></li>"}return t+"</ul>"}},{key:"_getWrapperText",value:function(e){e*=null==this.legendRatio?1:parseFloat(this.legendRatio),e=parseFloat(e);return e%1e6<=1e6?e.toString():parseInt(e/1e3)+"k"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bs(e){return(Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t){return(Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zs(e){return(zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i=function(){var e=i,t=us;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gs(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=zs(n),t=(e=r?(e=zs(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Bs(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).style=t.style,e.isHoverAble=t.isHoverAble,e.highlightStyle=t.highlightStyle,e.themeField=t.themeField,e.styleGroups=t.styleGroups,e;throw new TypeError("Cannot call a class as a function")}return Fs((e=i).prototype,[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=v.transformStyle(this.highlightStyle);for(var r=new ns(e,this,v.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getStyleByData",value:function(e){var t={};if(t=L.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&0<this.styleGroups.length&&e.attributes){var n,r,o=this.themeField,i=e.attributes,a=this.styleGroups,s=!1,u=null;for(n in i)if(o===n){s=!0,u=i[n];break}if(s)for(var l=0,c=a.length;l<c;l++)u>=a[l].start&&u<a[l].end&&(r=a[l].style,t=L.copyAttributesWithClip(t,r))}return t=e.style&&!0===this.isAllowFeatureStyle?L.copyAttributesWithClip(e.style):t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ws(e,t){return(Ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}fr=function(){var e=i,t=si;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ws(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ys(n),t=(e=r?(e=Ys(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Us(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t,n){if(this instanceof i)return(e=o.call(this,e,t,n)).symbolType=t,e.symbolSetting=n.symbolSetting,e.themeField=n.themeField,e;throw new TypeError("Cannot call a class as a function")}return Vs((e=i).prototype,[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return!!(t=Dn[this.symbolType]&&this.themeField&&this.symbolSetting?new Dn[this.symbolType](e,this,[this.themeField],this.symbolSetting):t)&&(t.assembleShapes(),t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Hs(e){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qs(e,t){return(qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Js(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}yr=function(){var e=i,t=Ts;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),qs(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Zs(n),t=(e=r?(e=Zs(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Hs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Js(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).colorStops=null,e._extend(Js(e),t),e;throw new TypeError("Cannot call a class as a function")}return Xs((e=i).prototype,[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity,e=isNaN(parseFloat(e))?1:parseFloat(e),e={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?e["fill-extrusion-height"]=this.height:e["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(e["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),e}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,n=0;n<t;n++){var r=this.colorStops[n][0];e+="<li><span style='background-color:"+this.colorStops[n][1]+";'></span><span>"+r+"</span></li>"}return e+"</ul>"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $s(e,t){return($s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}mr=function(){var e=i,t=us;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$s(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=eu(n),t=(e=r?(e=eu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Ks(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).themeField=t.themeField,e.style=t.style,e.styleGroups=t.styleGroups,e.isHoverAble=t.isHoverAble,e.highlightStyle=t.highlightStyle,e;throw new TypeError("Cannot call a class as a function")}return Qs((e=i).prototype,[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),n={};n.nodesClipPixel=this.nodesClipPixel,n.isHoverAble=this.isHoverAble,n.isMultiHover=this.isMultiHover,n.isClickAble=this.isClickAble,n.highlightStyle=v.transformStyle(this.highlightStyle);for(var r=new ns(e,this,v.transformStyle(t),n),o=0;o<r.shapes.length;o++)this.renderer.addShape(r.shapes[o]);return r}},{key:"getStyleByData",value:function(e){var t={};if(t=L.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&0<this.styleGroups.length&&e.attributes){var n,r,o=this.themeField,i=e.attributes,a=this.styleGroups,s=!1,u=null;for(n in i)if(o===n){s=!0,u=i[n];break}if(s)for(var l=0,c=a.length;l<c;l++)u.toString()===a[l].value.toString()&&(r=a[l].style,t=L.copyAttributesWithClip(t,r))}return t=e.style&&!0===this.isAllowFeatureStyle?L.copyAttributesWithClip(e.style):t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tu(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ru={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},ou=(nu((Or=iu).prototype,[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var e,t=this.getState(),n=t.data,r=t.color,o=t.radius,i=t.opacity,a=t.highlightColor,s=t.radiusScale,u=t.radiusMinPixels,l=t.radiusMaxPixels,c=t.strokeWidth,f=t.outline,h=this,n={id:"scatter-plot",data:n,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:i,radius:o,radiusScale:s,highlightColor:a,radiusMinPixels:u,radiusMaxPixels:l,strokeWidth:c,outline:f,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){return e?(e=e.getLngLat())&&[e.lng,e.lat,0]:[0,0,0]},getColor:function(e){e=e&&e.getStyle();return e&&e.color||h.color},getRadius:function(e){e=e&&e.getStyle();return e&&e.radius||h.radius},updateTriggers:{getColor:[r],getRadius:[o]}},p=(this.onClick&&(n.onClick=this.onClick),this.onHover&&(n.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(n),{});for(e in t)p[e]=t[e];i=parseInt(this.canvas.style.width),s=parseInt(this.canvas.style.height);p.width=i,p.height=s,p.layers=[this.layer],p.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(p),this.draw()}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};L.assign(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=L.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=this.layer.props.data.length=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=L.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"getGraphicBy",value:function(e,t){var n,r=null;for(n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var n,r,o=[];for(r in this.graphics)(n=this.graphics[r])&&n.attributes&&n.attributes[e]===t&&o.push(n);return o}},{key:"removeGraphics",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(e&&0!==e.length&&e!==this.graphics)for(var t=(e=L.isArray(e)?e:[e]).length-1;0<=t;t--){var n=e[t],n=L.indexOf(this.graphics,n);-1!==n&&this.graphics.splice(n,1)}else this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0);this.update()}},{key:"update",value:function(){var e,t,n;"Awaiting state"!==this.layer.lifecycle&&(this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),e=this.getState(),t=parseInt(this.canvas.style.width),n=parseInt(this.canvas.style.height),e.width=t,e.height=n,this.layer.setState(e))}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.id);(t=void 0===t||t)?(t=document.getElementById(e),n&&t&&t.parentNode.insertBefore(n,t)):(t=document.getElementById(e),n&&(t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)))}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"draw",value:function(){var e,t=this.getState(),n={};for(e in t)n[e]=t[e];var r=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);n.width=r,n.height=o,n.layers=[this.layer],n.canvas=this.canvas,this.deckGL.setProps(n)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return this.id&&(t.id=this.id),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.cursor="",t.width=parseInt(e.style.width),t.height=parseInt(e.style.height),t.style.width=e.style.width,t.style.height=e.style.height,t}},{key:"getState",value:function(){var e=this.functions.getMapState();return function(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):tu(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},e)}}]),Object.defineProperty(Or,"prototype",{writable:!1}),iu);function iu(e,t,n,r){if(!(this instanceof iu))throw new TypeError("Cannot call a class as a function");t=L.assign(this,ru,t);this.id=e,this.graphics=[].concat(t.graphics),this.mapOptions=r,this.functions=n,this.visibility=!0,this.init()}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}au((Au=uu).prototype,[{key:"addTo",value:function(e){return this.onAdd(e),this}},{key:"onAdd",value:function(e){this.map=e,this.renderer=new ou(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(e){this.renderer&&this.renderer.setStyle(e)}},{key:"setGraphics",value:function(e){this.renderer&&this.renderer.setGraphics(e)}},{key:"addGraphics",value:function(e){this.renderer&&this.renderer.addGraphics(e)}},{key:"getGraphicBy",value:function(e,t){return this.renderer&&this.renderer.getGraphicBy(e,t)}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){return this.renderer&&this.renderer.getGraphicsByAttribute(e,t)}},{key:"removeGraphics",value:function(){this.renderer&&this.renderer.removeGraphics(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"moveTo",value:function(e,t){this.renderer.moveTo(e,t)}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var e,t={},n=this.map.getCenter(),r={longitude:n.lng,latitude:n.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(e in r)t[e]=r[e];return this.map.getCRS&&this.map.getCRS()!==l().CRS.EPSG3857&&(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),t}}]),Object.defineProperty(Au,"prototype",{writable:!1});var Or=uu,su=function(){try{return THREE}catch(e){return{}}}();function uu(e,t){if(!(this instanceof uu))throw new TypeError("Cannot call a class as a function");this.options=t,this.id=e||L.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0}function lu(e,t,n){return e===n||e===t?e:((e-t)%(e=n-t)+e)%e+t}function cu(e){return e*Math.PI/180}var fu={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,n=this.METERS_PER_DEGREE,r=this.MAX_LATITUDE,e=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},o=e.lng,e=Math.max(Math.min(r,e.lat),-r);return{x:o*n,y:(0===e?0:Math.log(Math.tan((90+e)*t/2))/t)*n}},unproject:function(e){var t=e.x,e=e.y,n=this.RAD,r=this.METERS_PER_DEGREE,o=0===e?0:(o=e/r,(2*Math.atan(Math.exp(o*n))-Math.PI/2)/n);return{lng:lu(t/r,-180,180),lat:lu(o,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,n){var r,o;return e?(n=n||0,(t=t||0)||n?(r=e.lng,0!==t&&(t=Math.abs(t),o=cu(e.lng),r=lu(180*(o+=2*Math.sqrt(Math.pow(Math.sin(t/(2*this.R)),2)/Math.pow(Math.cos(o),2))*(0<t?1:-1))/Math.PI,-180,180)),t=e.lat,0!==n&&(o=Math.abs(n),n=cu(e.lat),t=lu(180*(n+=2*Math.sin(o/(2*this.R))*(0<o?1:-1))/Math.PI,-90,90)),{lng:r,lat:t}):e):null},getResolution:function(e){if(!this.resolutions){for(var t=[],n=12756274*Math.PI,r=0;r<=this.maxZoom;r++)t[r]=n/(256*Math.pow(2,r));this.resolutions=t}var o=0|e,i=this.resolutions.length,a=this.resolutions[o=o<0?0:i-1<o?i-1:o];return(0|e)!==e&&o!=i-1?a+(this.resolutions[1+o]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){e=this.project(e);return this.transform(e,this.projection.getResolution(t))},locate:function(e,t,n){return this.projection.locate(e,t,n)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pu=fu.projection,du=su.Color,yu=su.Scene,gu=su.WebGLRenderer,vu=su.PerspectiveCamera,mu=su.Vector3,bu=su.Shape,wu=su.Mesh,_u=su.ExtrudeGeometry,xu=Math.PI/180,Su=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Ou=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Pu=(hu((Au=Eu).prototype,[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return Su(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,n=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(n.width,n.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&Ou(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&Ou(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,t=null==e?t.getZoom():e,e=pu.getResolution(pu.nativeMaxZoom);return pu.getResolution(t)/e}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),n=e.transform.zoomScale(pu.nativeMaxZoom-e.getZoom()-1),r=Math.tan(e.transform.fov/2*xu),o=this.camera,i=e.getPitch()*xu,n=-n*t.height/2/r,t=(o.position.z=n*Math.cos(i),fu.lngLatToPoint(e.getCenter(),pu.nativeMaxZoom)),r=Math.sin(i)*n,i=e.getBearing()*xu;o.position.x=t.x+r*Math.sin(i),o.position.y=t.y-r*Math.cos(i),o.up.set(Math.sin(i),-Math.cos(i),0),o.lookAt(new su.Vector3(t.x,t.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(e){var t,n,r=this;return e?(n=this.getCoordinatesCenter(e),t=this.lngLatToPosition(n),n=e.map(function(e){return r.lngLatToPosition({lng:e[0],lat:e[1]}).sub(t)}),new bu(n)):null}},{key:"toThreeMesh",value:function(e,t,n,r){var o;return e?(o=e,r&&(o=this.removeDuplicatedCoordinates(e)),r=this.distanceToThreeVector3(t,t).x,e=this.toThreeShape(o),t=new _u(e,{amount:r,bevelEnabled:!0}),e=new wu(t,n),t=this.lngLatToPosition(this.getCoordinatesCenter(o)),e.position.set(t.x,t.y,-r),e):null}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.scene.add(e)}},{key:"clearMesh",value:function(){var e=this.scene;if(e)for(var t=e.children.length-1;0<=t;t--)e.children[t]instanceof su.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.scene;if(t)for(var n=t.children.length-1;0<=n;n--)!e&&t.children[n]instanceof su.Camera||t.remove(t.children[n]);return this}},{key:"setPosition",value:function(e,t){return e&&t&&(t=this.lngLatToPosition(t),e.position.set(t.x,t.y,t.z)),this}},{key:"lngLatToPosition",value:function(e){var t=fu.projection.nativeMaxZoom,e=fu.lngLatToPoint(e,t);return new mu(e.x,e.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,n){var r=this.map,n=n||r.getCenter(),r=fu.projection.nativeMaxZoom,o=fu.locate(n,e,t),n=fu.lngLatToPoint(n,r),o=fu.lngLatToPoint(o,r),r=Math.abs(o.x-n.x)*Math.sign(e),e=Math.abs(o.y-n.y)*Math.sign(t);return new mu(r,e,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var n=[].concat(e),r=n.length-1;1<=r;r--)t(n[r],n[r-1])&&n.splice(r,1);return t(n[0],n[n.length-1])&&n.splice(n.length-1,1),n}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,n=0,r=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],n+=e[o][1],r++);return{lng:t/r,lat:n/r}}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");t.id=this._layer.id,t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){var e;if(!this.canvas)return(e=this.canvas=document.createElement("canvas")).className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}},{key:"_resetElementSize",value:function(e){var t,n,r;e&&(t=this.getMapSize(),n=(r=window.devicePixelRatio||1)*t.width,r=r*t.height,e.width=n,e.height=r,e.style.width=t.width+"px",e.style.height=t.height+"px")}},{key:"_initThreeRenderer",value:function(){var e=this.map,t=this.getMapSize(),n=("gl"===(this.renderer||"gl")&&((n=new gu({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,n.clear()),n.setClearColor(new du(1,1,1),0),n.canvas=this.canvas,this.context=n,e.transform.fov),e=Math.tan(n/2*xu),e=this.getScale(pu.minZoom)/this.getScale(pu.nativeMaxZoom)*t.height/2/e;this.camera=new vu(n,t.width/t.height,1,e),this.scene=new yu,this.scene.add(this.camera)}}]),Object.defineProperty(Au,"prototype",{writable:!1}),Eu);function Eu(e,t,n){if(!(this instanceof Eu))throw new TypeError("Cannot call a class as a function");this._layer=e,this.renderer=t||"gl",this.options=n}function ku(e){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ju(e,t){return(ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tu(e){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Au=function(){var e=i,t=l().Evented;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Tu(n),t=(e=r?(e=Tu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ku(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Cu(t)};function i(e,t,n){var r;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");(r=o.call(this)).id=e,r.type="custom",r.renderingMode="3d",r.overlay=!0;e=(r.options=n)&&n.threeOptions;return r.renderer=new Pu(Cu(r),t,e),r}return Mu((e=i).prototype,[{key:"onAdd",value:function(e){return this._map=e,this.renderer.setMap(e),this.renderer.render(),this.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(this.renderer)),this}},{key:"addTo",value:function(e){return e.addLayer(this),this}},{key:"toThreeShape",value:function(e){return this.renderer.toThreeShape(e)}},{key:"toThreeMesh",value:function(e,t,n,r){return this.renderer.toThreeMesh(e,t,n,r)}},{key:"addObject",value:function(e,t){this.renderer&&this.renderer.addObject(e,t)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(e){return this.renderer.clearAll(e),this}},{key:"setPosition",value:function(e,t){return this.renderer.setPosition(e,t)}},{key:"lngLatToPosition",value:function(e){return this.renderer.lngLatToPosition(e)}},{key:"distanceToThreeVector3",value:function(e,t,n){var r=this._map,n=n||r.getCenter();return this.renderer.distanceToThreeVector3(e,t,n)}},{key:"removeDuplicatedCoordinates",value:function(e){this.renderer.removeDuplicatedCoordinates(e)}},{key:"getCoordinatesCenter",value:function(e){return this.renderer.getCoordinatesCenter(e)}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Iu((Uu=Lu).prototype,[{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,L.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e))}},{key:"updateHeatPoints",value:function(e){this.features&&0<this.features.length?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,n,r,o=[],i=e.getEast()-e.getWest(),e=e.getNorth()-e.getSouth(),a=this.mapElement,i=i/a.width>e/a.height?i/a.width:e/a.height;this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var s=0;s<this.features.length;s++){var u=this.features[s],l=u.geometry,l=this.getPixelXY(new ie(l.x,l.y));this.featureWeight?(l.weight=u.attributes[this.featureWeight],this.maxWeight||(n=n||l.weight,r=r||l.weight,n=Math.max(n,l.weight),r=Math.min(r,l.weight))):l.weight=1,u=Math.floor(l.x),t=Math.floor(l.y),l=l.weight,o.push([u,t,l])}this.maxWeight?this.draw(o,this.maxWeight):this.draw(o,n&&r?(n+r)/2:1)}},{key:"draw",value:function(e,t){if(!(0<this.maxHeight&&0<this.maxWidth))return!1;var n=this.canvasContext;n.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<e.length;r++){var o=e[r];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),n.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var n,r=0;r<e.length;r+=4)(n=4*e[r+3])&&(e[r]=t[n],e[r+1]=t[1+n],e[r+2]=t[2+n])}},{key:"drawCircle",value:function(e){var t=e/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*e,n.width=2*e,r.shadowOffsetX=r.shadowOffsetY=2*e,r.shadowBlur=t,r.shadowColor="#000000",r.beginPath(),r.arc(-e,-e,e/2,0,2*Math.PI,!0),r.closePath(),r.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),n=t.getContext("2d"),r=n.createLinearGradient(0,0,0,256);t.height=256;for(var o=t.width=1,i=0,a=e.length;i<a;i++)r.addColorStop(o/a,e[i]),o++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var t;return(e instanceof j||e instanceof Ln)&&(t=this.options.convertLatlonToPixel({lon:e.x,lat:e.y}),t={x:parseInt(t.x),y:parseInt(t.y)}),e instanceof ie&&(e=this.options.convertLatlonToPixel(e),t={x:parseInt(e.x),y:parseInt(e.y)}),t}},{key:"_createCanvasContainer",value:function(e){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),L.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),e.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(e){L.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof nt)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type))var r=new jn,t=t.concat(r.read(e[n]));else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("Features[".concat(n,"]'s type does not match, please check."));t.push(Ko.fromJson(e[n]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();for(var t,n,r=[],o=0,i=(e=L.isArray(e)?e:[e]).length;o<i;o++)t=e[o],-1!==(n=L.indexOf(this.features,t))?this.features.splice(n,1):r.push(t);var a=0==r.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:r}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"setExtent",value:function(e){this.extent=e}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}]),Object.defineProperty(Uu,"prototype",{writable:!1});var Ru=Lu;function Lu(e){if(!(this instanceof Lu))throw new TypeError("Cannot call a class as a function");this.options=e,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=e.opacity||1,this.colors=e.colors||["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!e.useGeoUnit&&e.useGeoUnit,this.radius=e.radius||50,this.featureWeight=e.featureWeight||null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=e.mapElement,this._createCanvasContainer(e.targetElement,e.size)}function Nu(e){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Du(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Bu(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Du(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Du(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function Fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gu(e,t){return(Gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zu(e){return(zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uu=function(){var e=i,t=l().Evented;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gu(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=zu(n),t=(e=r?(e=zu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Nu(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return t=t||{},(n=o.call(this)).options=t,n.name=e,n.id=t.id||L.createUniqueID("HeatMapLayer_"),n.loadWhileAnimating=void 0===t.loadWhileAnimating||t.loadWhileAnimating,n.features={},n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.type="custom",n.renderingMode="3d",n.overlay=!0,n;throw new TypeError("Cannot call a class as a function")}return Fu((e=i).prototype,[{key:"onAdd",value:function(e){this.map=e;var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.renderer=new Ru(Bu(Bu({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:e,mapElement:t})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(e){this.renderer?this.renderer.addFeatures(e):this.features=e,this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.renderer.setOpacity(e),null!==this.map)&&this.fire("changelayer",{layer:this,property:"opacity"})}},{key:"updateHeatPoints",value:function(e){this.renderer.updateHeatPoints(e)}},{key:"getPixelXY",value:function(e){return this.renderer.getPixelXY(e)}},{key:"removeFeatures",value:function(e){var t,e=this.renderer.removeFeatures(e);e&&(t=e.heatPointsFailedRemoved,e=e.succeed,this.fire(this.EVENT_TYPES[1],{features:t,succeed:e}))}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.renderer.rootCanvas.id);(t=void 0===t||t)?(t=document.getElementById(e),n&&t&&t.parentNode.insertBefore(n,t)):(t=document.getElementById(e),n&&(t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)))}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"_convertLatlonToPixel",value:function(e){return this.map.project(new(l().LngLat)(e.lon,e.lat))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vu(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Wu((Ku=Hu).prototype,[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(e){L.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=L.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=this.layer.props.data.length=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=L.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var n=0;n<t.length;n++)this.layer.props.data.push(t[n]);this.update()}},{key:"update",value:function(){"Awaiting state"!==this.layer.lifecycle&&this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(e,t){var n=document.getElementById(this.id);(t=void 0===t||t)?(t=document.getElementById(e),n&&t&&t.parentNode.insertBefore(n,t)):(t=document.getElementById(e),n&&(t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)))}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e,t,n=function(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Vu(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Vu(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),r={};for(e in n)r[e]=n[e];for(t in this.props)r[t]=this.props[t];return this._isEPSG3857&&this._isEPSG3857()?(r.coordinateSystem=this.coordinateSystem,r.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(r.coordinateSystem=1,r.isGeographicCoordinateSystem=!1),r.data=this.data,r}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var t=this;this.props.getPosition=this.callback.getPosition||function(e){return e?(e=e.getLngLat())&&[e.lng,e.lat,0]:[0,0,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor||function(e){e=e&&e.getStyle();return e&&e.color||t.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius||function(e){e=e&&e.getStyle();return e&&e.radius||t.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color)&&(this.props.updateTriggers.getColor=[this.props.color]),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath||function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon||function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color||[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition||function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition||function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition||function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(e,t){var t=t.style,n=t.width,t=t.height;this.canvas=this._createCanvas(n,t),e.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.id=this.id,n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.cursor="",n.width=parseInt(e),n.height=parseInt(t),n.style.width=e,n.style.height=t,n}}]),Object.defineProperty(Ku,"prototype",{writable:!1});var Yu=Hu;function Hu(e,t){if(!(this instanceof Hu))throw new TypeError("Cannot call a class as a function");this.layerTypeID=e,this.data=[].concat(t.data),this.props=t.props||{},this.callback=t.callback||{},this.id=t.layerId||L.createUniqueID("graphicLayer_"+this.layerTypeID+"_")}function Xu(e){return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ju(e,t){return(Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zu(e){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ku=function(){var e=i,t=Yu;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ju(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Zu(n),t=(e=r?(e=Zu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Xu(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).type="custom",e.renderingMode="3d",e.overlay=!0,e;throw new TypeError("Cannot call a class as a function")}return qu((e=i).prototype,[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)this.mapContainer=this.map.getCanvasContainer();else{this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var t,n=this._getState(),r={};for(t in n)r[t]=n[t];r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw()}return this}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var e=this.map.getCenter();return{center:e,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:e.lng,latitude:e.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==l().CRS.EPSG3857}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var el={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},tl={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},nl={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:tl,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:el,latLabelStyle:el},rl=($u((dl=ol).prototype,[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this._drawLabel()}},{key:"setIntervals",value:function(e){this.options.interval=e,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;(e=e||{}).strokeStyle=Object.assign({},tl,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},el,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},el,e.latLabelStyle||{}),this.options=Object.assign({},nl,e,{extent:this.getDefaultExtent(e.extent),wrapX:e.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=!0,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){var e,t;this.canvas||(e=this.mapElement,this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",t=("undefined"==typeof window?{}:window).devicePixelRatio||1,this.canvas.width=parseInt(e.style.width)*t,this.canvas.height=parseInt(e.style.height)*t,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas))}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var e=this.getMapStateByKey("getBearing");this.isRotate=-180<e&&e<=-90||90<=e&&e<180}},{key:"_updateExtent",value:function(){var e,t;this.options.wrapX&&!this.oldExtent&&(e=(t=this.getMapStateByKey("getBounds"))._ne,t=t._sw,this.options.extent=[t.lng,t.lat,e.lng,e.lat])}},{key:"_calcInterval",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof e&&(e=e(this.map)),this._currLngInterval=e,this._currLatInterval=e}},{key:"_formatLat",value:function(e){return this.options.latFormatTickLabel?this.options.latLabelFormatter(e):e<0?Es(-1*e)+"S":0<e?Es(e)+"N":""+Es(e)}},{key:"_formatLng",value:function(e){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(e):0<(e=Ps(e))&&e<=180?Es(e)+"E":e<0&&-180<=e?Es(-1*e)+"W":""+Es(e)}},{key:"_parsePxToInt",value:function(e){2<e.length&&"p"===e.charAt(e.length-2)&&(e=e.substr(0,e.length-2));try{return parseInt(e,10)}catch(e){console.log(e)}return 0}},{key:"_drawLabel",value:function(){var t,n,e,r=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.visible,i=this.canvas,a=i.getContext("2d");o&&this.options.showLabel?this.mapElement&&(this._currLngInterval&&this._currLatInterval||this._calcInterval(),a.clearRect(0,0,i.width,i.height),o=this.options,t=o.lngLabelStyle,n=o.latLabelStyle,e=(o=this._getGridiculePoints()).lngPoints,o=o.latPonits,e.forEach(function(e){r._drawLng(a,e[0],e[1],e[2],t)}),o.forEach(function(e){r._drawLat(a,e[0],e[1],e[2],n)})):a.clearRect(0,0,i.width,i.height)}},{key:"_drawLat",value:function(e,t,n,r,o){e=this._setLabelStyle(e,o);var o=this.canvas.width,i=12;try{var a=e.font.split(" ")[0],i=this._parsePxToInt(a)}catch(e){console.log(e)}r||(a=t,t=n,n=this.getMapStateByKey("project",[a,t]));a=this._formatLat(t),t=e.measureText(a).width;e.strokeText(a,(r?o:n.x)-t,(r?n:n.y)+i/2),e.fillText(a,(r?o:n.x)-t,(r?n:n.y)+i/2)}},{key:"_drawLng",value:function(e,t,n,r,o){e=this._setLabelStyle(e,o);var o=this.canvas.height,i=(r||(i=n,n=this.getMapStateByKey("project",[t,i])),this._formatLng(t)),t=e.measureText(i).width;e.strokeText(i,(r?n:n.x)-t/2,r?o:n.y),e.fillText(i,(r?n:n.x)-t/2,r?o:n.y)}},{key:"_getLatPoints",value:function(){var n,r=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[-180,180],i=1<arguments.length?arguments[1]:void 0,a=2<arguments.length?arguments[2]:void 0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.features;if(e)return this.options.wrapX&&-180===o[0]&&180===o[1]?[]:(n=[],e.forEach(function(e){var t=e.geometry.coordinates[0][1];e.geometry.coordinates[1][1]===t&&(e="number"==typeof a?a:o[1],r.isRotate&&(e="number"==typeof i?i:o[0]),(n=r.options.wrapX?n.concat(r._getWrapPoints(e,t,[e,e])):n).push([e,t]))}),n)}},{key:"_getLngPoints",value:function(){var n,r,o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[-90,90],t=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.features;if(a)return n="number"==typeof t?t:e[0],this.isRotate&&(n="number"==typeof i?i:e[1]),r=[],a.forEach(function(e){var t=e.geometry.coordinates[0][0];e.geometry.coordinates[1][0]===t&&(r.push([t,n]),o.options.wrapX)&&(r=r.concat(o._getWrapPoints(t,n)))}),r}},{key:"_getWrapPoints",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.oldExtent,r=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=2<n.length?n[2]:n[1];e>=a.lng;){var u=Ps(e,180===s,-180===n[0]);(!n||u>=n[0]&&u<=s)&&r.push([e,t]),e-=360}for(;e<=i.lng;){var l=Ps(e,180===s,-180===n[0]);(!n||l>=n[0]&&l<=s)&&r.push([e,t]),e+=360}return r}},{key:"_getGridiculePoints",value:function(){var e=this._getEdgeLat(),t=this._getEdgeLng(),n=this._getRange(),r=n.latRange,o=n.lngRange,i=n.firstLat,a=n.firstLng,s=n.lastLat,n=n.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,n),e,1),lngPoints:this._getUniquePoint(this._getLngPoints(r,i,s),t,0)}}},{key:"_getEdgeLat",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,t=[],n=[],r=this.canvas.width,o=this.canvas.height,i=this._getRange().extent,a=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&Ps(a.lng)>i[2])return[];for(var s=this._countDecimals(e),u=0;u<=o;u++){var l=this.getMapStateByKey("unproject",[r,u]),c=Ps(l.lng);(this.options.wrapX?c>=i[0]&&c<=i[2]:l.lng>=i[0]&&l.lng<=i[2])&&l.lat>=i[1]&&l.lat<=i[3]&&(t.push([l.lat,u]),n.push(l.lat),void 0===d)&&l.lat.toFixed(s)%e==0&&(d=Number(l.lat.toFixed(s)))}var a=this._getIntersectRange(d,n,t,e),f=a.first,h=a.last,p=a.coordinates,a=a.points,d=Math.min(Math.max(f,-90),90),f=Math.max(Math.min(Math.round(h),90),-90);return-90!==d||-90!==f?this._getClosestCoordinate(d,f,p,a,e):[]}},{key:"_getEdgeLng",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,t=[],n=[],r=this.canvas.width,o=this.canvas.height,i=this.options.extent,a=this._countDecimals(e),s=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&Ps(s.lat)>i[3])return[];for(var u=0;u<=r;u++){var l=this.getMapStateByKey("unproject",[u,o]),c=Ps(l.lng);(this.options.wrapX?c>=i[0]&&c<=i[2]:l.lng>=i[0]&&l.lng<=i[2])&&l.lat>=i[1]&&l.lat<=i[3]&&(t.push([l.lng,u]),n.push(l.lng),void 0===d)&&l.lng.toFixed(a)%e==0&&(d=Number(l.lng.toFixed(a)))}var s=this._getIntersectRange(d,n,t,e),f=s.first,h=s.last,p=s.coordinates,s=s.points,d=f;return this._getClosestCoordinate(d,h,p,s,e)}},{key:"_getIntersectRange",value:function(e,t,n,r){var o=t[t.length-1];if(o<e){o=e,t.reverse(),n.reverse();for(var i=this._countDecimals(r),a=0;a<=t.length;a++){var s=t[a];if(s.toFixed(i)%r==0){e=Number(s.toFixed(i));break}}}return{first:e,last:o,coordinates:t,points:n}}},{key:"_getClosestCoordinate",value:function(e,t,n,r,o){for(var i=[],a=e;a<=t;){var s=this._getClosestNumberIndex(a,n),u=r[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,n=n.slice(s),r=r.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(e,t){for(var n=0,r=Number.MAX_VALUE,o=0;o<t.length;o++){var i=Math.abs(t[o]-e);i<=r&&(i===r&&t[o]<t[n]||(n=o,r=i))}return n}},{key:"_getUniquePoint",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return t.concat(e);if(!e||0===e.length)return t;var r,o=e,i=this.canvas.width,a=this.canvas.height;for(r in t){var s=this.getMapStateByKey("project",t[r]),u=o.findIndex(function(e){return e[0]===t[r][n]});u<=-1?o.push(t[r]):s&&0<=s.x&&s.x<=i&&0<=s.y&&s.y<=a&&(o[u]=t[r])}return o}},{key:"_countDecimals",value:function(e){return Math.floor(e)!==e&&e.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var e=this._currLngInterval||10,t=this._currLatInterval||10,n=[],r=this._getRange(),o=r.latRange,i=r.lngRange,a=r.firstLat,s=r.firstLng,u=r.lastLat,l=r.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&n.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&n.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=e)n.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&n.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&n.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=t)n.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return n}},{key:"_getRange",value:function(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.extent&&(function(e){if(Array.isArray(e))return Qu(e)}(e=this.options.extent)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?Qu(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Qu(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r={};return(n=(n=n&&0!==n.length?n:this.getDefaultExtent()).map(function(e){return Number(e.toFixed(6))}))[1]%this._currLatInterval!=0&&(r.firstLat=n[1],t=Math.ceil(n[1]/this._currLatInterval),n[1]=t*this._currLatInterval),n[3]%this._currLatInterval!=0&&(r.lastLat=n[3],t=Math.floor(n[3]/this._currLatInterval),n[3]=t*this._currLatInterval),n[0]%this._currLngInterval!=0&&(r.firstLng=n[0],t=Math.ceil(n[0]/this._currLngInterval),n[0]=t*this._currLngInterval),n[2]%this._currLngInterval!=0&&(r.lastLng=n[2],t=Math.floor(n[2]/this._currLngInterval),n[2]=t*this._currLngInterval),Object.assign({latRange:[n[1],n[3]],lngRange:[n[0],n[2]],extent:n},r)}},{key:"_makeLineCoords",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[-90,90],n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"lng";e="lng"===o?this._lngFix(e):e;for(var n="number"==typeof n?n:t[0],r="number"==typeof r?r:t[1],i=Math.abs(n-r),a=[],s=n;s<=r;s+=i)a.push("lng"===o?[e,s]:[s,e]);return a}},{key:"_makeLineFeature",value:function(e){return{type:"Feature",geometry:{type:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:e}}}},{key:"_lngFix",value:function(e){return 180<=e?180:e<=-180?-180:e}},{key:"_transformStrokeStyle",value:function(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;return n&&"string"!=typeof n?(e={visibility:this.visible?"visible":"none","line-join":n.lineJoin||"round","line-cap":n.lineCap||"round"},t={"line-color":n.lineColor||"rgba(0,0,0,0.2)","line-width":n.lineWidth||1,"line-offset":n.lineDashOffset||0,"line-translate-anchor":"viewport"},n.lineWidth&&("function"==typeof n.lineWidth?t["line-width"]=n.lineWidth(this.map):t["line-width"]=n.lineWidth),n.lindDasharray&&("function"==typeof n.lindDasharray?t["line-dasharray"]=n.lindDasharray(this.map):t["line-dasharray"]=n.lindDasharray),{layout:e,paint:t}):{paint:{"line-color":n||"rgba(0,0,0,0.2)"}}}},{key:"_setLabelStyle",value:function(e,t){return t.textColor&&(e.fillStyle=t.textColor),t.textSize&&(e.font=t.textSize+" "+(t.textFont||["Calibri","sans-serif"]).join(",")),t.textHaloColor&&(e.strokeStyle=t.textHaloColor,e.lineWidth=t.textHaloWidth||1),t.textAnchor&&(e.textBaseline=this._getTxetBaseline(t.textAnchor),e.textAligin=this._getTxetAlign(t.textAligin)),e}},{key:"_getTxetBaseline",value:function(e){return!e||(e=e.split("-")).includes("bottom")?"bottom":e.includes("top")?"top":e.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(e){return e?(e=e.split("-")).includes("left")?"left":e.includes("right")?"right":e.includes("center")?"center":void 0:"center"}}]),Object.defineProperty(dl,"prototype",{writable:!1}),ol);function ol(e,t,n,r){if(!(this instanceof ol))throw new TypeError("Cannot call a class as a function");this.map=e,this.id=r&&r.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=t,this.mapElement=r.mapElement,this.targetElement=r.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(){return null!=ul?ul:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}function sl(){return ll||45e3}var ul,ll,cl,fl={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},hl={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},pl={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:hl,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:fl,latLabelStyle:fl},dl=(il((dl=ml).prototype,[{key:"onAdd",value:function(e){this.map=e,this.renderer=new rl(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(e,t){return"getBearing"===e?this.map.getBearing():"getBounds"===e?this.map.getBounds():"project"===e?this.map.project(t):"unproject"===e?this.map.unproject(t):void 0}},{key:"setVisibility",value:function(e){var t=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof e?e:this.options.visible,this.visible="boolean"==typeof e?e:this.options.visible&&t>=this.options.minZoom&&t<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this.renderer._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e,this.map),this.updateGraticuleLayer(),this.renderer._drawLabel()}},{key:"setStrokeStyle",value:function(e){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=e;var t,n,e=this.renderer._transformStrokeStyle(e),r=e.layout,o=e.paint;for(t in r)this.map.setLayoutProperty(this.sourceId,t,r[t]);for(n in o)this.map.setPaintProperty(this.sourceId,n,o[n])}}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this.renderer._drawLabel()}},{key:"setIntervals",value:function(e){this.renderer&&this.renderer.setIntervals(e)}},{key:"getDefaultExtent",value:function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.map,r=(r=(r.getCRS&&r.getCRS()||{}).extent)||[-180,-85.05119,180,85.05119];return e&&0!==e.length?(t=(n=l().LngLatBounds.convert(e))._sw,n=n._ne,e=[t.lng,t.lat,n.lng,n.lat],[Math.max(r[0],e[0]),Math.max(r[1],e[1]),Math.min(r[2],e[2]),Math.min(r[3],e[3])]):r}},{key:"addGraticuleLayer",value:function(){var e;this.map.getSource(this.sourceId)||(e={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}},this.map.addSource(this.sourceId,e)),this.map.getLayer(this.sourceId)||(e=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle()),this.map.addLayer(e))}},{key:"_getLatPoints",value:function(e,t,n,r){return this.renderer._getLatPoints(e,t,n,r)}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var e,t=this,n=this.map;n&&(e=n.getStyle&&n.getStyle().layers)&&e.length&&e.findIndex(function(e){return e.id===t.sourceId})!==e.length-1&&n.getLayer(this.sourceId)&&(n.removeLayer(this.sourceId),this.addGraticuleLayer())}},{key:"updateGraticuleLayer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.features;this.map.getSource(this.sourceId)&&(e={type:"FeatureCollection",features:e},this.map.getSource(this.sourceId).setData(e)),this.addGraticuleLayer()}}]),Object.defineProperty(dl,"prototype",{writable:!1}),ml),p=(e(19957),e(95937),e(54238)),yl=e.n(p),gl=window.fetch,vl={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=L.toJSON(e[t]));t=encodeURIComponent(e[t]);this.queryValues.push(t)}},issue:function(e){for(var t=this,n=t.getUid(),r=e.url,o=[],i=r,a=0,s=t.queryKeys?t.queryKeys.length:0,u=0;u<s;u++)if(i.length+t.queryKeys[u].length+2>=t.limitLength){if(0==a)return!1;o.push(i),i=r,a=0,u--}else if(i.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var l=t.queryValues[u];0<l.length;){var c=t.limitLength-i.length-t.queryKeys[u].length-2,f=(-1<i.indexOf("?")?i+="&":i+="?",l.substring(0,c));"%"===f.substring(c-1,c)?(--c,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=t.queryKeys[u]+"="+f,l=l.substring(c),0<f.length&&(o.push(i),i=r,a=0)}else a++,-1<i.indexOf("?")?i+="&":i+="?",i+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(i),t.send(o,"SuperMapJSONPCallbacks_"+n,e&&e.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(o,i,a){var s=o.length;if(0<s)return new Promise(function(t){for(var e=(new Date).getTime(),n=0;n<s;n++){var r=o[n];-1<r.indexOf("?")?r+="&":r+="?",r=(r+="sectionCount="+s)+("&sectionIndex="+n)+("&jsonpUserID="+e),a&&(r=decodeURIComponent(r),r=a+encodeURIComponent(r)),yl()(r,{jsonpCallbackFunction:i,timeout:3e4}).then(function(e){t(e.json())})}})},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}},y={commit:function(e,t,n,r){switch(e=e&&e.toUpperCase()){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},supportDirectRequest:function(e,t){return!!L.isInTheSameDomain(e)||(null!=t.crossOrigin?t.crossOrigin:al()||t.proxy)},get:function(e,t,n){return n=n||{},e=L.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),this.supportDirectRequest(e,n)?this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")),t,n):this._fetch(e,t,n,"GET"):(n={url:e=e.replace(".json",".jsonp"),data:t},vl.GET(n))},delete:function(e,t,n){return n=n||{},e=L.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),this.supportDirectRequest(e,n)?this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")),t,n):this._fetch(e,t,n,"DELETE"):(e=e.replace(".json",".jsonp"),n={url:e+="&_method=DELETE",data:t},vl.DELETE(n))},post:function(e,t,n){return e=this._processUrl(e,n=n||{}),this.supportDirectRequest(e,n)?this._fetch(e,t,n,"POST"):(e=e.replace(".json",".jsonp"),n={url:L.urlAppend(e,"_method=POST"),data:t},vl.POST(n))},put:function(e,t,n){return e=this._processUrl(e,n=n||{}),this.supportDirectRequest(e,n)?this._fetch(e,t,n,"PUT"):(e=e.replace(".json",".jsonp"),n={url:e+="&_method=PUT",data:t},vl.PUT(n))},urlIsLong:function(e){for(var t,n=0,r=0,o=e.length;r<o;r++)(t=e.charCodeAt(r))<127?n++:128<=t&&t<=2047?n+=2:2048<=t&&t<=65535&&(n+=3);return!(n<2e3)},_postSimulatie:function(e,t,n,r){return t+=(-1<t.indexOf("?")?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){var n;return this._isMVTRequest(e)||(-1!==e.indexOf(".json")||t.withoutFormatSuffix||(e.indexOf("?")<0?e+=".json":2===(n=e.split("?")).length&&(e=n[0]+".json?"+n[1])),t&&t.proxy&&(e="function"==typeof t.proxy?t.proxy(e):(e=decodeURIComponent(e),t.proxy+encodeURIComponent(e)))),e},_fetch:function(e,t,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||FormData.prototype.isPrototypeOf(t)||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,gl(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:this._getWithCredentials(n),mode:"cors",timeout:sl()}).then(function(e){return e})):gl(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:this._getWithCredentials(n),mode:"cors",timeout:sl()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},yl()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(n,r){return new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},n),r.then(e,t)})},_getParameterString:function(e){var t,n=[];for(t in e){var r=e[t];null!=r&&"function"!=typeof r&&(r=Array.isArray(r)||"[object Object]"===r.toString()?encodeURIComponent(JSON.stringify(r)):encodeURIComponent(r),n.push(encodeURIComponent(t)+"="+r))}return n.join("&")},_isMVTRequest:function(e){return-1<e.indexOf(".mvt")||-1<e.indexOf(".pbf")}};function ml(e){if(!(this instanceof ml))throw new TypeError("Cannot call a class as a function");this.id=e&&e.layerID?e.layerID:L.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(e=e||{}).strokeStyle=Object.assign({},hl,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},fl,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},fl,e.latLabelStyle||{}),this.options=Object.assign({},pl,e),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)}(p=cl=cl||{})[p.Unknown=0]="Unknown",p[p.Point=1]="Point",p[p.LineString=2]="LineString",p[p.Polygon=3]="Polygon",p[p.MultiPoint=4]="MultiPoint",p[p.MultiLineString=5]="MultiLineString",p[p.MultiPolygon=6]="MultiPolygon",p[p.GeometryCollection=7]="GeometryCollection",p[p.CircularString=8]="CircularString",p[p.CompoundCurve=9]="CompoundCurve",p[p.CurvePolygon=10]="CurvePolygon",p[p.MultiCurve=11]="MultiCurve",p[p.MultiSurface=12]="MultiSurface",p[p.Curve=13]="Curve",p[p.Surface=14]="Surface",p[p.PolyhedralSurface=15]="PolyhedralSurface",p[p.TIN=16]="TIN",p[p.Triangle=17]="Triangle";var bl=e(61095);function wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}p=[{key:"getRootAsGeometry",value:function(e,t){return(t||new Sl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,t){return e.setPosition(e.position()+bl.XU),(t||new Sl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(e){e.startObject(8)}},{key:"addEnds",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"createEndsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;0<=n;n--)e.addInt32(t[n]);return e.endVector()}},{key:"startEndsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addXy",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createXyVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startXyVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addZ",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createZVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startZVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addM",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"createMVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startMVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addT",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"createTVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startTVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addTm",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"createTmVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addInt64(t[n]);return e.endVector()}},{key:"startTmVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addType",value:function(e,t){e.addFieldInt8(6,t,cl.Unknown)}},{key:"addParts",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createPartsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;0<=n;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startPartsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endGeometry",value:function(e){return e.endObject()}},{key:"createGeometry",value:function(e,t,n,r,o,i,a,s,u){return Sl.startGeometry(e),Sl.addEnds(e,t),Sl.addXy(e,n),Sl.addZ(e,r),Sl.addM(e,o),Sl.addT(e,i),Sl.addTm(e,a),Sl.addType(e,s),Sl.addParts(e,u),Sl.endGeometry(e)}}],wl((mf=Sl).prototype,[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"ends",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}},{key:"endsLength",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"endsArray",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"xy",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"xyLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"xyArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"z",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"zLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"zArray",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"m",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"mLength",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"mArray",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"t",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"tLength",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"tArray",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"tm",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}},{key:"tmLength",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):cl.Unknown}},{key:"parts",value:function(e,t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new Sl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}}]),wl(mf,p),Object.defineProperty(mf,"prototype",{writable:!1});var _l,xl=Sl;function Sl(){if(!(this instanceof Sl))throw new TypeError("Cannot call a class as a function");this.bb=null,this.bb_pos=0}function Ol(e,t){for(var n=[],r=0;r<e.length;r+=2){var o=[e[r],e[r+1]];t&&o.push(t[r>>1]),n.push(o)}return n}function Pl(e,t){if((t=t===cl.Unknown?e.type():t)===cl.GeometryCollection){for(var n=[],r=0;r<e.partsLength();r++){var o=e.parts(r),i=o.type();n.push(Pl(o,i))}return{type:cl[t],geometries:n}}if(t===cl.MultiPolygon){for(var a=[],s=0;s<e.partsLength();s++)a.push(Pl(e.parts(s),cl.Polygon));return{type:cl[t],coordinates:a.map(function(e){return e.coordinates})}}var u=function(e,t){var n,r,o,i,a,s=e.xyArray(),u=e.zArray();switch(t){case cl.Point:var l=Array.from(s);return u&&l.push(u[0]),l;case cl.MultiPoint:case cl.LineString:return Ol(s,u);case cl.MultiLineString:case cl.Polygon:return n=s,r=u,(l=e.endsArray())&&0!==l.length?(i=0,a=Array.from(l).map(function(e){return n.slice(i,i=e<<1)}),r&&(i=0,o=Array.from(l).map(function(e){return r.slice(i,i=e)})),a.map(function(e,t){return Ol(e,o?o[t]:void 0)})):[Ol(n,r)]}}(e,t);return{type:cl[t],coordinates:u}}function El(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(p=_l=_l||{})[p.Byte=0]="Byte",p[p.UByte=1]="UByte",p[p.Bool=2]="Bool",p[p.Short=3]="Short",p[p.UShort=4]="UShort",p[p.Int=5]="Int",p[p.UInt=6]="UInt",p[p.Long=7]="Long",p[p.ULong=8]="ULong",p[p.Float=9]="Float",p[p.Double=10]="Double",p[p.String=11]="String",p[p.Json=12]="Json",p[p.DateTime=13]="DateTime",p[p.Binary=14]="Binary";mf=[{key:"getRootAsColumn",value:function(e,t){return(t||new Ml).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,t){return e.setPosition(e.position()+bl.XU),(t||new Ml).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(e){e.startObject(11)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addType",value:function(e,t){e.addFieldInt8(1,t,_l.Byte)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWidth",value:function(e,t){e.addFieldInt32(4,t,-1)}},{key:"addPrecision",value:function(e,t){e.addFieldInt32(5,t,-1)}},{key:"addScale",value:function(e,t){e.addFieldInt32(6,t,-1)}},{key:"addNullable",value:function(e,t){e.addFieldInt8(7,+t,1)}},{key:"addUnique",value:function(e,t){e.addFieldInt8(8,+t,0)}},{key:"addPrimaryKey",value:function(e,t){e.addFieldInt8(9,+t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"endColumn",value:function(e){var t=e.endObject();return e.requiredField(t,4),t}},{key:"createColumn",value:function(e,t,n,r,o,i,a,s,u,l,c,f){return Ml.startColumn(e),Ml.addName(e,t),Ml.addType(e,n),Ml.addTitle(e,r),Ml.addDescription(e,o),Ml.addWidth(e,i),Ml.addPrecision(e,a),Ml.addScale(e,s),Ml.addNullable(e,u),Ml.addUnique(e,l),Ml.addPrimaryKey(e,c),Ml.addMetadata(e,f),Ml.endColumn(e)}}],El((p=Ml).prototype,[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):_l.Byte}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"width",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"precision",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"scale",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"nullable",value:function(){var e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}},{key:"unique",value:function(){var e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"primaryKey",value:function(){var e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}}]),El(p,mf),Object.defineProperty(p,"prototype",{writable:!1});var kl=Ml;function Ml(){if(!(this instanceof Ml))throw new TypeError("Cannot call a class as a function");this.bb=null,this.bb_pos=0}function jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mf=[{key:"getRootAsFeature",value:function(e,t){return(t||new Al).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,t){return e.setPosition(e.position()+bl.XU),(t||new Al).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(e){e.startObject(3)}},{key:"addGeometry",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addProperties",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createPropertiesVector",value:function(e,t){e.startVector(1,t.length,1);for(var n=t.length-1;0<=n;n--)e.addInt8(t[n]);return e.endVector()}},{key:"startPropertiesVector",value:function(e,t){e.startVector(1,t,1)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;0<=n;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endFeature",value:function(e){return e.endObject()}},{key:"finishFeatureBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedFeatureBuffer",value:function(e,t){e.finish(t,void 0,!0)}},{key:"createFeature",value:function(e,t,n,r){return Al.startFeature(e),Al.addGeometry(e,t),Al.addProperties(e,n),Al.addColumns(e,r),Al.endFeature(e)}}],jl((p=Al).prototype,[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"geometry",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?(e||new xl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"properties",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}},{key:"propertiesLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"propertiesArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"columns",value:function(e,t){var n=this.bb.__offset(this.bb_pos,8);return n?(t||new kl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}}]),jl(p,mf),Object.defineProperty(p,"prototype",{writable:!1});var Cl=Al,Tl=(new TextEncoder,new TextDecoder);function Al(){if(!(this instanceof Al))throw new TypeError("Cannot call a class as a function");this.bb=null,this.bb_pos=0}function Il(e,t){var n=t.columns;return{type:"Feature",geometry:Pl(e.geometry(),t.geometryType),properties:function(e,t){var n={};if(t&&0!==t.length){var r=e.propertiesArray();if(r)for(var o=new DataView(r.buffer,r.byteOffset),i=e.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0),u=(a+=2,t[s]),l=u.name;switch(u.type){case _l.Bool:n[l]=!!o.getUint8(a),a+=1;break;case _l.Byte:n[l]=o.getInt8(a),a+=1;break;case _l.UByte:n[l]=o.getUint8(a),a+=1;break;case _l.Short:n[l]=o.getInt16(a,!0),a+=2;break;case _l.UShort:n[l]=o.getUint16(a,!0),a+=2;break;case _l.Int:n[l]=o.getInt32(a,!0),a+=4;break;case _l.UInt:n[l]=o.getUint32(a,!0),a+=4;break;case _l.Long:n[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case _l.ULong:n[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case _l.Float:n[l]=o.getFloat32(a,!0),a+=4;break;case _l.Double:n[l]=o.getFloat64(a,!0),a+=8;break;case _l.DateTime:case _l.String:var c=o.getUint32(a,!0);a+=4,n[l]=Tl.decode(r.subarray(a,a+c)),a+=c;break;case _l.Json:var c=o.getUint32(a,!0),f=(a+=4,Tl.decode(r.subarray(a,a+c)));n[l]=JSON.parse(f),a+=c;break;default:throw new Error("Unknown type "+u.type)}}}return n}(e,n)}}var Rl=e(43425);function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mf=[{key:"getRootAsCrs",value:function(e,t){return(t||new Dl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,t){return e.setPosition(e.position()+bl.XU),(t||new Dl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(e){e.startObject(6)}},{key:"addOrg",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addCode",value:function(e,t){e.addFieldInt32(1,t,0)}},{key:"addName",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWkt",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"addCodeString",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"endCrs",value:function(e){return e.endObject()}},{key:"createCrs",value:function(e,t,n,r,o,i,a){return Dl.startCrs(e),Dl.addOrg(e,t),Dl.addCode(e,n),Dl.addName(e,r),Dl.addDescription(e,o),Dl.addWkt(e,i),Dl.addCodeString(e,a),Dl.endCrs(e)}}],Ll((p=Dl).prototype,[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"org",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"code",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"wkt",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"codeString",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}}]),Ll(p,mf),Object.defineProperty(p,"prototype",{writable:!1});var Nl=Dl;function Dl(){if(!(this instanceof Dl))throw new TypeError("Cannot call a class as a function");this.bb=null,this.bb_pos=0}function Bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mf=[{key:"getRootAsHeader",value:function(e,t){return(t||new Gl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,t){return e.setPosition(e.position()+bl.XU),(t||new Gl).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(e){e.startObject(14)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addEnvelope",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createEnvelopeVector",value:function(e,t){e.startVector(8,t.length,8);for(var n=t.length-1;0<=n;n--)e.addFloat64(t[n]);return e.endVector()}},{key:"startEnvelopeVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addGeometryType",value:function(e,t){e.addFieldInt8(2,t,cl.Unknown)}},{key:"addHasZ",value:function(e,t){e.addFieldInt8(3,+t,0)}},{key:"addHasM",value:function(e,t){e.addFieldInt8(4,+t,0)}},{key:"addHasT",value:function(e,t){e.addFieldInt8(5,+t,0)}},{key:"addHasTm",value:function(e,t){e.addFieldInt8(6,+t,0)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var n=t.length-1;0<=n;n--)e.addOffset(t[n]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addFeaturesCount",value:function(e,t){e.addFieldInt64(8,t,BigInt("0"))}},{key:"addIndexNodeSize",value:function(e,t){e.addFieldInt16(9,t,16)}},{key:"addCrs",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(11,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(12,t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(13,t,0)}},{key:"endHeader",value:function(e){return e.endObject()}},{key:"finishHeaderBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedHeaderBuffer",value:function(e,t){e.finish(t,void 0,!0)}}],Bl((p=Gl).prototype,[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"envelope",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"envelopeLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"envelopeArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):cl.Unknown}},{key:"hasZ",value:function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasM",value:function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasT",value:function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasTm",value:function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"columns",value:function(e,t){var n=this.bb.__offset(this.bb_pos,18);return n?(t||new kl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"featuresCount",value:function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}},{key:"indexNodeSize",value:function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}},{key:"crs",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?(e||new Nl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}}]),Bl(p,mf),Object.defineProperty(p,"prototype",{writable:!1});var Fl=Gl;function Gl(){if(!(this instanceof Gl))throw new TypeError("Cannot call a class as a function");this.bb=null,this.bb_pos=0}function zl(e){for(var t=Fl.getRootAsHeader(e),e=t.featuresCount(),n=t.indexNodeSize(),r=[],o=0;o<t.columnsLength();o++){var i=t.columns(o);if(!i)throw new Error("Column unexpectedly missing");if(!i.name())throw new Error("Column name unexpectedly missing");r.push({name:i.name(),type:i.type(),title:i.title(),description:i.description(),width:i.width(),precision:i.precision(),scale:i.scale(),nullable:i.nullable(),unique:i.unique(),primary_key:i.primaryKey()})}var a=t.crs(),a=a?{org:a.org(),code:a.code(),name:a.name(),description:a.description(),wkt:a.wkt(),code_string:a.codeString()}:null;return{geometryType:t.geometryType(),columns:r,envelope:null,featuresCount:Number(e),indexNodeSize:n,crs:a,title:t.title(),description:t.description(),metadata:t.metadata()}}var Ul=e(41351);function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Vl((mf=Hl).prototype,[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(e){if(e<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}}]),Object.defineProperty(mf,"prototype",{writable:!1});var Wl,Yl=Hl;function Hl(){if(!(this instanceof Hl))throw new TypeError("Cannot call a class as a function");this._extraRequestThreshold=262144}function Xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Yl.global=new Yl,(p=Wl=Wl||{})[p.Debug=0]="Debug",p[p.Info=1]="Info",p[p.Warn=2]="Warn",p[p.Error=3]="Error";mf=Zl,p=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Wl.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Wl.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Wl.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Wl.Error].concat(t))}},{key:"log",value:function(e){if(!(this.logLevel>e)){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];switch(e){case Wl.Debug:(t=console).debug.apply(t,r);break;case Wl.Info:(t=console).info.apply(t,r);break;case Wl.Warn:(t=console).warn.apply(t,r);break;case Wl.Error:(t=console).error.apply(t,r)}}}}],null&&Xl(mf.prototype,null),Xl(mf,p),Object.defineProperty(mf,"prototype",{writable:!1});var ql,Jl=Zl;function Zl(){if(!(this instanceof Zl))throw new TypeError("Cannot call a class as a function")}function Kl(e){return(Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(){Ql=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==Kl(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tc(a){var o,i;function s(n,e){try{var r=a[n](e),o=r.value,i=o instanceof nc;Promise.resolve(i?o.v:o).then(function(e){if(i){var t="return"===n?"return":"next";if(!o.k||e.done)return s(t,e);e=a[t](e).value}u(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?s(o.key,o.arg):i=null}this._invoke=function(n,r){return new Promise(function(e,t){e={key:n,arg:r,resolve:e,reject:t,next:null};i?i=i.next=e:(o=i=e,s(n,r))})},"function"!=typeof a.return&&(this.return=void 0)}function nc(e,t){this.v=e,this.k=t}Jl.logLevel=Wl.Info,tc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},tc.prototype.next=function(e){return this._invoke("next",e)},tc.prototype.throw=function(e){return this._invoke("throw",e)},tc.prototype.return=function(e){return this._invoke("return",e)};var rc=40;function oc(e,t){t=Math.min(Math.max(+t,2),65535);for(var n=e,r=n;r+=n=Math.ceil(n/t),1!==n;);return r*rc}function ic(){return(ql=ql||(e=Ql().mark(function e(d,s,n,u){var y,g,v,m,b,w,_,x,r;return Ql().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y=function(){function n(e,t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._level=t,this.nodes=e}var e=n;return ec(e.prototype,[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(e){console.assert(e>this.nodes[1]),this.nodes[1]=e}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),Object.defineProperty(e,"prototype",{writable:!1}),n}(),g=n.minX,v=n.minY,m=n.maxX,b=n.maxY,Jl.info("tree items: ".concat(d,", nodeSize: ").concat(s)),w=function(e,t){if(t<2)throw new Error("Node size must be at least 2");if(0===e)throw new Error("Number of items must be greater than 0");for(var n=i=e,r=[i];n+=i=Math.ceil(i/t),r.push(i),1!==i;);for(var o=[],i=n,a=0,s=r;a<s.length;a++){var u=s[a];o.push(i-u),i-=u}o.reverse(),r.reverse();for(var l=[],c=0;c<r.length;c++)l.push([o[c],o[c]+r[c]]);return l.reverse(),l}(d,s),_=w[0][0],t=w.length-1,r=new y([0,1],t),x=[r],Jl.debug("starting stream search with queue: ".concat(x,", numItems: ").concat(d,", nodeSize: ").concat(s,", levelBounds: ").concat(w)),r=Ql().mark(function e(){var l,c,f,r,o,h,p,i,a;return Ql().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=x.shift(),Jl.debug("popped node: ".concat(l,", queueLength: ").concat(x.length)),c=l.startNode(),f=_<=c,t=w[l.level()],n=2,r=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,n)||function(e,t){var n;if(e)return"string"==typeof e?$l(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$l(e,t):void 0}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=r[1],r=Math.min(l.endNode()+s,r),o=r-c,e.next=9,new nc(u(c*rc,o*rc),0);case 9:o=e.sent,h=new Float64Array(o),p=new Uint32Array(o),i=Ql().mark(function e(r){var o,i,a,s,u;return Ql().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m<h[0+(o=5*(r-c))])return e.abrupt("return",0);e.next=3;break;case 3:if(b<h[o+1])return e.abrupt("return",0);e.next=5;break;case 5:if(g>h[o+2])return e.abrupt("return",0);e.next=7;break;case 7:if(v>h[o+3])return e.abrupt("return",0);e.next=9;break;case 9:if(a=p[8+(o<<1)],i=p[9+(o<<1)],i=ac(i,a),f)return t=n=void 0,a=r<d-1?(t=p[8+((n=5*(r-c+1))<<1)],ac(p[9+(n<<1)],t)-i):null,e.next=16,[i,r-_,a];e.next=17;break;case 16:return e.abrupt("return",0);case 17:if(a=Yl.global.extraRequestThreshold()/rc,void 0!==(s=x[x.length-1])&&s.level()==l.level()-1&&i<s.endNode()+a)return Jl.debug('Merging "nodeRange" request into existing range: '.concat(s,", newOffset: ").concat(s.endNode()," -> ").concat(i)),s.extendEndNodeToNewOffset(i),e.abrupt("return",0);e.next=23;break;case 23:n=l.level()-1,u=new y([i,i+1],n),void 0!==s&&s.level()==u.level()?Jl.info("Same level, but too far away. Pushing new request at offset: ".concat(i," rather than merging with distant ").concat(s)):Jl.info("Pushing new level for ".concat(u," onto queue with nearestNodeRange: ").concat(s," since there's not already a range for this level.")),x.push(u);case 26:case"end":return e.stop()}var t,n},e)}),a=c;case 14:if(a<r)return e.delegateYield(i(a),"t0",16);e.next=22;break;case 16:if(0===e.t0)return e.abrupt("continue",19);e.next=19;break;case 19:a++,e.next=14;break;case 22:case"end":return e.stop()}var t,n},e)});case 9:if(0!=x.length)return e.delegateYield(r(),"t0",11);e.next=13;break;case 11:e.next=9;break;case 13:case"end":return e.stop()}var t},e)}),function(){return new tc(e.apply(this,arguments))})).apply(this,arguments);var e}function ac(e,t){if(0!=(4293918720&e))throw Error("integer is too large to be safely represented");return t+e*Math.pow(2,32)}var sc=new Uint8Array([102,103,98,3,102,103,98,0]),uc=4;function lc(e){return(lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||fc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fc(e,t){var n;if(e)return"string"==typeof e?hc(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hc(e,t):void 0}function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pc(){pc=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==lc(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function dc(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function yc(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){dc(r,t,n,o,i,"next",e)}function i(e){dc(r,t,n,o,i,"throw",e)}o(void 0)})}}function gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(e,t,n){t&&vc(e.prototype,t),n&&vc(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function bc(e){return function(){return new wc(e.apply(this,arguments))}}function wc(a){var o,i;function s(n,e){try{var r=a[n](e),o=r.value,i=o instanceof xc;Promise.resolve(i?o.v:o).then(function(e){if(i){var t="return"===n?"return":"next";if(!o.k||e.done)return s(t,e);e=a[t](e).value}u(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?s(o.key,o.arg):i=null}this._invoke=function(n,r){return new Promise(function(e,t){e={key:n,arg:r,resolve:e,reject:t,next:null};i?i=i.next=e:(o=i=e,s(n,r))})},"function"!=typeof a.return&&(this.return=void 0)}function _c(e){return new xc(e,0)}function xc(e,t){this.v=e,this.k=t}function Sc(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Oc(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Oc(e){function n(e){var t;return Object(e)!==e?Promise.reject(new TypeError(e+" is not an object.")):(t=e.done,Promise.resolve(e.value).then(function(e){return{value:e,done:t}}))}return(Oc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new Oc(e)}wc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},wc.prototype.next=function(e){return this._invoke("next",e)},wc.prototype.throw=function(e){return this._invoke("throw",e)},wc.prototype.return=function(e){return this._invoke("return",e)};mc(Dc,[{key:"selectBbox",value:function(d){var y=this;return bc(pc().mark(function e(){var n,r,o,t,i,a,s,u,l,c,f,h,p;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=y.lengthBeforeTree(),o=y.headerClient,l=function(e,t){return(n=n||yc(pc().mark(function e(t,n){return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.getRange(r+t,n,0,"index"));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)},t=[],s=a=!(i=[]),e.prev=7,l=Sc(ic(y.header.featuresCount,y.header.indexNodeSize,d,l));case 9:return e.next=11,_c(l.next());case 11:if(a=!(h=e.sent).done){if(h=h.value,c=cc(h,2),c=c[0],h=cc(h,3),(f=h[2])||(Jl.info("final feature"),h=Yl.global.extraRequestThreshold(),f=h),0==i.length)return i.push([c,f]),e.abrupt("continue",23);e.next=19}else e.next=26;break;case 19:h=i[i.length-1],(p=c-(h[0]+h[1]))>Yl.global.extraRequestThreshold()&&(Jl.info("Pushing new feature batch, since gap ".concat(p," was too large")),t.push(i),i=[]),i.push([c,f]);case 23:a=!1,e.next=9;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(7),s=!0,u=e.t0;case 32:if(e.prev=32,e.prev=33,a&&null!=l.return)return e.next=37,_c(l.return());e.next=37;break;case 37:if(e.prev=37,s)throw u;e.next=40;break;case 40:return e.finish(37);case 41:return e.finish(32);case 42:return y.headerClient.logUsage("header+index"),0<i.length&&t.push(i),p=t.flatMap(function(e){return y.readFeatureBatch(e)}),e.delegateYield(function(r){var e={},o=!1;function t(t,n){return{done:!(o=!0),value:new xc(n=new Promise(function(e){e(r[t](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(e){return o?(o=!1,e):t("next",e)},"function"==typeof r.throw&&(e.throw=function(e){if(o)throw o=!1,e;return t("throw",e)}),"function"==typeof r.return&&(e.return=function(e){return o?(o=!1,e):t("return",e)}),e}(Sc(Ul.ZN.merge(p))),"t1",46);case 46:case"end":return e.stop()}},e,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return sc.length+uc+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new Ic(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(i){var a=this;return bc(pc().mark(function e(){var t,n,r,o;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=cc(i[0],1),r=r[0],n=cc(i[i.length-1],2),t=n[0],n=n[1],t=t+n-r,n=a.buildFeatureClient(),r=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=fc(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(i),e.prev=7,r.s();case 9:if((o=r.n()).done){e.next=17;break}return o=cc(o.value,1),o=o[0],e.next=13,_c(a.readFeature(n,o,t));case 13:return e.next=15,e.sent;case 15:e.next=9;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:n.logUsage("feature");case 26:case"end":return e.stop()}},e,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(e,t,n){return(Cc=Cc||yc(pc().mark(function e(t,n,r){var o,i,a,s;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n+this.lengthBeforeFeatures(),e.next=3,t.getRange(o,4,r,"feature length");case 3:return i=e.sent,i=new DataView(i).getUint32(0,!0),e.next=7,t.getRange(o+4,i,r,"feature data");case 7:return s=e.sent,s=new Uint8Array(s),(a=new Uint8Array(i+uc)).set(s,uc),(s=new bl.cZ(a)).setPosition(uc),e.abrupt("return",Cl.getRootAsFeature(s));case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}],[{key:"open",value:function(e){return(Tc=Tc||yc(pc().mark(function e(t){var n,r,o,i,a,s;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Ic(t),o=function(){for(var e=0,t=0;t<3;t++)e+=Math.pow(16,t)*rc;return e}(),r=2024+o,Jl.debug("fetching header. minReqLength: ".concat(r," (assumedHeaderLength: ").concat(2024,", assumedIndexLength: ").concat(o,")")),e.t0=Uint8Array,e.next=8,n.getRange(0,8,r,"header");case 8:if(e.t1=e.sent,(o=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return sc[t]===e})){e.next=13;break}throw Jl.error("bytes: ".concat(o," != ").concat(sc)),new Error("Not a FlatGeobuf file");case 13:return Jl.debug("magic bytes look good"),e.next=16,n.getRange(8,4,r,"header");case 16:if(i=e.sent,10485760<(i=new DataView(i).getUint32(0,!0))||i<8)throw new Error("Invalid header size");e.next=21;break;case 21:return Jl.debug("headerLength: ".concat(i)),e.next=24,n.getRange(12,i,r,"header");case 24:return a=e.sent,a=new bl.cZ(new Uint8Array(a)),a=zl(a),s=oc(a.featuresCount,a.indexNodeSize),Jl.debug("completed: opening http reader"),e.abrupt("return",new Dc(n,a,i,s));case 30:case"end":return e.stop()}},e)}))).apply(this,arguments)}}]);var Pc,Ec,kc,Mc,jc,Cc,Tc,Ac=Dc,Ic=(mc(Nc,[{key:"getRange",value:function(e,t,n,r){return(jc=jc||yc(pc().mark(function e(t,n,r,o){var i,a;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bytesEverUsed+=n,a=t-this.head,i=a+n,0<=a&&i<=this.buffer.byteLength)return e.abrupt("return",this.buffer.slice(a,i));e.next=5;break;case 5:return a=Math.max(n,r),this.bytesEverFetched+=a,Jl.debug("requesting for new Range: ".concat(t,"-").concat(t+n-1)),e.next=10,this.httpClient.getRange(t,a,o);case 10:return this.buffer=e.sent,this.head=t,e.abrupt("return",this.buffer.slice(0,n));case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"logUsage",value:function(e){var e=e.split(" ")[0],t=this.bytesEverUsed,n=this.bytesEverFetched,r=(100*t/n).toFixed(2);Jl.info("".concat(e," bytes used/requested: ").concat(t," / ").concat(n," = ").concat(r,"%"))}}]),Nc),Rc=(mc(Lc,[{key:"getRange",value:function(e,t,n){return(Mc=Mc||yc(pc().mark(function e(t,n,r){var o;return pc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,o="bytes=".concat(t,"-").concat(t+n-1),Jl.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(r,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),e.next=6,fetch(this.url,{headers:{Range:o}});case 6:return o=e.sent,e.abrupt("return",o.arrayBuffer());case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}]),Lc);function Lc(e){gc(this,Lc),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}function Nc(e){gc(this,Nc),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new Rc(e):e}function Dc(e,t,n,r){gc(this,Dc),this.headerClient=e,this.header=t,this.headerLength=n,this.indexLength=r}function Bc(e){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fc(){Fc=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==Bc(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function Gc(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function zc(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){Gc(r,t,n,o,i,"next",e)}function i(e){Gc(r,t,n,o,i,"throw",e)}o(void 0)})}}function Uc(e){function n(e){var t;return Object(e)!==e?Promise.reject(new TypeError(e+" is not an object.")):(t=e.done,Promise.resolve(e.value).then(function(e){return{value:e,done:t}}))}return(Uc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new Uc(e)}function Vc(e){return new Hc(e,0)}function Wc(e){return function(){return new Yc(e.apply(this,arguments))}}function Yc(a){var o,i;function s(n,e){try{var r=a[n](e),o=r.value,i=o instanceof Hc;Promise.resolve(i?o.v:o).then(function(e){if(i){var t="return"===n?"return":"next";if(!o.k||e.done)return s(t,e);e=a[t](e).value}u(r.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?s(o.key,o.arg):i=null}this._invoke=function(n,r){return new Promise(function(e,t){e={key:n,arg:r,resolve:e,reject:t,next:null};i?i=i.next=e:(o=i=e,s(n,r))})},"function"!=typeof a.return&&(this.return=void 0)}function Hc(e,t){this.v=e,this.k=t}function Xc(e,t){return function(){return(Pc=Pc||Wc(Fc().mark(function e(t,n,r){var o,i,a,s,u,l,c,f;return Fc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rl(t),a=function(e){return(o=o||zc(Fc().mark(function e(t){return Fc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.slice(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)},e.t0=Uint8Array,e.next=5,Vc(a(8,"magic bytes"));case 5:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return sc[t]===e})){e.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return e.t2=Uint8Array,e.next=12,Vc(a(4,"header length"));case 12:return e.t3=e.sent,s=new e.t2(e.t3),u=new bl.cZ(s),c=u.readUint32(0),e.t4=Uint8Array,e.next=19,Vc(a(c,"header data"));case 19:if(e.t5=e.sent,s=new e.t4(e.t5),u=new bl.cZ(s),l=zl(u),r&&r(l),c=l.indexNodeSize,f=l.featuresCount,0<c)return f=oc(f,c),e.next=29,Vc(a(f,"entire index, w/o rect"));e.next=29;break;case 29:return e.next=31,Vc(function(){return(kc=kc||zc(Fc().mark(function e(t,n,r){var o,i,a,s;return Fc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t(4,"feature length");case 3:if(e.t1=e.sent,0===(o=new e.t0(e.t1)).byteLength)return e.abrupt("return");e.next=7;break;case 7:return i=new bl.cZ(o),a=i.readUint32(0),e.t2=Uint8Array,e.next=12,t(a,"feature data");case 12:return e.t3=e.sent,o=new e.t2(e.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new bl.cZ(s)).setPosition(uc),s=Cl.getRootAsFeature(i),e.abrupt("return",r(s,n));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}(a,l,n));case 31:if(f=e.sent)return e.next=34,f;e.next=36;break;case 34:e.next=29;break;case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}(e,Il,t)}function qc(e,t,n){return function(){return(Ec=Ec||Wc(Fc().mark(function e(t,n,r,o){var i,a,s,u,l,c;return Fc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc(Ac.open(t));case 2:i=e.sent,Jl.debug("opened reader"),o&&o(i.header),s=a=!1,e.prev=7,l=function(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Uc(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(i.selectBbox(n));case 9:return e.next=11,Vc(l.next());case 11:if(a=!(c=e.sent).done)return c=c.value,e.next=15,r(c,i.header);e.next=18;break;case 15:a=!1,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,u=e.t0;case 24:if(e.prev=24,e.prev=25,a&&null!=l.return)return e.next=29,Vc(l.return());e.next=29;break;case 29:if(e.prev=29,s)throw u;e.next=32;break;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}(e,t,Il,n)}function Jc(e,t,n){return e instanceof Uint8Array?{type:"FeatureCollection",features:function(e,t,n){if(!e.subarray(0,3).every(function(e,t){return sc[t]===e}))throw new Error("Not a FlatGeobuf file");var r=new bl.cZ(e),e=r.readUint32(sc.length),o=(r.setPosition(sc.length+uc),zl(r)),i=(n&&n(o),sc.length+uc+e),n=o.indexNodeSize,e=o.featuresCount;0<n&&(i+=oc(e,n));for(var a=[];i<r.capacity();){var s=r.readUint32(i),u=(r.setPosition(i+uc),Cl.getRootAsFeature(r));a.push(t(u,o)),i+=uc+s}return a}(e,Il,n)}:e instanceof ReadableStream?Xc(e,n):qc(e,t,n)}Yc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Yc.prototype.next=function(e){return this._invoke("next",e)},Yc.prototype.throw=function(e){return this._invoke("throw",e)},Yc.prototype.return=function(e){return this._invoke("return",e)};var p=e(43861),Zc=e.n(p);function Kc(e){return(Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qc(){Qc=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==Kc(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function $c(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ef(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){$c(r,t,n,o,i,"next",e)}function i(e){$c(r,t,n,o,i,"throw",e)}o(void 0)})}}function tf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nf(e){function n(e){var t;return Object(e)!==e?Promise.reject(new TypeError(e+" is not an object.")):(t=e.done,Promise.resolve(e.value).then(function(e){return{value:e,done:t}}))}return(nf=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new nf(e)}var rf,of,af,sf={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},uf=(tf((mf=lf).prototype,[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(Zc()))}},{key:"iterateFeatures",value:function(e){return(rf=rf||ef(Qc().mark(function e(t){var n,r,o,i,a,s;return Qc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=r=!(n={type:"FeatureCollection",features:[]}),e.prev=3,a=function(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new nf(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(t);case 5:return e.next=7,a.next();case 7:if(!(r=!(s=e.sent).done)){e.next=15;break}s=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(s=this.options.featureLoader(s)),this.layerType||(this.layerType=sf[s.geometry.type]),n.features.push(s);case 12:r=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),o=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,r&&null!=a.return)return e.next=26,a.return();e.next=26;break;case 26:if(e.prev=26,o)throw i;e.next=29;break;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}},e,this,[[3,17,21,31],[22,,26,30]])}))).apply(this,arguments)}},{key:"_loadData",value:function(e){return(of=of||ef(Qc().mark(function e(t){var n,r,o=this;return Qc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},t.length){e.next=7;break}return e.next=4,this._getStream(this.url);case 4:n=e.sent,e.next=9;break;case 7:r.value={extent:t.slice()},this.loadedExtentsRtree_.insert(r);case 9:return e.next=11,Jc(n&&n.body||this.url,r,function(e){o.layerType=sf[e.geometryType]});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"_getStream",value:function(e){return(af=af||ef(Qc().mark(function e(t){return Qc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get(t,{},{withoutFormatSuffix:!0}).then(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}},{key:"_containsExtent",value:function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}},{key:"_getInExtent",value:function(e){e={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.loadedExtentsRtree_.search(e).map(function(e){return e.value})}},{key:"_forEachInExtent",value:function(e,t){return this._forEach(this._getInExtent(e),t)}},{key:"_forEach",value:function(e,t){for(var n,r=0,o=e.length;r<o;r++)if(n=t(e[r]))return n;return n}}]),Object.defineProperty(mf,"prototype",{writable:!1}),lf);function lf(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!(t instanceof lf))throw new TypeError("Cannot call a class as a function");this.id=e.layerID||L.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.init()}function cf(e){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ff(){ff=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==cf(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function hf(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function pf(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){hf(r,t,n,o,i,"next",e)}function i(e){hf(r,t,n,o,i,"throw",e)}o(void 0)})}}function df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var yf,gf,vf={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},mf=(df((p=bf).prototype,[{key:"onAdd",value:function(e){this.map=e;var t,n,r,e=[];"bbox"===this.strategy&&(e=[(n=this.map.getBounds().toArray())[0][0],n[0][1],n[1][0],n[1][1]],this.map.on("moveend",this._updateFeaturesFn)),this.extent&&(n=this.extent,t=[],r=e,n[0]<=r[2]&&n[2]>=r[0]&&n[1]<=r[3]&&n[3]>=r[1]&&(n[0]>r[0]?t[0]=n[0]:t[0]=r[0],n[1]>r[1]?t[1]=n[1]:t[1]=r[1],n[2]<r[2]?t[2]=n[2]:t[2]=r[2],n[3]<r[3]?t[3]=n[3]:t[3]=r[3]),e=(r=t)&&r.length?r:this.extent),this.renderer=new uf(this.options),this._handleFeatures(e)}},{key:"onRemove",value:function(){this.map.off("moveend",this._updateFeaturesFn)}},{key:"moveLayer",value:function(e){this.map.moveLayer(this.layerId,e)}},{key:"render",value:function(){}},{key:"setVisibility",value:function(e){this.map.setLayoutProperty(this.layerId,"visibility",e?"visible":"none")}},{key:"_handleFeatures",value:function(e){return(yf=yf||pf(ff().mark(function e(t){var n,r;return ff().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderer._loadData(t);case 2:return n=e.sent,e.next=5,this.renderer.iterateFeatures(n);case 5:n=e.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,r=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(vf[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(r));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"_updateFeatures",value:function(){return(gf=gf||pf(ff().mark(function e(){var t,n,r,o=this;return ff().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.map.getBounds().toArray(),t=[n[0][0],n[0][1],n[1][0],n[1][1]],this.renderer._forEachInExtent(t,function(e){return o.renderer._containsExtent(e.extent,t)})){e.next=11;break}return e.next=6,this.renderer._loadData(t);case 6:return n=e.sent,e.next=9,this.renderer.iterateFeatures(n);case 9:r=e.sent,this.map.getSource(this.sourceId).setData(r);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}]),Object.defineProperty(p,"prototype",{writable:!1}),bf);function bf(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!(t instanceof bf))throw new TypeError("Cannot call a class as a function");this.id=e.layerID||L.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.overlay=!0,this.type="custom",this.renderingMode="3d",this._updateFeaturesFn=this._updateFeatures.bind(this)}function wf(e){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){return(_f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sf(e){return(Sf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){var e=i,t=l().Evented;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_f(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Sf(n),t=(e=r?(e=Sf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===wf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xf(t)};function i(e,t){var n;if(this instanceof i)return(n=o.call(this)).options=t||{},n.url=e,n.fire("initialized",xf(n)),n;throw new TypeError("Cannot call a class as a function")}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}();function Of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}p=Ef,oh=[{key:"generateToken",value:function(e,t){e=this.servers[e];if(e)return y.post(e.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},L.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}}},{key:"registerToken",value:function(e,t){this.tokens=this.tokens||{},e&&t&&(e=this._getTokenStorageKey(e),this.tokens[e]=t)}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=L.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e)return this.tokens=this.tokens||{},e=this._getTokenStorageKey(e),this.tokens[e]}},{key:"getKey",value:function(e){this.keys=this.keys||{};e=this._getUrlRestString(e)||e;return this.keys[e]}},{key:"loginiServer",value:function(e,t,n,r){e=L.urlPathAppend(e,"services/security/login");t={username:t&&t.toString(),password:n&&n.toString(),rememberme:r},t=JSON.stringify(t);return y.post(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){return e=L.urlPathAppend(e,"services/security/logout"),y.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,t){this._open(Ef.SSO+"/login?service="+e,t)}},{key:"loginiPortal",value:function(e,t,n){e=L.urlPathAppend(e,"web/login");t={username:t&&t.toString(),password:n&&n.toString()},t=JSON.stringify(t);return y.post(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){return e=L.urlPathAppend(e,"services/security/logout"),y.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,n){var r;if(L.isInTheSameDomain(e))return o=L.urlPathAppend(e,"icloud/security/tokens"),t={username:(t=t||{}).userName&&t.userName.toString(),password:t.password&&t.password.toString()},t=JSON.stringify(t),r=this,y.post(o,t,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return r.imanagerToken=e})});var o=!n||n.isNewTab;this._open(e,o)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){e&&(e=this._getTokenStorageKey(e),this.tokens=this.tokens||{},this.tokens[e])&&delete this.tokens[e]}},{key:"destroyKey",value:function(e){e&&(this.keys=this.keys||{},e=this._getUrlRestString(e)||e,this.keys[e])&&delete this.keys[e]}},{key:"appendCredential",value:function(e){var t=e,n=this.getToken(e),r=n?new Xr(n,"token"):null;return t=(r=r||((n=this.getKey(e))?new Xr(n,"key"):null))?L.urlAppend(t,r.getUrlParameters()):t}},{key:"_open",value:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,r="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",r)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){var t;return e&&((t=e.match(/(http|https):\/\/(.*\/rest)/i))?t[0]:e)}}],null&&Of(p.prototype,null),Of(p,oh),Object.defineProperty(p,"prototype",{writable:!1});var Pf=Ef;function Ef(){if(!(this instanceof Ef))throw new TypeError("Cannot call a class as a function")}function kf(e){return(kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Pf.INNER_WINDOW_WIDTH=600,Pf.INNER_WINDOW_HEIGHT=600,Pf.SSO="https://sso.supermap.com",Pf.ONLINE="https://www.supermapol.com";Mf((oh=jf).prototype,[{key:"destroy",value:function(){var e=this;L.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=e.scope.format;if(t&&!this.supportDataFormat(t))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(t," format!"));var t=this,n=(e.url=e.url||t.url,this._returnContent(e)&&!e.url.includes("returnContent=true")&&(e.url=L.urlAppend(e.url,"returnContent=true")),e.proxy=e.proxy||t.proxy,e.withCredentials=(null!=e.withCredentials?e:t).withCredentials,e.crossOrigin=(null!=e.crossOrigin?e:t).crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=Pf.appendCredential(e.url),t.calculatePollingTimes(),e.scope=t,e.scope?e.success.bind(e.scope):e.success),r=e.scope?e.failure.bind(e.scope):e.failure;e.success=t.getUrlCompleted(n,e),e.failure=t.getUrlFailed(r,e),t._commit(e)}},{key:"getUrlCompleted",value:function(t,n){return function(e){t&&t(e,n)}}},{key:"getUrlFailed",value:function(t,n){var r=this;return function(e){0<r.totalTimes?(r.totalTimes--,r.ajaxPolling(n)):t&&t(e,n)}}},{key:"ajaxPolling",value:function(e){var t=e.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;this.index=parseInt(Math.random()*this.length),this.url=this.urls[this.index],t=t.replace(n,n.exec(this.url)[0]),e.url=t,e.isInTheSameDomain=L.isInTheSameDomain(t),this._commit(e)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e,t){e=L.transformResult(e),this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"serviceProcessFailed",value:function(e,t){e=(e=L.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:e,options:t})}},{key:"_returnContent",value:function(e){return e.scope.format!==a.FGB&&!!e.scope.returnContent}},{key:"supportDataFormat",value:function(e){return this.dataFormat().includes(e)}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER]}},{key:"_commit",value:function(n){if("POST"===n.method||"PUT"===n.method||"PATCH"===n.method)if(n.params&&(n.url=L.urlAppend(n.url,L.getParameterString(n.params||{}))),"object"===kf(n.data))try{n.params=L.toJSON(n.data)}catch(n){console.log("json")}else n.params=n.data;y.commit(n.method,n.url,n.params,{headers:n.headers,withoutFormatSuffix:n.withoutFormatSuffix,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,timeout:n.async?0:null,proxy:n.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(e){var t=e;return(t=!(t="string"==typeof e?(new ct).read(e):t)||t.error||300<=t.code&&304!==t.code?t&&t.error?{error:t.error}:{error:t}:t)&&n.scope.format===a.FGB&&(t.newResourceLocation=t.newResourceLocation.replace(".json","")+".fgb"),t}).catch(function(e){return{error:e}}).then(function(e){(e.error?n.scope?Z.bind(n.failure,n.scope):n.failure:(e.succeed=null==e.succeed||e.succeed,n.scope?Z.bind(n.success,n.scope):n.success))(e)})}}]),Object.defineProperty(oh,"prototype",{writable:!1});var m=jf;function jf(e,t){if(!(this instanceof jf))throw new TypeError("Cannot call a class as a function");var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,L.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),L.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),this.crossOrigin=(t=t||{}).crossOrigin,this.headers=t.headers,L.extend(this,t),n.isInTheSameDomain=L.isInTheSameDomain(n.url),n.events=new Qr(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}function Cf(e){return(Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tf(){Tf=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==Cf(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function Af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function If(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lf(){return(Lf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Df(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Nf(e,t){return(Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Df(e){return(Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bf=function(){var t,e=a,n=m;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Nf(e,n);r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=Df(r),t=(e=o?(e=Df(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Cf(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t){if(this instanceof a)return(e=i.call(this,e,t)).options=t||{},e.eventCount=0,e.CLASS_NAME="SuperMap.KnowledgeGraphService",e;throw new TypeError("Cannot call a class as a function")}return Rf((e=a).prototype,[{key:"destroy",value:function(){Lf(Df(a.prototype),"destroy",this).call(this)}},{key:"query",value:function(e,t){e=L.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(e)));this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMaps",value:function(e){var t=this.url+"/graphmaps.json";this.processAsync({url:t,method:"GET",callback:e})}},{key:"getGraphMap",value:function(e,t){e=this.url+"/graphmaps/".concat(e,".json");this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMapData",value:function(e){return(t=t||(s=Tf().mark(function e(n){var r,o,i,a,s;return Tf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,this._getGraphMapData(n);case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return");case 6:a=o.dataContent.queries&&o.dataContent.queries.query||[],i=[],i="string"==typeof a?[a]:a,(a=this._getGraphMapExpandQuery(o)).length&&i.push.apply(i,function(e){if(Array.isArray(e))return Af(e)}(t=a)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){var t;if(e)return"string"==typeof e?Af(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Af(e,void 0):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=0;case 12:if(a<i.length)return s=i[a],e.next=16,this._queryDataBySql(s);e.next=21;break;case 16:s=e.sent,r=r.concat([],s);case 18:a++,e.next=12;break;case 21:return e.abrupt("return",{data:r,graphMap:o});case 22:case"end":return e.stop()}var t},e,this)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){If(r,t,n,o,i,"next",e)}function i(e){If(r,t,n,o,i,"throw",e)}o(void 0)})})).apply(this,arguments);var s}},{key:"_getGraphMapExpandQuery",value:function(e){var t=[];return(e.dataContent.expand&&JSON.parse(e.dataContent.expand)||[]).forEach(function(e){t.push("match p=(n)-[]-(m) where id(n)=".concat(e," return p;"))}),t}},{key:"processAsync",value:function(e){var t=e.url,n=e.params,r=e.method,o=e.callback,i=++this.eventCount,a={scope:this,processCompleted:function(e){if(i===e.result.eventId&&o)return delete e.result.eventId,o(e),this.events&&this.events.un(a),!1},processFailed:function(e){if((i===e.error.eventId||i===e.eventId)&&o)return delete e.eventId,o(e),this.events&&this.events.un(a),!1}},e=(this.events.on(a),{method:r,url:t,scope:this,success:function(e,t){e.eventId=i,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.eventId=i,this.serviceProcessFailed(e,t)}});n&&(e.params=n),this.request(e)}},{key:"_getGraphMapData",value:function(e){var r=this;return new Promise(function(t,n){r.getGraphMap(e,function(e){"processFailed"===e.type?n(e.error):""===e.result.data?n(""):t(e.result.graphMap)})})}},{key:"_queryDataBySql",value:function(e){var r=this;return new Promise(function(t,n){r.query(e,function(e){"processFailed"===e.type?n(e.error):t(e.result)})})}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ff(e){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gf(){Gf=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==Ff(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function zf(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vf(e,t){return(Vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yf=function(){var t,e=a,n=g;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&Vf(e,n);r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=Wf(r),t=(e=o?(e=Wf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Ff(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t){var n;if(this instanceof a)return(n=i.call(this,e,t))._knowledgeGraphService=new Bf(e,t),n;throw new TypeError("Cannot call a class as a function")}return Uf((e=a).prototype,[{key:"query",value:function(e,t){this._knowledgeGraphService.query(e,t)}},{key:"getGraphMaps",value:function(e){this._knowledgeGraphService.getGraphMaps(e)}},{key:"getGraphMap",value:function(e,t){this._knowledgeGraphService.getGraphMap(e,t)}},{key:"getGraphMapData",value:function(e){return(t=t||(s=Gf().mark(function e(t){var n;return Gf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._knowledgeGraphService.getGraphMapData(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){zf(r,t,n,o,i,"next",e)}function i(e){zf(r,t,n,o,i,"throw",e)}o(void 0)})})).apply(this,arguments);var s}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}(),p=e(29819),Hf=e.n(p);function Xf(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function qf(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Xf(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Xf(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function Jf(e){return function(e){if(Array.isArray(e))return Zf(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?Zf(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Zf(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kf(e,t){var s=t&&t.styles&&t.styles.style,u=t&&t.captionFields&&t.captionFields.captionField,l={nodes:[],edges:[]};return e.forEach(function(e){var t,n,r,o,i,a=e.path;a?(r=s,o=u,i={nodes:[],edges:[]},a.forEach(function(e){var t;$f(e)?(t=th(e,r),i.edges.push(t)):(t=eh(e,r,o),i.nodes.push(t))}),t=(a=i).edges,(n=l.nodes).push.apply(n,Jf(a.nodes)),(n=l.edges).push.apply(n,Jf(t))):$f(e)?(a=th(e,s),l.edges.push(a)):(n=eh(e,s,u),l.nodes.push(n))}),{nodes:Qf(l.nodes),edges:Qf(l.edges,"edgeId")}}function Qf(e,t){t=1<arguments.length&&void 0!==t?t:"id";return Hf()(e,t)}function $f(e){return e.hasOwnProperty("start")&&e.hasOwnProperty("end")}function eh(f,e,t){var n=f.id,r=f.properties,o=f.lables,e=e?function(e){if(e)for(var t=f.id,n=f.labels,r=e.filter(function(e){return"entity"===e.type}),o=0;o<r.length;o++){var i=r[o],a=i.color,s=i.textColor,u=i.font,l=i.size,c=i.entityTypes,i=i.entityIds,i=JSON.parse(i||"[]"),c=JSON.parse(c||"[]");if(i.includes(t)||c.includes(n[0]))return qf(qf({fillColor:a,fontSize:u.fontSize,fill:s,size:l},rh(u.fontName)),nh(u.fontStyle))}return{}}(e):{},t=function(e){var t=f.id,n=f.labels,r=f.properties;if(e)for(var o=e instanceof Array?e:[e],i=0;i<o.length;i++){var a=o[i],s=a.name,u=a.entityTypes,a=a.entityIds,a=JSON.parse(a||"[]"),u=JSON.parse(u||"[]"),l=n&&n.join("&");if(a.includes(t)||u.includes(l))return r[s]||""}return r[r._labelfieldname]||""}(t),i=e.fillColor||"",n={id:n+"",label:t,properties:r,lables:o};return e.size&&(n.size=e.size,delete e.size),e.fillColor&&(n.style={fill:i,stroke:i},delete e.fillColor),0!==Object.keys(e).length&&(n.labelCfg={style:e}),n}function th(f,e){var t=f.start,n=f.end,r=f.id,o=f.type,i=f.properties,e=e?function(e){if(e)for(var t=f.id,n=f.type,r=e.filter(function(e){return"relationShip"===e.type}),o=0;o<r.length;o++){var i=r[o],a=i.color,s=i.width,u=i.textColor,l=i.font,c=i.relationTypes,i=i.relationIds,i=JSON.parse(i||"[]"),c=JSON.parse(c||"[]");if(i.includes(t)||c.includes(n))return qf(qf({stroke:a,lineWidth:1.4*Number(s),fontSize:l.fontSize,fill:u},rh(l.fontName)),nh(l.fontStyle))}return{}}(e):{},t={source:t+"",target:n+"",edgeId:r+"",label:o,style:{},labelCfg:{},properties:i};return e.stroke&&(t.style.stroke=e.stroke,t.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:e.stroke},delete e.stroke),e.lineWidth&&(t.style.lineWidth=e.lineWidth,delete e.lineWidth),t.labelCfg={style:e},t}function nh(e){return 1===e||"bold"===e?{fontWeight:"bold"}:2===e||"italic"===e?{fontStyle:"italic"}:"bolditalic"===e?{fontWeight:"bold",fontStyle:"italic"}:{}}function rh(e){return e?qf({fontFamily:(e=e.split("."))[0]},nh(e[1])):{}}var oh=e(27996),ih=e.n(oh),p=e(28813),ah=e.n(p);function sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uh(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function lh(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?uh(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):uh(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ch((oh=hh).prototype,[{key:"importG6",value:function(){ih()||console.log("please import g6, eghttps://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(e){var t=new(ih().Graph)(e);return this.graph=t,e&&!1===e.highlightNode||this.highlightNode(t),e&&!1===e.highlightEdge||this.highlightEdge(t),!1===e.dragCanvas&&!1===e.dragNode||this.stopDefaultEventPropagation(),t}},{key:"_getContextMenu",value:function(){var n=this;return new(ih().Menu)({shouldBegin:function(e){return!!(e.target&&e.target.isCanvas&&e.target.isCanvas())||!!e.item},getContent:function(e){var t=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&t)return e=t.getType(),t=t.getModel(),e&&t&&"node"===e?n.isCollpased(t.id)?"<ul>\n              <li id='expand'></li>\n            </ul>":"<ul>\n              <li id='collapse'></li>\n            </ul>":void 0},handleMenuClick:function(e,t){switch(e.id.split("-")[0]){case"hide":n.hideItem(t);break;case"expand":n.expandNode(t);break;case"collapse":n.collapseNode(t);break;case"show":n.showItem(t)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(e){var t=this,n={speed:120,maxIteration:83,tick:function(){t.refreshPositions()}},r={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(ih().ToolBar),s],l={lineWidth:3,stroke:"#b4d6ff"},c={stroke:"#b4d6ff",shadowColor:"#b4d6ff",shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#b4d6ff"}};if(!e)return this._setToolBarStyle(),function(e){var e=0<arguments.length&&void 0!==e?e:"knowledgeGraph",t=document.querySelector("#".concat(e));return{container:e,width:t.scrollWidth,height:t.scrollHeight,plugins:u,modes:a,layout:lh(lh({},r),n),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:l},edgeStateStyles:{hover:c}}}();e.container=e.container||"knowledgeGraph";var f,h="string"==typeof e.container?document.querySelector("#".concat(e.container)):e.container;return e.width=e.width||h.scrollWidth,e.height=e.height||h.scrollHeight,e.layout=lh(lh(lh({},r),e.layout||{}),!1!==e.animate?n:{}),e.defaultNode=lh(lh({},o),e.defaultNode||{}),e.defaultEdge=lh(lh({},i),e.defaultEdge||{}),e.modes={default:[!1!==e.dragCanvas&&"drag-canvas",!1!==e.zoomCanvas&&"zoom-canvas",!1!==e.dragNode&&"drag-node"]},e.nodeStateStyles={hover:lh(lh({},l),e.nodeHighlightStyle||{})},!(e.edgeStateStyles={hover:lh(lh({},c),e.edgeHighlightStyle||{})})!==e.showToolBar&&(e.plugins=[new(ih().ToolBar)],this._setToolBarStyle()),!1!==e.showContextMenu&&(e.plugins=[].concat(function(e){if(Array.isArray(e))return sh(e)}(f=e.plugins||[])||function(){if("undefined"!=typeof Symbol&&null!=f[Symbol.iterator]||null!=f["@@iterator"])return Array.from(f)}()||function(e){var t;if(e)return"string"==typeof e?sh(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sh(e,void 0):void 0}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[s]),this._setToolBarStyle()),e}},{key:"changeSize",value:function(e,t){return this.graph.changeSize(e,t)}},{key:"autoResize",value:function(){var n=this,r=this.getContainer();window.addEventListener("resize",function(){var e=r.scrollWidth,t=r.scrollHeight;n.graph.changeSize(e,t),n.graph.refresh()})}},{key:"zoom",value:function(e,t,n,r){this.graph.zoom(e,t,n,r)}},{key:"zoomTo",value:function(e,t,n,r){this.graph.zoomTo(e,t,n,r)}},{key:"fitView",value:function(e,t,n,r){this.graph.fitView(e,t,n,r)}},{key:"fitCenter",value:function(e,t){this.graph.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graph.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graph.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(e){var t=this.graph.getWidth()/2,n=this.graph.getHeight()/2,e=this.graph.getCanvasByPoint(e.x,e.y);this.graph.translate(t-e.x,n-e.y)}},{key:"_setToolBarStyle",value:function(){ah()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:mouseenter",function(e){e=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(e,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("edge:mouseenter",function(e){e=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(e,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),t.getEdges().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?t.changeData(e):t.data(e),this.data=e}},{key:"render",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=e,t.changeData(e)}},{key:"refresh",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(e,t)}},{key:"findById",value:function(e){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph).findById(e)}},{key:"find",value:function(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).find(e,t)}},{key:"findAll",value:function(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return e.getEdges()}},{key:"getInEdges",value:function(e){return e.getInEdges()}},{key:"getOutEdges",value:function(e){return e.getOutEdges()}},{key:"getSourceByEdge",value:function(e){return e.getSource()}},{key:"getTargetByEdge",value:function(e){return e.getTarget()}},{key:"expandNode",value:function(e){e=e.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(e){var t=e.getModel().id,n=[];this._collapseFunc(e,n),this.collpasedData[t]=n,this._expandCollapseNode(n)}},{key:"isCollpased",value:function(e){return!!this.collpasedData[e]}},{key:"_collapseFunc",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=this.getNeighbors(e,"target"),r=this.getNeighbors(e,"source"),o=0;o<n.length;o++){var i=n[o],a=i.getModel();1===this.getNeighbors(i).length&&t.push({id:a.id})}for(var s=0;s<r.length;s++){var u=r[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");1===c.length||0===f.length?t.push({id:l.id}):(this._collapseFunc(u,c=[]),t.push({id:l.id,children:c}))}return t}},{key:"_expandCollapseNode",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hide";e&&e.forEach(function(e){"hide"===n?t.hideItem(e.id):(t.showItem(e.id),t.isCollpased(e.id)&&delete t.collpasedData[e.id]),e.children&&t._expandCollapseNode(e.children,n)})}},{key:"showItem",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(e,t)}},{key:"hideItem",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(e,t)}},{key:"show",value:function(e){e.show()}},{key:"hide",value:function(e){e.hide()}},{key:"changeVisibility",value:function(e,t){e.changeVisibility(t)}},{key:"isVisible",value:function(e){return e.isVisible()}},{key:"getModel",value:function(e){return e.getModel()}},{key:"addItem",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(e,t)}},{key:"removeItem",value:function(e){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(e)}},{key:"updateItem",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(e,t)}},{key:"refreshItem",value:function(e){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(e)}},{key:"refreshPositions",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).on(e,t)}},{key:"off",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).off(e,t)}},{key:"toDataURL",value:function(e,t){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(e,t)}},{key:"bindNodeDefaultDragEvent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("node:dragstart",function(e){ph(e)}),e.on("node:drag",function(e){ph(e)}),e.on("node:dragend",function(e){e.item.get("model").fx=null,e.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("click",function(e){e.stopPropagation()}),e.on("mousedown",function(e){e.stopPropagation()}),e.on("mouseover",function(e){e.stopPropagation()}),e.on("mouseout",function(e){e.stopPropagation()})}},{key:"clear",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}]),Object.defineProperty(oh,"prototype",{writable:!1});var fh=hh;function hh(){if(!(this instanceof hh))throw new TypeError("Cannot call a class as a function");this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.CLASS_NAME="SuperMap.G6Render"}function ph(e){var t=e.item.get("model");t.fx=e.x,t.fy=e.y,t.x=e.x,t.y=e.y}var p=e(42138),dh=e.n(p);function yh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}oh=[{key:"dataFromGraphMap",value:Kf},{key:"dataFromKnowledgeGraphQuery",value:function(e){return Kf(e)}}],yh((p=vh).prototype,[{key:"handleNodeStatus",value:function(e){var t=e.expand,n=e.collapse,e=e.hidden;this.expandNodes(t),this.collapseNodes(n),this.hideNodes(e)}},{key:"expandNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.expandNode(e+"")})}},{key:"collapseNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.collapseNode(e+"")})}},{key:"hideNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.hideItem(e+"")})}},{key:"createGraphRender",value:function(e){"G6"===e&&(this.graphRender=new fh)}},{key:"createGraph",value:function(e){e=this.initGraph(e);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(e,t,n,r){this.graphRender.zoom(e,t,n,r)}},{key:"zoomTo",value:function(e,t,n,r){this.graphRender.zoomTo(e,t,n,r)}},{key:"fitView",value:function(e,t,n,r){this.graphRender.fitView(e,t,n,r)}},{key:"fitCenter",value:function(e,t){this.graphRender.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graphRender.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graphRender.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(e){var t=this,e=this.graphRender.initGraph(e);return this.graph=e,this.graph.on("beforelayout",function(){void 0!==t.config.zoom&&t.zoom(t.config.zoom),void 0!==t.config.center&&t.graphRender.setCenter({x:t.config.center[0],y:t.config.center[1]})}),e}},{key:"setData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph;e=e||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(e.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,e.nodes)),this.graphRender.setData(e,t),this.render(t),this.data=e}},{key:"render",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;e&&this.graphRender.render(e)}},{key:"updateGraph",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.graph;t&&this.graphRender.updateGraph(e,t)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(e,t){return this.graphRender.changeSize(e,t)}},{key:"resize",value:function(e,t){this.graphRender.changeSize(e,t),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(e,t){return this.graphRender.getNeighbors(e,t)}},{key:"findById",value:function(e){return this.graphRender.findById(e)}},{key:"find",value:function(e,t){return this.graphRender.find(e,t)}},{key:"findAll",value:function(e,t){return this.graphRender.findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return this.graphRender.getEdgesByNode(e)}},{key:"getInEdges",value:function(e){return this.graphRender.getInEdges(e)}},{key:"getOutEdges",value:function(e){return this.graphRender.getOutEdges(e)}},{key:"getSourceByEdge",value:function(e){return this.graphRender.getSourceByEdge(e)}},{key:"getTargetByEdge",value:function(e){return this.graphRender.getTargetByEdge(e)}},{key:"expandNode",value:function(e){e=this.findById(e);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(e){e=this.findById(e);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(e,t){this.graphRender.showItem(e,t)}},{key:"hideItem",value:function(e,t){this.graphRender.hideItem(e,t)}},{key:"show",value:function(e){this.graphRender.show(e)}},{key:"hide",value:function(e){this.graphRender.hide(e)}},{key:"changeVisibility",value:function(e,t){this.graphRender.changeVisibility(e,t)}},{key:"isVisible",value:function(e){return this.graphRender.isVisible(e)}},{key:"getModel",value:function(e){return this.graphRender.getModel(e)}},{key:"addItem",value:function(e,t){return this.graphRender.addItem(e,t)}},{key:"removeItem",value:function(e){return this.graphRender.removeItem(e)}},{key:"updateItem",value:function(e,t){return this.graphRender.updateItem(e,t)}},{key:"refreshItem",value:function(e){return this.graphRender.refreshItem(e)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(e,t){this.graphRender.on(e,t)}},{key:"off",value:function(e,t){this.graphRender.off(e,t)}},{key:"toDataURL",value:function(e,t){this.graphRender.toDataURL(e,t)}},{key:"nodeLabelOpenEllipsis",value:function(a,e){var s=this;return e?a?e.map(function(e){var t,n,r,o,i=e.labelCfg&&e.labelCfg.fontSize||s.defaultNode&&s.defaultNode.labelCfg&&s.defaultNode.labelCfg.fontSize||14;return e.label=(t=e.label,n=a,i=+i,n*=1.6,function(e){for(var t=0,n=0;n<e.length;n++)0<e.charCodeAt(n)&&e.charCodeAt(n)<128?t++:t+=2;return t}(t)*i>n?(r=Math.floor((n-20)/i),o=t.substring(0,r),(t.substring(r).length+"".length)*i>n?o+"\n"+t.substring(r,r+r-2)+"":0==t.substring(r).length?o:o+"\n"+t.substring(r)):t),e}):e:[]}},{key:"clear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.clear()}},{key:"destroy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.destroy()}}]),yh(p,oh),Object.defineProperty(p,"prototype",{writable:!1});var gh=vh;function vh(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"G6",n=this;if(!(n instanceof vh))throw new TypeError("Cannot call a class as a function");this.graph=null,this.config=dh()(e),this.graphRender=null,this.type=t,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}function mh(e){return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bh(){bh=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==mh(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function wh(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function _h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xh(e,t){return(xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sh(e){return(Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}oh=function(){var n,e=a,t=l().Evented;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xh(e,t);r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var r,o,i=function(){var e,t=Sh(r),t=(e=o?(e=Sh(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==mh(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t){var n;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");(n=i.call(this,e,t)).graph=null,n.EVENT_TYPES=["loaded"];var r=e.split("/").pop();return n.url=e.replace("/graphmaps/".concat(r),""),n.createGraphMap(r,t),n}return _h((e=a).prototype,[{key:"createGraphMap",value:function(e,t){return(n=n||(s=bh().mark(function e(o,i){var a,s,u=this;return bh().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,i),e.next=3,this.knowledgeGraphService.getGraphMapData(o);case 3:a=e.sent,s=gh.dataFromGraphMap(a.data,a.graphMap),this.graph=new gh(i&&i.config),this.graph.on("beforelayout",function(){u.fire(u.EVENT_TYPES[0])}),this.graph.setData(s),this.graph.handleNodeStatus((t=(r=a.graphMap.dataContent).expand,n=r.collapse,r=r.hidden,{expand:t&&JSON.parse(t),collapse:n&&JSON.parse(n),hidden:r&&JSON.parse(r)}));case 9:case"end":return e.stop()}var t,n,r},e,this)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){wh(r,t,n,o,i,"next",e)}function i(e){wh(r,t,n,o,i,"throw",e)}o(void 0)})})).apply(this,arguments);var s}},{key:"createKnowledgeGraphService",value:function(e,t){return new Yf(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Oh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Oh((p=Eh).prototype,[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=_.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=_.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=_.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}]),Object.defineProperty(p,"prototype",{writable:!1});var p=Eh,Ph={getPoint:function(e){if(e&&e instanceof Array)return new ys.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){var t;if(e&&e instanceof Array)return t=[],e.forEach(function(e){t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}})}),new ys.DataSet(t)},getCurveLines:function(n,e){var r;if(n&&n instanceof Array&&e&&e instanceof Array)return r=[],e.forEach(function(e){var e=e.geometry&&e.geometry.coordinates,e={lng:e[0],lat:e[1]},t={lng:n[0],lat:n[1]},t=ys.utilCurve.getPoints([t,e]);r.push({geometry:{type:"LineString",coordinates:t}})}),new ys.DataSet(r)},getCurveDynamicPoints:function(o,e){var i;if(o&&o instanceof Array&&e&&e instanceof Array)return i=[],e.forEach(function(e){for(var e=e.geometry&&e.geometry.coordinates,e={lng:e[0],lat:e[1]},t={lng:o[0],lat:o[1]},n=ys.utilCurve.getPoints([t,e]),r=0;r<n.length;r++)i.push({geometry:{type:"Point",coordinates:n[r]},time:r})}),new ys.DataSet(i)}};function Eh(e,t,n){if(!(this instanceof Eh))throw new TypeError("Cannot call a class as a function");this.lngLat=_.isArray(e)?{lng:e[0],lat:e[1]}:e,this.style=_.extend({},t),this.attributes=n}function kh(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Mh(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?kh(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):kh(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}jh((hp=Th).prototype,[{key:"addLayer",value:function(e,t,n){e.layout&&"none"===e.layout.visibility&&Object.assign(e.layout,{visibility:"visible"}),e.paint&&Object.assign(t.paint||{},e.paint),e.layout&&Object.assign(t.layout||{},e.layout),this.map.addLayerBySymbolBak(Mh(Mh({},e),t),n)}}]),Object.defineProperty(hp,"prototype",{writable:!1});var Ch=Th;function Th(e){if(!(this instanceof Th))throw new TypeError("Cannot call a class as a function");this.map=e}function Ah(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Ih(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ah(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Ah(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function Rh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Rh((hp=Nh).prototype,[{key:"addLayer",value:function(n,e,r){var o=this;e.forEach(function(e){var t=L.createUniqueID("".concat(n.id,"_"));o.singleSymbol.addLayer(Ih(Ih({},n),{},{id:t}),e,r),o.addLayerId(n.id,t)})}},{key:"addLayerId",value:function(e,t){this.layerIds[e]||(this.layerIds[e]=[]),this.layerIds[e].includes(t)||this.layerIds[e].push(t)}},{key:"removeLayerId",value:function(e){delete this.layerIds[e]}},{key:"getLayerIds",value:function(e){return this.layerIds[e]}},{key:"getLayerId",value:function(t){for(var e in this.layerIds)if(this.layerIds[e].find(function(e){return e===t}))return e}}]),Object.defineProperty(hp,"prototype",{writable:!1});var Lh=Nh;function Nh(e){if(!(this instanceof Nh))throw new TypeError("Cannot call a class as a function");this.map=e,this.singleSymbol=new Ch(e),this.layerIds={}}function Dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Dh((hp=Fh).prototype,[{key:"addSymbol",value:function(e,t){this.symbols[e]=t}},{key:"getSymbol",value:function(e){return this.symbols[e]&&JSON.parse(JSON.stringify(this.symbols[e]))}},{key:"removeSymbol",value:function(e){delete this.symbols[e]}},{key:"addImageInfo",value:function(e,t){this.images[e]=t}},{key:"getImageInfo",value:function(e){return this.images[e]}}]),Object.defineProperty(hp,"prototype",{writable:!1});var Bh=Fh;function Fh(){if(!(this instanceof Fh))throw new TypeError("Cannot call a class as a function");this.symbols={},this.images={}}function Gh(e,t){var n;if(e)return"string"==typeof e?zh(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zh(e,t):void 0}function zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uh(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Vh="symbol",Wh="line",Yh="fill",Hh=[{prefix:"line-",type:Wh},{prefix:"fill-",type:Yh},{prefix:"circle-",type:"circle"}];function Xh(e){return e&&0<e.length}function qh(a){var e,t=function(){var e,n,t=a.paint,r=a.layout,r=void 0===r?{}:r,o=Object.keys(void 0===t?{}:t).concat(Object.keys(r)),i=function(e){var t,n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,t=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw t}}};if(Array.isArray(e)||(a=Gh(e)))return a&&(e=a),o=0,{s:i=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(Hh);try{for(i.s();!(n=i.n()).done&&!function(){var t=n.value;if(o.some(function(e){return e.startsWith(t.prefix)}))return e=t.type,1}(););}catch(e){i.e(e)}finally{i.f()}return e||Vh}();return Uh(e={},Vh,{type:"layout",name:"icon-image"}),Uh(e,Wh,{type:"paint",name:"line-pattern"}),Uh(e,Yh,{type:"paint",name:"fill-pattern"}),e[t]}var Jh=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function Zh(e){var t;if(e&&0<e.length)return t=1,"string"==typeof(e=(function(e){if(Array.isArray(e))return e}(e=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||Gh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0])&&Jh.includes(e)}function Kh(t){return Object.keys(t).every(function(e){return!Zh(t[e])})}function Qh(e){return(Xh(e)?e:[e]).every(function(e){return Kh(e.paint||{})&&Kh(e.layout||{})})}function $h(e){return["icon-color","icon-opacity","icon-translate","line-opacity","line-blur","line-translate","line-color","line-width","line-offset","line-dasharray","line-pattern","fill-color","fill-opacity","fill-pattern","fill-outline-color","text-color","text-halo-blur","text-halo-color","text-halo-width","text-opacity","text-translate","text-translate-anchor","circle-blur","circle-color","circle-opacity","circle-translate","circle-radius","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"].includes(e)}function ep(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function tp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ep(Object(n),!0).forEach(function(e){np(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rp((hp=ip).prototype,[{key:"_update",value:function(e){return this.map=e,this}},{key:"addLayer",value:function(e,t){if("string"==typeof e.symbol){var n=e.symbol;if(n){var r=this.symbolManager.getSymbol(n);if(!r)return this.map.fire("error",{error:new Error('Symbol "'.concat(n,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(e.id,n),this.getSymbolRender(r).addLayer(e,r,t)}}else Zh(e.symbol)&&(this.setSymbolTolayer(e.id,e.symbol),this.addExpressionLayer(e,t))}},{key:"setSymbol",value:function(t,e){var n=this.map.getStyle().layers,r=n.findIndex(function(e){return e.id===t});if(-1===r)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(e,'" to non-existing layer "').concat(t,'".'))});this.map.removeLayer(t);var o=n[r+1]&&n[r+1].id,i=o&&this.map.style.getLayer(o),i=i&&i.id||o&&this.getFirstLayerId(o),o=n[r];this.addLayer(tp(tp({},o),{},{paint:{},layout:{visibility:o.layout&&o.layout.visibility||"visible"},symbol:e}),i)}},{key:"getMatchLayers",value:function(n){var r=[],o=["all"],i=(n.filter&&o.push(n.filter),n.symbol.slice(2));return i.forEach(function(e,t){t%2==1?r.push(tp(tp({},n),{},{filter:[].concat(o,[["==",n.symbol[1][1],i[t-1]]]),symbol:e})):t===i.length-1&&r.unshift(tp(tp({},n),{},{symbol:e}))}),r}},{key:"getCaseLayers",value:function(n){var r=[],o=["all"],i=(n.filter&&o.push(n.filter),n.symbol.slice(1));return i.forEach(function(e,t){t%2==1?r.push(tp(tp({},n),{},{filter:[].concat(o,[i[t-1]]),symbol:e})):t===i.length-1&&r.unshift(tp(tp({},n),{},{symbol:e}))}),r}},{key:"addExpressionLayer",value:function(t,n){var r=this,e=(delete t.paint,delete t.layout,{match:this.getMatchLayers,case:this.getCaseLayers}[t.symbol[0]]),e=e&&e(t);if(!e)return this.map.fire("error",{error:new Error("This expressions not supported")});e.forEach(function(e){e.id=L.createUniqueID("".concat(t.id,"_")),r.compositeSymbolRender.addLayerId(t.id,e.id),r.addLayer(e,n)})}},{key:"getSymbolRender",value:function(e){return Xh(e)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(e,t){var n=qh(e),r=n.type,n=n.name,e=e[r]&&e[r][n];e&&!this.map.hasImage(e)&&(this.map.addImage(e,t),this.symbolManager.addImageInfo(e,t))}},{key:"addSymbol",value:function(e,t){return this.symbolManager.getSymbol(e)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):Qh(t)?void this.symbolManager.addSymbol(e,t):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(e,t){this._layerSymbols[e]=t}},{key:"getSymbol",value:function(e){return this._layerSymbols[e]}},{key:"hasSymbol",value:function(){return 0<Object.keys(this._layerSymbols).length}},{key:"removeSymbol",value:function(e){this.symbolManager.removeSymbol(e)}},{key:"getSymbolInfo",value:function(e){return this.symbolManager.getSymbol(e)}},{key:"getLayerIds",value:function(e){return this.compositeSymbolRender.getLayerIds(e)||[]}},{key:"getLayerId",value:function(e){return this.compositeSymbolRender.getLayerId(e)}},{key:"removeLayerId",value:function(e){return this.compositeSymbolRender.removeLayerId(e)}},{key:"getLayer",value:function(e){var t=this.map.getLayerBySymbolBak(e),n=this.getSymbol(e);return t?n?tp(tp({},t),{},{symbol:n}):t:(t=this.getLayerIds(e))[0]?(t=this.map.getLayerBySymbolBak(t[0]))&&tp(tp({},t),{},{symbol:n,id:e}):void 0}},{key:"removeLayer",value:function(e){var t=this,n=this.getLayerIds(e);0<n.length?(n.forEach(function(e){return t.map.style.removeLayer(e)}),this.removeLayerId(e)):this.map.style.removeLayer(e)}},{key:"getStyle",value:function(){var r=this,e=this.map.style.serialize();return this.hasSymbol()&&(e.layers=e.layers.reduce(function(e,t){var n=r.getLayerId(t.id);return n?e.find(function(e){return e.id===n})||e.push(tp(tp({},t),{},{symbol:r.getSymbol(n),id:n})):r.getSymbol(t.id)?e.push(tp(tp({},t),{},{symbol:r.getSymbol(t.id)})):e.push(t),e},[])),e}},{key:"getFirstLayerId",value:function(e){return this.getLayerIds(e)[0]}},{key:"moveLayer",value:function(e,t){var n=this,r=this.getLayerIds(e),o=t&&this.map.style.getLayer(t),i=o&&o.id||t&&this.getFirstLayerId(t);0<r.length?r.forEach(function(e){return n.map.style.moveLayer(e,i)}):this.map.style.moveLayer(e,i)}},{key:"setFilter",value:function(e,t,n){var r,o=this;Zh(this.getSymbol(e))?(r=this.getFirstLayerId(e),this.map.style.setFilter(r,t,n),r=this.getSymbol(e),this.setSymbol(e,r)):0<(r=this.getLayerIds(e)).length?r.forEach(function(e){return o.map.style.setFilter(e,t,n)}):this.map.style.setFilter(e,t,n)}},{key:"getFilter",value:function(e){e=this.getFirstLayerId(e);if(this.map.style.getLayer(e))return this.map.style.getFilter(e)}},{key:"setLayerZoomRange",value:function(e,t,n){var r=this,o=this.getLayerIds(e);0<o.length?o.forEach(function(e){return r.map.style.setLayerZoomRange(e,t,n)}):this.map.style.setLayerZoomRange(e,t,n)}},{key:"setPaintProperty",value:function(e,t,n,r){var o=this,i=this.getLayerIds(e);0<i.length?i.forEach(function(e){return o.map.style.setPaintProperty(e,t,n,r)}):this.map.style.setPaintProperty(e,t,n,r)}},{key:"getPaintProperty",value:function(e,t){e=this.getFirstLayerId(e);return this.map.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n,r){var o=this,i=this.getLayerIds(e);0<i.length?i.forEach(function(e){return o.map.style.setLayoutProperty(e,t,n,r)}):this.map.style.setLayoutProperty(e,t,n,r)}},{key:"getLayoutProperty",value:function(e,t){e=this.getFirstLayerId(e);return this.map.style.getLayoutProperty(e,t)}},{key:"updateLayerSymbol",value:function(n){var r=this;Object.keys(this._layerSymbols).forEach(function(e){var t=r._layerSymbols[e];t.includes(n)&&r.setSymbol(e,t)})}},{key:"updateSymbol",value:function(e,t){return this.symbolManager.getSymbol(e)?Qh(t)?(this.symbolManager.addSymbol(e,t),void this.updateLayerSymbol(e)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(e,t,n,r){var o=this.symbolManager.getSymbol(e);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(Zh(r))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=$h(n)?"paint":"layout";if(0<o.length){var a=o[t];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(t,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],np({},n,r))}else o[i]||(o[i]={}),Object.assign(o[i],np({},n,r));this.symbolManager.addSymbol(e,o),this.updateLayerSymbol(e)}},{key:"getSymbolProperty",value:function(e,t,n){var r,o=this.symbolManager.getSymbol(e);if(o)return r=$h(n)?"paint":"layout",0<o.length?o[t]&&o[t][r]&&o[t][r][n]:o[r]&&o[r][n];this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}]),Object.defineProperty(hp,"prototype",{writable:!1});var op=ip;function ip(e){if(!(this instanceof ip))throw new TypeError("Cannot call a class as a function");this.map=e,this.symbolManager=new Bh,this.singleSymbolRender=new Ch(e),this.compositeSymbolRender=new Lh(e),this._layerSymbols={}}function ap(e){return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sp(){sp=function(){return a};var a={},e=Object.prototype,u=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(a){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new w(r||[]);return t._invoke=(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return x()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=l(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,a);if(n){if(n===c)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=l(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}}),t}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var c={};function f(){}function h(){}function p(){}var t={},d=(i(t,r,function(){return this}),Object.getPrototypeOf),d=d&&d(d(_([]))),y=(d&&d!==e&&u.call(d,r)&&(t=d),p.prototype=f.prototype=Object.create(t));function g(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;this._invoke=function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=l(a[e],a,n);return"throw"!==e.type?(n=(i=e.arg).value)&&"object"==ap(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)}):void o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function _(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:x}}function x(){return{value:void 0,done:!0}}return i(y,"constructor",h.prototype=p),i(p,"constructor",h),h.displayName=i(p,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},g(v.prototype),i(v.prototype,n,function(){return this}),a.AsyncIterator=v,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new v(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},g(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},a}function up(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function lp(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){up(r,t,n,o,i,"next",e)}function i(e){up(r,t,n,o,i,"throw",e)}o(void 0)})}}function cp(){function s(e){return l().Map.prototype.symbolHandler||(l().Map.prototype.symbolHandler=new op(e)),l().Map.prototype.symbolHandler._update(e)}var n,u;void 0===l().Map.prototype.addLayerBySymbolBak&&(l().Map.prototype.addLayerBySymbolBak=l().Map.prototype.addLayer,l().Map.prototype.addLayer=function(e,t){return e.symbol?s(this).addLayer(e,t):this.addLayerBySymbolBak(e,t),this}),void 0===l().Map.prototype.getLayerBySymbolBak&&(l().Map.prototype.getLayerBySymbolBak=l().Map.prototype.getLayer,l().Map.prototype.getLayer=function(e){return s(this).getLayer(e)}),void 0===l().Map.prototype.moveLayerBySymbolBak&&(l().Map.prototype.moveLayerBySymbolBak=l().Map.prototype.moveLayer,l().Map.prototype.moveLayer=function(e,t){return!this.style.getLayer(e)||t&&!this.style.getLayer(t)?(s(this).moveLayer(e,t),this._update(!0)):this.moveLayerBySymbolBak(e,t)}),void 0===l().Map.prototype.removeLayerBySymbolBak&&(l().Map.prototype.removeLayerBySymbolBak=l().Map.prototype.removeLayer,l().Map.prototype.removeLayer=function(e){return this.style.getLayer(e)?this.removeLayerBySymbolBak(e):s(this).removeLayer(e)}),void 0===l().Map.prototype.setLayoutPropertyBySymbolBak&&(l().Map.prototype.setLayoutPropertyBySymbolBak=l().Map.prototype.setLayoutProperty,l().Map.prototype.setLayoutProperty=function(e,t,n,r){return this.overlayLayersManager[e]||this.style.getLayer(e)?this.setLayoutPropertyBySymbolBak(e,t,n,r):(s(this).setLayoutProperty(e,t,n,r),this._update(!0))}),l().Map.prototype.setSymbol=function(e,t){s(this).setSymbol(e,t)},l().Map.prototype.setStyleBak||(l().Map.prototype.setStyleBak=l().Map.prototype.setStyle,l().Map.prototype.setStyle=function(e,t){var n=this;return this.setStyleBak(e,t),this.style&&this.style.once("style.load",function(){e.layers.filter(function(e){return e.symbol}).forEach(function(e){n.setSymbol(e.id,e.symbol)})}),this}),l().Map.prototype.loadSymbol=function(e,t){return(n=n||lp(sp().mark(function e(t,n){var r,o,i,a;return sp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=15;break}if(r=s(this).getSymbolInfo(t)){e.next=12;break}return e.next=5,function(){return(u=u||lp(sp().mark(function e(t,n){var r,o,i,a;return sp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(n.basePath,"/").concat(t,"/").concat(t),e.next=4,y.get("".concat(r,".json")).then(function(e){if(e.ok)return e.json()}).catch(function(){return null});case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:if(i=o.paint||{},a=o.layout||{},i=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],e.t0=i,e.t0)return e.next=14,new Promise(function(t){var n=new Image;n.src="".concat(r,".png"),n.onload=function(e){t(e?n:null)},n.onerror=function(){t(null)}});e.next=15;break;case 14:e.t0=e.sent;case 15:return a=e.t0,e.abrupt("return",{value:o,image:a});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}(t,this);case 5:if(o=e.sent){e.next=9;break}return n({message:"This symbol is not exists."}),e.abrupt("return");case 9:i=o.value,a=o.image,r=i,a&&s(this).addSymbolImageToMap(i,a);case 12:n(null,r),e.next=16;break;case 15:n({message:"Symbol id must be a string."});case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},l().Map.prototype.addSymbol=function(e,t){s(this).addSymbol(e,t)},l().Map.prototype.hasSymbol=function(e){return e?!!s(this).getSymbolInfo(e):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},l().Map.prototype.removeSymbol=function(e){s(this).removeSymbol(e)},l().Map.prototype.updateSymbol=function(e,t){s(this).updateSymbol(e,t)},l().Map.prototype.setSymbolProperty=function(e,t,n,r){s(this).setSymbolProperty(e,t,n,r)},l().Map.prototype.getSymbolProperty=function(e,t,n){return s(this).getSymbolProperty(e,t,n)},l().Map.prototype.getStyle=function(){if(this.style)return s(this).getStyle()},l().Map.prototype.setFilter=function(e,t,n){return(this.style.getLayer(e)?this.style:s(this)).setFilter(e,t,n),this._update(!0)},l().Map.prototype.getFilter=function(e){return(this.style.getLayer(e)?this.style:s(this)).getFilter(e)},l().Map.prototype.setLayerZoomRange=function(e,t,n){return(this.style.getLayer(e)?this.style:s(this)).setLayerZoomRange(e,t,n),this._update(!0)},l().Map.prototype.setPaintProperty=function(e,t,n,r){return(this.style.getLayer(e)?this.style:s(this)).setPaintProperty(e,t,n,r),this._update(!0)},l().Map.prototype.getPaintProperty=function(e,t){return(this.style.getLayer(e)?this.style:s(this)).getPaintProperty(e,t)},l().Map.prototype.getLayoutProperty=function(e,t){return(this.style.getLayer(e)?this.style:s(this)).getLayoutProperty(e,t)}}function fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}fp((hp=pp).prototype,[{key:"init",value:function(e){l().Map.prototype.basePath=e&&e.basePath||this.defaultBasePath,cp()}}]),Object.defineProperty(hp,"prototype",{writable:!1});var hp=pp;function pp(){if(!(this instanceof pp))throw new TypeError("Cannot call a class as a function");this.defaultBasePath="./resources/symbols"}function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}dp((Cp=gp).prototype,[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}]),Object.defineProperty(Cp,"prototype",{writable:!1});var yp=gp;function gp(e){if(!(this instanceof gp))throw new TypeError("Cannot call a class as a function");e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,L.extend(this,e)}function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}vp((Cp=bp).prototype,[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}]),Object.defineProperty(Cp,"prototype",{writable:!1});var mp=bp;function bp(e){if(!(this instanceof bp))throw new TypeError("Cannot call a class as a function");e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,L.extend(this,e)}function wp(e){return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xp(){return(xp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Op(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Sp(e,t){return(Sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Op(e){return(Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pp=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sp(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Op(n),t=(e=r?(e=Op(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==wp(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).options=t||{},e.eventCount=0,e.CLASS_NAME="SuperMap.AddressMatchService",e;throw new TypeError("Cannot call a class as a function")}return _p((e=i).prototype,[{key:"destroy",value:function(){xp(Op(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t,n){t instanceof yp&&this.processAsync(e,t,n)}},{key:"decode",value:function(e,t,n){t instanceof mp&&this.processAsync(e,t,n)}},{key:"processAsync",value:function(e,t,n){var r=++this.eventCount,o={scope:this,processCompleted:function(e){if(r===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(o),!1},processFailed:function(e){if((r===e.error.eventId||r===e.eventId)&&n)return n(e),this.events&&this.events.un(o),!1}};this.events.on(o),this.request({method:"GET",url:e,params:t,scope:this,success:function(e,t){e.eventId=r,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=r),e.eventId=r,this.serviceProcessFailed(e,t)}})}},{key:"serviceProcessCompleted",value:function(e,t){e.succeed&&delete e.succeed,xp(Op(i.prototype),"serviceProcessCompleted",this).call(this,e,t)}},{key:"serviceProcessFailed",value:function(e,t){xp(Op(i.prototype),"serviceProcessFailed",this).call(this,e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ep(e){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mp(e,t){return(Mp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cp=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mp(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=jp(n),t=(e=r?(e=jp(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Ep(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._addressMatchService=new Pp(e,t),n;throw new TypeError("Cannot call a class as a function")}return kp((e=i).prototype,[{key:"code",value:function(e,t){this._addressMatchService.code(L.urlPathAppend(this.url,"geocoding"),e,t)}},{key:"decode",value:function(e,t){this._addressMatchService.decode(L.urlPathAppend(this.url,"geodecoding"),e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Tp((ad=Ip).prototype,[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,n=e.queryParams,r=n.length;t<r;t++)n[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}]),Object.defineProperty(ad,"prototype",{writable:!1});var Ap=Ip;function Ip(e){if(!(this instanceof Ip))throw new TypeError("Cannot call a class as a function");e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=Nt.LINE,this.queryOption=Dt.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")}function Rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Rp((ad=Np).prototype,[{key:"destroy",value:function(){this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="",e=(e=(e+='"isQueryPoint":'+this.isQueryPoint+",")+('"isQueryLine":'+this.isQueryLine+","))+('"isQueryRegion":'+this.isQueryRegion+",");return this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),"{"+e+('"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}]),Object.defineProperty(ad,"prototype",{writable:!1});var Lp=Np;function Np(e){if(!(this instanceof Np))throw new TypeError("Cannot call a class as a function");this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,L.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Dp((ad=Fp).prototype,[{key:"destroy",value:function(){this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],n=this.chartLayerNames.length,r=0;r<n;r++)t.push('"'+this.chartLayerNames[r]+'"');e+='"chartLayerNames":['+t.join(",")+"],"}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Lp&&o.push(s.toJson())}var u='"chartQueryParams":'+(u="["+o.join(",")+"]")+",";e+='"chartQueryParameters":'+(u="{"+(u+='"startRecord":'+this.startRecord+",")+('"expectCount":'+this.expectCount)+"}")}return"{"+e+"}"}}]),Object.defineProperty(ad,"prototype",{writable:!1});var Bp=Fp;function Fp(e){if(!(this instanceof Fp))throw new TypeError("Cannot call a class as a function");this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,L.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"}function Gp(e){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Up(e,t){return(Up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vp(e,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wp(e)}function Wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yp(e){return(Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hp=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Up(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Yp(n);return Vp(this,r?(e=Yp(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");e=o.call(this,e,t),t=t||{},e.returnContent=null,e.format=a.GEOJSON,L.extend(Wp(e),t);var n=Wp(e);return t.format&&(n.format=t.format.toUpperCase()),n.url?(n.url=L.urlPathAppend(n.url,"queryResults"),e.CLASS_NAME="SuperMap.ChartQueryService",e):Vp(e)}return zp((e=i).prototype,[{key:"destroy",value:function(){m.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){e instanceof Bp&&(this.returnContent=e.returnContent,e=e.getVariablesJson(),this.returnContent&&(this.url=L.urlAppend(this.url,"returnContent=true")),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"serviceProcessCompleted",value:function(e,t){if((e=L.transformResult(e))&&e.recordsets&&this.format===a.GEOJSON)for(var n=0,r=e.recordsets,o=r.length;n<o;n++){var i;r[n].features&&(i=new jn,r[n].features=i.toGeoJSON(r[n].features))}this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"getQueryParameters",value:function(e){return new Ap({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xp(e){return(Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jp(){return(Jp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kp(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Zp(e,t){return(Zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kp(e){return(Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qp=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zp(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Kp(n),t=(e=r?(e=Kp(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Xp(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",e;throw new TypeError("Cannot call a class as a function")}return qp((e=i).prototype,[{key:"destroy",value:function(){Jp(Kp(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(){this.isTempLayers||L.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$p((ad=td).prototype,[{key:"queryChart",value:function(e,t,n){n=this._processFormat(n);new Hp(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).processAsync(e)}},{key:"getChartFeatureInfo",value:function(e){var t=L.urlPathAppend(this.url,"chartFeatureInfoSpecs");new Qp(t,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(ad,"prototype",{writable:!1});var ed=td;function td(e,t){if(!(this instanceof td))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function nd(e){return(nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function od(e,t){return(od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function id(e){return(id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ad=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&od(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=id(n),t=(e=r?(e=id(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==nd(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._chartService=new ed(e,t),n;throw new TypeError("Cannot call a class as a function")}return rd((e=i).prototype,[{key:"queryChart",value:function(e,t,n){this._chartService.queryChart(e,t,n)}},{key:"getChartFeatureInfo",value:function(e){this._chartService.getChartFeatureInfo(e)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sd(e){return(sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ld(e,t){return(ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fd(e){return(fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hd=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ld(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=fd(n),t=(e=r?(e=fd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===sd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cd(t)};function i(e,t){if(this instanceof i)return(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(e=o.call(this,e,t)).geometry=null,e.prjCoordSys=null,e.excludeField=null,L.extend(cd(e),t),e.CLASS_NAME="SuperMap.DataFlowService",e;throw new TypeError("Cannot call a class as a function")}return ud((e=i).prototype,[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(L.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(L.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){m.prototype.destroy.apply(this,arguments),this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return L.toJSON(e)}},{key:"_onMessage",value:function(e){var t;e.data&&0<=e.data.indexOf("filterParam")?(t=JSON.parse(e.data),e.filterParam=t,e.eventType="setFilterParamSucceeded",this.events.triggerEvent("setFilterParamSucceeded",e)):(t=JSON.parse(e.data),e.featureResult=t,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e))}},{key:"_connect",value:function(e){return e=Pf.appendCredential(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new window.MozWebSocket(e):(console.log("no WebSocket"),null)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pd(e){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yd(e,t){return(yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vd(e){return(vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var md=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yd(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vd(n),t=(e=r?(e=vd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gd(t)};function i(e,t){var n;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");(t=t||{}).projection&&(t.prjCoordSys=t.projection),(n=o.call(this,e,t)).dataFlow=new hd(e,t),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:gd(n)});var r=gd(n);return r.on("subscribeSocketConnected",function(e){r.fire("subscribesucceeded",e)}),n}return dd((e=i).prototype,[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bd(e){return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _d(){return(_d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pd(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function xd(e,t){return(xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sd(e,t){if(t&&("object"===bd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Od(e)}function Od(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pd(e){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ed=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xd(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Pd(n);return Sd(this,r?(e=Pd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t?(e.datasource=null,e.dataset=null,e.eventCount=0,t&&L.extend(Od(e),t),e.CLASS_NAME="SuperMap.DatasetService",e):Sd(e);throw new TypeError("Cannot call a class as a function")}return wd((e=i).prototype,[{key:"destroy",value:function(){_d(Pd(i.prototype),"destroy",this).call(this),this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(e,t){e=L.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets"));this.processAsync(e,"GET",t)}},{key:"getDatasetService",value:function(e,t,n){e=L.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));this.processAsync(e,"GET",n)}},{key:"setDatasetService",value:function(e,t){var n;e&&(n=L.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName,"/datasets/name/").concat(e.datasetName)),delete e.datasourceName,this.processAsync(n,"PUT",t,e))}},{key:"deleteDatasetService",value:function(e,t,n){e=L.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));this.processAsync(e,"DELETE",n)}},{key:"processAsync",value:function(e,t,n,r){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(i),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&n)return n(e),this.events&&this.events.un(i),!1}},a=(this.events.on(i),this),e={url:e,method:t,scope:a,success:function(e,t){e.eventId=o,a.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,a.serviceProcessFailed(e,t)}};r&&(e.data=L.toJSON(r)),a.request(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}kd((Dd=jd).prototype,[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}]),Object.defineProperty(Dd,"prototype",{writable:!1});var Md=jd;function jd(e){if(!(this instanceof jd))throw new TypeError("Cannot call a class as a function");e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}function Cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Cd((Dd=Ad).prototype,[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null}}]),Object.defineProperty(Dd,"prototype",{writable:!1});var Td=Ad;function Ad(e){if(!(this instanceof Ad))throw new TypeError("Cannot call a class as a function");e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ld(e,t){return(Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dd=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ld(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Nd(n),t=(e=r?(e=Nd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Id(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._datasetService=new Ed(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return Rd((e=i).prototype,[{key:"getDatasets",value:function(e,t){e&&this._datasetService.getDatasetsService(e,t)}},{key:"getDataset",value:function(e,t,n){e&&t&&this._datasetService.getDatasetService(e,t,n)}},{key:"setDataset",value:function(e,t){var n;(e instanceof Md||e instanceof Td)&&(e instanceof Md?n={datasetType:e.datasetType,datasetName:e.datasetName,datasourceName:e.datasourceName}:e instanceof Td&&(n={datasetName:e.datasetName,datasourceName:e.datasourceName,isFileCache:e.isFileCache,description:e.description,prjCoordSys:e.prjCoordSys,charset:e.charset}),this._datasetService.setDatasetService(n,t))}},{key:"deleteDataset",value:function(e,t,n){this._datasetService.deleteDatasetService(e,t,n)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Bd((Qd=Gd).prototype,[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}]),Object.defineProperty(Qd,"prototype",{writable:!1});var Fd=Gd;function Gd(e){if(!(this instanceof Gd))throw new TypeError("Cannot call a class as a function");e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}function zd(e){return(zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vd(){return(Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hd(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Wd(e,t){return(Wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hd(e){return(Hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xd=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wd(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Hd(n),t=(e=r?(e=Hd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===zd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yd(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t&&L.extend(Yd(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.DatasourceService",e;throw new TypeError("Cannot call a class as a function")}return Ud((e=i).prototype,[{key:"destroy",value:function(){this.eventCount=0,Vd(Hd(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(e,t){e=L.urlPathAppend(this.url,"datasources/name/".concat(e));this.processAsync(e,"GET",t)}},{key:"getDatasourcesService",value:function(e){var t=L.urlPathAppend(this.url,"datasources");this.processAsync(t,"GET",e)}},{key:"setDatasourceService",value:function(e,t){var n;e&&(n=L.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName)),this.processAsync(n,"PUT",t,e))}},{key:"processAsync",value:function(e,t,n,r){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(i),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&n)return n(e),this.events&&this.events.un(i),!1}},e=(this.events.on(i),{url:e,method:t,scope:this,success:function(e,t){e.eventId=o,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,this.serviceProcessFailed(e,t)}});r&&(e.data=L.toJSON(r)),this.request(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qd(e){return(qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zd(e,t){return(Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kd(e){return(Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qd=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zd(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Kd(n),t=(e=r?(e=Kd(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==qd(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._datasourceService=new Xd(e.url,{proxy:e.proxy,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,headers:e.headers}),e;throw new TypeError("Cannot call a class as a function")}return Jd((e=i).prototype,[{key:"getDatasources",value:function(e){this._datasourceService.getDatasourcesService(e)}},{key:"getDatasource",value:function(e,t){e&&this._datasourceService.getDatasourceService(e,t)}},{key:"setDatasource",value:function(e,t){e instanceof Fd&&(e={description:e.description,coordUnit:e.coordUnit,distanceUnit:e.distanceUnit,datasourceName:e.datasourceName},this._datasourceService.setDatasourceService(e,t))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}vv=[{key:"toJsonParameters",value:function(e){var t,n;if(e.editType===on.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features)for(var r=e.features.length,o=0;o<r;o++)(t=e.features[o]).geometry=s.fromGeometry(t.geometry),n.push(t);return L.toJSON(n)}}],$d((Gg=ty).prototype,[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=null,this.IDs=null,this.returnContent=null}}]),$d(Gg,vv),Object.defineProperty(Gg,"prototype",{writable:!1});var ey=ty;function ty(e){if(!(this instanceof ty))throw new TypeError("Cannot call a class as a function");this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=on.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}function ny(e){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oy(){return(oy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sy(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function iy(e,t){return(iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ay(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sy(e){return(sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uy=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=sy(n),t=(e=r?(e=sy(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ny(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ay(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).returnContent=!1,e.isUseBatch=!1,t&&L.extend(ay(e),t),e.url=L.urlPathAppend(e.url,"features"),e.CLASS_NAME="SuperMap.EditFeaturesService",e;throw new TypeError("Cannot call a class as a function")}return ry((e=i).prototype,[{key:"destroy",value:function(){oy(sy(i.prototype),"destroy",this).call(this),this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){var t,n,r,o,i;e instanceof ey&&(i="POST",n="",r=e.editType,o=null,(t=this).returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,o=ey.toJsonParameters(e),r===on.DELETE?(o=n=L.toJSON(e.IDs),e=L.urlAppend(t.url,L.getParameterString({ids:n})),i=y.urlIsLong(e)?(t.url=L.urlAppend(t.url,L.getParameterString({_method:"DELETE"})),"POST"):(t.url=e,"DELETE")):r===on.UPDATE?i="PUT":(t.isUseBatch&&(t.url=L.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=L.urlAppend(t.url,"returnContent=true"),i="POST")),t.request({method:i,data:o,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ly(e){return(ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fy(){return(fy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dy(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function hy(e,t){return(hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function py(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dy(e){return(dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yy=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hy(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=dy(n),t=(e=r?(e=dy(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ly(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return py(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t=t||{},e.returnContent=!0,e.fromIndex=0,e.toIndex=19,e.hasGeometry=!0,e.maxFeatures=null,e.format=a.GEOJSON,L.extend(py(e),t),e.url=L.urlPathAppend(e.url,"featureResults"),e.CLASS_NAME="SuperMap.GetFeaturesServiceBase",e;throw new TypeError("Cannot call a class as a function")}return cy((e=i).prototype,[{key:"destroy",value:function(){fy(dy(i.prototype),"destroy",this).call(this);this.returnContent=null,this.fromIndex=null,this.toIndex=null,this.maxFeatures=null,this.format=null,this.hasGeometry=null}},{key:"processAsync",value:function(e){var t,n;e&&(n=!0,(t=this).returnContent=e.returnContent,t.fromIndex=e.fromIndex,t.toIndex=e.toIndex,t.maxFeatures=e.maxFeatures,t.hasGeometry=e.hasGeometry,t.returnContent&&(n=!1),null!=t.fromIndex&&null!=t.toIndex&&!isNaN(t.fromIndex)&&!isNaN(t.toIndex)&&0<=t.fromIndex&&0<=t.toIndex&&!n&&(t.url=L.urlAppend(t.url,"fromIndex=".concat(t.fromIndex,"&toIndex=").concat(t.toIndex))),e.returnCountOnly&&(t.url=L.urlAppend(t.url,"&returnCountOnly="+e.returnContent)),n=t.getJsonParameters(e),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed}))}},{key:"serviceProcessCompleted",value:function(e,t){var n;e=L.transformResult(e),this.format===a.GEOJSON&&e.features&&(n=new jn,e.features=n.toGeoJSON(e.features)),this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gy((vv=my).prototype,[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}]),Object.defineProperty(vv,"prototype",{writable:!1});var vy=my;function my(e){if(!(this instanceof my))throw new TypeError("Cannot call a class as a function");this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}by((Gg=_y).prototype,[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}]),Object.defineProperty(Gg,"prototype",{writable:!1});var wy=_y;function _y(e){if(!(this instanceof _y))throw new TypeError("Cannot call a class as a function");this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,L.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}function xy(e){return(xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oy(){return(Oy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ky(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Py(e,t){return(Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ey(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ky(e){return(ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var My=function(){var e=i,t=wy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Py(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ky(n),t=(e=r?(e=ky(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===xy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ey(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).getFeatureMode="ID",t.IDs=null,t.fields=null,L.extend(Ey(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){var t,n={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs};return e.fields&&((t=new vy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),L.toJSON(n)}}],Sy((t=i).prototype,[{key:"destroy",value:function(){Oy(ky(i.prototype),"destroy",this).call(this);if(this.IDs=null,this.getFeatureMode=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}}}]),Sy(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jy(e){return(jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ty(){return(Ty="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iy(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ay(e,t){return(Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ry=function(){var e=i,t=yy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ay(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Iy(n),t=(e=r?(e=Iy(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==jy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",e;throw new TypeError("Cannot call a class as a function")}return Cy((e=i).prototype,[{key:"destroy",value:function(){Ty(Iy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return My.toJsonParameters(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ly(e){return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ny(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dy(){return(Dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gy(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function By(e,t){return(By=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gy(e){return(Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zy=function(){var e=i,t=wy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),By(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Gy(n),t=(e=r?(e=Gy(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Ly(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fy(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).getFeatureMode="SQL",t.queryParameter=null,L.extend(Fy(t),e),t.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),L.toJSON(t)}}],Ny((t=i).prototype,[{key:"destroy",value:function(){Dy(Gy(i.prototype),"destroy",this).call(this),this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}]),Ny(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uy(e){return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wy(){return(Wy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hy(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Yy(e,t){return(Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hy(e){return(Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xy=function(){var e=i,t=yy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yy(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Hy(n),t=(e=r?(e=Hy(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Uy(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",e;throw new TypeError("Cannot call a class as a function")}return Vy((e=i).prototype,[{key:"destroy",value:function(){Wy(Hy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return zy.toJsonParameters(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qy(e){return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zy(){return(Zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$y(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ky(e,t){return(Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $y(e){return($y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eg=function(){var e=i,t=wy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ky(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$y(n),t=(e=r?(e=$y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===qy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qy(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).getFeatureMode=i.getFeatureMode.BOUNDS,t.bounds=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=Bt.CONTAIN,L.extend(Qy(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){var t,n={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},n={datasetNames:e.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:e.spatialQueryMode};return e.fields&&((t=new vy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),L.toJSON(n)}}],Jy((t=i).prototype,[{key:"destroy",value:function(){Zy($y(i.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;0<e.fields.length;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}]),Jy(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tg(e){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rg(){return(rg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ig(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function og(e,t){return(og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ig(e){return(ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}eg.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var ag=function(){var e=i,t=yy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&og(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ig(n),t=(e=r?(e=ig(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==tg(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",e;throw new TypeError("Cannot call a class as a function")}return ng((e=i).prototype,[{key:"destroy",value:function(){rg(ig(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return eg.toJsonParameters(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sg(e){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lg(){return(lg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hg(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function cg(e,t){return(cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hg(e){return(hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pg=function(){var e=i,t=wy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),cg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=hg(n),t=(e=r?(e=hg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===sg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fg(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).bufferDistance=null,t.attributeFilter=null,t.geometry=null,t.fields=null,L.extend(fg(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){var t,n=s.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n};return e.fields&&((t=new vy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),L.toJSON(n)}}],ug((t=i).prototype,[{key:"destroy",value:function(){lg(hg(i.prototype),"destroy",this).call(this);if(this.bufferDistance=null,this.attributeFilter=null,this.fields){for(;0<this.fields.length;)this.fields.pop();this.fields=null}this.geometry&&(this.geometry.destroy(),this.geometry=null)}}]),ug(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dg(e){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gg(){return(gg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mg(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function vg(e,t){return(vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mg(e){return(mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bg=function(){var e=i,t=yy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=mg(n),t=(e=r?(e=mg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==dg(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",e;throw new TypeError("Cannot call a class as a function")}return yg((e=i).prototype,[{key:"destroy",value:function(){gg(mg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof pg)return pg.toJsonParameters(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wg(e){return(wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xg(){return(xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pg(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Sg(e,t){return(Sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Og(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pg(e){return(Pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Eg=function(){var e=i,t=wy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Sg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Pg(n),t=(e=r?(e=Pg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===wg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Og(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).getFeatureMode="SPATIAL",t.geometry=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=Bt.CONTAIN,L.extend(Og(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){var t,n=s.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:e.spatialQueryMode};return e.fields&&((t=new vy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),L.toJSON(n)}}],_g((t=i).prototype,[{key:"destroy",value:function(){xg(Pg(i.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;0<e.fields.length;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}]),_g(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kg(e){return(kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jg(){return(jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tg(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Cg(e,t){return(Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tg(e){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ag=function(){var e=i,t=yy;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Tg(n),t=(e=r?(e=Tg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==kg(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",e;throw new TypeError("Cannot call a class as a function")}return Mg((e=i).prototype,[{key:"destroy",value:function(){jg(Tg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Eg.toJsonParameters(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ig((vv=Lg).prototype,[{key:"getFeaturesByIDs",value:function(e,t,n){new Ry(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n}).processAsync(e)}},{key:"getFeaturesByBounds",value:function(e,t,n){new ag(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"getFeaturesByBuffer",value:function(e,t,n){new bg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"getFeaturesBySQL",value:function(e,t,n){new Xy(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"getFeaturesByGeometry",value:function(e,t,n){new Ag(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"editFeatures",value:function(e,t){var n,r,o;e&&e.dataSourceName&&e.dataSetName&&(o=this.url,n=e.dataSourceName,r=e.dataSetName,o=L.urlPathAppend(o,"datasources/"+n+"/datasets/"+r),new uy(o,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e))}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(vv,"prototype",{writable:!1});var Rg=Lg;function Lg(e,t){if(!(this instanceof Lg))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function Ng(e){return(Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bg(e,t){return(Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fg(e){return(Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gg=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Fg(n),t=(e=r?(e=Fg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Ng(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._featureService=new Rg(e,t),n;throw new TypeError("Cannot call a class as a function")}return Dg((e=i).prototype,[{key:"getFeaturesByIDs",value:function(e,t,n){e=this._processParams(e),this._featureService.getFeaturesByIDs(e,t,n)}},{key:"getFeaturesByBounds",value:function(e,t,n){e=this._processParams(e),this._featureService.getFeaturesByBounds(e,t,n)}},{key:"getFeaturesByBuffer",value:function(e,t,n){e=this._processParams(e),this._featureService.getFeaturesByBuffer(e,t,n)}},{key:"getFeaturesBySQL",value:function(e,t,n){e=this._processParams(e),this._featureService.getFeaturesBySQL(e,t,n)}},{key:"getFeaturesByGeometry",value:function(e,t,n){e=this._processParams(e),this._featureService.getFeaturesByGeometry(e,t,n)}},{key:"editFeatures",value:function(e,t){var n,r,o;e&&e.dataSourceName&&e.dataSetName&&(o=this.url,n=e.dataSourceName,r=e.dataSetName,o=L.urlPathAppend(o,"datasources/"+n+"/datasets/"+r),new uy(o,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(this._processParams(e)))}},{key:"_processParams",value:function(e){var t,n;return e?(t=this,e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex||0,e.toIndex=0===e.toIndex?0:e.toIndex||-1,e.bounds&&(e.bounds=_.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof l().LngLatBounds?(e.geometry=_.toSuperMapPolygon(e.geometry),e.geometry.SRID=4326):e.geometry instanceof l().Point?e.geometry=new j(e.geometry.x,e.geometry.y):e.geometry instanceof l().LngLat?(e.geometry=new j(e.geometry.lng,e.geometry.lat),e.geometry.SRID=4326):e.geometry instanceof $||(e.geometry=_.toSuperMapGeometry(e.geometry))),e.features&&(n=[],_.isArray(e.features)?e.features.map(function(e){return n.push(t._createServerFeature(e)),n}):n.push(t._createServerFeature(e.features)),e.features=n),e):{}}},{key:"_createServerFeature",value:function(e){var t,n={},r=[],o=[],i=e.properties;for(t in i)r.push(t),o.push(i[t]);return n.fieldNames=r,n.fieldValues=o,e.id&&(n.id=e.id),n.geometry=_.toSuperMapGeometry(e),n}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zg(e){return(zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vg(){return(Vg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hg(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Wg(e,t){return(Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hg(e){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xg=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wg(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Hg(n),t=(e=r?(e=Hg(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===zg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yg(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).datasource=null,e.dataset=null,t&&L.extend(Yg(e),t),e.CLASS_NAME="SuperMap.GetFieldsService",e;throw new TypeError("Cannot call a class as a function")}return Ug((e=i).prototype,[{key:"destroy",value:function(){Vg(Hg(i.prototype),"destroy",this).call(this),this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){this.url=L.urlPathAppend(this.url,"datasources/".concat(this.datasource,"/datasets/").concat(this.dataset,"/fields")),this.request({method:"GET",data:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}qg((vv=Zg).prototype,[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}]),Object.defineProperty(vv,"prototype",{writable:!1});var Jg=Zg;function Zg(e){if(!(this instanceof Zg))throw new TypeError("Cannot call a class as a function");this.datasource=null,this.dataset=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"}function Kg(e){return(Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $g(e,t){return($g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ev(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tv(e){return(tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nv=function(){var e=i,t=Jg;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),$g(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=tv(n),t=(e=r?(e=tv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Kg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ev(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).fieldName=null,t.statisticMode=null,e&&L.extend(ev(t),e),t.CLASS_NAME="SuperMap.FieldStatisticsParameters",t;throw new TypeError("Cannot call a class as a function")}return Qg((e=i).prototype,[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rv(e){return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iv(){return(iv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uv(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function av(e,t){return(av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uv(e){return(uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lv=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&av(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=uv(n),t=(e=r?(e=uv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===rv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sv(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).datasource=null,e.dataset=null,e.field=null,e.statisticMode=null,t&&L.extend(sv(e),t),e.CLASS_NAME="SuperMap.FieldStatisticService",e;throw new TypeError("Cannot call a class as a function")}return ov((e=i).prototype,[{key:"destroy",value:function(){iv(uv(i.prototype),"destroy",this).call(this),this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=L.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}cv((vv=hv).prototype,[{key:"getFields",value:function(e,t){new Xg(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(t,e){var n,r,o;t instanceof nv&&(n=this,r=t.fieldName,(o=t.statisticMode)&&!Array.isArray(o)&&(o=[o]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=e,o.forEach(function(e){n.currentStatisticResult[e]=null,n._fieldStatisticRequest(t.datasource,t.dataset,r,e)}))}},{key:"_fieldStatisticRequest",value:function(e,t,n,r){new lv(this.url,{eventListeners:{scope:this,processCompleted:this._processCompleted.bind(this),processFailed:this._statisticsCallback},datasource:e,dataset:t,field:n,statisticMode:r,crossOrigin:this.options.crossOrigin,headers:this.options.headers}).processAsync()}},{key:"_processCompleted",value:function(e,t){var n,r=!0,e=e.result;for(n in this.currentStatisticResult&&null==this.currentStatisticResult[e.mode]&&(this.currentStatisticResult[e.mode]=e.result),this.currentStatisticResult)if(null==this.currentStatisticResult[n]){r=!1;break}r&&this._statisticsCallback({result:this.currentStatisticResult,options:t})}}]),Object.defineProperty(vv,"prototype",{writable:!1});var fv=hv;function hv(e,t){if(!(this instanceof hv))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function pv(e){return(pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yv(e,t){return(yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gv(e){return(gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vv=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yv(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=gv(n),t=(e=r?(e=gv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==pv(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._fieldService=new fv(e,t),n;throw new TypeError("Cannot call a class as a function")}return dv((e=i).prototype,[{key:"getFields",value:function(e,t){this._fieldService.getFields(e,t)}},{key:"getFieldStatisticsInfo",value:function(e,t){this._fieldService.getFieldStatisticsInfo(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mv((Av=wv).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}]),Object.defineProperty(Av,"prototype",{writable:!1});var bv=wv;function wv(e){if(!(this instanceof wv))throw new TypeError("Cannot call a class as a function");this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,L.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}function _v(e){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sv(){return(Sv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ev(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ov(e,t){return(Ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ev(e){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kv=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ov(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ev(n),t=(e=r?(e=Ev(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===_v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pv(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).datasetName=null,e.dataSourceName=null,e.datasetType=null,e.X=null,e.Y=null,t&&L.extend(Pv(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.GetGridCellInfosService",e;throw new TypeError("Cannot call a class as a function")}return xv((e=i).prototype,[{key:"destroy",value:function(){Sv(Ev(i.prototype),"destroy",this).call(this);this.X=null,this.Y=null,this.datasetName=null,this.dataSourceName=null,this.datasetType=null}},{key:"processAsync",value:function(e,t){e instanceof bv&&(L.extend(this,e),this.url=L.urlPathAppend(this.url,"datasources/".concat(this.dataSourceName,"/datasets/").concat(this.datasetName)),this.queryRequest(this.getDatasetInfoCompleted.bind(this),this.getDatasetInfoFailed.bind(this),t))}},{key:"queryRequest",value:function(n,r,o){var i=++this.eventCount,t={scope:this,processCompleted:function(e){if(i===e.result.eventId&&o)return delete e.result.eventId,o(e),this.events&&this.events.un(t),!1},processFailed:function(e){if((i===e.error.eventId||i===e.eventId)&&o)return o(e),this.events&&this.events.un(t),!1}};this.events.on(t),this.request({method:"GET",data:null,scope:this,success:function(e,t){e.eventId=i,n(e,t,o)},failure:function(e,t){e.error&&(e.error.eventId=i),e.eventId=i,r(e,t)}})}},{key:"getDatasetInfoCompleted",value:function(e,t,n){e=L.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos(n)}},{key:"queryGridInfos",value:function(e){var t=this;t.url=L.urlPathAppend(t.url,"GRID"==t.datasetType?"gridValue":"imageValue"),null!=t.X&&null!=t.Y&&(t.url=L.urlAppend(t.url,"x=".concat(t.X,"&y=").concat(t.Y))),t.queryRequest(t.serviceProcessCompleted.bind(t),t.serviceProcessFailed.bind(t),e)}},{key:"getDatasetInfoFailed",value:function(e,t){this.serviceProcessFailed(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mv(e){return(Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cv(e,t){return(Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tv(e){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Av=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cv(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Tv(n),t=(e=r?(e=Tv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Mv(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._gridCellQueryService=new kv(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return jv((e=i).prototype,[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;this._gridCellQueryService.processAsync(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Iv(e){return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lv(e,t){return(Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e){return(Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dv=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lv(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Nv(n),t=(e=r?(e=Nv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Iv(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoprocessingService",e.headers={},e.crossOrigin=!0,e.eventCount=0,e;throw new TypeError("Cannot call a class as a function")}return Rv((e=i).prototype,[{key:"getTools",value:function(e){this._processAsync({url:"".concat(this.url,"/list"),callback:e})}},{key:"getTool",value:function(e,t){this._processAsync({url:"".concat(this.url,"/").concat(e),callback:t})}},{key:"execute",value:function(e,t,n,r){t={parameter:t=t||null,environment:n=n||null};this._processAsync({url:"".concat(this.url,"/").concat(e,"/execute"),executeParamter:t,callback:r})}},{key:"submitJob",value:function(e,t,n,r){t=t||null,n=n||null;t=JSON.stringify({parameter:t,environments:n});this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs"),method:"POST",callback:r,params:t})}},{key:"waitForJobCompletion",value:function(e,t,n,r){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(t,"/jobs/").concat(e),serviceProcessCompleted:function(e,t){var n=e.state.runState;switch(t.statusCallback&&t.statusCallback(n),n){case"FINISHED":clearInterval(i),o.events.triggerEvent("processCompleted",{result:e,options:t});break;case"FAILED":case"CANCELED":clearInterval(i),o.events.triggerEvent("processFailed",{result:e,options:t})}},callback:r})},n.interval)}},{key:"getJobInfo",value:function(e,t,n){this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t),callback:n})}},{key:"cancelJob",value:function(e,t,n){this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/cancel"),callback:n})}},{key:"getJobs",value:function(e,t){var n="".concat(this.url,"/jobs");e&&(n="".concat(this.url,"/").concat(e,"/jobs")),this._processAsync({url:n,callback:t})}},{key:"getResults",value:function(e,t,n,r){e="".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/results");n&&(e="".concat(e,"/").concat(n)),this._processAsync({url:e,callback:r})}},{key:"_processAsync",value:function(e){var t=e.url,n=e.method,r=e.callback,o=e.paramter,i=e.serviceProcessCompleted,a=e.serviceProcessFailed,s=++this.eventCount,u={scope:this,processCompleted:function(e){if(s===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(u),!1},processFailed:function(e){if((s===e.error.eventId||s===e.eventId)&&r)return r(e),this.events&&this.events.un(u),!1}};this.events.on(u),this.request({url:t,method:n||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:function(e,t){e.eventId=s,(i||this.serviceProcessCompleted.bind(this))(e,t)},failure:function(e,t){e.error&&(e.error.eventId=s),e.eventId=s,(a||this.serviceProcessFailed.bind(this))(e,t)}})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bv(e){return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gv(e,t){return(Gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zv(e){return(zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uv=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gv(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=zv(n),t=(e=r?(e=zv(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Bv(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).headers={},e.crossOrigin=!0,e.withCredentials=!0,e.proxy=!0,e._geoprocessingJobsService=new Dv(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return Fv((e=i).prototype,[{key:"getTools",value:function(e){this._geoprocessingJobsService.getTools(e)}},{key:"getTool",value:function(e,t){this._geoprocessingJobsService.getTool(e,t)}},{key:"execute",value:function(e,t,n,r){this._geoprocessingJobsService.execute(e,t,n,r)}},{key:"submitJob",value:function(e,t,n,r){this._geoprocessingJobsService.submitJob(e,t,n,r)}},{key:"waitForJobCompletion",value:function(e,t,n,r){this._geoprocessingJobsService.waitForJobCompletion(e,t,n,r)}},{key:"getJobInfo",value:function(e,t,n){this._geoprocessingJobsService.getJobInfo(e,t,n)}},{key:"cancelJob",value:function(e,t,n){this._geoprocessingJobsService.cancelJob(e,t,n)}},{key:"getJobs",value:function(e,t){this._geoprocessingJobsService.getJobs(e,t)}},{key:"getResults",value:function(e,t,n,r){this._geoprocessingJobsService.getResults(e,t,n,r)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Vv((b=Yv).prototype,[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}]),Object.defineProperty(b,"prototype",{writable:!1});var Wv=Yv;function Yv(e,t){if(!(this instanceof Yv))throw new TypeError("Cannot call a class as a function");if(!e)return this;this.memoryData=null,this.type=e,t&&L.extend(this,t),this.CLASS_NAME="SuperMap.Theme"}function Hv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t=new qv(e);return L.copy(t,e),t.backColor=u.fromJson(e.backColor),t.foreColor=u.fromJson(e.foreColor),t}}],Hv((w=qv).prototype,[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}]),Hv(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Xv=qv;function qv(e){if(!(this instanceof qv))throw new TypeError("Cannot call a class as a function");this.align=qt.BASELINECENTER,this.backColor=new u(255,255,255),this.foreColor=new u(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}function Jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new Kv,L.copy(t,e),t}}],Jv((w=Kv).prototype,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}]),Jv(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Zv=Kv;function Kv(e){if(!(this instanceof Kv))throw new TypeError("Cannot call a class as a function");this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new Xv,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}function Qv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t=new em;return L.copy(t,e),t.style=c.fromJson(e.style),t}}],Qv((w=em).prototype,[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}]),Qv(w,b),Object.defineProperty(w,"prototype",{writable:!1});var $v=em;function em(e){if(!(this instanceof em))throw new TypeError("Cannot call a class as a function");this.caption=null,this.style=new c,this.unique=null,this.visible=!0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}function tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new rm,L.copy(t,e),t}}],tm((w=rm).prototype,[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}]),tm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var nm=rm;function rm(e){if(!(this instanceof rm))throw new TypeError("Cannot call a class as a function");this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}function om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){if(e){var t=new am,n=e.styles;if(L.copy(t,e),t.defaultStyle=new Xv(e.defaultStyle),n){t.styles=[];for(var r=0,o=n.length;r<o;r++)t.styles.push(new Xv(n[r]))}return t}}}],om((w=am).prototype,[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,n=e.styles,r=n.length;t<r;t++)n[t].destroy();e.styles=null}}}]),om(w,b),Object.defineProperty(w,"prototype",{writable:!1});var im=am;function am(e){if(!(this instanceof am))throw new TypeError("Cannot call a class as a function");this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new Xv,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new lm,L.copy(t,e),t.uniformStyle=Xv.fromObj(e.uniformStyle),t.uniformMixedStyle=im.fromObj(e.uniformMixedStyle),t}}],sm((w=lm).prototype,[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}]),sm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var um=lm;function lm(e){if(!(this instanceof lm))throw new TypeError("Cannot call a class as a function");this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new Xv,this.uniformMixedStyle=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new hm,L.copy(t,e),t}}],cm((w=hm).prototype,[{key:"destroy",value:function(){this.isAlongLine=null,this.alongLineDirection=null,this.angleFixed=null,this.repeatedLabelAvoided=null,this.repeatIntervalFixed=null,this.labelRepeatInterval=null}}]),cm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var fm=hm;function hm(e){if(!(this instanceof hm))throw new TypeError("Cannot call a class as a function");this.isAlongLine=!0,this.alongLineDirection=Jt.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return(t=new ym).labelBackShape=e.labelBackShape,t.backStyle=c.fromJson(e.backStyle),t}}],pm((w=ym).prototype,[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}]),pm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var dm=ym;function ym(e){if(!(this instanceof ym))throw new TypeError("Cannot call a class as a function");this.labelBackShape=Zt.NONE,this.backStyle=new c,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}function gm(e){return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mm(){return(mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_m(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function bm(e,t){return(bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _m(e){return(_m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xm=function(){var e=f,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),bm(e,t);n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=_m(n),t=(e=r?(e=_m(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===gm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wm(t)};function f(e){var t;if(this instanceof f)return(t=o.call(this,"LABEL",e)).alongLine=new fm,t.background=new dm,t.items=null,t.uniqueItems=null,t.labelExpression=null,t.labelOverLengthMode=Kt.NONE,t.matrixCells=null,t.maxLabelLength=256,t.numericPrecision=0,t.offset=new nm,t.overlapAvoided=!0,t.rangeExpression=null,t.uniqueExpression=null,t.smallGeometryLabeled=!1,t.text=new um,t.textSpace=0,e&&L.extend(wm(t),e),t.CLASS_NAME="SuperMap.ThemeLabel",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){if(e){var t=new f,n=e.items,r=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,L.copy(t,e),t.alongLine=fm.fromObj(e),t.background=dm.fromObj(e),n){t.items=[];for(var i=0,a=n.length;i<a;i++)t.items.push(Zv.fromObj(n[i]))}if(r){t.uniqueItems=[];for(var s=0,u=r.length;s<u;s++)t.uniqueItems.push($v.fromObj(r[s]))}if(o){t.matrixCells=[];for(var l=0,c=o.length;l<c;l++);}return t.offset=nm.fromObj(e),t.text=um.fromObj(e),t}}}],vm((t=f).prototype,[{key:"destroy",value:function(){mm(_m(f.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.items){for(var t=0,n=e.items,r=n.length;t<r;t++)n[t].destroy();e.items=null}if(e.uniqueItems){for(var o=0,i=e.uniqueItems,a=i.length;o<a;o++)i[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return L.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}]),vm(t,e),Object.defineProperty(t,"prototype",{writable:!1}),f}();function Sm(e){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pm(){return(Pm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mm(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Em(e,t){return(Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function km(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mm(e){return(Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jm=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Em(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Mm(n),t=(e=r?(e=Mm(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Sm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return km(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"UNIQUE",e)).defaultStyle=new c,t.items=null,t.uniqueExpression=null,t.colorGradientType=Xt.YELLOW_RED,e&&L.extend(km(t),e),t.CLASS_NAME="SuperMap.ThemeUnique",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;L.extend(t,e),t.items=[],t.defaultStyle=c.fromJson(e.defaultStyle);for(var o=0;o<r;o++)t.items.push($v.fromObj(n[o]));return t}}],Om((t=i).prototype,[{key:"destroy",value:function(){Pm(Mm(i.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(0<e.items.length)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=L.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}]),Om(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new Am,L.copy(t,e),t.axesColor=u.fromJson(e.axesColor),t.axesTextStyle=Xv.fromObj(e.axesTextStyle),t}}],Cm((w=Am).prototype,[{key:"destroy",value:function(){this.axesColor&&(this.axesColor.destroy(),this.axesColor=null),this.axesDisplayed=null,this.axesGridDisplayed=null,this.axesTextDisplayed=null,this.axesTextStyle&&(this.axesTextStyle.destroy(),this.axesTextStyle=null)}}]),Cm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Tm=Am;function Am(e){if(!(this instanceof Am))throw new TypeError("Cannot call a class as a function");this.axesColor=new u(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new Xv,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}function Im(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t=new Lm;return L.copy(t,e),t}}],Im((w=Lm).prototype,[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}]),Im(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Rm=Lm;function Lm(e){if(!(this instanceof Lm))throw new TypeError("Cannot call a class as a function");this.maxGraphSize=0,this.minGraphSize=0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}function Nm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t=new Bm;return L.copy(t,e),t.graphTextStyle=Xv.fromObj(e.graphTextStyle),t}}],Nm((w=Bm).prototype,[{key:"destroy",value:function(){this.graphTextDisplayed=null,this.graphTextFormat=null,this.graphTextStyle&&(this.graphTextStyle.destroy(),this.graphTextStyle=null)}}]),Nm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Dm=Bm;function Bm(e){if(!(this instanceof Bm))throw new TypeError("Cannot call a class as a function");this.graphTextDisplayed=!1,this.graphTextFormat=Ut.CAPTION,this.graphTextStyle=new Xv,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new zm,L.copy(t,e),t.uniformStyle=c.fromJson(e.uniformStyle),t}}],Fm((w=zm).prototype,[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}]),Fm(w,b),Object.defineProperty(w,"prototype",{writable:!1});var Gm=zm;function zm(e){if(!(this instanceof zm))throw new TypeError("Cannot call a class as a function");this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new c,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}function Um(e){return(Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wm(){return(Wm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xm(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ym(e,t){return(Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xm(e){return(Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qm=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Ym(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Xm(n),t=(e=r?(e=Xm(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Um(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hm(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"GRAPH",e)).barWidth=0,t.graduatedMode=Yt.CONSTANT,t.graphAxes=new Tm,t.graphSize=new Rm,t.graphSizeFixed=!1,t.graphText=new Dm,t.graphType=Vt.AREA,t.graphAxesTextDisplayMode=Wt.NONE,t.items=null,t.memoryKeys=null,t.negativeDisplayed=!1,t.offset=new nm,t.overlapAvoided=!0,t.roseAngle=0,t.startAngle=0,e&&L.extend(Hm(t),e),t.CLASS_NAME="SuperMap.ThemeGraph",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;L.copy(t,e),t.items=[],t.graphAxes=Tm.fromObj(e),t.graphSize=Rm.fromObj(e),t.graphText=Dm.fromObj(e),t.offset=nm.fromObj(e);for(var o=0;o<r;o++)t.items.push(Gm.fromObj(n[o]));return t}}],Vm((t=i).prototype,[{key:"destroy",value:function(){Wm(Xm(i.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var t=0,n=e.items,r=n.length;t<r;t++)n[t].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return L.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}]),Vm(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Jm(e){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Km(e,t){return(Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $m(e){return($m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e0=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Km(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$m(n),t=(e=r?(e=$m(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Jm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qm(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"DOTDENSITY",e)).dotExpression=null,t.style=new c,t.value=null,e&&L.extend(Qm(t),e),t.CLASS_NAME="SuperMap.ThemeDotDensity",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){var t;if(e)return t=new i,L.copy(t,e),t.style=c.fromJson(e.style),t}}],Zm((t=i).prototype,[{key:"destroy",value:function(){this.dotExpression=null,this.value=null,this.style&&(this.style.destroy(),this.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}]),Zm(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function t0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new r0,L.copy(t,e),t.negativeStyle=c.fromJson(e.negativeStyle),t.positiveStyle=c.fromJson(e.positiveStyle),t.zeroStyle=c.fromJson(e.zeroStyle),t}}],t0((w=r0).prototype,[{key:"destroy",value:function(){this.negativeDisplayed=null,this.negativeStyle=null,this.positiveStyle=null,this.zeroDisplayed=null,this.zeroStyle=null}}]),t0(w,b),Object.defineProperty(w,"prototype",{writable:!1});var n0=r0;function r0(e){if(!(this instanceof r0))throw new TypeError("Cannot call a class as a function");this.negativeDisplayed=!1,this.negativeStyle=new c,this.positiveStyle=new c,this.zeroDisplayed=!1,this.zeroStyle=new c,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}function o0(e){return(o0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a0(){return(a0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l0(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function s0(e,t){return(s0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l0(e){return(l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c0=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s0(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=l0(n),t=(e=r?(e=l0(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u0(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"GRADUATEDSYMBOL",e)).baseValue=0,t.expression=null,t.graduatedMode=Yt.CONSTAN,t.offset=new nm,t.style=new n0,e&&L.extend(u0(t),e),t.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){var t;if(e)return t=new i,L.copy(t,e),t.offset=nm.fromObj(e),t.style=n0.fromObj(e),t}}],i0((t=i).prototype,[{key:"destroy",value:function(){a0(l0(i.prototype),"destroy",this).call(this);this.expression=null,this.graduatedMode=Yt.CONSTANT,this.offset&&(this.offset.destroy(),this.offset=null),this.style&&(this.style.destroy(),this.style=null)}},{key:"toJSON",value:function(){return L.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}]),i0(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function f0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}b=[{key:"fromObj",value:function(e){var t;if(e)return t=new p0,L.copy(t,e),t.style=c.fromJson(e.style),t}}],f0((w=p0).prototype,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}]),f0(w,b),Object.defineProperty(w,"prototype",{writable:!1});var h0=p0;function p0(e){if(!(this instanceof p0))throw new TypeError("Cannot call a class as a function");this.caption=null,this.end=0,this.start=0,this.style=new c,this.visible=!0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}function d0(e){return(d0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g0(){return(g0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b0(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function v0(e,t){return(v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b0(e){return(b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w0=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),v0(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=b0(n),t=(e=r?(e=b0(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===d0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m0(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"RANGE",e)).precision="1.0E-12",t.items=null,t.rangeExpression=null,t.rangeMode=Ht.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Xt.YELLOW_RED,e&&L.extend(m0(t),e),t.CLASS_NAME="SuperMap.ThemeRange",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){if(e){var t=new i,n=(L.copy(t,e),e.items),r=n?n.length:0;t.items=[];for(var o=0;o<r;o++)t.items.push(h0.fromObj(n[o]));return t}}}],y0((t=i).prototype,[{key:"destroy",value:function(){g0(b0(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(0<e.items.length)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}]),y0(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_0((b=S0).prototype,[{key:"destroy",value:function(){L.reset(this)}},{key:"fromJson",value:function(e){L.extend(this,e=e||{});e=this.bounds;e&&(this.bounds=new O(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}]),Object.defineProperty(b,"prototype",{writable:!1});var x0=S0;function S0(e){if(!(this instanceof S0))throw new TypeError("Cannot call a class as a function");e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,L.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"}function O0(e){return(O0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E0(){return(E0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M0(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function k0(e,t){return(k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M0(e){return(M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j0=function(){var e=i,t=x0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k0(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=M0(n),t=(e=r?(e=M0(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==O0(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e=e||{})).completeLineSymbolDisplayed=null,e.maxScale=null,e.minScale=null,e.minVisibleGeometrySize=null,e.opaqueRate=null,e.symbolScalable=null,e.symbolScale=null,e.overlapDisplayed=null,e.overlapDisplayedOptions=null,e.CLASS_NAME="SuperMap.UGCMapLayer",e;throw new TypeError("Cannot call a class as a function")}return P0((e=i).prototype,[{key:"destroy",value:function(){E0(M0(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"fromJson",value:function(e){E0(M0(i.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return E0(M0(i.prototype),"toServerJSONObject",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function C0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}C0((w=A0).prototype,[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){return L.copyAttributes({},this)}}]),Object.defineProperty(w,"prototype",{writable:!1});var T0=A0;function A0(e){if(!(this instanceof A0))throw new TypeError("Cannot call a class as a function");this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"}function I0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}I0((b=L0).prototype,[{key:"destroy",value:function(){L.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}]),Object.defineProperty(b,"prototype",{writable:!1});var R0=L0;function L0(e){if(!(this instanceof L0))throw new TypeError("Cannot call a class as a function");e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,L.extend(this,e);e=this.bounds;e&&(this.bounds=new O(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}function N0(e){return(N0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B0(){return(B0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G0(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function F0(e,t){return(F0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G0(e){return(G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z0=function(){var e=i,t=j0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F0(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=G0(n),t=(e=r?(e=G0(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==N0(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e=e||{})).datasetInfo=null,e.displayFilter=null,e.joinItems=null,e.representationField=null,e.ugcLayerType=null,e.CLASS_NAME="SuperMap.UGCSubLayer",e;throw new TypeError("Cannot call a class as a function")}return D0((e=i).prototype,[{key:"fromJson",value:function(e){if(B0(G0(i.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new R0(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],n=0;n<this.joinItems.length;n++)t[n]=new T0(this.joinItems[n]);this.joinItems=t}}},{key:"destroy",value:function(){B0(G0(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"toServerJSONObject",value:function(){var e=B0(G0(i.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],n=0;n<e.joinItems.length;n++)e.joinItems[n].toServerJSONObject&&(t[n]=e.joinItems[n].toServerJSONObject());e.joinItems=t}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function U0(e){return(U0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W0(){return(W0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H0(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Y0(e,t){return(Y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H0(e){return(H0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X0=function(){var e=i,t=z0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y0(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=H0(n),t=(e=r?(e=H0(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==U0(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e=e||{})).theme=null,e.themeElementPosition=null,e.CLASS_NAME="SuperMap.ServerTheme",e;throw new TypeError("Cannot call a class as a function")}return V0((e=i).prototype,[{key:"destroy",value:function(){W0(H0(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"fromJson",value:function(e){W0(H0(i.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=xm.fromObj(t);break;case"UNIQUE":this.theme=jm.fromObj(t);break;case"GRAPH":this.theme=qm.fromObj(t);break;case"DOTDENSITY":this.theme=e0.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=c0.fromObj(t);break;case"RANGE":this.theme=w0.fromObj(t)}this.themeElementPosition&&(this.themeElementPosition=new ie(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=W0(H0(i.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function q0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}q0((w=Z0).prototype,[{key:"destroy",value:function(){L.reset(this)}},{key:"toServerJSONObject",value:function(){return L.copyAttributes({},this)}}]),Object.defineProperty(w,"prototype",{writable:!1});var J0=Z0;function Z0(e){if(!(this instanceof Z0))throw new TypeError("Cannot call a class as a function");e=e||{},this.elevation=null,this.color=null,L.extend(this,e);e=this.color;e&&(this.color=new u(e.red,e.green,e.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}function K0(e){return(K0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $0(){return($0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function eb(e,t){return(eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tb(e){return(tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nb=function(){var e=s,t=z0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eb(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=tb(n),t=(e=r?(e=tb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==K0(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e){if(this instanceof s)return(e=o.call(this,e=e||{})).colorDictionarys=null,e.brightness=null,e.colorGradientType=null,e.colors=null,e.contrast=null,e.dashStyle=null,e.gridType=null,e.horizontalSpacing=null,e.sizeFixed=null,e.solidStyle=null,e.specialColor=null,e.specialValue=null,e.specialValueTransparent=null,e.verticalSpacing=null,e.CLASS_NAME="SuperMap.Grid",e;throw new TypeError("Cannot call a class as a function")}return Q0((e=s).prototype,[{key:"destroy",value:function(){$0(tb(s.prototype),"destroy",this).call(this),L.reset(this)}},{key:"fromJson",value:function(e){if($0(tb(s.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new u(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,n,r=[];for(n in this.colors)t=this.colors[n],r.push(new u(t.red,t.green,t.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new c(this.dashStyle)),this.solidStyle&&(this.solidStyle=new c(this.solidStyle)),this.colorDictionary){var o,i,a=[];for(i in this.colorDictionary)o=this.colorDictionary[i],a.push(new J0({elevation:i,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=$0(tb(s.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),s}();function rb(e){return(rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ob(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ib(){return(ib="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ab(e,t){return(ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sb(e){return(sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ub=function(){var e=i,t=z0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ab(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=sb(n),t=(e=r?(e=sb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==rb(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e=e||{})).brightness=null,e.colorSpaceType=null,e.contrast=null,e.displayBandIndexes=null,e.transparent=null,e.transparentColor=null,e.transparentColorTolerance=null,e.CLASS_NAME="SuperMap.Image",e;throw new TypeError("Cannot call a class as a function")}return ob((e=i).prototype,[{key:"destroy",value:function(){ib(sb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"fromJson",value:function(e){ib(sb(i.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new u(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return ib(sb(i.prototype),"toServerJSONObject",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function lb(e){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fb(){return(fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function hb(e,t){return(hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pb(e){return(pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var db=function(){var e=i,t=z0;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hb(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=pb(n),t=(e=r?(e=pb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==lb(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e=e||{})).style=null,e.CLASS_NAME="SuperMap.Vector",e;throw new TypeError("Cannot call a class as a function")}return cb((e=i).prototype,[{key:"destroy",value:function(){fb(pb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"fromJson",value:function(e){fb(pb(i.prototype),"fromJson",this).call(this,e);e=this.style;e&&(this.style=new c(e))}},{key:"toServerJSONObject",value:function(){var e=fb(pb(i.prototype),"toServerJSONObject",this).call(this);return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yb(e){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vb(){return(vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function mb(e,t){return(mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wb(e){return(wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _b=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mb(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=wb(n),t=(e=r?(e=wb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===yb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bb(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).isTempLayers=!1,t&&L.extend(bb(e),t),e.CLASS_NAME="SuperMap.GetLayersInfoService",e;throw new TypeError("Cannot call a class as a function")}return gb((e=i).prototype,[{key:"destroy",value:function(){vb(wb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(){this.isTempLayers||(this.url=L.urlPathAppend(this.url,"layers")),this.request({method:"GET",params:null,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e,t){var n,r=(n=(e=L.transformResult(e))&&0<e.length?e[0].subLayers.layers:null)?n.length:0;this.handleLayers(r,n),this.events.triggerEvent("processCompleted",{result:e[0],options:t})}},{key:"handleLayers",value:function(e,t){var n;if(e)for(var r=0;r<e;r++)if(t[r].subLayers&&t[r].subLayers.layers&&0<t[r].subLayers.layers.length)this.handleLayers(t[r].subLayers.layers.length,t[r].subLayers.layers);else switch(t[r].ugcLayerType){case"THEME":(n=new X0).fromJson(t[r]),t[r]=n;break;case"GRID":(n=new nb).fromJson(t[r]),t[r]=n;break;case"IMAGE":(n=new ub).fromJson(t[r]),t[r]=n;break;case"VECTOR":(n=new db).fromJson(t[r]),t[r]=n}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xb(e){return(xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ob(){return(Ob="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Pb(e,t){return(Pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Eb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kb(e){return(kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mb=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pb(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=kb(n),t=(e=r?(e=kb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===xb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eb(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t&&L.extend(Eb(e),t),e.CLASS_NAME="SuperMap.SetLayerInfoService",e;throw new TypeError("Cannot call a class as a function")}return Sb((e=i).prototype,[{key:"destroy",value:function(){Ob(kb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(e){e&&(e=L.toJSON(e),this.request({method:"PUT",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jb(e){return(jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tb(){return(Tb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ab(e,t){return(Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ib(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rb(e){return(Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lb=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ab(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Rb(n),t=(e=r?(e=Rb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===jb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ib(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).resourceID=null,e.isTempLayers=!1,t&&L.extend(Ib(e),t),e.CLASS_NAME="SuperMap.SetLayersInfoService",e;throw new TypeError("Cannot call a class as a function")}return Cb((e=i).prototype,[{key:"destroy",value:function(){Tb(Rb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,n,r=[],o=this,i="",i=o.isTempLayers?(o.url=L.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),"PUT"):(o.url=L.urlPathAppend(o.url,"tempLayersSet"),"POST"),a=(e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]),e.subLayers.layers),s=a.length;for(n in a){if("GRID"===a[n].ugcLayerType){var u,l={},c=a[n].colorDictionarys;for(u in c)l[c[u].elevation]=c[u].color}a[n].colorDictionary=l,delete a[n].colorDictionarys}for(var f=0;f<s;f++)a[f].toJsonObject?r.push(a[f].toJsonObject()):r.push(a[f]);(t=L.extend(t,e)).subLayers={layers:r},t.object=null;e=L.toJSON([t]);o.request({method:i,data:e,scope:o,success:o.serviceProcessCompleted,failure:o.serviceProcessFailed})}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Nb((b=Bb).prototype,[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],n=0,r=this.layerStatusList.length;n<r;n++)t.push(this.layerStatusList[n].toJSON());return(e=e+t+"]")+"}"}}]),Object.defineProperty(b,"prototype",{writable:!1});var Db=Bb;function Bb(e){if(!(this instanceof Bb))throw new TypeError("Cannot call a class as a function");this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&L.extend(this,e)}function Fb(e){return(Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zb(){return(zb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wb(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Ub(e,t){return(Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wb(e){return(Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yb=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ub(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Wb(n),t=(e=r?(e=Wb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Fb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vb(t)};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t)).lastparams=null,n.mapUrl=e,t&&L.extend(Vb(n),t),n.CLASS_NAME="SuperMap.SetLayerStatusService",n;throw new TypeError("Cannot call a class as a function")}return Gb((e=i).prototype,[{key:"destroy",value:function(){zb(Wb(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(e){var t,n;e instanceof Db&&((t=this).url=t.mapUrl,null==e.resourceID?(t.url=L.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed})):(t.url=L.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=L.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString()),n="[{",n+='"type":"UGC",',null!=e.layerStatusList&&0<e.layerStatusList.length&&(n+='"subLayers":'+e.toJSON()),n=(n+=',"visible":true,')+'"name":"'+this.getMapName(this.mapUrl)+'"',t.request({method:"PUT",data:n+="}]",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})))}},{key:"createTempLayerComplete",value:function(e){(e=L.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=(e="/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e).lastIndexOf("/");return e.substring(t+1,e.length)}},{key:"serviceProcessCompleted",value:function(e,t){null!=(e=L.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e,options:t})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Hb((w=qb).prototype,[{key:"getLayersInfo",value:function(e){new _b(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){var n,r;e&&(r=e.resourceID,n=e.tempLayerName,e=e.layerInfo,r)&&n&&(r=L.urlPathAppend(this.url,"tempLayersSet/"+r+"/"+n),new Mb(r,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e))}},{key:"setLayersInfo",value:function(e,t){var n,r;e&&(n=e.resourceID,r=!!e.isTempLayers&&e.isTempLayers,e=e.layersInfo,r&&!n||!e||new Lb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t},resourceID:n,isTempLayers:r}).processAsync(e))}},{key:"setLayerStatus",value:function(e,t){e&&new Yb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}]),Object.defineProperty(w,"prototype",{writable:!1});var Xb=qb;function qb(e,t){if(!(this instanceof qb))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function Jb(e){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kb(e,t){return(Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qb(e){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Qb(n),t=(e=r?(e=Qb(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Jb(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._layerInfoService=new Xb(e,t),n;throw new TypeError("Cannot call a class as a function")}return Zb((e=i).prototype,[{key:"getLayersInfo",value:function(e){this._layerInfoService.getLayersInfo(e)}},{key:"setLayerInfo",value:function(e,t){this._layerInfoService.setLayerInfo(e,t)}},{key:"setLayersInfo",value:function(e,t){this._layerInfoService.setLayersInfo(e,t)}},{key:"setLayerStatus",value:function(e,t){this._layerInfoService.setLayerStatus(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $b(e){return($b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t1(){return(t1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o1(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function n1(e,t){return(n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o1(e){return(o1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i1=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=o1(n),t=(e=r?(e=o1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===$b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r1(t)};function i(e,t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");(e=o.call(this,e,t)).projection=null,e.CLASS_NAME="SuperMap.MapService",t&&L.extend(r1(e),t);var n,t=r1(e);return t.projection&&(n=t.projection.split(":"))instanceof Array&&(2===n.length&&(t.url=L.urlAppend(t.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(n[1],'"}'))))),1===n.length)&&(t.url=L.urlAppend(t.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(n[0],'"}'))))),e.eventCount=0,e}return e1((e=i).prototype,[{key:"destroy",value:function(){t1(o1(i.prototype),"destroy",this).call(this);this.events&&(this.events.un(this.eventListeners),this.events.listeners=null,this.events.destroy(),this.events=null,this.eventListeners=null)}},{key:"processAsync",value:function(t){var n=++this.eventCount,r={scope:this,processCompleted:function(e){if(n===e.result.eventId&&t)return delete e.result.eventId,t(e),this.events&&this.events.un(r),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&t)return t(e),this.events&&this.events.un(r),!1}};this.events.on(r),this.request({method:"GET",scope:this,success:function(e,t){e.eventId=n,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=n),e.eventId=n,this.serviceProcessFailed(e,t)}})}},{key:"serviceProcessCompleted",value:function(e,t){var n=200<=(e=L.transformResult(e)).code&&e.code<300||0==e.code||304===e.code,n=e.code&&n;!e.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:e,options:t}):this.events.triggerEvent("processFailed",{error:e,options:t})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function a1(e){return(a1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u1(){return(u1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c1(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function l1(e,t){return(l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c1(e){return(c1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f1=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=c1(n),t=(e=r?(e=c1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==a1(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.TilesetsService",e;throw new TypeError("Cannot call a class as a function")}return s1((e=i).prototype,[{key:"destroy",value:function(){u1(c1(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){this.url&&(this.url=L.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function h1(e){return(h1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d1(e,t){return(d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y1(e){return(y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=y1(n),t=(e=r?(e=y1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==h1(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return o.call(this,e,t);throw new TypeError("Cannot call a class as a function")}return p1((e=i).prototype,[{key:"getMapInfo",value:function(e){new i1(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,projection:this.options.projection}).processAsync(e)}},{key:"getTilesets",value:function(e){new f1(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e}}).processAsync()}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function g1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}g1((C1=m1).prototype,[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}]),Object.defineProperty(C1,"prototype",{writable:!1});var v1=m1;function m1(e,t){if(!(this instanceof m1))throw new TypeError("Cannot call a class as a function");e&&(this.geometry=e,this.unit=Gt.METER,this.prjCoordSys=null,this.distanceMode=null,t&&L.extend(this,t),this.CLASS_NAME="SuperMap.MeasureParameters")}function b1(e){return(b1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _1(){return(_1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O1(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function x1(e,t){return(x1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O1(e){return(O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P1=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=O1(n),t=(e=r?(e=O1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===b1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S1(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).measureMode=Ft.DISTANCE,t&&L.extend(S1(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.MeasureService",e;throw new TypeError("Cannot call a class as a function")}return w1((e=i).prototype,[{key:"destroy",value:function(){_1(O1(i.prototype),"destroy",this).call(this),this.measureMode=null}},{key:"processAsync",value:function(e,t){var n,r,o,i,a;e instanceof v1&&(n=++this.eventCount,r={scope:this,processCompleted:function(e){if(n===e.result.eventId&&t)return delete e.result.eventId,t(e),this.events&&this.events.un(r),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&t)return t(e),this.events&&this.events.un(r),!1}},this.events.on(r),a=e.geometry)&&(this.url=L.urlPathAppend(this.url,this.measureMode===Ft.AREA?"area":"distance"),a=s.fromGeometry(a))&&(i=a.parts[0],a=a.points.splice(0,i),i=e.prjCoordSys?("object"===b1(e.prjCoordSys)?o='{"epsgCode"'+(i=e.prjCoordSys.projCode).substring(i.indexOf(":"),i.length)+"}":"string"==typeof e.prjCoordSys&&(o='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),{point2Ds:L.toJSON(a),unit:e.unit,prjCoordSys:o,distanceMode:e.distanceMode||"Geodesic"}):{point2Ds:L.toJSON(a),unit:e.unit,distanceMode:e.distanceMode||"Geodesic"},this.request({method:"GET",params:i,scope:this,success:function(e,t){e.eventId=n,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=n),e.eventId=n,this.serviceProcessFailed(e,t)}}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function E1(e){return(E1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M1(e,t){return(M1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j1(e){return(j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C1=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=j1(n),t=(e=r?(e=j1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==E1(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return o.call(this,e,t);throw new TypeError("Cannot call a class as a function")}return k1((e=i).prototype,[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,n){new P1(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,measureMode:t}).processAsync(this._processParam(e),n)}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof $||(e.geometry=_.toSuperMapGeometry(e.geometry)),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function T1(e){return(T1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I1(){return(I1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L1(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function R1(e,t){return(R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L1(e){return(L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N1=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=L1(n),t=(e=r?(e=L1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==T1(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).format=a.GEOJSON,e.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",e;throw new TypeError("Cannot call a class as a function")}return A1((e=i).prototype,[{key:"destroy",value:function(){I1(L1(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e,t){var n;(e=L.transformResult(e))&&this.format===a.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(n=this.toGeoJSONResult(e)),this.events.triggerEvent("processCompleted",{result:n=n||e,options:t})}},{key:"toGeoJSONResult",value:function(e){return null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function D1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}D1((x=F1).prototype,[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var B1=F1;function F1(e){if(!(this instanceof F1))throw new TypeError("Cannot call a class as a function");this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}function G1(e){return(G1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U1(){return(U1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W1(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function V1(e,t){return(V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W1(e){return(W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y1=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=W1(n),t=(e=r?(e=W1(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==G1(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",e;throw new TypeError("Cannot call a class as a function")}return z1((e=i).prototype,[{key:"destroy",value:function(){U1(W1(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof B1))return null;var t;if(this.url=L.urlPathAppend(this.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function H1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}H1((x=q1).prototype,[{key:"destroy",value:function(){this.returnEdgeFeatures=null,this.returnEdgeGeometry=null,this.returnEdgeIDs=null,this.returnNodeFeatures=null,this.returnNodeGeometry=null,this.returnNodeIDs=null,this.returnPathGuides=null,this.returnRoutes=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var X1=q1;function q1(e){if(!(this instanceof q1))throw new TypeError("Cannot call a class as a function");e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}function J1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}J1((x=K1).prototype,[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var Z1=K1;function K1(e){if(!(this instanceof K1))throw new TypeError("Cannot call a class as a function");e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new X1,L.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}function Q1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Q1((x=ew).prototype,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var $1=ew;function ew(e){if(!(this instanceof ew))throw new TypeError("Cannot call a class as a function");this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rw(){return(rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ow(e,t){return(ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iw(e){return(iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aw=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ow(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=iw(n),t=(e=r?(e=iw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==tw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",e;throw new TypeError("Cannot call a class as a function")}return nw((e=i).prototype,[{key:"destroy",value:function(){rw(iw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof $1&&(this.url=L.urlPathAppend(this.url,"weightmatrix"),e={parameter:L.toJSON(e.parameter),nodes:this.getJson(e.isAnalyzeById,e.nodes)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)0<o&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)0<i&&(n+=","),n+=t[i];return n+"]"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}sw((x=lw).prototype,[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null,this.type=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var uw=lw;function lw(e){if(!(this instanceof lw))throw new TypeError("Cannot call a class as a function");this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,L.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}function cw(e){return(cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hw(){return(hw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function pw(e,t){return(pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dw(e){return(dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yw=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pw(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=dw(n),t=(e=r?(e=dw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==cw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",e;throw new TypeError("Cannot call a class as a function")}return fw((e=i).prototype,[{key:"destroy",value:function(){hw(dw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof uw){var t;if(0===e.queryType)this.url=L.urlPathAppend(this.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;this.url=L.urlPathAppend(this.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gw((x=mw).prototype,[{key:"destroy",value:function(){this.event=null,this.expectFacilityCount=null,this.facilities=null,this.fromEvent=null,this.isAnalyzeById=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var vw=mw;function mw(e){if(!(this instanceof mw))throw new TypeError("Cannot call a class as a function");this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}function bw(e){return(bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _w(){return(_w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function xw(e,t){return(xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sw(e){return(Sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ow=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xw(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Sw(n),t=(e=r?(e=Sw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==bw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",e;throw new TypeError("Cannot call a class as a function")}return ww((e=i).prototype,[{key:"destroy",value:function(){_w(Sw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof vw&&(this.url=L.urlPathAppend(this.url,"closestfacility"),e={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:L.toJSON(e.parameter),event:L.toJSON(e.event),facilities:this.getJson(e.isAnalyzeById,e.facilities)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)0<o&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)0<i&&(n+=","),n+=t[i];return n+"]"}},{key:"toGeoJSONResult",value:function(e){var t;return e&&e.facilityPathList&&(t=new jn,e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e})),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Pw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Pw((x=kw).prototype,[{key:"destroy",value:function(){if(this.expectedSupplyCenterCount=null,this.isFromCenter=null,this.turnWeightField=null,this.weightName=null,this.supplyCenters){for(var e=0,t=this.supplyCenters,n=t.length;e<n;e++)t[e].destroy();this.supplyCenters=null}}}]),Object.defineProperty(x,"prototype",{writable:!1});var Ew=kw;function kw(e){if(!(this instanceof kw))throw new TypeError("Cannot call a class as a function");this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,L.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"}function Mw(e){return(Mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cw(){return(Cw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Aw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Tw(e,t){return(Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aw(e){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Iw=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Aw(n),t=(e=r?(e=Aw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Mw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindLocationService",e;throw new TypeError("Cannot call a class as a function")}return jw((e=i).prototype,[{key:"destroy",value:function(){Cw(Aw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof Ew&&(this.url=L.urlPathAppend(this.url,"location"),e={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:L.toJSON(e.mapParameter),supplyCenters:this.getCentersJson(e.supplyCenters)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getCentersJson",value:function(e){for(var t="[",n=e?e.length:0,r=0;r<n;r++)0<r&&(t+=","),t+=L.toJSON(e[r]);return t+"]"}},{key:"toGeoJSONResult",value:function(e){var t;return e?(t=new jn,e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e):null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Rw((x=Nw).prototype,[{key:"destroy",value:function(){this.centers=null,this.hasLeastTotalCost=null,this.isAnalyzeById=null,this.nodes=null,this.maxWeight=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var Lw=Nw;function Nw(e){if(!(this instanceof Nw))throw new TypeError("Cannot call a class as a function");this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}function Dw(e){return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fw(){return(Fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Gw(e,t){return(Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zw(e){return(zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uw=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gw(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=zw(n),t=(e=r?(e=zw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Dw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindMTSPPathsService",e;throw new TypeError("Cannot call a class as a function")}return Bw((e=i).prototype,[{key:"destroy",value:function(){Fw(zw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t,n;e instanceof Lw&&(t=this.getJson(e.isAnalyzeById,e.centers),n=this.getJson(e.isAnalyzeById,e.nodes),this.url=L.urlPathAppend(this.url,"mtsppath"),t={centers:t,nodes:n,parameter:L.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)0<o&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)0<i&&(n+=","),n+=t[i];return n+"]"}},{key:"toGeoJSONResult",value:function(e){var t;return e&&e.pathList?(t=new jn,e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e):null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Vw((x=Yw).prototype,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var Ww=Yw;function Yw(e){if(!(this instanceof Yw))throw new TypeError("Cannot call a class as a function");this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"}function Hw(e){return(Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qw(){return(qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zw(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Jw(e,t){return(Jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zw(e){return(Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kw=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jw(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Zw(n),t=(e=r?(e=Zw(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Hw(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindPathService",e;throw new TypeError("Cannot call a class as a function")}return Xw((e=i).prototype,[{key:"destroy",value:function(){qw(Zw(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof Ww&&(this.url=L.urlPathAppend(this.url,"path"),e={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:L.toJSON(e.parameter),nodes:this.getJson(e.isAnalyzeById,e.nodes)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)0<o&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)0<i&&(n+=","),n+=t[i];return n+"]"}},{key:"toGeoJSONResult",value:function(e){var t;return!e||!e.pathList||e.pathList.length<1?null:(t=new jn,e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Qw((x=e_).prototype,[{key:"destroy",value:function(){this.isAnalyzeById=null,this.isCenterMutuallyExclusive=null,this.centers=null,this.isFromCenter=null,this.weights=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var $w=e_;function e_(e){if(!(this instanceof e_))throw new TypeError("Cannot call a class as a function");this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}function t_(e){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r_(){return(r_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function o_(e,t){return(o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i_(e){return(i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a_=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=i_(n),t=(e=r?(e=i_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==t_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindServiceAreasService",e;throw new TypeError("Cannot call a class as a function")}return n_((e=i).prototype,[{key:"destroy",value:function(){r_(i_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof $w&&(this.url=L.urlPathAppend(this.url,"servicearea"),e={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:L.toJSON(e.parameter),centers:this.getJson(e.isAnalyzeById,e.centers),weights:this.getJson(!0,e.weights)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var o=0;o<r;o++)0<o&&(n+=","),n+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<r;i++)0<i&&(n+=","),n+=t[i];return n+"]"}},{key:"toGeoJSONResult",value:function(e){var t;return e&&e.serviceAreaList&&(t=new jn,e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e})),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function s_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}s_((x=l_).prototype,[{key:"destroy",value:function(){this.endNodeAssigned=null,this.isAnalyzeById=null,this.nodes=null,this.parameter&&(this.parameter.destroy(),this.parameter=null)}}]),Object.defineProperty(x,"prototype",{writable:!1});var u_=l_;function l_(e){if(!(this instanceof l_))throw new TypeError("Cannot call a class as a function");this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Z1,L.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}function c_(e){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h_(){return(h_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function p_(e,t){return(p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d_(e){return(d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y_=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=d_(n),t=(e=r?(e=d_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==c_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FindTSPPathsService",e;throw new TypeError("Cannot call a class as a function")}return f_((e=i).prototype,[{key:"destroy",value:function(){h_(d_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof u_&&(this.url=L.urlPathAppend(this.url,"tsppath"),e={parameter:L.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:this.getNodesJson(e)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getNodesJson",value:function(e){var t,n,r,o,i="";if(!1===e.isAnalyzeById){for(t="[",n=0,r=(o=e.nodes).length;n<r;n++)0<n&&(t+=","),t+='{"x":'+o[n].x+',"y":'+o[n].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,u=s.length,l=0;l<u;l++)0<l&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){var t;return e&&e.tspPathList?(t=new jn,e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e):null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function g_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}g_((x=m_).prototype,[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var v_=m_;function m_(e){if(!(this instanceof m_))throw new TypeError("Cannot call a class as a function");e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",L.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}function b_(e){return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function __(){return(__="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function x_(e,t){return(x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O_=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=S_(n),t=(e=r?(e=S_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==b_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",e;throw new TypeError("Cannot call a class as a function")}return w_((e=i).prototype,[{key:"destroy",value:function(){__(S_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t;e instanceof v_&&(t=this.parse(e),this.url=L.urlPathAppend(this.url,t),t=e.edgeWeight||null,this.request({method:"PUT",scope:this,data:t,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"parse",value:function(e){if(e){var t,n="";for(t in e)if(""!==e[t]&&"edgeWeight"!==e[t])switch(t){case"edgeId":n+="/edgeweight/"+e[t];break;case"fromNodeId":n+="/fromnode/"+e[t];break;case"toNodeId":n+="/tonode/"+e[t];break;case"weightField":n+="/weightfield/"+e[t]}return n}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function P_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}P_((x=k_).prototype,[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}]),Object.defineProperty(x,"prototype",{writable:!1});var E_=k_;function k_(e){if(!(this instanceof k_))throw new TypeError("Cannot call a class as a function");e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",L.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}function M_(e){return(M_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C_(){return(C_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function T_(e,t){return(T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A_(e){return(A_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I_=function(){var e=i,t=N1;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=A_(n),t=(e=r?(e=A_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==M_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",e;throw new TypeError("Cannot call a class as a function")}return j_((e=i).prototype,[{key:"destroy",value:function(){C_(A_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t;e instanceof E_&&(t=this.parse(e),this.url=L.urlPathAppend(this.url,t),t=e.turnNodeWeight||null,this.request({method:"PUT",scope:this,data:t,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"parse",value:function(e){if(e){var t,n="";for(t in e)if(""!==e[t]&&"turnNodeWeight"!==e[t])switch(t){case"nodeId":n+="/turnnodeweight/"+e[t];break;case"fromEdgeId":n+="/fromedge/"+e[t];break;case"toEdgeId":n+="/toedge/"+e[t];break;case"weightField":n+="/weightfield/"+e[t]}return n}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function R_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}R_((x=N_).prototype,[{key:"burstPipelineAnalyst",value:function(e,t){new Y1(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"computeWeightMatrix",value:function(e,t){new aw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"findClosestFacilities",value:function(e,t,n){new Ow(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"streamFacilityAnalyst",value:function(e,t,n){new yw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"findLocation",value:function(e,t,n){new Iw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"findPath",value:function(e,t,n){new Kw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"findTSPPaths",value:function(e,t,n){new y_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"findMTSPPaths",value:function(e,t,n){new Uw(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"findServiceAreas",value:function(e,t,n){new a_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"updateEdgeWeight",value:function(e,t){new O_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){new I_(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(x,"prototype",{writable:!1});var L_=N_;function N_(e,t){if(!(this instanceof N_))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function D_(e){return(D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F_(e,t){return(F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G_(e){return(G_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=G_(n),t=(e=r?(e=G_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==D_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._networkAnalystService=new L_(e,t),n;throw new TypeError("Cannot call a class as a function")}return B_((e=i).prototype,[{key:"burstPipelineAnalyst",value:function(e,t){e=this._processParams(e),this._networkAnalystService.burstPipelineAnalyst(e,t)}},{key:"computeWeightMatrix",value:function(e,t){e=this._processParams(e),this._networkAnalystService.computeWeightMatrix(e,t)}},{key:"findClosestFacilities",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findClosestFacilities(e,t,n)}},{key:"streamFacilityAnalyst",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.streamFacilityAnalyst(e,t,n)}},{key:"findLocation",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findLocation(e,t,n)}},{key:"findPath",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findPath(e,t,n)}},{key:"findTSPPaths",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findTSPPaths(e,t,n)}},{key:"findMTSPPaths",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findMTSPPaths(e,t,n)}},{key:"findServiceAreas",value:function(e,t,n){e=this._processParams(e),this._networkAnalystService.findServiceAreas(e,t,n)}},{key:"updateEdgeWeight",value:function(e,t){this._networkAnalystService.updateEdgeWeight(e,t)}},{key:"updateTurnNodeWeight",value:function(e,t){this._networkAnalystService.updateTurnNodeWeight(e,t)}},{key:"_processParams",value:function(n){var r,e;return n?(r=this,n.centers&&_.isArray(n.centers)&&n.centers.map(function(e,t){return n.centers[t]=r._toPointObject(e),n.centers[t]}),n.nodes&&_.isArray(n.nodes)&&n.nodes.map(function(e,t){return n.nodes[t]=r._toPointObject(e),n.nodes[t]}),n.event&&(n.event=r._toPointObject(n.event)),n.facilities&&_.isArray(n.facilities)&&n.facilities.map(function(e,t){return n.facilities[t]=r._toPointObject(e),n.facilities[t]}),n.parameter&&n.parameter.barrierPoints&&(e=n.parameter.barrierPoints,_.isArray(e)?e.map(function(e,t){return n.parameter[t]=r._toPointObject(e),n.parameter.barrierPoints[t]}):n.parameter.barrierPoints=[e instanceof l().LngLat?{x:e.lng,y:e.lat}:e]),n):{}}},{key:"_toPointObject",value:function(e){return _.isArray(e)?{x:e[0],y:e[1]}:e instanceof l().LngLat?{x:e.lng,y:e.lat}:e instanceof l().Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}z_((rS=V_).prototype,[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}]),Object.defineProperty(rS,"prototype",{writable:!1});var U_=V_;function V_(e){if(!(this instanceof V_))throw new TypeError("Cannot call a class as a function");this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}function W_(e){return(W_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H_(){return(H_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q_(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function X_(e,t){return(X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q_(e){return(q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J_=function(){var e=i,t=U_;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),X_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=q_(n),t=(e=r?(e=q_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==W_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",e;throw new TypeError("Cannot call a class as a function")}return Y_((e=i).prototype,[{key:"destroy",value:function(){H_(q_(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Z_(e){return(Z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q_(e,t){return(Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $_(e){return($_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ex=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q_(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$_(n),t=(e=r?(e=$_(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Z_(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",e;throw new TypeError("Cannot call a class as a function")}return K_((e=i).prototype,[{key:"destroy",value:function(){m.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){e instanceof J_&&(this.url=L.urlPathAppend(this.url,"sinks"),e={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tx(e){return(tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rx(){return(rx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ix(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ox(e,t){return(ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ix(e){return(ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ax=function(){var e=i,t=U_;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ox(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ix(n),t=(e=r?(e=ix(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==tx(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",e;throw new TypeError("Cannot call a class as a function")}return nx((e=i).prototype,[{key:"destroy",value:function(){rx(ix(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sx(e){return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ux(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lx(){return(lx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function cx(e,t){return(cx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fx(e){return(fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hx=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=fx(n),t=(e=r?(e=fx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==sx(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",e;throw new TypeError("Cannot call a class as a function")}return ux((e=i).prototype,[{key:"destroy",value:function(){lx(fx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof ax&&(this.url=L.urlPathAppend(this.url,"sources"),e={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function px(e){return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yx(){return(yx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function gx(e,t){return(gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vx(e){return(vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mx=function(){var e=i,t=U_;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),gx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vx(n),t=(e=r?(e=vx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==px(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",e;throw new TypeError("Cannot call a class as a function")}return dx((e=i).prototype,[{key:"destroy",value:function(){yx(vx(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bx(e){return(bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _x(){return(_x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function xx(e,t){return(xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sx(e){return(Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ox=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Sx(n),t=(e=r?(e=Sx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==bx(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",e;throw new TypeError("Cannot call a class as a function")}return wx((e=i).prototype,[{key:"destroy",value:function(){_x(Sx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof mx&&(this.url=L.urlPathAppend(this.url,"traceupresult"),e={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Px(e){return(Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ex(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kx(){return(kx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Mx(e,t){return(Mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jx(e){return(jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cx=function(){var e=i,t=U_;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Mx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=jx(n),t=(e=r?(e=jx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Px(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",e;throw new TypeError("Cannot call a class as a function")}return Ex((e=i).prototype,[{key:"destroy",value:function(){kx(jx(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tx(e){return(Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ax(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ix(){return(Ix="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Rx(e,t){return(Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lx(e){return(Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nx=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Lx(n),t=(e=r?(e=Lx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Tx(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",e;throw new TypeError("Cannot call a class as a function")}return Ax((e=i).prototype,[{key:"destroy",value:function(){Ix(Lx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof Cx&&(this.url=L.urlPathAppend(this.url,"tracedownresult"),e={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Dx(e){return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fx(){return(Fx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ux(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Gx(e,t){return(Gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ux(e){return(Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vx=function(){var e=i,t=U_;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Gx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ux(n),t=(e=r?(e=Ux(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Dx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zx(t)};function i(e){var t;if(this instanceof i)return t=o.call(this,e),e=e||{},t.sourceNodeIDs=null,L.extend(zx(t),e),t.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",t;throw new TypeError("Cannot call a class as a function")}return Bx((e=i).prototype,[{key:"destroy",value:function(){Fx(Ux(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wx(e){return(Wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hx(){return(Hx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qx(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Xx(e,t){return(Xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qx(e){return(qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jx=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xx(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=qx(n),t=(e=r?(e=qx(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Wx(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",e;throw new TypeError("Cannot call a class as a function")}return Yx((e=i).prototype,[{key:"destroy",value:function(){Hx(qx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof Vx&&(this.url=L.urlPathAppend(this.url,"upstreamcirticalfaclilities"),e={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Zx((rS=Qx).prototype,[{key:"sinksFacilityAnalyst",value:function(e,t){new ex(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){new hx(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){new Ox(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){new Nx(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){new Jx(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}}]),Object.defineProperty(rS,"prototype",{writable:!1});var Kx=Qx;function Qx(e,t){if(!(this instanceof Qx))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function $x(e){return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tS(e,t){return(tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nS(e){return(nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rS=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=nS(n),t=(e=r?(e=nS(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==$x(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._networkAnalyst3DService=new Kx(e,t),n;throw new TypeError("Cannot call a class as a function")}return eS((e=i).prototype,[{key:"sinksFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.sinksFacilityAnalyst(e,t)}},{key:"sourcesFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.sourcesFacilityAnalyst(e,t)}},{key:"traceUpFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.traceUpFacilityAnalyst(e,t)}},{key:"traceDownFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.traceDownFacilityAnalyst(e,t)}},{key:"upstreamFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.upstreamFacilityAnalyst(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oS(e){return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aS(){return(aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uS(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function sS(e,t){return(sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uS(e){return(uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lS=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=uS(n),t=(e=r?(e=uS(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==oS(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(e=o.call(this,e,t)).CLASS_NAME="SuperMap.ProcessingServiceBase",e;throw new TypeError("Cannot call a class as a function")}return iS((e=i).prototype,[{key:"destroy",value:function(){aS(uS(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;y.get(Pf.appendCredential(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var o=this,i=null,n=(t&&t instanceof n&&(i=new Object,n.toObject(t,i)),Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{})),t={proxy:o.proxy,headers:n,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};y.post(Pf.appendCredential(e),JSON.stringify(i),t).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,r):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=L.transformResult(e),t=t||1e3;var n,r=this;e&&(n=setInterval(function(){y.get(Pf.appendCredential(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t))}},{key:"serviceProcessFailed",value:function(e){aS(uS(i.prototype),"serviceProcessFailed",this).call(this,e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}cS((E=hS).prototype,[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}]),Object.defineProperty(E,"prototype",{writable:!1});var fS=hS;function hS(e){if(!(this instanceof hS))throw new TypeError("Cannot call a class as a function");this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}function pS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}pS((E=yS).prototype,[{key:"destroy",value:function(){this.type=null,this.datasetName=null,this.outputPath=null,this.datasourceInfo instanceof fS&&(this.datasourceInfo.destroy(),this.datasourceInfo=null)}}]),Object.defineProperty(E,"prototype",{writable:!1});var dS=yS;function yS(e){if(!(this instanceof yS))throw new TypeError("Cannot call a class as a function");this.type=en.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",L.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"}function gS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gS((E=mS).prototype,[{key:"destroy",value:function(){var e=this;if(e.items){if(0<e.items.length)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}]),Object.defineProperty(E,"prototype",{writable:!1});var vS=mS;function mS(e){if(!(this instanceof mS))throw new TypeError("Cannot call a class as a function");this.items=null,this.numericPrecision=1,this.rangeMode=Ht.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Xt.YELLOW_RED,L.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"}function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],bS((S=_S).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),bS(S,E),Object.defineProperty(S,"prototype",{writable:!1});var wS=_S;function _S(e){if(!(this instanceof _S))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=pn.METER,this.radiusUnit=pn.METER,this.areaUnit=hn.SQUAREMILE,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}function xS(e){return(xS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OS(){return(OS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ES(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function PS(e,t){return(PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ES(e){return(ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kS=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ES(n),t=(e=r?(e=ES(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==xS(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/density"),e.CLASS_NAME="SuperMap.KernelDensityJobsService",e;throw new TypeError("Cannot call a class as a function")}return SS((e=i).prototype,[{key:"destroy",value:function(){OS(ES(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){OS(ES(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){OS(ES(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,t){OS(ES(i.prototype),"addJob",this).call(this,this.url,e,wS,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function MS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],MS((S=CS).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),MS(S,E),Object.defineProperty(S,"prototype",{writable:!1});var jS=CS;function CS(e){if(!(this instanceof CS))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=Bt.CONTAIN,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}function TS(e){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IS(){return(IS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LS(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function RS(e,t){return(RS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NS=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=LS(n),t=(e=r?(e=LS(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==TS(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/query"),e.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",e;throw new TypeError("Cannot call a class as a function")}return AS((e=i).prototype,[{key:"destroy",value:function(){IS(LS(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){IS(LS(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){IS(LS(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,t){IS(LS(i.prototype),"addJob",this).call(this,this.url,e,jS,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!function(e,t){for(var n=e.length;n--;)if(e[n]===t)return 1;return}(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n)&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n]):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],DS((S=FS).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),DS(S,E),Object.defineProperty(S,"prototype",{writable:!1});var BS=FS;function FS(e){if(!(this instanceof FS))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=dn.AVERAGE,this.fields="",this.type=yn.SUMMARYMESH,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}function GS(e){return(GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function US(){return(US="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WS(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function VS(e,t){return(VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WS(e){return(WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YS=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=WS(n),t=(e=r?(e=WS(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==GS(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/aggregatepoints"),e.CLASS_NAME="SuperMap.SummaryMeshJobsService",e;throw new TypeError("Cannot call a class as a function")}return zS((e=i).prototype,[{key:"destroy",value:function(){US(WS(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){US(WS(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){US(WS(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,t){US(WS(i.prototype),"addJob",this).call(this,this.url,e,BS,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],HS((S=qS).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),HS(S,E),Object.defineProperty(S,"prototype",{writable:!1});var XS=qS;function qS(e){if(!(this instanceof qS))throw new TypeError("Cannot call a class as a function");e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=fn.CLIP,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}function JS(e){return(JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KS(){return(KS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$S(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function QS(e,t){return(QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $S(e){return($S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QS(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$S(n),t=(e=r?(e=$S(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==JS(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/vectorclip"),e.CLASS_NAME="SuperMap.VectorClipJobsService",e;throw new TypeError("Cannot call a class as a function")}return ZS((e=i).prototype,[{key:"destroy",value:function(){KS($S(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){KS($S(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){KS($S(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,t){KS($S(i.prototype),"addJob",this).call(this,this.url,e,XS,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],tO((S=rO).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),tO(S,E),Object.defineProperty(S,"prototype",{writable:!1});var nO=rO;function rO(e){if(!(this instanceof rO))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}function oO(e){return(oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aO(){return(aO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uO(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function sO(e,t){return(sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uO(e){return(uO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=uO(n),t=(e=r?(e=uO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==oO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/overlay"),e.CLASS_NAME="SuperMap.OverlayGeoJobsService",e;throw new TypeError("Cannot call a class as a function")}return iO((e=i).prototype,[{key:"destroy",value:function(){aO(uO(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){aO(uO(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){aO(uO(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,t){aO(uO(i.prototype),"addJob",this).call(this,this.url,e,nO,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n)&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n]):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],cO((S=hO).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),cO(S,E),Object.defineProperty(S,"prototype",{writable:!1});var fO=hO;function hO(e){if(!(this instanceof hO))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=pn.METER,this.type=yn.SUMMARYMESH,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}function pO(e){return(pO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yO(){return(yO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vO(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function gO(e,t){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vO(e){return(vO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vO(n),t=(e=r?(e=vO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==pO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/summaryregion"),e.CLASS_NAME="SuperMap.SummaryRegionJobsService",e;throw new TypeError("Cannot call a class as a function")}return dO((e=i).prototype,[{key:"destroy",value:function(){yO(vO(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){yO(vO(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){yO(vO(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,t){yO(vO(i.prototype),"addJob",this).call(this,this.url,e,fO,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"bounds"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],bO((S=_O).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),bO(S,E),Object.defineProperty(S,"prototype",{writable:!1});var wO=_O;function _O(e){if(!(this instanceof _O))throw new TypeError("Cannot call a class as a function");if(this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=pn.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;L.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}function xO(e){return(xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OO(){return(OO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EO(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function PO(e,t){return(PO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EO(e){return(EO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=EO(n),t=(e=r?(e=EO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==xO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/buffers"),e.CLASS_NAME="SuperMap.BuffersAnalystJobsService",e;throw new TypeError("Cannot call a class as a function")}return SO((e=i).prototype,[{key:"destroy",value:function(){OO(EO(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){OO(EO(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){OO(EO(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,t){OO(EO(i.prototype),"addJob",this).call(this,this.url,e,wO,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function MO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],MO((S=CO).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),MO(S,E),Object.defineProperty(S,"prototype",{writable:!1});var jO=CO;function CO(e){if(!(this instanceof CO))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=gn.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}function TO(e){return(TO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IO(){return(IO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LO(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function RO(e,t){return(RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LO(e){return(LO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=LO(n),t=(e=r?(e=LO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==TO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/topologyvalidator"),e.CLASS_NAME="SuperMap.TopologyValidatorJobsService",e;throw new TypeError("Cannot call a class as a function")}return AO((e=i).prototype,[{key:"destroy",value:function(){IO(LO(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){IO(LO(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){IO(LO(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,t){IO(LO(i.prototype),"addJob",this).call(this,this.url,e,jO,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],DO((S=FO).prototype,[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof dS&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof vS&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}]),DO(S,E),Object.defineProperty(S,"prototype",{writable:!1});var BO=FO;function FO(e){if(!(this instanceof FO))throw new TypeError("Cannot call a class as a function");e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}function GO(e){return(GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UO(){return(UO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WO(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function VO(e,t){return(VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WO(e){return(WO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YO=function(){var e=i,t=lS;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=WO(n),t=(e=r?(e=WO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==GO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).url=L.urlPathAppend(e.url,"spatialanalyst/summaryattributes"),e.CLASS_NAME="SuperMap.SummaryAttributesJobsService",e;throw new TypeError("Cannot call a class as a function")}return zO((e=i).prototype,[{key:"destroy",value:function(){UO(WO(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){UO(WO(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){UO(WO(i.prototype),"getJobs",this).call(this,L.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,t){UO(WO(i.prototype),"addJob",this).call(this,this.url,e,BO,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}HO((E=qO).prototype,[{key:"getKernelDensityJobs",value:function(e,t){t=this._processFormat(t);new kS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,n){n=this._processFormat(n);new kS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new kS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:r}).addKernelDensityJob(e,n)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){t=this._processFormat(t);new YS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,n){n=this._processFormat(n);new YS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new YS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:r}).addSummaryMeshJob(e,n)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){t=this._processFormat(t);new NS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,n){n=this._processFormat(n);new NS(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new NS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:r}).addQueryJob(e,n)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){t=this._processFormat(t);new mO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,n){n=this._processFormat(n);new mO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new mO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:r}).addSummaryRegionJob(e,n)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){t=this._processFormat(t);new eO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,n){n=this._processFormat(n);new eO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new eO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:r}).addVectorClipJob(e,n)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){t=this._processFormat(t);new lO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,n){n=this._processFormat(n);new lO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new lO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:r}).addOverlayGeoJob(e,n)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){t=this._processFormat(t);new kO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,n){n=this._processFormat(n);new kO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new kO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:r}).addBuffersJob(e,n)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){t=this._processFormat(t);new NO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,n){n=this._processFormat(n);new NO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new NO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:r}).addTopologyValidatorJob(e,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){t=this._processFormat(t);new YO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:e,processFailed:e},format:t}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,n){n=this._processFormat(n);new YO(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,n,r){var o=this,r=o._processFormat(r);new YO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:r}).addSummaryAttributesJob(e,n)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(E,"prototype",{writable:!1});var XO=qO;function qO(e,t){if(!(this instanceof qO))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}function JO(e){return(JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KO(e,t){return(KO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QO(e){return(QO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KO(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=QO(n),t=(e=r?(e=QO(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==JO(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._processingService=new XO(e,t),n;throw new TypeError("Cannot call a class as a function")}return ZO((e=i).prototype,[{key:"getKernelDensityJobs",value:function(e,t){this._processingService.getKernelDensityJobs(e,t)}},{key:"getKernelDensityJob",value:function(e,t,n){this._processingService.getKernelDensityJob(e,t,n)}},{key:"addKernelDensityJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addKernelDensityJob(e,t,n,r)}},{key:"getKernelDensityJobState",value:function(e){return this._processingService.getKernelDensityJobState(e)}},{key:"getSummaryMeshJobs",value:function(e,t){this._processingService.getSummaryMeshJobs(e,t)}},{key:"getSummaryMeshJob",value:function(e,t,n){this._processingService.getSummaryMeshJob(e,t,n)}},{key:"addSummaryMeshJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addSummaryMeshJob(e,t,n,r)}},{key:"getSummaryMeshJobState",value:function(e){return this._processingService.getSummaryMeshJobState(e)}},{key:"getQueryJobs",value:function(e,t){this._processingService.getQueryJobs(e,t)}},{key:"getQueryJob",value:function(e,t,n){this._processingService.getQueryJob(e,t,n)}},{key:"addQueryJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addQueryJob(e,t,n,r)}},{key:"getQueryJobState",value:function(e){return this._processingService.getQueryJobState(e)}},{key:"getSummaryRegionJobs",value:function(e,t){this._processingService.getSummaryRegionJobs(e,t)}},{key:"getSummaryRegionJob",value:function(e,t,n){this._processingService.getSummaryRegionJob(e,t,n)}},{key:"addSummaryRegionJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addSummaryRegionJob(e,t,n,r)}},{key:"getSummaryRegionJobState",value:function(e){return this._processingService.getSummaryRegionJobState(e)}},{key:"getVectorClipJobs",value:function(e,t){this._processingService.getVectorClipJobs(e,t)}},{key:"getVectorClipJob",value:function(e,t,n){this._processingService.getVectorClipJob(e,t,n)}},{key:"addVectorClipJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addVectorClipJob(e,t,n,r)}},{key:"getVectorClipJobState",value:function(e){return this._processingService.getVectorClipJobState(e)}},{key:"getOverlayGeoJobs",value:function(e,t){this._processingService.getOverlayGeoJobs(e,t)}},{key:"getOverlayGeoJob",value:function(e,t,n){this._processingService.getOverlayGeoJob(e,t,n)}},{key:"addOverlayGeoJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addOverlayGeoJob(e,t,n,r)}},{key:"getoverlayGeoJobState",value:function(e){return this._processingService.getoverlayGeoJobState(e)}},{key:"getBuffersJobs",value:function(e,t){this._processingService.getBuffersJobs(e,t)}},{key:"getBuffersJob",value:function(e,t,n){this._processingService.getBuffersJob(e,t,n)}},{key:"addBuffersJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addBuffersJob(e,t,n,r)}},{key:"getBuffersJobState",value:function(e){return this._processingService.getBuffersJobState(e)}},{key:"getTopologyValidatorJobs",value:function(e,t){this._processingService.getTopologyValidatorJobs(e,t)}},{key:"getTopologyValidatorJob",value:function(e,t,n){this._processingService.getTopologyValidatorJob(e,t,n)}},{key:"addTopologyValidatorJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addTopologyValidatorJob(e,t,n,r)}},{key:"getTopologyValidatorJobState",value:function(e){return this._processingService.getTopologyValidatorJobState(e)}},{key:"getSummaryAttributesJobs",value:function(e,t){this._processingService.getSummaryAttributesJobs(e,t)}},{key:"getSummaryAttributesJob",value:function(e,t,n){this._processingService.getSummaryAttributesJob(e,t,n)}},{key:"addSummaryAttributesJob",value:function(e,t,n,r){e=this._processParams(e),this._processingService.addSummaryAttributesJob(e,t,n,r)}},{key:"getSummaryAttributesJobState",value:function(e){return this._processingService.getSummaryAttributesJobState(e)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=_.toSuperMapBounds(e.bounds)),e.query&&(e.query=_.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=_.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=_.toProcessingParam(e.geometryClip)),e):{}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $O(e){return($O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tP(){return(tP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function nP(e,t){return(nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rP(e,t){if(t&&("object"===$O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oP(e)}function oP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iP(e){return(iP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aP=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=iP(n);return rP(this,r?(e=iP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).returnContent=!1,e.format=a.GEOJSON,e.returnFeatureWithFieldCaption=!1,t&&L.extend(oP(e),t),e.CLASS_NAME="SuperMap.QueryService",e.url?(t&&t.format&&(e.format=t.format.toUpperCase()),e.url=L.urlPathAppend(e.url,"queryResults"),e):rP(e);throw new TypeError("Cannot call a class as a function")}return eP((e=i).prototype,[{key:"destroy",value:function(){tP(iP(i.prototype),"destroy",this).call(this),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){var t,n,r;e instanceof Ap&&(r=null,(n=this).returnContent=e.returnContent,t=n.getJsonParameters(e),n.returnContent||(r=e.returnCustomResult)&&(n.url=L.urlAppend(n.url,"returnCustomResult="+r)),n.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}},{key:"serviceProcessCompleted",value:function(e,t){e=L.transformResult(e);var n=new jn;if(e&&e.recordsets)for(var r=0,o=e.recordsets,i=o.length;r<i;r++)o[r].features&&(!0===this.returnFeatureWithFieldCaption&&o[r].features.map(function(e){return e.fieldNames=o[r].fieldCaptions,e}),this.format===a.GEOJSON)&&(o[r].features=n.toGeoJSON(o[r].features));this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}},{key:"getQueryParameters",value:function(e){return new Ap({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sP(e){return(sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lP(){return(lP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function cP(e,t){return(cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hP(e){return(hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pP=function(){var e=i,t=Ap;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=hP(n),t=(e=r?(e=hP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===sP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fP(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e=e||{})).returnContent=!0,t.bounds=null,L.extend(fP(t),e),t.CLASS_NAME="SuperMap.QueryByBoundsParameters",t;throw new TypeError("Cannot call a class as a function")}return uP((e=i).prototype,[{key:"destroy",value:function(){lP(hP(i.prototype),"destroy",this).call(this),this.returnContent=null,this.bounds&&(this.bounds=null)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dP(e){return(dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gP(){return(gP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function vP(e,t){return(vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mP(e){return(mP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bP=function(){var e=i,t=aP;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=mP(n),t=(e=r?(e=mP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==dP(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByBoundsService",e;throw new TypeError("Cannot call a class as a function")}return yP((e=i).prototype,[{key:"destroy",value:function(){gP(mP(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){var t,n;return e instanceof pP?(t="",n=e.bounds,e=this.getQueryParameters(e),"{"+(t=(t+="'queryMode':'BoundsQuery','queryParameters':")+L.toJSON(e))+(",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left)+"}}}"):null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wP(e){return(wP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xP(){return(xP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function SP(e,t){return(SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(e){return(PP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EP=function(){var e=i,t=Ap;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=PP(n),t=(e=r?(e=PP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===wP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return OP(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e=e||{})).geometry=null,t.isNearest=null,t.returnContent=!0,L.extend(OP(t),e),t.CLASS_NAME="SuperMap.QueryByDistanceParameters",t;throw new TypeError("Cannot call a class as a function")}return _P((e=i).prototype,[{key:"destroy",value:function(){xP(PP(i.prototype),"destroy",this).call(this);this.returnContent=null,this.distance=null,this.isNearest=null,this.geometry&&(this.geometry.destroy(),this.geometry=null)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kP(e){return(kP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jP(){return(jP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function CP(e,t){return(CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function TP(e){return(TP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AP=function(){var e=i,t=aP;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=TP(n),t=(e=r?(e=TP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==kP(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByDistanceService",e;throw new TypeError("Cannot call a class as a function")}return MP((e=i).prototype,[{key:"destroy",value:function(){jP(TP(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){var t,n,r;if(e instanceof EP)return t="",n=this.getQueryParameters(e),r=s.fromGeometry(e.geometry),"{"+(t=(t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':")+L.toJSON(n))+(",'geometry':"+L.toJSON(r)+",'distance':"+e.distance)+"}"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function IP(e){return(IP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LP(){return(LP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function NP(e,t){return(NP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(e){return(BP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FP=function(){var e=i,t=Ap;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=BP(n),t=(e=r?(e=BP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===IP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return DP(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e=e||{})).returnContent=!0,L.extend(DP(t),e),t.CLASS_NAME="SuperMap.QueryBySQLParameters",t;throw new TypeError("Cannot call a class as a function")}return RP((e=i).prototype,[{key:"destroy",value:function(){LP(BP(i.prototype),"destroy",this).call(this),this.returnContent=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function GP(e){return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UP(){return(UP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function VP(e,t){return(VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WP(e){return(WP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YP=function(){var e=i,t=aP;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=WP(n),t=(e=r?(e=WP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==GP(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryBySQLService",e;throw new TypeError("Cannot call a class as a function")}return zP((e=i).prototype,[{key:"destroy",value:function(){UP(WP(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){var t;if(e instanceof FP)return t="",e=this.getQueryParameters(e),"{"+((t+="'queryMode':'SqlQuery','queryParameters':")+L.toJSON(e))+"}"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HP(e){return(HP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qP(){return(qP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KP(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function JP(e,t){return(JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KP(e){return(KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QP=function(){var e=i,t=Ap;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JP(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=KP(n),t=(e=r?(e=KP(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===HP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZP(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e=e||{})).returnContent=!0,t.geometry=null,t.spatialQueryMode=Bt.INTERSECT,L.extend(ZP(t),e),t.CLASS_NAME="SuperMap.QueryByGeometryParameters",t;throw new TypeError("Cannot call a class as a function")}return XP((e=i).prototype,[{key:"destroy",value:function(){qP(KP(i.prototype),"destroy",this).call(this),this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $P(e){return($P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tE(){return(tE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rE(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function nE(e,t){return(nE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rE(e){return(rE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oE=function(){var e=i,t=aP;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=rE(n),t=(e=r?(e=rE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==$P(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByGeometryService",e;throw new TypeError("Cannot call a class as a function")}return eE((e=i).prototype,[{key:"destroy",value:function(){tE(rE(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){var t,n,r;if(e instanceof QP)return t="",n=e.geometry,n=s.fromGeometry(n),r=this.getQueryParameters(e),"{"+(t+="'queryMode':'SpatialQuery','queryParameters':")+(L.toJSON(r)+",'geometry':"+L.toJSON(n)+",'spatialQueryMode':"+L.toJSON(e.spatialQueryMode))+"}"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function iE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}iE((E=sE).prototype,[{key:"queryByBounds",value:function(e,t,n){new bP(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"queryByDistance",value:function(e,t,n){new AP(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).processAsync(e)}},{key:"queryBySQL",value:function(e,t,n){new YP(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).processAsync(e)}},{key:"queryByGeometry",value:function(e,t,n){new oE(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:n}).processAsync(e)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(E,"prototype",{writable:!1});var aE=sE;function sE(e,t){if(!(this instanceof sE))throw new TypeError("Cannot call a class as a function");this.options=t||{},this.url=e}function uE(e){return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cE(e,t){return(cE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fE(e){return(fE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hE=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=fE(n),t=(e=r?(e=fE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==uE(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._queryService=new aE(e,t),n;throw new TypeError("Cannot call a class as a function")}return lE((e=i).prototype,[{key:"queryByBounds",value:function(e,t,n){e=this._processParams(e),this._queryService.queryByBounds(e,t,n)}},{key:"queryByDistance",value:function(e,t,n){e=this._processParams(e),this._queryService.queryByDistance(e,t,n)}},{key:"queryBySQL",value:function(e,t,n){e=this._processParams(e),this._queryService.queryBySQL(e,t,n)}},{key:"queryByGeometry",value:function(e,t,n){e=this._processParams(e),this._queryService.queryByGeometry(e,t,n)}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!_.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new O(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof l().LngLatBounds)&&(e.bounds=new O(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat)),e.geometry&&(e.geometry instanceof l().LngLat&&(e.geometry=new j(e.geometry.lng,e.geometry.lat)),e.geometry instanceof l().Point&&(e.geometry=new j(e.geometry.x,e.geometry.y)),e.geometry instanceof l().LngLatBounds&&(e.geometry=_.toSuperMapPolygon(e.geometry)),e.geometry instanceof $||(e.geometry=_.toSuperMapGeometry(e.geometry))),e):{}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pE(e){return(pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yE(){return(yE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vE(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function gE(e,t){return(gE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vE(e){return(vE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mE=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vE(n),t=(e=r?(e=vE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==pE(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).format=t.format||a.GEOJSON,e.CLASS_NAME="SuperMap.SpatialAnalystBase",e;throw new TypeError("Cannot call a class as a function")}return dE((e=i).prototype,[{key:"destroy",value:function(){yE(vE(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e,t){var n;if((e=L.transformResult(e))&&this.format===a.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(L.isArray(e)){for(var r=0;r<e.length;r++)e[r]=this.toGeoJSONResult(e[r]);n=e}else n=this.toGeoJSONResult(e);this.events.triggerEvent("processCompleted",{result:n=n||e,options:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new jn;if(e.recordsets)for(var n=0,r=e.recordsets,o=r.length;n<o;n++)r[n].features&&(r[n].features=t.toGeoJSON(r[n].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){var n,r={};for(n in e)"dataset"!==n&&("latitude"===n||"timeMode"===n||"dayStart"===n||"dayEnd"===n||"hourStart"===n||"hourEnd"===n||"transmittance"===n||"hourInterval"===n||"dayInterval"===n?r[n]=e[n]:t[n]=e[n]);t.parameter=r}}],bE((P=_E).prototype,[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}]),bE(P,E),Object.defineProperty(P,"prototype",{writable:!1});var wE=_E;function _E(e){if(!(this instanceof _E))throw new TypeError("Cannot call a class as a function");this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}function xE(e){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OE(){return(OE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=EE(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function PE(e,t){return(PE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EE(e){return(EE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kE=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=EE(n),t=(e=r?(e=EE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==xE(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.AreaSolarRadiationService",e;throw new TypeError("Cannot call a class as a function")}return SE((e=i).prototype,[{key:"destroy",value:function(){OE(EE(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t;e instanceof wE&&(t={},e instanceof wE&&(this.url=L.urlPathAppend(this.url,"datasets/".concat(e.dataset,"/solarradiation"))),this.url=L.urlAppend(this.url,"returnContent=true"),wE.toObject(e,t),e=L.toJSON(t),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ME(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ME((E=CE).prototype,[{key:"destroy",value:function(){this.exp=null,this.value=null}}]),Object.defineProperty(E,"prototype",{writable:!1});var jE=CE;function CE(e){if(!(this instanceof CE))throw new TypeError("Cannot call a class as a function");this.exp=null,this.value=100,L.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"}function TE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}TE((P=IE).prototype,[{key:"destroy",value:function(){this.endType=null,this.leftDistance&&(this.leftDistance.destroy(),this.leftDistance=null),this.rightDistance&&(this.rightDistance.destroy(),this.rightDistance=null),this.semicircleLineSegment=null,this.radiusUnit=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var AE=IE;function IE(e){if(!(this instanceof IE))throw new TypeError("Cannot call a class as a function");this.endType=Qt.FLAT,this.leftDistance=new jE,this.rightDistance=new jE,this.semicircleLineSegment=4,this.radiusUnit=zt.METER,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}RE((E=NE).prototype,[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}]),Object.defineProperty(E,"prototype",{writable:!1});var LE=NE;function NE(e){if(!(this instanceof NE))throw new TypeError("Cannot call a class as a function");this.bufferSetting=new AE,L.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}function DE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DE((P=FE).prototype,[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var BE=FE;function FE(e){if(!(this instanceof FE))throw new TypeError("Cannot call a class as a function");this.expectCount=1e3,this.dataset=null,this.dataReturnMode=rn.RECORDSET_ONLY,this.deleteExistResultDataset=!0,L.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"}function GE(e){return(GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UE(){return(UE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YE(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function VE(e,t){return(VE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YE(e){return(YE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HE=function(){var e=i,t=LE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),VE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=YE(n),t=(e=r?(e=YE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===GE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return WE(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new vy,t.resultSetting=new BE,t.isAttributeRetained=!0,t.isUnion=!1,L.extend(WE(t),e),t.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===n)t.dataReturnOption=e.resultSetting;else{if("dataset"===n)continue;t[n]=e[n]}}}],zE((t=i).prototype,[{key:"destroy",value:function(){UE(YE(i.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.isAttributeRetained=null,this.isUnion=null}}]),zE(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XE(e){return(XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JE(){return(JE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QE(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ZE(e,t){return(ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QE(e){return(QE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $E=function(){var e=i,t=LE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ZE(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=QE(n),t=(e=r?(e=QE(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===XE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return KE(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).sourceGeometry=null,t.sourceGeometrySRID=null,e&&L.extend(KE(t),e),t.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n){var r,o={};for(r in e.bufferSetting)o[r]=e.bufferSetting[r];t.analystParameter=o}else"sourceGeometry"===n?t.sourceGeometry=s.fromGeometry(e.sourceGeometry):t[n]=e[n]}}],qE((t=i).prototype,[{key:"destroy",value:function(){JE(QE(i.prototype),"destroy",this).call(this),this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}]),qE(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function e2(e){return(e2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n2(){return(n2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function r2(e,t){return(r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i2(e){return(i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a2=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=i2(n),t=(e=r?(e=i2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===e2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o2(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).mode=null,t&&L.extend(o2(e),t),e.CLASS_NAME="SuperMap.BufferAnalystService",e;throw new TypeError("Cannot call a class as a function")}return t2((e=i).prototype,[{key:"destroy",value:function(){n2(i2(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this,e=(e instanceof HE?(n.mode="datasets",n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/buffer"),HE.toObject(e,t)):e instanceof $E&&(n.mode="geometry",n.url=L.urlPathAppend(n.url,"geometry/buffer"),$E.toObject(e,t)),L.toJSON(t));this.returnContent=!0,n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function s2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],s2((P=l2).prototype,[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}]),s2(P,E),Object.defineProperty(P,"prototype",{writable:!1});var u2=l2;function l2(e){if(!(this instanceof l2))throw new TypeError("Cannot call a class as a function");this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}function c2(e){return(c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h2(){return(h2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function p2(e,t){return(p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y2(e){return(y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g2=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=y2(n),t=(e=r?(e=y2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===c2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d2(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).mode=null,t&&L.extend(d2(e),t),e.CLASS_NAME="SuperMap.DensityAnalystService",e;throw new TypeError("Cannot call a class as a function")}return f2((e=i).prototype,[{key:"destroy",value:function(){h2(y2(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=new Object,e=(e instanceof u2&&(this.url=L.urlPathAppend(this.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),this.mode="kernel"),u2.toObject(e,t),L.toJSON(t));this.url=L.urlAppend(this.url,"returnContent=true"),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function v2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}v2((E=b2).prototype,[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}]),Object.defineProperty(E,"prototype",{writable:!1});var m2=b2;function b2(e){if(!(this instanceof b2))throw new TypeError("Cannot call a class as a function");this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}function w2(e){return(w2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x2(){return(x2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function S2(e,t){return(S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O2(e){return(O2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P2=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=O2(n),t=(e=r?(e=O2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==w2(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GenerateSpatialDataService",e;throw new TypeError("Cannot call a class as a function")}return _2((e=i).prototype,[{key:"destroy",value:function(){x2(O2(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof m2&&(e=this.getJsonParameters(e),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=L.urlPathAppend(this.url,t),this.url=L.urlAppend(this.url,"returnContent=true"),L.toJSON(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function E2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E2((P=M2).prototype,[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var k2=M2;function M2(e){if(!(this instanceof M2))throw new TypeError("Cannot call a class as a function");this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}function j2(e){return(j2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T2(){return(T2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function A2(e,t){return(A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I2(e){return(I2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R2=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=I2(n),t=(e=r?(e=I2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==j2(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoRelationAnalystService",e;throw new TypeError("Cannot call a class as a function")}return C2((e=i).prototype,[{key:"destroy",value:function(){T2(I2(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof k2&&(this.url=L.urlPathAppend(this.url,"datasets/"+e.dataset+"/georelation"),e=L.toJSON(e),this.url=L.urlAppend(this.url,"returnContent=true"),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function L2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)if("inputPoints"===n&&"geometry"===e.InterpolationAnalystType){for(var r=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],i={x:i.x,y:i.y,z:i.tag};r.push(i)}t[n]=r}else t[n]=e[n]}}],L2((P=D2).prototype,[{key:"destroy",value:function(){this.bounds=null,this.searchRadius=null,this.zValueFieldName=null,this.zValueScale=null,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.pixelFormat=null}}]),L2(P,E),Object.defineProperty(P,"prototype",{writable:!1});var N2=D2;function D2(e){if(!(this instanceof D2))throw new TypeError("Cannot call a class as a function");e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,L.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}function B2(e){return(B2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G2(){return(G2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function z2(e,t){return(z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V2(e){return(V2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W2=function(){var e=i,t=N2;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=V2(n),t=(e=r?(e=V2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===B2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return U2(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).smooth=.1,t.tension=40,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&L.extend(U2(t),e),t.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)t[n]=e[n]}}],F2((t=i).prototype,[{key:"destroy",value:function(){G2(V2(i.prototype),"destroy",this).call(this);this.smooth=null,this.tension=null,this.searchMode=null,this.expectedCount=null,this.maxPointCountForInterpolation=null,this.maxPointCountInNode=null}}]),F2(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Y2(e){return(Y2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X2(){return(X2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z2(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function q2(e,t){return(q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z2(e){return(Z2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K2=function(){var e=i,t=N2;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q2(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Z2(n),t=(e=r?(e=Z2(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Y2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return J2(t)};function i(e){var t;if(this instanceof i)return t=o.call(this,e),e&&L.extend(J2(t),e),t.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return H2((e=i).prototype,[{key:"destroy",value:function(){X2(Z2(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Q2(e){return(Q2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ek(){return(ek="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function tk(e,t){return(tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rk(e){return(rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ok=function(){var e=i,t=N2;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=rk(n),t=(e=r?(e=rk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Q2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nk(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).power=2,t.searchMode=null,t.expectedCount=12,e&&L.extend(nk(t),e),t.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return $2((e=i).prototype,[{key:"destroy",value:function(){ek(rk(i.prototype),"destroy",this).call(this),this.power=null,this.searchMode=null,this.expectedCount=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ik(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ik((E=sk).prototype,[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=null}}]),Object.defineProperty(E,"prototype",{writable:!1});var ak=sk;function sk(e){if(!(this instanceof sk))throw new TypeError("Cannot call a class as a function");e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,L.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}function uk(e){return(uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ck(){return(ck="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function fk(e,t){return(fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dk=function(){var e=i,t=N2;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=pk(n),t=(e=r?(e=pk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===uk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hk(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).type=null,t.mean=null,t.angle=0,t.nugget=0,t.range=0,t.sill=0,t.variogramMode=un.SPHERICAL,t.exponent=ln.EXP1,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&L.extend(hk(t),e),t.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return lk((e=i).prototype,[{key:"destroy",value:function(){ck(pk(i.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yk(e){return(yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vk(){return(vk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function mk(e,t){return(mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wk(e){return(wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _k=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=wk(n),t=(e=r?(e=wk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===yk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bk(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).mode=null,t&&L.extend(bk(e),t),e;throw new TypeError("Cannot call a class as a function")}return gk((e=i).prototype,[{key:"destroy",value:function(){vk(wk(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},n=this,e=(e instanceof K2?(n.mode="Density","geometry"===e.InterpolationAnalystType?n.url=L.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof ok?(n.mode="IDW","geometry"===e.InterpolationAnalystType?n.url=L.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof W2?(n.mode="RBF","geometry"===e.InterpolationAnalystType?n.url=L.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof dk&&(n.mode="Kriging","geometry"===e.InterpolationAnalystType?n.url=L.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/kriging")),N2.toObject(e,t),L.toJSON(t));n.url=L.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}P=[{key:"toObject",value:function(e,t){for(var n in e)if("dataset"!==n&&(t[n]=e[n]),"extractRegion"===n&&e[n]){for(var r=e[n].components[0].components,o={},i=[],a=r.length,s=0;s<a-1;s++){var u={};u.x=r[s].x,u.y=r[s].y,i.push(u)}o.points=i,o.type="REGION",t[n]=o}}}],xk((E=Ok).prototype,[{key:"destroy",value:function(){this.dataset=null,this.bounds=null,this.expression=null,this.isZip=!0,this.ignoreNoValue=!0,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=null}}]),xk(E,P),Object.defineProperty(E,"prototype",{writable:!1});var Sk=Ok;function Ok(e){if(!(this instanceof Ok))throw new TypeError("Cannot call a class as a function");e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}function Pk(e){return(Pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kk(){return(kk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Mk(e,t){return(Mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jk(e){return(jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ck=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=jk(n),t=(e=r?(e=jk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Pk(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",e;throw new TypeError("Cannot call a class as a function")}return Ek((e=i).prototype,[{key:"destroy",value:function(){kk(jk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t={},e=(e instanceof Sk&&(this.url=L.urlPathAppend(this.url,"datasets/"+e.dataset+"/mathanalyst")),Sk.toObject(e,t),L.toJSON(t));this.url=L.urlAppend(this.url,"returnContent=true"),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Tk((P=Ik).prototype,[{key:"destroy",value:function(){this.operation=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var Ak=Ik;function Ik(e){if(!(this instanceof Ik))throw new TypeError("Cannot call a class as a function");this.operation=$t.UNION,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}function Rk(e){return(Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nk(){return(Nk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Dk(e,t){return(Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fk(e){return(Fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gk=function(){var e=i,t=Ak;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Dk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Fk(n),t=(e=r?(e=Fk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Rk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bk(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).operateDataset=null,t.operateDatasetFields=[],t.operateDatasetFilter=new vy,t.operateRegions=[],t.sourceDataset=null,t.sourceDatasetFields=[],t.sourceDatasetFilter=new vy,t.tolerance=0,t.resultSetting=new BE,L.extend(Bk(t),e),t.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceDataset"!==n)if("operateRegions"===n){t.operateRegions=[];var r,o=e.operateRegions;for(r in o)o.hasOwnProperty(r)&&(t.operateRegions[r]=s.fromGeometry(o[r]))}else"resultSetting"===n?t.dataReturnOption=e.resultSetting:t[n]=e[n]}}],Lk((t=i).prototype,[{key:"destroy",value:function(){Nk(Fk(i.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var t=0,n=e.operateRegions,r=n.length;t<r;t++)n[t].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}]),Lk(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zk(e){return(zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vk(){return(Vk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hk(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Wk(e,t){return(Wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hk(e){return(Hk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xk=function(){var e=i,t=Ak;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),Wk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Hk(n),t=(e=r?(e=Hk(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===zk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yk(t)};function i(e){var t;if(this instanceof i)return t=o.call(this,e),e&&e.operateGeometry&&(t.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(t.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(t.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(t.sourceGeometries=e.sourceGeometries),e&&L.extend(Yk(t),e),t.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceGeometry"===n)t.sourceGeometry=s.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],o=0;o<e.sourceGeometries.length;o++)r.push(s.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=r}else if("operateGeometry"===n)t.operateGeometry=s.fromGeometry(e.operateGeometry);else if("operateGeometries"===n){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(s.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[n]=e[n]}}],Uk((t=i).prototype,[{key:"destroy",value:function(){Vk(Hk(i.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}]),Uk(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qk(e){return(qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zk(){return(Zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$k(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Kk(e,t){return(Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eM=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=$k(n),t=(e=r?(e=$k(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===qk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qk(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).mode=null,t&&L.extend(Qk(e),t),e.CLASS_NAME="SuperMap.OverlayAnalystService",e;throw new TypeError("Cannot call a class as a function")}return Jk((e=i).prototype,[{key:"destroy",value:function(){Zk($k(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this,e=(e instanceof Gk?(n.mode="datasets",n.url=L.urlPathAppend(n.url,"datasets/"+e.sourceDataset+"/overlay"),Gk.toObject(e,t)):e instanceof Xk&&(n.mode="geometry",e.operateGeometries&&e.sourceGeometries?(n.url=L.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=L.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=L.urlPathAppend(n.url,"geometry/overlay"),Xk.toObject(e,t)),this.returnContent=!0,L.toJSON(t));n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}tM((E=rM).prototype,[{key:"destroy",value:function(){this.sourceRoute=null,this.point=null,this.tolerance&&(this.tolerance=null),this.isIgnoreGap&&(this.isIgnoreGap=!1)}}]),Object.defineProperty(E,"prototype",{writable:!1});var nM=rM;function rM(e){if(!(this instanceof rM))throw new TypeError("Cannot call a class as a function");if(!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}function oM(e){return(oM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aM(){return(aM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function sM(e,t){return(sM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uM(e){return(uM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lM=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=uM(n),t=(e=r?(e=uM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==oM(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",e;throw new TypeError("Cannot call a class as a function")}return iM((e=i).prototype,[{key:"destroy",value:function(){aM(uM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof nM&&(e=this.getJsonParameters(e),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJsonParameters",value:function(e){return this.url=L.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=L.urlAppend(this.url,"returnContent=true"),L.toJSON(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}cM((P=hM).prototype,[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var fM=hM;function hM(e){if(!(this instanceof hM))throw new TypeError("Cannot call a class as a function");if(!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var t=e.sourceRoute,n={};if(t&&t instanceof $&&t.components){n.type=t.type,n.parts=t.parts;for(var r=[],o=0,i=t.components.length;o<i;o++)r=r.concat(t.components[o].components);n.points=r,e.sourceRoute=n}L.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}function pM(e){return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yM(){return(yM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function gM(e,t){return(gM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vM(e){return(vM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mM=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=vM(n),t=(e=r?(e=vM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==pM(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteLocatorService",e;throw new TypeError("Cannot call a class as a function")}return dM((e=i).prototype,[{key:"destroy",value:function(){yM(vM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof fM&&(e=this.getJsonParameters(e),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=L.urlPathAppend(this.url,t),this.url=L.urlAppend(this.url,"returnContent=true"),L.toJSON(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}bM((E=_M).prototype,[{key:"destroy",value:function(){this.clipRegion&&(this.clipRegion.destroy(),this.clipRegion=null),this.datumValue=null,this.expectedZValues=null,this.interval=null,this.resampleTolerance=null,this.smoothMethod=null,this.smoothness=null}},{key:"toJSON",value:function(){var e,t="'datumValue':"+L.toJSON(this.datumValue),t=(t=(t=(t+=",'interval':"+L.toJSON(this.interval))+",'resampleTolerance':"+L.toJSON(this.resampleTolerance))+",'smoothMethod':"+L.toJSON(this.smoothMethod))+",'smoothness':"+L.toJSON(this.smoothness);return null!=this.expectedZValues&&(t+=",'expectedZValues':"+L.toJSON(this.expectedZValues)),null!=this.clipRegion&&(e=this.clipRegion,this.clipRegion instanceof $&&this.clipRegion.components&&(e=s.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+L.toJSON(e)),"{"+t+"}"}}]),Object.defineProperty(E,"prototype",{writable:!1});var wM=_M;function _M(e){if(!(this instanceof _M))throw new TypeError("Cannot call a class as a function");this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=tn.BSPLINE,this.smoothness=0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}function xM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}xM((P=OM).prototype,[{key:"destroy",value:function(){this.resolution=null,this.extractParameter&&(this.extractParameter.destroy(),this.extractParameter=null),this.resultSetting&&(this.resultSetting.destroy(),this.resultSetting=null),this.surfaceAnalystMethod=null}}]),Object.defineProperty(P,"prototype",{writable:!1});var SM=OM;function OM(e){if(!(this instanceof OM))throw new TypeError("Cannot call a class as a function");this.resolution=0,this.extractParameter=new wM,this.resultSetting=new BE,this.surfaceAnalystMethod=nn.ISOLINE,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}function PM(e){return(PM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kM(){return(kM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function MM(e,t){return(MM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CM(e){return(CM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TM=function(){var e=i,t=SM;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),MM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=CM(n),t=(e=r?(e=CM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===PM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jM(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new vy,t.zValueFieldName=null,e&&L.extend(jM(t),e),t.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)if("filterQueryParameter"===n&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===n)e.extractParameter.clipRegion instanceof $&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=s.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;t[n]=e[n]}}}],EM((t=i).prototype,[{key:"destroy",value:function(){kM(CM(i.prototype),"destroy",this).call(this);this.dataset=null,this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null),this.zValueFieldName=null}}]),EM(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AM(e){return(AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RM(){return(RM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function LM(e,t){return(LM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DM(e){return(DM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BM=function(){var e=i,t=SM;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),LM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=DM(n),t=(e=r?(e=DM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===AM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return NM(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).points=null,t.zValues=null,e&&L.extend(NM(t),e),t.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return IM((e=i).prototype,[{key:"destroy",value:function(){if(RM(DM(i.prototype),"destroy",this).call(this),this.points){for(var e=0,t=this.points,n=t.length;e<n;e++)t[e].destroy();this.points=null}this.zValues=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FM(e){return(FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zM(){return(zM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function UM(e,t){return(UM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VM(e){return(VM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WM=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=VM(n),t=(e=r?(e=VM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==FM(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.SurfaceAnalystService",e;throw new TypeError("Cannot call a class as a function")}return GM((e=i).prototype,[{key:"destroy",value:function(){zM(VM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof SM&&(e=this.getJsonParameters(e),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}},{key:"getJsonParameters",value:function(e){var t="",n={};if(e instanceof TM)this.url=L.urlPathAppend(this.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),TM.toObject(e,n),t=L.toJSON(n);else{if(!(e instanceof BM))return;this.url=L.urlPathAppend(this.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=L.toJSON(e)}return this.returnContent=!0,t}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function YM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}E=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],YM((P=XM).prototype,[{key:"destroy",value:function(){this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName=null,this.planCurvatureName=null,this.deleteExistResultDataset=!0}}]),YM(P,E),Object.defineProperty(P,"prototype",{writable:!1});var HM=XM;function XM(e){if(!(this instanceof XM))throw new TypeError("Cannot call a class as a function");e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}function qM(e){return(qM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZM(){return(ZM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QM(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function KM(e,t){return(KM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QM(e){return(QM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $M=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KM(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=QM(n),t=(e=r?(e=QM(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==qM(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",e;throw new TypeError("Cannot call a class as a function")}return JM((e=i).prototype,[{key:"destroy",value:function(){ZM(QM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t={},e=(e instanceof HM&&(this.url=L.urlPathAppend(this.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),HM.toObject(e,t),L.toJSON(t));this.url=L.urlAppend(this.url,"returnContent=true"),this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ej(e){return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nj(){return(nj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ij(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function rj(e,t){return(rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ij(e){return(ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aj=function(){var e=i,t=ak;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),rj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ij(n),t=(e=r?(e=ij(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ej(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oj(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).filterQueryParameter=null,t.dataset=null,e&&L.extend(oj(t),e),t.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=s.fromGeometry(e.clipRegion):t[n]=e[n]}}],tj((t=i).prototype,[{key:"destroy",value:function(){nj(ij(i.prototype),"destroy",this).call(this),this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}]),tj(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sj(e){return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lj(){return(lj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hj(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function cj(e,t){return(cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hj(e){return(hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pj=function(){var e=i,t=ak;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),cj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=hj(n),t=(e=r?(e=hj(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===sj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fj(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).points=null,e&&L.extend(fj(t),e),t.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=s.fromGeometry(e.clipRegion):t[n]=e[n]}}],uj((t=i).prototype,[{key:"destroy",value:function(){if(lj(hj(i.prototype),"destroy",this).call(this),this.points){for(var e=this.points.length-1;0<=e;e--)this.points[e].destroy();this.points=null}}}]),uj(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dj(e){return(dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gj(){return(gj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bj(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function vj(e,t){return(vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bj(e){return(bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wj=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=bj(n),t=(e=r?(e=bj(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===dj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mj(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).mode=null,t&&L.extend(mj(e),t),e.CLASS_NAME="SuperMap.ThiessenAnalystService",e;throw new TypeError("Cannot call a class as a function")}return yj((e=i).prototype,[{key:"destroy",value:function(){gj(bj(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this,e=(e instanceof aj?(n.mode="datasets",n.url=L.urlPathAppend(n.url,"datasets/"+e.dataset+"/thiessenpolygon"),aj.toObject(e,t)):e instanceof pj&&(n.mode="geometry",n.url=L.urlPathAppend(n.url,"geometry/thiessenpolygon"),pj.toObject(e,t)),L.toJSON(t));this.returnContent=!0,n.request({method:"POST",data:e,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[a.GEOJSON,a.ISERVER,a.FGB]}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _j(e){return(_j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sj(){return(Sj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ej(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function Oj(e,t){return(Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ej(e){return(Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kj=function(){var e=i,t=mE;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Ej(n),t=(e=r?(e=Ej(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===_j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pj(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t&&L.extend(Pj(e),t),e.CLASS_NAME="SuperMap.GeometryBatchAnalystService",e;throw new TypeError("Cannot call a class as a function")}return xj((e=i).prototype,[{key:"processAsync",value:function(e){this.url=L.urlPathAppend(this.url,"geometry/batchanalyst"),this.url=L.urlAppend(this.url,"returnContent=true&ignoreAnalystParam=true");e=this._processParams(e),e=L.toJSON(e);this.request({method:"POST",data:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t,n=this;if(L.isArray(e))return t=[],e.map(function(e){return t.push(n._toJSON(e)),e}),t}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},$E.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},Xk.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},N2.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},N2.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},N2.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},N2.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},pj.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){Sj(Ej(i.prototype),"destroy",this).call(this)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Mj((E=Cj).prototype,[{key:"getAreaSolarRadiationResult",value:function(e,t,n){new kE(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,n){new a2(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"densityAnalysis",value:function(e,t,n){new g2(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"generateSpatialData",value:function(e,t,n){new P2(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,n){new R2(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,n){new _k(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"mathExpressionAnalysis",value:function(e,t,n){new Ck(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"overlayAnalysis",value:function(e,t,n){new eM(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"routeCalculateMeasure",value:function(e,t,n){new lM(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"routeLocate",value:function(e,t,n){new mM(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"surfaceAnalysis",value:function(e,t,n){new WM(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"terrainCurvatureCalculate",value:function(e,t,n){new $M(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,n){new wj(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}).processAsync(e)}},{key:"geometrybatchAnalysis",value:function(e,t,n){for(var t=new kj(this.url,{eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(n)}),r=[],o=0;o<e.length;o++){var i=e[o];r.push({analystName:i.analystName,param:i.param})}t.processAsync(r)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(E,"prototype",{writable:!1});var jj=Cj;function Cj(e,t){if(!(this instanceof Cj))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function Tj(e){return(Tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ij(e,t){return(Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rj(e){return(Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Rj(n),t=(e=r?(e=Rj(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Tj(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._spatialAnalystService=new jj(e,t),n;throw new TypeError("Cannot call a class as a function")}return Aj((e=i).prototype,[{key:"getAreaSolarRadiationResult",value:function(e,t,n){this._spatialAnalystService.getAreaSolarRadiationResult(e,t,n)}},{key:"bufferAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.bufferAnalysis(e,t,n)}},{key:"densityAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.densityAnalysis(e,t,n)}},{key:"generateSpatialData",value:function(e,t,n){this._spatialAnalystService.generateSpatialData(e,t,n)}},{key:"geoRelationAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.geoRelationAnalysis(e,t,n)}},{key:"interpolationAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.interpolationAnalysis(e,t,n)}},{key:"mathExpressionAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.mathExpressionAnalysis(e,t,n)}},{key:"overlayAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.overlayAnalysis(e,t,n)}},{key:"routeCalculateMeasure",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.routeCalculateMeasure(e,t,n)}},{key:"routeLocate",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.routeLocate(e,t,n)}},{key:"surfaceAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.surfaceAnalysis(e,t,n)}},{key:"terrainCurvatureCalculate",value:function(e,t,n){this._spatialAnalystService.terrainCurvatureCalculate(e,t,n)}},{key:"thiessenAnalysis",value:function(e,t,n){e=this._processParams(e),this._spatialAnalystService.thiessenAnalysis(e,t,n)}},{key:"geometrybatchAnalysis",value:function(e,t,n){for(var r=0;r<e.length;r++)e[r].param=this._processParams(e[r].param);this._spatialAnalystService.geometrybatchAnalysis(e,t,n)}},{key:"_processParams",value:function(n){if(!n)return{};if(n.bounds&&(n.bounds=_.toSuperMapBounds(n.bounds)),n.inputPoints)for(var e=0;e<n.inputPoints.length;e++){var t=n.inputPoints[e];_.isArray(t)&&(n.inputPoints[e]={x:t[0],y:t[1],tag:t[2]})}if(n.points)for(var r=0;r<n.points.length;r++){var o=n.points[r];n.points[r]=_.toSuperMapPoint(o)}if(n.point&&(n.point=_.toSuperMapPoint(n.point)),n.extractRegion&&(n.extractRegion=_.toSuperMapGeometry(n.extractRegion)),n.extractParameter&&n.extractParameter.clipRegion&&(n.extractParameter.clipRegion=_.toSuperMapGeometry(n.extractParameter.clipRegion)),n.clipParam&&n.clipParam.clipRegion&&(n.clipParam.clipRegion=_.toSuperMapGeometry(n.clipParam.clipRegion)),n.sourceRoute&&n.sourceRoute){var i={type:"LINEM"};i.parts=[n.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<n.sourceRoute.geometry.coordinates.length;a++){var s=n.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}n.sourceRoute=i}var u;if(n.operateRegions&&_.isArray(n.operateRegions)&&n.operateRegions.map(function(e,t){return n.operateRegions[t]=_.toSuperMapGeometry(e),n.operateRegions[t]}),n.sourceGeometry&&(u=null,n.sourceGeometrySRID&&(u=n.sourceGeometrySRID),n.sourceGeometry=_.toSuperMapGeometry(n.sourceGeometry),u&&(n.sourceGeometry.SRID=u),delete n.sourceGeometry.sourceGeometrySRID),n.operateGeometry&&(n.operateGeometry=_.toSuperMapGeometry(n.operateGeometry)),n.sourceGeometries){for(var l=[],c=0;c<n.sourceGeometries.length;c++)l.push(_.toSuperMapGeometry(n.sourceGeometries[c]));n.sourceGeometries=l}if(n.operateGeometries){for(var f=[],h=0;h<n.operateGeometries.length;h++)f.push(_.toSuperMapGeometry(n.operateGeometries[h]));n.operateGeometries=f}return n.sourceRoute&&n.sourceRoute.components&&_.isArray(n.sourceRoute.components)&&n.sourceRoute.components.map(function(e,t){return n.sourceRoute.components[t]=_.toSuperMapGeometry(e),n.sourceRoute.components[t]}),n}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Lj((E=Dj).prototype,[{key:"destroy",value:function(){if(this.datasetNames=null,this.dataSourceNames=null,this.joinItems){for(var e=0,t=this.joinItems,n=t.length;e<n;e++)t[e].destroy();this.joinItems=null}if(this.themes){for(var r=0,o=this.themes,i=o.length;r<i;r++)o[r].destroy();this.themes=null}}}]),Object.defineProperty(E,"prototype",{writable:!1});var Nj=Dj;function Dj(e){if(!(this instanceof Dj))throw new TypeError("Cannot call a class as a function");this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"}function Bj(e){return(Bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gj(){return(Gj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vj(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function zj(e,t){return(zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vj(e){return(Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wj=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=Vj(n),t=(e=r?(e=Vj(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Bj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Uj(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t&&L.extend(Uj(e),t),e.eventCount=0,e.url=L.urlPathAppend(e.url,"tempLayersSet"),e.CLASS_NAME="SuperMap.ThemeService",e;throw new TypeError("Cannot call a class as a function")}return Fj((e=i).prototype,[{key:"destroy",value:function(){Gj(Vj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e,t){var n,r;e instanceof Nj&&(e=this.getJsonParameters(e),n=++this.eventCount,r={scope:this,processCompleted:function(e){if(n===e.result.eventId&&t)return delete e.result.eventId,t(e),this.events&&this.events.un(r),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&t)return t(e),this.events&&this.events.un(r),!1}},this.events.on(r),this.request({method:"POST",data:e,scope:this,success:function(e,t){e.eventId=n,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=n),e.eventId=n,this.serviceProcessFailed(e,t)}}))}},{key:"getJsonParameters",value:function(e){var t="";t+="[{'type': 'UGC','subLayers': {'layers': [";for(var n=0;n<e.themes.length;n++){var r,o=e.themes[n];t+="{'theme': "+L.toJSON(o).slice(0,-1)+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&0<o.length&&(1===o.length?t+="'displayFilter':\""+o[0]+'",':t+="'displayFilter':\""+o[n]+'",'),(o=e.displayOrderBy)&&0<o.length&&(1===o.length?t+="'displayOrderBy':'"+o[0]+"',":t+="'displayOrderBy':'"+o[n]+"',"),(o=e.fieldValuesDisplayFilter)&&(t+="'fieldValuesDisplayFilter':"+L.toJSON(o)+","),e.joinItems&&0<e.joinItems.length&&e.joinItems[n]&&(t+="'joinItems':["+L.toJSON(e.joinItems[n])+"],"),e.datasetNames&&e.dataSourceNames?(o=e.datasetNames[n]?n:e.datasetNames.length-1,r=e.dataSourceNames[n]?n:e.dataSourceNames.length-1,t+="'datasetInfo': {'name': '"+e.datasetNames[o]+"','dataSourceName': '"+e.dataSourceNames[r]+"'}},"):t+="},"}e.themes&&0<e.themes.length&&(t=t.substring(0,t.length-1)),t+="]},";var i=this.url.split("/");return t+("'name': '"+i[i.length-2])+"'}]"}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Yj(e){return(Yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xj(e,t){return(Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qj(e){return(qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=qj(n),t=(e=r?(e=qj(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==Yj(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._themeService=new Wj(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return Hj((e=i).prototype,[{key:"getThemeInfo",value:function(e,t){this._themeService.processAsync(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Jj((VC=Kj).prototype,[{key:"destroy",value:function(){L.reset(this)}}]),Object.defineProperty(VC,"prototype",{writable:!1});var Zj=Kj;function Kj(e){if(!(this instanceof Kj))throw new TypeError("Cannot call a class as a function");e=e||{},this.keyWord=null,this.returnPosition=!1,L.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"}function Qj(e){return(Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eC(){return(eC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rC(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function tC(e,t){return(tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rC(e){return(rC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oC=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=rC(n),t=(e=r?(e=rC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===Qj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nC(t)};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t=t||{},L.extend(nC(e),t),e.CLASS_NAME="SuperMap.StopQueryService",e;throw new TypeError("Cannot call a class as a function")}return $j((e=i).prototype,[{key:"destroy",value:function(){eC(rC(i.prototype),"destroy",this).call(this),L.reset(this)}},{key:"processAsync",value:function(e){e instanceof Zj&&(this.url=L.urlPathAppend(this.url,"stops/keyword/"+e.keyWord),this.request({method:"GET",params:{returnPosition:e.returnPosition},scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function iC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}VC=[{key:"toJson",value:function(e){if(e)return L.toJSON(e)}}],iC((CC=sC).prototype,[{key:"destroy",value:function(){L.reset(this)}}]),iC(CC,VC),Object.defineProperty(CC,"prototype",{writable:!1});var aC=sC;function sC(e){if(!(this instanceof sC))throw new TypeError("Cannot call a class as a function");e=e||{},this.transferLines=null,this.points=null,L.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"}function uC(e){return(uC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cC(){return(cC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hC(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function fC(e,t){return(fC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hC(e){return(hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pC=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=hC(n),t=(e=r?(e=hC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==uC(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferPathService",e;throw new TypeError("Cannot call a class as a function")}return lC((e=i).prototype,[{key:"destroy",value:function(){cC(hC(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){e instanceof aC&&(this.url=L.urlPathAppend(this.url,"path"),e={points:L.toJSON(e.points),transferLines:L.toJSON(e.transferLines)},this.request({method:"GET",params:e,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}VC=[{key:"toJson",value:function(e){if(e)return L.toJSON(e)}}],dC((CC=gC).prototype,[{key:"destroy",value:function(){L.reset(this)}}]),dC(CC,VC),Object.defineProperty(CC,"prototype",{writable:!1});var yC=gC;function gC(e){if(!(this instanceof gC))throw new TypeError("Cannot call a class as a function");e=e||{},this.solutionCount=6,this.transferPreference=sn.NONE,this.transferTactic=an.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,L.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}function vC(e){return(vC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bC(){return(bC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_C(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function wC(e,t){return(wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _C(e){return(_C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xC=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=_C(n),t=(e=r?(e=_C(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==vC(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferSolutionService",e;throw new TypeError("Cannot call a class as a function")}return mC((e=i).prototype,[{key:"destroy",value:function(){bC(_C(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t;e instanceof yC&&(this.url=L.urlPathAppend(this.url,"solutions"),t={points:L.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=L.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=L.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=L.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=L.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),this.request({method:"GET",params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed}))}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}SC((VC=PC).prototype,[{key:"queryStop",value:function(e,t){new oC(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){new pC(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferSolution",value:function(e,t){new xC(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers,eventListeners:{scope:this,processCompleted:t,processFailed:t}}).processAsync(e)}}]),Object.defineProperty(VC,"prototype",{writable:!1});var OC=PC;function PC(e,t){if(!(this instanceof PC))throw new TypeError("Cannot call a class as a function");this.url=e,this.options=t||{}}function EC(e){return(EC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MC(e,t){return(MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jC(e){return(jC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CC=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=jC(n),t=(e=r?(e=jC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==EC(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._trafficTransferAnalystService=new OC(e,t),n;throw new TypeError("Cannot call a class as a function")}return kC((e=i).prototype,[{key:"queryStop",value:function(e,t){this._trafficTransferAnalystService.queryStop(e,t)}},{key:"analysisTransferPath",value:function(e,t){this._trafficTransferAnalystService.analysisTransferPath(e,t)}},{key:"analysisTransferSolution",value:function(e,t){this._trafficTransferAnalystService.analysisTransferSolution(e,t)}},{key:"_processParams",value:function(n){return n?(n.transferLines&&!_.isArray(n.transferLines)&&(n.transferLines=[n.transferLines]),n.points&&_.isArray(n.points)&&n.points.map(function(e,t){return n.points[t]=e instanceof l().LngLat?{x:e.lng,y:e.lat}:e,n.points[t]}),n):{}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function TC(e){return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IC(){return(IC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DC(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function RC(e,t){return(RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LC(e,t){if(t&&("object"===TC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NC(e)}function NC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DC(e){return(DC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BC=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=DC(n);return LC(this,r?(e=DC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))};function i(e,t){if(this instanceof i)return e=o.call(this,e,t),t&&L.extend(NC(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.WebPrintingService",e.url?e:LC(e);throw new TypeError("Cannot call a class as a function")}return AC((e=i).prototype,[{key:"destroy",value:function(){IC(DC(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e,t){e&&(e.layoutOptions&&e.layoutOptions.legendOptions&&(e.layoutOptions.legendOptions.title||(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems)&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,"")),this.processAsync("jobs","POST",t,e))}},{key:"getPrintingJob",value:function(t,n){var r=this;r.processAsync("jobs/".concat(t),"GET",function(e){r.rollingProcess(e,r._processUrl("jobs/".concat(t)),n)})}},{key:"getPrintingJobResult",value:function(e,t){this.processAsync("jobs/".concat(e,"/result"),"GET",t)}},{key:"getLayoutTemplates",value:function(e){this.processAsync("layouts","GET",e)}},{key:"rollingProcess",value:function(e,r,o){var i,a=this;e&&(i=setInterval(function(){var n=++a.eventCount,t={scope:this,processCompleted:function(e){if(n===e.result.eventId&&o)return delete e.result.eventId,o(e),a.events.un(t),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&o)return o(e),a.events.un(t),!1}};a.events.on(t),a.request({url:r,method:"GET",scope:a,success:function(e,t){switch(e.eventId=n,e.status){case"FINISHED":clearInterval(i),a.serviceProcessCompleted(e,t);break;case"ERROR":clearInterval(i),a.serviceProcessFailed(e,t);break;case"RUNNING":a.events.triggerEvent("processRunning",e)}},failure:a.serviceProcessFailed})},1e3))}},{key:"processAsync",value:function(e,t,n,r){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(i),!1},processFailed:function(e){if(o===e.error.eventId||o===e.eventId)return n(e),this.events&&this.events.un(i),!1}},e=(this.events.on(i),{url:this._processUrl(e),method:t,scope:this,success:function(e,t){e.eventId=o,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,this.serviceProcessFailed(e,t)}});r&&(e.data=L.toJSON(r)),this.request(e)}},{key:"_processUrl",value:function(e){return e?L.urlPathAppend(this.url,e):this.url}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FC(e){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zC(e,t){return(zC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UC(e){return(UC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var VC=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=UC(n),t=(e=r?(e=UC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==FC(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t))._webPrintingService=new BC(e,t),n;throw new TypeError("Cannot call a class as a function")}return GC((e=i).prototype,[{key:"createWebPrintingJob",value:function(e,t){e&&this._webPrintingService.createWebPrintingJob(this._processParams(e),t)}},{key:"getPrintingJob",value:function(e,t){this._webPrintingService.getPrintingJob(e,t)}},{key:"getPrintingJobResult",value:function(e,t){this._webPrintingService.getPrintingJobResult(e,t)}},{key:"getLayoutTemplates",value:function(e){this._webPrintingService.getLayoutTemplates(e)}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return _.isArray(e)?{x:e[0],y:e[1]}:e instanceof j||e instanceof l().Point?{x:e.x,y:e.y}:e instanceof l().LngLat?{x:e.lng,y:e.lat}:e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function WC(e){return(WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YC(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function HC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XC(){return(XC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZC(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function qC(e,t){return(qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function JC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZC(e){return(ZC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KC=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qC(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=ZC(n),t=(e=r?(e=ZC(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===WC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return JC(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).options=t||{},t&&L.extend(JC(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.ImageService",e;throw new TypeError("Cannot call a class as a function")}return HC((e=i).prototype,[{key:"destroy",value:function(){XC(ZC(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(e){var t=L.convertPath("/collections"),t=L.urlPathAppend(this.url,t);this._processAsync({url:t,mehtod:"GET",callback:e})}},{key:"getCollectionByID",value:function(e,t){e=L.convertPath("/collections/{collectionId}",{collectionId:e}),e=L.urlPathAppend(this.url,e);this._processAsync({url:e,mehtod:"GET",callback:t})}},{key:"search",value:function(e,t){var e=function(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?YC(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):YC(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}({},e||{}),n=L.convertPath("/search"),n=L.urlPathAppend(this.url,n);this._processAsync({url:n,method:"POST",data:e,callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,n=e.method,r=e.callback,e=e.data,o=++this.eventCount,i=this,a={scope:this,processCompleted:function(e){if(o===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(a),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&r)return r(e),this.events&&this.events.un(a),!1}};this.events.on(a),this.request({method:n||"GET",url:t,data:e,scope:this,success:function(e,t){e.eventId=o,i.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,i.serviceProcessFailed(e,t)}})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function QC(e){return(QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eT(e,t){return(eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tT(e){return(tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nT=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=tT(n),t=(e=r?(e=tT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==QC(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._imageService=new KC(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return $C((e=i).prototype,[{key:"getCollections",value:function(e){this._imageService.getCollections(e)}},{key:"getCollectionByID",value:function(e,t){this._imageService.getCollectionByID(e,t)}},{key:"search",value:function(e,t){this._imageService.search(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iT(){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uT(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function aT(e,t){return(aT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uT(e){return(uT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lT=function(){var e=i,t=m;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=uT(n),t=(e=r?(e=uT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===rT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sT(t)};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t)).options=t||{},t&&L.extend(sT(e),t),e.eventCount=0,e.CLASS_NAME="SuperMap.ImageCollectionService",e;throw new TypeError("Cannot call a class as a function")}return oT((e=i).prototype,[{key:"destroy",value:function(){iT(uT(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(e,t){var n={collectionId:this.options.collectionId},n=L.convertPath("/collections/{collectionId}/legend",n),n=L.urlPathAppend(this.url,n);this._processAsync({url:n,method:"GET",params:e,callback:t})}},{key:"getStatistics",value:function(e){var t={collectionId:this.options.collectionId},t=L.convertPath("/collections/{collectionId}/statistics",t),t=L.urlPathAppend(this.url,t);this._processAsync({url:t,method:"GET",callback:e})}},{key:"getTileInfo",value:function(e){var t={collectionId:this.options.collectionId},t=L.convertPath("/collections/{collectionId}/tileInfo",t),t=L.urlPathAppend(this.url,t);this._processAsync({url:t,method:"GET",callback:e})}},{key:"deleteItemByID",value:function(e,t){e={collectionId:this.options.collectionId,featureId:e},e=L.convertPath("/collections/{collectionId}/items/{featureId}",e),e=L.urlPathAppend(this.url,e);this._processAsync({url:e,method:"DELETE",callback:t})}},{key:"getItemByID",value:function(e,t){e={collectionId:this.options.collectionId,featureId:e},e=L.convertPath("/collections/{collectionId}/items/{featureId}",e),e=L.urlPathAppend(this.url,e);this._processAsync({url:e,method:"GET",callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,n=e.method,r=e.callback,e=e.params,o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(i),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&r)return r(e),this.events&&this.events.un(i),!1}};this.events.on(i),this.request({method:n||"GET",url:t,params:e,scope:this,success:function(e,t){e.eventId=o,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,this.serviceProcessFailed(e,t)}})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cT(e){return(cT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hT(e,t){return(hT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pT(e){return(pT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dT=function(){var e=i,t=g;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=pT(n),t=(e=r?(e=pT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==cT(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){if(this instanceof i)return(e=o.call(this,e,t))._imageCollectionService=new lT(e.url,{collectionId:e.options.collectionId,proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}),e;throw new TypeError("Cannot call a class as a function")}return fT((e=i).prototype,[{key:"getLegend",value:function(e,t){this._imageCollectionService.getLegend(e,t)}},{key:"getStatistics",value:function(e){this._imageCollectionService.getStatistics(e)}},{key:"getTileInfo",value:function(e){this._imageCollectionService.getTileInfo(e)}},{key:"deleteItemByID",value:function(e,t){this._imageCollectionService.deleteItemByID(e,t)}},{key:"getItemByID",value:function(e,t){this._imageCollectionService.getItemByID(e,t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}(),k=window.SuperMap=window.SuperMap||{};function yT(e){return(yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vT(e,t){return(vT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mT(e){return(mT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}k.Components=window.SuperMap.Components||{};var bT=function(){var e=i,t=ot;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),vT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=mT(n),t=(e=r?(e=mT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==yT(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},e.CLASS_NAME="SuperMap.Format.WKT",e.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.components[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.components[n]])+")");return t.join(",")},collection:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.components[n]]));return t.join(",")}},e.parse={point:function(e){e=q.trim(e).split(this.regExes.spaces);return new nt(new j(e[0],e[1]))},multipoint:function(e){for(var t,n=q.trim(e).split(","),r=[],o=0,i=n.length;o<i;++o)t=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]).geometry);return new nt(new Oe(r))},linestring:function(e){for(var t=q.trim(e).split(","),n=[],r=0,o=t.length;r<o;++r)n.push(this.parse.point.apply(this,[t[r]]).geometry);return new nt(new Re(n))},multilinestring:function(e){for(var t,n=q.trim(e).split(this.regExes.parenComma),r=[],o=0,i=n.length;o<i;++o)t=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]).geometry);return new nt(new dt(r))},polygon:function(e){for(var t,n=q.trim(e).split(this.regExes.parenComma),r=[],o=0,i=n.length;o<i;++o)t=n[o].replace(this.regExes.trimParens,"$1"),t=this.parse.linestring.apply(this,[t]).geometry,t=new Ge(t.components),r.push(t);return new nt(new Ye(r))},multipolygon:function(e){for(var t,n=q.trim(e).split(this.regExes.doubleParenComma),r=[],o=0,i=n.length;o<i;++o)t=n[o].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]).geometry);return new nt(new mt(r))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=q.trim(e).split("|"),n=[],r=0,o=t.length;r<o;++r)n.push(this.read(t[r]));return n}},e;throw new TypeError("Cannot call a class as a function")}return gT((e=i).prototype,[{key:"read",value:function(e){e=e.replace(/[\n\r]/g," ");var t,n,e=this.regExes.typeStr.exec(e);return t=e&&(n=e[1].toLowerCase(),e=e[2],this.parse[n])?this.parse[n].apply(this,[e]):t}},{key:"write",value:function(e){var t,n,r=e.constructor===Array?(t=e,!0):!(t=[e]),o=[];r&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)r&&0<i&&o.push(","),n=t[i].geometry,o.push(this.extractGeometry(n));return r&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}wT((jT=xT).prototype,[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&0<=e.speed&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&0<=e.frequency&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){this.running||(this.running=!0,this.tick(),this.events.triggerEvent("start",this.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){this.currentTime=this.startTime,this.running&&(this.running=!1),this.events.triggerEvent("stop",this.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return 0<=e&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return 0<=e&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){return!((e=Date.parse(new Date(e)))>this.endTime||(this.startTime=e,this.currentTime<this.startTime&&(this.currentTime=this.startTime,this.tick()),0))}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){return this.endTime=Date.parse(new Date(this.endTime)),!(e<this.startTime||(this.endTime=e,this.currentTime>=this.endTime&&(this.currentTime=this.startTime,this.tick()),0))}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){return this.currentTime=Date.parse(new Date(this.currentTime)),e>=this.startTime&&e<=this.endTime&&(this.currentTime=e,this.startTime=this.currentTime,this.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){this.speed=null,this.frequency=null,this.startTime=null,this.endTime=null,this.currentTime=null,this.repeat=null,this.running=!1,this.reverse=null}},{key:"tick",value:function(){}}]),Object.defineProperty(jT,"prototype",{writable:!1});var _T=xT;function xT(e){if(!(this instanceof xT))throw new TypeError("Cannot call a class as a function");var t=this;this.speed=(e=e||{}).speed&&0<=e.speed?e.speed:1,this.frequency=e.speed&&0<=e.frequency?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=t.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],t.events=new Qr(this,null,this.EVENT_TYPES),t.speed=Number(t.speed),t.frequency=Number(t.frequency),t.startTime=Number(t.startTime),t.endTime=Number(t.endTime),t.startTime=Date.parse(new Date(t.startTime)),t.endTime=Date.parse(new Date(t.endTime)),t.currentTime=t.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}function ST(e){return(ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PT(){return(PT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MT(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ET(e,t){return(ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MT(e){return(MT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jT=function(){var e=i,t=_T;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),ET(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=MT(n),t=(e=r?(e=MT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ST(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kT(t)};function i(e,t){var n;if(this instanceof i)return(n=kT(t=o.call(this,t))).callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return r.apply(this instanceof o&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),r=this,o=function(){};return o.prototype=this.prototype,t.prototype=new o,t}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",t;throw new TypeError("Cannot call a class as a function")}return OT((e=i).prototype,[{key:"updateOptions",value:function(e){e=e||{},PT(MT(i.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){PT(MT(i.prototype),"stop",this).call(this);this.oldTime=this.currentTime,this.running&&(this.running=!1),this.intervalId&&window.clearTimeout(this.intervalId)}},{key:"destroy",value:function(){PT(MT(i.prototype),"destroy",this).call(this),this.oldTime=null,this.callback=null}},{key:"tick",value:function(){this.intervalId&&window.clearInterval(this.intervalId),this.intervalId=null,this.update(),this.intervalId=window.setInterval(this.update,this.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}CT((BT=AT).prototype,[{key:"request",value:function(e,t,n,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var o=Pf.imanagerToken;return o&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=o),n=n&&JSON.stringify(n),y.commit(e,t,n,r).then(function(e){return e.json()})}}]),Object.defineProperty(BT,"prototype",{writable:!1});var TT=AT;function AT(e,t){var n;if(!(this instanceof AT))throw new TypeError("Cannot call a class as a function");e&&(n=e.substr(e.length-1,1),this.serviceUrl="/"===n?e.substr(0,e.length-2):e),this.options=t||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}BT=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",L.extend(this,t)},Object.defineProperty(BT,"prototype",{writable:!1});var IT=BT;function RT(e){return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NT(e,t){return(NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DT(e){return(DT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BT=function(){var e=i,t=TT;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),NT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=DT(n),t=(e=r?(e=DT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==RT(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return o.call(this,e);throw new TypeError("Cannot call a class as a function")}return LT((e=i).prototype,[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new IT(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new IT(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}FT((tA=zT).prototype,[{key:"request",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=Pf.appendCredential(t),y.commit(e,t,n,r).then(function(e){return e.json()})}}]),Object.defineProperty(tA,"prototype",{writable:!1});var GT=zT;function zT(e,t){if(!(this instanceof zT))throw new TypeError("Cannot call a class as a function");t=t||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=t.withCredentials||!1,this.crossOrigin=t.crossOrigin,this.headers=t.headers}tA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],L.extend(this,t)},Object.defineProperty(tA,"prototype",{writable:!1});var UT=tA;tA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,L.extend(this,t)},Object.defineProperty(tA,"prototype",{writable:!1});var VT=tA;function WT(e){return(WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HT(e,t){return(HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function XT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qT(e){return(qT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JT=function(){var e=i,t=GT;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),HT(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=qT(n),t=(e=r?(e=qT(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===WT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return XT(t)};function i(e,t){var n;if(this instanceof i)return t=t||{},(n=o.call(this,e)).authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},L.extend(XT(n),t),n.resourceUrl=e+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=e+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n;throw new TypeError("Cannot call a class as a function")}return YT((e=i).prototype,[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase(),t=("data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json"),JSON.stringify(this.sourceJSON));return"service"===e&&(e={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl},t=JSON.stringify(e)),this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();tA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.ids=[],this.entities=[],this.resourceType="",L.extend(this,t)},Object.defineProperty(tA,"prototype",{writable:!1});var ZT=tA;function KT(e){return(KT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $T(e,t){return($T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eA(e){return(eA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tA=function(){var e=i,t=GT;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),$T(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=eA(n),t=(e=r?(e=eA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==KT(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this,e,t)).iportalUrl=e,n.withCredentials=(t=t||{}).withCredentials||!1,n;throw new TypeError("Cannot call a class as a function")}return QT((e=i).prototype,[{key:"load",value:function(){return y.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){var r,t;return e instanceof UT?(t=(r=this).iportalUrl+"/gateway/catalog/resource/search.json",e.t=(new Date).getTime(),this.request("GET",t,e).then(function(e){var t=[],n=((e.content||[]).forEach(function(e){t.push(new JT(r.iportalUrl,e))}),new VT);return n.content=t,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})):new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")})}},{key:"updateResourcesShareSetting",value:function(e){var t;return e instanceof ZT?(t=e.resourceType.replace("_","").toLowerCase()+"s",e={ids:e.ids,entities:e.entities},t=this.iportalUrl+"/web/"+(t="datas"===t?"mycontent/"+t:t)+"/sharesetting.json",this.request("PUT",t,JSON.stringify(e)).then(function(e){return e})):new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")})}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();nA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,L.extend(this,t)},Object.defineProperty(nA,"prototype",{writable:!1});var nA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.rootUrl="",this.tags=[],this.entities=[],L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var rA=pA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var oA=pA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var iA=pA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var aA=pA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.type="",this.url="",this.connectionInfo={},L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var sA=pA;pA=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.dataBase="",this.server="",L.extend(this,t)},Object.defineProperty(pA,"prototype",{writable:!1});var uA=pA;function lA(e){return(lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fA(e,t){return(fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hA(e){return(hA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pA=function(){var e=i,t=GT;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),fA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=hA(n),t=(e=r?(e=hA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==lA(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).iportalUrl=e,t;throw new TypeError("Cannot call a class as a function")}return cA((e=i).prototype,[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(e.ids))):this.request("DELETE",n)}},{key:"addMap",value:function(e){var t;return e instanceof rA?(e={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},t=this.iportalUrl+"/web/maps/batchaddmaps.json",this.request("POST",t,JSON.stringify(e)).then(function(e){return e})):this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !")}},{key:"addScene",value:function(e){var t;return e instanceof rA?(e={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},t=this.iportalUrl+"/web/scenes/batchaddscenes.json",this.request("POST",t,JSON.stringify(e)).then(function(e){return e})):this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !")}},{key:"registerService",value:function(e){var t;return e instanceof oA?(e={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},t=this.iportalUrl+"/web/services.json",this.request("POST",t,JSON.stringify(e)).then(function(e){return e})):this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !")}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(e,t){e=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",e,t)}},{key:"addData",value:function(e,t){var n=this;if(!(e instanceof iA))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var r,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof aA))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");r={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(r.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=r}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof aA))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof sA))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,r={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof uA))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",r={dataStoreInfo:s}}i.dataMetaInfo=r}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?n.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){var n,r;return e.dataId&&e.serviceType?(r=e.dataId,n=e.dataServiceId,e=e.serviceType,r=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+e,n&&(r+="&dataServiceId="+n),this.request("PUT",r,JSON.stringify(t)).then(function(e){return t?n=n||e.customResult:e})):this.getErrMsgPromise("option.dataID and option.serviceType are Required!")}},{key:"getDataPublishedStatus",value:function(e,t){e=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",e)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}dA((jA=gA).prototype,[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}]),Object.defineProperty(jA,"prototype",{writable:!1});var yA=gA;function gA(e){if(!(this instanceof gA))throw new TypeError("Cannot call a class as a function");this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",L.extend(this,e)}function vA(e){return(vA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bA(e,t){return(bA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _A(e){return(_A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xA=function(){var e=i,t=yA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),bA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=_A(n),t=(e=r?(e=_A(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===vA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wA(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this)).subAggs=null,t.aggType=null,t.CLASS_NAME="SuperMap.BucketAggParameter",L.extend(wA(t),e),t;throw new TypeError("Cannot call a class as a function")}return mA((e=i).prototype,[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SA(e){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PA(){return(PA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MA(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function EA(e,t){return(EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MA(e){return(MA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jA=function(){var e=i,t=yA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),EA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=MA(n),t=(e=r?(e=MA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===SA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kA(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this)).aggType=mn.AVG,L.extend(kA(t),e),t.CLASS_NAME="SuperMap.MetricsAggParameter",t;throw new TypeError("Cannot call a class as a function")}return OA((e=i).prototype,[{key:"destroy",value:function(){PA(MA(i.prototype),"destroy",this).call(this),this.aggType=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}CA((TA=AA).prototype,[{key:"destroy",value:function(){this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=null,this.isExactClip=null}},{key:"toJSON",value:function(){return L.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:s.fromGeometry(this.clipRegion)})}}]),Object.defineProperty(TA,"prototype",{writable:!1});var TA=AA;function AA(e){if(!(this instanceof AA))throw new TypeError("Cannot call a class as a function");this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"}function IA(e){return(IA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LA(){return(LA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BA(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function NA(e,t){return(NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BA(e){return(BA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FA=function(){var e=i,t=xA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=BA(n),t=(e=r?(e=BA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===IA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return DA(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this)).precision=5,L.extend(DA(t),e),t.aggType=vn.GEOHASH_GRID,t.CLASS_NAME="SuperMap.GeoHashGridAggParameter",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"toJsonParameters",value:function(e){e={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return L.toJson(e)}}],RA((t=i).prototype,[{key:"destroy",value:function(){LA(BA(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}]),RA(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();HA=function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.CLASS_NAME="LabelMatrixCell"},Object.defineProperty(HA,"prototype",{writable:!1});var GA=HA;function zA(e){return(zA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VA(e,t){return(VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YA(e){return(YA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HA=function(){var e=i,t=GA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),VA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=YA(n),t=(e=r?(e=YA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===zA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return WA(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).height=0,t.pathField=null,t.rotation=0,t.width=0,t.sizeFixed=!1,t.type="IMAGE",e&&L.extend(WA(t),e),t.CLASS_NAME="SuperMap.LabelImageCell",t;throw new TypeError("Cannot call a class as a function")}return UA((e=i).prototype,[{key:"destroy",value:function(){this.height=null,this.pathField=null,this.rotation=null,this.width=null,this.sizeFixed=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XA(e){return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JA(e,t){return(JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KA(e){return(KA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QA=function(){var e=i,t=GA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),JA(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=KA(n),t=(e=r?(e=KA(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===XA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZA(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).style=new c,t.symbolIDField=null,t.type="SYMBOL",e&&L.extend(ZA(t),e),t.CLASS_NAME="SuperMap.LabelSymbolCell",t;throw new TypeError("Cannot call a class as a function")}return qA((e=i).prototype,[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $A(e){return($A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t3(e,t){return(t3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r3(e){return(r3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o3=function(){var e=i,t=GA;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t3(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=r3(n),t=(e=r?(e=r3(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===$A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return n3(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).themeLabel=new xm,t.type="THEME",e&&L.extend(n3(t),e),t.CLASS_NAME=" SuperMap.LabelThemeCell",t;throw new TypeError("Cannot call a class as a function")}return e3((e=i).prototype,[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function i3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i3((a3=s3).prototype,[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{",t=(e+='"type":"UGC",',[]);return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),!this.minScale&&0!=this.minScale||t.push('"minScale":'+this.minScale),!this.maxScale&&0!=this.maxScale||t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+L.toJSON(this.fieldValuesDisplayFilter)),(e+=t)+"}"}}]),Object.defineProperty(a3,"prototype",{writable:!1});var a3=s3;function s3(e){if(!(this instanceof s3))throw new TypeError("Cannot call a class as a function");this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"}function u3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u3((l3=c3).prototype,[{key:"destroy",value:function(){this.datasourceConnectionInfo instanceof fS&&(this.datasourceConnectionInfo.destroy(),this.datasourceConnectionInfo=null),this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null}}]),Object.defineProperty(l3,"prototype",{writable:!1});var l3=c3;function c3(e){if(!(this instanceof c3))throw new TypeError("Cannot call a class as a function");this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"}function f3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}f3((h3=p3).prototype,[{key:"destroy",value:function(){L.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e,t=this.ugcLayer.toServerJSONObject.apply(this,arguments),n="{";for(e in t)t.hasOwnProperty(e)&&(n+="'"+e+"':"+t[e]+",");return(n=n.substr(0,n.length-1))+"}"}}]),Object.defineProperty(h3,"prototype",{writable:!1});var h3=p3;function p3(e){if(!(this instanceof p3))throw new TypeError("Cannot call a class as a function");e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,L.extend(this,e),this.ugcLayer=new x0(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}function d3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}d3((y3=g3).prototype,[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}]),Object.defineProperty(y3,"prototype",{writable:!1});var y3=g3;function g3(e){if(!(this instanceof g3))throw new TypeError("Cannot call a class as a function");e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}function v3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}v3((m3=b3).prototype,[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}]),Object.defineProperty(m3,"prototype",{writable:!1});var m3=b3;function b3(e){if(!(this instanceof b3))throw new TypeError("Cannot call a class as a function");e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,L.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}function w3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_3=[{key:"fromJson",value:function(e){if(e)return new x3({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],w3((O3=x3).prototype,[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}]),w3(O3,_3),Object.defineProperty(O3,"prototype",{writable:!1});var _3=x3;function x3(e){if(!(this instanceof x3))throw new TypeError("Cannot call a class as a function");this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}function S3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}O3=[{key:"fromObj",value:function(e){var t;if(e)return t=new P3,L.copy(t,e),t.leaderLineStyle=c.fromJson(e.leaderLineStyle),t}}],S3((L3=P3).prototype,[{key:"destroy",value:function(){this.flowEnabled=null,this.leaderLineDisplayed=null,this.leaderLineStyle&&(this.leaderLineStyle.destroy(),this.leaderLineStyle=null)}}]),S3(L3,O3),Object.defineProperty(L3,"prototype",{writable:!1});var O3=P3;function P3(e){if(!(this instanceof P3))throw new TypeError("Cannot call a class as a function");this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new c,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}function E3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}L3=[{key:"fromObj",value:function(e){var t;if(e)return t=new M3,L.copy(t,e),t.color=u.fromJson(e.color),t}}],E3((Y3=M3).prototype,[{key:"destroy",value:function(){this.caption=null,this.end=null,this.start=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}]),E3(Y3,L3),Object.defineProperty(Y3,"prototype",{writable:!1});var k3=M3;function M3(e){if(!(this instanceof M3))throw new TypeError("Cannot call a class as a function");this.caption=null,this.color=new u,this.end=0,this.start=0,this.visible=!0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}function j3(e){return(j3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T3(){return(T3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R3(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function A3(e,t){return(A3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R3(e){return(R3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L3=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),A3(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=R3(n),t=(e=r?(e=R3(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===j3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return I3(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"GRIDRANGE",e)).items=null,t.rangeMode=Ht.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Xt.YELLOW_RED,t.reverseColor=!1,e&&L.extend(I3(t),e),t.CLASS_NAME="SuperMap.ThemeGridRange",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){if(e){var t=new i,n=(L.copy(t,e),e.items),r=n?n.length:0;t.items=[];for(var o=0;o<r;o++)t.items.push(k3.fromObj(n[o]));return t}}}],C3((t=i).prototype,[{key:"destroy",value:function(){T3(R3(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(0<e.items.length)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}]),C3(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function N3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Y3=[{key:"fromObj",value:function(e){var t=new B3;return L.copy(t,e),t.color=u.fromJson(e.color),t}}],N3((X3=B3).prototype,[{key:"destroy",value:function(){this.caption=null,this.unique=null,this.color&&(this.color.destroy(),this.color=null),this.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=L.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}]),N3(X3,Y3),Object.defineProperty(X3,"prototype",{writable:!1});var D3=B3;function B3(e){if(!(this instanceof B3))throw new TypeError("Cannot call a class as a function");this.caption=null,this.color=new u,this.unique=null,this.visible=!0,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}function F3(e){return(F3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z3(){return(z3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W3(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function U3(e,t){return(U3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W3(e){return(W3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y3=function(){var e=i,t=Wv;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),U3(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=W3(n),t=(e=r?(e=W3(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===F3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return V3(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,"GRIDUNIQUE",e)).defaultcolor=new u,t.items=null,e&&L.extend(V3(t),e),t.CLASS_NAME="SuperMap.ThemeGridUnique",t;throw new TypeError("Cannot call a class as a function")}return e=[{key:"fromObj",value:function(e){var t=new i,n=e.items,r=n?n.length:0;L.extend(t,e),t.items=[],t.defaultcolor=u.fromJson(e.defaultcolor);for(var o=0;o<r;o++)t.items.push(D3.fromObj(n[o]));return t}}],G3((t=i).prototype,[{key:"destroy",value:function(){z3(W3(i.prototype),"destroy",this).call(this);if(this.items){if(0<this.items.length)for(var e in this.items)this.items[e].destroy(),this.items[e]=null;this.items=null}this.defaultcolor&&(this.defaultcolor.destroy(),this.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=L.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}]),G3(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function H3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}X3=[{key:"fromObj",value:function(e){var t;if(e)return t=new q3,L.copy(t,e),t}}],H3((Z3=q3).prototype,[{key:"destroy",value:function(){this.unique=null,this.caption=null,this.offsetX=null,this.offsetY=null,this.style&&(this.style.destroy(),this.style=null),this.visible=null}}]),H3(Z3,X3),Object.defineProperty(Z3,"prototype",{writable:!1});var X3=q3;function q3(e){if(!(this instanceof q3))throw new TypeError("Cannot call a class as a function");this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new Xv,e&&L.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}function J3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}J3((Z3=K3).prototype,[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),n=0;n<t;n++)e+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return"{"+(e=0<n?e.substring(0,e.length-1):e)+"}"}return null}}]),Object.defineProperty(Z3,"prototype",{writable:!1});var Z3=K3;function K3(e,t){if(!(this instanceof K3))throw new TypeError("Cannot call a class as a function");this.srcData=e,this.targetData=t,this.CLASS_NAME="SuperMap.ThemeMemoryData"}function Q3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$3=[{key:"fromJson",value:function(e){if(e)return new eI({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],Q3((cI=eI).prototype,[{key:"destroy",value:function(){L.reset(this)}}]),Q3(cI,$3),Object.defineProperty(cI,"prototype",{writable:!1});var $3=eI;function eI(e){if(!(this instanceof eI))throw new TypeError("Cannot call a class as a function");e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,L.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}function tI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}tI((cI=rI).prototype,[{key:"destroy",value:function(){this.type=null}}]),Object.defineProperty(cI,"prototype",{writable:!1});var nI=rI;function rI(e){if(!(this instanceof rI))throw new TypeError("Cannot call a class as a function");e=e||{},this.type=null,L.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}function oI(e){return(oI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aI(){return(aI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lI(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function sI(e,t){return(sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lI(e){return(lI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cI=function(){var e=i,t=nI;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),sI(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=lI(n),t=(e=r?(e=lI(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===oI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uI(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).redIndex=0,t.nirIndex=1,t.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",t.type=bn.NDVI,L.extend(uI(t),e),t.CLASS_NAME="SuperMap.NDVIParameter",t;throw new TypeError("Cannot call a class as a function")}return iI((e=i).prototype,[{key:"destroy",value:function(){aI(lI(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fI(e){return(fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pI(){return(pI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gI(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function dI(e,t){return(dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gI(e){return(gI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vI=function(){var e=i,t=nI;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),dI(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=gI(n),t=(e=r?(e=gI(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===fI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yI(t)};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).altitude=45,t.azimuth=315,t.zFactor=1,t.type=bn.HILLSHADE,L.extend(yI(t),e),t.CLASS_NAME="SuperMap.HillshadeParameter",t;throw new TypeError("Cannot call a class as a function")}return hI((e=i).prototype,[{key:"destroy",value:function(){pI(gI(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mI((C=wI).prototype,[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var bI=wI;function wI(e){if(!(this instanceof wI))throw new TypeError("Cannot call a class as a function");this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",L.extend(this,e)}function _I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_I((C=SI).prototype,[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var xI=SI;function SI(e){if(!(this instanceof SI))throw new TypeError("Cannot call a class as a function");this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",L.extend(this,e)}function OI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}OI((C=EI).prototype,[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}]),Object.defineProperty(C,"prototype",{writable:!1});var PI=EI;function EI(e){if(!(this instanceof EI))throw new TypeError("Cannot call a class as a function");this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",L.extend(this,e)}function kI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}kI((C=jI).prototype,[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof PI&&(this.layers.destroy(),this.layers=null),this.customItems instanceof bI&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var MI=jI;function jI(e){if(!(this instanceof jI))throw new TypeError("Cannot call a class as a function");this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",L.extend(this,e)}function CI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}CI((C=AI).prototype,[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof xI&&(this.image.destroy(),this.image=null),this.layers instanceof PI&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var TI=AI;function AI(e){if(!(this instanceof AI))throw new TypeError("Cannot call a class as a function");this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",L.extend(this,e)}function II(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}II((C=LI).prototype,[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var RI=LI;function LI(e){if(!(this instanceof LI))throw new TypeError("Cannot call a class as a function");this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",L.extend(this,e)}function NI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}NI((C=BI).prototype,[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var DI=BI;function BI(e){if(!(this instanceof BI))throw new TypeError("Cannot call a class as a function");this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",L.extend(this,e)}function FI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}FI((C=zI).prototype,[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var GI=zI;function zI(e){if(!(this instanceof zI))throw new TypeError("Cannot call a class as a function");this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",L.extend(this,e)}function UI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}UI((C=WI).prototype,[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof DI&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof RI&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof TI&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof MI&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var VI=WI;function WI(e){if(!(this instanceof WI))throw new TypeError("Cannot call a class as a function");this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",L.extend(this,e)}function YI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}YI((C=XI).prototype,[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),L.toJSON(e)}}]),Object.defineProperty(C,"prototype",{writable:!1});var HI=XI;function XI(e){if(!(this instanceof XI))throw new TypeError("Cannot call a class as a function");this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",L.extend(this,e)}function qI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}qI((C=JI).prototype,[{key:"destroy",value:function(){this.content instanceof GI&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof VI&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof HI&&(this.exportOptions.destroy(),this.exportOptions=null)}}]),Object.defineProperty(C,"prototype",{writable:!1});var C=JI;function JI(e){if(!(this instanceof JI))throw new TypeError("Cannot call a class as a function");e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,L.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}function ZI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new QI,e.hasOwnProperty("include")&&(t.include=e.include),e.hasOwnProperty("exclude"))&&(t.exclude=e.exclude),t}}],ZI((lR=QI).prototype,[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}]),ZI(lR,rR),Object.defineProperty(lR,"prototype",{writable:!1});var KI=QI;function QI(e){if(!(this instanceof QI))throw new TypeError("Cannot call a class as a function");this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",L.extend(this,e)}function $I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new tR,e.hasOwnProperty("field")&&(t.field=e.field),e.hasOwnProperty("direction"))&&(t.direction=e.direction),t}}],$I((lR=tR).prototype,[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}]),$I(lR,rR),Object.defineProperty(lR,"prototype",{writable:!1});var eR=tR;function tR(e){if(!(this instanceof tR))throw new TypeError("Cannot call a class as a function");this.field=void 0,this.direction=tR.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",L.extend(this,e)}function nR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}eR.Direction={ASC:"ASC",DESC:"DESC"};rR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new oR,e.hasOwnProperty("bbox")&&(t.bbox=e.bbox),e.hasOwnProperty("collections")&&(t.collections=e.collections),e.hasOwnProperty("ids")&&(t.ids=e.ids),e.hasOwnProperty("limit")&&(t.limit=e.limit),e.hasOwnProperty("fields")&&(t.fields=KI.constructFromObject&&KI.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(t.query=e.query),e.hasOwnProperty("sortby"))&&(t.sortby=e.sortby,e.sortby)&&(t.sortby=e.sortby.map(function(e){return eR.constructFromObject&&eR.constructFromObject(e,{})||e})),t}}],nR((lR=oR).prototype,[{key:"destroy",value:function(){this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0}}]),nR(lR,rR),Object.defineProperty(lR,"prototype",{writable:!1});var rR=oR;function oR(e){if(!(this instanceof oR))throw new TypeError("Cannot call a class as a function");this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",L.extend(this,e)}function iR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}lR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new sR,e.hasOwnProperty("stretchType")&&(t.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(t.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(t.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(t.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(t.minPercent=e.minPercent),e.hasOwnProperty("maxPercent"))&&(t.maxPercent=e.maxPercent),t}}],iR((hR=sR).prototype,[{key:"destroy",value:function(){this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0}}]),iR(hR,lR),Object.defineProperty(hR,"prototype",{writable:!1});var aR=sR;function sR(e){if(!(this instanceof sR))throw new TypeError("Cannot call a class as a function");this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",L.extend(this,e)}function uR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}aR.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};lR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new cR,e.hasOwnProperty("displayMode")&&(t.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(t.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(t.stretchOption=aR.constructFromObject&&aR.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(t.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(t.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(t.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(t.brightness=e.brightness),e.hasOwnProperty("contrast")&&(t.contrast=e.contrast),e.hasOwnProperty("noData")&&(t.noData=e.noData),e.hasOwnProperty("noDataColor")&&(t.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(t.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(t.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(t.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(t.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions"))&&(t.gridFunctions=e.gridFunctions),t}}],uR((hR=cR).prototype,[{key:"destroy",value:function(){var e=this;e.displayMode=void 0,e.displayBands=void 0,e.stretchOption=void 0,e.interpolationMode=void 0,e.colorScheme=void 0,e.colorTable=void 0,e.brightness=void 0,e.contrast=void 0,e.noData=void 0,e.noDataColor=void 0,e.noDataTransparent=void 0,e.backgroundValue=void 0,e.backgroundColor=void 0,e.backgroundTransparent=void 0,e.gridFuncOptions=void 0}}]),uR(hR,lR),Object.defineProperty(hR,"prototype",{writable:!1});var lR=cR;function cR(e){if(!(this instanceof cR))throw new TypeError("Cannot call a class as a function");this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",L.extend(this,e)}function fR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}lR.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},lR.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};hR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new pR,e.hasOwnProperty("girdFuncName")&&(t.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(t.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(t.Altitude=e.Altitude),e.hasOwnProperty("ZFactor"))&&(t.ZFactor=e.ZFactor),t}}],fR((yR=pR).prototype,[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}]),fR(yR,hR),Object.defineProperty(yR,"prototype",{writable:!1});var hR=pR;function pR(e){if(!(this instanceof pR))throw new TypeError("Cannot call a class as a function");this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",L.extend(this,e)}function dR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}yR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new gR,e.hasOwnProperty("girdFuncName")&&(t.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth"))&&(t.Azimuth=e.Azimuth),t}}],dR((mR=gR).prototype,[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}]),dR(mR,yR),Object.defineProperty(mR,"prototype",{writable:!1});var yR=gR;function gR(e){if(!(this instanceof gR))throw new TypeError("Cannot call a class as a function");this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",L.extend(this,e)}function vR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}mR=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new bR,e.hasOwnProperty("girdFuncName"))&&(t.girdFuncName=e.girdFuncName),t}}],vR((_R=bR).prototype,[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}]),vR(_R,mR),Object.defineProperty(_R,"prototype",{writable:!1});var mR=bR;function bR(e){if(!(this instanceof bR))throw new TypeError("Cannot call a class as a function");this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",L.extend(this,e)}function wR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}_R=[{key:"constructFromObject",value:function(e,t){return e&&(t=t||new xR,e.hasOwnProperty("girdFuncName")&&(t.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(t.Altitude=e.Altitude),e.hasOwnProperty("ZFactor"))&&(t.ZFactor=e.ZFactor),t}}],wR((IR=xR).prototype,[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}]),wR(IR,_R),Object.defineProperty(IR,"prototype",{writable:!1});var _R=xR;function xR(e){if(!(this instanceof xR))throw new TypeError("Cannot call a class as a function");this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",L.extend(this,e)}function SR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}SR((IR=PR).prototype,[{key:"request",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return t=Pf.appendCredential(t),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers,y.commit(e,t,n,r).then(function(e){return e.json()})}}]),Object.defineProperty(IR,"prototype",{writable:!1});var OR=PR;function PR(e){if(!(this instanceof PR))throw new TypeError("Cannot call a class as a function");L.extend(this,e=e||{}),this.CLASS_NAME="SuperMap.OnlineServiceBase"}function ER(e){return(ER="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MR(e,t){return(MR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CR(e){return(CR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TR=function(){var e=i,t=OR;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),MR(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=CR(n),t=(e=r?(e=CR(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===ER(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jR(t)};function i(e,t){var n;if(this instanceof i)return t=t||{},(n=o.call(this,e)).MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,L.extend(jR(n),t),n.id&&(n.serviceUrl=e+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n;throw new TypeError("Cannot call a class as a function")}return kR((e=i).prototype,[{key:"load",value:function(){var t;if(this.serviceUrl)return(t=this).request("GET",this.serviceUrl).then(function(e){L.extend(t,e)})}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function AR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}AR((IR=RR).prototype,[{key:"load",value:function(){return y.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){Pf.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var a=this,t=a.mDatasUrl;return e=e&&e.toJSON(),y.get(t,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var t=[],n=e.content,r=n.length,o=0;o<r;o++){var i=n[o],i=new TR(a.mDatasUrl,i);t.push(i)}return t}})}}]),Object.defineProperty(IR,"prototype",{writable:!1});var IR=RR;function RR(){if(!(this instanceof RR))throw new TypeError("Cannot call a class as a function");this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"}function LR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}LR((NR=DR).prototype,[{key:"toJSON",value:function(){var e,t={types:this.types,fileName:this.fileName,serviceStatuses:this.serviceStatuses,serviceId:this.serviceId,ids:this.ids,keywords:this.keywords,orderBy:this.orderBy,tags:this.tags,filterFields:this.filterFields};for(e in t)null==t[e]&&delete t[e];return t}}]),Object.defineProperty(NR,"prototype",{writable:!1});var NR=DR;function DR(e){if(!(this instanceof DR))throw new TypeError("Cannot call a class as a function");e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,L.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}function BR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BR((FR=GR).prototype,[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}]),Object.defineProperty(FR,"prototype",{writable:!1});var FR=GR;function GR(e){if(!(this instanceof GR))throw new TypeError("Cannot call a class as a function");this.name=null,this.serviceIds=null,this.clientType=cn.SERVER,this.limitation=null,L.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"}zR=function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,L.extend(this,n),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||Lt.ISERVER,this.server||console.error("server url require is not  undefined");t="/services/security/tokens";this.type===Lt.ISERVER&&this.server.indexOf("iserver")<0&&(t="/iserver"+t),this.tokenServiceUrl||(this.tokenServiceUrl=L.urlPathAppend(this.server,t)),this.keyServiceUrl||(this.type===Lt.IPORTAL?this.keyServiceUrl=L.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===Lt.ONLINE&&(this.keyServiceUrl=L.urlPathAppend(this.server,"/web/mycontent/keys")))},Object.defineProperty(zR,"prototype",{writable:!1});var zR;function UR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}UR((VR=HR).prototype,[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}]),Object.defineProperty(VR,"prototype",{writable:!1});var VR=HR,WR=function(){try{return elasticsearch}catch(e){return{}}}(),YR=e.n(WR);function HR(e){if(!(this instanceof HR))throw new TypeError("Cannot call a class as a function");this.userName=null,this.password=null,this.clientType=cn.NONE,this.ip=null,this.referer=null,this.expiration=60,L.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"}function XR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}qR((WR=JR).prototype,[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,this._handleCallback(t))}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,this._handleCallback(t))}},{key:"count",value:function(e,t){return this.client.count(e,this._handleCallback(t))}},{key:"create",value:function(e,t){return this.client.create(e,this._handleCallback(t))}},{key:"delete",value:function(e,t){return this.client.delete(e,this._handleCallback(t))}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,this._handleCallback(t))}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,this._handleCallback(t))}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,this._handleCallback(t))}},{key:"exists",value:function(e,t){return this.client.exists(e,this._handleCallback(t))}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,this._handleCallback(t))}},{key:"explain",value:function(e,t){return this.client.explain(e,this._handleCallback(t))}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,this._handleCallback(t))}},{key:"get",value:function(e,t){return this.client.get(e,this._handleCallback(t))}},{key:"getScript",value:function(e,t){return this.client.getScript(e,this._handleCallback(t))}},{key:"getSource",value:function(e,t){return this.client.getSource(e,this._handleCallback(t))}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,this._handleCallback(t))}},{key:"index",value:function(e,t){return this.client.index(e,this._handleCallback(t))}},{key:"info",value:function(e,t){return this.client.info(e,this._handleCallback(t))}},{key:"mget",value:function(e,t){return this.client.mget(e,this._handleCallback(t))}},{key:"msearch",value:function(e,t){var n=this;return n.client.msearch(e).then(function(e){return e=e.body||e,n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,this._handleCallback(t))}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,this._handleCallback(t))}},{key:"ping",value:function(e,t){return this.client.ping(e,this._handleCallback(t))}},{key:"putScript",value:function(e,t){return this.client.putScript(e,this._handleCallback(t))}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,this._handleCallback(t))}},{key:"reindex",value:function(e,t){return this.client.reindex(e,this._handleCallback(t))}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,this._handleCallback(t))}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,this._handleCallback(t))}},{key:"scroll",value:function(e,t){return this.client.scroll(e,this._handleCallback(t))}},{key:"search",value:function(e,t){var n=this;return n.client.search(e).then(function(e){return e=e.body||e,n._update(e,t),e},function(e){return t&&t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,this._handleCallback(t))}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,this._handleCallback(t))}},{key:"suggest",value:function(e,t){return this.client.suggest(e,this._handleCallback(t))}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,this._handleCallback(t))}},{key:"update",value:function(e,t){return this.client.update(e,this._handleCallback(t))}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,this._handleCallback(t))}},{key:"_handleCallback",value:function(a){return function(){var e,t,n=Array.from(arguments),r=n.shift(),o=n.shift(),i=o&&o.body;i&&(n=[(e=o).statusCode,e.headers],o=i),a.call.apply(a,[this,r,o].concat(function(e){if(Array.isArray(e))return XR(e)}(t=n)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){var t;if(e)return"string"==typeof e?XR(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?XR(e,void 0):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}},{key:"_update",value:function(e,t){e&&(this.data=e,this.openGeoFence&&this.geoFence&&this._validateDatas(e),this.events.triggerEvent("change",{data:this.data}),this.change?this.change&&this.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e)for(var t=(e=e instanceof Array?e:[e]).length,n=0;n<t;n++)this._validateData(e[n])}},{key:"_validateData",value:function(a){var s=this;a.hits.hits.map(function(e){var t=e._source,n=s._getMeterPerMapUnit(s.geoFence.unit),r=s.geoFence.center[0]*n,o=s.geoFence.center[1]*n,i=t.x*n,t=t.y*n;return s._distance(i,t,r,o)>s.geoFence.radius&&(s.outOfGeoFence&&s.outOfGeoFence(a),s.events.triggerEvent("outOfGeoFence",{data:a})),e})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}]),Object.defineProperty(WR,"prototype",{writable:!1});WR=JR;function JR(e,t){if(!(this instanceof JR))throw new TypeError("Cannot call a class as a function");t=t||{},this.url=e;try{this.client=new(YR().Client)({host:this.url})}catch(e){this.client=new(YR().Client)({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Qr(this,null,this.EVENT_TYPES),this.eventListeners=null,L.extend(this,t),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}function ZR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var KR=new or,QR=(rL=$R,sL=[{key:"createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.height=e,n.width=t,n.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,n,r,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,n,r),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,n){e=KR.toRGBA(e),t=KR.toRGBA(t),e=KR.getData(e);for(var r=[],o=((t=KR.getData(t))[0]-e[0])/n,i=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,u=0,l=e[0],c=e[1],f=e[2],h=e[3];u<n;u++)r[u]=KR.toColor([KR.adjust(Math.floor(l),[0,255]),KR.adjust(Math.floor(c),[0,255]),KR.adjust(Math.floor(f),[0,255]),+h.toFixed(4)],"hex"),l+=o,c+=i,f+=a,h+=s;return l=t[0],c=t[1],f=t[2],h=t[3],r[u]=KR.toColor([l,c,f,h],"hex"),r}},{key:"getGradientColors",value:function(e,t,n){var r,o,i,a=[],s=e.length;if(void 0!==t){if(t<=s)if("RANGE"===n)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var u=Math.floor(o/2);o%2==0?a.push(e[u]):(u=e.length-1-u,a.push(e[u]))}else{for(r=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var l=this.getStepColors(e[o],e[o+1],r);o<i-1&&l.pop(),a=a.concat(l)}for(var c=a.length-t,f=0;f<c;f++)a.splice(2,1)}return a}}}],null&&ZR(rL.prototype,null),ZR(rL,sL),Object.defineProperty(rL,"prototype",{writable:!1}),$R);function $R(){if(!(this instanceof $R))throw new TypeError("Cannot call a class as a function")}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}sL=nL,rL=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||""===t?this.getSum(e):"Maximum"===t||""===t?this.getMax(e):"Minimum"===t||""===t?this.getMin(e):"Average"===t||""===t?this.getMean(e):"Median"===t||""===t?this.getMedian(e):"times"===t||""===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,n){return"offset"===t?this.getEqInterval(e,n):"jenks"===t?this.getJenks(e,n):"square"===t?0<=this.getMin(e)&&this.getSqrtInterval(e,n):"logarithm"===t?0<this.getMin(e)&&this.getGeometricProgression(e,n):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],null&&eL(sL.prototype,null),eL(sL,rL),Object.defineProperty(sL,"prototype",{writable:!1});var tL=nL;function nL(){if(!(this instanceof nL))throw new TypeError("Cannot call a class as a function")}var rL=e(77820),oL=e.n(rL);function iL(e){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&aL(e.prototype,t),n&&aL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}A(R,[{key:"getParser",value:function(i){var p,c,a,e,f,s,u,l,h,d=this;function o(){e=u[a],l=f=c}function y(){u[a]=e,l=c=f}function g(){l<c&&(u[a]=u[a].slice(c-l),l=c)}function v(e){var t,n,r;if(e instanceof Function)return e.call(h.parsers);if("string"==typeof e)t=p.charAt(c)===e?e:null,n=1,g();else{if(g(),!(t=e.exec(u[a])))return null;n=t[0].length}if(t){for(var e=c+=n,o=c+u[a].length-n;c<o&&(32===(r=p.charCodeAt(c))||10===r||9===r);)c++;return u[a]=u[a].slice(n+(c-e)),l=c,0===u[a].length&&a<u.length-1&&a++,"string"!=typeof t&&1===t.length?t[0]:t}}function m(e){var t,n,r={index:s,filename:i.filename,message:"Parse error.",line:0,column:-1};for(n in r)0===e[n]&&(e[n]=r[n]);t=e.filename&&d.env.inputs&&d.env.inputs[e.filename]?d.env.inputs[e.filename]:p,e.line=(t.slice(0,e.index).match(/\n/g)||"").length+1;for(var o=e.index;0<=o&&"\n"!==t.charAt(o);o--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=i=i||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},h={parse:function(e){var h=null;if(c=a=l=s=0,u=[],p=e.replace(/\r\n/g,"\n"),i.filename&&(d.env.inputs[i.filename]=p),u=function(e){for(var t,n,r,o,i=0,a=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,s=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,l=0,c=e[0],f=0;f<p.length;)if(a.lastIndex=f,(t=a.exec(p))&&t.index===f&&(f+=t[0].length,c.push(t[0])),r=p.charAt(f),s.lastIndex=u.lastIndex=f,(t=u.exec(p))&&t.index===f)f+=t[0].length,c.push(t[0]);else if(n||"/"!==r||"/"!==(o=p.charAt(f+1))&&"*"!==o||!(t=s.exec(p))||t.index!==f){switch(r){case"{":if(!n){l++,c.push(r);break}case"}":if(!n){l--,c.push(r),e[++i]=c=[];break}case"(":if(!n){n=!0,c.push(r);break}case")":if(n){n=!1,c.push(r);break}default:c.push(r)}f++}else f+=t[0].length,c.push(t[0]);return 0!==l&&(h={index:f-1,type:"Parse",message:0<l?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),h)throw m(h);function n(e,t){return e=e.specificity,t=t.specificity,e[0]!=t[0]?t[0]-e[0]:e[1]!=t[1]?t[1]-e[1]:e[2]!=t[2]?t[2]-e[2]:t[3]-e[3]}return(e=new R.Tree.Ruleset([],v(this.parsers.primary))).root=!0,e.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+m(e).message:t.errors.message=m(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(n),e},e},parsers:{primary:function(){for(var e,t=[];(e=v(this.rule)||v(this.ruleset)||v(this.comment))||v(/^[\s\n]+/)||(e=v(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=v(/^[^;\n]*[;\n]/);if(e)return new R.Tree.Invalid(e,f)},comment:function(){var e;if("/"===p.charAt(c))return"/"===p.charAt(c+1)?new R.Tree.Comment(v(/^\/\/.*/),!0):(e=v(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new R.Tree.Comment(e):void 0},entities:{quoted:function(){var e;return('"'===p.charAt(c)||"'"===p.charAt(c))&&(e=v(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))?new R.Tree.Quoted(e[1]||e[2]):void 0},field:function(){var e;if(v("["))return e=v(/(^[^\]]+)/),v("]")&&e?new R.Tree.Field(e[1]):void 0},comparison:function(){var e=v(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=v(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new R.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(u[a]))return"url"===(e=e[1])?null:(c+=e.length,v("("),t=v(this.entities.arguments),v(")")&&e?new R.Tree.Call(e,t,c):void 0)},arguments:function(){for(var e,t=[];(e=v(this.expression))&&(t.push(e),v(",")););return t},literal:function(){return v(this.entities.dimension)||v(this.entities.keywordcolor)||v(this.entities.hexcolor)||v(this.entities.quoted)},url:function(){var e;if("u"===p.charAt(c)&&v(/^url\(/))return e=v(this.entities.quoted)||v(this.entities.variable)||v(/^[\-\w%@_match\/.&=:;#+?~]+/)||"",v(")")?new R.Tree.URL(void 0!==e.value||e instanceof R.Tree.Variable?e:new R.Tree.Quoted(e)):new R.Tree.Invalid(e,f,"Missing closing ) in URL.")},variable:function(){var e,t=c;if("@"===p.charAt(c)&&(e=v(/^@[\w-]+/)))return new R.Tree.Variable(e,t,i.filename)},hexcolor:function(){var e;if("#"===p.charAt(c)&&(e=v(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new R.Tree.Color(e[1])},keywordcolor:function(){var e=u[a].match(/^[a-z]+/);if(e&&e[0]in R.Tree.Reference.data.colors)return new R.Tree.Color(R.Tree.Reference.data.colors[v(/^[a-z]+/)])},dimension:function(){var e=p.charCodeAt(c);return!(57<e||e<45||47===e)&&(e=v(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/))?new R.Tree.Dimension(e[1],e[2],f):void 0}},variable:function(){var e;if("@"===p.charAt(c)&&(e=v(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=v(this.entities.call)||v(this.entities.literal),t=v(this.entities.field)||v(this.entities.variable),n=v(this.entities.url)||v(this.entities.keyword);return e||t||n},end:function(){return v(";")||"}"===p.charAt(c)},element:function(){var e=v(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new R.Tree.Element(e)},attachment:function(){var e=v(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,t,n,r,o=[],i=new R.Tree.Filterset,a=[],s=0,u=0;(l=v(this.element))||(r=v(this.zoom))||(n=v(this.filter))||(e=v(this.attachment));){if(s++,l)o.push(l);else if(r)a.push(r),u++;else if(n){var l=i.add(n);if(l)throw m({message:l,index:c-1});u++}else{if(t)throw m({message:"Encountered second attachment name.",index:c-1});t=e}l=p.charAt(c);if("{"===l||"}"===l||";"===l||","===l)break}if(s)return new R.Tree.Selector(i,a,o,t,u,f)},filter:function(){var e,t,n;if(o(),v("[")&&(e=v(/^[a-zA-Z0-9\-_]+/)||v(this.entities.quoted)||v(this.entities.variable)||v(this.entities.keyword)||v(this.entities.field))&&(e instanceof R.Tree.Quoted&&(e=new R.Tree.Field(e.toString())),t=v(this.entities.comparison))&&(n=v(this.entities.quoted)||v(this.entities.variable)||v(this.entities.dimension)||v(this.entities.keyword)||v(this.entities.field))){if(v("]"))return e.is||(e=new R.Tree.Field(e)),new R.Tree.Filter(e,t,n,f,i.filename);throw m({message:"Missing closing ] of filter.",index:f-1})}},zoom:function(){var e,t;if(o(),v(/^\[\s*zoom/g)&&(e=v(this.entities.comparison))&&(t=v(this.entities.variable)||v(this.entities.dimension))&&v("]"))return new R.Tree.Zoom(e,t,f);y()},block:function(){var e;if(v("{")&&(e=v(this.primary))&&v("}"))return e},ruleset:function(){var e,t,n,r=[];for(o();e=v(this.selector);){for(r.push(e);v(this.comment););if(!v(","))break;for(;v(this.comment););}if(e)for(;v(this.comment););if(0<r.length&&(t=v(this.block)))return 1===r.length&&r[0].elements.length&&"Map"===r[0].elements[0].value?((n=new R.Tree.Ruleset(r,t)).isMap=!0,n):new R.Tree.Ruleset(r,t);y()},rule:function(){var e,t=p.charAt(c);if(o(),"."!==t&&"#"!==t&&(e=v(this.variable)||v(this.property))){if((t=v(this.value))&&v(this.end))return new R.Tree.Rule(e,t,f,i.filename);s=c,y()}},font:function(){for(var e,t=[],n=[];e=v(this.entity);)n.push(e);if(t.push(new R.Tree.Expression(n)),v(","))for(;(e=v(this.expression))&&(t.push(e),v(",")););return new R.Tree.Value(t)},value:function(){for(var e,t=[];(e=v(this.expression))&&(t.push(e),v(",")););return 1<t.length?new R.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new R.Tree.Value(t):void 0},sub:function(){var e;if(v("(")&&(e=v(this.expression))&&v(")"))return e},multiplication:function(){var e,t,n,r;if(e=v(this.operand)){for(;(n=v("/")||v("*")||v("%"))&&(t=v(this.operand));)r=new R.Tree.Operation(n,[r||e,t],f);return r||e}},addition:function(){var e,t,n,r;if(e=v(this.multiplication)){for(;(n=v(/^[-+]\s+/)||" "!=p.charAt(c-1)&&(v("+")||v("-")))&&(t=v(this.multiplication));)r=new R.Tree.Operation(n,[r||e,t],f);return r||e}},operand:function(){return v(this.sub)||v(this.entity)},expression:function(){for(var e,t=[];e=v(this.addition)||v(this.entity);)t.push(e);if(0<t.length)return new R.Tree.Expression(t)},property:function(){var e=v(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env),n=(t.reverse(),{}),r=[];this._toShaders(n,r,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var u=t[a],l=u.attachment,c=n[r[a]],f=[];if(!i[l]){var h,p=0;for(h in c)"zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h&&("layer-index"===h?(c[h].join("\n"),Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:null})):f[p++]=function(e,t){var n,r,o,i;return Array.isArray(e)?0<=(r=(n=e.join("\n")).indexOf(o='attributes["FEATUREID"]&&attributes["FEATUREID"]'))?(t.featureFilter||(o=n.indexOf(")",(r=r+o.length)+1),i="featureId&&(featureId"+n.substring(r,o)+")",Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!i}})),{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}):{property:h,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}:e}(c[h],f));Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[r[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,t,n){for(var r=0,o=n.length;r<o;++r){for(var i=n[r],a=[],s=0,u=i.elements.length;s<u;s++)a.push(i.elements[s]);var l,c=i.filters.filters,f=[];for(l in c)f.push(c[l].id);var h,p=a.join("/")+"::"+i.attachment+"_"+f.join("_"),d=(t.push(p),e[p]=e[p]||{}),y=(d.zoom=R.Tree.Zoom.all,i.toJS(this.env));for(h in y)(d[h]=d[h]||[]).push(y[h].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]);var I=R,sL={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function R(e){T(this,R),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}function uL(e,t,n){T(this,uL),this.op=e,this.value=t,this.index=n}function lL(e,t,n){T(this,lL),this.is="variable",this.name=e,this.index=t,this.filename=n}function cL(e){T(this,cL),this.is="value",this.value=e}function fL(e,t){T(this,fL),this.is="uri",this.value=e,this.paths=t}function hL(e,t,n,r,o,i){T(this,hL),this.elements=n||[],this.attachment=r,this.filters=e||{},this.zoom=void 0!==t?t:I.Tree.Zoom.all,this.conditions=o,this.index=i}function pL(e,t){T(this,pL),this.is="ruleset",this.selectors=e,this.rules=t,this._lookups={}}function dL(e,t,n,r){T(this,dL),this.is="rule";var o=e.split("/");this.name=o.pop(),this.instance=o.length?o[0]:"__default__",this.value=t instanceof I.Tree.Value?t:new I.Tree.Value([t]),this.index=n,this.symbolizer=I.Tree.Reference.symbolizer(this.name),this.filename=r,this.variable="@"===e.charAt(0)}function yL(e){T(this,yL),this.is="string",this.value=e||""}function gL(e,t,n){T(this,gL),this.is="operation",this.op=e.trim(),this.operands=t,this.index=n}function vL(e){T(this,vL),this.value=e||"",this.is="field"}function mL(e){T(this,mL),this.value=e;var t={transparent:"color",true:"boolean",false:"boolean"};this.is=t[e]||"keyword"}function bL(e,t,n){T(this,bL),this.is="invalid",this.chunk=e,this.index=t,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}function wL(){T(this,wL),this.filters={}}function _L(e,t,n,r,o){T(this,_L),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=t,this.val=n,this.index=r,this.filename=o,this.id=this.key+this.op+this.val}function xL(e){T(this,xL),this.is="field",this.value=e||""}function SL(e){T(this,SL),this.is="expression",this.value=e}function OL(e){T(this,OL),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}function PL(e,t,n){T(this,PL),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=t||null,this.index=n}function EL(e,t){T(this,EL),this.elements=e.elements,this.rules=t,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()}function kL(e,t){T(this,kL),this.value=e,this.silent=!!t}function ML(e,t){T(this,ML),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=e.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof t?this.alpha=t:4===e.length?this.alpha=e[3]:this.alpha=1}function jL(e,t,n){T(this,jL),this.is="call",this.name=e,this.args=t,this.index=n}I.mapnik_reference={version:{latest:sL,"2.1.1":sL}},I.Tree={},I.Tree.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}},I.Tree.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,r){var o=this,e=[e,t,n].map(function(e){return o.number(e)});return r=o.number(r),e.some(isNaN)||isNaN(r)?null:new I.Tree.Color(e,r)},stop:function(t){var n,r;return{is:"tag",val:t,color:n=1<arguments.length?arguments[1]:n,mode:r=2<arguments.length?arguments[2]:r,toString:function(e){return'\n\t<stop value="'+t.ev(e)+'"'+(n?' color="'+n.ev(e)+'" ':"")+(r?' mode="'+r.ev(e)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){var o,i;return[e=this.number(e)%360/360,t=this.number(t),n=this.number(n),r=this.number(r)].some(isNaN)?null:(i=2*n-(o=n<=.5?n*(t+1):n+t-n*t),this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),r));function a(e){return 6*(e=e<0?e+1:1<e?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new I.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new I.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new I.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new I.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){return"toHSL"in e?((e=e.toHSL()).s+=t.value/100,e.s=this.clamp(e.s),this.hsla_simple(e)):null},desaturate:function(e,t){return"toHSL"in e?((e=e.toHSL()).s-=t.value/100,e.s=this.clamp(e.s),this.hsla_simple(e)):null},lighten:function(e,t){return"toHSL"in e?((e=e.toHSL()).l+=t.value/100,e.l=this.clamp(e.l),this.hsla_simple(e)):null},darken:function(e,t){return"toHSL"in e?((e=e.toHSL()).l-=t.value/100,e.l=this.clamp(e.l),this.hsla_simple(e)):null},fadein:function(e,t){return"toHSL"in e?((e=e.toHSL()).a+=t.value/100,e.a=this.clamp(e.a),this.hsla_simple(e)):null},fadeout:function(e,t){return"toHSL"in e?((e=e.toHSL()).a-=t.value/100,e.a=this.clamp(e.a),this.hsla_simple(e)):null},spin:function(e,t){return"toHSL"in e?(t=((e=e.toHSL()).h+t.value)%360,e.h=t<0?360+t:t,this.hsla_simple(e)):null},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(e,t,n){var n=n.value/100,r=2*n-1,o=e.toHSL().a-t.toHSL().a,r=(1+(r*o==-1?r:(r+o)/(1+r*o)))/2,o=1-r,r=[e.rgb[0]*r+t.rgb[0]*o,e.rgb[1]*r+t.rgb[1]*o,e.rgb[2]*r+t.rgb[2]*o],o=e.alpha*n+t.alpha*(1-n);return new I.Tree.Color(r,o)},greyscale:function(e){return this.desaturate(e,new I.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,r=0;r<t.length;r++)n=n.replace(/%s/,t[r].value).replace(/%[da]/,t[r].toString());return n=n.replace(/%%/g,"%"),new I.Tree.Quoted(n)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof I.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},I.Tree.Call=(A(jL,[{key:"ev",value:function(t){for(var e,n,r,o=this.args.map(function(e){return e.ev(t)}),i=0;i<o.length;i++)if("undefined"===o[i].is)return{is:"undefined",value:"undefined"};return this.name in I.Tree.functions?I.Tree.functions[this.name].length<=o.length?null===(e=I.Tree.functions[this.name].apply(I.Tree.functions,o))?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):e:(t.error({message:"incorrect number of arguments for "+this.name+"(). "+I.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):void 0===(e=I.Tree.Reference.mapnikFunctions[this.name])?(r=oL()(I.Tree.Reference.mapnikFunctions),n=this.name,r=r.map(function(e){return[e[0],I.Tree.Reference.editDistance(n,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]}),t.error({message:"unknown function "+this.name+"(), did you mean "+r[0][0]+"("+r[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):e!==o.length&&-1!==e?(t.error({message:"function "+this.name+"() takes "+e+" arguments and was given "+o.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=o,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),jL),I.Tree.Color=(A(ML,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,n){var r=[];n instanceof I.Tree.Color||(n=n.toColor());for(var o=0;o<3;o++)r[o]=I.Tree.operate(t,this.rgb[o],n.rgb[o]);return new I.Tree.Color(r)}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(n,r,o),s=Math.min(n,r,o),u=(a+s)/2,l=a-s;if(a===s)e=t=0;else{switch(t=.5<u?l/(2-a-s):l/(a+s),a){case n:e=(r-o)/l+(r<o?6:0);break;case r:e=(o-n)/l+2;break;case o:e=(n-r)/l+4}e/=6}return{h:360*e,s:t,l:u,a:i}}}]),ML),I.Tree.Comment=(A(kL,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),kL),I.Tree.Definition=(A(EL,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t,n={},r=this.zoom,o=this.filters.toJS(e),r=[r];for(t in o&&r.push(o),o=r.join(" && "),this.rules){i=void 0;s=void 0;a=void 0;u=void 0;var i=this.rules[t];if(i instanceof I.Tree.Rule)n[i.name]=n[i.name]||[],o?n[i.name].push("if("+o+"){"+i.value.toJS(e)+"}"):n[i.name].push(i.value.toJS(e));else if(i instanceof I.Tree.Ruleset){var a,s=i.toJS(e);for(a in s)for(var u in n[a]=n[a]||[],s[a])n[a].push(s[a][u])}}return n}}]),EL),I.Tree.Dimension=(A(PL,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&0<=this.physical_units.indexOf(this.unit)){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new I.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,n){return"%"===this.unit&&"%"!==n.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new I.Tree.Dimension(I.Tree.operate(t,this.value,this.value*n.value*.01),this.unit):new I.Tree.Dimension(I.Tree.operate(t,this.value,n.value),this.unit||n.unit)}}]),PL),I.Tree.Element=(A(OL,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),OL),I.Tree.Expression=(A(SL,[{key:"ev",value:function(t){return 1<this.value.length?new I.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}]),SL),I.Tree.Field=(A(xL,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),xL),I.Tree.Filter=(A(_L,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),_L),I.Tree.Filterset=(A(wL,[{key:"toJS",value:function(e){var t,n,r,o,i,a=[];for(t in this.filters)a.push((n=this.filters[t],r=void 0,o=void 0,i=void 0,r=n.op,"="===r&&(r="=="),o=n.val,void 0!==n._val&&(o=n._val.toString(!0)),n.key&&"scale"===n.key.value?o=+o:"string"!=typeof o&&"object"!==iL(o)||(o="'"+o+"'"),i="attributes",i+"&&"+i+n.key+"&&"+i+n.key+" "+r+o));return a.join(" && ")}},{key:"toString",value:function(){var e,t=[];for(e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e,t=new I.Tree.Filterset;for(e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(e){var t,n=[];for(t in e.filters){var r=this.addable(e.filters[t]);if(!1===r)return!1;!0===r&&n.push(e.filters[t])}if(!n.length)return null;var o=new I.Tree.Filterset;for(t in this.filters)o.filters[t]=this.filters[t];for(;t=n.shift();)o.add(t);return o}},{key:"addable",value:function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?_match/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:!(void 0!==this.filters[t+"!="+n]||void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n||void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n||void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n||void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n);case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==n&&null:void 0===this.filters[t+"!="+n]&&!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null);case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null);case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null);case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null)}}},{key:"conflict",value:function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var n,r=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===o)this.filters[r+"!="+e.val]=e;else if("=~"===o)this.filters[r+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===o){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key===r&&n<e.val&&delete this.filters[u];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===o){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key===r&&n>=e.val&&delete this.filters[l];this.filters[r+"<"]=e}else if("<="===o){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key===r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}]),wL),I.Tree.Fontset=A(function e(t,n){T(this,e),this.fonts=n,this.name="fontset-"+t.effects.length}),I.Tree.Invalid=(A(bL,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),bL),I.Tree.Keyword=(A(mL,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),mL),I.Tree.Literal=(A(vL,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),vL),I.Tree.Operation=(A(gL,[{key:"ev",value:function(e){var t,n=this.operands[0].ev(e),r=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===r.is?{is:"undefined",value:"undefined"}:(n instanceof I.Tree.Dimension&&r instanceof I.Tree.Color&&("*"===this.op||"+"===this.op?(t=r,r=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof I.Tree.Quoted&&r instanceof I.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof I.Tree.Field||r instanceof I.Tree.Field||n instanceof I.Tree.Literal||r instanceof I.Tree.Literal?"color"===n.is||"color"===r.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new I.Tree.Literal(n.ev(e).toString(!0)+this.op+r.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,r))}}]),gL),I.Tree.Quoted=(A(yL,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,n){return new I.Tree.Quoted(I.Tree.operate(t,this.toString(),n.toString(this.contains_field)))}}]),yL),I.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t,n={};for(t in e.symbolizers)for(var r in e.symbolizers[t])e.symbolizers[t][r].hasOwnProperty("css")&&(n[e.symbolizers[t][r].css]=[e.symbolizers[t][r],t,r]);return n}(e),this.mapnikFunctions=function(e){var t,n={};for(t in e.symbolizers)for(var r in e.symbolizers[t])if("functions"===e.symbolizers[t][r].type)for(var o=0;o<e.symbolizers[t][r].functions.length;o++){var i=e.symbolizers[t][r].functions[o];n[i[0]]=i[1]}return n}(e),this.required_cache=function(e){var t,n={};for(t in e.symbolizers)for(var r in n[t]=[],e.symbolizers[t])e.symbolizers[t][r].required&&n[t].push(e.symbolizers[t][r].css);return n}(e)},setVersion:function(e){return!!I.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(I.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var n,r=this.required_cache[e];for(n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var o=0;o<=e.length;o++)n[0][o]=o;for(r=1;r<=t.length;r++)for(o=1;o<=e.length;o++)t.charAt(r-1)===e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[t.length][e.length]},validValue:function(e,t,n){if(this.selector(t)){if("keyword"===n.value[0].is)return function(e,t){return"object"===iL(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(n,t);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(t).type){for(var r in n.value)if("float"!==n.value[r].is)return!1;return!0}if("tags"===this.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(r=0;r<n.value[0].value.length;r++)if("tag"!==n.value[0].value[r].is)return!1;return!0}if("functions"==this.selector(t).type)return function(t,e){if("string"!==t.value[0].is)for(var n in t.value)for(var r in t.value[n].value){if("call"!==t.value[n].value[r].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[n].value[r].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[n].value[r].args.length))return!1}return!0}(n,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(t).validate){for(r=0;r<n.value.length;r++)if(this.selector(t).type===n.value[r].is&&this._validateValue[this.selector(t).validate](e,n.value[r].value))return!0;return!1}return this.selector(t).type===n.value[0].is}return!1}},I.Tree.Reference.setVersion("latest"),I.Tree.Rule=(A(dL,[{key:"clone",value:function(){var e=Object.create(I.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+I.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new I.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),dL),I.Tree.Ruleset=(A(pL,[{key:"ev",value:function(e){var t,n,r=new I.Tree.Ruleset(this.selectors,this.rules.slice(0));for(r.root=this.root,e.frames.unshift(r),t=0;t<r.rules.length;t++)n=r.rules[t],r.rules[t]=n.ev?n.ev(e):n;return e.frames.shift(),r}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables||(this._variables=this.rules.reduce(function(e,t){return t instanceof I.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{}))}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets||(this._rulesets=this.rules.filter(function(e){return e instanceof I.Tree.Ruleset}))}},{key:"find",value:function(n,r){r=r||this;var o=[],e=n.toString();return e in this._lookups?this._lookups[e]:(this.rulesets().forEach(function(e){if(e!==r)for(var t=0;t<e.selectors.length;t++)if(n.match(e.selectors[t])){1<n.elements.length?Array.prototype.push.apply(o,e.find(new I.Tree.Selector(null,null,n.elements.slice(1)),r)):o.push(e);break}}),this._lookups[e]=o)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=I.Tree.Zoom.all,r=0;r<this.selectors[t].zoom.length;r++)n=this.selectors[t].zoom[r].ev(e).zoom;this.selectors[t].zoom=n}}},{key:"flatten",value:function(e,t,n){var r,o=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),c=0;c<this.selectors.length;c++){var i=this.selectors[c];if(i.filters)if(t.length)for(r=0;r<t.length;r++){var a=t[r],s=a.filters.cloneWith(i.filters);if(null===s){if(a.zoom===i.zoom&&a.attachment===i.attachment&&a.elements.join()===i.elements.join()){o.push(a);continue}s=a.filters}else if(!s)continue;var u=Object.create(I.Tree.Selector.prototype);u.filters=s,u.zoom=i.zoom,u.elements=a.elements.concat(i.elements),a.attachment&&i.attachment?u.attachment=a.attachment+"/"+i.attachment:u.attachment=i.attachment||a.attachment,u.conditions=a.conditions+i.conditions,u.index=i.index,o.push(u)}else o.push(i)}for(var l=[],c=0;c<this.rules.length;c++){var f=this.rules[c];f instanceof I.Tree.Ruleset?f.flatten(e,o,n):f instanceof I.Tree.Rule?l.push(f):f instanceof I.Tree.Invalid&&n.error(f)}var h=!!l.length&&l[0].index;for(c=0;c<o.length;c++)!1!==h&&(o[c].index=h),e.push(new I.Tree.Definition(o[c],l.slice()));return e}}]),pL),I.Tree.Selector=(A(hL,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){t=t.specificity();return e[0]+=t[0],e[1]+=t[1],e},[0,0,this.conditions,this.index])}}]),hL),I.Tree.URL=(A(fL,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new I.Tree.URL(this.value.ev(e),this.paths)}}]),fL),I.Tree.Value=(A(cL,[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new I.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(e){var e=this.ev(e),t=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?t="'"+t+"'":"field"===e.is?t=t.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===iL(e.value)&&(t="["+t+"]"),"_value = "+t+";"}},{key:"toString",value:function(t,e,n,r){return this.value.map(function(e){return e.toString(t,r)}).join(n||", ")}},{key:"clone",value:function(){var e=Object.create(I.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),cL),I.Tree.Variable=(A(lL,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){var t;return this._css||((t=e.frames.filter(function(e){return e.name===this.name}.bind(this))).length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}))}}]),lL),I.Tree.Zoom=(A(uL,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>I.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+I.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=I.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),uL),I.Tree.Zoom.all=23,I.Tree.Zoom.maxZoom=22,I.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};rL=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,L.extend(this,t)},Object.defineProperty(rL,"prototype",{writable:!1});sL=rL;function CL(e){return(CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AL(){return(AL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RL(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function IL(e,t){return(IL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RL(e){return(RL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LL=function(){var e=s,t=Dn;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IL(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,a=function(){var e,t=RL(n),t=(e=r?(e=RL(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==CL(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e,t,n,r,o,i){if(this instanceof s)return(e=a.call(this,e,t,n,r,o,i)).shapeFactory=new v,e.shapeParameters=null,e.RelativeCoordinate=!1,e.setting=null,e.origonPoint=null,e.chartBox=null,e.chartBounds=null,e.width=null,e.height=null,e.XOffset=0,e.YOffset=0,e.DVBParameter=null,e.dataViewBox=null,e.DVBCodomain=null,e.DVBCenterPoint=null,e.DVBUnitValue=null,e.DVBOrigonPoint=null,e.DVBWidth=null,e.DVBHeight=null,e.origonPointOffset=null,e.fields=n||[],e.dataValues=null,e.lonlat=o||e.data.geometry.getBounds().getCenterLonLat(),r&&r.width&&r.height&&r.codomain&&(e.setting=r),e.CLASS_NAME="SuperMap.Feature.Theme.Graph",e;throw new TypeError("Cannot call a class as a function")}return TL((e=s).prototype,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,AL(RL(s.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){var e,t,n;return!!this.setting&&!(!((n=this.setting).width&&n.height&&n.codomain)||(t=void 0===n.decimalNumber||isNaN(n.decimalNumber)?-1:n.decimalNumber,t=Dn.getDataValues(this.data,this.fields,t),this.dataValues=t||[],this.width=parseFloat(n.width),this.height=parseFloat(n.height),this.DVBCodomain=n.codomain,this.XOffset=n.XOffset||0,this.YOffset=n.YOffset||0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=n.dataViewBoxParameter||[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation(),t=this.width,n=this.height,e=this.location,this.origonPoint=[e[0]-t/2,e[1]-n/2],e=this.origonPoint,this.chartBox=[e[0],e[1]+n,e[0]+t,e[1]],n=this.chartBox,t=this.DVBParameter,this.dataViewBox=[n[0]+t[0],n[1]-t[1],n[2]-t[2],n[3]+t[3]],(n=this.dataViewBox)[0]>=n[2])||n[1]<=n[3]||(this.DVBOrigonPoint=[n[0],n[3]],this.DVBWidth=Math.abs(n[2]-n[0]),this.DVBHeight=Math.abs(n[1]-n[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-e[0],this.DVBOrigonPoint[1]-e[1]],0))}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var e=this.getLocalXY(this.lonlat),e=(e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e,this.width),t=this.height,n=this.location;return this.chartBounds=new O(n[0]-e/2,n[1]+t/2,n[0]+e/2,n[1]-t/2),this.resetLinearGradient(),n}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,n=0,r=e.length;n<r;n++){e[n].refOriginalPosition=t;var o,i=e[n].style;for(o in i)switch(o){case"pointList":for(var a=i[o],s=0,u=a.length;s<u;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":i[o]-=t[0];break;case"y":i[o]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),s}();function NL(e){return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BL(){return(BL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GL(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function FL(e,t){return(FL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GL(e){return(GL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Dn.getDataValues=function(e,t,n){if(!e.attributes)return!1;for(var r=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(n)&&0<=n?r.push(parseFloat(o[a].toString()).toFixed(n)):r.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return r.length===t.length&&r};rL=function(){var e=a,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FL(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=GL(n),t=(e=r?(e=GL(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==NL(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r,o){if(this instanceof a)return(e=i.call(this,e,t,n,r,o)).CLASS_NAME="SuperMap.Feature.Theme.Bar",e;throw new TypeError("Cannot call a class as a function")}return DL((e=a).prototype,[{key:"destroy",value:function(){BL(GL(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain,r=(this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight,this.dataViewBox),o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<n[0]||o[i]>n[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;void 0!==t.useBackground&&!t.useBackground||this.shapes.push(v.Background(this.shapeFactory,this.chartBox,t)),void 0!==t.useAxis&&!t.useAxis||(this.shapes=this.shapes.concat(v.GraphAxis(this.shapeFactory,r,t,s)));for(var c=0;c<o.length;c++){var f,h=r[1]-(o[c]-n[0])/this.DVBUnitValue,h=[[u[c]-l/2,r[1]-1],[u[c]+l/2,r[1]-1],[u[c]+l/2,h],[u[c]-l/2,h]],h=new Mi(h);void 0!==t.showShadow&&!t.showShadow||(t.barShadowStyle&&((f=t.barShadowStyle).shadowBlur&&(e.shadowBlur=f.shadowBlur),f.shadowColor&&(e.shadowColor=f.shadowColor),f.shadowOffsetX&&(e.shadowOffsetX=f.shadowOffsetX),f.shadowOffsetY)&&(e.shadowOffsetY=f.shadowOffsetY),h.style={},L.copyAttributesWithClip(h.style,e)),h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(h.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(h.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){n=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(n<=r)return null;i=n/r}else e=[i=a/(2*r+1),i,i];for(var s=0,u=0;u<r;u++)0==u?s=e[0]+i/2:s+=i+e[1],o.push(t[0]+s);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,n=-1,r=0;r<e;r++){var o,i,a,s,u=this.shapes[r];"SuperMap.LevelRenderer.Shape.SmicPolygon"===u.CLASS_NAME&&(o=u.style,s=this.location[0]+o.pointList[0][0],o=this.location[0]+o.pointList[1][0],++n>=t.length&&(n%=t.length),i=t[n][0],a=t[n][1],s=(new or).getLinearGradient(s,0,o,0,[[0,i],[1,a]]),u.style.color=s)}}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function zL(e){return(zL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VL(){return(VL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YL(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function WL(e,t){return(WL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YL(e){return(YL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HL=function(){var e=a,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WL(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=YL(n),t=(e=r?(e=YL(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==zL(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r,o){if(this instanceof a)return(e=i.call(this,e,t,n,r,o)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",e;throw new TypeError("Cannot call a class as a function")}return UL((e=a).prototype,[{key:"destroy",value:function(){VL(YL(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain,n=(this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight,this.dataViewBox),r=this.dataValues;if(!(r.length<1)){for(var o=0,i=r.length;o<i;o++)if(r[o]<t[0]||r[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;void 0!==e.useBackground&&!e.useBackground||this.shapes.push(v.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),void 0!==e.useAxis&&!e.useAxis||(this.shapes=this.shapes.concat(v.GraphAxis(this.shapeFactory,n,e,a)));for(var l=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<r.length;c++){var f=n[1]-(r[c]-t[0])/this.DVBUnitValue,h=s[c]-u/2,p=s[c]+u/2,d=[[p,f],[p-l,f+l],[p-l,n[1]+l],[p,n[1]]],y=[[h-l,n[1]+l],[p-l,n[1]+l],[p-l,f+l],[h-l,f+l]],p=(l<=0&&(y=[[h,n[1]],[p,n[1]],[p,f],[h,f]]),new Mi([[h,f],[p,f],[p-l,f+l],[h-l,f+l]])),h=new Mi(d),f=new Mi(y);e.barSideStyle=e.barSideStyle||e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields||e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain||e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle||e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields||e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain||e.barFaceStyleByCodomain,f.style=v.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,r[c]),h.style=v.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,r[c]),p.style=v.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,r[c]),e.barSideHoverStyle=e.barSideHoverStyle||e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle||e.barFaceHoverStyle,f.highlightStyle=v.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),h.highlightStyle=v.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),p.highlightStyle=v.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),p.refDataID=h.refDataID=f.refDataID=this.data.id,p.isHoverByRefDataID=h.isHoverByRefDataID=f.isHoverByRefDataID=!0,p.refDataHoverGroup=h.refDataHoverGroup=f.refDataHoverGroup=L.createUniqueID("lr_shg"),p.dataInfo=h.dataInfo=f.dataInfo={field:this.fields[c],value:r[c]},void 0!==e.barHoverAble&&(p.hoverable=h.hoverable=f.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(p.clickable=h.clickable=f.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(h)),this.shapes.push(this.shapeFactory.createShape(p)),this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){n=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(n<=r)return null;i=n/r}else e=[i=a/(2*r+1),i,i];for(var s=0,u=0;u<r;u++)0==u?s=e[0]+i/2:s+=i+e[1],o.push(t[0]+s);return{xPositions:o,width:i}}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function XL(e){return(XL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JL(){return(JL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KL(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function ZL(e,t){return(ZL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KL(e){return(KL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QL=function(){var e=s,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZL(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,a=function(){var e,t=KL(n),t=(e=r?(e=KL(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==XL(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e,t,n,r,o,i){if(this instanceof s)return(e=a.call(this,e,t,n,r,o,i)).setting=null,r&&r.codomain&&(e.setting=r,e.DVBCodomain=e.setting.codomain),e.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",e;throw new TypeError("Cannot call a class as a function")}return qL((e=s).prototype,[{key:"destroy",value:function(){this.setting=null,JL(KL(s.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){var e,t,n;return!(!this.setting||((t=this.setting).XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset||0,this.YOffset=t.YOffset||0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter||[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation(),t=this.width,n=this.height,e=this.location,this.origonPoint=[e[0]-t/2,e[1]-n/2],e=this.origonPoint,this.chartBox=[e[0],e[1]+n,e[0]+t,e[1]],n=this.chartBox,t=this.DVBParameter,this.dataViewBox=[n[0]+t[0],n[1]-t[1],n[2]-t[2],n[3]+t[3]],(n=this.dataViewBox)[0]>=n[2])||n[1]<=n[3]||(this.DVBOrigonPoint=[n[0],n[3]],this.DVBWidth=Math.abs(n[2]-n[0]),this.DVBHeight=Math.abs(n[1]-n[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-e[0],this.DVBOrigonPoint[1]-e[1]],0))}}]),Object.defineProperty(e,"prototype",{writable:!1}),s}();function $L(e){return($L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tN(){return(tN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rN(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function nN(e,t){return(nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rN(e){return(rN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oN=function(){var e=a,t=QL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nN(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=rN(n),t=(e=r?(e=rN(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==$L(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r,o){if(this instanceof a)return(e=i.call(this,e,t,n,r,o)).CLASS_NAME="SuperMap.Feature.Theme.Circle",e;throw new TypeError("Cannot call a class as a function")}return eN((e=a).prototype,[{key:"destroy",value:function(){tN(rN(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e,t,n,r;return!!this.setting&&!!(e=this.setting).codomain&&(t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,t=Dn.getDataValues(this.data,this.fields,t),this.dataValues=t||[],t=this.dataValues,e.maxR||(e.maxR=100),e.minR||(e.minR=0),(r=this.DVBCodomain)&&0<r[1]-r[0]?this.DVBUnitValue=e.maxR/(r[1]-r[0]):this.DVBUnitValue=e.maxR,n=this.DVBUnitValue,n=t[0]*n+e.minR,this.width=2*n,this.height=2*n,void(!this.initBaseParameter()||r&&(t[0]<r[0]||t[0]>r[1])||(r=this.DVBCenterPoint,(r=new oa(r[0],r[1],n)).style=v.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?r.style.fillColor=e.fillColor:r.style.fillColor="#ff9277",r.highlightStyle=v.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(r.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(r.clickable=e.circleClickAble),r.refDataID=this.data.id,r.dataInfo={field:this.fields[0],r:n,value:t[0]},this.shapes.push(this.shapeFactory.createShape(r)),this.shapesConvertToRelativeCoordinate())))}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function iN(e){return(iN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sN(){return(sN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lN(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function uN(e,t){return(uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lN(e){return(lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cN=function(){var e=s,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uN(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,a=function(){var e,t=lN(n),t=(e=r?(e=lN(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==iN(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e,t,n,r,o,i){if(this instanceof s)return(e=a.call(this,e,t,n,r,o,i)).CLASS_NAME="SuperMap.Feature.Theme.Line",e;throw new TypeError("Cannot call a class as a function")}return aN((e=s).prototype,[{key:"destroy",value:function(){sN(lN(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain,r=(this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight,this.DVBUnitValue),o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a=i.xPositions;void 0!==e.useBackground&&!e.useBackground||this.shapes.push(v.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(v.GraphAxis(this.shapeFactory,t,e,i));for(var s=[],u=[],l=0,c=o.length;l<c;l++){if(o[l]<n[0]||o[l]>n[1])return null;var f=a[l],h=t[1]-(o[l]-n[0])/r,p=new gi(f,h),p=(p.style=v.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,l,o[l]),p.highlightStyle=v.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[l],value:o[l]},u.push(this.shapeFactory.createShape(p)),[f,h]);s.push(p)}i=new xi(s),i=(i.style=v.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),i.clickable=!1,i.hoverable=!1,this.shapeFactory.createShape(i));this.shapes.push(i),this.shapes=this.shapes.concat(u),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){n=i-((e=n.xShapeBlank)[0]+e[1]);if(n<=r)return null;a=n/(r-1)}else e=[a=i/(r+1),a,a];for(var s=0,u=0;u<r;u++)0==u?s=e[0]:s+=a,o.push(t[0]+s);return{xPositions:o,width:0}}}]),Object.defineProperty(e,"prototype",{writable:!1}),s}();function fN(e){return(fN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pN(){return(pN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yN(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function dN(e,t){return(dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yN(e){return(yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gN=function(){var e=a,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dN(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=yN(n),t=(e=r?(e=yN(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==fN(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r,o){if(this instanceof a)return(e=i.call(this,e,t,n,r,o)).CLASS_NAME="SuperMap.Feature.Theme.Pie",e;throw new TypeError("Cannot call a class as a function")}return hN((e=a).prototype,[{key:"destroy",value:function(){pN(yN(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(v.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,o=0;o<n.length;o++)if(n[o]<r[0]||n[o]>r[1])return;for(var i=0,a=0;a<n.length;a++)i+=Math.abs(n[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<n.length;p++){var d=Math.abs(n[p]),d=(360<=(c=0!==p&&p===d.length-1?f:l+d*s)-l&&(c=359.9999999),new Gi(u[0],u[1],h,l,c));void 0===e.sectorStyleByFields?d.style=v.ShapeStyleTool(null,e.sectorStyle,t,null,p%t.length):d.style=v.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,n[p]),d.highlightStyle=v.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:n[p]},this.shapes.push(this.shapeFactory.createShape(d)),l=c}this.shapesConvertToRelativeCoordinate()}}}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function vN(e){return(vN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bN(){return(bN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_N(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function wN(e,t){return(wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _N(e){return(_N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xN=function(){var e=s,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wN(e,t);n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,a=function(){var e,t=_N(n),t=(e=r?(e=_N(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==vN(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function s(e,t,n,r,o,i){if(this instanceof s)return(e=a.call(this,e,t,n,r,o,i)).CLASS_NAME="SuperMap.Feature.Theme.Point",e;throw new TypeError("Cannot call a class as a function")}return mN((e=s).prototype,[{key:"destroy",value:function(){bN(_N(s.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain,r=(this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight,this.DVBUnitValue),o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a=i.xPositions;void 0!==e.useBackground&&!e.useBackground||this.shapes.push(v.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(v.GraphAxis(this.shapeFactory,t,e,i));for(var s=0,u=o.length;s<u;s++){if(o[s]<n[0]||o[s]>n[1])return null;var l=a[s],c=t[1]-(o[s]-n[0])/r,l=new gi(l,c);l.style=v.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,s,o[s]),l.highlightStyle=v.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(l.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(l.clickable=e.pointClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[s],value:o[s]},this.shapes.push(this.shapeFactory.createShape(l))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var o=[],i=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){n=i-((e=n.xShapeBlank)[0]+e[1]);if(n<=r)return null;a=n/(r-1)}else e=[a=i/(r+1),a,a];for(var s=0,u=0;u<r;u++)0==u?s=e[0]:s+=a,o.push(t[0]+s);return{xPositions:o,width:0}}}]),Object.defineProperty(e,"prototype",{writable:!1}),s}();function SN(e){return(SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ON(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PN(){return(PN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kN(e)););return e}(e,t);if(r)return(r=Object.getOwnPropertyDescriptor(r,t)).get?r.get.call(arguments.length<3?e:n):r.value}).apply(this,arguments)}function EN(e,t){return(EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kN(e){return(kN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MN=function(){var e=a,t=LL;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EN(e,t);n=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,i=function(){var e,t=kN(n),t=(e=r?(e=kN(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==SN(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function a(e,t,n,r,o){if(this instanceof a)return(e=i.call(this,e,t,n,r,o)).CLASS_NAME="SuperMap.Feature.Theme.Ring",e;throw new TypeError("Cannot call a class as a function")}return ON((e=a).prototype,[{key:"destroy",value:function(){PN(kN(a.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting,n=(t.useBackground&&this.shapes.push(v.Background(this.shapeFactory,this.chartBox,t)),this.dataValues);if(!(n.length<1)){for(var r=this.DVBCodomain,o=0;o<n.length;o++)if(n[o]<r[0]||n[o]>r[1])return;for(var i=0,a=0;a<n.length;a++)i+=Math.abs(n[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=l,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0<=t.innerRingRadius&&t.innerRingRadius<f,p=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&h?t.innerRingRadius:0,d=0;d<n.length;d++){var y=Math.abs(n[d]),y=0!==d&&d===y.length-1?c:l+y*s,g=new Gi(u[0],u[1],f,l,y,p);void 0===t.sectorStyleByFields?g.style=v.ShapeStyleTool(null,t.sectorStyle,e,null,d%e.length):g.style=v.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,n[d]),g.highlightStyle=v.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(g.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(g.clickable=t.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[d],value:n[d]},this.shapes.push(this.shapeFactory.createShape(g)),l=y}this.shapesConvertToRelativeCoordinate()}}}}]),Object.defineProperty(e,"prototype",{writable:!1}),a}();function jN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}jN((TN=NN).prototype,[{key:"_initView",value:function(){var e=document.createElement("div"),t=(e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange"),document.createElement("div")),t=(t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t),document.createElement("div")),t=(t.setAttribute("class","component-messagebox"),t.innerHTML="",e.appendChild(t),this.messageBox=t,document.createElement("div")),n=(t.setAttribute("class","component-messagebox__cancelbtncontainer"),document.createElement("button"));n.setAttribute("class","component-messagebox__cancelBtn"),n.innerHTML="x",n.onclick=this.closeView.bind(this),t.appendChild(n),e.appendChild(t),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}]),Object.defineProperty(TN,"prototype",{writable:!1});var CN=NN,TN=function(){try{return echarts}catch(e){return{}}}(),AN=e.n(TN),IN={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"",title_distributedAnalysis:"",title_clientComputing:"",title_dataServiceQuery:"",title_searchCity:"",title_searchLayer:"",text_input_value_inputDataFlowUrl:":ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"",text_subscribe:"",text_cancelSubscribe:"",text_densityAnalysis:"",text_CalculateTheValuePerUnitArea:"",text_option_selectDataset:"",text_label_dataset:"",text_option_simplePointDensityAnalysis:"",text_option_nuclearDensityAnalysis:"",text_label_analyticalMethod:"",text_option_quadrilateral:"",text_option_hexagon:"",text_label_meshType:"",text_option_notSet:"",text_label_weightField:"",text_label_gridSizeInMeters:"",text_label_searchRadius:"",text_label_queryRange:"",text_label_areaUnit:"",text_option_equidistantSegmentation:"",text_option_logarithm:"",text_option_equalCountingSegment:"",text_option_squareRootSegmentation:"",text_label_thematicMapSegmentationMode:"",text_label_thematicMapSegmentationParameters:"",text_option_greenOrangePurpleGradient:"",text_option_greenOrangeRedGradient:"",text_option_rainbowGradient:"",text_option_spectralGradient:"",text_option_terrainGradient:"",text_label_thematicMapColorGradientMode:"",text_label_resultLayerName:"",text_chooseFile:"",text_isoline:"",text_extractDiscreteValue:"",text_buffer:"",text_specifyTheDistance:"",text_label_analysisLayer:"",text_label_extractField:"",text_label_extractedValue:"",text_label_distanceAttenuation:"",text_label_gridSize:"",text_label_bufferRadius:"",text_label_defaultkilometers:"10",text_option_kilometer:"",text_label_unit:"",text_retainOriginal:"",text_mergeBuffer:"",text_label_color:"",text_label_buffer:"[]",text_label_isolines:"[]",text_label_queryRangeTips:"-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:" ID ",text_label_maxFeatures:"",text_label_bufferDistance:"",text_label_queryRange1:"",text_label_spatialQueryMode:"",text_label_featureFilter:"",text_label_geometricObject:"",text_label_queryMode:"",text_label_searchTips:"",text_label_chooseSearchLayers:"",text_loadSearchCriteria:"",text_saveSearchCriteria:"",btn_analyze:"",btn_analyzing:"",btn_emptyTheAnalysisLayer:"",btn_cancelAnalysis:"",btn_query:"",btn_querying:"",btn_emptyTheRresultLayer:"",msg_dataFlowServiceHasBeenSubscribed:"",msg_inputDataFlowUrlFirst:"",msg_datasetOrMethodUnsupport:"",msg_selectDataset:"",msg_setTheWeightField:"",msg_theFieldNotSupportAnalysis:"",msg_resultIsEmpty:"",msg_dataReturnedIsEmpty:"",msg_openFileFail:"",msg_fileTypeUnsupported:"",msg_fileSizeExceeded:" 10M",msg_dataInWrongGeoJSONFormat:" GEOJSON ",msg_dataInWrongFormat:" EXCEL, CSV  GEOJSON ",msg_searchKeywords:"",msg_searchGeocodeField:"",msg_cityGeocodeField:"",msg_getFeatureField:"",msg_dataflowservicesubscribed:"",msg_subscribesucceeded:"",msg_crsunsupport:"",msg_tilematrixsetunsupport:"TileMatrixSet",msg_jsonResolveFiled:"json",msg_requestContentFiled:"iportal",msg_getdatafailed:""},code:null,defaultCode:"en-US",getCode:function(){return IN.code||IN.setCode(),IN.code},setCode:function(){var e=this.getLanguageFromCookie();e||(e=IN.defaultCode,e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===(e=0===e.indexOf("zh")?"zh-CN":e).indexOf("en")&&(e="en-US"),IN.code=e},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf("language="))return n.substring("language=".length,n.length)}return""},i18n:function(e){var t=IN[IN.getCode()];return t&&t[e]||e}},RN=function(){try{return XLSX}catch(e){return{}}}(),LN={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,n,r,o){"JSON"===e||"GEOJSON"===e?this.readTextFile(t,n,r,o):"EXCEL"!==e&&"CSV"!==e||this.readXLSXFile(t,n,r,o)},readTextFile:function(e,t,n,r){var o=new FileReader;o.onloadend=function(e){t&&t.call(r,e.target.result)},o.onerror=function(e){n&&n.call(r,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,o,i,a){var t=new FileReader;t.onloadend=function(e){var t,n,r=new Uint8Array(e.target.result),r=RN.read(r,{type:"array"});try{r&&r.SheetNames&&0<r.SheetNames.length&&(t=r.SheetNames[0],n=RN.utils.sheet_to_csv(r.Sheets[t]),o)&&o.call(a,n)}catch(e){i&&i.call(a,e)}},t.onerror=function(e){i&&i.call(a,e)},this.rABF&&t.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,n,r,o){var i=null;"EXCEL"===e||"CSV"===e?(i=this.processExcelDataToGeoJson(t),n&&n.call(o,i)):"JSON"===e||"GEOJSON"===e?("ISERVER"===(e="string"==typeof(e=t)?JSON.parse(e):e).type?i=e.data.recordsets[0].features:"FeatureCollection"===e.type?i=e:r&&r.call(o,IN.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(o,i)):r&&r.call(o,IN.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),n=t.colTitles,r=-1,o=-1,i=0,a=n.length;i<a;i++)this.isXField(n[i])&&(r=i),this.isYField(n[i])&&(o=i);for(var s=[],u=0,l=t.rows.length;u<l;u++){var c,f=t.rows[u],h=Number(f[r]),f=Number(f[o]),p={};for(c in t.colTitles)p[t.colTitles[c]]=t.rows[u][c];s.push({type:"Feature",geometry:{type:"Point",coordinates:[h,f]},properties:p})}return s},isXField:function(e){e=e.toLowerCase();return"x"===e||"smx"===e||"jd"===e||""===e||""===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x"===e},isYField:function(e){e=e.toLowerCase();return"y"===e||"smy"===e||"wd"===e||""===e||""===e||"latitude"===e||"lat"===e||"y"===e},string2Csv:function(e,t){var n=e.split("\n"),r={};r.colTitles=t?[]:n[0].split(","),r.rows=[];for(var o=t?0:1;o<n.length;o++)n[o]&&r.rows.push(n[o].split(","));return r}};function NN(){if(!(this instanceof NN))throw new TypeError("Cannot call a class as a function");this._initView()}function DN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}DN((TN=FN).prototype,[{key:"getDatasetInfo",value:function(n){var e=this.datasets.url,r=this;y.get(e).then(function(e){return e.json()}).then(function(e){var t;e.datasetInfo&&(t=e.datasetInfo,r.datasetsInfo={dataSourceName:t.dataSourceName,datasetName:t.name,mapName:e.name},n({result:r.datasetsInfo}))}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var e=e.result,n={name:e.datasetName+"@"+e.dataSourceName};Object.assign(n,this.datasets.queryInfo),n=new vy(n),n=new zy({queryParameter:n,datasetNames:[e.dataSourceName+":"+e.datasetName],fromIndex:0,toIndex:1e5}),new Xy(e.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getLayerFeatures",value:function(e,t){var e=e.result,n={name:e.mapName};Object.assign(n,this.datasets.queryInfo),n=new vy(n),n=new FP({queryParams:[n],expectCount:1e5}),new YP(e.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(n,r){var o=this;y.get(n,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){var t;!1!==e.succeed?e.dataItemServices&&0<e.dataItemServices.length?(e.dataItemServices.forEach(function(e){!("RESTDATA"===e.serviceType&&"PUBLISHED"===e.serviceStatus||"RESTMAP"===e.serviceType&&"PUBLISHED"===e.serviceStatus)?o.getDatafromContent(n,r):t=e}),t&&o.getDatafromRest(t.serviceType,t.address,r)):o.getDatafromContent(n,r):o._fireFailedEvent(e)}).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,n){var r=this,o={result:{}},i=this;y.get(e+="/content.json?pageSize=9999999&currentPage=1",null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(IN.i18n("msg_jsonResolveFiled"));var t=r._formatGeoJSON(e.content);o.result.features={type:e.content.type,features:t}}else"EXCEL"!==e.type&&"CSV"!==e.type||(t=r._excelData2Feature(e.content),o.result.features={type:"FeatureCollection",features:t});n(o,"content")}}else i._fireFailedEvent(e)},this).catch(function(e){console.log(e),i._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,n){var r,o,i,a,s,u,l,c=this,f=this.datasets.withCredentials;"RESTDATA"===e?(i="".concat(t,"/data/datasources"),y.get(i,null,{withCredentials:f}).then(function(e){return e.json()}).then(function(e){r=e.datasourceNames[0],i="".concat(t,"/data/datasources/").concat(r,"/datasets"),y.get(i,null,{withCredentials:f}).then(function(e){return e.json()}).then(function(e){return o=e.datasetNames[0],c.getDatafromRestData("".concat(t,"/data"),[r+":"+o],n),[r+":"+o]}).catch(function(e){c._fireFailedEvent(e)})}).catch(function(e){c._fireFailedEvent(e)})):(l="".concat(t,"/maps"),y.get(l,null,{withCredentials:f}).then(function(e){return e.json()}).then(function(e){a=e[0].name,u=e[0].path,l="".concat(t,"/maps/").concat(a,"/layers"),y.get(l,null,{withCredentials:f}).then(function(e){return e.json()}).then(function(e){return s=e[0].subLayers.layers[0].caption,c.getDatafromRestMap(s,u,n),s}).catch(function(e){c._fireFailedEvent(e)})}).catch(function(e){c._fireFailedEvent(e)}))}},{key:"getDatafromRestData",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){n(e,"RESTDATA")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){n(e,"RESTMAP")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,n,r,o){var i={name:t.join().replace(":","@")};Object.assign(i,n),n=new vy(i),i=new zy({queryParameter:n,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Xy(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){o&&o(e)}}}).processAsync(i)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,o,i,a,s,u,l){t={name:t},Object.assign(t,n),n=new vy(t),r&&(n.fields=r),t={queryParams:[n]};l&&(t.queryOption=Dt.ATTRIBUTE),s&&(t.startRecord=s),u&&(t.expectCount=u),o&&(t.prjCoordSys={epsgCode:o}),r=new FP(t),this._queryBySQL(e,r,function(e){("processCompleted"===e.type?i:a)(e)})}},{key:"_queryBySQL",value:function(e,t,n,r){new YP(e,{eventListeners:{scope:this,processCompleted:n,processFailed:n},format:this._processFormat(r)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||a.GEOJSON}},{key:"_formatGeoJSON",value:function(e){e=e.features;return e.forEach(function(e,t){e.properties.index=t}),e}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,o=0,i=t.length;o<i;o++)LN.isXField(t[o])&&(n=o),LN.isYField(t[o])&&(r=o);for(var a=[],s=0,u=e.rows.length;s<u;s++){var l,c=e.rows[s],f=Number(c[n]),c=Number(c[r]),h={};for(l in e.colTitles)h[e.colTitles[l]]=e.rows[s][l];h.index=s+"",a.push({type:"Feature",geometry:{type:"Point",coordinates:[f,c]},properties:h})}return a}},{key:"_fireFailedEvent",value:function(e){e=e?{error:e,message:IN.i18n("msg_getdatafailed")}:{message:IN.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}]),Object.defineProperty(TN,"prototype",{writable:!1});var BN=FN;function FN(e){if(!(this instanceof FN))throw new TypeError("Cannot call a class as a function");this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new Qr(this,null,this.EVENT_TYPES)}function GN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}zN((TN=VN).prototype,[{key:"_initXYField",value:function(e){var t=this;e&&0<e.length&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new BN(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t,n,r,o,i=this.datasets.url,a=i.indexOf("rest");0<a&&(r=i.indexOf("/",a+5),t=i.substring(a+5,r),o=i.substring(0,a+4)+"/data","maps"===t?(n=i.indexOf("/",r+1),r=i.substring(r+1,n),o=i.substring(0,a+4)+"/maps/"+r,e.result.dataUrl=o,this._getLayerFeatures(e)):"data"===t&&(e.result.dataUrl=o,this._getDataFeatures(e)))}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,n={};if(t.length){var r,o,i=t[0],a=[],s=[];for(r in i.properties)a.push(r),s.push(this._getDataType(i.properties[r]));for(o in n={features:t,fieldCaptions:a,fieldTypes:s,fieldValues:[]},s){var u,l=[];for(u in t){var c=t[u],f=n.fieldCaptions[o],c=c.properties[f];l.push(c)}n.fieldValues.push(l)}this.createChart(n)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var e=e.result.recordsets[0],t=e.features.features,n=(this.features=e.features,{});if(t.length){for(var r in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var o,i=[];for(o in t){var a=t[o],s=n.fieldCaptions[r],a=a.properties[s];i.push(a)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){e=this._createChartOptions(e);this.updateChart(e)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var n,r=this.grid,e=this._createChartSeries(this.calculatedData,e),o=[];for(n in this.calculatedData.XData)o.push({value:this.calculatedData.XData[n].fieldsData});var i={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},a={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={formatter:"{b0}: {c0}"},u="#404a59";return{backgroundColor:u=t&&(t.grid&&(r=t.grid),t.tooltip&&(s=t.tooltip),t.backgroundColor)?t.backgroundColor:u,grid:r,series:e,xAxis:i,yAxis:a,tooltip:s}}}},{key:"_createChartDatas",value:function(r){var n=0,o=[],t=r.fieldCaptions,i=this,e=(t.forEach(function(e,t){i.xField[0]&&e===i.xField[0].field&&(n=t)}),this.yFieldName="",this.yField.forEach(function(n,e){0!==e&&(i.yFieldName=i.yFieldName+","),i.yFieldName=i.yFieldName+n.name,t.forEach(function(e,t){e===n.field&&o.push(t)})}),this._getAttrData(r,n)),a=[];if(0<o.length)o.forEach(function(e){var t,n=[];for(t in r.fieldValues[e])n.push({value:r.fieldValues[e][t]});a.push(n)});else{for(var s=[],u=[],l=e.length,c=0;c<l;c++){for(var f=!1,h=0,p=u.length;h<p;h++)if(e[c].fieldsData===u[h].fieldsData){s[h].value++,u[h].recordIndexs.push(c),f=!0;break}f||e[c].fieldsData&&(u.push({fieldsData:e[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}e=u,a=[s]}return{XData:e,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var n=[],r=0,o=e.fieldValues[t].length;r<o;r++){var i=e.fieldValues[t][r];n.push({recordIndexs:r,fieldsData:i})}return n}},{key:"_createChartSeries",value:function(e,i){var a=[];return e.YData.forEach(function(e){var t,n,r=[],o=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return o=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw n}}};if(Array.isArray(e)||(a=function(e){var t;if(e)return"string"==typeof e?GN(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?GN(e,void 0):void 0}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);try{for(o.s();!(t=o.n()).done;)n=t.value.value,r.push({value:n})}catch(e){o.e(e)}finally{o.f()}a.push({type:i,data:r,name:"y"})}),a}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){e=Number(e);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(e){if(null!=e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e)||/^http[s]?:\/\/localhost/.test(e)||/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}]),Object.defineProperty(TN,"prototype",{writable:!1});var UN=VN;function VN(e){if(!(this instanceof VN))throw new TypeError("Cannot call a class as a function");this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Qr(this,null,this.EVENT_TYPES)}function WN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}WN((TN=YN).prototype,[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var t=new CN;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){e=this.viewModel.setStyle(e);this._updateChart(e)}},{key:"changeType",value:function(e){this.chartType!==e&&(this.chartType=e,e=this.viewModel.changeType(e),this._updateChart(e))}},{key:"updateData",value:function(e,t){var n=this;this.viewModel.updateData(e,t,function(e){n._updateChart(e),n.addChart&&n.addChart()})}},{key:"_createChart",value:function(e){this.echart=AN().init(document.getElementById(this.domID),null,{renderer:"canvas"});e=this.viewModel._createChartOptions(e);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}]),Object.defineProperty(TN,"prototype",{writable:!1});TN=YN;function YN(e,t){if(!(this instanceof YN))throw new TypeError("Cannot call a class as a function");this.domID=e,this.chartType=t.type||"bar",t.datasets.type=t.datasets.type||"iServer",t.datasets.withCredentials=t.datasets.withCredentials||!1,this.viewModel=new UN(t),this._fillDataToView()}function HN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}HN(($N=qN).prototype,[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}]),Object.defineProperty($N,"prototype",{writable:!1});var XN=qN;function qN(e){if(!(this instanceof qN))throw new TypeError("Cannot call a class as a function");this.id=(e=e||{}).id||null,this.rootContainer=null}function JN(e){return(JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KN(e,t){return(KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QN(e){return(QN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $N=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),KN(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=QN(n),t=(e=r?(e=QN(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==JN(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return t=o.call(this,e),e=e.title||"",t._initView(e),t;throw new TypeError("Cannot call a class as a function")}return ZN((e=i).prototype,[{key:"_initView",value:function(e){var t=document.createElement("div"),n=(t.setAttribute("class","component-container"),document.createElement("div")),r=(n.setAttribute("class","component-title"),document.createElement("div")),e=(r.innerHTML=e,n.appendChild(r),t.appendChild(n),document.createElement("div"));return e.setAttribute("class","component-content"),t.appendChild(e),this.content=e,this.rootContainer=t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function e5(e){return(e5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n5(e,t){return(n5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r5(e){return(r5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=r5(n),t=(e=r?(e=r5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==e5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e))._initView(e),t;throw new TypeError("Cannot call a class as a function")}return t5((e=i).prototype,[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool"),n=(e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName),this._createElement("div","component-selecttool--chart",t)),r=(n.setAttribute("tabindex","1"),this._createElement("div","component-selecttool__name",n)),o=(r.title=e.optionsArr[0],r.innerHTML=e.optionsArr[0],this._createElement("div","component-selecttool__trianglebtn--chart",n)),o=this._createElement("div","component-triangle-down-img",o),i=this._createElement("div","component-selecttool__content",n),a=this._createElement("div","component-selecttool__content--chart",i),a=this._createElement("div","component-selecttool__scrollarea__content",a);a.setAttribute("tabindex","1"),this.createOptions(a,e.optionsArr),this.optionClickEvent(a,r,e.optionsClickCb),this._selectClickEvent(n,i,o),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var n in t){var r=this._createElement("div","component-selecttool__option",e);r.title=t[n],r.innerHTML=t[n]}}},{key:"_selectClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){e=document.createElement(e||"div");return t&&(e.className=t),n&&n.appendChild(e),e}},{key:"optionClickEvent",value:function(t,n,r){for(var o=0;o<t.children.length;o++)!function(){var e=t.children[o];e.onclick=function(){n.innerHTML=e.innerHTML,n.title=e.title,e.getAttribute("data-value")&&n.setAttribute("data-value",e.getAttribute("data-value")),r&&r(e)}}()}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function i5(e){return(i5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s5(e,t){return(s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u5(e){return(u5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),s5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=u5(n),t=(e=r?(e=u5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==i5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e))._initView(e),t;throw new TypeError("Cannot call a class as a function")}return a5((e=i).prototype,[{key:"_initView",value:function(e){var t=document.createElement("div"),n=(t.className="component-dropdownbox--container",document.createElement("div")),r=(n.setAttribute("tabindex","1"),n.className="component-dropdownbox",t.appendChild(n),document.createElement("div")),o=(n.appendChild(r),this._createDropDownOption(e[0],r),document.createElement("div")),i=(o.className="component-dropdownbox__triangle-btn",n.appendChild(o),document.createElement("div"));i.className="component-triangle-down-img",o.appendChild(i),this._createDropDownBox({parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:r}),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,n=e.dropDownTopContainer,r=document.createElement("div"),o=(r.className=e.dropDownContent[0],t.appendChild(r),document.createElement("div"));o.className=e.scrollareaContent,r.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);e=e.triangleBtn;this._dropDownClickEvent(t,r,e),this._eleOnblur(t,r,e);for(var s=o.children,u=0;u<s.length;u++)!function(e){s[e].onclick=function(){n.innerHTML=s[e].outerHTML}}(u)}},{key:"_createDropDownOption",value:function(e,t){var n=document.createElement("div"),t=(n.className="component-dropdownbox__item",e.dataValue&&n.setAttribute("data-value",e.dataValue),t.appendChild(n),document.createElement("div")),r=(t.className="component-dropdownbox__item__img",n.appendChild(t),document.createElement("div")),t=(e.icon.className&&(r.className=e.icon.className),e.icon.background&&(r.style.background=e.icon.background),t.appendChild(r),document.createElement("div")),r=(t.className="component-dropdownbox__item__title",t.title=e.title,t.innerHTML=e.title,n.appendChild(t),document.createElement("div"));r.className="component-dropdownbox__item__remark",r.title=e.remark,r.innerHTML=e.remark,n.appendChild(r)}},{key:"_dropDownClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,n){e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){e=document.createElement(e||"div");return t&&(e.className=t),n&&n.appendChild(e),e}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function c5(e){return(c5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h5(e,t){return(h5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p5(e){return(p5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),h5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=p5(n),t=(e=r?(e=p5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==c5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return t=o.call(this,e=e||{}),e.title=e.title||"",t._initView(e.title),t;throw new TypeError("Cannot call a class as a function")}return f5((e=i).prototype,[{key:"_initView",value:function(e){var t=document.createElement("div"),n=(t.setAttribute("class","component-popcontainer"),document.createElement("div")),r=(n.setAttribute("class","component-popcontainer__header"),document.createElement("label")),e=(r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=e,n.appendChild(r),document.createElement("span")),r=(e.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),e.onclick=this.closeView.bind(this),t.appendChild(e),t.appendChild(n),document.createElement("div"));r.setAttribute("class","component-popcontainer__content"),this.content=r,t.appendChild(r),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function y5(e){return(y5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v5(e,t){return(v5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m5(e){return(m5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b5=function(){var e=i,t=d5;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=m5(n),t=(e=r?(e=m5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==y5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return e.title=e.title||"",(t=o.call(this,e)).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes||[],t._createAttributesTable(e.attributes),t;throw new TypeError("Cannot call a class as a function")}return g5((e=i).prototype,[{key:"_createAttributesTable",value:function(e){var t,n=document.createElement("table"),r=(n.setAttribute("class","component-popcontainer__content__table"),document.createElement("tbody")),o=!0;for(t in e){var i=document.createElement("tr"),a=(o&&i.setAttribute("class","component-popcontainer__content__td--color"),document.createElement("td")),s=document.createElement("Span"),s=(s.innerHTML=t,a.appendChild(s),document.createElement("td"));s.innerHTML=e[t],i.appendChild(a),i.appendChild(s),r.appendChild(i),o=!o}n.appendChild(r),this.appendContent(n)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function w5(e){return(w5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x5(e,t){return(x5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S5(e){return(S5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),x5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=S5(n),t=(e=r?(e=S5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==w5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){if(this instanceof i)return(e=o.call(this,e))._initView(),e;throw new TypeError("Cannot call a class as a function")}return _5((e=i).prototype,[{key:"_initView",value:function(){var e=document.createElement("div"),t=(e.setAttribute("class","component-tabpage"),document.createElement("ul")),n=(this.header=t,document.createElement("div"));n.setAttribute("class","component-tabpage__content"),this.content=n,e.appendChild(t),e.appendChild(n),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span"),r=(n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this),e[t].content);r.index=t,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;0<e;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===t&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function P5(e){return(P5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k5(e,t){return(k5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M5(e){return(M5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j5=function(){var e=i,t=O5;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=M5(n),t=(e=r?(e=M5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==P5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var n;if(this instanceof i)return(n=o.call(this,e)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),n.config=e.config,L.isArray(n.config)?(n.header.hidden=!0,n._createCityItem("",n.config),n.content.style.border="none"):(n._createTabs(),n.header.onclick=function(e){for(var t=0;t<n.header.children.length;t++)n.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),n._createCityContent(e.target.innerHTML)}),n;throw new TypeError("Cannot call a class as a function")}return E5((e=i).prototype,[{key:"_createTabs",value:function(){if(L.isArray(this.config))for(var e=0;e<this.config.length;e++){var t,n="";for(t in this.config[e])n+=t;var r=document.createElement("li");r.innerHTML=n,this.header.appendChild(r)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;0<t;t--)this.content.removeChild(this.content.children[t-1]);var n,r=this.config[e];for(n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div"),o=(r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=e,n.appendChild(r),document.createElement("div"));o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),n.appendChild(o),this.content.appendChild(n)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function C5(e){return(C5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A5(e,t){return(A5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I5(e){return(I5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),A5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=I5(n),t=(e=r?(e=I5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==C5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e)).navTabsTitle=null,t.navTabsContent=null,e.tabs=e.tabs||[],t._initView(e.tabs),t;throw new TypeError("Cannot call a class as a function")}return T5((e=i).prototype,[{key:"_initView",value:function(e){var t=document.createElement("div"),n=(t.setAttribute("class","component-navtabspage"),document.createElement("span")),n=(n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),t.appendChild(n),document.createElement("div")),n=((this.navTabsTitle=n).setAttribute("class","component-navtabspage__title"),t.appendChild(n),document.createElement("div"));(this.navTabsContent=n).setAttribute("class","component-navtabspage__content"),t.appendChild(n),0<e.length&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span"),r=(n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this),e[t].content);r.index=t,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;0<e;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===t&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function L5(e){return(L5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D5(e,t){return(D5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function B5(e){return(B5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F5=function(){var e=i,t=XN;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),D5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=B5(n),t=(e=r?(e=B5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==L5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e){var t;if(this instanceof i)return(t=o.call(this,e=e||{})).currentPage=0,t.pageNumberLis=[],t.currentPageNumberLis=[],t.linkageEvent=null,e.contents=e.contents||null,e.pageCounts=e.pageCounts||0,t._initView(e.contents,e.pageCounts),t;throw new TypeError("Cannot call a class as a function")}return N5((e=i).prototype,[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var n=document.createElement("div"),r=(n.setAttribute("class","component-pagination"),document.createElement("div")),r=(r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r,document.createElement("ul"));r.setAttribute("class","component-pagination__link"),r.onclick=this._changePageEvent.bind(this),n.appendChild(r),this._createLink(r),this.link=r,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=n}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;0<=e;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var n=document.createElement("li");n.innerHTML=t+1,this.pageNumberLis.push(n)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var r=0;r<5;r++)this.currentPageNumberLis.push(this.pageNumberLis[r])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;1<e;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var n=document.createElement("li"),r=(n.setAttribute("class","disable"),document.createElement("span"));n.appendChild(r),0===t?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===t?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===t?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===t&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),e.appendChild(n)}}},{key:"_changePageEvent",value:function(e){var t,e=e.target;if("disable"!==e.parentElement.classList[0]){if(e.id)t=e.id;else{if(!Number(e.innerHTML))return;t=Number(e.innerHTML)}this._prePageNum(t),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var n=0;n<this.pageNumberLis.length;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(var r=0;r<5;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);0<t.length&&(this.currentPageNumberLis=t)}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function G5(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function z5(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?G5(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):G5(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function U5(e){n={},["(",")","","",",",""].forEach(function(e,t){n[e]="$".concat(t)});var n,t,r=n;for(t in r)for(var o=r[t],i=new RegExp("\\".concat(t),"g");i.test(e);)e=e.replace(i,o);return e}function V5(e){return/^\d/.test(e)}k.Lang=IN,k.i18n=k.Lang.i18n,k.Util=z5(z5({},k.Util),L),k.Browser=ne,k.INCHES_PER_UNIT=r,k.METERS_PER_INCH=.0254000508001016,k.DOTS_PER_INCH=96,k.IS_GECKO=re,k.setCORS=function(e){ul=e},k.isCORS=al,k.setRequestTimeout=function(e){return ll=e},k.getRequestTimeout=sl,k.FetchRequest=y,k.inherit=function(e,t){function n(){}var r,o,i;for(n.prototype=t.prototype,e.prototype=new n,r=2,o=arguments.length;r<o;r++)"function"==typeof(i=arguments[r])&&(i=i.prototype),L.extend(e.prototype,i)},k.mixin=X,k.String=q,k.Number=J,k.Function=Z,k.Array=K,k.Date=t,k.Event=f,k.Bounds=O,k.Credential=Xr,k.Events=Qr,k.Feature=Xe,k.Geometry=$,k.Pixel=Y,k.Size=U,k.Feature.Vector=nt,k.Geometry.Collection=be,k.Geometry.Curve=Me,k.Geometry.GeoText=Ln,k.Geometry.LinearRing=Ge,k.Geometry.LineString=Re,k.Geometry.MultiLineString=dt,k.Geometry.MultiPoint=Oe,k.Geometry.MultiPolygon=mt,k.Geometry.Point=j,k.Geometry.Polygon=Ye,k.Geometry.Rectangle=Yr,k.Components.Chart=TN,k.Components.ChartViewModel=UN,k.Components.MessageBox=CN,k.Components.AttributesPopContainer=b5,k.Components.CityTabsPage=j5,k.Components.CommonContainer=$N,k.Components.DropDownBox=l5,k.Components.IndexTabsPageContainer=O5,k.Components.NavTabsPage=R5,k.Components.PaginationContainer=F5,k.Components.PopContainer=d5,k.Components.Select=o5,k.Components.TemplateBase=XN,k.Components.FileReaderUtil=LN,k.TimeControlBase=_T,k.TimeFlowControl=jT,k.Format=k.Format||ot,k.Format.GeoJSON=jn,k.Format.JSON=ct,k.Format.WKT=bT,k.iManager=BT,k.iManagerCreateNodeParam=IT,k.iManagerServiceBase=TT,k.iPortal=tA,k.iPortalAddDataParam=iA,k.iPortalAddResourceParam=rA,k.iPortalDataConnectionInfoParam=uA,k.iPortalDataMetaInfoParam=aA,k.iPortalDataStoreInfoParam=sA,k.iPortalQueryParam=UT,k.iPortalQueryResult=VT,k.iPortalRegisterServiceParam=oA,k.iPortalResource=JT,k.iPortalServiceBase=GT,k.iPortalShareEntity=nA,k.iPortalShareParam=ZT,k.iPortalUser=pA,k.AddressMatchService=Pp,k.AggregationParameter=yA,k.AreaSolarRadiationParameters=wE,k.AreaSolarRadiationService=kE,k.BucketAggParameter=xA,k.BufferAnalystParameters=LE,k.BufferAnalystService=a2,k.BufferDistance=jE,k.BuffersAnalystJobsParameter=wO,k.BuffersAnalystJobsService=kO,k.BufferSetting=AE,k.BurstPipelineAnalystParameters=B1,k.BurstPipelineAnalystService=Y1,k.ChartFeatureInfoSpecsService=Qp,k.ChartQueryFilterParameter=Lp,k.ChartQueryParameters=Bp,k.ChartQueryService=Hp,k.ClipParameter=TA,k.ColorDictionary=J0,k.CommonServiceBase=m,k.ComputeWeightMatrixParameters=$1,k.ComputeWeightMatrixService=aw,k.CreateDatasetParameters=Md,k.DataFlowService=hd,k.DataReturnOption=BE,k.DatasetBufferAnalystParameters=HE,k.DatasetInfo=R0,k.DatasetOverlayAnalystParameters=Gk,k.DatasetService=Ed,k.DatasetSurfaceAnalystParameters=TM,k.DatasetThiessenAnalystParameters=aj,k.DatasourceConnectionInfo=fS,k.DatasourceService=Xd,k.DensityAnalystService=g2,k.DensityKernelAnalystParameters=u2,k.EditFeaturesParameters=ey,k.EditFeaturesService=uy,k.FacilityAnalyst3DParameters=U_,k.FacilityAnalystSinks3DParameters=J_,k.FacilityAnalystSinks3DService=ex,k.FacilityAnalystSources3DParameters=ax,k.FacilityAnalystSources3DService=hx,k.FacilityAnalystStreamParameters=uw,k.FacilityAnalystStreamService=yw,k.FacilityAnalystTracedown3DParameters=Cx,k.FacilityAnalystTracedown3DService=Nx,k.FacilityAnalystTraceup3DParameters=mx,k.FacilityAnalystTraceup3DService=Ox,k.FacilityAnalystUpstream3DParameters=Vx,k.FacilityAnalystUpstream3DService=Jx,k.FieldParameters=Jg,k.FieldsFilter=KI,k.FieldStatisticService=lv,k.FieldStatisticsParameters=nv,k.FilterParameter=vy,k.FindClosestFacilitiesParameters=vw,k.FindClosestFacilitiesService=Ow,k.FindLocationParameters=Ew,k.FindLocationService=Iw,k.FindMTSPPathsParameters=Lw,k.FindMTSPPathsService=Uw,k.FindPathParameters=Ww,k.FindPathService=Kw,k.FindServiceAreasParameters=$w,k.FindServiceAreasService=a_,k.FindTSPPathsParameters=u_,k.FindTSPPathsService=y_,k.GenerateSpatialDataParameters=m2,k.GenerateSpatialDataService=P2,k.GeoCodingParameter=yp,k.GeoDecodingParameter=mp,k.GeoHashGridAggParameter=FA,k.GeometryBatchAnalystService=kj,k.GeometryBufferAnalystParameters=$E,k.GeometryOverlayAnalystParameters=Xk,k.GeometrySurfaceAnalystParameters=BM,k.GeometryThiessenAnalystParameters=pj,k.GeoprocessingService=Dv,k.GeoRelationAnalystParameters=k2,k.GeoRelationAnalystService=R2,k.GetFeaturesByBoundsParameters=eg,k.GetFeaturesByBoundsService=ag,k.GetFeaturesByBufferParameters=pg,k.GetFeaturesByBufferService=bg,k.GetFeaturesByGeometryParameters=Eg,k.GetFeaturesByGeometryService=Ag,k.GetFeaturesByIDsParameters=My,k.GetFeaturesByIDsService=Ry,k.GetFeaturesBySQLParameters=zy,k.GetFeaturesBySQLService=Xy,k.GetFeaturesParametersBase=wy,k.GetFeaturesServiceBase=yy,k.GetFieldsService=Xg,k.GetGridCellInfosParameters=bv,k.GetGridCellInfosService=kv,k.GetLayersInfoService=_b,k.Grid=nb,k.HillshadeParameter=vI,k.Image=ub,k.ImageCollectionService=lT,k.ImageGFAspect=yR,k.ImageGFHillShade=hR,k.ImageGFOrtho=mR,k.ImageGFSlope=_R,k.ImageRenderingRule=lR,k.ImageSearchParameter=rR,k.ImageService=KC,k.ImageStretchOption=aR,k.InterpolationAnalystParameters=N2,k.InterpolationAnalystService=_k,k.InterpolationDensityAnalystParameters=K2,k.InterpolationIDWAnalystParameters=ok,k.InterpolationKrigingAnalystParameters=dk,k.InterpolationRBFAnalystParameters=W2,k.JoinItem=T0,k.KernelDensityJobParameter=wS,k.KernelDensityJobsService=kS,k.LabelImageCell=HA,k.LabelMatrixCell=GA,k.LabelMixedTextStyle=im,k.LabelSymbolCell=QA,k.LabelThemeCell=o3,k.LayerStatus=a3,k.LinkItem=l3,k.MappingParameters=vS,k.MapService=i1,k.MathExpressionAnalysisParameters=Sk,k.MathExpressionAnalysisService=Ck,k.MeasureParameters=v1,k.MeasureService=P1,k.MetricsAggParameter=jA,k.NDVIParameter=cI,k.NetworkAnalystServiceBase=N1,k.OutputSetting=dS,k.OverlapDisplayedOptions=h3,k.OverlayAnalystParameters=Ak,k.OverlayAnalystService=eM,k.OverlayGeoJobParameter=nO,k.OverlayGeoJobsService=lO,k.PointWithMeasure=Mt,k.ProcessingServiceBase=lS,k.QueryByBoundsParameters=pP,k.QueryByBoundsService=bP,k.QueryByDistanceParameters=EP,k.QueryByDistanceService=AP,k.QueryByGeometryParameters=QP,k.QueryByGeometryService=oE,k.QueryBySQLParameters=FP,k.QueryBySQLService=YP,k.QueryParameters=Ap,k.QueryService=aE,k.RasterFunctionParameter=nI,k.Route=Rt,k.RouteCalculateMeasureParameters=nM,k.RouteCalculateMeasureService=lM,k.RouteLocatorParameters=fM,k.RouteLocatorService=mM,k.ServerColor=u,k.ServerFeature=Ko,k.ServerGeometry=s,k.ServerStyle=c,k.ServerTextStyle=Xv,k.ServerTheme=X0,k.SetDatasourceParameters=Fd,k.SetLayerInfoParameters=y3,k.SetLayerInfoService=Mb,k.SetLayersInfoParameters=m3,k.SetLayersInfoService=Lb,k.SetLayerStatusParameters=Db,k.SetLayerStatusService=Yb,k.SingleObjectQueryJobsParameter=jS,k.SingleObjectQueryJobsService=NS,k.Sortby=eR,k.SpatialAnalystBase=mE,k.StopQueryParameters=Zj,k.StopQueryService=oC,k.SummaryAttributesJobsParameter=BO,k.SummaryAttributesJobsService=YO,k.SummaryMeshJobParameter=BS,k.SummaryMeshJobsService=YS,k.SummaryRegionJobParameter=fO,k.SummaryRegionJobsService=mO,k.SupplyCenter=_3,k.SurfaceAnalystParameters=SM,k.SurfaceAnalystParametersSetting=wM,k.SurfaceAnalystService=WM,k.TerrainCurvatureCalculationParameters=HM,k.TerrainCurvatureCalculationService=$M,k.Theme=Wv,k.ThemeDotDensity=e0,k.ThemeFlow=O3,k.ThemeGraduatedSymbol=c0,k.ThemeGraduatedSymbolStyle=n0,k.ThemeGraph=qm,k.ThemeGraphAxes=Tm,k.ThemeGraphItem=Gm,k.ThemeGraphSize=Rm,k.ThemeGraphText=Dm,k.ThemeGridRange=L3,k.ThemeGridRangeItem=k3,k.ThemeGridUnique=Y3,k.ThemeGridUniqueItem=D3,k.ThemeLabel=xm,k.ThemeLabelAlongLine=fm,k.ThemeLabelBackground=dm,k.ThemeLabelItem=Zv,k.ThemeLabelText=um,k.ThemeLabelUniqueItem=X3,k.ThemeMemoryData=Z3,k.ThemeOffset=nm,k.ThemeParameters=Nj,k.ThemeRange=w0,k.ThemeRangeItem=h0,k.ThemeService=Wj,k.ThemeUnique=jm,k.ThemeUniqueItem=$v,k.ThiessenAnalystParameters=ak,k.ThiessenAnalystService=wj,k.TilesetsService=f1,k.TopologyValidatorJobsParameter=jO,k.TopologyValidatorJobsService=NO,k.TransferLine=$3,k.TransferPathParameters=aC,k.TransferPathService=pC,k.TransferSolutionParameters=yC,k.TransferSolutionService=xC,k.TransportationAnalystParameter=Z1,k.TransportationAnalystResultSetting=X1,k.UGCLayer=x0,k.UGCMapLayer=j0,k.UGCSubLayer=z0,k.UpdateDatasetParameters=Td,k.UpdateEdgeWeightParameters=v_,k.UpdateEdgeWeightService=O_,k.UpdateTurnNodeWeightParameters=E_,k.UpdateTurnNodeWeightService=I_,k.Vector=db,k.VectorClipJobsParameter=XS,k.VectorClipJobsService=eO,k.WebPrintingJobContent=GI,k.WebPrintingJobCustomItems=bI,k.WebPrintingJobExportOptions=HI,k.WebPrintingJobImage=xI,k.WebPrintingJobLayers=PI,k.WebPrintingJobLayoutOptions=VI,k.WebPrintingJobLegendOptions=MI,k.WebPrintingJobLittleMapOptions=TI,k.WebPrintingJobNorthArrowOptions=RI,k.WebPrintingJobParameters=C,k.WebPrintingJobScaleBarOptions=DI,k.WebPrintingService=BC,k.Online=IR,k.OnlineData=TR,k.OnlineQueryDatasParameter=NR,k.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},k.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},k.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},k.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},k.OnlineServiceBase=OR,k.Feature=k.Feature||{},k.Feature.Theme=Dn,k.Feature.Theme.Bar=rL,k.Feature.Theme.Bar3D=HL,k.Feature.Theme.Circle=oN,k.Feature.Theme.Graph=LL,k.Feature.Theme.Line=cN,k.Feature.Theme.Pie=gN,k.Feature.Theme.Point=xN,k.Feature.Theme.RankSymbol=QL,k.Feature.Theme.Ring=MN,k.Feature.Theme.ThemeVector=ns,k.Feature.ShapeParameters=li,k.Feature.ShapeParameters.Circle=oa,k.Feature.ShapeParameters.Image=Qi,k.Feature.ShapeParameters.Label=Hi,k.Feature.ShapeParameters.Line=xi,k.Feature.ShapeParameters.Point=gi,k.Feature.ShapeParameters.Polygon=Mi,k.Feature.ShapeParameters.Rectangle=Ri,k.Feature.ShapeParameters.Sector=Gi,k.Feature.ShapeFactory=v,k.LevelRenderer=qo,k.KeyServiceParameter=FR,k.SecurityManager=Pf,k.ServerInfo=zR,k.TokenServiceParameter=VR,k.ThemeStyle=sL,k.CartoCSS=I,k.ElasticSearch=WR,k.ArrayStatistic=tL,k.ColorsPickerUtil=QR,k.DataFormat=a,k.ServerType=Lt,k.GeometryType=Nt,k.QueryOption=Dt,k.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},k.SpatialQueryMode=Bt,k.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},k.MeasureMode=Ft,k.Unit=Gt,k.BufferRadiusUnit=zt,k.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},k.ThemeGraphTextFormat=Ut,k.ThemeGraphType=Vt,k.GraphAxesTextDisplayMode=Wt,k.GraduatedMode=Yt,k.RangeMode=Ht,k.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},k.ColorGradientType=Xt,k.TextAlignment=qt,k.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},k.AlongLineDirection=Jt,k.LabelBackShape=Zt,k.LabelOverLengthMode=Kt,k.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},k.OverlayOperationType=$t,k.OutputType=en,k.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},k.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},k.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},k.BufferEndType=Qt,k.SmoothMethod=tn,k.SurfaceAnalystMethod=nn,k.DataReturnMode=rn,k.EditType=on,k.TransferTactic=an,k.TransferPreference=sn,k.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},k.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},k.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},k.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},k.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},k.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},k.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},k.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},k.VariogramMode=un,k.Exponent=ln,k.ClientType=cn,k.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},k.ClipAnalystMode=fn,k.AnalystAreaUnit=hn,k.AnalystSizeUnit=pn,k.StatisticAnalystMode=dn,k.SummaryType=yn,k.TopologyValidatorRule=gn,k.BucketAggType=vn,k.MetricsAggType=mn,k.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},k.RasterFunctionType=bn,k.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},k.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},k.OrderType={ASC:"ASC",DESC:"DESC"},k.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},k.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},k.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},k.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},k.WebExportFormatType={PNG:"PNG",PDF:"PDF"},k.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},k.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},k.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},k.KnowledgeGraph=gh;var re=function(){try{return convert}catch(e){return{}}}(),W5=e.n(re),K=function(){try{return canvg}catch(e){return{}}}(),Y5=e.n(K);function H5(e){return(H5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q5(e,t){return(q5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J5(e){return(J5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z5=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],K5=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],Q5=["GoogleCRS84Quad","GoogleMapsCompatible"],t=function(){var e=i,t=l().Evented;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q5(e,t);n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();var n,r,o=function(){var e,t=J5(n),t=(e=r?(e=J5(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(!e||"object"!==H5(e)&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=t))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e};function i(e,t){var n;if(this instanceof i)return(n=o.call(this)).mapId=e,n.server=(t=t||{}).server,n.credentialKey=t.credentialKey,n.credentialValue=t.credentialValue,n.withCredentials=t.withCredentials||!1,n.target=t.target||"map",n._canvgsV=[],n._createWebMap(),n.on("mapinitialized",function(){n.map.on("remove",function(){n._stopCanvg()})}),n;throw new TypeError("Cannot call a class as a function")}return X5((e=i).prototype,[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(e){this.mapId=e,this._createWebMap()}},{key:"setWebMapOptions",value:function(e){this.server=e.server,this._createWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,n=e.zoom,r=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,e=e.pitch;t&&t.length&&this.map.setCenter(t),n&&this.map.setZoom(n),r&&this.map.setMaxBounds(r),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),e&&this.map.setPitch(e)}},{key:"_createWebMap",value:function(){var e,t=this.server.split(""),t=("/"!==t[t.length-1]&&(this.server+="/"),this.server+"web/maps/"+this.mapId+"/map"),n=(this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue),"getUrlResource.json?url=");this.excludePortalProxyUrl&&-1<this.server.indexOf(n)&&1<(e=this.server.split(n)).length&&(t=e[0]+n+this.server+"web/maps/"+this.mapId+"/map.json"),this._getMapInfo(t)}},{key:"_createMap",value:function(e){var t=[],n=e.layers;n&&0<n.length&&n.forEach(function(e){e.labelStyle&&t.push(e.labelStyle.fontFamily)},this),t.push("'supermapol-icons'");var n=t.join(","),r=e.center,o=e.level||0;o+=e.minScale&&e.maxScale?this._transformScaleToZoom(e.minScale,l().CRS?l().CRS.get(this.baseProjection):"EPSG:3857"):(e=this._getResolution(l().CRS?l().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(e.extent),+Math.log(e)/Math.LN2.toFixed(2)),e=r?this._unproject([r.x,r.y]):new(l().LngLat)(0,0),this.map=new(l().Map)({container:this.target,center:e,zoom:o,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:n||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(e){var n=this,e=-1===e.indexOf(".json")?"".concat(e,".json"):e;y.get(e,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){if(n.baseProjection=e.projection,n.mapParams={title:e.title,description:e.description},!(n.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(IN.i18n("msg_crsunsupport"));n._createMap(e,n.mapSetting);var t=e.layers;n.map.on("load",function(){n._addBaseMap(e),t&&0!==t.length?n._addLayers(t):n._sendMapToUser(0,0)})}).catch(function(e){n.fire("getmapfailed",{error:e})})}},{key:"_addBaseMap",value:function(e){this._createBaseLayer(e)}},{key:"_createBaseLayer",value:function(e){var t=e.baseLayer||e,n=t.layerType;switch(n=-1<n.indexOf("TIANDITU_VEC")||-1<n.indexOf("TIANDITU_IMG")||-1<n.indexOf("TIANDITU_TER")?n.substr(0,12):n){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(e);break;case"BING":this._createBingLayer(t.name);break;case"WMS":this._createWMSLayer(t);break;case"WMTS":this._createWMTSLayer(t);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(t);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":this._createXYZLayer(t,{CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[n]);break;case"MAPBOXSTYLE":this._createMapboxStyle(t)}}},{key:"_createMapboxStyle",value:function(e){var t=this,e=e.dataSource,e=void 0===e?{}:e,n=e.serverId,e=e.url,n=void 0!==n?"".concat(this.server,"web/datas/").concat(n,"/download"):e;y.get(n,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(e){return e.json()}).then(function(e){t._matchStyleObject(e),t.map.setStyle(e)})}},{key:"_matchStyleObject",value:function(e){var t=e.sprite,n=e.glyphs;t&&"object"===H5(t)&&(e.sprite=Object.values(t)[0]),n&&"object"===H5(n)&&(e.glyphs=Object.values(n)[0])}},{key:"_createTiandituLayer",value:function(e){var t=this._getTiandituUrl(e),n=e.baseLayer.layerType,e=Boolean(e.baseLayer.labelLayerVisible),r=t.labelUrl,t=t.tiandituUrl;this._addBaselayer(t,"tianditu-layers-"+n),e&&this._addBaselayer(r,"tianditu-label-layers-"+n)}},{key:"_createWMTSLayer",value:function(n){var r=this,o=this._getWMTSUrl(n);this._filterWMTSIsMatched(n,function(e,t){e&&r._addBaselayer([o],"wmts-layers"+n.name,0,t)})}},{key:"_filterWMTSIsMatched",value:function(u,l){var c=this,f=!1,h=22,e=u.url;y.get(e,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(e){var t=W5()?W5():window.convert,n=JSON.parse(t.xml2json(e,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet;Array.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)if(n[r]["ows:Identifier"]&&n[r]["ows:Identifier"]._text===u.tileMatrixSet){if(!(-1<Q5.indexOf(n[r].WellKnownScaleSet._text))){if(!n[r].WellKnownScaleSet||"Custom"!==n[r].WellKnownScaleSet._text)throw Error(IN.i18n("msg_tilematrixsetunsupport"));for(var o=[],i="EPSG:3857"===c.map.crs?Z5:K5,a=0,s=i.length;a<s&&n[r].TileMatrix[a]&&i[a]===n[r].TileMatrix[a].ScaleDenominator._text;a++)o.push(i[a]);if(h=o.length-1,0===o.length)throw Error(IN.i18n("msg_tilematrixsetunsupport"))}f=!0}l(f,h)}).catch(function(e){c.fire("getwmtsfailed",{error:e,map:c.map})})}},{key:"_createBingLayer",value:function(e){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+e)}},{key:"_createXYZLayer",value:function(e,t){var n=[];if("OSM"===e.layerType){for(var r=t.match(/\w\-\w/g)[0],o=r[0],r=r[2],i="",a=97;a<123;a++)i+=String.fromCharCode(a);for(var s=i.split(""),o=s.indexOf(o),r=s.indexOf(r),u=s.slice(o,r+1),l=0;l<u.length;l++){var c=t.replace(/{\w\-\w}/g,u[l]);n.push(c)}}else if("GOOGLE_CN"===e.layerType)for(var s=t.match(/\d\-\d/g)[0],o=s[0],f=s[2],h=o;h<=f;h++){var p=t.replace(/{\d\-\d}/g,h);n.push(p)}else n=[t];this._addBaselayer(n,"XYZ-layers-"+e.name)}},{key:"_createDynamicTiledLayer",value:function(e){var t=e.url,n=e.layerID||e.name,r=e.minzoom,e=e.maxzoom;this._addBaselayer([t],n,r,e,!0)}},{key:"_createWMSLayer",value:function(e){var t=this._getWMSUrl(e);this._addBaselayer([t],"WMS-layers-"+e.name)}},{key:"_createVectorLayer",value:function(e,t){var n=e.style,r=e.featureType,o=e.layerID,e=e.visible,i={},t=(i.style=this._transformStyleToMapBoxGl(n,r),i.layout={visibility:e},{type:"geojson",data:{type:"FeatureCollection",features:t}});this._addOverlayToMap(r,t,o,i),"POLYGON"===r&&n.strokeColor&&this._addStrokeLineForPoly(n,t,o+"-strokeLine",e)}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,n={},r=e.baseLayer.layerType.split("_")[1].toLowerCase(),e=Boolean(e.baseLayer.labelLayerVisible),o="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",i=o,a="EPSG:4326"===this.baseProjection?"c":"w",s={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:r,tilematrixSet:a,format:"tiles",width:256,height:256},u=(o+=this._getParamString(s,o)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",r).replace("{proj}",a),l=[],c=0;c<8;c++)l.push(u.replace(t,"t".concat(c)));if(n.tiandituUrl=l,e){o={vec:"cva",ter:"cta",img:"cia"}[r];s.layer=o;for(var i=(i+=this._getParamString(s,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",o).replace("{proj}",a),f=[],h=0;h<8;h++)f.push(i.replace(t,"t".concat(h)));n.labelUrl=f}return n}},{key:"_getWMSUrl",value:function(e){var e=e.url,t=(e=e.split("?")[0]).split("/"),t={service:"WMS",request:"GetMap",layers:t[t.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},n="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return e+(this._getParamString(t,e)+"&bbox=".concat(n))}},{key:"_addLayers",value:function(e){var s=this;this.layers=e;var n,u=0,l=e.length;e.forEach(function(i,a){var e,t;i.dataSource&&i.dataSource.serverId||"MARKER"===i.layerType?(t=(i.dataSource||i).serverId,e="".concat(s.server,"web/datas/").concat(t,"/content.json?pageSize=9999999&currentPage=1"),t&&y.get(e,null,{withCredentials:s.withCredentials}).then(function(e){return e.json()}).then(function(e){!1===e.succeed?(u++,s._sendMapToUser(u,l),s.fire("getlayersfailed",{error:e.error,map:s.map})):e.type&&("JSON"===e.type||"GEOJSON"===e.type?(e.content=JSON.parse(e.content.trim()),n=s._formatGeoJSON(e.content,i)):"EXCEL"!==e.type&&"CSV"!==e.type||(n=s._excelData2Feature(e.content,i)),s._addLayer(i,n,a),u++,s._sendMapToUser(u,l))}).catch(function(e){u++,s._sendMapToUser(u,l),s.fire("getlayersfailed",{error:e,map:s.map})})):"SUPERMAP_REST"===i.layerType||"TILE"===i.layerType||"WMS"===i.layerType||"WMTS"===i.layerType?(s._createBaseLayer(i),u++,s._sendMapToUser(u,l)):i.dataSource&&"REST_DATA"===i.dataSource.type?(t=i.dataSource,s._getFeatureBySQL(t.url,[t.dataSourseName||i.name],function(e){n=s._parseGeoJsonData2Feature({allDatas:{features:e.result.features.features},fileCode:i.projection,featureProjection:s.baseProjection}),s._addLayer(i,n,a),u++,s._sendMapToUser(u,l)},function(e){u++,s._sendMapToUser(u,l),s.fire("getfeaturesfailed",{error:e})})):i.dataSource&&"REST_MAP"===i.dataSource.type&&i.dataSource.url&&s._queryFeatureBySQL(i.dataSource.url,i.dataSource.layerName,"smid=1",null,null,function(e){var e=e&&e.result.recordsets,e=e&&e[0],t=e.fields;if(e&&t){var n,r=[];for(n in t){var o=t[n];0===o.indexOf("Sm")&&"SmID"!==o||r.push(o)}s._getFeatures(r,i,function(e){s._addLayer(i,e,a),u++,s._sendMapToUser(u,l)},function(e){u++,s.fire("getfeaturesfailed",{error:e,map:s.map})})}},function(e){s.fire("getlayersfailed",{error:e,map:s.map})})},this)}},{key:"_getFeatures",value:function(e,t,n,r){var o=this,i=t.dataSource,a=t.projection;this._queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){e=e.result.recordsets[0].features.features,e=o._parseGeoJsonData2Feature({allDatas:{features:e},fileCode:a,featureProjection:o.baseProjection},"JSON");n(e)},function(e){r(e)})}},{key:"_addLayer",value:function(e,t,n){var r=e.layerType;e.layerID=r+"-"+e.name+"-"+n,e.visible=e.visible?"visible":"none",t[0]&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t)),e.style&&e.filterCondition&&"RANGE"!==r&&"UNIQUE"!==r&&(t=this._getFiterFeatures(e.filterCondition,t)),"VECTOR"===r?"POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):this._createVectorLayer(e,t):"UNIQUE"===r?this._createUniqueLayer(e,t):"RANGE"===r?this._createRangeLayer(e,t):"HEAT"===r?this._createHeatLayer(e,t):"MARKER"===r&&this._createMarkerLayer(e,t),e.labelStyle&&e.labelStyle.labelField&&this._addLabelLayer(e,t)}},{key:"_addLabelLayer",value:function(e,t){var n=e.labelStyle;this.map.addLayer({id:e.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":n.fill},layout:{"text-field":"{".concat(n.labelField,"}"),"text-size":parseFloat(n.fontSize)||12,"text-offset":n.offsetX?[n.offsetX/10||0,n.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}})}},{key:"_createSymbolLayer",value:function(e,t){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var n=e.style,r=e.style.unicode,r=String.fromCharCode(parseInt(r.replace(/^&#x/,""),16)),o=e.layerID;this.map.addSource(o+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:o,type:"symbol",source:o+"-source",paint:{"text-color":n.fillColor},layout:{"text-field":r,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}}),this.map.getSource(o+"-source").setData({type:"FeatureCollection",features:t})}},{key:"_createGraphicLayer",value:function(r,e){var t,o=this,i=r.style,n={},a=r.layerID,s={type:"geojson",data:{type:"FeatureCollection",features:e}};"IMAGE_POINT"===i.type?((t=(e=i.imageInfo).img)&&t.src||(e.url=this.server+e.url),this.map.loadImage(e.url||t.src,function(e,t){e&&console.log(e);e=2*Number.parseFloat((i.radius/t.height).toFixed(2));o.map.addImage("imageIcon",t),o.map.addLayer({id:a,type:"symbol",source:s,layout:{"icon-image":"imageIcon","icon-size":e,visibility:r.visible}})})):"SVG_POINT"===i.type?(e=i.url,this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(e,this.svgDiv,function(n){var e=n.toDataURL("img/png");e&&o.map.loadImage(e,function(e,t){e&&console.log(e);e=Number.parseFloat((i.radius/n.width).toFixed(2));o.map.addImage("imageIcon",t),o.map.addLayer({id:a,type:"symbol",source:s,layout:{"icon-image":"imageIcon","icon-size":e,visibility:r.visible}})},o)})):(n.style=this._transformStyleToMapBoxGl(i,r.featureType),n.layout={visibility:r.visible},this._addOverlayToMap("POINT",s,a,n))}},{key:"_createUniqueLayer",value:function(e,t){var n=this._getUniqueStyleGroup(e,t),r=(t=this._getFiterFeatures(e.filterCondition,t),e.style),o={},i=e.themeSetting.themeField,a=e.featureType,s=["match",["get","index"]],u=e.layerID,e=(t.forEach(function(t){n.forEach(function(e){e.value===t.properties[i]&&s.push(t.properties.index,e.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(r,a,s),e.visible),t=(o.layout={visibility:e},{type:"geojson",data:{type:"FeatureCollection",features:t}});this._addOverlayToMap(a,t,u,o),"POLYGON"===a&&r.strokeColor&&this._addStrokeLineForPoly(r,t,u+"-strokeLine",e)}},{key:"_getUniqueStyleGroup",value:function(e,t){var n,r=e.featureType,o=e.style,e=e.themeSetting,i=e.themeField,a=e.colors,s=[],u=e.customSettings;for(n in t){var l,c=t[n].properties[i],f=!1;for(l in s)if(s[l]===c){f=!0;break}f||s.push(c)}var h=a||this.defaultParameters.colors,h=QR.getGradientColors(h,s.length),p=[];return s.forEach(function(e,t){t=h[t];e in u&&(t=u[e]),"LINE"===r?o.strokeColor=t:o.fillColor=t,p.push({color:t,value:e})},this),p}},{key:"_getWMTSUrl",value:function(e){var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png"},e=e.url;return e+(this._getParamString(t,e)+"&tilematrix={z}&tilerow={y}&tilecol={x}")}},{key:"_createMarkerLayer",value:function(s,e){var u=this;e&&e.forEach(function(e){var t=e.geometry.type.toUpperCase(),n=e.dv_v5_markerStyle,r=("POINT"===t&&n.text&&(t="TEXT"),u.setFeatureInfo(e)),o=(e.properties.useStyle=n,e.properties.featureInfo=r,"POINT"===t&&n.src&&-1===n.src.indexOf("http://")&&-1===n.src.indexOf("https://")&&(n.src=u.server+n.src),{type:"geojson",data:e}),i=e.properties.index,a=t+"-"+i;"POINT"===t&&n.src&&n.src.indexOf("svg")<=-1&&u.map.loadImage(n.src,function(e,t){e&&console.log(e),u.map.addImage(i+"",t),u.map.addLayer({id:a,type:"symbol",source:o,layout:{"icon-image":i+"","icon-size":n.scale,visibility:s.visible}})},u),"POINT"===t&&n.src&&-1<n.src.indexOf("svg")&&(u.svgDiv||(u.svgDiv=document.createElement("div"),document.body.appendChild(u.svgDiv)),u._getCanvasFromSVG(n.src,u.svgDiv,function(e){e=e.toDataURL("img/png");e&&u.map.loadImage(e,function(e,t){e&&console.log(e),u.map.addImage(i+"",t),u.map.addLayer({id:a,type:"symbol",source:o,layout:{"icon-image":i+"","icon-size":n.scale,visibility:s.visible}})},u)})),n.src||(r={layout:{}},"LINESTRING"===t&&n.lineCap&&(t="LINE",r.layout={"line-cap":n.lineCap}),e=s.visible,r.layout.visibility=e,r.style=u._transformStyleToMapBoxGl(n,t),u._addOverlayToMap(t,o,a,r),"POLYGON"===t&&n.strokeColor&&u._addStrokeLineForPoly(n,o,a+"-strokeLine",e))},this)}},{key:"setFeatureInfo",value:function(e){var t=e.dv_v5_markerInfo;if(!t||!t.dataViz_title)return t;var n,r=t,o=e.properties;for(n in r)o[n]&&(r[n]=o[n],delete o[n]);return r}},{key:"_createHeatLayer",value:function(e,t){var n,r=e.themeSetting,o={},i=(o.gradient=r.colors.slice(),o.radius=parseInt(r.radius),r.customSettings);for(n in i)o.gradient[n]=i[n];r.weight&&this._changeWeight(t,r.weight);var a,s,u,l=["interpolate",["linear"],["heatmap-density"]],c=(1/o.gradient.length).toFixed(2),r=(o.gradient.forEach(function(e,t){l.push(t*c),0===t&&(e=_.hexToRgba(e,0)),l.push(e)}),{"heatmap-color":l,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}});t[0].weight&&4<=t.length&&(a=[],t.forEach(function(e){a.push(e.weight)}),s=tL.getMax(a),u=tL.getMin(a),r["heatmap-weight"]=["interpolate",["linear"],["get","weight"],u,0,s,1]),this.map.addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:r})}},{key:"_changeWeight",value:function(e,n){this.fieldMaxValue={},this._getMaxValue(e,n);var r=this.fieldMaxValue[n];e.forEach(function(e){var t=e.properties[n];e.weight=t/r})}},{key:"_getMaxValue",value:function(e,t){var n,r=[],o=t;this.fieldMaxValue[o]||(e.forEach(function(e){(n=e.properties)&&parseFloat(n[o])&&r.push(parseFloat(n[o]))}),this.fieldMaxValue[o]=tL.getArrayStatistic(r,"Maximum"))}},{key:"_createRangeLayer",value:function(e,t){var r=e.themeSetting.themeField,n=e.style,o=e.featureType,i=this._getRangeStyleGroup(e,t),a={type:"geojson",data:{type:"FeatureCollection",features:t=this._getFiterFeatures(e.filterCondition,t)}},s=["match",["get","index"]],t=(t.forEach(function(e){for(var t=parseFloat(e.properties[r]),n=0;n<i.length;n++)i[n].start<=t&&t<i[n].end&&s.push(e.properties.index,i[n].color);t||s.push(e.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)"),{layout:{}}),u=("LINE"===o&&n.lineCap&&(t.layout={"line-cap":n.lineCap}),e.visible),e=(t.layout.visibility=u,t.style=this._transformStyleToMapBoxGl(n,o,s),e.layerID);this._addOverlayToMap(o,a,e,t),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,e+"-strokeline",u)}},{key:"_getFiterFeatures",value:function(e,t){if(!e)return t;for(var n=this._replaceFilterCharacter(e),r=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{var s=i.properties,u=function(e,r){var o=e;return e.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(e){return e}).forEach(function(t){var e,n=r.find(function(e){return e===t});V5(t)&&n&&(o=o.replace(n,"$"+n)),n&&(e=U5(n),o=o.replace(n,e))}),o}(n,Object.keys(s)),l=function(e){var t,n={};for(t in e){var r=t;n[r=U5(r=V5(t)?"$"+t:r)]=e[t]}return n}(s),c="select * from json where ("+u+")",a=window.jsonsql.query(c,{attr:l})}catch(e){continue}a&&0<a.length&&r.push(i)}return r}},{key:"_replaceFilterCharacter",value:function(e){return e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(e,t){var n,r=e.featureType,o=e.style,i=[],e=e.themeSetting,a=e.customSettings,s=e.themeField,u=e.segmentCount,l=(t.forEach(function(e){(n=e.properties||e.get("Properties"))?n[s]&&_.isNumber(n[s])&&i.push(parseFloat(n[s])):e.get(s)&&_.isNumber(e.get(s))&&e.get(s)&&i.push(parseFloat(e.get(s)))},this),tL.getArraySegments(i,e.segmentMethod,u));if(l){var c,f=u;for(c in n&&l[0]===l[n.length-1]&&(f=1,l.length=2),l){var h=l[c],h=0==c?Math.floor(100*h)/100:Math.ceil(100*h)/100+.1;l[c]=Number(h.toFixed(2))}for(var p=e.colors,d=0;d<f;d++)d in a&&(a[d].segment.start&&(l[d]=a[d].segment.start),a[d].segment.end)&&(l[d+1]=a[d].segment.end);for(var y=[],g=0;g<f;g++){var v=p[g],m=(g in a&&a[g].color&&(v=a[g].color),"LINE"===r?o.strokeColor=v:o.fillColor=v,l[g]),b=l[g+1],w=JSON.parse(JSON.stringify(o));y.push({style:w,color:v,start:m,end:b})}return y}}},{key:"_formatGeoJSON",value:function(e){e=e.features;return e.forEach(function(e,t){e.properties.index=t}),e}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,o=0,i=t.length;o<i;o++)this._isXField(t[o])&&(n=o),this._isYField(t[o])&&(r=o);for(var a=[],s=0,u=e.rows.length;s<u;s++){var l,c=e.rows[s],f=Number(c[n]),c=Number(c[r]),h={};for(l in e.colTitles)h[e.colTitles[l]]=e.rows[s][l];h.index=s+"",a.push({type:"Feature",geometry:{type:"Point",coordinates:[f,c]},properties:h})}return a}},{key:"_sendMapToUser",value:function(e,t){e===t&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(e){for(var t=180/Math.PI,n=Math.exp(-e[1]/6378137),r=Math.PI/2-2*Math.atan(n),o=0,i=.1;o<15&&1e-7<Math.abs(i);o++)r+=i=Math.PI/2-2*Math.atan(+n)-r;return new(l().LngLat)(e[0]*t/6378137,r*t)}},{key:"_getParamString",value:function(e,t,n){var r,o=[];for(r in e)o.push((n?r.toUpperCase():r)+"="+e[r]);return(t&&-1!==t.indexOf("?")?"&":"?")+o.join("&")}},{key:"_isXField",value:function(e){e=e.toLowerCase();return"x"===e||"smx"===e||"jd"===e||""===e||""===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e}},{key:"_isYField",value:function(e){e=e.toLowerCase();return"y"===e||"smy"===e||"wd"===e||""===e||""===e||"latitude"===e||"lat"===e}},{key:"_transformStyleToMapBoxGl",value:function(e,t,n){var r,o={},i=("POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?"LINE"===t?o={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===t&&(o={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):o={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"},{});for(r in e)o[r]&&(i[o[r]]=e[r]);return n&&(i["circle-color"]?i["circle-color"]=n:i["line-color"]?i["line-color"]=n:i["fill-color"]=n),e.lineDash&&"solid"!==e.lineDash&&"LINE"===t&&(i["line-dasharray"]=this._dashStyle(e)),i}},{key:"_dashStyle",value:function(e){if(!e)return[];var t=e.strokeDashstyle||e.lineDash;switch(t){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return t?L.isArray(t)?t:(t=q.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(e,t,n){var r=this,o=document.createElement("canvas"),t=(o.id="dataviz-canvas-"+_.newGuid(8),o.style.display="none",t.appendChild(o),window.canvg&&window.canvg.default?window.canvg.default:Y5()),i=o.getContext("2d");t.from(i,e,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(e){e.start(),r._canvgsV.push(e),300<o.width||300<o.height||n(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(e){return e.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(e,t,n,r){"circle"!==(e={POINT:"circle",LINE:"line",POLYGON:"fill"}[e])&&"line"!==e&&"fill"!==e||this.map.addLayer({id:n,type:e,source:t,paint:r.style,layout:r.layout||{}})}},{key:"_addBaselayer",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:22,o=4<arguments.length?arguments[4]:void 0;this.map.addLayer({id:t,type:"raster",source:{type:"raster",tiles:e,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:n,maxzoom:r})}},{key:"_addStrokeLineForPoly",value:function(e,t,n,r){var o={};o.style=this._transformStyleToMapBoxGl(e,"LINE"),o.layout={visibility:r},this._addOverlayToMap("LINE",t,n,o)}},{key:"_parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,n=[],r=0,o=t.length;r<o;r++){var i=t[r],a=i.geometry.coordinates;"Point"===t[r].geometry.type&&t[r].properties&&(t[r].properties.lon=a[0],t[r].properties.lat=a[1]),i.properties.index=r+"",n.push(i)}return n}},{key:"_getFeatureBySQL",value:function(e,t,n,r){var o=new vy({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),o=new zy({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0});new Xy(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){r&&r(e)}}}).processAsync(o)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,o,i,a,s,u,l){t=new vy({name:t,attributeFilter:n}),r&&(t.fields=r),n={queryParams:[t]};l&&(n.queryOption=Dt.ATTRIBUTE),s&&(n.startRecord=s),u&&(n.expectCount=u),o&&(n.prjCoordSys={epsgCode:o}),r=new FP(n),new hE(e).queryBySQL(r,function(e){("processCompleted"===e.type?i:a)(e)})}},{key:"_handleMultyPolygon",value:function(e){return e.forEach(function(e){var t,n;"Polygon"===e.geometry.type&&1<(t=e.geometry.coordinates).length&&(n=[],t.forEach(function(e){n.push([e])}),e.geometry.coordinates=n,e.geometry.type="MultiPolygon")}),e}},{key:"_transformScaleToZoom",value:function(e,t){var n=295829515.2024169,t=("EPSG:3857"!==(t||this.map.getCRS()).epsgCode&&(n=295295895),e.split(":")[1]);return Math.min(24,+Math.log2(n/+t).toFixed(2))}},{key:"_getResolution",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}}]),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $5(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function eD(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?$5(Object(o),!0).forEach(function(e){var t,n;t=r,n=o[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):$5(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}l().supermap=eD(eD({},k),l().supermap),l().supermap.map=l().supermap.map||{},l().supermap.LogoControl=B,l().supermap.Logo=B,l().supermap.Util=_,l().supermap.WebMap=t,l().supermap.Graphic=p,l().supermap.map.getDefaultVectorTileStyle=function(e,t){var n={},e=(n.version=(t=t||{}).version||8,n.layers=t.layers||[],n.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]},{version:n.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:n.layers,light:n.light});return null!=t.sprite&&(e.sprite=t.sprite),null!=t.glyphs&&(e.glyphs=t.glyphs),e},l().supermap.map.setBackground=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},l().supermap.map.setPaintProperty=function(e,t,n,r,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,s={id:u=t[a],type:n,source:o||"vector-tiles","source-layer":s||u,paint:r};e.addLayer(s,t[a]),e.moveLayer(t[a])}}var u},l().supermap.MapvDataSet=Ph,l().supermap.GeoFeatureThemeLayer=us,l().supermap.Theme3DLayer=Ts,l().supermap.ThemeFeature=Gn,l().supermap.ThemeLayer=ei,l().supermap.Transform=fu,l().supermap.WebSymbol=hp,l().supermap.DeckglLayer=Ku,l().supermap.GraphicLayer=Or,l().supermap.GraphThemeLayer=si,l().supermap.GraticuleLayer=dl,l().supermap.HeatMapLayer=Uu,l().supermap.LabelThemeLayer=_r,l().supermap.MapvLayer=Ms,l().supermap.FGBLayer=mf,l().supermap.RangeTheme3DLayer=o,l().supermap.RangeThemeLayer=i,l().supermap.RankSymbolThemeLayer=fr,l().supermap.ThreeLayer=Au,l().supermap.UniqueTheme3DLayer=yr,l().supermap.UniqueThemeLayer=mr,l().supermap.GraphMap=oh,l().supermap.AddressMatchService=Cp,l().supermap.ChartService=ad,l().supermap.DataFlowService=md,l().supermap.DatasetService=Dd,l().supermap.DatasourceService=Qd,l().supermap.FeatureService=Gg,l().supermap.FieldService=vv,l().supermap.GeoprocessingService=Uv,l().supermap.GridCellInfosService=Av,l().supermap.ImageCollectionService=dT,l().supermap.ImageService=nT,l().supermap.LayerInfoService=b,l().supermap.MapService=w,l().supermap.MeasureService=C1,l().supermap.NetworkAnalyst3DService=rS,l().supermap.NetworkAnalystService=x,l().supermap.ProcessingService=S,l().supermap.QueryService=hE,l().supermap.ServiceBase=g,l().supermap.SpatialAnalystService=P,l().supermap.ThemeService=E,l().supermap.TrafficTransferAnalystService=CC,l().supermap.WebPrintingJobService=VC,l().supermap.KnowledgeGraphService=Yf,l().supermap.Components.ChartView=TN,l().supermap.CommonUtil=L},52174:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},77574:function(e,t,n){var r=n(52174);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},81121:function(e){function u(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}e.exports=function(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){u(r,t,n,o,i,"next",e)}function i(e){u(r,t,n,o,i,"throw",e)}o(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},46834:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},43083:function(e,t,n){var o=n(90597);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},75650:function(e,t,n){var r=n(90597);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},28860:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},26791:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},82015:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},83342:function(M,e,t){var j=t(60549).default;function n(){"use strict";M.exports=function(){return a},M.exports.__esModule=!0,M.exports.default=M.exports;var u,a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(u){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof v?t:v,t=Object.create(t.prototype),r=new E(r||[]);return c(t,"_invoke",{value:(o=e,i=n,a=r,s=h,function(e,t){if(s===d)throw new Error("Generator is already running");if(s===y){if("throw"===e)throw t;return{value:u,done:!0}}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===u)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=u,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=f(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=u),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=y,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;n=f(o,i,a);if("normal"===n.type){if(s=a.done?y:p,n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s=y,a.method="throw",a.arg=n.arg)}})}),t}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",g={};function v(){}function m(){}function b(){}var t={},w=(i(t,r,function(){return this}),Object.getPrototypeOf),w=w&&w(w(k([]))),_=(w&&w!==e&&l.call(w,r)&&(t=w),b.prototype=v.prototype=Object.create(t));function x(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function S(a,s){var t;c(this,"_invoke",{value:function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=f(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==j(n)&&l.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(l.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=u,e.done=!0,e}).next=e}throw new TypeError(j(t)+" is not iterable")}return c(_,"constructor",{value:m.prototype=b,configurable:!0}),c(b,"constructor",{value:m,configurable:!0}),m.displayName=i(b,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,i(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},x(S.prototype),i(S.prototype,n,function(){return this}),a.AsyncIterator=S,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new S(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(_),i(_,o,"Generator"),i(_,r,function(){return this}),i(_,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=k,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=u)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=u),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=l.call(o,"catchLoc"),s=l.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,P(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=u),g}},a}M.exports=n,M.exports.__esModule=!0,M.exports.default=M.exports},7637:function(e,t,n){var r=n(77574),o=n(26791),i=n(77630),a=n(82015);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},51285:function(e,t,n){var r=n(60549).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")},e.exports.__esModule=!0,e.exports.default=e.exports},90597:function(e,t,n){var r=n(60549).default,o=n(51285);e.exports=function(e){e=o(e,"string");return"symbol"===r(e)?e:String(e)},e.exports.__esModule=!0,e.exports.default=e.exports},60549:function(t){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},77630:function(e,t,n){var r=n(52174);e.exports=function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0},e.exports.__esModule=!0,e.exports.default=e.exports},31364:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n=n(83342)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},41351:function(e,t){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)};function d(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function y(r,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=o.call(r,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e){return this instanceof p?(this.v=e,this):new p(e)}r=Error,n(o=c,i=r),o.prototype=null===i?Object.create(i):(f.prototype=i.prototype,new f);var r,o,i,l=c;Object.defineProperty(u.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),u.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},u.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},Object.defineProperty(s.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),s.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},s.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},Object.defineProperty(a.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},a.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()};function a(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}function s(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}function u(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}function c(e){e=r.call(this,e)||this;return Object.defineProperty(e,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(e,e.constructor.prototype):e.__proto__=e.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(e,e.constructor),e}function f(){this.constructor=o}function h(e){null!=e&&"function"==typeof e.then&&e.then(v,v)}function v(){}var m=2,b=3,w=4;function _(e){var t=e.err,n=Promise.resolve(e.execution).then(function(e){if(null!=t)throw t;return e});return e.err=void 0,e.execution=n.then(function(){},function(){}),void 0===e.pending?n:e.pending.then(function(){return n})}function x(t,e){var n=t.state>=b;return Promise.resolve(e).then(function(e){return!n&&t.state>=w?_(t).then(function(e){return{value:e,done:!0}}):{value:e,done:n}})}function S(e,t){var n,r;if(!(e.state>=m))if(e.state=m,e.onnext(),e.onstop(),null==e.err&&(e.err=t),0!==e.pushes.length||void 0!==e.buffer&&!e.buffer.empty)try{for(var o=g(e.pushes),i=o.next();!i.done;i=o.next())i.value.resolve()}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else O(e)}function O(e){var t,n;if(!(e.state>=b)){e.state<m&&S(e),e.state=b,e.buffer=void 0;try{for(var r=g(e.nexts),o=r.next();!o.done;o=r.next()){var i=o.value,a=void 0===e.pending?_(e):e.pending.then(function(){return _(e)});i.resolve(x(e,a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function P(e){e.state>=w||(e.state<b&&O(e),e.state=w)}var E=new WeakMap,k=(M.prototype.next=function(t){h(t);var e,n,r,o,i,a,s,u=E.get(this);if(void 0===u)throw new Error("WeakMap error");if(1024<=u.nexts.length)throw new l("No more than 1024 pending calls to next are allowed on a single repeater.");return u.state<=0&&(1<=(n=u).state||(n.state=1,r=function(t,e){if(h(e),1024<=t.pushes.length)throw new l("No more than 1024 pending calls to push are allowed on a single repeater.");var n,r,o,i,a;return t.state>=m?Promise.resolve(void 0):(n=(n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e})).catch(function(e){t.state<m&&(t.err=e),P(t)}),r=t.nexts.length?(t.nexts.shift().resolve(x(t,n)),t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),Promise.resolve(void 0)),o=!0,i={},a=r.catch(function(e){if(o)throw e}),i.then=function(e,t){return o=!1,Promise.prototype.then.call(r,e,t)},i.catch=function(e){return o=!1,Promise.prototype.catch.call(r,e)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,P(t)}),i)}.bind(null,n),i=n,a=S.bind(null,i),s=new Promise(function(e){return i.onstop=e}),a.then=s.then.bind(s),a.catch=s.catch.bind(s),a.finally=s.finally.bind(s),o=a,n.execution=new Promise(function(e){return e(n.executor(r,o))}),n.execution.catch(function(){return S(n)}))),u.onnext(t),void 0===u.buffer||u.buffer.empty?u.pushes.length?(s=u.pushes.shift(),u.onnext=s.resolve,x(u,s.value)):u.state>=m?(O(u),x(u,_(u))):new Promise(function(e){return u.nexts.push({resolve:e,value:t})}):(a=x(u,u.buffer.remove()),u.pushes.length&&(e=u.pushes.shift(),u.buffer.add(e.value),u.onnext=e.resolve),a)},M.prototype.return=function(e){h(e);var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return O(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),x(t,_(t))},M.prototype.throw=function(e){var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return t.state<=0||t.state>=m||void 0!==t.buffer&&!t.buffer.empty?(O(t),null==t.err&&(t.err=e),x(t,_(t))):this.next(Promise.reject(e))},M.prototype[Symbol.asyncIterator]=function(){return this},M.race=C,M.merge=T,M.zip=A,M.latest=I,M);function M(e,t){E.set(this,{executor:e,buffer:t,err:void 0,state:0,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:v,onstop:v})}function j(e,h){function t(f){null!=f&&"function"==typeof f[Symbol.asyncIterator]?o.push(f[Symbol.asyncIterator]()):null!=f&&"function"==typeof f[Symbol.iterator]?o.push(f[Symbol.iterator]()):o.push(function(){var o,i,e,t=this,n=arguments,r=function(){return y(this,function(e){switch(e.label){case 0:return h.yieldValues?[4,p(f)]:[3,3];case 1:return[4,e.sent()];case 2:e.sent(),e.label=3;case 3:return h.returnValues?[4,p(f)]:[3,5];case 4:return[2,e.sent()];case 5:return[2]}})};if(Symbol.asyncIterator)return o=r.apply(t,n||[]),i=[],e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e;throw new TypeError("Symbol.asyncIterator is not defined.");function a(r){o[r]&&(e[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{(n=o[e](t)).value instanceof p?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}())}var n,r,o=[];try{for(var i=g(e),a=i.next();!a.done;a=i.next())t(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function C(e){var t=this,p=j(e,{returnValues:!0});return new k(function(f,h){return d(t,void 0,void 0,function(){var s,t,u,l,c,n;return y(this,function(e){switch(e.label){case 0:if(!p.length)return h(),[2];t=!1,h.then(function(){s(),t=!0}),e.label=1;case 1:e.trys.push([1,,5,7]),l=void 0,c=0,n=function(){var t,n,r,o,i,a;return y(this,function(e){switch(e.label){case 0:t=c;try{for(i=void 0,n=g(p),r=n.next();!r.done;r=n.next())o=r.value,Promise.resolve(o.next()).then(function(e){e.done?(h(),void 0===u&&(u=e)):c===t&&(c++,s(e))},function(e){return h(e)})}catch(e){i={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}}return[4,new Promise(function(e){return s=e})];case 1:return void 0===(l=e.sent())?[3,3]:[4,f(l.value)];case 2:e.sent(),e.label=3;case 3:return[2]}})},e.label=2;case 2:return t?[3,4]:[5,n()];case 3:return e.sent(),[3,2];case 4:return[2,u&&u.value];case 5:return h(),[4,Promise.race(p.map(function(e){return e.return&&e.return()}))];case 6:return e.sent(),[7];case 7:return[2]}})})})}function T(e){var t=this,n=j(e,{yieldValues:!0});return new k(function(s,u){return d(t,void 0,void 0,function(){var o,i,a,t=this;return y(this,function(e){switch(e.label){case 0:if(!n.length)return u(),[2];i=!(o=[]),u.then(function(){var t,e;i=!0;try{for(var n=g(o),r=n.next();!r.done;r=n.next())(0,r.value)()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,Promise.all(n.map(function(n,r){return d(t,void 0,void 0,function(){var t;return y(this,function(e){switch(e.label){case 0:e.trys.push([0,,6,9]),e.label=1;case 1:return i?[3,5]:(Promise.resolve(n.next()).then(function(e){return o[r](e)},function(e){return u(e)}),[4,new Promise(function(e){o[r]=e})]);case 2:return void 0===(t=e.sent())?[3,4]:t.done?(a=t,[2]):[4,s(t.value)];case 3:e.sent(),e.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return n.return?[4,n.return()]:[3,8];case 7:e.sent(),e.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return e.sent(),[2,a&&a.value];case 3:return u(),[7];case 4:return[2]}})})})}function A(e){var t=this,s=j(e,{returnValues:!0});return new k(function(i,a){return d(t,void 0,void 0,function(){var t,n,r,o;return y(this,function(e){switch(e.label){case 0:if(!s.length)return a(),[2,[]];n=!1,a.then(function(){t(),n=!0}),e.label=1;case 1:e.trys.push([1,,6,8]),e.label=2;case 2:return n?[3,5]:(Promise.all(s.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return a(e)}),[4,new Promise(function(e){return t=e})]);case 3:return void 0===(r=e.sent())?[2]:(o=r.map(function(e){return e.value}),r.some(function(e){return e.done})?[2,o]:[4,i(o)]);case 4:return e.sent(),[3,2];case 5:return[3,8];case 6:return a(),[4,Promise.all(s.map(function(e){return e.return&&e.return()}))];case 7:return e.sent(),[7];case 8:return[2]}})})})}function I(e){var t=this,n=j(e,{yieldValues:!0,returnValues:!0});return new k(function(l,c){return d(t,void 0,void 0,function(){var o,i,a,s,u,t=this;return y(this,function(e){switch(e.label){case 0:if(!n.length)return c(),[2,[]];a=!(i=[]),c.then(function(){var t,e;o();try{for(var n=g(i),r=n.next();!r.done;r=n.next())(0,r.value)()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}a=!0}),e.label=1;case 1:return e.trys.push([1,,5,7]),Promise.all(n.map(function(e){return e.next()})).then(function(e){return o(e)},function(e){return c(e)}),[4,new Promise(function(e){return o=e})];case 2:return void 0===(s=e.sent())?[2]:(u=s.map(function(e){return e.value}),s.every(function(e){return e.done})?[2,u]:[4,l(u.slice())]);case 3:return e.sent(),[4,Promise.all(n.map(function(n,r){return d(t,void 0,void 0,function(){var t;return y(this,function(e){switch(e.label){case 0:if(s[r].done)return[2,s[r].value];e.label=1;case 1:return a?[3,4]:(Promise.resolve(n.next()).then(function(e){return i[r](e)},function(e){return c(e)}),[4,new Promise(function(e){return i[r]=e})]);case 2:return void 0===(t=e.sent())?[2,s[r].value]:t.done?[2,t.value]:(u[r]=t.value,[4,l(u.slice())]);case 3:return e.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,e.sent()];case 5:return c(),[4,Promise.all(n.map(function(e){return e.return&&e.return()}))];case 6:return e.sent(),[7];case 7:return[2]}})})})}t.ZN=k},65064:function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){"use strict";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=/^\s+/,w=/\s+$/;function _(e,t){var n,r,o,i,a,s,u,l,c,f,h,p,d,y,g;return t=t||{},(e=e||"")instanceof _?e:this instanceof _?(h={r:0,g:0,b:0},d=null,g=y=!(p=1),p=S(p="object"==m(n="string"==typeof(n=e)?function(e){e=e.replace(b,"").replace(w,"").toLowerCase();var t,n=!1;if(x[e])e=x[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=I.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=I.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=I.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=I.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=I.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=I.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=I.hex8.exec(e))?{r:P(t[1]),g:P(t[2]),b:P(t[3]),a:j(t[4]),format:n?"name":"hex8"}:(t=I.hex6.exec(e))?{r:P(t[1]),g:P(t[2]),b:P(t[3]),format:n?"name":"hex"}:(t=I.hex4.exec(e))?{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),a:j(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=I.hex3.exec(e))&&{r:P(t[1]+""+t[1]),g:P(t[2]+""+t[2]),b:P(t[3]+""+t[3]),format:n?"name":"hex"}}(n):n)&&(R(n.r)&&R(n.g)&&R(n.b)?(l=n.r,c=n.g,f=n.b,h={r:255*O(l,255),g:255*O(c,255),b:255*O(f,255)},y=!0,g="%"===String(n.r).substr(-1)?"prgb":"rgb"):R(n.h)&&R(n.s)&&R(n.v)?(d=k(n.s),l=k(n.v),c=n.h,f=d,l=l,c=6*O(c,360),f=O(f,100),l=O(l,100),a=Math.floor(c),h={r:255*[l,u=l*(1-(c-=a)*f),s=l*(1-f),s,c=l*(1-(1-c)*f),l][f=a%6],g:255*[c,l,l,u,s,s][f],b:255*[s,s,c,l,l,u][f]},y=!0,g="hsv"):R(n.h)&&R(n.s)&&R(n.l)&&(d=k(n.s),a=k(n.l),s=n.h,c=d,l=a,s=O(s,360),c=O(c,100),l=O(l,100),0===c?r=o=i=l:(r=v(c=2*l-(l=l<.5?l*(1+c):l+c-l*c),l,s+1/3),o=v(c,l,s),i=v(c,l,s-1/3)),h={r:255*r,g:255*o,b:255*i},y=!0,g="hsl"),n.hasOwnProperty("a"))?n.a:p),u={ok:y,format:n.format||g,r:Math.min(255,Math.max(h.r,0)),g:Math.min(255,Math.max(h.g,0)),b:Math.min(255,Math.max(h.b,0)),a:p},this._originalInput=e,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||u.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),void(this._ok=u.ok)):new _(e,t);function v(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}function r(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,o=Math.max(e,t,n),i=Math.min(e,t,n),a=(o+i)/2;if(o==i)r=u=0;else{var s=o-i,u=.5<a?s/(2-o-i):s/(o+i);switch(o){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:u,l:a}}function o(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,o=Math.max(e,t,n),i=Math.min(e,t,n),a=o,s=o-i,u=0===o?0:s/o;if(o==i)r=0;else{switch(o){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:u,v:a}}function t(e,t,n,r){e=[E(Math.round(e).toString(16)),E(Math.round(t).toString(16)),E(Math.round(n).toString(16))];return r&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function i(e,t,n,r){return[E(M(r)),E(Math.round(e).toString(16)),E(Math.round(t).toString(16)),E(Math.round(n).toString(16))].join("")}function e(e,t){t=0===t?0:t||10;e=_(e).toHsl();return e.s-=t/100,e.s=v(e.s),_(e)}function n(e,t){t=0===t?0:t||10;e=_(e).toHsl();return e.s+=t/100,e.s=v(e.s),_(e)}function a(e){return _(e).desaturate(100)}function s(e,t){t=0===t?0:t||10;e=_(e).toHsl();return e.l+=t/100,e.l=v(e.l),_(e)}function u(e,t){t=0===t?0:t||10;e=_(e).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(-t/100*255))),e.g=Math.max(0,Math.min(255,e.g-Math.round(-t/100*255))),e.b=Math.max(0,Math.min(255,e.b-Math.round(-t/100*255))),_(e)}function l(e,t){t=0===t?0:t||10;e=_(e).toHsl();return e.l-=t/100,e.l=v(e.l),_(e)}function c(e,t){e=_(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,_(e)}function f(e){e=_(e).toHsl();return e.h=(e.h+180)%360,_(e)}function h(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=_(e).toHsl(),r=[_(e)],o=360/t,i=1;i<t;i++)r.push(_({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function p(e){var t=_(e).toHsl(),n=t.h;return[_(e),_({h:(n+72)%360,s:t.s,l:t.l}),_({h:(n+216)%360,s:t.s,l:t.l})]}function d(e,t,n){t=t||6,n=n||30;var r=_(e).toHsl(),o=360/n,i=[_(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(_(r));return i}function y(e,t){t=t||6;for(var e=_(e).toHsv(),n=e.h,r=e.s,o=e.v,i=[],a=1/t;t--;)i.push(_({h:n,s:r,v:o})),o=(o+a)%1;return i}_.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((.055+n)/1.055,2.4))+.0722*(e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4))},setAlpha:function(e){return this._a=S(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),e=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),e=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t=this._r,n=this._g,r=this._b,o=this._a;return t=[E(Math.round(t).toString(16)),E(Math.round(n).toString(16)),E(Math.round(r).toString(16)),E(M(o))],e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)&&t[3].charAt(0)==t[3].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0)+t[3].charAt(0):t.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*O(this._r,255))+"%",g:Math.round(100*O(this._g,255))+"%",b:Math.round(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*O(this._r,255))+"%, "+Math.round(100*O(this._g,255))+"%, "+Math.round(100*O(this._b,255))+"%)":"rgba("+Math.round(100*O(this._r,255))+"%, "+Math.round(100*O(this._g,255))+"%, "+Math.round(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(g[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+i(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+i((t=_(e))._r,t._g,t._b,t._a):n)+")"},toString:function(e){var t=!!e,n=(e=e||this._format,!1),r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return _(this.toString())},_applyModification:function(e,t){e=e.apply(null,[this].concat([].slice.call(t)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(s,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(l,arguments)},desaturate:function(){return this._applyModification(e,arguments)},saturate:function(){return this._applyModification(n,arguments)},greyscale:function(){return this._applyModification(a,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(d,arguments)},complement:function(){return this._applyCombination(f,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(p,arguments)},triad:function(){return this._applyCombination(h,[3])},tetrad:function(){return this._applyCombination(h,[4])}},_.fromRatio=function(e,t){if("object"==m(e)){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:k(e[n]));e=r}return _(e,t)},_.equals=function(e,t){return!(!e||!t)&&_(e).toRgbString()==_(t).toRgbString()},_.random=function(){return _.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},_.mix=function(e,t,n){n=0===n?0:n||50;e=_(e).toRgb(),t=_(t).toRgb(),n/=100;return _({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},_.readability=function(e,t){e=_(e),t=_(t);return(Math.max(e.getLuminance(),t.getLuminance())+.05)/(Math.min(e.getLuminance(),t.getLuminance())+.05)},_.isReadable=function(e,t,n){var r=_.readability(e,t),o=!1;switch(t=((e=(e=n)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),(n={level:t="AA"!==t&&"AAA"!==t?"AA":t,size:e="small"!==e&&"large"!==e?"small":e}).level+n.size){case"AAsmall":case"AAAlarge":o=4.5<=r;break;case"AAlarge":o=3<=r;break;case"AAAsmall":o=7<=r}return o},_.mostReadable=function(e,t,n){for(var r,o=null,i=0,a=(n=n||{}).includeFallbackColors,s=n.level,u=n.size,l=0;l<t.length;l++)(r=_.readability(e,t[l]))>i&&(i=r,o=_(t[l]));return _.isReadable(e,o,{level:s,size:u})||!a?o:(n.includeFallbackColors=!1,_.mostReadable(e,["#fff","#000"],n))};var x=_.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},g=_.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(x);function S(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function O(e,t){var n="string"==typeof(e="string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)?"100%":e)&&-1!=e.indexOf("%");return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function v(e){return Math.min(1,Math.max(0,e))}function P(e){return parseInt(e,16)}function E(e){return 1==e.length?"0"+e:""+e}function k(e){return e=e<=1?100*e+"%":e}function M(e){return Math.round(255*parseFloat(e)).toString(16)}function j(e){return P(e)/255}T="[\\s|\\(]+("+(C="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?",A="[\\s|\\(]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")[,|\\s]+("+C+")\\s*\\)?";var C,T,A,I={CSS_UNIT:new RegExp(C),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+A),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+A),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+A),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function R(e){return I.CSS_UNIT.exec(e)}return _},"object"===o(t)?e.exports=r():void 0!==(n="function"==typeof(r=r)?r.call(t,n,t,e):r)&&(e.exports=n)},4644:function(N,e,t){"use strict";function n(e,t,n){(e.prototype=t.prototype=n).constructor=e}function r(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}function l(){}t.r(e),t.d(e,{interpolate:function(){return k},interpolateArray:function(){return ue},interpolateBasis:function(){return ee},interpolateBasisClosed:function(){return te},interpolateCubehelix:function(){return Ke},interpolateCubehelixLong:function(){return Qe},interpolateDate:function(){return ce},interpolateDiscrete:function(){return de},interpolateHcl:function(){return Ve},interpolateHclLong:function(){return We},interpolateHsl:function(){return Ee},interpolateHslLong:function(){return ke},interpolateHue:function(){return ye},interpolateLab:function(){return ze},interpolateNumber:function(){return S},interpolateNumberArray:function(){return x},interpolateObject:function(){return fe},interpolateRgb:function(){return _},interpolateRgbBasis:function(){return ie},interpolateRgbBasisClosed:function(){return ae},interpolateRound:function(){return ge},interpolateString:function(){return he},interpolateTransformCss:function(){return _e},interpolateTransformSvg:function(){return xe},interpolateZoom:function(){return Oe},piecewise:function(){return $e},quantize:function(){return et}});var t="\\s*([+-]?\\d+)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3,8})$/,B=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),F=new RegExp("^rgb\\(".concat(o,",").concat(o,",").concat(o,"\\)$")),G=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(e,"\\)$")),z=new RegExp("^rgba\\(".concat(o,",").concat(o,",").concat(o,",").concat(e,"\\)$")),U=new RegExp("^hsl\\(".concat(e,",").concat(o,",").concat(o,"\\)$")),V=new RegExp("^hsla\\(".concat(e,",").concat(o,",").concat(o,",").concat(e,"\\)$")),W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Y(){return this.rgb().formatHex()}function H(){return this.rgb().formatRgb()}function c(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=D.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?X(t):3===n?new h(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?i(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?i(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=B.exec(e))?new h(t[1],t[2],t[3],1):(t=F.exec(e))?new h(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=G.exec(e))?i(t[1],t[2],t[3],t[4]):(t=z.exec(e))?i(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=U.exec(e))?Z(t[1],t[2]/100,t[3]/100,1):(t=V.exec(e))?Z(t[1],t[2]/100,t[3]/100,t[4]):W.hasOwnProperty(e)?X(W[e]):"transparent"===e?new h(NaN,NaN,NaN,0):null}function X(e){return new h(e>>16&255,e>>8&255,255&e,1)}function i(e,t,n,r){return new h(e=r<=0?t=n=NaN:e,t,n,r)}function f(e){return(e=e instanceof l?e:c(e))?new h((e=e.rgb()).r,e.g,e.b,e.opacity):new h}function u(e,t,n,r){return 1===arguments.length?f(e):new h(e,t,n,null==r?1:r)}function h(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function q(){return"#".concat(p(this.r)).concat(p(this.g)).concat(p(this.b))}function J(){var e=a(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(s(this.r),", ").concat(s(this.g),", ").concat(s(this.b)).concat(1===e?")":", ".concat(e,")"))}function a(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function s(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function p(e){return((e=s(e))<16?"0":"")+e.toString(16)}function Z(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new y(e,t,n,r)}function K(e){var t,n,r,o,i,a,s,u;return e instanceof y?new y(e.h,e.s,e.l,e.opacity):(e=e instanceof l?e:c(e))?e instanceof y?e:(t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=NaN,u=((i=Math.max(t,n,r))+o)/2,(s=i-o)?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=0<u&&u<1?0:a,new y(a,s,u,e.opacity)):new y}function d(e,t,n,r){return 1===arguments.length?K(e):new y(e,t,n,null==r?1:r)}function y(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Q(e){return(e=(e||0)%360)<0?e+360:e}function g(e){return Math.max(0,Math.min(1,e||0))}function v(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function $(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}function ee(a){var s=a.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=a[t],r=a[t+1],o=0<t?a[t-1]:2*n-r,i=t<s-1?a[t+2]:2*r-n;return $((e-t/s)*s,o,n,r,i)}}function te(a){var s=a.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),n=a[(t+s-1)%s],r=a[t%s],o=a[(t+1)%s],i=a[(t+2)%s];return $((e-t/s)*s,n,r,o,i)}}n(l,c,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Y,formatHex:Y,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return K(this).formatHsl()},formatRgb:H,toString:H}),n(h,u,r(l,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new h(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new h(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new h(s(this.r),s(this.g),s(this.b),a(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:q,formatHex:q,formatHex8:function(){return"#".concat(p(this.r)).concat(p(this.g)).concat(p(this.b)).concat(p(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:J,toString:J})),n(y,d,r(l,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new y(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new y(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new h(v(240<=e?e-240:120+e,n,t),v(e,n,t),v(e<120?240+e:e-120,n,t),this.opacity)},clamp:function(){return new y(Q(this.h),g(this.s),g(this.l),a(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=a(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Q(this.h),", ").concat(100*g(this.s),"%, ").concat(100*g(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var m=function(e){return function(){return e}};function ne(t,n){return function(e){return t+e*n}}function b(e,t){var n=t-e;return n?ne(e,180<n||n<-180?n-360*Math.round(n/360):n):m(isNaN(e)?t:e)}function re(i){return 1==(i=+i)?w:function(e,t){return t-e?(r=t,o=i,n=Math.pow(e,o),r=Math.pow(r,o)-n,o=1/o,function(e){return Math.pow(n+e*r,o)}):m(isNaN(e)?t:e);var n,r,o}}function w(e,t){var n=t-e;return n?ne(e,n):m(isNaN(e)?t:e)}var _=function e(t){var a=re(t);function n(t,e){var n=a((t=u(t)).r,(e=u(e)).r),r=a(t.g,e.g),o=a(t.b,e.b),i=w(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=o(e),t.opacity=i(e),t+""}}return n.gamma=e,n}(1);function oe(s){return function(e){for(var t,n=e.length,r=new Array(n),o=new Array(n),i=new Array(n),a=0;a<n;++a)t=u(e[a]),r[a]=t.r||0,o[a]=t.g||0,i[a]=t.b||0;return r=s(r),o=s(o),i=s(i),t.opacity=1,function(e){return t.r=r(e),t.g=o(e),t.b=i(e),t+""}}}var ie=oe(ee),ae=oe(te);function x(t,n){n=n||[];var r,o=t?Math.min(n.length,t.length):0,i=n.slice();return function(e){for(r=0;r<o;++r)i[r]=t[r]*(1-e)+n[r]*e;return i}}function se(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ue(e,t){return(se(t)?x:le)(e,t)}function le(e,t){for(var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),a=0;a<r;++a)o[a]=k(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(e){for(a=0;a<r;++a)i[a]=o[a](e);return i}}function ce(t,n){var r=new Date;return t=+t,n=+n,function(e){return r.setTime(t*(1-e)+n*e),r}}function S(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var n,r={},o={};for(n in null!==e&&"object"===O(e)||(e={}),t=null!==t&&"object"===O(t)?t:{})n in e?r[n]=k(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}var P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,E=new RegExp(P.source,"g");function he(e,r){var t,n,o,i,a,s=P.lastIndex=E.lastIndex=0,u=-1,l=[],c=[];for(e+="",r+="";(t=P.exec(e))&&(n=E.exec(r));)(o=n.index)>s&&(o=r.slice(s,o),l[u]?l[u]+=o:l[++u]=o),(t=t[0])===(n=n[0])?l[u]?l[u]+=n:l[++u]=n:(l[++u]=null,c.push({i:u,x:S(t,n)})),s=E.lastIndex;return s<r.length&&(o=r.slice(s),l[u]?l[u]+=o:l[++u]=o),l.length<2?c[0]?(a=c[0].x,function(e){return a(e)+""}):(i=r,function(){return i}):(r=c.length,function(e){for(var t,n=0;n<r;++n)l[(t=c[n]).i]=t.x(e);return l.join("")})}function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=pe(t);return null==t||"boolean"===n?m(t):("number"===n?S:"string"===n?(n=c(t))?(t=n,_):he:t instanceof c?_:t instanceof Date?ce:se(t)?x:Array.isArray(t)?le:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?fe:S)(e,t)}function de(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function ye(e,t){var n=b(+e,+t);return function(e){e=n(e);return e-360*Math.floor(e/360)}}function ge(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var M,ve=180/Math.PI,me={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function be(e,t,n,r,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*ve,skewX:Math.atan(u)*ve,scaleX:a,scaleY:s}}function we(f,h,p,d){function y(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,o,i,a,s,u,l=[],c=[];return e=f(e),t=f(t),n=e.translateX,r=e.translateY,o=t.translateX,i=t.translateY,a=l,s=c,n!==o||r!==i?(u=a.push("translate(",null,h,null,p),s.push({i:u-4,x:S(n,o)},{i:u-2,x:S(r,i)})):(o||i)&&a.push("translate("+o+h+i+p),s=e.rotate,n=t.rotate,u=l,s!==n?(180<s-n?n+=360:180<n-s&&(s+=360),c.push({i:u.push(y(u)+"rotate(",null,d)-2,x:S(s,n)})):n&&u.push(y(u)+"rotate("+n+d),r=e.skewX,a=t.skewX,o=l,r!==a?c.push({i:o.push(y(o)+"skewX(",null,d)-2,x:S(r,a)}):a&&o.push(y(o)+"skewX("+a+d),i=e.scaleX,s=e.scaleY,n=t.scaleX,r=t.scaleY,o=l,a=c,i!==n||s!==r?(e=o.push(y(o)+"scale(",null,",",null,")"),a.push({i:e-4,x:S(i,n)},{i:e-2,x:S(s,r)})):1===n&&1===r||o.push(y(o)+"scale("+n+","+r+")"),function(e){for(var t,n=-1,r=c.length;++n<r;)l[(t=c[n]).i]=t.x(e);return l.join("")}}}var _e=we(function(e){e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return e.isIdentity?me:be(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xe=we(function(e){return null!=e&&((M=M||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),e=M.transform.baseVal.consolidate())?be((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):me},", ",")",")");function Se(e){return((e=Math.exp(e))+1/e)/2}var Oe=function n(f,h,p){function e(e,t){var r,o,i,a=e[0],s=e[1],u=e[2],e=t[0],n=t[1],t=t[2],l=e-a,c=n-s,e=l*l+c*c;return(t=e<1e-12?(i=Math.log(t/u)/f,function(e){return[a+e*l,s+e*c,u*Math.exp(f*e*i)]}):(r=Math.sqrt(e),n=(t*t-u*u+p*e)/(2*u*h*r),e=(t*t-u*u-p*e)/(2*t*h*r),o=Math.log(Math.sqrt(n*n+1)-n),i=(Math.log(Math.sqrt(e*e+1)-e)-o)/f,function(e){var e=e*i,t=Se(o),n=u/(h*r)*(t*(((n=Math.exp(2*(f*e+o)))-1)/(n+1))-((n=Math.exp(o))-1/n)/2);return[a+n*l,s+n*c,u*t/Se(f*e+o)]})).duration=1e3*i*f/Math.SQRT2,t}return e.rho=function(e){var e=Math.max(.001,+e),t=e*e;return n(e,t,t*t)},e}(Math.SQRT2,2,4);function Pe(a){return function(t,e){var n=a((t=d(t)).h,(e=d(e)).h),r=w(t.s,e.s),o=w(t.l,e.l),i=w(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=o(e),t.opacity=i(e),t+""}}}var Ee=Pe(b),ke=Pe(w),Me=Math.PI/180,je=180/Math.PI,Ce=.96422,Te=1,Ae=.82521,Ie=4/29,Re=6/29*3*(6/29),Le=6/29*(6/29)*(6/29);function Ne(e){var t,n,r,o,i,a;return e instanceof C?new C(e.l,e.a,e.b,e.opacity):e instanceof I?Ge(e):(a=T((.2225045*(r=Be((e=e instanceof h?e:f(e)).r))+.7168786*(o=Be(e.g))+.0606169*(i=Be(e.b)))/Te),r===o&&o===i?t=n=a:(t=T((.4360747*r+.3850649*o+.1430804*i)/Ce),n=T((.0139322*r+.0971045*o+.7141733*i)/Ae)),new C(116*a-16,500*(t-a),200*(a-n),e.opacity))}function j(e,t,n,r){return 1===arguments.length?Ne(e):new C(e,t,n,null==r?1:r)}function C(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function T(e){return Le<e?Math.pow(e,1/3):e/Re+Ie}function A(e){return 6/29<e?e*e*e:Re*(e-Ie)}function De(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Be(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fe(e,t,n,r){return 1===arguments.length?(o=e)instanceof I?new I(o.h,o.c,o.l,o.opacity):0===(o=o instanceof C?o:Ne(o)).a&&0===o.b?new I(NaN,0<o.l&&o.l<100?0:NaN,o.l,o.opacity):new I((i=Math.atan2(o.b,o.a)*je)<0?360+i:i,Math.sqrt(o.a*o.a+o.b*o.b),o.l,o.opacity):new I(e,t,n,null==r?1:r);var o,i}function I(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Ge(e){var t;return isNaN(e.h)?new C(e.l,0,0,e.opacity):(t=e.h*Me,new C(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity))}function ze(t,e){var n=w((t=j(t)).l,(e=j(e)).l),r=w(t.a,e.a),o=w(t.b,e.b),i=w(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=o(e),t.opacity=i(e),t+""}}function Ue(a){return function(t,e){var n=a((t=Fe(t)).h,(e=Fe(e)).h),r=w(t.c,e.c),o=w(t.l,e.l),i=w(t.opacity,e.opacity);return function(e){return t.h=n(e),t.c=r(e),t.l=o(e),t.opacity=i(e),t+""}}}n(C,j,r(l,{brighter:function(e){return new C(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new C(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new h(De(3.1338561*(t=Ce*A(t))-1.6168667*(e=Te*A(e))-.4906146*(n=Ae*A(n))),De(-.9787684*t+1.9161415*e+.033454*n),De(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),n(I,Fe,r(l,{brighter:function(e){return new I(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new I(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Ge(this).rgb()}}));var Ve=Ue(b),We=Ue(w),Ye=-.90649,R=1.97294,He=R*Ye,Xe=1.78277*R,qe=-.6557636667999999;function Je(e,t,n,r){return 1===arguments.length?(o=e)instanceof L?new L(o.h,o.s,o.l,o.opacity):(i=(o=o instanceof h?o:f(o)).r/255,a=o.g/255,u=o.b/255,u=(R*(a-(i=(qe*u+He*i-Xe*a)/(qe+He-Xe)))- -.29227*(a=u-i))/Ye,new L((u=(s=Math.sqrt(u*u+a*a)/(R*i*(1-i)))?Math.atan2(u,a)*je-120:NaN)<0?u+360:u,s,i,o.opacity)):new L(e,t,n,null==r?1:r);var o,i,a,s,u}function L(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ze(s){return function e(a){function t(t,e){var n=s((t=Je(t)).h,(e=Je(e)).h),r=w(t.s,e.s),o=w(t.l,e.l),i=w(t.opacity,e.opacity);return function(e){return t.h=n(e),t.s=r(e),t.l=o(Math.pow(e,a)),t.opacity=i(e),t+""}}return a=+a,t.gamma=e,t}(1)}n(L,Je,r(l,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new L(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new L(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Me,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),e=Math.sin(e);return new h(255*(t+n*(-.14861*r+1.78277*e)),255*(t+n*(-.29227*r+Ye*e)),255*(t+R*r*n),this.opacity)}}));var Ke=Ze(b),Qe=Ze(w);function $e(e,t){void 0===t&&(t=e,e=k);for(var n=0,r=t.length-1,o=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(o,o=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function et(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},97582:function(N,e,t){"use strict";t.r(e),t.d(e,{__addDisposableResource:function(){return I},__assign:function(){return o},__asyncDelegator:function(){return O},__asyncGenerator:function(){return S},__asyncValues:function(){return P},__await:function(){return x},__awaiter:function(){return p},__classPrivateFieldGet:function(){return C},__classPrivateFieldIn:function(){return A},__classPrivateFieldSet:function(){return T},__createBinding:function(){return y},__decorate:function(){return a},__disposeResources:function(){return L},__esDecorate:function(){return u},__exportStar:function(){return g},__extends:function(){return n},__generator:function(){return d},__importDefault:function(){return j},__importStar:function(){return M},__makeTemplateObject:function(){return E},__metadata:function(){return h},__param:function(){return s},__propKey:function(){return c},__read:function(){return m},__rest:function(){return i},__runInitializers:function(){return l},__setFunctionName:function(){return f},__spread:function(){return b},__spreadArray:function(){return _},__spreadArrays:function(){return w},__values:function(){return v}});var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function a(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a}function s(n,r){return function(e,t){r(e,t,n)}}function u(e,t,n,r,o,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,l="getter"===u?"get":"setter"===u?"set":"value",e=!t&&e?r.static?e:e.prototype:null,c=t||(e?Object.getOwnPropertyDescriptor(e,r.name):{}),f=!1,h=n.length-1;0<=h;h--){var p,d={};for(p in r)d[p]="access"===p?{}:r[p];for(p in r.access)d.access[p]=r.access[p];d.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var y=(0,n[h])("accessor"===u?{get:c.get,set:c.set}:c[l],d);if("accessor"===u){if(void 0!==y){if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(s=a(y.get))&&(c.get=s),(s=a(y.set))&&(c.set=s),(s=a(y.init))&&o.unshift(s)}}else(s=a(y))&&("field"===u?o.unshift(s):c[l]=s)}e&&Object.defineProperty(e,r.name,c),f=!0}function l(e,t,n){for(var r=2<arguments.length,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function d(r,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))u.label=t[1];else if(6===t[0]&&u.label<s[1])u.label=s[1],s=t;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(t)}}t=o.call(r,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var y=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||y(t,e,n)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function _(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function S(e,t,n){var o,i,a;if(Symbol.asyncIterator)return o=n.apply(e,t||[]),i=[],a={},r("next"),r("throw"),r("return"),a[Symbol.asyncIterator]=function(){return this},a;throw new TypeError("Symbol.asyncIterator is not defined.");function r(r){o[r]&&(a[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{(n=o[e](t)).value instanceof x?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function O(r){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(o=!o)?{value:x(r[t](e)),done:!1}:n?n(e):e}:n}}function P(a){var e,t;if(Symbol.asyncIterator)return(t=a[Symbol.asyncIterator])?t.call(a):(a=v(a),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.");function n(i){e[i]=a[i]&&function(o){return new Promise(function(e,t){var n,r;n=e,e=t,r=(o=a[i](o)).done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function M(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&y(t,e,n);return k(t,e),t}function j(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function T(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&o:t.has(e))return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n;throw new TypeError("Cannot write private member to an object whose class did not declare it")}function A(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var R="function"==typeof SuppressedError?SuppressedError:function(e,t,n){n=new Error(n);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function L(r){function o(e){r.error=r.hasError?new R(e,r.error,"An error was suppressed during disposal."):e,r.hasError=!0}return function t(){for(;r.stack.length;){var e=r.stack.pop();try{var n=e.dispose&&e.dispose.call(e.value);if(e.async)return Promise.resolve(n).then(t,function(e){return o(e),t()})}catch(e){o(e)}}if(r.hasError)throw r.error}()}e.default={__extends:n,__assign:o,__rest:i,__decorate:a,__param:s,__metadata:h,__awaiter:p,__generator:d,__createBinding:y,__exportStar:g,__values:v,__read:m,__spread:b,__spreadArrays:w,__spreadArray:_,__await:x,__asyncGenerator:S,__asyncDelegator:O,__asyncValues:P,__makeTemplateObject:E,__importStar:M,__importDefault:j,__classPrivateFieldGet:C,__classPrivateFieldSet:T,__classPrivateFieldIn:A,__addDisposableResource:I,__disposeResources:L}}},o={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r(93123),r(55023),r(55984),r(3679)}.call(this,n("8oxB"))}}]);